var Hk=Object.defineProperty;var ME=u=>{throw TypeError(u)};var Gk=(u,n,o)=>n in u?Hk(u,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):u[n]=o;var Jt=(u,n,o)=>Gk(u,typeof n!="symbol"?n+"":n,o),g6=(u,n,o)=>n.has(u)||ME("Cannot "+o);var de=(u,n,o)=>(g6(u,n,"read from private field"),o?o.call(u):n.get(u)),Et=(u,n,o)=>n.has(u)?ME("Cannot add the same private member more than once"):n instanceof WeakSet?n.add(u):n.set(u,o),ct=(u,n,o,i)=>(g6(u,n,"write to private field"),i?i.call(u,o):n.set(u,o),o),nt=(u,n,o)=>(g6(u,n,"access private method"),o);var iT=(u,n,o,i)=>({set _(t){ct(u,n,t,o)},get _(){return de(u,n,i)}});import{g as VA,c as Bl}from"./react-BL4LEYSH.js";var m6={exports:{}},v6={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CE;function zk(){return CE||(CE=1,(function(u){function n(B,X){var J=B.length;B.push(X);e:for(;0<J;){var ie=J-1>>>1,U=B[ie];if(0<t(U,X))B[ie]=X,B[J]=U,J=ie;else break e}}function o(B){return B.length===0?null:B[0]}function i(B){if(B.length===0)return null;var X=B[0],J=B.pop();if(J!==X){B[0]=J;e:for(var ie=0,U=B.length,fe=U>>>1;ie<fe;){var me=2*(ie+1)-1,he=B[me],te=me+1,xe=B[te];if(0>t(he,J))te<U&&0>t(xe,he)?(B[ie]=xe,B[te]=J,ie=te):(B[ie]=he,B[me]=J,ie=me);else if(te<U&&0>t(xe,J))B[ie]=xe,B[te]=J,ie=te;else break e}}return X}function t(B,X){var J=B.sortIndex-X.sortIndex;return J!==0?J:B.id-X.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var e=performance;u.unstable_now=function(){return e.now()}}else{var r=Date,a=r.now();u.unstable_now=function(){return r.now()-a}}var c=[],s=[],d=1,l=null,f=3,h=!1,p=!1,y=!1,_=!1,b=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;function T(B){for(var X=o(s);X!==null;){if(X.callback===null)i(s);else if(X.startTime<=B)i(s),X.sortIndex=X.expirationTime,n(c,X);else break;X=o(s)}}function v(B){if(y=!1,T(B),!p)if(o(c)!==null)p=!0,A||(A=!0,E());else{var X=o(s);X!==null&&M(v,X.startTime-B)}}var A=!1,I=-1,q=5,O=-1;function w(){return _?!0:!(u.unstable_now()-O<q)}function S(){if(_=!1,A){var B=u.unstable_now();O=B;var X=!0;try{e:{p=!1,y&&(y=!1,m(I),I=-1),h=!0;var J=f;try{t:{for(T(B),l=o(c);l!==null&&!(l.expirationTime>B&&w());){var ie=l.callback;if(typeof ie=="function"){l.callback=null,f=l.priorityLevel;var U=ie(l.expirationTime<=B);if(B=u.unstable_now(),typeof U=="function"){l.callback=U,T(B),X=!0;break t}l===o(c)&&i(c),T(B)}else i(c);l=o(c)}if(l!==null)X=!0;else{var fe=o(s);fe!==null&&M(v,fe.startTime-B),X=!1}}break e}finally{l=null,f=J,h=!1}X=void 0}}finally{X?E():A=!1}}}var E;if(typeof g=="function")E=function(){g(S)};else if(typeof MessageChannel<"u"){var R=new MessageChannel,L=R.port2;R.port1.onmessage=S,E=function(){L.postMessage(null)}}else E=function(){b(S,0)};function M(B,X){I=b(function(){B(u.unstable_now())},X)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(B){B.callback=null},u.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<B?Math.floor(1e3/B):5},u.unstable_getCurrentPriorityLevel=function(){return f},u.unstable_next=function(B){switch(f){case 1:case 2:case 3:var X=3;break;default:X=f}var J=f;f=X;try{return B()}finally{f=J}},u.unstable_requestPaint=function(){_=!0},u.unstable_runWithPriority=function(B,X){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var J=f;f=B;try{return X()}finally{f=J}},u.unstable_scheduleCallback=function(B,X,J){var ie=u.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?ie+J:ie):J=ie,B){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=J+U,B={id:d++,callback:X,priorityLevel:B,startTime:J,expirationTime:U,sortIndex:-1},J>ie?(B.sortIndex=J,n(s,B),o(c)===null&&B===o(s)&&(y?(m(I),I=-1):y=!0,M(v,J-ie))):(B.sortIndex=U,n(c,B),p||h||(p=!0,A||(A=!0,E()))),B},u.unstable_shouldYield=w,u.unstable_wrapCallback=function(B){var X=f;return function(){var J=f;f=X;try{return B.apply(this,arguments)}finally{f=J}}}})(v6)),v6}var qE;function _he(){return qE||(qE=1,m6.exports=zk()),m6.exports}var ma={},t0={},va={},r0={},Ta={},n0={},wa={},Sa={},lv="delete",Ht=5,fn=1<<Ht,$r=fn-1,Ot={};function pA(){return{value:!1}}function hn(u){u&&(u.value=!0)}function QA(){}function wf(u){return u.size===void 0&&(u.size=u.__iterate(oG)),u.size}function ki(u,n){if(typeof n!="number"){var o=n>>>0;if(""+o!==n||o===4294967295)return NaN;n=o}return n<0?wf(u)+n:n}function oG(){return!0}function fv(u,n,o){return(u===0&&!cG(u)||o!==void 0&&u<=-o)&&(n===void 0||o!==void 0&&n>=o)}function Df(u,n){return sG(u,n,0)}function hv(u,n){return sG(u,n,n)}function sG(u,n,o){return u===void 0?o:cG(u)?n===1/0?n:Math.max(0,n+u)|0:n===void 0||n===u?u:Math.min(n,u)|0}function cG(u){return u<0||u===0&&1/u===-1/0}var dG="@@__IMMUTABLE_ITERABLE__@@";function Nr(u){return!!(u&&u[dG])}var lG="@@__IMMUTABLE_KEYED__@@";function Ct(u){return!!(u&&u[lG])}var fG="@@__IMMUTABLE_INDEXED__@@";function Or(u){return!!(u&&u[fG])}function jf(u){return Ct(u)||Or(u)}var Gt=function(n){return Nr(n)?n:Pr(n)},yn=(function(u){function n(o){return Ct(o)?o:Yi(o)}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n})(Gt),Gl=(function(u){function n(o){return Or(o)?o:_n(o)}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n})(Gt),Lf=(function(u){function n(o){return Nr(o)&&!jf(o)?o:qf(o)}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n})(Gt);Gt.Keyed=yn;Gt.Indexed=Gl;Gt.Set=Lf;var hG="@@__IMMUTABLE_SEQ__@@";function pv(u){return!!(u&&u[hG])}var pG="@@__IMMUTABLE_RECORD__@@";function Wi(u){return!!(u&&u[pG])}function un(u){return Nr(u)||Wi(u)}var Mf="@@__IMMUTABLE_ORDERED__@@";function an(u){return!!(u&&u[Mf])}var bv=0,Un=1,pn=2,bA=typeof Symbol=="function"&&Symbol.iterator,bG="@@iterator",mw=bA||bG,Rt=function(n){this.next=n};Rt.prototype.toString=function(){return"[Iterator]"};Rt.KEYS=bv;Rt.VALUES=Un;Rt.ENTRIES=pn;Rt.prototype.inspect=Rt.prototype.toSource=function(){return this.toString()};Rt.prototype[mw]=function(){return this};function zt(u,n,o,i){var t=u===0?n:u===1?o:[n,o];return i?i.value=t:i={value:t,done:!1},i}function Ur(){return{value:void 0,done:!0}}function HA(u){return Array.isArray(u)?!0:!!vw(u)}function BE(u){return u&&typeof u.next=="function"}function yA(u){var n=vw(u);return n&&n.call(u)}function vw(u){var n=u&&(bA&&u[bA]||u[bG]);if(typeof n=="function")return n}function Xk(u){var n=vw(u);return n&&n===u.entries}function Jk(u){var n=vw(u);return n&&n===u.keys}var Cf=Object.prototype.hasOwnProperty;function GA(u){return Array.isArray(u)||typeof u=="string"?!0:u&&typeof u=="object"&&Number.isInteger(u.length)&&u.length>=0&&(u.length===0?Object.keys(u).length===1:u.hasOwnProperty(u.length-1))}var Pr=(function(u){function n(o){return o==null?XA():un(o)?o.toSeq():Kk(o)}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.toSeq=function(){return this},n.prototype.toString=function(){return this.__toString("Seq {","}")},n.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},n.prototype.__iterate=function(i,t){var e=this._cache;if(e){for(var r=e.length,a=0;a!==r;){var c=e[t?r-++a:a++];if(i(c[1],c[0],this)===!1)break}return a}return this.__iterateUncached(i,t)},n.prototype.__iterator=function(i,t){var e=this._cache;if(e){var r=e.length,a=0;return new Rt(function(){if(a===r)return Ur();var c=e[t?r-++a:a++];return zt(i,c[0],c[1])})}return this.__iteratorUncached(i,t)},n})(Gt),Yi=(function(u){function n(o){return o==null?XA().toKeyedSeq():Nr(o)?Ct(o)?o.toSeq():o.fromEntrySeq():Wi(o)?o.toSeq():JA(o)}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.toKeyedSeq=function(){return this},n})(Pr),_n=(function(u){function n(o){return o==null?XA():Nr(o)?Ct(o)?o.entrySeq():o.toIndexedSeq():Wi(o)?o.toSeq().entrySeq():yG(o)}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.of=function(){return n(arguments)},n.prototype.toIndexedSeq=function(){return this},n.prototype.toString=function(){return this.__toString("Seq [","]")},n})(Pr),qf=(function(u){function n(o){return(Nr(o)&&!jf(o)?o:_n(o)).toSetSeq()}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.of=function(){return n(arguments)},n.prototype.toSetSeq=function(){return this},n})(Pr);Pr.isSeq=pv;Pr.Keyed=Yi;Pr.Set=qf;Pr.Indexed=_n;Pr.prototype[hG]=!0;var Ul=(function(u){function n(o){this._array=o,this.size=o.length}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.get=function(i,t){return this.has(i)?this._array[ki(this,i)]:t},n.prototype.__iterate=function(i,t){for(var e=this._array,r=e.length,a=0;a!==r;){var c=t?r-++a:a++;if(i(e[c],c,this)===!1)break}return a},n.prototype.__iterator=function(i,t){var e=this._array,r=e.length,a=0;return new Rt(function(){if(a===r)return Ur();var c=t?r-++a:a++;return zt(i,c,e[c])})},n})(_n),zA=(function(u){function n(o){var i=Object.keys(o).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(o):[]);this._object=o,this._keys=i,this.size=i.length}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.get=function(i,t){return t!==void 0&&!this.has(i)?t:this._object[i]},n.prototype.has=function(i){return Cf.call(this._object,i)},n.prototype.__iterate=function(i,t){for(var e=this._object,r=this._keys,a=r.length,c=0;c!==a;){var s=r[t?a-++c:c++];if(i(e[s],s,this)===!1)break}return c},n.prototype.__iterator=function(i,t){var e=this._object,r=this._keys,a=r.length,c=0;return new Rt(function(){if(c===a)return Ur();var s=r[t?a-++c:c++];return zt(i,s,e[s])})},n})(Yi);zA.prototype[Mf]=!0;var kk=(function(u){function n(o){this._collection=o,this.size=o.length||o.size}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.__iterateUncached=function(i,t){if(t)return this.cacheResult().__iterate(i,t);var e=this._collection,r=yA(e),a=0;if(BE(r))for(var c;!(c=r.next()).done&&i(c.value,a++,this)!==!1;);return a},n.prototype.__iteratorUncached=function(i,t){if(t)return this.cacheResult().__iterator(i,t);var e=this._collection,r=yA(e);if(!BE(r))return new Rt(Ur);var a=0;return new Rt(function(){var c=r.next();return c.done?c:zt(i,a++,c.value)})},n})(_n),$E;function XA(){return $E||($E=new Ul([]))}function JA(u){var n=kA(u);if(n)return n.fromEntrySeq();if(typeof u=="object")return new zA(u);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+u)}function yG(u){var n=kA(u);if(n)return n;throw new TypeError("Expected Array or collection object of values: "+u)}function Kk(u){var n=kA(u);if(n)return Xk(u)?n.fromEntrySeq():Jk(u)?n.toSetSeq():n;if(typeof u=="object")return new zA(u);throw new TypeError("Expected Array or collection object of values, or keyed object: "+u)}function kA(u){return GA(u)?new Ul(u):HA(u)?new kk(u):void 0}var _G="@@__IMMUTABLE_MAP__@@";function yv(u){return!!(u&&u[_G])}function Tw(u){return yv(u)&&an(u)}function hw(u){return!!(u&&typeof u.equals=="function"&&typeof u.hashCode=="function")}function fr(u,n){if(u===n||u!==u&&n!==n)return!0;if(!u||!n)return!1;if(typeof u.valueOf=="function"&&typeof n.valueOf=="function"){if(u=u.valueOf(),n=n.valueOf(),u===n||u!==u&&n!==n)return!0;if(!u||!n)return!1}return!!(hw(u)&&hw(n)&&u.equals(n))}var i0=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(n,o){n|=0,o|=0;var i=n&65535,t=o&65535;return i*t+((n>>>16)*t+i*(o>>>16)<<16>>>0)|0};function ww(u){return u>>>1&1073741824|u&3221225471}var Wk=Object.prototype.valueOf;function Br(u){if(u==null)return UE(u);if(typeof u.hashCode=="function")return ww(u.hashCode(u));var n=nK(u);if(n==null)return UE(n);switch(typeof n){case"boolean":return n?1108378657:1108378656;case"number":return Yk(n);case"string":return n.length>iK?Zk(n):_A(n);case"object":case"function":return tK(n);case"symbol":return eK(n);default:if(typeof n.toString=="function")return _A(n.toString());throw new Error("Value type "+typeof n+" cannot be hashed.")}}function UE(u){return u===null?1108378658:1108378659}function Yk(u){if(u!==u||u===1/0)return 0;var n=u|0;for(n!==u&&(n^=u*4294967295);u>4294967295;)u/=4294967295,n^=u;return ww(n)}function Zk(u){var n=S6[u];return n===void 0&&(n=_A(u),w6===aK&&(w6=0,S6={}),w6++,S6[u]=n),n}function _A(u){for(var n=0,o=0;o<u.length;o++)n=31*n+u.charCodeAt(o)|0;return ww(n)}function eK(u){var n=HE[u];return n!==void 0||(n=gG(),HE[u]=n),n}function tK(u){var n;if(gA&&(n=mA.get(u),n!==void 0)||(n=u[Cl],n!==void 0)||!QE&&(n=u.propertyIsEnumerable&&u.propertyIsEnumerable[Cl],n!==void 0||(n=rK(u),n!==void 0)))return n;if(n=gG(),gA)mA.set(u,n);else{if(VE!==void 0&&VE(u)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(QE)Object.defineProperty(u,Cl,{enumerable:!1,configurable:!1,writable:!1,value:n});else if(u.propertyIsEnumerable!==void 0&&u.propertyIsEnumerable===u.constructor.prototype.propertyIsEnumerable)u.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},u.propertyIsEnumerable[Cl]=n;else if(u.nodeType!==void 0)u[Cl]=n;else throw new Error("Unable to set a non-enumerable property on object.")}return n}var VE=Object.isExtensible,QE=(function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}})();function rK(u){if(u&&u.nodeType>0)switch(u.nodeType){case 1:return u.uniqueID;case 9:return u.documentElement&&u.documentElement.uniqueID}}function nK(u){return u.valueOf!==Wk&&typeof u.valueOf=="function"?u.valueOf(u):u}function gG(){var u=++T6;return T6&1073741824&&(T6=0),u}var gA=typeof WeakMap=="function",mA;gA&&(mA=new WeakMap);var HE=Object.create(null),T6=0,Cl="__immutablehash__";typeof Symbol=="function"&&(Cl=Symbol(Cl));var iK=16,aK=255,w6=0,S6={},Sw=(function(u){function n(o,i){this._iter=o,this._useKeys=i,this.size=o.size}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.get=function(i,t){return this._iter.get(i,t)},n.prototype.has=function(i){return this._iter.has(i)},n.prototype.valueSeq=function(){return this._iter.valueSeq()},n.prototype.reverse=function(){var i=this,t=KA(this,!0);return this._useKeys||(t.valueSeq=function(){return i._iter.toSeq().reverse()}),t},n.prototype.map=function(i,t){var e=this,r=SG(this,i,t);return this._useKeys||(r.valueSeq=function(){return e._iter.toSeq().map(i,t)}),r},n.prototype.__iterate=function(i,t){var e=this;return this._iter.__iterate(function(r,a){return i(r,a,e)},t)},n.prototype.__iterator=function(i,t){return this._iter.__iterator(i,t)},n})(Yi);Sw.prototype[Mf]=!0;var mG=(function(u){function n(o){this._iter=o,this.size=o.size}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.includes=function(i){return this._iter.includes(i)},n.prototype.__iterate=function(i,t){var e=this,r=0;return t&&wf(this),this._iter.__iterate(function(a){return i(a,t?e.size-++r:r++,e)},t)},n.prototype.__iterator=function(i,t){var e=this,r=this._iter.__iterator(Un,t),a=0;return t&&wf(this),new Rt(function(){var c=r.next();return c.done?c:zt(i,t?e.size-++a:a++,c.value,c)})},n})(_n),vG=(function(u){function n(o){this._iter=o,this.size=o.size}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.has=function(i){return this._iter.includes(i)},n.prototype.__iterate=function(i,t){var e=this;return this._iter.__iterate(function(r){return i(r,r,e)},t)},n.prototype.__iterator=function(i,t){var e=this._iter.__iterator(Un,t);return new Rt(function(){var r=e.next();return r.done?r:zt(i,r.value,r.value,r)})},n})(qf),TG=(function(u){function n(o){this._iter=o,this.size=o.size}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.entrySeq=function(){return this._iter.toSeq()},n.prototype.__iterate=function(i,t){var e=this;return this._iter.__iterate(function(r){if(r){zE(r);var a=Nr(r);return i(a?r.get(1):r[1],a?r.get(0):r[0],e)}},t)},n.prototype.__iterator=function(i,t){var e=this._iter.__iterator(Un,t);return new Rt(function(){for(;;){var r=e.next();if(r.done)return r;var a=r.value;if(a){zE(a);var c=Nr(a);return zt(i,c?a.get(0):a[0],c?a.get(1):a[1],r)}}})},n})(Yi);mG.prototype.cacheResult=Sw.prototype.cacheResult=vG.prototype.cacheResult=TG.prototype.cacheResult=ZA;function wG(u){var n=Zn(u);return n._iter=u,n.size=u.size,n.flip=function(){return u},n.reverse=function(){var o=u.reverse.apply(this);return o.flip=function(){return u.reverse()},o},n.has=function(o){return u.includes(o)},n.includes=function(o){return u.has(o)},n.cacheResult=ZA,n.__iterateUncached=function(o,i){var t=this;return u.__iterate(function(e,r){return o(r,e,t)!==!1},i)},n.__iteratorUncached=function(o,i){if(o===pn){var t=u.__iterator(o,i);return new Rt(function(){var e=t.next();if(!e.done){var r=e.value[0];e.value[0]=e.value[1],e.value[1]=r}return e})}return u.__iterator(o===Un?bv:Un,i)},n}function SG(u,n,o){var i=Zn(u);return i.size=u.size,i.has=function(t){return u.has(t)},i.get=function(t,e){var r=u.get(t,Ot);return r===Ot?e:n.call(o,r,t,u)},i.__iterateUncached=function(t,e){var r=this;return u.__iterate(function(a,c,s){return t(n.call(o,a,c,s),c,r)!==!1},e)},i.__iteratorUncached=function(t,e){var r=u.__iterator(pn,e);return new Rt(function(){var a=r.next();if(a.done)return a;var c=a.value,s=c[0];return zt(t,s,n.call(o,c[1],s,u),a)})},i}function KA(u,n){var o=this,i=Zn(u);return i._iter=u,i.size=u.size,i.reverse=function(){return u},u.flip&&(i.flip=function(){var t=wG(u);return t.reverse=function(){return u.flip()},t}),i.get=function(t,e){return u.get(n?t:-1-t,e)},i.has=function(t){return u.has(n?t:-1-t)},i.includes=function(t){return u.includes(t)},i.cacheResult=ZA,i.__iterate=function(t,e){var r=this,a=0;return e&&wf(u),u.__iterate(function(c,s){return t(c,n?s:e?r.size-++a:a++,r)},!e)},i.__iterator=function(t,e){var r=0;e&&wf(u);var a=u.__iterator(pn,!e);return new Rt(function(){var c=a.next();if(c.done)return c;var s=c.value;return zt(t,n?s[0]:e?o.size-++r:r++,s[1],c)})},i}function AG(u,n,o,i){var t=Zn(u);return i&&(t.has=function(e){var r=u.get(e,Ot);return r!==Ot&&!!n.call(o,r,e,u)},t.get=function(e,r){var a=u.get(e,Ot);return a!==Ot&&n.call(o,a,e,u)?a:r}),t.__iterateUncached=function(e,r){var a=this,c=0;return u.__iterate(function(s,d,l){if(n.call(o,s,d,l))return c++,e(s,i?d:c-1,a)},r),c},t.__iteratorUncached=function(e,r){var a=u.__iterator(pn,r),c=0;return new Rt(function(){for(;;){var s=a.next();if(s.done)return s;var d=s.value,l=d[0],f=d[1];if(n.call(o,f,l,u))return zt(e,i?l:c++,f,s)}})},t}function uK(u,n,o){var i=ea().asMutable();return u.__iterate(function(t,e){i.update(n.call(o,t,e,u),0,function(r){return r+1})}),i.asImmutable()}function oK(u,n,o){var i=Ct(u),t=(an(u)?Vn():ea()).asMutable();u.__iterate(function(r,a){t.update(n.call(o,r,a,u),function(c){return c=c||[],c.push(i?[a,r]:r),c})});var e=YA(u);return t.map(function(r){return Mt(u,e(r))}).asImmutable()}function sK(u,n,o){var i=Ct(u),t=[[],[]];u.__iterate(function(r,a){t[n.call(o,r,a,u)?1:0].push(i?[a,r]:r)});var e=YA(u);return t.map(function(r){return Mt(u,e(r))})}function WA(u,n,o,i){var t=u.size;if(fv(n,o,t))return u;if(typeof t>"u"&&(n<0||o<0))return WA(u.toSeq().cacheResult(),n,o,i);var e=Df(n,t),r=hv(o,t),a=r-e,c;a===a&&(c=a<0?0:a);var s=Zn(u);return s.size=c===0?c:u.size&&c||void 0,!i&&pv(u)&&c>=0&&(s.get=function(d,l){return d=ki(this,d),d>=0&&d<c?u.get(d+e,l):l}),s.__iterateUncached=function(d,l){var f=this;if(c===0)return 0;if(l)return this.cacheResult().__iterate(d,l);var h=0,p=!0,y=0;return u.__iterate(function(_,b){if(!(p&&(p=h++<e)))return y++,d(_,i?b:y-1,f)!==!1&&y!==c}),y},s.__iteratorUncached=function(d,l){if(c!==0&&l)return this.cacheResult().__iterator(d,l);if(c===0)return new Rt(Ur);var f=u.__iterator(d,l),h=0,p=0;return new Rt(function(){for(;h++<e;)f.next();if(++p>c)return Ur();var y=f.next();return i||d===Un||y.done?y:d===bv?zt(d,p-1,void 0,y):zt(d,p-1,y.value[1],y)})},s}function cK(u,n,o){var i=Zn(u);return i.__iterateUncached=function(t,e){var r=this;if(e)return this.cacheResult().__iterate(t,e);var a=0;return u.__iterate(function(c,s,d){return n.call(o,c,s,d)&&++a&&t(c,s,r)}),a},i.__iteratorUncached=function(t,e){var r=this;if(e)return this.cacheResult().__iterator(t,e);var a=u.__iterator(pn,e),c=!0;return new Rt(function(){if(!c)return Ur();var s=a.next();if(s.done)return s;var d=s.value,l=d[0],f=d[1];return n.call(o,f,l,r)?t===pn?s:zt(t,l,f,s):(c=!1,Ur())})},i}function OG(u,n,o,i){var t=Zn(u);return t.__iterateUncached=function(e,r){var a=this;if(r)return this.cacheResult().__iterate(e,r);var c=!0,s=0;return u.__iterate(function(d,l,f){if(!(c&&(c=n.call(o,d,l,f))))return s++,e(d,i?l:s-1,a)}),s},t.__iteratorUncached=function(e,r){var a=this;if(r)return this.cacheResult().__iterator(e,r);var c=u.__iterator(pn,r),s=!0,d=0;return new Rt(function(){var l,f,h;do{if(l=c.next(),l.done)return i||e===Un?l:e===bv?zt(e,d++,void 0,l):zt(e,d++,l.value[1],l);var p=l.value;f=p[0],h=p[1],s&&(s=n.call(o,h,f,a))}while(s);return e===pn?l:zt(e,f,h,l)})},t}function dK(u,n){var o=Ct(u),i=[u].concat(n).map(function(r){return Nr(r)?o&&(r=yn(r)):r=o?JA(r):yG(Array.isArray(r)?r:[r]),r}).filter(function(r){return r.size!==0});if(i.length===0)return u;if(i.length===1){var t=i[0];if(t===u||o&&Ct(t)||Or(u)&&Or(t))return t}var e=new Ul(i);return o?e=e.toKeyedSeq():Or(u)||(e=e.toSetSeq()),e=e.flatten(!0),e.size=i.reduce(function(r,a){if(r!==void 0){var c=a.size;if(c!==void 0)return r+c}},0),e}function EG(u,n,o){var i=Zn(u);return i.__iterateUncached=function(t,e){if(e)return this.cacheResult().__iterate(t,e);var r=0,a=!1;function c(s,d){s.__iterate(function(l,f){return(!n||d<n)&&Nr(l)?c(l,d+1):(r++,t(l,o?f:r-1,i)===!1&&(a=!0)),!a},e)}return c(u,0),r},i.__iteratorUncached=function(t,e){if(e)return this.cacheResult().__iterator(t,e);var r=u.__iterator(t,e),a=[],c=0;return new Rt(function(){for(;r;){var s=r.next();if(s.done!==!1){r=a.pop();continue}var d=s.value;if(t===pn&&(d=d[1]),(!n||a.length<n)&&Nr(d))a.push(r),r=d.__iterator(t,e);else return o?s:zt(t,c++,d,s)}return Ur()})},i}function lK(u,n,o){var i=YA(u);return u.toSeq().map(function(t,e){return i(n.call(o,t,e,u))}).flatten(!0)}function fK(u,n){var o=Zn(u);return o.size=u.size&&u.size*2-1,o.__iterateUncached=function(i,t){var e=this,r=0;return u.__iterate(function(a){return(!r||i(n,r++,e)!==!1)&&i(a,r++,e)!==!1},t),r},o.__iteratorUncached=function(i,t){var e=u.__iterator(Un,t),r=0,a;return new Rt(function(){return(!a||r%2)&&(a=e.next(),a.done)?a:r%2?zt(i,r++,n):zt(i,r++,a.value,a)})},o}function Sf(u,n,o){n||(n=xG);var i=Ct(u),t=0,e=u.toSeq().map(function(r,a){return[a,r,t++,o?o(r,a,u):r]}).valueSeq().toArray();return e.sort(function(r,a){return n(r[3],a[3])||r[2]-a[2]}).forEach(i?function(r,a){e[a].length=2}:function(r,a){e[a]=r[1]}),i?Yi(e):Or(u)?_n(e):qf(e)}function aT(u,n,o){if(n||(n=xG),o){var i=u.toSeq().map(function(t,e){return[t,o(t,e,u)]}).reduce(function(t,e){return GE(n,t[1],e[1])?e:t});return i&&i[0]}return u.reduce(function(t,e){return GE(n,t,e)?e:t})}function GE(u,n,o){var i=u(o,n);return i===0&&o!==n&&(o==null||o!==o)||i>0}function uT(u,n,o,i){var t=Zn(u),e=new Ul(o).map(function(r){return r.size});return t.size=i?e.max():e.min(),t.__iterate=function(r,a){for(var c=this.__iterator(Un,a),s,d=0;!(s=c.next()).done&&r(s.value,d++,this)!==!1;);return d},t.__iteratorUncached=function(r,a){var c=o.map(function(l){return l=Gt(l),yA(a?l.reverse():l)}),s=0,d=!1;return new Rt(function(){var l;return d||(l=c.map(function(f){return f.next()}),d=i?l.every(function(f){return f.done}):l.some(function(f){return f.done})),d?Ur():zt(r,s++,n.apply(null,l.map(function(f){return f.value})))})},t}function Mt(u,n){return u===n?u:pv(u)?n:u.constructor(n)}function zE(u){if(u!==Object(u))throw new TypeError("Expected [K, V] tuple: "+u)}function YA(u){return Ct(u)?yn:Or(u)?Gl:Lf}function Zn(u){return Object.create((Ct(u)?Yi:Or(u)?_n:qf).prototype)}function ZA(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Pr.prototype.cacheResult.call(this)}function xG(u,n){return u===void 0&&n===void 0?0:u===void 0?1:n===void 0?-1:u>n?1:u<n?-1:0}function Yn(u,n){n=n||0;for(var o=Math.max(0,u.length-n),i=new Array(o),t=0;t<o;t++)i[t]=u[t+n];return i}function eO(u,n){if(!u)throw new Error(n)}function rn(u){eO(u!==1/0,"Cannot perform this action with an infinite size.")}function IG(u){if(GA(u)&&typeof u!="string")return u;if(an(u))return u.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+u)}var hK=Object.prototype.toString;function Aw(u){if(!u||typeof u!="object"||hK.call(u)!=="[object Object]")return!1;var n=Object.getPrototypeOf(u);if(n===null)return!0;for(var o=n,i=Object.getPrototypeOf(n);i!==null;)o=i,i=Object.getPrototypeOf(o);return o===n}function Ki(u){return typeof u=="object"&&(un(u)||Array.isArray(u)||Aw(u))}function ev(u){try{return typeof u=="string"?JSON.stringify(u):String(u)}catch{return JSON.stringify(u)}}function tO(u,n){return un(u)?u.has(n):Ki(u)&&Cf.call(u,n)}function Ow(u,n,o){return un(u)?u.get(n,o):tO(u,n)?typeof u.get=="function"?u.get(n):u[n]:o}function pw(u){if(Array.isArray(u))return Yn(u);var n={};for(var o in u)Cf.call(u,o)&&(n[o]=u[o]);return n}function rO(u,n){if(!Ki(u))throw new TypeError("Cannot update non-data-structure value: "+u);if(un(u)){if(!u.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+u);return u.remove(n)}if(!Cf.call(u,n))return u;var o=pw(u);return Array.isArray(o)?o.splice(n,1):delete o[n],o}function nO(u,n,o){if(!Ki(u))throw new TypeError("Cannot update non-data-structure value: "+u);if(un(u)){if(!u.set)throw new TypeError("Cannot update immutable value without .set() method: "+u);return u.set(n,o)}if(Cf.call(u,n)&&o===u[n])return u;var i=pw(u);return i[n]=o,i}function Zi(u,n,o,i){i||(i=o,o=void 0);var t=RG(un(u),u,IG(n),0,o,i);return t===Ot?o:t}function RG(u,n,o,i,t,e){var r=n===Ot;if(i===o.length){var a=r?t:n,c=e(a);return c===a?n:c}if(!r&&!Ki(n))throw new TypeError("Cannot update within non-data-structure value in path ["+o.slice(0,i).map(ev)+"]: "+n);var s=o[i],d=r?Ot:Ow(n,s,Ot),l=RG(d===Ot?u:un(d),d,o,i+1,t,e);return l===d?n:l===Ot?rO(n,s):nO(r?u?$n():{}:n,s,l)}function iO(u,n,o){return Zi(u,n,Ot,function(){return o})}function aO(u,n){return iO(this,u,n)}function uO(u,n){return Zi(u,n,function(){return Ot})}function oO(u){return uO(this,u)}function Ew(u,n,o,i){return Zi(u,[n],o,i)}function sO(u,n,o){return arguments.length===1?u(this):Ew(this,u,n,o)}function cO(u,n,o){return Zi(this,u,n,o)}function FG(){for(var u=[],n=arguments.length;n--;)u[n]=arguments[n];return PG(this,u)}function NG(u){for(var n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];if(typeof u!="function")throw new TypeError("Invalid merger function: "+u);return PG(this,n,u)}function PG(u,n,o){for(var i=[],t=0;t<n.length;t++){var e=yn(n[t]);e.size!==0&&i.push(e)}return i.length===0?u:u.toSeq().size===0&&!u.__ownerID&&i.length===1?u.constructor(i[0]):u.withMutations(function(r){for(var a=o?function(s,d){Ew(r,d,Ot,function(l){return l===Ot?s:o(l,s,d)})}:function(s,d){r.set(d,s)},c=0;c<i.length;c++)i[c].forEach(a)})}function DG(u){for(var n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];return gv(u,n)}function jG(u,n){for(var o=[],i=arguments.length-2;i-- >0;)o[i]=arguments[i+2];return gv(n,o,u)}function LG(u){for(var n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];return _v(u,n)}function MG(u,n){for(var o=[],i=arguments.length-2;i-- >0;)o[i]=arguments[i+2];return _v(n,o,u)}function _v(u,n,o){return gv(u,n,pK(o))}function gv(u,n,o){if(!Ki(u))throw new TypeError("Cannot merge into non-data-structure value: "+u);if(un(u))return typeof o=="function"&&u.mergeWith?u.mergeWith.apply(u,[o].concat(n)):u.merge?u.merge.apply(u,n):u.concat.apply(u,n);for(var i=Array.isArray(u),t=u,e=i?Gl:yn,r=i?function(c){t===u&&(t=pw(t)),t.push(c)}:function(c,s){var d=Cf.call(t,s),l=d&&o?o(t[s],c,s):c;(!d||l!==t[s])&&(t===u&&(t=pw(t)),t[s]=l)},a=0;a<n.length;a++)e(n[a]).forEach(r);return t}function pK(u){function n(o,i,t){return Ki(o)&&Ki(i)&&bK(o,i)?gv(o,[i],n):u?u(o,i,t):i}return n}function bK(u,n){var o=Pr(u),i=Pr(n);return Or(o)===Or(i)&&Ct(o)===Ct(i)}function CG(){for(var u=[],n=arguments.length;n--;)u[n]=arguments[n];return _v(this,u)}function qG(u){for(var n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];return _v(this,n,u)}function dO(u){for(var n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];return Zi(this,u,$n(),function(i){return gv(i,n)})}function lO(u){for(var n=[],o=arguments.length-1;o-- >0;)n[o]=arguments[o+1];return Zi(this,u,$n(),function(i){return _v(i,n)})}function mv(u){var n=this.asMutable();return u(n),n.wasAltered()?n.__ensureOwner(this.__ownerID):this}function vv(){return this.__ownerID?this:this.__ensureOwner(new QA)}function Tv(){return this.__ensureOwner()}function fO(){return this.__altered}var ea=(function(u){function n(o){return o==null?$n():yv(o)&&!an(o)?o:$n().withMutations(function(i){var t=u(o);rn(t.size),t.forEach(function(e,r){return i.set(r,e)})})}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.of=function(){for(var i=[],t=arguments.length;t--;)i[t]=arguments[t];return $n().withMutations(function(e){for(var r=0;r<i.length;r+=2){if(r+1>=i.length)throw new Error("Missing value for key: "+i[r]);e.set(i[r],i[r+1])}})},n.prototype.toString=function(){return this.__toString("Map {","}")},n.prototype.get=function(i,t){return this._root?this._root.get(0,void 0,i,t):t},n.prototype.set=function(i,t){return kE(this,i,t)},n.prototype.remove=function(i){return kE(this,i,Ot)},n.prototype.deleteAll=function(i){var t=Gt(i);return t.size===0?this:this.withMutations(function(e){t.forEach(function(r){return e.remove(r)})})},n.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):$n()},n.prototype.sort=function(i){return Vn(Sf(this,i))},n.prototype.sortBy=function(i,t){return Vn(Sf(this,t,i))},n.prototype.map=function(i,t){var e=this;return this.withMutations(function(r){r.forEach(function(a,c){r.set(c,i.call(t,a,c,e))})})},n.prototype.__iterator=function(i,t){return new yK(this,i,t)},n.prototype.__iterate=function(i,t){var e=this,r=0;return this._root&&this._root.iterate(function(a){return r++,i(a[1],a[0],e)},t),r},n.prototype.__ensureOwner=function(i){return i===this.__ownerID?this:i?hO(this.size,this._root,i,this.__hash):this.size===0?$n():(this.__ownerID=i,this.__altered=!1,this)},n})(yn);ea.isMap=yv;var Xt=ea.prototype;Xt[_G]=!0;Xt[lv]=Xt.remove;Xt.removeAll=Xt.deleteAll;Xt.setIn=aO;Xt.removeIn=Xt.deleteIn=oO;Xt.update=sO;Xt.updateIn=cO;Xt.merge=Xt.concat=FG;Xt.mergeWith=NG;Xt.mergeDeep=CG;Xt.mergeDeepWith=qG;Xt.mergeIn=dO;Xt.mergeDeepIn=lO;Xt.withMutations=mv;Xt.wasAltered=fO;Xt.asImmutable=Tv;Xt["@@transducer/init"]=Xt.asMutable=vv;Xt["@@transducer/step"]=function(u,n){return u.set(n[0],n[1])};Xt["@@transducer/result"]=function(u){return u.asImmutable()};var tv=function(n,o){this.ownerID=n,this.entries=o};tv.prototype.get=function(n,o,i,t){for(var e=this.entries,r=0,a=e.length;r<a;r++)if(fr(i,e[r][0]))return e[r][1];return t};tv.prototype.update=function(n,o,i,t,e,r,a){for(var c=e===Ot,s=this.entries,d=0,l=s.length;d<l&&!fr(t,s[d][0]);d++);var f=d<l;if(f?s[d][1]===e:c)return this;if(hn(a),(c||!f)&&hn(r),!(c&&s.length===1)){if(!f&&!c&&s.length>=wK)return _K(n,s,t,e);var h=n&&n===this.ownerID,p=h?s:Yn(s);return f?c?d===l-1?p.pop():p[d]=p.pop():p[d]=[t,e]:p.push([t,e]),h?(this.entries=p,this):new tv(n,p)}};var Af=function(n,o,i){this.ownerID=n,this.bitmap=o,this.nodes=i};Af.prototype.get=function(n,o,i,t){o===void 0&&(o=Br(i));var e=1<<((n===0?o:o>>>n)&$r),r=this.bitmap;return(r&e)===0?t:this.nodes[BG(r&e-1)].get(n+Ht,o,i,t)};Af.prototype.update=function(n,o,i,t,e,r,a){i===void 0&&(i=Br(t));var c=(o===0?i:i>>>o)&$r,s=1<<c,d=this.bitmap,l=(d&s)!==0;if(!l&&e===Ot)return this;var f=BG(d&s-1),h=this.nodes,p=l?h[f]:void 0,y=pO(p,n,o+Ht,i,t,e,r,a);if(y===p)return this;if(!l&&y&&h.length>=SK)return mK(n,h,d,c,y);if(l&&!y&&h.length===2&&KE(h[f^1]))return h[f^1];if(l&&y&&h.length===1&&KE(y))return y;var _=n&&n===this.ownerID,b=l?y?d:d^s:d|s,m=l?y?$G(h,f,y,_):TK(h,f,_):vK(h,f,y,_);return _?(this.bitmap=b,this.nodes=m,this):new Af(n,b,m)};var rv=function(n,o,i){this.ownerID=n,this.count=o,this.nodes=i};rv.prototype.get=function(n,o,i,t){o===void 0&&(o=Br(i));var e=(n===0?o:o>>>n)&$r,r=this.nodes[e];return r?r.get(n+Ht,o,i,t):t};rv.prototype.update=function(n,o,i,t,e,r,a){i===void 0&&(i=Br(t));var c=(o===0?i:i>>>o)&$r,s=e===Ot,d=this.nodes,l=d[c];if(s&&!l)return this;var f=pO(l,n,o+Ht,i,t,e,r,a);if(f===l)return this;var h=this.count;if(!l)h++;else if(!f&&(h--,h<AK))return gK(n,d,h,c);var p=n&&n===this.ownerID,y=$G(d,c,f,p);return p?(this.count=h,this.nodes=y,this):new rv(n,h,y)};var Of=function(n,o,i){this.ownerID=n,this.keyHash=o,this.entries=i};Of.prototype.get=function(n,o,i,t){for(var e=this.entries,r=0,a=e.length;r<a;r++)if(fr(i,e[r][0]))return e[r][1];return t};Of.prototype.update=function(n,o,i,t,e,r,a){i===void 0&&(i=Br(t));var c=e===Ot;if(i!==this.keyHash)return c?this:(hn(a),hn(r),bO(this,n,o,i,[t,e]));for(var s=this.entries,d=0,l=s.length;d<l&&!fr(t,s[d][0]);d++);var f=d<l;if(f?s[d][1]===e:c)return this;if(hn(a),(c||!f)&&hn(r),c&&l===2)return new Ii(n,this.keyHash,s[d^1]);var h=n&&n===this.ownerID,p=h?s:Yn(s);return f?c?d===l-1?p.pop():p[d]=p.pop():p[d]=[t,e]:p.push([t,e]),h?(this.entries=p,this):new Of(n,this.keyHash,p)};var Ii=function(n,o,i){this.ownerID=n,this.keyHash=o,this.entry=i};Ii.prototype.get=function(n,o,i,t){return fr(i,this.entry[0])?this.entry[1]:t};Ii.prototype.update=function(n,o,i,t,e,r,a){var c=e===Ot,s=fr(t,this.entry[0]);if(s?e===this.entry[1]:c)return this;if(hn(a),c){hn(r);return}return s?n&&n===this.ownerID?(this.entry[1]=e,this):new Ii(n,this.keyHash,[t,e]):(hn(r),bO(this,n,o,Br(t),[t,e]))};tv.prototype.iterate=Of.prototype.iterate=function(u,n){for(var o=this.entries,i=0,t=o.length-1;i<=t;i++)if(u(o[n?t-i:i])===!1)return!1};Af.prototype.iterate=rv.prototype.iterate=function(u,n){for(var o=this.nodes,i=0,t=o.length-1;i<=t;i++){var e=o[n?t-i:i];if(e&&e.iterate(u,n)===!1)return!1}};Ii.prototype.iterate=function(u,n){return u(this.entry)};var yK=(function(u){function n(o,i,t){this._type=i,this._reverse=t,this._stack=o._root&&XE(o._root)}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.next=function(){for(var i=this._type,t=this._stack;t;){var e=t.node,r=t.index++,a=void 0;if(e.entry){if(r===0)return A6(i,e.entry)}else if(e.entries){if(a=e.entries.length-1,r<=a)return A6(i,e.entries[this._reverse?a-r:r])}else if(a=e.nodes.length-1,r<=a){var c=e.nodes[this._reverse?a-r:r];if(c){if(c.entry)return A6(i,c.entry);t=this._stack=XE(c,t)}continue}t=this._stack=this._stack.__prev}return Ur()},n})(Rt);function A6(u,n){return zt(u,n[0],n[1])}function XE(u,n){return{node:u,index:0,__prev:n}}function hO(u,n,o,i){var t=Object.create(Xt);return t.size=u,t._root=n,t.__ownerID=o,t.__hash=i,t.__altered=!1,t}var JE;function $n(){return JE||(JE=hO(0))}function kE(u,n,o){var i,t;if(u._root){var e=pA(),r=pA();if(i=pO(u._root,u.__ownerID,0,void 0,n,o,e,r),!r.value)return u;t=u.size+(e.value?o===Ot?-1:1:0)}else{if(o===Ot)return u;t=1,i=new tv(u.__ownerID,[[n,o]])}return u.__ownerID?(u.size=t,u._root=i,u.__hash=void 0,u.__altered=!0,u):i?hO(t,i):$n()}function pO(u,n,o,i,t,e,r,a){return u?u.update(n,o,i,t,e,r,a):e===Ot?u:(hn(a),hn(r),new Ii(n,i,[t,e]))}function KE(u){return u.constructor===Ii||u.constructor===Of}function bO(u,n,o,i,t){if(u.keyHash===i)return new Of(n,i,[u.entry,t]);var e=(o===0?u.keyHash:u.keyHash>>>o)&$r,r=(o===0?i:i>>>o)&$r,a,c=e===r?[bO(u,n,o+Ht,i,t)]:(a=new Ii(n,i,t),e<r?[u,a]:[a,u]);return new Af(n,1<<e|1<<r,c)}function _K(u,n,o,i){u||(u=new QA);for(var t=new Ii(u,Br(o),[o,i]),e=0;e<n.length;e++){var r=n[e];t=t.update(u,0,void 0,r[0],r[1])}return t}function gK(u,n,o,i){for(var t=0,e=0,r=new Array(o),a=0,c=1,s=n.length;a<s;a++,c<<=1){var d=n[a];d!==void 0&&a!==i&&(t|=c,r[e++]=d)}return new Af(u,t,r)}function mK(u,n,o,i,t){for(var e=0,r=new Array(fn),a=0;o!==0;a++,o>>>=1)r[a]=o&1?n[e++]:void 0;return r[i]=t,new rv(u,e+1,r)}function BG(u){return u-=u>>1&1431655765,u=(u&858993459)+(u>>2&858993459),u=u+(u>>4)&252645135,u+=u>>8,u+=u>>16,u&127}function $G(u,n,o,i){var t=i?u:Yn(u);return t[n]=o,t}function vK(u,n,o,i){var t=u.length+1;if(i&&n+1===t)return u[n]=o,u;for(var e=new Array(t),r=0,a=0;a<t;a++)a===n?(e[a]=o,r=-1):e[a]=u[a+r];return e}function TK(u,n,o){var i=u.length-1;if(o&&n===i)return u.pop(),u;for(var t=new Array(i),e=0,r=0;r<i;r++)r===n&&(e=1),t[r]=u[r+e];return t}var wK=fn/4,SK=fn/2,AK=fn/4,UG="@@__IMMUTABLE_LIST__@@";function xw(u){return!!(u&&u[UG])}var Bf=(function(u){function n(o){var i=WT();if(o==null)return i;if(xw(o))return o;var t=u(o),e=t.size;return e===0?i:(rn(e),e>0&&e<fn?nv(0,e,Ht,null,new Ji(t.toArray())):i.withMutations(function(r){r.setSize(e),t.forEach(function(a,c){return r.set(c,a)})}))}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.of=function(){return this(arguments)},n.prototype.toString=function(){return this.__toString("List [","]")},n.prototype.get=function(i,t){if(i=ki(this,i),i>=0&&i<this.size){i+=this._origin;var e=VG(this,i);return e&&e.array[i&$r]}return t},n.prototype.set=function(i,t){return OK(this,i,t)},n.prototype.remove=function(i){return this.has(i)?i===0?this.shift():i===this.size-1?this.pop():this.splice(i,1):this},n.prototype.insert=function(i,t){return this.splice(i,0,t)},n.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=Ht,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):WT()},n.prototype.push=function(){var i=arguments,t=this.size;return this.withMutations(function(e){Gi(e,0,t+i.length);for(var r=0;r<i.length;r++)e.set(t+r,i[r])})},n.prototype.pop=function(){return Gi(this,0,-1)},n.prototype.unshift=function(){var i=arguments;return this.withMutations(function(t){Gi(t,-i.length);for(var e=0;e<i.length;e++)t.set(e,i[e])})},n.prototype.shift=function(){return Gi(this,1)},n.prototype.concat=function(){for(var i=arguments,t=[],e=0;e<arguments.length;e++){var r=i[e],a=u(typeof r!="string"&&HA(r)?r:[r]);a.size!==0&&t.push(a)}return t.length===0?this:this.size===0&&!this.__ownerID&&t.length===1?this.constructor(t[0]):this.withMutations(function(c){t.forEach(function(s){return s.forEach(function(d){return c.push(d)})})})},n.prototype.setSize=function(i){return Gi(this,0,i)},n.prototype.map=function(i,t){var e=this;return this.withMutations(function(r){for(var a=0;a<e.size;a++)r.set(a,i.call(t,r.get(a),a,e))})},n.prototype.slice=function(i,t){var e=this.size;return fv(i,t,e)?this:Gi(this,Df(i,e),hv(t,e))},n.prototype.__iterator=function(i,t){var e=t?this.size:0,r=WE(this,t);return new Rt(function(){var a=r();return a===Y3?Ur():zt(i,t?--e:e++,a)})},n.prototype.__iterate=function(i,t){for(var e=t?this.size:0,r=WE(this,t),a;(a=r())!==Y3&&i(a,t?--e:e++,this)!==!1;);return e},n.prototype.__ensureOwner=function(i){return i===this.__ownerID?this:i?nv(this._origin,this._capacity,this._level,this._root,this._tail,i,this.__hash):this.size===0?WT():(this.__ownerID=i,this.__altered=!1,this)},n})(Gl);Bf.isList=xw;var or=Bf.prototype;or[UG]=!0;or[lv]=or.remove;or.merge=or.concat;or.setIn=aO;or.deleteIn=or.removeIn=oO;or.update=sO;or.updateIn=cO;or.mergeIn=dO;or.mergeDeepIn=lO;or.withMutations=mv;or.wasAltered=fO;or.asImmutable=Tv;or["@@transducer/init"]=or.asMutable=vv;or["@@transducer/step"]=function(u,n){return u.push(n)};or["@@transducer/result"]=function(u){return u.asImmutable()};var Ji=function(n,o){this.array=n,this.ownerID=o};Ji.prototype.removeBefore=function(n,o,i){if(i===o?1<<o:this.array.length===0)return this;var t=i>>>o&$r;if(t>=this.array.length)return new Ji([],n);var e=t===0,r;if(o>0){var a=this.array[t];if(r=a&&a.removeBefore(n,o-Ht,i),r===a&&e)return this}if(e&&!r)return this;var c=Ef(this,n);if(!e)for(var s=0;s<t;s++)c.array[s]=void 0;return r&&(c.array[t]=r),c};Ji.prototype.removeAfter=function(n,o,i){if(i===(o?1<<o:0)||this.array.length===0)return this;var t=i-1>>>o&$r;if(t>=this.array.length)return this;var e;if(o>0){var r=this.array[t];if(e=r&&r.removeAfter(n,o-Ht,i),e===r&&t===this.array.length-1)return this}var a=Ef(this,n);return a.array.splice(t+1),e&&(a.array[t]=e),a};var Y3={};function WE(u,n){var o=u._origin,i=u._capacity,t=iv(i),e=u._tail;return r(u._root,u._level,0);function r(s,d,l){return d===0?a(s,l):c(s,d,l)}function a(s,d){var l=d===t?e&&e.array:s&&s.array,f=d>o?0:o-d,h=i-d;return h>fn&&(h=fn),function(){if(f===h)return Y3;var p=n?--h:f++;return l&&l[p]}}function c(s,d,l){var f,h=s&&s.array,p=l>o?0:o-l>>d,y=(i-l>>d)+1;return y>fn&&(y=fn),function(){for(;;){if(f){var _=f();if(_!==Y3)return _;f=null}if(p===y)return Y3;var b=n?--y:p++;f=r(h&&h[b],d-Ht,l+(b<<d))}}}}function nv(u,n,o,i,t,e,r){var a=Object.create(or);return a.size=n-u,a._origin=u,a._capacity=n,a._level=o,a._root=i,a._tail=t,a.__ownerID=e,a.__hash=r,a.__altered=!1,a}var YE;function WT(){return YE||(YE=nv(0,0,Ht))}function OK(u,n,o){if(n=ki(u,n),n!==n)return u;if(n>=u.size||n<0)return u.withMutations(function(r){n<0?Gi(r,n).set(0,o):Gi(r,0,n+1).set(n,o)});n+=u._origin;var i=u._tail,t=u._root,e=pA();return n>=iv(u._capacity)?i=vA(i,u.__ownerID,0,n,o,e):t=vA(t,u.__ownerID,u._level,n,o,e),e.value?u.__ownerID?(u._root=t,u._tail=i,u.__hash=void 0,u.__altered=!0,u):nv(u._origin,u._capacity,u._level,t,i):u}function vA(u,n,o,i,t,e){var r=i>>>o&$r,a=u&&r<u.array.length;if(!a&&t===void 0)return u;var c;if(o>0){var s=u&&u.array[r],d=vA(s,n,o-Ht,i,t,e);return d===s?u:(c=Ef(u,n),c.array[r]=d,c)}return a&&u.array[r]===t?u:(e&&hn(e),c=Ef(u,n),t===void 0&&r===c.array.length-1?c.array.pop():c.array[r]=t,c)}function Ef(u,n){return n&&u&&n===u.ownerID?u:new Ji(u?u.array.slice():[],n)}function VG(u,n){if(n>=iv(u._capacity))return u._tail;if(n<1<<u._level+Ht){for(var o=u._root,i=u._level;o&&i>0;)o=o.array[n>>>i&$r],i-=Ht;return o}}function Gi(u,n,o){n!==void 0&&(n|=0),o!==void 0&&(o|=0);var i=u.__ownerID||new QA,t=u._origin,e=u._capacity,r=t+n,a=o===void 0?e:o<0?e+o:t+o;if(r===t&&a===e)return u;if(r>=a)return u.clear();for(var c=u._level,s=u._root,d=0;r+d<0;)s=new Ji(s&&s.array.length?[void 0,s]:[],i),c+=Ht,d+=1<<c;d&&(r+=d,t+=d,a+=d,e+=d);for(var l=iv(e),f=iv(a);f>=1<<c+Ht;)s=new Ji(s&&s.array.length?[s]:[],i),c+=Ht;var h=u._tail,p=f<l?VG(u,a-1):f>l?new Ji([],i):h;if(h&&f>l&&r<e&&h.array.length){s=Ef(s,i);for(var y=s,_=c;_>Ht;_-=Ht){var b=l>>>_&$r;y=y.array[b]=Ef(y.array[b],i)}y.array[l>>>Ht&$r]=h}if(a<e&&(p=p&&p.removeAfter(i,0,a)),r>=f)r-=f,a-=f,c=Ht,s=null,p=p&&p.removeBefore(i,0,r);else if(r>t||f<l){for(d=0;s;){var m=r>>>c&$r;if(m!==f>>>c&$r)break;m&&(d+=(1<<c)*m),c-=Ht,s=s.array[m]}s&&r>t&&(s=s.removeBefore(i,c,r-d)),s&&f<l&&(s=s.removeAfter(i,c,f-d)),d&&(r-=d,a-=d)}return u.__ownerID?(u.size=a-r,u._origin=r,u._capacity=a,u._level=c,u._root=s,u._tail=p,u.__hash=void 0,u.__altered=!0,u):nv(r,a,c,s,p)}function iv(u){return u<fn?0:u-1>>>Ht<<Ht}var Vn=(function(u){function n(o){return o==null?M3():Tw(o)?o:M3().withMutations(function(i){var t=yn(o);rn(t.size),t.forEach(function(e,r){return i.set(r,e)})})}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.of=function(){return this(arguments)},n.prototype.toString=function(){return this.__toString("OrderedMap {","}")},n.prototype.get=function(i,t){var e=this._map.get(i);return e!==void 0?this._list.get(e)[1]:t},n.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):M3()},n.prototype.set=function(i,t){return ex(this,i,t)},n.prototype.remove=function(i){return ex(this,i,Ot)},n.prototype.__iterate=function(i,t){var e=this;return this._list.__iterate(function(r){return r&&i(r[1],r[0],e)},t)},n.prototype.__iterator=function(i,t){return this._list.fromEntrySeq().__iterator(i,t)},n.prototype.__ensureOwner=function(i){if(i===this.__ownerID)return this;var t=this._map.__ensureOwner(i),e=this._list.__ensureOwner(i);return i?yO(t,e,i,this.__hash):this.size===0?M3():(this.__ownerID=i,this.__altered=!1,this._map=t,this._list=e,this)},n})(ea);Vn.isOrderedMap=Tw;Vn.prototype[Mf]=!0;Vn.prototype[lv]=Vn.prototype.remove;function yO(u,n,o,i){var t=Object.create(Vn.prototype);return t.size=u?u.size:0,t._map=u,t._list=n,t.__ownerID=o,t.__hash=i,t.__altered=!1,t}var ZE;function M3(){return ZE||(ZE=yO($n(),WT()))}function ex(u,n,o){var i=u._map,t=u._list,e=i.get(n),r=e!==void 0,a,c;if(o===Ot){if(!r)return u;t.size>=fn&&t.size>=i.size*2?(c=t.filter(function(s,d){return s!==void 0&&e!==d}),a=c.toKeyedSeq().map(function(s){return s[0]}).flip().toMap(),u.__ownerID&&(a.__ownerID=c.__ownerID=u.__ownerID)):(a=i.remove(n),c=e===t.size-1?t.pop():t.set(e,void 0))}else if(r){if(o===t.get(e)[1])return u;a=i,c=t.set(e,[n,o])}else a=i.set(n,t.size),c=t.set(t.size,[n,o]);return u.__ownerID?(u.size=a.size,u._map=a,u._list=c,u.__hash=void 0,u.__altered=!0,u):yO(a,c)}var QG="@@__IMMUTABLE_STACK__@@";function av(u){return!!(u&&u[QG])}var wv=(function(u){function n(o){return o==null?oT():av(o)?o:oT().pushAll(o)}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.of=function(){return this(arguments)},n.prototype.toString=function(){return this.__toString("Stack [","]")},n.prototype.get=function(i,t){var e=this._head;for(i=ki(this,i);e&&i--;)e=e.next;return e?e.value:t},n.prototype.peek=function(){return this._head&&this._head.value},n.prototype.push=function(){var i=arguments;if(arguments.length===0)return this;for(var t=this.size+arguments.length,e=this._head,r=arguments.length-1;r>=0;r--)e={value:i[r],next:e};return this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):C3(t,e)},n.prototype.pushAll=function(i){if(i=u(i),i.size===0)return this;if(this.size===0&&av(i))return i;rn(i.size);var t=this.size,e=this._head;return i.__iterate(function(r){t++,e={value:r,next:e}},!0),this.__ownerID?(this.size=t,this._head=e,this.__hash=void 0,this.__altered=!0,this):C3(t,e)},n.prototype.pop=function(){return this.slice(1)},n.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):oT()},n.prototype.slice=function(i,t){if(fv(i,t,this.size))return this;var e=Df(i,this.size),r=hv(t,this.size);if(r!==this.size)return u.prototype.slice.call(this,i,t);for(var a=this.size-e,c=this._head;e--;)c=c.next;return this.__ownerID?(this.size=a,this._head=c,this.__hash=void 0,this.__altered=!0,this):C3(a,c)},n.prototype.__ensureOwner=function(i){return i===this.__ownerID?this:i?C3(this.size,this._head,i,this.__hash):this.size===0?oT():(this.__ownerID=i,this.__altered=!1,this)},n.prototype.__iterate=function(i,t){var e=this;if(t)return new Ul(this.toArray()).__iterate(function(c,s){return i(c,s,e)},t);for(var r=0,a=this._head;a&&i(a.value,r++,this)!==!1;)a=a.next;return r},n.prototype.__iterator=function(i,t){if(t)return new Ul(this.toArray()).__iterator(i,t);var e=0,r=this._head;return new Rt(function(){if(r){var a=r.value;return r=r.next,zt(i,e++,a)}return Ur()})},n})(Gl);wv.isStack=av;var Vr=wv.prototype;Vr[QG]=!0;Vr.shift=Vr.pop;Vr.unshift=Vr.push;Vr.unshiftAll=Vr.pushAll;Vr.withMutations=mv;Vr.wasAltered=fO;Vr.asImmutable=Tv;Vr["@@transducer/init"]=Vr.asMutable=vv;Vr["@@transducer/step"]=function(u,n){return u.unshift(n)};Vr["@@transducer/result"]=function(u){return u.asImmutable()};function C3(u,n,o,i){var t=Object.create(Vr);return t.size=u,t._head=n,t.__ownerID=o,t.__hash=i,t.__altered=!1,t}var tx;function oT(){return tx||(tx=C3(0))}var HG="@@__IMMUTABLE_SET__@@";function Sv(u){return!!(u&&u[HG])}function Iw(u){return Sv(u)&&an(u)}function _O(u,n){if(u===n)return!0;if(!Nr(n)||u.size!==void 0&&n.size!==void 0&&u.size!==n.size||u.__hash!==void 0&&n.__hash!==void 0&&u.__hash!==n.__hash||Ct(u)!==Ct(n)||Or(u)!==Or(n)||an(u)!==an(n))return!1;if(u.size===0&&n.size===0)return!0;var o=!jf(u);if(an(u)){var i=u.entries();return n.every(function(c,s){var d=i.next().value;return d&&fr(d[1],c)&&(o||fr(d[0],s))})&&i.next().done}var t=!1;if(u.size===void 0)if(n.size===void 0)typeof u.cacheResult=="function"&&u.cacheResult();else{t=!0;var e=u;u=n,n=e}var r=!0,a=n.__iterate(function(c,s){if(o?!u.has(c):t?!fr(c,u.get(s,Ot)):!fr(u.get(s,Ot),c))return r=!1,!1});return r&&u.size===a}function zl(u,n){var o=function(i){u.prototype[i]=n[i]};return Object.keys(n).forEach(o),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(n).forEach(o),u}function bw(u){if(!u||typeof u!="object")return u;if(!Nr(u)){if(!Ki(u))return u;u=Pr(u)}if(Ct(u)){var n={};return u.__iterate(function(i,t){n[t]=bw(i)}),n}var o=[];return u.__iterate(function(i){o.push(bw(i))}),o}var $f=(function(u){function n(o){return o==null?q3():Sv(o)&&!an(o)?o:q3().withMutations(function(i){var t=u(o);rn(t.size),t.forEach(function(e){return i.add(e)})})}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.of=function(){return this(arguments)},n.fromKeys=function(i){return this(yn(i).keySeq())},n.intersect=function(i){return i=Gt(i).toArray(),i.length?Er.intersect.apply(n(i.pop()),i):q3()},n.union=function(i){return i=Gt(i).toArray(),i.length?Er.union.apply(n(i.pop()),i):q3()},n.prototype.toString=function(){return this.__toString("Set {","}")},n.prototype.has=function(i){return this._map.has(i)},n.prototype.add=function(i){return sT(this,this._map.set(i,i))},n.prototype.remove=function(i){return sT(this,this._map.remove(i))},n.prototype.clear=function(){return sT(this,this._map.clear())},n.prototype.map=function(i,t){var e=this,r=!1,a=sT(this,this._map.mapEntries(function(c){var s=c[1],d=i.call(t,s,s,e);return d!==s&&(r=!0),[d,d]},t));return r?a:this},n.prototype.union=function(){for(var i=[],t=arguments.length;t--;)i[t]=arguments[t];return i=i.filter(function(e){return e.size!==0}),i.length===0?this:this.size===0&&!this.__ownerID&&i.length===1?this.constructor(i[0]):this.withMutations(function(e){for(var r=0;r<i.length;r++)typeof i[r]=="string"?e.add(i[r]):u(i[r]).forEach(function(a){return e.add(a)})})},n.prototype.intersect=function(){for(var i=[],t=arguments.length;t--;)i[t]=arguments[t];if(i.length===0)return this;i=i.map(function(r){return u(r)});var e=[];return this.forEach(function(r){i.every(function(a){return a.includes(r)})||e.push(r)}),this.withMutations(function(r){e.forEach(function(a){r.remove(a)})})},n.prototype.subtract=function(){for(var i=[],t=arguments.length;t--;)i[t]=arguments[t];if(i.length===0)return this;i=i.map(function(r){return u(r)});var e=[];return this.forEach(function(r){i.some(function(a){return a.includes(r)})&&e.push(r)}),this.withMutations(function(r){e.forEach(function(a){r.remove(a)})})},n.prototype.sort=function(i){return Vl(Sf(this,i))},n.prototype.sortBy=function(i,t){return Vl(Sf(this,t,i))},n.prototype.wasAltered=function(){return this._map.wasAltered()},n.prototype.__iterate=function(i,t){var e=this;return this._map.__iterate(function(r){return i(r,r,e)},t)},n.prototype.__iterator=function(i,t){return this._map.__iterator(i,t)},n.prototype.__ensureOwner=function(i){if(i===this.__ownerID)return this;var t=this._map.__ensureOwner(i);return i?this.__make(t,i):this.size===0?this.__empty():(this.__ownerID=i,this._map=t,this)},n})(Lf);$f.isSet=Sv;var Er=$f.prototype;Er[HG]=!0;Er[lv]=Er.remove;Er.merge=Er.concat=Er.union;Er.withMutations=mv;Er.asImmutable=Tv;Er["@@transducer/init"]=Er.asMutable=vv;Er["@@transducer/step"]=function(u,n){return u.add(n)};Er["@@transducer/result"]=function(u){return u.asImmutable()};Er.__empty=q3;Er.__make=GG;function sT(u,n){return u.__ownerID?(u.size=n.size,u._map=n,u):n===u._map?u:n.size===0?u.__empty():u.__make(n)}function GG(u,n){var o=Object.create(Er);return o.size=u?u.size:0,o._map=u,o.__ownerID=n,o}var rx;function q3(){return rx||(rx=GG($n()))}var gO=(function(u){function n(o,i,t){if(!(this instanceof n))return new n(o,i,t);if(eO(t!==0,"Cannot step a Range by 0"),o=o||0,i===void 0&&(i=1/0),t=t===void 0?1:Math.abs(t),i<o&&(t=-t),this._start=o,this._end=i,this._step=t,this.size=Math.max(0,Math.ceil((i-o)/t-1)+1),this.size===0){if(O6)return O6;O6=this}}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},n.prototype.get=function(i,t){return this.has(i)?this._start+ki(this,i)*this._step:t},n.prototype.includes=function(i){var t=(i-this._start)/this._step;return t>=0&&t<this.size&&t===Math.floor(t)},n.prototype.slice=function(i,t){return fv(i,t,this.size)?this:(i=Df(i,this.size),t=hv(t,this.size),t<=i?new n(0,0):new n(this.get(i,this._end),this.get(t,this._end),this._step))},n.prototype.indexOf=function(i){var t=i-this._start;if(t%this._step===0){var e=t/this._step;if(e>=0&&e<this.size)return e}return-1},n.prototype.lastIndexOf=function(i){return this.indexOf(i)},n.prototype.__iterate=function(i,t){for(var e=this.size,r=this._step,a=t?this._start+(e-1)*r:this._start,c=0;c!==e&&i(a,t?e-++c:c++,this)!==!1;)a+=t?-r:r;return c},n.prototype.__iterator=function(i,t){var e=this.size,r=this._step,a=t?this._start+(e-1)*r:this._start,c=0;return new Rt(function(){if(c===e)return Ur();var s=a;return a+=t?-r:r,zt(i,t?e-++c:c++,s)})},n.prototype.equals=function(i){return i instanceof n?this._start===i._start&&this._end===i._end&&this._step===i._step:_O(this,i)},n})(_n),O6;function Rw(u,n,o){for(var i=IG(n),t=0;t!==i.length;)if(u=Ow(u,i[t++],Ot),u===Ot)return o;return u}function zG(u,n){return Rw(this,u,n)}function mO(u,n){return Rw(u,n,Ot)!==Ot}function EK(u){return mO(this,u)}function XG(){rn(this.size);var u={};return this.__iterate(function(n,o){u[o]=n}),u}Gt.isIterable=Nr;Gt.isKeyed=Ct;Gt.isIndexed=Or;Gt.isAssociative=jf;Gt.isOrdered=an;Gt.Iterator=Rt;zl(Gt,{toArray:function(){rn(this.size);var n=new Array(this.size||0),o=Ct(this),i=0;return this.__iterate(function(t,e){n[i++]=o?[e,t]:t}),n},toIndexedSeq:function(){return new mG(this)},toJS:function(){return bw(this)},toKeyedSeq:function(){return new Sw(this,!0)},toMap:function(){return ea(this.toKeyedSeq())},toObject:XG,toOrderedMap:function(){return Vn(this.toKeyedSeq())},toOrderedSet:function(){return Vl(Ct(this)?this.valueSeq():this)},toSet:function(){return $f(Ct(this)?this.valueSeq():this)},toSetSeq:function(){return new vG(this)},toSeq:function(){return Or(this)?this.toIndexedSeq():Ct(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return wv(Ct(this)?this.valueSeq():this)},toList:function(){return Bf(Ct(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(n,o){return this.size===0?n+o:n+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+o},concat:function(){for(var n=[],o=arguments.length;o--;)n[o]=arguments[o];return Mt(this,dK(this,n))},includes:function(n){return this.some(function(o){return fr(o,n)})},entries:function(){return this.__iterator(pn)},every:function(n,o){rn(this.size);var i=!0;return this.__iterate(function(t,e,r){if(!n.call(o,t,e,r))return i=!1,!1}),i},filter:function(n,o){return Mt(this,AG(this,n,o,!0))},partition:function(n,o){return sK(this,n,o)},find:function(n,o,i){var t=this.findEntry(n,o);return t?t[1]:i},forEach:function(n,o){return rn(this.size),this.__iterate(o?n.bind(o):n)},join:function(n){rn(this.size),n=n!==void 0?""+n:",";var o="",i=!0;return this.__iterate(function(t){i?i=!1:o+=n,o+=t!=null?t.toString():""}),o},keys:function(){return this.__iterator(bv)},map:function(n,o){return Mt(this,SG(this,n,o))},reduce:function(n,o,i){return nx(this,n,o,i,arguments.length<2,!1)},reduceRight:function(n,o,i){return nx(this,n,o,i,arguments.length<2,!0)},reverse:function(){return Mt(this,KA(this,!0))},slice:function(n,o){return Mt(this,WA(this,n,o,!0))},some:function(n,o){rn(this.size);var i=!1;return this.__iterate(function(t,e,r){if(n.call(o,t,e,r))return i=!0,!1}),i},sort:function(n){return Mt(this,Sf(this,n))},values:function(){return this.__iterator(Un)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(n,o){return wf(n?this.toSeq().filter(n,o):this)},countBy:function(n,o){return uK(this,n,o)},equals:function(n){return _O(this,n)},entrySeq:function(){var n=this;if(n._cache)return new Ul(n._cache);var o=n.toSeq().map(IK).toIndexedSeq();return o.fromEntrySeq=function(){return n.toSeq()},o},filterNot:function(n,o){return this.filter(E6(n),o)},findEntry:function(n,o,i){var t=i;return this.__iterate(function(e,r,a){if(n.call(o,e,r,a))return t=[r,e],!1}),t},findKey:function(n,o){var i=this.findEntry(n,o);return i&&i[0]},findLast:function(n,o,i){return this.toKeyedSeq().reverse().find(n,o,i)},findLastEntry:function(n,o,i){return this.toKeyedSeq().reverse().findEntry(n,o,i)},findLastKey:function(n,o){return this.toKeyedSeq().reverse().findKey(n,o)},first:function(n){return this.find(oG,null,n)},flatMap:function(n,o){return Mt(this,lK(this,n,o))},flatten:function(n){return Mt(this,EG(this,n,!0))},fromEntrySeq:function(){return new TG(this)},get:function(n,o){return this.find(function(i,t){return fr(t,n)},void 0,o)},getIn:zG,groupBy:function(n,o){return oK(this,n,o)},has:function(n){return this.get(n,Ot)!==Ot},hasIn:EK,isSubset:function(n){return n=typeof n.includes=="function"?n:Gt(n),this.every(function(o){return n.includes(o)})},isSuperset:function(n){return n=typeof n.isSubset=="function"?n:Gt(n),n.isSubset(this)},keyOf:function(n){return this.findKey(function(o){return fr(o,n)})},keySeq:function(){return this.toSeq().map(xK).toIndexedSeq()},last:function(n){return this.toSeq().reverse().first(n)},lastKeyOf:function(n){return this.toKeyedSeq().reverse().keyOf(n)},max:function(n){return aT(this,n)},maxBy:function(n,o){return aT(this,o,n)},min:function(n){return aT(this,n?ix(n):ux)},minBy:function(n,o){return aT(this,o?ix(o):ux,n)},rest:function(){return this.slice(1)},skip:function(n){return n===0?this:this.slice(Math.max(0,n))},skipLast:function(n){return n===0?this:this.slice(0,-Math.max(0,n))},skipWhile:function(n,o){return Mt(this,OG(this,n,o,!0))},skipUntil:function(n,o){return this.skipWhile(E6(n),o)},sortBy:function(n,o){return Mt(this,Sf(this,o,n))},take:function(n){return this.slice(0,Math.max(0,n))},takeLast:function(n){return this.slice(-Math.max(0,n))},takeWhile:function(n,o){return Mt(this,cK(this,n,o))},takeUntil:function(n,o){return this.takeWhile(E6(n),o)},update:function(n){return n(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=RK(this))}});var Dr=Gt.prototype;Dr[dG]=!0;Dr[mw]=Dr.values;Dr.toJSON=Dr.toArray;Dr.__toStringMapper=ev;Dr.inspect=Dr.toSource=function(){return this.toString()};Dr.chain=Dr.flatMap;Dr.contains=Dr.includes;zl(yn,{flip:function(){return Mt(this,wG(this))},mapEntries:function(n,o){var i=this,t=0;return Mt(this,this.toSeq().map(function(e,r){return n.call(o,[r,e],t++,i)}).fromEntrySeq())},mapKeys:function(n,o){var i=this;return Mt(this,this.toSeq().flip().map(function(t,e){return n.call(o,t,e,i)}).flip())}});var Av=yn.prototype;Av[lG]=!0;Av[mw]=Dr.entries;Av.toJSON=XG;Av.__toStringMapper=function(u,n){return ev(n)+": "+ev(u)};zl(Gl,{toKeyedSeq:function(){return new Sw(this,!1)},filter:function(n,o){return Mt(this,AG(this,n,o,!1))},findIndex:function(n,o){var i=this.findEntry(n,o);return i?i[0]:-1},indexOf:function(n){var o=this.keyOf(n);return o===void 0?-1:o},lastIndexOf:function(n){var o=this.lastKeyOf(n);return o===void 0?-1:o},reverse:function(){return Mt(this,KA(this,!1))},slice:function(n,o){return Mt(this,WA(this,n,o,!1))},splice:function(n,o){var i=arguments.length;if(o=Math.max(o||0,0),i===0||i===2&&!o)return this;n=Df(n,n<0?this.count():this.size);var t=this.slice(0,n);return Mt(this,i===1?t:t.concat(Yn(arguments,2),this.slice(n+o)))},findLastIndex:function(n,o){var i=this.findLastEntry(n,o);return i?i[0]:-1},first:function(n){return this.get(0,n)},flatten:function(n){return Mt(this,EG(this,n,!1))},get:function(n,o){return n=ki(this,n),n<0||this.size===1/0||this.size!==void 0&&n>this.size?o:this.find(function(i,t){return t===n},void 0,o)},has:function(n){return n=ki(this,n),n>=0&&(this.size!==void 0?this.size===1/0||n<this.size:this.indexOf(n)!==-1)},interpose:function(n){return Mt(this,fK(this,n))},interleave:function(){var n=[this].concat(Yn(arguments)),o=uT(this.toSeq(),_n.of,n),i=o.flatten(!0);return o.size&&(i.size=o.size*n.length),Mt(this,i)},keySeq:function(){return gO(0,this.size)},last:function(n){return this.get(-1,n)},skipWhile:function(n,o){return Mt(this,OG(this,n,o,!1))},zip:function(){var n=[this].concat(Yn(arguments));return Mt(this,uT(this,ax,n))},zipAll:function(){var n=[this].concat(Yn(arguments));return Mt(this,uT(this,ax,n,!0))},zipWith:function(n){var o=Yn(arguments);return o[0]=this,Mt(this,uT(this,n,o))}});var Uf=Gl.prototype;Uf[fG]=!0;Uf[Mf]=!0;zl(Lf,{get:function(n,o){return this.has(n)?n:o},includes:function(n){return this.has(n)},keySeq:function(){return this.valueSeq()}});var xf=Lf.prototype;xf.has=Dr.includes;xf.contains=xf.includes;xf.keys=xf.values;zl(Yi,Av);zl(_n,Uf);zl(qf,xf);function nx(u,n,o,i,t,e){return rn(u.size),u.__iterate(function(r,a,c){t?(t=!1,o=r):o=n.call(i,o,r,a,c)},e),o}function xK(u,n){return n}function IK(u,n){return[n,u]}function E6(u){return function(){return!u.apply(this,arguments)}}function ix(u){return function(){return-u.apply(this,arguments)}}function ax(){return Yn(arguments)}function ux(u,n){return u<n?1:u>n?-1:0}function RK(u){if(u.size===1/0)return 0;var n=an(u),o=Ct(u),i=n?1:0,t=u.__iterate(o?n?function(e,r){i=31*i+ox(Br(e),Br(r))|0}:function(e,r){i=i+ox(Br(e),Br(r))|0}:n?function(e){i=31*i+Br(e)|0}:function(e){i=i+Br(e)|0});return FK(t,i)}function FK(u,n){return n=i0(n,3432918353),n=i0(n<<15|n>>>-15,461845907),n=i0(n<<13|n>>>-13,5),n=(n+3864292196|0)^u,n=i0(n^n>>>16,2246822507),n=i0(n^n>>>13,3266489909),n=ww(n^n>>>16),n}function ox(u,n){return u^n+2654435769+(u<<6)+(u>>2)|0}var Vl=(function(u){function n(o){return o==null?TA():Iw(o)?o:TA().withMutations(function(i){var t=Lf(o);rn(t.size),t.forEach(function(e){return i.add(e)})})}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.of=function(){return this(arguments)},n.fromKeys=function(i){return this(yn(i).keySeq())},n.prototype.toString=function(){return this.__toString("OrderedSet {","}")},n})($f);Vl.isOrderedSet=Iw;var Xl=Vl.prototype;Xl[Mf]=!0;Xl.zip=Uf.zip;Xl.zipWith=Uf.zipWith;Xl.zipAll=Uf.zipAll;Xl.__empty=TA;Xl.__make=JG;function JG(u,n){var o=Object.create(Xl);return o.size=u?u.size:0,o._map=u,o.__ownerID=n,o}var sx;function TA(){return sx||(sx=JG(M3()))}var kG={LeftThenRight:-1,RightThenLeft:1};function NK(u){if(Wi(u))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(un(u))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(u===null||typeof u!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var sr=function(n,o){var i;NK(n);var t=function(a){var c=this;if(a instanceof t)return a;if(!(this instanceof t))return new t(a);if(!i){i=!0;var s=Object.keys(n),d=e._indices={};e._name=o,e._keys=s,e._defaultValues=n;for(var l=0;l<s.length;l++){var f=s[l];d[f]=l,e[f]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+TO(this)+' with property "'+f+'" since that property name is part of the Record API.'):PK(e,f)}}return this.__ownerID=void 0,this._values=Bf().withMutations(function(h){h.setSize(c._keys.length),yn(a).forEach(function(p,y){h.set(c._indices[y],p===c._defaultValues[y]?void 0:p)})}),this},e=t.prototype=Object.create(Bt);return e.constructor=t,o&&(t.displayName=o),t};sr.prototype.toString=function(){for(var n=TO(this)+" { ",o=this._keys,i,t=0,e=o.length;t!==e;t++)i=o[t],n+=(t?", ":"")+i+": "+ev(this.get(i));return n+" }"};sr.prototype.equals=function(n){return this===n||Wi(n)&&If(this).equals(If(n))};sr.prototype.hashCode=function(){return If(this).hashCode()};sr.prototype.has=function(n){return this._indices.hasOwnProperty(n)};sr.prototype.get=function(n,o){if(!this.has(n))return o;var i=this._indices[n],t=this._values.get(i);return t===void 0?this._defaultValues[n]:t};sr.prototype.set=function(n,o){if(this.has(n)){var i=this._values.set(this._indices[n],o===this._defaultValues[n]?void 0:o);if(i!==this._values&&!this.__ownerID)return vO(this,i)}return this};sr.prototype.remove=function(n){return this.set(n)};sr.prototype.clear=function(){var n=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:vO(this,n)};sr.prototype.wasAltered=function(){return this._values.wasAltered()};sr.prototype.toSeq=function(){return If(this)};sr.prototype.toJS=function(){return bw(this)};sr.prototype.entries=function(){return this.__iterator(pn)};sr.prototype.__iterator=function(n,o){return If(this).__iterator(n,o)};sr.prototype.__iterate=function(n,o){return If(this).__iterate(n,o)};sr.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var o=this._values.__ensureOwner(n);return n?vO(this,o,n):(this.__ownerID=n,this._values=o,this)};sr.isRecord=Wi;sr.getDescriptiveName=TO;var Bt=sr.prototype;Bt[pG]=!0;Bt[lv]=Bt.remove;Bt.deleteIn=Bt.removeIn=oO;Bt.getIn=zG;Bt.hasIn=Dr.hasIn;Bt.merge=FG;Bt.mergeWith=NG;Bt.mergeIn=dO;Bt.mergeDeep=CG;Bt.mergeDeepWith=qG;Bt.mergeDeepIn=lO;Bt.setIn=aO;Bt.update=sO;Bt.updateIn=cO;Bt.withMutations=mv;Bt.asMutable=vv;Bt.asImmutable=Tv;Bt[mw]=Bt.entries;Bt.toJSON=Bt.toObject=Dr.toObject;Bt.inspect=Bt.toSource=function(){return this.toString()};function vO(u,n,o){var i=Object.create(Object.getPrototypeOf(u));return i._values=n,i.__ownerID=o,i}function TO(u){return u.constructor.displayName||u.constructor.name||"Record"}function If(u){return JA(u._keys.map(function(n){return[n,u.get(n)]}))}function PK(u,n){try{Object.defineProperty(u,n,{get:function(){return this.get(n)},set:function(o){eO(this.__ownerID,"Cannot set on an immutable record."),this.set(n,o)}})}catch{}}var KG=(function(u){function n(o,i){if(!(this instanceof n))return new n(o,i);if(this._value=o,this.size=i===void 0?1/0:Math.max(0,i),this.size===0){if(x6)return x6;x6=this}}return u&&(n.__proto__=u),n.prototype=Object.create(u&&u.prototype),n.prototype.constructor=n,n.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},n.prototype.get=function(i,t){return this.has(i)?this._value:t},n.prototype.includes=function(i){return fr(this._value,i)},n.prototype.slice=function(i,t){var e=this.size;return fv(i,t,e)?this:new n(this._value,hv(t,e)-Df(i,e))},n.prototype.reverse=function(){return this},n.prototype.indexOf=function(i){return fr(this._value,i)?0:-1},n.prototype.lastIndexOf=function(i){return fr(this._value,i)?this.size:-1},n.prototype.__iterate=function(i,t){for(var e=this.size,r=0;r!==e&&i(this._value,t?e-++r:r++,this)!==!1;);return r},n.prototype.__iterator=function(i,t){var e=this,r=this.size,a=0;return new Rt(function(){return a===r?Ur():zt(i,t?r-++a:a++,e._value)})},n.prototype.equals=function(i){return i instanceof n?fr(this._value,i._value):_O(this,i)},n})(_n),x6;function WG(u,n){return YG([],n||DK,u,"",n&&n.length>2?[]:void 0,{"":u})}function YG(u,n,o,i,t,e){if(typeof o!="string"&&!un(o)&&(GA(o)||HA(o)||Aw(o))){if(~u.indexOf(o))throw new TypeError("Cannot convert circular structure to Immutable");u.push(o),t&&i!==""&&t.push(i);var r=n.call(e,i,Pr(o).map(function(a,c){return YG(u,n,a,c,t,o)}),t&&t.slice());return u.pop(),t&&t.pop(),r}return o}function DK(u,n){return Or(n)?n.toList():Ct(n)?n.toMap():n.toSet()}var ZG="4.3.7",jK={version:ZG,Collection:Gt,Iterable:Gt,Seq:Pr,Map:ea,OrderedMap:Vn,List:Bf,Stack:wv,Set:$f,OrderedSet:Vl,PairSorting:kG,Record:sr,Range:gO,Repeat:KG,is:fr,fromJS:WG,hash:Br,isImmutable:un,isCollection:Nr,isKeyed:Ct,isIndexed:Or,isAssociative:jf,isOrdered:an,isValueObject:hw,isPlainObject:Aw,isSeq:pv,isList:xw,isMap:yv,isOrderedMap:Tw,isStack:av,isSet:Sv,isOrderedSet:Iw,isRecord:Wi,get:Ow,getIn:Rw,has:tO,hasIn:mO,merge:DG,mergeDeep:LG,mergeWith:jG,mergeDeepWith:MG,remove:rO,removeIn:uO,set:nO,setIn:iO,update:Ew,updateIn:Zi},LK=Gt;const MK=Object.freeze(Object.defineProperty({__proto__:null,Collection:Gt,Iterable:LK,List:Bf,Map:ea,OrderedMap:Vn,OrderedSet:Vl,PairSorting:kG,Range:gO,Record:sr,Repeat:KG,Seq:Pr,Set:$f,Stack:wv,default:jK,fromJS:WG,get:Ow,getIn:Rw,has:tO,hasIn:mO,hash:Br,is:fr,isAssociative:jf,isCollection:Nr,isImmutable:un,isIndexed:Or,isKeyed:Ct,isList:xw,isMap:yv,isOrdered:an,isOrderedMap:Tw,isOrderedSet:Iw,isPlainObject:Aw,isRecord:Wi,isSeq:pv,isSet:Sv,isStack:av,isValueObject:hw,merge:DG,mergeDeep:LG,mergeDeepWith:MG,mergeWith:jG,remove:rO,removeIn:uO,set:nO,setIn:iO,update:Ew,updateIn:Zi,version:ZG},Symbol.toStringTag,{value:"Module"})),wO=VA(MK);var cx;function ez(){if(cx)return Sa;cx=1,Object.defineProperty(Sa,"__esModule",{value:!0}),Sa.ActionContextKey=Sa.ActionContext=void 0;const u=wO;let n=class B3{constructor(t={}){this.map=(0,u.Map)(t)}setDefault(t,e){return this.has(t)?this:this.set(t,e)}set(t,e){return this.setRaw(t.name,e)}setRaw(t,e){return new B3(this.map.set(t,e))}delete(t){return new B3(this.map.delete(t.name))}get(t){return this.getRaw(t.name)}getRaw(t){return this.map.get(t)}getSafe(t){if(!this.has(t))throw new Error(`Context entry ${t.name} is required but not available`);return this.get(t)}has(t){return this.hasRaw(t.name)}hasRaw(t){return this.map.has(t)}merge(...t){let e=this;for(const r of t)for(const a of r.keys())e=e.set(a,r.get(a));return e}keys(){return[...this.map.keys()].map(t=>new o(t))}toJS(){return this.map.toJS()}toString(){return`ActionContext(${JSON.stringify(this.map.toJS())})`}[Symbol.for("nodejs.util.inspect.custom")](){return`ActionContext(${JSON.stringify(this.map.toJS(),null,"  ")})`}static ensureActionContext(t){return t instanceof B3?t:new B3((0,u.Map)(t??{}))}};Sa.ActionContext=n;class o{constructor(t){this.name=t}}return Sa.ActionContextKey=o,Sa}var a0={},dx;function tz(){if(dx)return a0;dx=1,Object.defineProperty(a0,"__esModule",{value:!0}),a0.Bus=void 0;let u=class{constructor(o){this.actors=[],this.observers=[],this.dependencyLinks=new Map,Object.assign(this,o),this.failMessage=`All actors over bus ${this.name} failed to handle an action`}subscribe(o){this.actors.push(o),this.reorderForDependencies()}subscribeObserver(o){this.observers.push(o)}unsubscribe(o){const i=this.actors.indexOf(o);return i>=0?(this.actors.splice(i,1),!0):!1}unsubscribeObserver(o){const i=this.observers.indexOf(o);return i>=0?(this.observers.splice(i,1),!0):!1}publish(o){return this.actors.map(i=>({actor:i,reply:i.test(o)}))}onRun(o,i,t){for(const e of this.observers)e.onRun(o,i,t)}addDependencies(o,i){for(const t of i){let e=this.dependencyLinks.get(t);e||(e=[],this.dependencyLinks.set(t,e)),e.push(o)}this.reorderForDependencies()}reorderForDependencies(){if(this.dependencyLinks.size>0){const o=[];for(const i of this.dependencyLinks.keys()){const t=this.actors.indexOf(i);t>=0&&(this.actors.splice(t,1),o.push(i))}for(;o.length>0;){let i=-1;for(let e=0;e<o.length;e++){let r=!0;for(const a of this.dependencyLinks.get(o[e]))if(!this.actors.includes(a)&&o.includes(a)){r=!1;break}if(r){i=e;break}}if(i<0)throw new Error(`Cyclic dependency links detected in bus ${this.name}`);const t=o.splice(i,1)[0];this.actors.push(t)}}}};return a0.Bus=u,a0}var u0={},lx;function CK(){if(lx)return u0;lx=1,Object.defineProperty(u0,"__esModule",{value:!0}),u0.BusIndexed=void 0;const u=tz();let n=class extends u.Bus{constructor(i){super(i),this.actorsIndex={}}subscribe(i){const t=this.getActorIdentifiers(i)??["_undefined_"];for(const e of t){let r=this.actorsIndex[e];r||(r=this.actorsIndex[e]=[]),r.push(i),super.subscribe(i)}}unsubscribe(i){const t=this.getActorIdentifiers(i)??["_undefined_"];let e=!1;for(const r of t){const a=this.actorsIndex[r];if(a){const c=a.indexOf(i);c>=0&&a.splice(c,1),a.length===0&&delete this.actorsIndex[r]}e=e||super.unsubscribe(i)}return e}publish(i){const t=this.getActionIdentifier(i);return t?[...this.actorsIndex[t]||[],...this.actorsIndex._undefined_||[]].map(r=>({actor:r,reply:r.test(i)})):super.publish(i)}getActorIdentifiers(i){const t=this.actorIdentifierFields.reduce((e,r)=>e[r],i);if(t)return Array.isArray(t)?t:[t]}getActionIdentifier(i){return this.actionIdentifierFields.reduce((t,e)=>t[e],i)}};return u0.BusIndexed=n,u0}var o0={},fx;function rz(){if(fx)return o0;fx=1,Object.defineProperty(o0,"__esModule",{value:!0}),o0.CONTEXT_KEY_LOGGER=void 0;const u=ez();return o0.CONTEXT_KEY_LOGGER=new u.ActionContextKey("@comunica/core:log"),o0}var s0={},hx;function qK(){if(hx)return s0;hx=1,Object.defineProperty(s0,"__esModule",{value:!0}),s0.ActionObserver=void 0;let u=class{constructor(o){Object.assign(this,o)}};return s0.ActionObserver=u,s0}var c0={},px;function BK(){if(px)return c0;px=1,Object.defineProperty(c0,"__esModule",{value:!0}),c0.Actor=void 0;const u=rz();let n=class Nl{constructor(i){this.beforeActors=[],Object.assign(this,i),this.bus.subscribe(this),this.beforeActors.length>0&&this.bus.addDependencies(this,this.beforeActors),i.busFailMessage&&(this.bus.failMessage=i.busFailMessage)}static getContextLogger(i){return i.get(u.CONTEXT_KEY_LOGGER)}runObservable(i,t){const e=this.run(i,t);return this.bus.onRun(this,i,e),e}getDefaultLogData(i,t){const e=t?t():{};return e.actor=this.name,e}logTrace(i,t,e){const r=Nl.getContextLogger(i);r&&r.trace(t,this.getDefaultLogData(i,e))}logDebug(i,t,e){const r=Nl.getContextLogger(i);r&&r.debug(t,this.getDefaultLogData(i,e))}logInfo(i,t,e){const r=Nl.getContextLogger(i);r&&r.info(t,this.getDefaultLogData(i,e))}logWarn(i,t,e){const r=Nl.getContextLogger(i);r&&r.warn(t,this.getDefaultLogData(i,e))}logError(i,t,e){const r=Nl.getContextLogger(i);r&&r.error(t,this.getDefaultLogData(i,e))}logFatal(i,t,e){const r=Nl.getContextLogger(i);r&&r.fatal(t,this.getDefaultLogData(i,e))}};return c0.Actor=n,c0}var d0={},bx;function $K(){if(bx)return d0;bx=1,Object.defineProperty(d0,"__esModule",{value:!0}),d0.Mediator=void 0;let u=class wA{constructor(o){Object.assign(this,o)}publish(o){const i=this.bus.publish(o);if(i.length===0)throw new Error(`No actors are able to reply to a message in the bus ${this.bus.name}`);return i}async mediateActor(o){return await this.mediateWith(o,this.publish(o))}async mediateTestable(o){return(await this.mediateActor(o)).mapAsync((t,e)=>t.runObservable(o,e))}async mediate(o){return(await this.mediateTestable(o)).getOrThrow()}constructFailureMessage(o,i){const t=`
        `;return`${this.bus.failMessage.replaceAll(/\$\{(.*?)\}/gu,(r,a)=>wA.getObjectValue({action:o},a.split("."))||r)}
    Error messages of failing actors:${t}${i.join(t)}`}static getObjectValue(o,i){if(i.length===0)return o;if(o)return wA.getObjectValue(o[i[0]],i.slice(1))}};return d0.Mediator=u,d0}var Tr={},yx;function UK(){if(yx)return Tr;yx=1,Object.defineProperty(Tr,"__esModule",{value:!0}),Tr.TestResultFailed=Tr.TestResultPassed=Tr.failTest=Tr.passTestVoidWithSideData=Tr.passTestWithSideData=Tr.passTestVoid=Tr.passTest=void 0;function u(a){return new e(a,void 0)}Tr.passTest=u;function n(){return new e(!0,void 0)}Tr.passTestVoid=n;function o(a,c){return new e(a,c)}Tr.passTestWithSideData=o;function i(a){return new e(!0,a)}Tr.passTestVoidWithSideData=i;function t(a){return new r(a)}Tr.failTest=t;class e{constructor(c,s){this.value=c,this.sideData=s}isPassed(){return!0}isFailed(){return!1}get(){return this.value}getOrThrow(){return this.value}getSideData(){return this.sideData}getFailMessage(){}map(c){return new e(c(this.value,this.sideData),this.sideData)}async mapAsync(c){return new e(await c(this.value,this.sideData),this.sideData)}}Tr.TestResultPassed=e;class r{constructor(c){this.failMessage=c}isPassed(){return!1}isFailed(){return!0}get(){}getOrThrow(){throw new Error(this.getFailMessage())}getSideData(){throw new Error(this.getFailMessage())}getFailMessage(){return this.failMessage}map(){return this}async mapAsync(){return this}}return Tr.TestResultFailed=r,Tr}var _x;function be(){return _x||(_x=1,(function(u){var n=wa&&wa.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=wa&&wa.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ez(),u),o(tz(),u),o(CK(),u),o(rz(),u),o(qK(),u),o(BK(),u),o($K(),u),o(UK(),u)})(wa)),wa}var gx;function VK(){if(gx)return n0;gx=1,Object.defineProperty(n0,"__esModule",{value:!0}),n0.ActorInit=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i)}};return n0.ActorInit=n,n0}var mx;function QK(){return mx||(mx=1,(function(u){var n=Ta&&Ta.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ta&&Ta.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(VK(),u)})(Ta)),Ta}var vx;function nz(){if(vx)return r0;vx=1,Object.defineProperty(r0,"__esModule",{value:!0}),r0.ActorInitQueryBase=void 0;const u=QK(),n=be();let o=class extends u.ActorInit{async test(t){return(0,n.passTestVoid)()}async run(t){throw new Error("ActorInitSparql#run is not supported in the browser.")}};return r0.ActorInitQueryBase=o,r0}var l0={},I6={exports:{}},Tx;function ta(){if(Tx)return I6.exports;Tx=1;var u=I6.exports={},n,o;function i(){throw new Error("setTimeout has not been defined")}function t(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?n=setTimeout:n=i}catch{n=i}try{typeof clearTimeout=="function"?o=clearTimeout:o=t}catch{o=t}})();function e(y){if(n===setTimeout)return setTimeout(y,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(y,0);try{return n(y,0)}catch{try{return n.call(null,y,0)}catch{return n.call(this,y,0)}}}function r(y){if(o===clearTimeout)return clearTimeout(y);if((o===t||!o)&&clearTimeout)return o=clearTimeout,clearTimeout(y);try{return o(y)}catch{try{return o.call(null,y)}catch{return o.call(this,y)}}}var a=[],c=!1,s,d=-1;function l(){!c||!s||(c=!1,s.length?a=s.concat(a):d=-1,a.length&&f())}function f(){if(!c){var y=e(l);c=!0;for(var _=a.length;_;){for(s=a,a=[];++d<_;)s&&s[d].run();d=-1,_=a.length}s=null,c=!1,r(y)}}u.nextTick=function(y){var _=new Array(arguments.length-1);if(arguments.length>1)for(var b=1;b<arguments.length;b++)_[b-1]=arguments[b];a.push(new h(y,_)),a.length===1&&!c&&e(f)};function h(y,_){this.fun=y,this.array=_}h.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={};function p(){}return u.on=p,u.addListener=p,u.once=p,u.off=p,u.removeListener=p,u.removeAllListeners=p,u.emit=p,u.prependListener=p,u.prependOnceListener=p,u.listeners=function(y){return[]},u.binding=function(y){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(y){throw new Error("process.chdir is not supported")},u.umask=function(){return 0},I6.exports}var wx;function HK(){if(wx)return l0;wx=1,Object.defineProperty(l0,"__esModule",{value:!0}),l0.ActorInitQuery=void 0;const u=nz();typeof process>"u"&&(globalThis.process=ta());class n extends u.ActorInitQueryBase{}return l0.ActorInitQuery=n,l0}var f0={},Aa={},xt={},Sx;function iz(){if(Sx)return xt;Sx=1,Object.defineProperty(xt,"__esModule",{value:!0}),xt.KeysStatistics=xt.KeysRdfJoin=xt.KeysMergeBindingsContext=xt.KeysRdfUpdateQuads=xt.KeysQuerySourceIdentify=xt.KeysRdfParseHtmlScript=xt.KeysRdfParseJsonLd=xt.KeysQueryOperation=xt.KeysExpressionEvaluator=xt.KeysInitQuery=xt.KeysHttpProxy=xt.KeysHttpMemento=xt.KeysHttpWayback=xt.KeysHttp=xt.KeysCore=void 0;const u=be();return xt.KeysCore={log:u.CONTEXT_KEY_LOGGER},xt.KeysHttp={includeCredentials:new u.ActionContextKey("@comunica/bus-http:include-credentials"),auth:new u.ActionContextKey("@comunica/bus-http:auth"),fetch:new u.ActionContextKey("@comunica/bus-http:fetch"),httpTimeout:new u.ActionContextKey("@comunica/bus-http:http-timeout"),httpBodyTimeout:new u.ActionContextKey("@comunica/bus-http:http-body-timeout"),httpRetryCount:new u.ActionContextKey("@comunica/bus-http:http-retry-count"),httpRetryDelayFallback:new u.ActionContextKey("@comunica/bus-http:http-retry-delay-fallback"),httpRetryDelayLimit:new u.ActionContextKey("@comunica/bus-http:http-retry-delay-limit"),httpRetryStatusCodes:new u.ActionContextKey("@comunica/bus-http:http-retry-status-codes")},xt.KeysHttpWayback={recoverBrokenLinks:new u.ActionContextKey("@comunica/bus-http:recover-broken-links")},xt.KeysHttpMemento={datetime:new u.ActionContextKey("@comunica/actor-http-memento:datetime")},xt.KeysHttpProxy={httpProxyHandler:new u.ActionContextKey("@comunica/actor-http-proxy:httpProxyHandler")},xt.KeysInitQuery={querySourcesUnidentified:new u.ActionContextKey("@comunica/actor-init-query:querySourcesUnidentified"),initialBindings:new u.ActionContextKey("@comunica/actor-init-query:initialBindings"),queryFormat:new u.ActionContextKey("@comunica/actor-init-query:queryFormat"),graphqlSingularizeVariables:new u.ActionContextKey("@comunica/actor-init-query:singularizeVariables"),lenient:new u.ActionContextKey("@comunica/actor-init-query:lenient"),queryString:new u.ActionContextKey("@comunica/actor-init-query:queryString"),query:new u.ActionContextKey("@comunica/actor-init-query:query"),baseIRI:new u.ActionContextKey("@comunica/actor-init-query:baseIRI"),functionArgumentsCache:new u.ActionContextKey("@comunica/actor-init-query:functionArgumentsCache"),queryTimestamp:new u.ActionContextKey("@comunica/actor-init-query:queryTimestamp"),queryTimestampHighResolution:new u.ActionContextKey("@comunica/actor-init-query:queryTimestampHighResolution"),extensionFunctionCreator:new u.ActionContextKey("@comunica/actor-init-query:extensionFunctionCreator"),extensionFunctions:new u.ActionContextKey("@comunica/actor-init-query:extensionFunctions"),cliArgsHandlers:new u.ActionContextKey("@comunica/actor-init-query:cliArgsHandlers"),explain:new u.ActionContextKey("@comunica/actor-init-query:explain"),physicalQueryPlanLogger:new u.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanLogger"),physicalQueryPlanNode:new u.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanNode"),jsonLdContext:new u.ActionContextKey("@context"),invalidateCache:new u.ActionContextKey("@comunica/actor-init-query:invalidateCache"),dataFactory:new u.ActionContextKey("@comunica/actor-init-query:dataFactory"),distinctConstruct:new u.ActionContextKey("@comunica/actor-init-query:distinctConstruct")},xt.KeysExpressionEvaluator={extensionFunctionCreator:new u.ActionContextKey("@comunica/utils-expression-evaluator:extensionFunctionCreator"),superTypeProvider:new u.ActionContextKey("@comunica/utils-expression-evaluator:superTypeProvider"),defaultTimeZone:new u.ActionContextKey("@comunica/utils-expression-evaluator:defaultTimeZone"),actionContext:new u.ActionContextKey("@comunica/utils-expression-evaluator:actionContext")},xt.KeysQueryOperation={operation:new u.ActionContextKey("@comunica/bus-query-operation:operation"),joinLeftMetadata:new u.ActionContextKey("@comunica/bus-query-operation:joinLeftMetadata"),joinRightMetadatas:new u.ActionContextKey("@comunica/bus-query-operation:joinRightMetadatas"),joinBindings:new u.ActionContextKey("@comunica/bus-query-operation:joinBindings"),readOnly:new u.ActionContextKey("@comunica/bus-query-operation:readOnly"),isPathArbitraryLengthDistinctKey:new u.ActionContextKey("@comunica/bus-query-operation:isPathArbitraryLengthDistinct"),limitIndicator:new u.ActionContextKey("@comunica/bus-query-operation:limitIndicator"),unionDefaultGraph:new u.ActionContextKey("@comunica/bus-query-operation:unionDefaultGraph"),querySources:new u.ActionContextKey("@comunica/bus-query-operation:querySources")},xt.KeysRdfParseJsonLd={documentLoader:new u.ActionContextKey("@comunica/actor-rdf-parse-jsonld:documentLoader"),strictValues:new u.ActionContextKey("@comunica/actor-rdf-parse-jsonld:strictValues"),parserOptions:new u.ActionContextKey("@comunica/actor-rdf-parse-jsonld:parserOptions")},xt.KeysRdfParseHtmlScript={processingHtmlScript:new u.ActionContextKey("@comunica/actor-rdf-parse-html-script:processingHtmlScript"),extractAllScripts:new u.ActionContextKey("extractAllScripts")},xt.KeysQuerySourceIdentify={sourceIds:new u.ActionContextKey("@comunica/bus-query-source-identify:sourceIds"),hypermediaSourcesAggregatedStores:new u.ActionContextKey("@comunica/bus-query-source-identify:hypermediaSourcesAggregatedStores"),traverse:new u.ActionContextKey("@comunica/bus-query-source-identify:traverse")},xt.KeysRdfUpdateQuads={destination:new u.ActionContextKey("@comunica/bus-rdf-update-quads:destination")},xt.KeysMergeBindingsContext={sourcesBinding:new u.ActionContextKey("@comunica/bus-merge-bindings-context:sourcesBinding")},xt.KeysRdfJoin={lastPhysicalJoin:new u.ActionContextKey("@comunica/bus-rdf-join:lastPhysicalJoin")},xt.KeysStatistics={discoveredLinks:new u.ActionContextKey("@comunica/statistic:discoveredLinks"),dereferencedLinks:new u.ActionContextKey("@comunica/statistic:dereferencedLinks"),intermediateResults:new u.ActionContextKey("@comunica/statistic:intermediateResults")},xt}var Ax;function Ce(){return Ax||(Ax=1,(function(u){var n=Aa&&Aa.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Aa&&Aa.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(iz(),u)})(Aa)),Aa}var Ox;function GK(){if(Ox)return f0;Ox=1,Object.defineProperty(f0,"__esModule",{value:!0}),f0.QueryEngineBase=void 0;const u=Ce(),n=be();let o=class SA{constructor(t){this.actorInitQuery=t}async queryBindings(t,e){return this.queryOfType(t,e,"bindings")}async queryQuads(t,e){return this.queryOfType(t,e,"quads")}async queryBoolean(t,e){return this.queryOfType(t,e,"boolean")}async queryVoid(t,e){return this.queryOfType(t,e,"void")}async queryOfType(t,e,r){const a=await this.query(t,e);if(a.resultType===r)return await a.execute();throw new Error(`Query result type '${r}' was expected, while '${a.resultType}' was found.`)}async query(t,e){const r=await this.queryOrExplain(t,e);if("explain"in r)throw new Error("Tried to explain a query when in query-only mode");return r}async explain(t,e,r){return e.explain=r,await this.queryOrExplain(t,e)}async queryOrExplain(t,e){const r=n.ActionContext.ensureActionContext(e);r.get(u.KeysInitQuery.invalidateCache)&&await this.invalidateHttpCache();const{result:a}=await this.actorInitQuery.mediatorQueryProcess.mediate({query:t,context:r});return"explain"in a?a:SA.internalToFinalResult(a)}async getResultMediaTypes(t){return t=n.ActionContext.ensureActionContext(t),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeCombiner.mediate({context:t,mediaTypes:!0})).mediaTypes}async getResultMediaTypeFormats(t){return t=n.ActionContext.ensureActionContext(t),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeFormatCombiner.mediate({context:t,mediaTypeFormats:!0})).mediaTypeFormats}async resultToString(t,e,r){if(r=n.ActionContext.ensureActionContext(r),!e)switch(t.resultType){case"bindings":e="application/json";break;case"quads":e="application/trig";break;default:e="simple";break}const a={...await SA.finalToInternalResult(t),context:r};return(await this.actorInitQuery.mediatorQueryResultSerialize.mediate({context:r,handle:a,handleMediaType:e})).handle}invalidateHttpCache(t,e){return e=n.ActionContext.ensureActionContext(e),this.actorInitQuery.mediatorHttpInvalidate.mediate({url:t,context:e})}static internalToFinalResult(t){switch(t.type){case"bindings":return{resultType:"bindings",execute:async()=>t.bindingsStream,metadata:async()=>{const e=await t.metadata();return e.variables=e.variables.map(r=>r.variable),e},context:t.context};case"quads":return{resultType:"quads",execute:async()=>t.quadStream,metadata:async()=>await t.metadata(),context:t.context};case"boolean":return{resultType:"boolean",execute:async()=>t.execute(),context:t.context};case"void":return{resultType:"void",execute:async()=>t.execute(),context:t.context}}}static async finalToInternalResult(t){switch(t.resultType){case"bindings":return{type:"bindings",bindingsStream:await t.execute(),metadata:async()=>{const e=await t.metadata();return e.variables=e.variables.map(r=>({variable:r,canBeUndef:!1})),e}};case"quads":return{type:"quads",quadStream:await t.execute(),metadata:async()=>await t.metadata()};case"boolean":return{type:"boolean",execute:()=>t.execute()};case"void":return{type:"void",execute:()=>t.execute()}}}};return f0.QueryEngineBase=o,f0}var Ex;function az(){return Ex||(Ex=1,(function(u){var n=va&&va.__createBinding||(Object.create?(function(t,e,r,a){a===void 0&&(a=r);var c=Object.getOwnPropertyDescriptor(e,r);(!c||("get"in c?!e.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,a,c)}):(function(t,e,r,a){a===void 0&&(a=r),t[a]=e[r]})),o=va&&va.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&n(e,t,r)};Object.defineProperty(u,"__esModule",{value:!0}),u.QueryEngineBase=void 0,o(nz(),u),o(HK(),u);var i=GK();Object.defineProperty(u,"QueryEngineBase",{enumerable:!0,get:function(){return i.QueryEngineBase}})})(va)),va}var Oa={},h0={},Ea={},R6={},xx;function zK(){return xx||(xx=1,Object.defineProperty(R6,"__esModule",{value:!0})),R6}var F6={},Ix;function XK(){return Ix||(Ix=1,Object.defineProperty(F6,"__esModule",{value:!0})),F6}var N6={},Rx;function JK(){return Rx||(Rx=1,Object.defineProperty(N6,"__esModule",{value:!0})),N6}var P6={},Fx;function kK(){return Fx||(Fx=1,Object.defineProperty(P6,"__esModule",{value:!0})),P6}var D6={},Nx;function KK(){return Nx||(Nx=1,Object.defineProperty(D6,"__esModule",{value:!0})),D6}var j6={},Px;function WK(){return Px||(Px=1,Object.defineProperty(j6,"__esModule",{value:!0})),j6}var L6={},Dx;function YK(){return Dx||(Dx=1,Object.defineProperty(L6,"__esModule",{value:!0})),L6}var M6={},jx;function ZK(){return jx||(jx=1,Object.defineProperty(M6,"__esModule",{value:!0})),M6}var C6={},Lx;function eW(){return Lx||(Lx=1,Object.defineProperty(C6,"__esModule",{value:!0})),C6}var q6={},Mx;function tW(){return Mx||(Mx=1,Object.defineProperty(q6,"__esModule",{value:!0})),q6}var B6={},Cx;function rW(){return Cx||(Cx=1,Object.defineProperty(B6,"__esModule",{value:!0})),B6}var $6={},qx;function nW(){return qx||(qx=1,Object.defineProperty($6,"__esModule",{value:!0})),$6}var U6={},Bx;function iW(){return Bx||(Bx=1,Object.defineProperty(U6,"__esModule",{value:!0})),U6}var V6={},$x;function aW(){return $x||($x=1,Object.defineProperty(V6,"__esModule",{value:!0})),V6}var Q6={},Ux;function uW(){return Ux||(Ux=1,Object.defineProperty(Q6,"__esModule",{value:!0})),Q6}var H6={},Vx;function oW(){return Vx||(Vx=1,Object.defineProperty(H6,"__esModule",{value:!0})),H6}var G6={},Qx;function sW(){return Qx||(Qx=1,Object.defineProperty(G6,"__esModule",{value:!0})),G6}var z6={},Hx;function cW(){return Hx||(Hx=1,Object.defineProperty(z6,"__esModule",{value:!0})),z6}var X6={},Gx;function dW(){return Gx||(Gx=1,Object.defineProperty(X6,"__esModule",{value:!0})),X6}var p0={},zx;function lW(){if(zx)return p0;zx=1,Object.defineProperty(p0,"__esModule",{value:!0}),p0.Logger=void 0;let u=class uz{static getLevelOrdinal(o){return uz.LEVELS[o]}};return p0.Logger=u,u.LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},p0}var b0={},Xx;function fW(){if(Xx)return b0;Xx=1,Object.defineProperty(b0,"__esModule",{value:!0}),b0.ExpressionType=void 0;var u;return(function(n){n.Aggregate="aggregate",n.Existence="existence",n.Operator="operator",n.Term="term",n.Variable="variable"})(u||(b0.ExpressionType=u={})),b0}var Jx;function ra(){return Jx||(Jx=1,(function(u){var n=Ea&&Ea.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ea&&Ea.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(zK(),u),o(XK(),u),o(JK(),u),o(kK(),u),o(KK(),u),o(WK(),u),o(YK(),u),o(ZK(),u),o(eW(),u),o(tW(),u),o(rW(),u),o(nW(),u),o(iW(),u),o(aW(),u),o(uW(),u),o(oW(),u),o(sW(),u),o(cW(),u),o(dW(),u),o(lW(),u),o(fW(),u)})(Ea)),Ea}var kx;function hW(){if(kx)return h0;kx=1,Object.defineProperty(h0,"__esModule",{value:!0}),h0.LoggerVoid=void 0;const u=ra();let n=class extends u.Logger{debug(){}error(){}fatal(){}info(){}trace(){}warn(){}};return h0.LoggerVoid=n,h0}var Kx;function pW(){return Kx||(Kx=1,(function(u){var n=Oa&&Oa.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Oa&&Oa.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(hW(),u)})(Oa)),Oa}var xa={},Ia={},Wx;function oz(){if(Wx)return Ia;Wx=1,Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.MediatorFunctionFactory=Ia.ActorFunctionFactory=void 0;const u=be();let n=class extends u.Actor{constructor(t){super(t)}};Ia.ActorFunctionFactory=n;class o extends u.Mediator{}return Ia.MediatorFunctionFactory=o,Ia}var y0={},Yx;function bW(){if(Yx)return y0;Yx=1,Object.defineProperty(y0,"__esModule",{value:!0}),y0.ActorFunctionFactoryDedicated=void 0;const u=be(),n=oz();let o=class extends n.ActorFunctionFactory{constructor(t){super(t)}async test(t){return this.functionNames.includes(t.functionName)&&(this.termFunction||!t.requireTermExpression)?(0,u.passTestVoid)():(0,u.failTest)(`Actor ${this.name} can not provide implementation for "${t.functionName}", only for ${this.termFunction?"":"non-termExpression "}${this.functionNames.join(" and ")}.`)}};return y0.ActorFunctionFactoryDedicated=o,y0}var _0={},Zx;function yW(){if(Zx)return _0;Zx=1,Object.defineProperty(_0,"__esModule",{value:!0}),_0.BusFunctionFactory=void 0;const u=be();let n=class extends u.BusIndexed{constructor(i){super({...i,actorIdentifierFields:["functionNames"],actionIdentifierFields:["functionName"]})}};return _0.BusFunctionFactory=n,_0}var Ra={},J6={},g0={},k6={},wr={},Fa={},m0={},e8;function sz(){if(e8)return m0;e8=1,Object.defineProperty(m0,"__esModule",{value:!0}),m0.BlankNode=void 0;class u{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return m0.BlankNode=u,m0}var v0={},T0={},t8;function cz(){if(t8)return T0;t8=1,Object.defineProperty(T0,"__esModule",{value:!0}),T0.DefaultGraph=void 0;class u{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return T0.DefaultGraph=u,u.INSTANCE=new u,T0}var w0={},S0={},r8;function SO(){if(r8)return S0;r8=1,Object.defineProperty(S0,"__esModule",{value:!0}),S0.NamedNode=void 0;class u{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return S0.NamedNode=u,S0}var n8;function dz(){if(n8)return w0;n8=1,Object.defineProperty(w0,"__esModule",{value:!0}),w0.Literal=void 0;const u=SO();class n{constructor(i,t){this.termType="Literal",this.value=i,typeof t=="string"?(this.language=t,this.datatype=n.RDF_LANGUAGE_STRING):t?(this.language="",this.datatype=t):(this.language="",this.datatype=n.XSD_STRING)}equals(i){return!!i&&i.termType==="Literal"&&i.value===this.value&&i.language===this.language&&this.datatype.equals(i.datatype)}}return w0.Literal=n,n.RDF_LANGUAGE_STRING=new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),n.XSD_STRING=new u.NamedNode("http://www.w3.org/2001/XMLSchema#string"),w0}var A0={},i8;function lz(){if(i8)return A0;i8=1,Object.defineProperty(A0,"__esModule",{value:!0}),A0.Quad=void 0;class u{constructor(o,i,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=i,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return A0.Quad=u,A0}var O0={},a8;function fz(){if(a8)return O0;a8=1,Object.defineProperty(O0,"__esModule",{value:!0}),O0.Variable=void 0;class u{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return O0.Variable=u,O0}var u8;function _W(){if(u8)return v0;u8=1,Object.defineProperty(v0,"__esModule",{value:!0}),v0.DataFactory=void 0;const u=sz(),n=cz(),o=dz(),i=SO(),t=lz(),e=fz();let r=0;class a{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${r++}_`}namedNode(s){return new i.NamedNode(s)}blankNode(s){return new u.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,d){return new o.Literal(s,d)}variable(s){return new e.Variable(s)}defaultGraph(){return n.DefaultGraph.INSTANCE}quad(s,d,l,f){return new t.Quad(s,d,l,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return v0.DataFactory=a,v0}var o8;function hr(){return o8||(o8=1,(function(u){var n=Fa&&Fa.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Fa&&Fa.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(sz(),u),o(_W(),u),o(cz(),u),o(dz(),u),o(SO(),u),o(lz(),u),o(fz(),u)})(Fa)),Fa}var s8;function gW(){if(s8)return wr;s8=1,Object.defineProperty(wr,"__esModule",{value:!0}),wr.stringQuadToQuad=wr.quadToStringQuad=wr.stringToTerm=wr.getLiteralLanguage=wr.getLiteralType=wr.getLiteralValue=wr.termToString=void 0;const u=hr(),n=new u.DataFactory;function o(s){if(s)switch(s.termType){case"NamedNode":return s.value;case"BlankNode":return"_:"+s.value;case"Literal":const d=s;return'"'+d.value+'"'+(d.datatype&&d.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?"^^"+d.datatype.value:"")+(d.language?"@"+d.language:"");case"Quad":return`<<${o(s.subject)} ${o(s.predicate)} ${o(s.object)}${s.graph.termType==="DefaultGraph"?"":" "+o(s.graph)}>>`;case"Variable":return"?"+s.value;case"DefaultGraph":return s.value}}wr.termToString=o;function i(s){const d=/^"([^]*)"/.exec(s);if(!d)throw new Error(s+" is not a literal");return d[1]}wr.getLiteralValue=i;function t(s){const d=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(s);if(!d)throw new Error(s+" is not a literal");return d[1]||(d[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}wr.getLiteralType=t;function e(s){const d=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(s);if(!d)throw new Error(s+" is not a literal");return d[1]?d[1].toLowerCase():""}wr.getLiteralLanguage=e;function r(s,d){if(d=d||n,!s||!s.length)return d.defaultGraph();switch(s[0]){case"_":return d.blankNode(s.substr(2));case"?":if(!d.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return d.variable(s.substr(1));case'"':const l=e(s),f=d.namedNode(t(s));return d.literal(i(s),l||f);case"<":default:if(s[0]==="<"&&s.length>4&&s[1]==="<"&&s[s.length-1]===">"&&s[s.length-2]===">"){const h=s.slice(2,-2).trim();let p=[],y=0,_=0,b=!1;for(let m=0;m<h.length;m++){const g=h[m];if(g==="<"&&y++,g===">"){if(y===0)throw new Error("Found closing tag without opening tag in "+s);y--}if(g==='"'){let T=!1,v=m;for(;v-- >0&&h[v]==="\\";)T=!T;T||(b=!b)}if(g===" "&&!b&&y===0){for(p.push(h.slice(_,m));h[m+1]===" ";)m+=1;_=m+1}}if(y!==0)throw new Error("Found opening tag without closing tag in "+s);if(p.push(h.slice(_,h.length)),p.length!==3&&p.length!==4)throw new Error("Nested quad syntax error "+s);return p=p.map(m=>m.startsWith("<")&&!m.includes(" ")?m.slice(1,-1):m),d.quad(r(p[0]),r(p[1]),r(p[2]),p[3]?r(p[3]):void 0)}return d.namedNode(s)}}wr.stringToTerm=r;function a(s){return{subject:o(s.subject),predicate:o(s.predicate),object:o(s.object),graph:o(s.graph)}}wr.quadToStringQuad=a;function c(s,d){return d=d||n,d.quad(r(s.subject,d),r(s.predicate,d),r(s.object,d),r(s.graph,d))}return wr.stringQuadToQuad=c,wr}var c8;function tr(){return c8||(c8=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.termToString=u.stringToTerm=u.stringQuadToQuad=u.quadToStringQuad=u.getLiteralValue=u.getLiteralType=u.getLiteralLanguage=void 0;const n=gW();Object.defineProperty(u,"getLiteralLanguage",{enumerable:!0,get:function(){return n.getLiteralLanguage}}),Object.defineProperty(u,"getLiteralType",{enumerable:!0,get:function(){return n.getLiteralType}}),Object.defineProperty(u,"getLiteralValue",{enumerable:!0,get:function(){return n.getLiteralValue}}),Object.defineProperty(u,"quadToStringQuad",{enumerable:!0,get:function(){return n.quadToStringQuad}}),Object.defineProperty(u,"stringQuadToQuad",{enumerable:!0,get:function(){return n.stringQuadToQuad}}),Object.defineProperty(u,"stringToTerm",{enumerable:!0,get:function(){return n.stringToTerm}}),Object.defineProperty(u,"termToString",{enumerable:!0,get:function(){return n.termToString}})})(k6)),k6}var Tn={},cn={},K6,d8;function mW(){return d8||(d8=1,K6=function u(n,o){if(n===o)return!0;if(n&&o&&typeof n=="object"&&typeof o=="object"){if(n.constructor!==o.constructor)return!1;var i,t,e;if(Array.isArray(n)){if(i=n.length,i!=o.length)return!1;for(t=i;t--!==0;)if(!u(n[t],o[t]))return!1;return!0}if(n instanceof Map&&o instanceof Map){if(n.size!==o.size)return!1;for(t of n.entries())if(!o.has(t[0]))return!1;for(t of n.entries())if(!u(t[1],o.get(t[0])))return!1;return!0}if(n instanceof Set&&o instanceof Set){if(n.size!==o.size)return!1;for(t of n.entries())if(!o.has(t[0]))return!1;return!0}if(ArrayBuffer.isView(n)&&ArrayBuffer.isView(o)){if(i=n.length,i!=o.length)return!1;for(t=i;t--!==0;)if(n[t]!==o[t])return!1;return!0}if(n.constructor===RegExp)return n.source===o.source&&n.flags===o.flags;if(n.valueOf!==Object.prototype.valueOf)return n.valueOf()===o.valueOf();if(n.toString!==Object.prototype.toString)return n.toString()===o.toString();if(e=Object.keys(n),i=e.length,i!==Object.keys(o).length)return!1;for(t=i;t--!==0;)if(!Object.prototype.hasOwnProperty.call(o,e[t]))return!1;for(t=i;t--!==0;){var r=e[t];if(!u(n[r],o[r]))return!1}return!0}return n!==n&&o!==o}),K6}var W6={},l8;function Ov(){return l8||(l8=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.expressionTypes=u.types=void 0,(function(n){n.ALT="alt",n.ASK="ask",n.BGP="bgp",n.CONSTRUCT="construct",n.DESCRIBE="describe",n.DISTINCT="distinct",n.EXPRESSION="expression",n.EXTEND="extend",n.FILTER="filter",n.FROM="from",n.GRAPH="graph",n.GROUP="group",n.INV="inv",n.JOIN="join",n.LEFT_JOIN="leftjoin",n.LINK="link",n.MINUS="minus",n.NOP="nop",n.NPS="nps",n.ONE_OR_MORE_PATH="OneOrMorePath",n.ORDER_BY="orderby",n.PATH="path",n.PATTERN="pattern",n.PROJECT="project",n.REDUCED="reduced",n.SEQ="seq",n.SERVICE="service",n.SLICE="slice",n.UNION="union",n.VALUES="values",n.ZERO_OR_MORE_PATH="ZeroOrMorePath",n.ZERO_OR_ONE_PATH="ZeroOrOnePath",n.COMPOSITE_UPDATE="compositeupdate",n.DELETE_INSERT="deleteinsert",n.LOAD="load",n.CLEAR="clear",n.CREATE="create",n.DROP="drop",n.ADD="add",n.MOVE="move",n.COPY="copy"})(u.types||(u.types={})),(function(n){n.AGGREGATE="aggregate",n.EXISTENCE="existence",n.NAMED="named",n.OPERATOR="operator",n.TERM="term",n.WILDCARD="wildcard"})(u.expressionTypes||(u.expressionTypes={}))})(W6)),W6}var Xn={},Y6={},f8;function hz(){if(f8)return Y6;f8=1;let u=class{constructor(){return n||this}equals(i){return i&&this.termType===i.termType}};Object.defineProperty(u.prototype,"value",{enumerable:!0,value:"*"}),Object.defineProperty(u.prototype,"termType",{enumerable:!0,value:"Wildcard"});var n=new u;return Y6.Wildcard=u,Y6}var Z6,h8;function vW(){if(h8)return Z6;h8=1;var u=(function(){var n=function(Re,Oe,Le,ze){for(Le=Le||{},ze=Re.length;ze--;Le[Re[ze]]=Oe);return Le},o=[6,12,13,15,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],i=[2,247],t=[100,110,113,115,116,123,126,131,329,330,331,332,333],e=[2,409],r=[1,18],a=[1,27],c=[13,16,45,197,224,229,308],s=[28,29,53],d=[28,53],l=[1,42],f=[1,45],h=[1,41],p=[1,44],y=[123,126],_=[1,67],b=[39,45,87],m=[13,16,45,197,224,308],g=[1,87],T=[2,281],v=[1,86],A=[13,16,45,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],I=[6,28,29,53,63,70,73,81,83,85],q=[6,13,16,28,29,53,63,70,73,81,83,85,87,308],O=[6,13,16,28,29,45,53,63,70,73,81,82,83,85,87,89,197,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314],w=[6,13,16,28,29,31,39,45,47,48,53,63,70,73,81,82,83,85,87,89,109,112,121,123,126,128,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,337,338,340,341,342,343,344,345,346],S=[13,16,308],E=[112,132,327,334],R=[13,16,112,132,308],L=[1,111],M=[1,117],B=[112,132,327,328,334],X=[13,16,112,132,308,328],J=[28,29,45,53,87],ie=[1,138],U=[1,151],fe=[1,128],me=[1,127],he=[1,129],te=[1,140],xe=[1,141],Ie=[1,142],Fe=[1,143],pe=[1,144],ye=[1,145],Q=[1,147],P=[1,148],D=[2,457],x=[1,158],N=[1,159],$=[1,160],G=[1,152],V=[1,153],k=[1,156],H=[1,171],Y=[1,172],se=[1,173],ce=[1,174],Se=[1,175],Me=[1,176],Ae=[1,167],oe=[1,168],C=[1,169],F=[1,170],j=[1,157],z=[1,166],Z=[1,161],le=[1,162],ue=[1,163],Pe=[1,164],Ve=[1,165],Be=[6,13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],Ze=[1,195],K=[6,31,73,81,83,85],we=[2,285],Ee=[1,199],$e=[1,201],Ne=[6,31,70,73,81,83,85],et=[2,283],rt=[1,207],Ke=[1,218],lt=[1,223],re=[1,219],ne=[1,225],De=[1,226],qe=[1,224],Qe=[6,63,70,73,81,83,85],Tt=[1,236],Ue=[2,334],ht=[1,243],He=[1,241],Je=[6,193],tt=[2,349],wt=[2,339],at=[28,128],Xe=[47,48,193,272],xr=[47,48,193,242,272],Ge=[47,48,193,242,246,272],ae=[47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,341,342,343,344,345,346],_e=[39,47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,338,341,342,343,344,345,346],ve=[1,271],We=[1,270],Ye=[6,13,16,29,31,39,45,47,48,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],mt=[1,281],kt=[1,280],qt=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],ui=[45,89],Kr=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],Ut=[13,16,31,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],sn=[31,89],yr=[48,87],vn=[6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338],_r=[6,13,16,39,45,48,82,87,89,231,263,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338,340],ca=[1,313],Ir=[6,85],Kl=[6,31,81,83,85],da=[2,361],Wr=[2,353],Gr=[1,343],kf=[31,112,335],oi=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Yw=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335],oE=[6,109,193],la=[31,112],ur=[13,16,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],Zw=[1,390],e6=[1,391],Di=[13,16,87,197,308,314],sE=[13,16,39,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],Uv=[1,417],Vv=[1,418],cE=[13,16,48,197,229,308],ji=[6,31,85],dE=[6,13,16,31,45,73,81,83,85,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],t6=[6,13,16,29,31,45,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,231,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,346,347,348,349,350,351],fa=[29,31,85,112,159,160,161,163,164],Qv=[1,443],Hv=[1,444],lE=[1,449],ha=[31,112,193,232,318,335],Gv=[13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],fE=[13,16,31,45,48,82,87,89,112,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],r6=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Kf=[13,16,31,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Wf=[31,45],hE=[1,507],pE=[1,508],bE=[6,13,16,29,31,39,45,47,48,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,336,338,341,342,343,344,345,346,347,348,349,350,351],zv=[29,31,85,112,159,160,161,163,164,335],pa=[6,13,16,31,45,70,73,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],yE=[13,16,31,45,48,82,87,89,112,193,197,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],_E=[2,352],n6=[13,16,197,308,314],gE=[1,565],Wl=[6,13,16,31,45,76,78,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],mE=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],si=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],vE=[13,16,87,308],ci=[2,364],Yl=[29,31,85,112,159,160,161,163,164,193,232,318,335],Xv=[31,112,193,232,272,318,335],di=[2,359],TE=[13,16,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Jv=[29,31,85,112,159,160,161,163,164,193,232,272,318,335],wE=[13,16,31,45,82,87,89,112,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],SE=[2,347],i6={trace:function(){},yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Query:7,Qry:8,Query_option0:9,Prologue_repetition0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectClauseWildcard:17,Qry_repetition0:18,WhereClause:19,SolutionModifierNoGroup:20,SelectClauseVars:21,Qry_repetition1:22,SolutionModifier:23,CONSTRUCT:24,ConstructTemplate:25,Qry_repetition2:26,Qry_repetition3:27,WHERE:28,"{":29,Qry_option0:30,"}":31,DESCRIBE:32,Qry_group0:33,Qry_repetition4:34,Qry_option1:35,ASK:36,Qry_repetition5:37,SelectClauseBase:38,"*":39,SelectClauseVars_repetition_plus0:40,SELECT:41,SelectClauseBase_option0:42,SelectClauseItem:43,Var:44,"(":45,Expression:46,AS:47,")":48,SubSelect:49,SubSelect_option0:50,SubSelect_option1:51,DatasetClause:52,FROM:53,DatasetClause_option0:54,iri:55,WhereClause_option0:56,GroupGraphPattern:57,SolutionModifier_option0:58,SolutionModifierNoGroup_option0:59,SolutionModifierNoGroup_option1:60,SolutionModifierNoGroup_option2:61,GroupClause:62,GROUP:63,BY:64,GroupClause_repetition_plus0:65,GroupCondition:66,BuiltInCall:67,FunctionCall:68,HavingClause:69,HAVING:70,HavingClause_repetition_plus0:71,OrderClause:72,ORDER:73,OrderClause_repetition_plus0:74,OrderCondition:75,ASC:76,BrackettedExpression:77,DESC:78,Constraint:79,LimitOffsetClauses:80,LIMIT:81,INTEGER:82,OFFSET:83,ValuesClause:84,VALUES:85,InlineData:86,VAR:87,InlineData_repetition0:88,NIL:89,InlineData_repetition1:90,InlineData_repetition_plus2:91,InlineData_repetition3:92,DataBlock:93,DataBlockValueList:94,DataBlockValueList_repetition_plus0:95,Update:96,Update_repetition0:97,Update1:98,Update_option0:99,LOAD:100,Update1_option0:101,Update1_option1:102,Update1_group0:103,Update1_option2:104,GraphRefAll:105,Update1_group1:106,Update1_option3:107,GraphOrDefault:108,TO:109,CREATE:110,Update1_option4:111,GRAPH:112,INSERTDATA:113,QuadPattern:114,DELETEDATA:115,DELETEWHERE:116,Update1_option5:117,InsertDeleteClause:118,Update1_repetition0:119,IntoGraphClause:120,INTO:121,GraphRef:122,DELETE:123,InsertDeleteClause_option0:124,InsertClause:125,INSERT:126,UsingClause:127,USING:128,UsingClause_option0:129,WithClause:130,WITH:131,DEFAULT:132,GraphOrDefault_option0:133,GraphRefAll_group0:134,Quads:135,Quads_option0:136,Quads_repetition0:137,QuadsNotTriples:138,VarOrIri:139,QuadsNotTriples_option0:140,QuadsNotTriples_option1:141,QuadsNotTriples_option2:142,TriplesTemplate:143,TriplesTemplate_repetition0:144,TriplesSameSubject:145,TriplesTemplate_option0:146,GroupGraphPatternSub:147,GroupGraphPatternSub_option0:148,GroupGraphPatternSub_repetition0:149,GroupGraphPatternSubTail:150,GraphPatternNotTriples:151,GroupGraphPatternSubTail_option0:152,GroupGraphPatternSubTail_option1:153,TriplesBlock:154,TriplesBlock_repetition0:155,TriplesSameSubjectPath:156,TriplesBlock_option0:157,GroupOrUnionGraphPattern:158,OPTIONAL:159,MINUS:160,SERVICE:161,GraphPatternNotTriples_option0:162,FILTER:163,BIND:164,InlineDataOneVar:165,InlineDataFull:166,InlineDataOneVar_repetition0:167,InlineDataFull_repetition0:168,InlineDataFull_repetition_plus1:169,InlineDataFull_repetition2:170,DataBlockValue:171,Literal:172,QuotedTriple:173,UNDEF:174,GroupOrUnionGraphPattern_repetition0:175,ArgList:176,ArgList_option0:177,ArgList_repetition0:178,ExpressionList:179,ExpressionList_repetition0:180,ConstructTemplate_option0:181,ConstructTriples:182,ConstructTriples_repetition0:183,ConstructTriples_option0:184,VarOrTermOrQuotedTP:185,PropertyListNotEmpty:186,TriplesNode:187,PropertyList:188,PropertyList_option0:189,VerbObjectList:190,PropertyListNotEmpty_repetition0:191,SemiOptionalVerbObjectList:192,";":193,SemiOptionalVerbObjectList_option0:194,Verb:195,ObjectList:196,a:197,ObjectList_repetition0:198,Object:199,GraphNode:200,Object_option0:201,PropertyListPathNotEmpty:202,TriplesNodePath:203,TriplesSameSubjectPath_option0:204,O:205,PropertyListPathNotEmpty_repetition0:206,PropertyListPathNotEmptyTail:207,O_group0:208,ObjectListPath:209,ObjectListPath_repetition0:210,ObjectPath:211,GraphNodePath:212,ObjectPath_option0:213,Path:214,Path_repetition0:215,PathSequence:216,PathSequence_repetition0:217,PathEltOrInverse:218,PathElt:219,PathPrimary:220,PathElt_option0:221,PathEltOrInverse_option0:222,IriOrA:223,"!":224,PathNegatedPropertySet:225,PathOneInPropertySet:226,PathNegatedPropertySet_repetition0:227,PathNegatedPropertySet_option0:228,"^":229,TriplesNode_repetition_plus0:230,"[":231,"]":232,TriplesNodePath_repetition_plus0:233,VarOrTermOrQuotedTPExpr:234,VarOrTerm:235,GraphTerm:236,BlankNode:237,ConditionalOrExpression:238,ConditionalAndExpression:239,ConditionalOrExpression_repetition0:240,ConditionalOrExpressionTail:241,"||":242,RelationalExpression:243,ConditionalAndExpression_repetition0:244,ConditionalAndExpressionTail:245,"&&":246,NumericExpression:247,RelationalExpression_group0:248,RelationalExpression_option0:249,IN:250,MultiplicativeExpression:251,NumericExpression_repetition0:252,AdditiveExpressionTail:253,AdditiveExpressionTail_group0:254,NumericLiteralPositive:255,AdditiveExpressionTail_repetition0:256,NumericLiteralNegative:257,AdditiveExpressionTail_repetition1:258,UnaryExpression:259,MultiplicativeExpression_repetition0:260,MultiplicativeExpressionTail:261,MultiplicativeExpressionTail_group0:262,"+":263,PrimaryExpression:264,"-":265,ExprQuotedTP:266,Aggregate:267,FUNC_ARITY0:268,FUNC_ARITY1:269,FUNC_ARITY1_SPARQL_STAR:270,FUNC_ARITY2:271,",":272,FUNC_ARITY3:273,FUNC_ARITY3_SPARQL_STAR:274,BuiltInCall_group0:275,BOUND:276,BNODE:277,BuiltInCall_option0:278,EXISTS:279,COUNT:280,Aggregate_option0:281,Aggregate_group0:282,FUNC_AGGREGATE:283,Aggregate_option1:284,GROUP_CONCAT:285,Aggregate_option2:286,Aggregate_option3:287,GroupConcatSeparator:288,SEPARATOR:289,"=":290,String:291,LANGTAG:292,"^^":293,DECIMAL:294,DOUBLE:295,BOOLEAN:296,INTEGER_POSITIVE:297,DECIMAL_POSITIVE:298,DOUBLE_POSITIVE:299,INTEGER_NEGATIVE:300,DECIMAL_NEGATIVE:301,DOUBLE_NEGATIVE:302,STRING_LITERAL1:303,STRING_LITERAL2:304,STRING_LITERAL_LONG1:305,STRING_LITERAL_LONG2:306,PrefixedName:307,PNAME_LN:308,BLANK_NODE_LABEL:309,ANON:310,QuotedTP:311,"<<":312,qtSubjectOrObject:313,">>":314,DataValueTerm:315,AnnotationPattern:316,"{|":317,"|}":318,AnnotationPatternPath:319,ExprVarOrTerm:320,QueryOrUpdate_group0_option0:321,Prologue_repetition0_group0:322,Qry_group0_repetition_plus0:323,SelectClauseBase_option0_group0:324,DISTINCT:325,REDUCED:326,NAMED:327,SILENT:328,CLEAR:329,DROP:330,ADD:331,MOVE:332,COPY:333,ALL:334,".":335,UNION:336,"|":337,"/":338,PathElt_option0_group0:339,"?":340,"!=":341,"<":342,">":343,"<=":344,">=":345,NOT:346,CONCAT:347,COALESCE:348,SUBSTR:349,REGEX:350,REPLACE:351,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",24:"CONSTRUCT",28:"WHERE",29:"{",31:"}",32:"DESCRIBE",36:"ASK",39:"*",41:"SELECT",45:"(",47:"AS",48:")",53:"FROM",63:"GROUP",64:"BY",70:"HAVING",73:"ORDER",76:"ASC",78:"DESC",81:"LIMIT",82:"INTEGER",83:"OFFSET",85:"VALUES",87:"VAR",89:"NIL",100:"LOAD",109:"TO",110:"CREATE",112:"GRAPH",113:"INSERTDATA",115:"DELETEDATA",116:"DELETEWHERE",121:"INTO",123:"DELETE",126:"INSERT",128:"USING",131:"WITH",132:"DEFAULT",159:"OPTIONAL",160:"MINUS",161:"SERVICE",163:"FILTER",164:"BIND",174:"UNDEF",193:";",197:"a",224:"!",229:"^",231:"[",232:"]",242:"||",246:"&&",250:"IN",263:"+",265:"-",268:"FUNC_ARITY0",269:"FUNC_ARITY1",270:"FUNC_ARITY1_SPARQL_STAR",271:"FUNC_ARITY2",272:",",273:"FUNC_ARITY3",274:"FUNC_ARITY3_SPARQL_STAR",276:"BOUND",277:"BNODE",279:"EXISTS",280:"COUNT",283:"FUNC_AGGREGATE",285:"GROUP_CONCAT",289:"SEPARATOR",290:"=",292:"LANGTAG",293:"^^",294:"DECIMAL",295:"DOUBLE",296:"BOOLEAN",297:"INTEGER_POSITIVE",298:"DECIMAL_POSITIVE",299:"DOUBLE_POSITIVE",300:"INTEGER_NEGATIVE",301:"DECIMAL_NEGATIVE",302:"DOUBLE_NEGATIVE",303:"STRING_LITERAL1",304:"STRING_LITERAL2",305:"STRING_LITERAL_LONG1",306:"STRING_LITERAL_LONG2",308:"PNAME_LN",309:"BLANK_NODE_LABEL",310:"ANON",312:"<<",314:">>",317:"{|",318:"|}",325:"DISTINCT",326:"REDUCED",327:"NAMED",328:"SILENT",329:"CLEAR",330:"DROP",331:"ADD",332:"MOVE",333:"COPY",334:"ALL",335:".",336:"UNION",337:"|",338:"/",340:"?",341:"!=",342:"<",343:">",344:"<=",345:">=",346:"NOT",347:"CONCAT",348:"COALESCE",349:"SUBSTR",350:"REGEX",351:"REPLACE"},productions_:[0,[3,3],[7,2],[4,1],[11,2],[14,3],[8,4],[8,4],[8,5],[8,7],[8,5],[8,4],[17,2],[21,2],[38,2],[43,1],[43,5],[49,4],[49,4],[52,3],[19,2],[23,2],[20,3],[62,3],[66,1],[66,1],[66,3],[66,5],[66,1],[69,2],[72,3],[75,2],[75,2],[75,1],[75,1],[80,2],[80,2],[80,4],[80,4],[84,2],[86,4],[86,4],[86,6],[86,2],[94,3],[96,3],[98,4],[98,3],[98,5],[98,4],[98,2],[98,2],[98,2],[98,5],[120,2],[118,3],[118,1],[125,2],[127,3],[130,2],[108,1],[108,2],[122,2],[105,1],[105,1],[114,3],[135,2],[138,7],[143,3],[57,3],[57,3],[147,2],[150,3],[154,3],[151,1],[151,2],[151,2],[151,3],[151,4],[151,2],[151,6],[151,1],[93,1],[93,1],[165,4],[166,4],[166,6],[171,1],[171,1],[171,1],[171,1],[158,2],[79,1],[79,1],[79,1],[68,2],[176,1],[176,5],[179,1],[179,4],[25,3],[182,3],[145,2],[145,2],[188,1],[186,2],[192,2],[190,2],[195,1],[195,1],[196,2],[199,2],[156,2],[156,2],[202,2],[207,1],[207,2],[205,2],[209,2],[211,2],[214,2],[216,2],[219,2],[218,2],[220,1],[220,2],[220,3],[225,1],[225,1],[225,4],[226,1],[226,2],[187,3],[187,3],[203,3],[203,3],[200,1],[200,1],[212,1],[212,1],[234,1],[235,1],[235,1],[139,1],[139,1],[44,1],[236,1],[236,1],[236,1],[236,1],[46,1],[238,2],[241,2],[239,2],[245,2],[243,1],[243,3],[243,4],[247,2],[253,2],[253,2],[253,2],[251,2],[261,2],[259,2],[259,2],[259,2],[259,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[77,3],[67,1],[67,2],[67,4],[67,4],[67,6],[67,8],[67,8],[67,2],[67,4],[67,2],[67,4],[67,3],[267,5],[267,5],[267,6],[288,4],[172,1],[172,2],[172,3],[172,1],[172,1],[172,1],[172,1],[172,1],[172,1],[255,1],[255,1],[255,1],[257,1],[257,1],[257,1],[291,1],[291,1],[291,1],[291,1],[55,1],[55,1],[307,1],[307,1],[237,1],[237,1],[311,5],[173,5],[313,1],[313,1],[313,1],[313,1],[313,1],[315,1],[315,1],[315,1],[185,1],[185,1],[185,1],[316,3],[319,3],[266,5],[320,1],[320,1],[320,1],[223,1],[223,1],[321,0],[321,1],[5,1],[5,1],[5,1],[9,0],[9,1],[322,1],[322,1],[10,0],[10,2],[18,0],[18,2],[22,0],[22,2],[26,0],[26,2],[27,0],[27,2],[30,0],[30,1],[323,1],[323,2],[33,1],[33,1],[34,0],[34,2],[35,0],[35,1],[37,0],[37,2],[40,1],[40,2],[324,1],[324,1],[42,0],[42,1],[50,0],[50,1],[51,0],[51,1],[54,0],[54,1],[56,0],[56,1],[58,0],[58,1],[59,0],[59,1],[60,0],[60,1],[61,0],[61,1],[65,1],[65,2],[71,1],[71,2],[74,1],[74,2],[88,0],[88,2],[90,0],[90,2],[91,1],[91,2],[92,0],[92,2],[95,1],[95,2],[97,0],[97,4],[99,0],[99,2],[101,0],[101,1],[102,0],[102,1],[103,1],[103,1],[104,0],[104,1],[106,1],[106,1],[106,1],[107,0],[107,1],[111,0],[111,1],[117,0],[117,1],[119,0],[119,2],[124,0],[124,1],[129,0],[129,1],[133,0],[133,1],[134,1],[134,1],[134,1],[136,0],[136,1],[137,0],[137,2],[140,0],[140,1],[141,0],[141,1],[142,0],[142,1],[144,0],[144,3],[146,0],[146,1],[148,0],[148,1],[149,0],[149,2],[152,0],[152,1],[153,0],[153,1],[155,0],[155,3],[157,0],[157,1],[162,0],[162,1],[167,0],[167,2],[168,0],[168,2],[169,1],[169,2],[170,0],[170,2],[175,0],[175,3],[177,0],[177,1],[178,0],[178,3],[180,0],[180,3],[181,0],[181,1],[183,0],[183,3],[184,0],[184,1],[189,0],[189,1],[191,0],[191,2],[194,0],[194,1],[198,0],[198,3],[201,0],[201,1],[204,0],[204,1],[206,0],[206,2],[208,1],[208,1],[210,0],[210,3],[213,0],[213,1],[215,0],[215,3],[217,0],[217,3],[339,1],[339,1],[339,1],[221,0],[221,1],[222,0],[222,1],[227,0],[227,3],[228,0],[228,1],[230,1],[230,2],[233,1],[233,2],[240,0],[240,2],[244,0],[244,2],[248,1],[248,1],[248,1],[248,1],[248,1],[248,1],[249,0],[249,1],[252,0],[252,2],[254,1],[254,1],[256,0],[256,2],[258,0],[258,2],[260,0],[260,2],[262,1],[262,1],[275,1],[275,1],[275,1],[275,1],[275,1],[278,0],[278,1],[281,0],[281,1],[282,1],[282,1],[284,0],[284,1],[286,0],[286,1],[287,0],[287,1]],performAction:function(Oe,Le,ze,ut,st,W,Yr){var ee=W.length-1;switch(st){case 1:if(W[ee-1]=W[ee-1]||{},St.base&&(W[ee-1].base=St.base),St.base="",W[ee-1].prefixes=St.prefixes,St.prefixes=null,St.pathOnly){if(W[ee-1].type==="path"||"termType"in W[ee-1])return W[ee-1];throw new Error("Received full SPARQL query in path only mode")}else if(W[ee-1].type==="path"||"termType"in W[ee-1])throw new Error("Received only path in full SPARQL mode");if(W[ee-1].type==="update"){const vt={};for(const Ft of W[ee-1].updates)if(Ft.updateType==="insert"){const bt={};for(const mr of Ft.insert)if(mr.type==="bgp"||mr.type==="graph")for(const vr of mr.triples)vr.subject.termType==="BlankNode"&&(bt[vr.subject.value]=!0),vr.predicate.termType==="BlankNode"&&(bt[vr.predicate.value]=!0),vr.object.termType==="BlankNode"&&(bt[vr.object.value]=!0);for(const mr of Object.keys(bt)){if(vt[mr])throw new Error("Detected reuse blank node across different INSERT DATA clauses");vt[mr]=!0}}}return W[ee-1];case 2:this.$={...W[ee-1],...W[ee],type:"query"};break;case 4:St.base=Yf(W[ee]);break;case 5:St.prefixes||(St.prefixes={}),W[ee-1]=W[ee-1].substr(0,W[ee-1].length-1),W[ee]=Yf(W[ee]),St.prefixes[W[ee-1]]=W[ee];break;case 6:this.$={...W[ee-3],..._a(W[ee-2]),...W[ee-1],...W[ee]};break;case 7:if(!St.skipValidation&&(f6(W[ee-3].variables.map(Ft=>l6(Ft.expression))).some(Ft=>Ft.aggregation==="count"&&!(Ft.expression instanceof kv))||W[ee].group)){for(const Ft of W[ee-3].variables)if(Ft.termType==="Variable"){if(!W[ee].group||!W[ee].group.map(bt=>nf(bt)).includes(nf(Ft)))throw Error("Projection of ungrouped variable (?"+nf(Ft)+")")}else if(l6(Ft.expression).length===0){const bt=Uk(Ft.expression);for(const mr of bt)if(!W[ee].group||!W[ee].group.map||!W[ee].group.map(vr=>nf(vr)).includes(nf(mr)))throw Error("Use of ungrouped variable in projection of operation (?"+nf(mr)+")")}}const af=W[ee-1].where.filter(vt=>vt.type==="query");if(af.length>0){const vt=W[ee-3].variables.filter(bt=>bt.variable&&bt.variable.value).map(bt=>bt.variable.value),Ft=f6(af.map(bt=>bt.variables)).map(bt=>bt.value||bt.variable.value);for(const bt of vt)if(Ft.indexOf(bt)>=0)throw Error("Target id of 'AS' (?"+bt+") already used in subquery")}this.$=rr(W[ee-3],_a(W[ee-2]),W[ee-1],W[ee]);break;case 8:this.$=rr({queryType:"CONSTRUCT",template:W[ee-3]},_a(W[ee-2]),W[ee-1],W[ee]);break;case 9:this.$=rr({queryType:"CONSTRUCT",template:W[ee-2]=W[ee-2]?W[ee-2].triples:[]},_a(W[ee-5]),{where:[{type:"bgp",triples:Zl([],W[ee-2])}]},W[ee]);break;case 10:this.$=rr({queryType:"DESCRIBE",variables:W[ee-3]==="*"?[new kv]:W[ee-3]},_a(W[ee-2]),W[ee-1],W[ee]);break;case 11:this.$=rr({queryType:"ASK"},_a(W[ee-2]),W[ee-1],W[ee]);break;case 12:this.$=rr(W[ee-1],{variables:[new kv]});break;case 13:const y6=W[ee].map(vt=>vt.value||vt.variable.value),tT=Vk(y6);if(tT.length>0)throw Error("Two or more of the resulting columns have the same name (?"+tT[0]+")");this.$=rr(W[ee-1],{variables:W[ee]});break;case 14:this.$=rr({queryType:"SELECT"},W[ee]&&(W[ee-1]=Lr(W[ee]),W[ee]={},W[ee][W[ee-1]]=!0,W[ee]));break;case 16:case 27:this.$=ef(W[ee-3],{variable:W[ee-1]});break;case 17:case 18:this.$=rr(W[ee-3],W[ee-2],W[ee-1],W[ee],{type:"query"});break;case 19:case 58:this.$={iri:W[ee],named:!!W[ee-1]};break;case 20:this.$={where:W[ee].patterns};break;case 21:this.$=rr(W[ee-1],W[ee]);break;case 22:this.$=rr(W[ee-2],W[ee-1],W[ee]);break;case 23:this.$={group:W[ee]};break;case 24:case 25:case 28:case 31:case 33:case 34:this.$=ef(W[ee]);break;case 26:this.$=ef(W[ee-1]);break;case 29:this.$={having:W[ee]};break;case 30:this.$={order:W[ee]};break;case 32:this.$=ef(W[ee],{descending:!0});break;case 35:this.$={limit:rf(W[ee])};break;case 36:this.$={offset:rf(W[ee])};break;case 37:this.$={limit:rf(W[ee-2]),offset:rf(W[ee])};break;case 38:this.$={limit:rf(W[ee]),offset:rf(W[ee-2])};break;case 39:case 43:this.$={type:"values",values:W[ee]};break;case 40:case 84:this.$=W[ee-1].map(vt=>({[W[ee-3]]:vt}));break;case 41:case 85:this.$=W[ee-1].map(()=>({}));break;case 42:case 86:var Li=W[ee-4].length;W[ee-4]=W[ee-4].map(a6),this.$=W[ee-1].map(function(vt){if(vt.length!==Li)throw Error("Inconsistent VALUES length");for(var Ft={},bt=0;bt<Li;bt++)Ft["?"+W[ee-4][bt].value]=vt[bt];return Ft});break;case 44:case 65:case 100:case 126:case 175:this.$=W[ee-1];break;case 45:this.$={type:"update",updates:ya(W[ee-2],W[ee-1])};break;case 46:this.$=rr({type:"load",silent:!!W[ee-2],source:W[ee-1]},W[ee]&&{destination:W[ee]});break;case 47:this.$={type:Lr(W[ee-2]),silent:!!W[ee-1],graph:W[ee]};break;case 48:this.$={type:Lr(W[ee-4]),silent:!!W[ee-3],source:W[ee-2],destination:W[ee]};break;case 49:this.$={type:"create",silent:!!W[ee-2],graph:{type:"graph",name:W[ee]}};break;case 50:this.$={updateType:"insert",insert:jE(W[ee])};break;case 51:this.$={updateType:"delete",delete:b6(jE(W[ee]))};break;case 52:this.$={updateType:"deletewhere",delete:b6(W[ee])};break;case 53:this.$={updateType:"insertdelete",...W[ee-4],...W[ee-3],..._a(W[ee-2],"using"),where:W[ee].patterns};break;case 54:case 57:case 62:case 167:case 191:case 236:this.$=W[ee];break;case 55:this.$={delete:b6(W[ee-1]),insert:W[ee]||[]};break;case 56:this.$={delete:[],insert:W[ee]};break;case 59:this.$={graph:W[ee]};break;case 60:this.$={type:"graph",default:!0};break;case 61:case 63:this.$={type:"graph",name:W[ee]};break;case 64:this.$={[Lr(W[ee])]:!0};break;case 66:this.$=W[ee-1]?Hn(W[ee],[W[ee-1]]):Hn(W[ee]);break;case 67:var Yv=rr(W[ee-3]||{triples:[]},{type:"graph",name:W[ee-5]});this.$=W[ee]?[Yv,W[ee]]:[Yv];break;case 68:case 73:this.$={type:"bgp",triples:Hn(W[ee-2],[W[ee-1]])};break;case 69:this.$={type:"group",patterns:[W[ee-1]]};break;case 70:for(const vt of W[ee-1].filter(Ft=>Ft.type==="bind")){const Ft=W[ee-1].indexOf(vt),bt=new Set;for(const mr of W[ee-1].slice(0,Ft))(mr.type==="group"||mr.type==="bgp")&&PE(mr).forEach(vr=>bt.add(vr));if(bt.has(vt.variable.value))throw Error("Variable used to bind is already bound (?"+vt.variable.value+")")}this.$={type:"group",patterns:W[ee-1]};break;case 71:this.$=W[ee-1]?Hn([W[ee-1]],W[ee]):Hn(W[ee]);break;case 72:this.$=W[ee]?[W[ee-2],W[ee]]:W[ee-2];break;case 75:this.$=rr(W[ee],{type:"optional"});break;case 76:this.$=rr(W[ee],{type:"minus"});break;case 77:this.$=rr(W[ee],{type:"graph",name:W[ee-1]});break;case 78:this.$=rr(W[ee],{type:"service",name:W[ee-1],silent:!!W[ee-2]});break;case 79:this.$={type:"filter",expression:W[ee]};break;case 80:this.$={type:"bind",variable:W[ee-1],expression:W[ee-3]};break;case 89:this.$=e0(W[ee]);break;case 90:this.$=void 0;break;case 91:this.$=W[ee-1].length?{type:"union",patterns:Hn(W[ee-1].map(o6),[o6(W[ee])])}:W[ee];break;case 95:this.$={...W[ee],function:W[ee-1]};break;case 96:this.$={type:"functionCall",args:[]};break;case 97:this.$={type:"functionCall",args:ya(W[ee-2],W[ee-1]),distinct:!!W[ee-3]};break;case 98:case 115:case 128:case 247:case 249:case 251:case 253:case 255:case 263:case 267:case 297:case 299:case 303:case 307:case 328:case 341:case 349:case 355:case 361:case 367:case 369:case 373:case 375:case 379:case 381:case 385:case 391:case 395:case 401:case 405:case 409:case 411:case 420:case 428:case 430:case 440:case 444:case 446:case 448:this.$=[];break;case 99:this.$=ya(W[ee-2],W[ee-1]);break;case 101:this.$=Hn(W[ee-2],[W[ee-1]]);break;case 102:case 112:this.$=p6(W[ee].map(vt=>rr(li(W[ee-1]),vt)));break;case 103:this.$=p6(Zl(W[ee].map(vt=>rr(li(W[ee-1].entity),vt)),W[ee-1].triples));break;case 105:this.$=Hn([W[ee-1]],W[ee]);break;case 106:this.$=Hn(W[ee]);break;case 107:this.$=d6(W[ee-1],W[ee]);break;case 109:case 237:this.$=St.factory.namedNode(Nk);break;case 110:case 118:this.$=ya(W[ee-1],W[ee]);break;case 111:this.$=W[ee]?{annotation:W[ee],object:W[ee-1]}:W[ee-1];break;case 113:this.$=W[ee]?p6(Zl(W[ee].map(vt=>rr(li(W[ee-1].entity),vt)),W[ee-1].triples)):W[ee-1].triples;break;case 114:this.$=d6(...W[ee-1],W[ee]);break;case 116:this.$=d6(...W[ee]);break;case 117:case 159:case 163:this.$=[W[ee-1],W[ee]];break;case 119:this.$=W[ee]?{object:W[ee-1],annotation:W[ee]}:W[ee-1];break;case 120:this.$=W[ee-1].length?tf("|",ya(W[ee-1],W[ee])):W[ee];break;case 121:this.$=W[ee-1].length?tf("/",ya(W[ee-1],W[ee])):W[ee];break;case 122:this.$=W[ee]?tf(W[ee],[W[ee-1]]):W[ee-1];break;case 123:this.$=W[ee-1]?tf(W[ee-1],[W[ee]]):W[ee];break;case 125:case 131:this.$=tf(W[ee-1],[W[ee]]);break;case 129:this.$=tf("|",ya(W[ee-2],W[ee-1]));break;case 132:case 134:this.$=Bk(W[ee-1]);break;case 133:case 135:this.$=$k(W[ee-1]);break;case 140:this.$={entity:W[ee],triples:[]};break;case 145:this.$=a6(W[ee]);break;case 149:this.$=St.factory.namedNode(AE);break;case 151:case 153:case 158:case 162:this.$=u6(W[ee-1],W[ee]);break;case 152:this.$=["||",W[ee]];break;case 154:this.$=["&&",W[ee]];break;case 156:this.$=gr(W[ee-1],[W[ee-2],W[ee]]);break;case 157:this.$=gr(W[ee-2]?"notin":"in",[W[ee-3],W[ee]]);break;case 160:this.$=["+",u6(W[ee-1],W[ee])];break;case 161:var Zv=Gn(W[ee-1].value.replace("-",""),W[ee-1].datatype);this.$=["-",u6(Zv,W[ee])];break;case 164:this.$=gr("UPLUS",[W[ee]]);break;case 165:this.$=gr(W[ee-1],[W[ee]]);break;case 166:this.$=gr("UMINUS",[W[ee]]);break;case 177:this.$=gr(Lr(W[ee-1]));break;case 178:this.$=gr(Lr(W[ee-3]),[W[ee-1]]);break;case 179:this.$=e0(gr(Lr(W[ee-3]),[W[ee-1]]));break;case 180:this.$=gr(Lr(W[ee-5]),[W[ee-3],W[ee-1]]);break;case 181:this.$=gr(Lr(W[ee-7]),[W[ee-5],W[ee-3],W[ee-1]]);break;case 182:this.$=e0(gr(Lr(W[ee-7]),[W[ee-5],W[ee-3],W[ee-1]]));break;case 183:this.$=gr(Lr(W[ee-1]),W[ee]);break;case 184:this.$=gr("bound",[a6(W[ee-1])]);break;case 185:this.$=gr(W[ee-1],[]);break;case 186:this.$=gr(W[ee-3],[W[ee-1]]);break;case 187:this.$=gr(W[ee-2]?"notexists":"exists",[o6(W[ee])]);break;case 188:case 189:this.$=ef(W[ee-1],{type:"aggregate",aggregation:Lr(W[ee-4]),distinct:!!W[ee-2]});break;case 190:this.$=ef(W[ee-2],{type:"aggregate",aggregation:Lr(W[ee-5]),distinct:!!W[ee-3],separator:typeof W[ee-1]=="string"?W[ee-1]:" "});break;case 192:this.$=Gn(W[ee]);break;case 193:this.$=Lk(W[ee-1],Lr(W[ee].substr(1)));break;case 194:this.$=Gn(W[ee-2],W[ee]);break;case 195:case 204:this.$=Gn(W[ee],OE);break;case 196:case 205:this.$=Gn(W[ee],EE);break;case 197:case 206:this.$=Gn(Lr(W[ee]),xE);break;case 200:this.$=Gn(W[ee].toLowerCase(),jk);break;case 201:this.$=Gn(W[ee].substr(1),OE);break;case 202:this.$=Gn(W[ee].substr(1),EE);break;case 203:this.$=Gn(W[ee].substr(1).toLowerCase(),xE);break;case 207:case 208:this.$=NE(W[ee],1);break;case 209:case 210:this.$=NE(W[ee],3);break;case 211:this.$=St.factory.namedNode(Yf(W[ee]));break;case 213:var eT=W[ee].indexOf(":"),nr=W[ee].substr(0,eT),zn=St.prefixes[nr];if(!zn)throw new Error("Unknown prefix: "+nr);var ga=Yf(zn+W[ee].substr(eT+1));this.$=St.factory.namedNode(ga);break;case 214:if(W[ee]=W[ee].substr(0,W[ee].length-1),!(W[ee]in St.prefixes))throw new Error("Unknown prefix: "+W[ee]);var ga=Yf(St.prefixes[W[ee]]);this.$=St.factory.namedNode(ga);break;case 215:this.$=Zf(W[ee].replace(/^(_:)/,""));break;case 216:this.$=Zf();break;case 217:case 218:case 232:this.$=e0(s6(W[ee-3],W[ee-2],W[ee-1]));break;case 230:case 231:this.$=e0(W[ee-1]);break;case 248:case 250:case 252:case 254:case 256:case 260:case 264:case 268:case 270:case 292:case 294:case 296:case 298:case 300:case 302:case 304:case 306:case 329:case 342:case 356:case 368:case 370:case 372:case 374:case 392:case 402:case 425:case 427:case 429:case 431:case 441:case 445:case 447:case 449:W[ee-1].push(W[ee]);break;case 259:case 269:case 291:case 293:case 295:case 301:case 305:case 371:case 424:case 426:this.$=[W[ee]];break;case 308:W[ee-3].push(W[ee-2]);break;case 350:case 362:case 376:case 380:case 382:case 386:case 396:case 406:case 410:case 412:case 421:W[ee-2].push(W[ee-1]);break}},table:[n(o,i,{3:1,4:2,10:3}),{1:[3]},n(t,[2,307],{5:4,7:5,321:6,214:7,8:8,96:9,215:10,17:11,21:12,97:16,38:17,6:[2,238],13:e,16:e,45:e,197:e,224:e,229:e,308:e,24:[1,13],32:[1,14],36:[1,15],41:r}),n([6,13,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],[2,3],{322:19,11:20,14:21,12:[1,22],15:[1,23]}),{6:[1,24]},{6:[2,240]},{6:[2,241]},{6:[2,242]},{6:[2,243],9:25,84:26,85:a},{6:[2,239]},n(c,[2,411],{216:28,217:29}),n(s,[2,249],{18:30}),n(s,[2,251],{22:31}),n(d,[2,255],{25:32,27:33,29:[1,34]}),{13:l,16:f,33:35,39:[1,37],44:39,55:40,87:h,139:38,307:43,308:p,323:36},n(s,[2,267],{37:46}),n(y,[2,326],{98:47,103:49,106:50,117:55,130:61,100:[1,48],110:[1,51],113:[1,52],115:[1,53],116:[1,54],131:[1,62],329:[1,56],330:[1,57],331:[1,58],332:[1,59],333:[1,60]}),{39:[1,63],40:64,43:65,44:66,45:_,87:h},n(b,[2,273],{42:68,324:69,325:[1,70],326:[1,71]}),n(o,[2,248]),n(o,[2,245]),n(o,[2,246]),{13:[1,72]},{16:[1,73]},{1:[2,1]},{6:[2,2]},{6:[2,244]},{45:[1,77],85:[1,78],86:74,87:[1,75],89:[1,76]},n([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],[2,120],{337:[1,79]}),n(m,[2,418],{218:80,222:81,229:[1,82]}),{19:83,28:g,29:T,52:84,53:v,56:85},{19:88,28:g,29:T,52:89,53:v,56:85},n(s,[2,253],{26:90}),{28:[1,91],52:92,53:v},n(A,[2,385],{181:93,182:94,183:95,31:[2,383]}),n(I,[2,263],{34:96}),n(I,[2,261],{44:39,55:40,307:43,139:97,13:l,16:f,87:h,308:p}),n(I,[2,262]),n(q,[2,259]),n(O,[2,143]),n(O,[2,144]),n([6,13,16,28,29,31,39,45,47,48,53,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,145]),n(w,[2,211]),n(w,[2,212]),n(w,[2,213]),n(w,[2,214]),{19:98,28:g,29:T,52:99,53:v,56:85},{6:[2,309],99:100,193:[1,101]},n(S,[2,311],{101:102,328:[1,103]}),n(E,[2,317],{104:104,328:[1,105]}),n(R,[2,322],{107:106,328:[1,107]}),{111:108,112:[2,324],328:[1,109]},{29:L,114:110},{29:L,114:112},{29:L,114:113},{118:114,123:[1,115],125:116,126:M},n(B,[2,315]),n(B,[2,316]),n(X,[2,319]),n(X,[2,320]),n(X,[2,321]),n(y,[2,327]),{13:l,16:f,55:118,307:43,308:p},n(s,[2,12]),n(s,[2,13],{44:66,43:119,45:_,87:h}),n(J,[2,269]),n(J,[2,15]),{13:l,16:f,44:136,45:ie,46:120,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},n(b,[2,14]),n(b,[2,274]),n(b,[2,271]),n(b,[2,272]),n(o,[2,4]),{13:[1,177]},n(Be,[2,39]),{29:[1,178]},{29:[1,179]},{87:[1,181],91:180},{45:[1,187],87:[1,185],89:[1,186],93:182,165:183,166:184},n(c,[2,410]),n([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337],[2,121],{338:[1,188]}),{13:l,16:f,45:[1,193],55:194,197:Ze,219:189,220:190,223:191,224:[1,192],307:43,308:p},n(m,[2,419]),n(K,we,{20:196,59:197,69:198,70:Ee}),n(s,[2,250]),{29:$e,57:200},n(S,[2,279],{54:202,327:[1,203]}),{29:[2,282]},n(Ne,et,{23:204,58:205,62:206,63:rt}),n(s,[2,252]),{19:208,28:g,29:T,52:209,53:v,56:85},{29:[1,210]},n(d,[2,256]),{31:[1,211]},{31:[2,384]},{13:l,16:f,44:215,45:Ke,55:220,82:U,87:h,89:lt,145:212,172:221,185:213,187:214,231:re,236:216,237:222,255:154,257:155,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,309:ne,310:De,311:217,312:qe},n(Qe,[2,265],{56:85,35:227,52:228,19:229,28:g,29:T,53:v}),n(q,[2,260]),n(Ne,et,{58:205,62:206,23:230,63:rt}),n(s,[2,268]),{6:[2,45]},n(o,i,{10:3,4:231}),{13:l,16:f,55:232,307:43,308:p},n(S,[2,312]),{105:233,112:Tt,122:234,132:[1,237],134:235,327:[1,238],334:[1,239]},n(E,[2,318]),n(S,Ue,{108:240,133:242,112:ht,132:He}),n(R,[2,323]),{112:[1,244]},{112:[2,325]},n(Je,[2,50]),n(A,tt,{135:245,136:246,143:247,144:248,31:wt,112:wt}),n(Je,[2,51]),n(Je,[2,52]),n(at,[2,328],{119:249}),{29:L,114:250},n(at,[2,56]),{29:L,114:251},n(y,[2,59]),n(J,[2,270]),{47:[1,252]},n(Xe,[2,150]),n(xr,[2,428],{240:253}),n(Ge,[2,430],{244:254}),n(Ge,[2,155],{248:255,249:256,250:[2,438],290:[1,257],341:[1,258],342:[1,259],343:[1,260],344:[1,261],345:[1,262],346:[1,263]}),n(ae,[2,440],{252:264}),n(_e,[2,448],{260:265}),{13:l,16:f,44:136,45:ie,55:133,67:132,68:134,77:131,82:U,87:h,172:135,255:154,257:155,264:266,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},{13:l,16:f,44:136,45:ie,55:133,67:132,68:134,77:131,82:U,87:h,172:135,255:154,257:155,264:267,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},{13:l,16:f,44:136,45:ie,55:133,67:132,68:134,77:131,82:U,87:h,172:135,255:154,257:155,264:268,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},n(_e,[2,167]),n(_e,[2,168]),n(_e,[2,169]),n(_e,[2,170],{176:269,45:ve,89:We}),n(_e,[2,171]),n(_e,[2,172]),n(_e,[2,173]),n(_e,[2,174]),{13:l,16:f,44:136,45:ie,46:272,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},n(Ye,[2,176]),{89:[1,273]},{45:[1,274]},{45:[1,275]},{45:[1,276]},{45:[1,277]},{45:[1,278]},{45:mt,89:kt,179:279},{45:[1,282]},{45:[1,284],89:[1,283]},{279:[1,285]},n(qt,[2,192],{292:[1,286],293:[1,287]}),n(qt,[2,195]),n(qt,[2,196]),n(qt,[2,197]),n(qt,[2,198]),n(qt,[2,199]),n(qt,[2,200]),{13:l,16:f,44:39,55:40,82:U,87:h,139:289,172:291,255:154,257:155,266:290,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,320:288},{45:[1,292]},{45:[1,293]},{45:[1,294]},n(ui,[2,452]),n(ui,[2,453]),n(ui,[2,454]),n(ui,[2,455]),n(ui,[2,456]),{279:[2,458]},n(Kr,[2,207]),n(Kr,[2,208]),n(Kr,[2,209]),n(Kr,[2,210]),n(qt,[2,201]),n(qt,[2,202]),n(qt,[2,203]),n(qt,[2,204]),n(qt,[2,205]),n(qt,[2,206]),n(o,[2,5]),n(Ut,[2,297],{88:295}),n(sn,[2,299],{90:296}),{48:[1,297],87:[1,298]},n(yr,[2,301]),n(Be,[2,43]),n(Be,[2,82]),n(Be,[2,83]),{29:[1,299]},{29:[1,300]},{87:[1,302],169:301},n(c,[2,412]),n(vn,[2,123]),n(vn,[2,416],{221:303,339:304,39:[1,306],263:[1,307],340:[1,305]}),n(_r,[2,124]),{13:l,16:f,45:[1,311],55:194,89:[1,310],197:Ze,223:312,225:308,226:309,229:ca,307:43,308:p},n(c,e,{215:10,214:314}),n(_r,[2,236]),n(_r,[2,237]),n(Ir,[2,6]),n(Kl,[2,287],{60:315,72:316,73:[1,317]}),n(K,[2,286]),{13:l,16:f,45:ie,55:323,67:321,68:322,71:318,77:320,79:319,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,307:43,308:p,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},n([6,31,63,70,73,81,83,85],[2,20]),n(A,da,{38:17,49:324,147:325,17:326,21:327,148:328,154:329,155:330,29:Wr,31:Wr,85:Wr,112:Wr,159:Wr,160:Wr,161:Wr,163:Wr,164:Wr,41:r}),{13:l,16:f,55:331,307:43,308:p},n(S,[2,280]),n(Ir,[2,7]),n(K,we,{59:197,69:198,20:332,70:Ee}),n(Ne,[2,284]),{64:[1,333]},n(Ne,et,{58:205,62:206,23:334,63:rt}),n(s,[2,254]),n(A,tt,{144:248,30:335,143:336,31:[2,257]}),n(s,[2,100]),{31:[2,387],184:337,335:[1,338]},{13:l,16:f,44:39,55:40,87:h,139:342,186:339,190:340,195:341,197:Gr,307:43,308:p},n(kf,[2,389],{44:39,55:40,307:43,190:340,195:341,139:342,188:344,189:345,186:346,13:l,16:f,87:h,197:Gr,308:p}),n(oi,[2,227]),n(oi,[2,228]),n(oi,[2,229]),{13:l,16:f,44:215,45:Ke,55:220,82:U,87:h,89:lt,172:221,185:351,187:350,200:348,230:347,231:re,234:349,236:216,237:222,255:154,257:155,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,309:ne,310:De,311:217,312:qe},{13:l,16:f,44:39,55:40,87:h,139:342,186:352,190:340,195:341,197:Gr,307:43,308:p},n(oi,[2,146]),n(oi,[2,147]),n(oi,[2,148]),n(oi,[2,149]),{13:l,16:f,44:354,55:355,82:U,87:h,172:357,237:356,255:154,257:155,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,309:ne,310:De,311:358,312:qe,313:353},n(Yw,[2,215]),n(Yw,[2,216]),n(Ne,et,{58:205,62:206,23:359,63:rt}),n(I,[2,264]),n(Qe,[2,266]),n(Ir,[2,11]),n(t,[2,308],{6:[2,310]}),n(Je,[2,313],{102:360,120:361,121:[1,362]}),n(Je,[2,47]),n(Je,[2,63]),n(Je,[2,64]),{13:l,16:f,55:363,307:43,308:p},n(Je,[2,336]),n(Je,[2,337]),n(Je,[2,338]),{109:[1,364]},n(oE,[2,60]),{13:l,16:f,55:365,307:43,308:p},n(S,[2,335]),{13:l,16:f,55:366,307:43,308:p},{31:[1,367]},n(la,[2,341],{137:368}),n(la,[2,340]),{13:l,16:f,44:215,45:Ke,55:220,82:U,87:h,89:lt,145:369,172:221,185:213,187:214,231:re,236:216,237:222,255:154,257:155,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,309:ne,310:De,311:217,312:qe},{28:[1,370],127:371,128:[1,372]},n(at,[2,330],{124:373,125:374,126:M}),n(at,[2,57]),{44:375,87:h},n(Xe,[2,151],{241:376,242:[1,377]}),n(xr,[2,153],{245:378,246:[1,379]}),{13:l,16:f,44:136,45:ie,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,247:380,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},{250:[1,381]},n(ur,[2,432]),n(ur,[2,433]),n(ur,[2,434]),n(ur,[2,435]),n(ur,[2,436]),n(ur,[2,437]),{250:[2,439]},n([47,48,193,242,246,250,272,290,341,342,343,344,345,346],[2,158],{253:382,254:383,255:384,257:385,263:[1,386],265:[1,387],297:H,298:Y,299:se,300:ce,301:Se,302:Me}),n(ae,[2,162],{261:388,262:389,39:Zw,338:e6}),n(_e,[2,164]),n(_e,[2,165]),n(_e,[2,166]),n(Ye,[2,95]),n(Ye,[2,96]),n(ur,[2,377],{177:392,325:[1,393]}),{48:[1,394]},n(Ye,[2,177]),{13:l,16:f,44:136,45:ie,46:395,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},{13:l,16:f,44:136,45:ie,46:396,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},{13:l,16:f,44:136,45:ie,46:397,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},{13:l,16:f,44:136,45:ie,46:398,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},{13:l,16:f,44:136,45:ie,46:399,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},n(Ye,[2,183]),n(Ye,[2,98]),n(ur,[2,381],{180:400}),{87:[1,401]},n(Ye,[2,185]),{13:l,16:f,44:136,45:ie,46:402,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},{29:$e,57:403},n(qt,[2,193]),{13:l,16:f,55:404,307:43,308:p},{13:l,16:f,44:39,55:40,87:h,139:342,195:405,197:Gr,307:43,308:p},n(Di,[2,233]),n(Di,[2,234]),n(Di,[2,235]),n(sE,[2,459],{281:406,325:[1,407]}),n(ur,[2,463],{284:408,325:[1,409]}),n(ur,[2,465],{286:410,325:[1,411]}),{13:l,16:f,31:[1,412],55:414,82:U,171:413,172:415,173:416,174:Uv,255:154,257:155,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:Vv},{31:[1,419],89:[1,420]},{29:[1,421]},n(yr,[2,302]),n(Ut,[2,367],{167:422}),n(sn,[2,369],{168:423}),{48:[1,424],87:[1,425]},n(yr,[2,371]),n(vn,[2,122]),n(vn,[2,417]),n(vn,[2,413]),n(vn,[2,414]),n(vn,[2,415]),n(_r,[2,125]),n(_r,[2,127]),n(_r,[2,128]),n(cE,[2,420],{227:426}),n(_r,[2,130]),{13:l,16:f,55:194,197:Ze,223:427,307:43,308:p},{48:[1,428]},n(ji,[2,289],{61:429,80:430,81:[1,431],83:[1,432]}),n(Kl,[2,288]),{64:[1,433]},n(K,[2,29],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:434,13:l,16:f,45:ie,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,276:Q,277:P,279:D,280:x,283:N,285:$,308:p,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve}),n(dE,[2,293]),n(t6,[2,92]),n(t6,[2,93]),n(t6,[2,94]),{45:ve,89:We,176:269},{31:[1,435]},{31:[1,436]},{19:437,28:g,29:T,56:85},{19:438,28:g,29:T,56:85},n(fa,[2,355],{149:439}),n(fa,[2,354]),{13:l,16:f,44:215,45:Qv,55:220,82:U,87:h,89:lt,156:440,172:221,185:441,203:442,231:Hv,236:216,237:222,255:154,257:155,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,309:ne,310:De,311:217,312:qe},n(I,[2,19]),n(ji,[2,21]),{13:l,16:f,44:450,45:lE,55:323,65:445,66:446,67:447,68:448,87:h,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,307:43,308:p,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},n(Ir,[2,8]),{31:[1,451]},{31:[2,258]},{31:[2,101]},n(A,[2,386],{31:[2,388]}),n(kf,[2,102]),n(ha,[2,391],{191:452}),n(A,[2,395],{196:453,198:454}),n(A,[2,108]),n(A,[2,109]),n(kf,[2,103]),n(kf,[2,104]),n(kf,[2,390]),{13:l,16:f,44:215,45:Ke,48:[1,455],55:220,82:U,87:h,89:lt,172:221,185:351,187:350,200:456,231:re,234:349,236:216,237:222,255:154,257:155,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,309:ne,310:De,311:217,312:qe},n(Gv,[2,424]),n(fE,[2,136]),n(fE,[2,137]),n(r6,[2,140]),{232:[1,457]},{13:l,16:f,44:39,55:40,87:h,139:342,195:458,197:Gr,307:43,308:p},n(Di,[2,219]),n(Di,[2,220]),n(Di,[2,221]),n(Di,[2,222]),n(Di,[2,223]),n(Ir,[2,10]),n(Je,[2,46]),n(Je,[2,314]),{112:Tt,122:459},n(Je,[2,62]),n(S,Ue,{133:242,108:460,112:ht,132:He}),n(oE,[2,61]),n(Je,[2,49]),n([6,28,126,128,193],[2,65]),{31:[2,66],112:[1,462],138:461},n(la,[2,351],{146:463,335:[1,464]}),{29:$e,57:465},n(at,[2,329]),n(S,[2,332],{129:466,327:[1,467]}),n(at,[2,55]),n(at,[2,331]),{48:[1,468]},n(xr,[2,429]),{13:l,16:f,44:136,45:ie,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,239:469,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},n(Ge,[2,431]),{13:l,16:f,44:136,45:ie,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,243:470,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},n(Ge,[2,156]),{45:mt,89:kt,179:471},n(ae,[2,441]),{13:l,16:f,44:136,45:ie,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,251:472,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},n(_e,[2,444],{256:473}),n(_e,[2,446],{258:474}),n(ur,[2,442]),n(ur,[2,443]),n(_e,[2,449]),{13:l,16:f,44:136,45:ie,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,255:154,257:155,259:475,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},n(ur,[2,450]),n(ur,[2,451]),n(ur,[2,379],{178:476}),n(ur,[2,378]),n([6,13,16,29,31,39,45,47,48,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,175]),{48:[1,477]},{48:[1,478]},{272:[1,479]},{272:[1,480]},{272:[1,481]},{13:l,16:f,44:136,45:ie,46:482,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},{48:[1,483]},{48:[1,484]},n(Ye,[2,187]),n(qt,[2,194]),{13:l,16:f,44:39,55:40,82:U,87:h,139:289,172:291,255:154,257:155,266:290,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,320:485},{13:l,16:f,39:[1,487],44:136,45:ie,46:488,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,282:486,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},n(sE,[2,460]),{13:l,16:f,44:136,45:ie,46:489,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},n(ur,[2,464]),{13:l,16:f,44:136,45:ie,46:490,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},n(ur,[2,466]),n(Be,[2,40]),n(Ut,[2,298]),n(Kf,[2,87]),n(Kf,[2,88]),n(Kf,[2,89]),n(Kf,[2,90]),{13:l,16:f,55:492,82:U,172:493,255:154,257:155,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,311:494,312:qe,315:491},n(Be,[2,41]),n(sn,[2,300]),n(Wf,[2,303],{92:495}),{13:l,16:f,31:[1,496],55:414,82:U,171:497,172:415,173:416,174:Uv,255:154,257:155,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:Vv},{31:[1,498],89:[1,499]},{29:[1,500]},n(yr,[2,372]),{13:l,16:f,48:[2,422],55:194,197:Ze,223:312,226:502,228:501,229:ca,307:43,308:p},n(_r,[2,131]),n(_r,[2,126]),n(ji,[2,22]),n(ji,[2,290]),{82:[1,503]},{82:[1,504]},{13:l,16:f,44:510,45:ie,55:323,67:321,68:322,74:505,75:506,76:hE,77:320,78:pE,79:509,87:h,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,307:43,308:p,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},n(dE,[2,294]),n(bE,[2,69]),n(bE,[2,70]),n(K,we,{59:197,69:198,20:511,70:Ee}),n(Ne,et,{58:205,62:206,23:512,63:rt}),{29:[2,375],31:[2,71],84:522,85:a,112:[1,518],150:513,151:514,158:515,159:[1,516],160:[1,517],161:[1,519],163:[1,520],164:[1,521],175:523},n(fa,[2,363],{157:524,335:[1,525]}),n(c,e,{215:10,202:526,205:527,208:528,214:529,44:530,87:h}),n(zv,[2,399],{215:10,205:527,208:528,214:529,44:530,204:531,202:532,13:e,16:e,45:e,197:e,224:e,229:e,308:e,87:h}),{13:l,16:f,44:215,45:Qv,55:220,82:U,87:h,89:lt,172:221,185:351,203:536,212:534,231:Hv,233:533,234:535,236:216,237:222,255:154,257:155,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,309:ne,310:De,311:217,312:qe},n(c,e,{215:10,205:527,208:528,214:529,44:530,202:537,87:h}),n(Ne,[2,23],{307:43,267:139,275:146,278:149,55:323,67:447,68:448,44:450,66:538,13:l,16:f,45:lE,87:h,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,276:Q,277:P,279:D,280:x,283:N,285:$,308:p,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve}),n(pa,[2,291]),n(pa,[2,24]),n(pa,[2,25]),{13:l,16:f,44:136,45:ie,46:539,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},n(pa,[2,28]),n(Ne,et,{58:205,62:206,23:540,63:rt}),n([31,112,232,318,335],[2,105],{192:541,193:[1,542]}),n(ha,[2,107]),{13:l,16:f,44:215,45:Ke,55:220,82:U,87:h,89:lt,172:221,185:351,187:350,199:543,200:544,231:re,234:349,236:216,237:222,255:154,257:155,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,309:ne,310:De,311:217,312:qe},n(yE,[2,132]),n(Gv,[2,425]),n(yE,[2,133]),{13:l,16:f,44:354,55:355,82:U,87:h,172:357,237:356,255:154,257:155,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,309:ne,310:De,311:358,312:qe,313:545},n(Je,[2,54]),n(Je,[2,48]),n(la,[2,342]),{13:l,16:f,44:39,55:40,87:h,139:546,307:43,308:p},n(la,[2,68]),n(A,[2,350],{31:_E,112:_E}),n(Je,[2,53]),{13:l,16:f,55:547,307:43,308:p},n(S,[2,333]),n(J,[2,16]),n(xr,[2,152]),n(Ge,[2,154]),n(Ge,[2,157]),n(ae,[2,159]),n(ae,[2,160],{262:389,261:548,39:Zw,338:e6}),n(ae,[2,161],{262:389,261:549,39:Zw,338:e6}),n(_e,[2,163]),{13:l,16:f,44:136,45:ie,46:550,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},n(Ye,[2,178]),n(Ye,[2,179]),{13:l,16:f,44:136,45:ie,46:551,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},{13:l,16:f,44:136,45:ie,46:552,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},{13:l,16:f,44:136,45:ie,46:553,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},{48:[1,554],272:[1,555]},n(Ye,[2,184]),n(Ye,[2,186]),{314:[1,556]},{48:[1,557]},{48:[2,461]},{48:[2,462]},{48:[1,558]},{48:[2,467],193:[1,561],287:559,288:560},{13:l,16:f,55:194,197:Ze,223:562,307:43,308:p},n(n6,[2,224]),n(n6,[2,225]),n(n6,[2,226]),{31:[1,563],45:gE,94:564},n(Be,[2,84]),n(Ut,[2,368]),n(Be,[2,85]),n(sn,[2,370]),n(Wf,[2,373],{170:566}),{48:[1,567]},{48:[2,423],337:[1,568]},n(ji,[2,35],{83:[1,569]}),n(ji,[2,36],{81:[1,570]}),n(Kl,[2,30],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:509,44:510,75:571,13:l,16:f,45:ie,76:hE,78:pE,87:h,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,276:Q,277:P,279:D,280:x,283:N,285:$,308:p,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve}),n(Wl,[2,295]),{45:ie,77:572},{45:ie,77:573},n(Wl,[2,33]),n(Wl,[2,34]),{31:[2,275],50:574,84:575,85:a},{31:[2,277],51:576,84:577,85:a},n(fa,[2,356]),n(mE,[2,357],{152:578,335:[1,579]}),n(si,[2,74]),{29:$e,57:580},{29:$e,57:581},{13:l,16:f,44:39,55:40,87:h,139:582,307:43,308:p},n(vE,[2,365],{162:583,328:[1,584]}),{13:l,16:f,45:ie,55:323,67:321,68:322,77:320,79:585,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,307:43,308:p,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},{45:[1,586]},n(si,[2,81]),{29:$e,57:587},n(fa,[2,73]),n(A,[2,362],{29:ci,31:ci,85:ci,112:ci,159:ci,160:ci,161:ci,163:ci,164:ci}),n(zv,[2,112]),n(Yl,[2,401],{206:588}),n(A,[2,405],{209:589,210:590}),n(A,[2,403]),n(A,[2,404]),n(zv,[2,113]),n(zv,[2,400]),{13:l,16:f,44:215,45:Qv,48:[1,591],55:220,82:U,87:h,89:lt,172:221,185:351,203:536,212:592,231:Hv,234:535,236:216,237:222,255:154,257:155,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,309:ne,310:De,311:217,312:qe},n(Gv,[2,426]),n(r6,[2,138]),n(r6,[2,139]),{232:[1,593]},n(pa,[2,292]),{47:[1,595],48:[1,594]},n(Ir,[2,9]),n(ha,[2,392]),n(ha,[2,393],{44:39,55:40,307:43,195:341,139:342,194:596,190:597,13:l,16:f,87:h,197:Gr,308:p}),n(ha,[2,110],{272:[1,598]}),n(Xv,[2,397],{201:599,316:600,317:[1,601]}),{314:[1,602]},{29:[1,603]},n(at,[2,58]),n(_e,[2,445]),n(_e,[2,447]),{48:[1,604],272:[1,605]},{48:[1,606]},{272:[1,607]},{272:[1,608]},n(Ye,[2,99]),n(ur,[2,382]),n([13,16,39,47,48,87,193,197,242,246,250,263,265,272,290,297,298,299,300,301,302,308,314,338,341,342,343,344,345,346],[2,232]),n(Ye,[2,188]),n(Ye,[2,189]),{48:[1,609]},{48:[2,468]},{289:[1,610]},{13:l,16:f,55:492,82:U,172:493,255:154,257:155,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,311:494,312:qe,315:611},n(Be,[2,42]),n(Wf,[2,304]),{13:l,16:f,55:414,82:U,95:612,171:613,172:415,173:416,174:Uv,255:154,257:155,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:Vv},{31:[1,614],45:gE,94:615},n(_r,[2,129]),n(cE,[2,421]),{82:[1,616]},{82:[1,617]},n(Wl,[2,296]),n(Wl,[2,31]),n(Wl,[2,32]),{31:[2,17]},{31:[2,276]},{31:[2,18]},{31:[2,278]},n(A,da,{155:330,153:618,154:619,29:di,31:di,85:di,112:di,159:di,160:di,161:di,163:di,164:di}),n(mE,[2,358]),n(si,[2,75]),n(si,[2,76]),{29:$e,57:620},{13:l,16:f,44:39,55:40,87:h,139:621,307:43,308:p},n(vE,[2,366]),n(si,[2,79]),{13:l,16:f,44:136,45:ie,46:622,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},n(si,[2,91],{336:[1,623]}),n([29,31,85,112,159,160,161,163,164,232,318,335],[2,114],{207:624,193:[1,625]}),n(Yl,[2,117]),{13:l,16:f,44:215,45:Qv,55:220,82:U,87:h,89:lt,172:221,185:351,203:536,211:626,212:627,231:Hv,234:535,236:216,237:222,255:154,257:155,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,309:ne,310:De,311:217,312:qe},n(oi,[2,134]),n(Gv,[2,427]),n(oi,[2,135]),n(pa,[2,26]),{44:628,87:h},n(ha,[2,106]),n(ha,[2,394]),n(A,[2,396]),n(Xv,[2,111]),n(Xv,[2,398]),{13:l,16:f,44:39,55:40,87:h,139:342,186:629,190:340,195:341,197:Gr,307:43,308:p},n(Yw,[2,217]),n(A,tt,{144:248,140:630,143:631,31:[2,343]}),n(Ye,[2,97]),n(ur,[2,380]),n(Ye,[2,180]),{13:l,16:f,44:136,45:ie,46:632,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},{13:l,16:f,44:136,45:ie,46:633,55:133,67:132,68:134,77:131,82:U,87:h,172:135,224:fe,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:me,264:130,265:he,266:137,267:139,268:te,269:xe,270:Ie,271:Fe,273:pe,274:ye,275:146,276:Q,277:P,278:149,279:D,280:x,283:N,285:$,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:j,346:z,347:Z,348:le,349:ue,350:Pe,351:Ve},n(Ye,[2,190]),{290:[1,634]},{314:[1,635]},{13:l,16:f,48:[1,636],55:414,82:U,171:637,172:415,173:416,174:Uv,255:154,257:155,291:150,294:G,295:V,296:k,297:H,298:Y,299:se,300:ce,301:Se,302:Me,303:Ae,304:oe,305:C,306:F,307:43,308:p,312:Vv},n(TE,[2,305]),n(Be,[2,86]),n(Wf,[2,374]),n(ji,[2,37]),n(ji,[2,38]),n(fa,[2,72]),n(fa,[2,360]),n(si,[2,77]),{29:$e,57:638},{47:[1,639]},{29:[2,376]},n(Yl,[2,402]),n(Yl,[2,115],{215:10,208:528,214:529,44:530,205:640,13:e,16:e,45:e,197:e,224:e,229:e,308:e,87:h}),n(Yl,[2,118],{272:[1,641]}),n(Jv,[2,407],{213:642,319:643,317:[1,644]}),{48:[1,645]},{318:[1,646]},{31:[1,647]},{31:[2,344]},{48:[1,648]},{48:[1,649]},{291:650,303:Ae,304:oe,305:C,306:F},n(Kf,[2,218]),n(Wf,[2,44]),n(TE,[2,306]),n(si,[2,78]),{44:651,87:h},n(Yl,[2,116]),n(A,[2,406]),n(Jv,[2,119]),n(Jv,[2,408]),n(c,e,{215:10,205:527,208:528,214:529,44:530,202:652,87:h}),n(pa,[2,27]),n(Xv,[2,230]),n(wE,[2,345],{141:653,335:[1,654]}),n(Ye,[2,181]),n(Ye,[2,182]),{48:[2,191]},{48:[1,655]},{318:[1,656]},n(A,tt,{144:248,142:657,143:658,31:SE,112:SE}),n(wE,[2,346]),n(si,[2,80]),n(Jv,[2,231]),n(la,[2,67]),n(la,[2,348])],defaultActions:{5:[2,240],6:[2,241],7:[2,242],9:[2,239],24:[2,1],25:[2,2],26:[2,244],87:[2,282],94:[2,384],100:[2,45],109:[2,325],166:[2,458],263:[2,439],336:[2,258],337:[2,101],487:[2,461],488:[2,462],560:[2,468],574:[2,17],575:[2,276],576:[2,18],577:[2,278],623:[2,376],631:[2,344],650:[2,191]},parseError:function(Oe,Le){if(Le.recoverable)this.trace(Oe);else{var ze=new Error(Oe);throw ze.hash=Le,ze}},parse:function(Oe){var Le=this,ze=[0],ut=[null],st=[],W=this.table,Yr="",ee=0,Li=0,Yv=2,Zv=1,eT=st.slice.call(arguments,1),nr=Object.create(this.lexer),zn={yy:{}};for(var ga in this.yy)Object.prototype.hasOwnProperty.call(this.yy,ga)&&(zn.yy[ga]=this.yy[ga]);nr.setInput(Oe,zn.yy),zn.yy.lexer=nr,zn.yy.parser=this,typeof nr.yylloc>"u"&&(nr.yylloc={});var af=nr.yylloc;st.push(af);var y6=nr.options&&nr.options.ranges;typeof zn.yy.parseError=="function"?this.parseError=zn.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var tT=function(){var uf;return uf=nr.lex()||Zv,typeof uf!="number"&&(uf=Le.symbols_[uf]||uf),uf},vt,Ft,bt,mr,vr={},rT,fi,LE,nT;;){if(Ft=ze[ze.length-1],this.defaultActions[Ft]?bt=this.defaultActions[Ft]:((vt===null||typeof vt>"u")&&(vt=tT()),bt=W[Ft]&&W[Ft][vt]),typeof bt>"u"||!bt.length||!bt[0]){var _6="";nT=[];for(rT in W[Ft])this.terminals_[rT]&&rT>Yv&&nT.push("'"+this.terminals_[rT]+"'");nr.showPosition?_6="Parse error on line "+(ee+1)+`:
`+nr.showPosition()+`
Expecting `+nT.join(", ")+", got '"+(this.terminals_[vt]||vt)+"'":_6="Parse error on line "+(ee+1)+": Unexpected "+(vt==Zv?"end of input":"'"+(this.terminals_[vt]||vt)+"'"),this.parseError(_6,{text:nr.match,token:this.terminals_[vt]||vt,line:nr.yylineno,loc:af,expected:nT})}if(bt[0]instanceof Array&&bt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+Ft+", token: "+vt);switch(bt[0]){case 1:ze.push(vt),ut.push(nr.yytext),st.push(nr.yylloc),ze.push(bt[1]),vt=null,Li=nr.yyleng,Yr=nr.yytext,ee=nr.yylineno,af=nr.yylloc;break;case 2:if(fi=this.productions_[bt[1]][1],vr.$=ut[ut.length-fi],vr._$={first_line:st[st.length-(fi||1)].first_line,last_line:st[st.length-1].last_line,first_column:st[st.length-(fi||1)].first_column,last_column:st[st.length-1].last_column},y6&&(vr._$.range=[st[st.length-(fi||1)].range[0],st[st.length-1].range[1]]),mr=this.performAction.apply(vr,[Yr,Li,ee,zn.yy,bt[1],ut,st].concat(eT)),typeof mr<"u")return mr;fi&&(ze=ze.slice(0,-1*fi*2),ut=ut.slice(0,-1*fi),st=st.slice(0,-1*fi)),ze.push(this.productions_[bt[1]][0]),ut.push(vr.$),st.push(vr._$),LE=W[ze[ze.length-2]][ze[ze.length-1]],ze.push(LE);break;case 3:return!0}}return!0}},kv=hz().Wildcard,Kv="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Nk=Kv+"type",Pk=Kv+"first",Dk=Kv+"rest",AE=Kv+"nil",Wv="http://www.w3.org/2001/XMLSchema#",OE=Wv+"integer",EE=Wv+"decimal",xE=Wv+"double",jk=Wv+"boolean",ba="",IE="",RE="";function Lr(Re){return Re.toLowerCase()}function ya(Re,Oe){return Re.push(Oe),Re}function Zl(Re,Oe){return Re.push.apply(Re,Oe),Re}function rr(Re){Re||(Re={});for(var Oe=1,Le=arguments.length,ze;Oe<Le&&(ze=arguments[Oe]||{});Oe++)for(var ut in ze)Re[ut]=ze[ut];return Re}function Hn(){for(var Re=[],Oe=0,Le=arguments.length;Oe<Le;Oe++)Re=Re.concat.apply(Re,arguments[Oe]);return Re}function Yf(Re){if(Re[0]==="<"&&(Re=Re.substring(1,Re.length-1)),/^[a-z][a-z0-9.+-]*:/i.test(Re))return Re;if(!St.base)throw new Error("Cannot resolve relative IRI "+Re+" because no base IRI was set.");switch(ba!==St.base&&(ba=St.base,IE=ba.replace(/[^\/:]*$/,""),RE=ba.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),Re[0]){case void 0:return ba;case"#":return ba+Re;case"?":return ba.replace(/(?:\?.*)?$/,Re);case"/":return RE+Re;default:return IE+Re}}function a6(Re){if(Re){var Oe=Re[0];if(Oe==="?"||Oe==="$")return St.factory.variable(Re.substr(1))}return Re}function gr(Re,Oe){return{type:"operation",operator:Re,args:Oe||[]}}function ef(Re,Oe){var Le={expression:Re==="*"?new kv:Re};if(Oe)for(var ze in Oe)Le[ze]=Oe[ze];return Le}function tf(Re,Oe){return{type:"path",pathType:Re,items:Oe}}function u6(Re,Oe){for(var Le=0,ze=Oe.length,ut;Le<ze&&(ut=Oe[Le]);Le++)Re=gr(ut[0],[Re,ut[1]]);return Re}function _a(Re,Oe){var Le=[],ze=[],ut=Re.length,st,W={};if(!ut)return null;for(var Yr=0;Yr<ut&&(st=Re[Yr]);Yr++)(st.named?ze:Le).push(st.iri);return W[Oe||"from"]={default:Le,named:ze},W}function rf(Re){return parseInt(Re,10)}function o6(Re){return Re.type==="group"&&Re.patterns.length===1?Re.patterns[0]:Re}function Gn(Re,Oe){return Oe&&Oe.termType!=="NamedNode"&&(Oe=St.factory.namedNode(Oe)),St.factory.literal(Re,Oe)}function Lk(Re,Oe){return St.factory.literal(Re,Oe)}function s6(Re,Oe,Le){if(!("termType"in Oe))throw new Error("Nested triples cannot contain paths");return St.factory.quad(Re,Oe,Le)}function li(Re,Oe,Le,ze){var ut={};return Re!=null&&(ut.subject=Re),Oe!=null&&(ut.predicate=Oe),Le!=null&&(ut.object=Le),ze!=null&&(ut.annotations=ze),ut}function Zf(Re){return typeof Re=="string"?Re.startsWith("e_")?St.factory.blankNode(Re):St.factory.blankNode("e_"+Re):St.factory.blankNode("g_"+FE++)}var FE=0;St._resetBlanks=function(){FE=0};var Mk=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,Ck={"\\":"\\","'":"'",'"':'"',t:"	",b:"\b",n:`
`,r:"\r",f:"\f"},qk=/[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/,c6=String.fromCharCode;function NE(Re,Oe){Re=Re.substring(Oe,Re.length-Oe);try{Re=Re.replace(Mk,function(Le,ze,ut,st){var W;if(ze){if(W=parseInt(ze,16),isNaN(W))throw new Error;return c6(W)}else if(ut){if(W=parseInt(ut,16),isNaN(W))throw new Error;return W<65535?c6(W):c6(55296+((W-=65536)>>10),56320+(W&1023))}else{var Yr=Ck[st];if(!Yr)throw new Error;return Yr}})}catch{return""}if(qk.exec(Re))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint in "+Re);return Re}function Bk(Re){var Oe=Zf(),Le=Oe,ze=[],ut,st=[];Re.forEach(function(Li){ze.push(Li.entity),Zl(st,Li.triples)});for(var W=0,Yr=0,ee=ze.length,ut=Array(ee*2);W<ee;)ut[Yr++]=li(Le,St.factory.namedNode(Pk),ze[W]),ut[Yr++]=li(Le,St.factory.namedNode(Dk),Le=++W<ee?Zf():St.factory.namedNode(AE));return{entity:Oe,triples:Zl(ut,st)}}function $k(Re){var Oe=Zf();return{entity:Oe,triples:Re.map(function(Le){return rr(li(Oe),Le)})}}function d6(Re,Oe,Le){var ze=[],ut=[];return Oe.forEach(function(st){let W=null;st.annotation&&(W=st.annotation,st=st.object),ze.push(li(null,Re,st.entity,W)),Zl(ut,st.triples)}),Hn(ze,Le||[],ut)}function nf(Re){return Re.variable?Re.variable.value:Re.value||Re.expression.value}function l6(Re){if(!Re)return[];if(Re.type==="aggregate")return[Re];if(Re.type==="operation"){const Oe=[];for(const Le of Re.args)Oe.push(...l6(Le));return Oe}return[]}function Uk(Re){const Oe=new Set,Le=function(ze){ze&&(ze.termType==="Variable"?Oe.add(ze):ze.type==="operation"&&ze.args.forEach(Le))};return Le(Re),Oe}function f6(Re,Oe=1,Le=[]){for(const ze of Re)Oe>0&&ze instanceof Array?f6(ze,Oe-1,Le):Le.push(ze);return Le}function h6(Re){return Re.termType==="Variable"}function PE(Re){if(Re.triples){const Oe=[];for(const Le of Re.triples)h6(Le.subject)&&Oe.push(Le.subject.value),h6(Le.predicate)&&Oe.push(Le.predicate.value),h6(Le.object)&&Oe.push(Le.object.value);return Oe}else if(Re.patterns){const Oe=[];for(const Le of Re.patterns)Oe.push(...PE(Le));return Oe}return[]}function Vk(Re){const Oe=Re.slice().sort(),Le=[];for(let ze=0;ze<Oe.length-1;ze++)Oe[ze+1]==Oe[ze]&&Le.push(Oe[ze]);return Le}function e0(Re){if(!St.sparqlStar)throw new Error("SPARQL-star support is not enabled");return Re}function DE(Re,Oe,Le){for(const ze of Oe){const ut=li("subject"in ze?ze.subject:Re,ze.predicate,ze.object);Le.push(ut),ze.annotations&&DE(s6(Re,ze.predicate,ze.object),ze.annotations,Le)}}function p6(Re){if(St.sparqlStar){const Oe=[];return Re.forEach(Le=>{const ze=li(Le.subject,Le.predicate,Le.object);Oe.push(ze),Le.annotations&&DE(s6(Le.subject,Le.predicate,Le.object),Le.annotations,Oe)}),Oe}return Re}function jE(Re){for(const Oe of Re){if(Oe.type==="graph"&&Oe.name.termType==="Variable")throw new Error("Detected illegal variable in GRAPH");if(Oe.type==="bgp"||Oe.type==="graph"){for(const Le of Oe.triples)if(Le.subject.termType==="Variable"||Le.predicate.termType==="Variable"||Le.object.termType==="Variable")throw new Error("Detected illegal variable in BGP")}}return Re}function b6(Re){for(const Oe of Re)if(Oe.type==="bgp"){for(const Le of Oe.triples)if(Le.subject.termType==="BlankNode"||Le.predicate.termType==="BlankNode"||Le.object.termType==="BlankNode")throw new Error("Detected illegal blank node in BGP")}return Re}var Qk=(function(){var Re={EOF:1,parseError:function(Le,ze){if(this.yy.parser)this.yy.parser.parseError(Le,ze);else throw new Error(Le)},setInput:function(Oe,Le){return this.yy=Le||this.yy||{},this._input=Oe,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var Oe=this._input[0];this.yytext+=Oe,this.yyleng++,this.offset++,this.match+=Oe,this.matched+=Oe;var Le=Oe.match(/(?:\r\n?|\n).*/g);return Le?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),Oe},unput:function(Oe){var Le=Oe.length,ze=Oe.split(/(?:\r\n?|\n)/g);this._input=Oe+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Le),this.offset-=Le;var ut=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),ze.length-1&&(this.yylineno-=ze.length-1);var st=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:ze?(ze.length===ut.length?this.yylloc.first_column:0)+ut[ut.length-ze.length].length-ze[0].length:this.yylloc.first_column-Le},this.options.ranges&&(this.yylloc.range=[st[0],st[0]+this.yyleng-Le]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(Oe){this.unput(this.match.slice(Oe))},pastInput:function(){var Oe=this.matched.substr(0,this.matched.length-this.match.length);return(Oe.length>20?"...":"")+Oe.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var Oe=this.match;return Oe.length<20&&(Oe+=this._input.substr(0,20-Oe.length)),(Oe.substr(0,20)+(Oe.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var Oe=this.pastInput(),Le=new Array(Oe.length+1).join("-");return Oe+this.upcomingInput()+`
`+Le+"^"},test_match:function(Oe,Le){var ze,ut,st;if(this.options.backtrack_lexer&&(st={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(st.yylloc.range=this.yylloc.range.slice(0))),ut=Oe[0].match(/(?:\r\n?|\n).*/g),ut&&(this.yylineno+=ut.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:ut?ut[ut.length-1].length-ut[ut.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+Oe[0].length},this.yytext+=Oe[0],this.match+=Oe[0],this.matches=Oe,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(Oe[0].length),this.matched+=Oe[0],ze=this.performAction.call(this,this.yy,this,Le,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),ze)return ze;if(this._backtrack){for(var W in st)this[W]=st[W];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var Oe,Le,ze,ut;this._more||(this.yytext="",this.match="");for(var st=this._currentRules(),W=0;W<st.length;W++)if(ze=this._input.match(this.rules[st[W]]),ze&&(!Le||ze[0].length>Le[0].length)){if(Le=ze,ut=W,this.options.backtrack_lexer){if(Oe=this.test_match(ze,st[W]),Oe!==!1)return Oe;if(this._backtrack){Le=!1;continue}else return!1}else if(!this.options.flex)break}return Le?(Oe=this.test_match(Le,st[ut]),Oe!==!1?Oe:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Le=this.next();return Le||this.lex()},begin:function(Le){this.conditionStack.push(Le)},popState:function(){var Le=this.conditionStack.length-1;return Le>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Le){return Le=this.conditionStack.length-1-Math.abs(Le||0),Le>=0?this.conditionStack[Le]:"INITIAL"},pushState:function(Le){this.begin(Le)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(Le,ze,ut,st){switch(ut){case 0:break;case 1:return 12;case 2:return 15;case 3:return 41;case 4:return 325;case 5:return 326;case 6:return 45;case 7:return 47;case 8:return 48;case 9:return 39;case 10:return 24;case 11:return 28;case 12:return 29;case 13:return 31;case 14:return 32;case 15:return 36;case 16:return 53;case 17:return 327;case 18:return 63;case 19:return 64;case 20:return 70;case 21:return 73;case 22:return 76;case 23:return 78;case 24:return 81;case 25:return 83;case 26:return 85;case 27:return 193;case 28:return 100;case 29:return 328;case 30:return 121;case 31:return 329;case 32:return 330;case 33:return 110;case 34:return 331;case 35:return 109;case 36:return 332;case 37:return 333;case 38:return 113;case 39:return 115;case 40:return 116;case 41:return 131;case 42:return 123;case 43:return 126;case 44:return 128;case 45:return 132;case 46:return 112;case 47:return 334;case 48:return 335;case 49:return 159;case 50:return 161;case 51:return 164;case 52:return 174;case 53:return 160;case 54:return 336;case 55:return 163;case 56:return 312;case 57:return 314;case 58:return 317;case 59:return 318;case 60:return 272;case 61:return 197;case 62:return 337;case 63:return 338;case 64:return 229;case 65:return 340;case 66:return 263;case 67:return 224;case 68:return 231;case 69:return 232;case 70:return 242;case 71:return 246;case 72:return 290;case 73:return 341;case 74:return 342;case 75:return 343;case 76:return 344;case 77:return 345;case 78:return 250;case 79:return 346;case 80:return 265;case 81:return 276;case 82:return 277;case 83:return 268;case 84:return 269;case 85:return 270;case 86:return 271;case 87:return 347;case 88:return 348;case 89:return 273;case 90:return 274;case 91:return 350;case 92:return 349;case 93:return 351;case 94:return 279;case 95:return 280;case 96:return 283;case 97:return 285;case 98:return 289;case 99:return 293;case 100:return 296;case 101:return 13;case 102:return 16;case 103:return 308;case 104:return 309;case 105:return 87;case 106:return 292;case 107:return 82;case 108:return 294;case 109:return 295;case 110:return 297;case 111:return 298;case 112:return 299;case 113:return 300;case 114:return 301;case 115:return 302;case 116:return"EXPONENT";case 117:return 303;case 118:return 304;case 119:return 305;case 120:return 306;case 121:return 89;case 122:return 310;case 123:return 6;case 124:return"INVALID";case 125:console.log(ze.yytext);break}},rules:[/^(?:\s+|(#[^\n\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:\{\|)/i,/^(?:\|\})/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(SUBJECT|PREDICATE|OBJECT|isTRIPLE))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:TRIPLE)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],inclusive:!0}}};return Re})();i6.lexer=Qk;function St(){this.yy={}}return St.prototype=i6,i6.Parser=St,new St})();return Z6=u,Z6}var eS,p8;function TW(){if(p8)return eS;p8=1;var u="http://www.w3.org/2001/XMLSchema#integer",n="http://www.w3.org/2001/XMLSchema#string";function o(f){this._options=f=f||{};var h=f.prefixes||{};this._prefixByIri={};var p=[];for(var y in h){var _=h[y];a(_)&&(this._prefixByIri[_]=y,p.push(_))}var b=p.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+b+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._sparqlStar=f.sparqlStar,this._indent=a(f.indent)?f.indent:"  ",this._newline=a(f.newline)?f.newline:`
`,this._explicitDatatype=!!f.explicitDatatype}o.prototype.toQuery=function(f){var h="";return f.queryType&&(h+=f.queryType.toUpperCase()+" "),f.reduced&&(h+="REDUCED "),f.distinct&&(h+="DISTINCT "),f.variables?h+=d(f.variables,void 0,function(p){return/^[?$]/.test(p)?p:c(p)?this.toEntity(p):"("+this.toExpression(p.expression)+" AS "+r(p.variable)+")"},this)+" ":f.template&&(h+=this.group(f.template,!0)+this._newline),f.from&&(h+=this.graphs("FROM ",f.from.default)+this.graphs("FROM NAMED ",f.from.named)),f.where&&(h+="WHERE "+this.group(f.where,!0)+this._newline),f.updates&&(h+=d(f.updates,";"+this._newline,this.toUpdate,this)),f.group&&(h+="GROUP BY "+d(f.group,void 0,function(p){var y=c(p.expression)?this.toEntity(p.expression):"("+this.toExpression(p.expression)+")";return p.variable?"("+y+" AS "+r(p.variable)+")":y},this)+this._newline),f.having&&(h+="HAVING ("+d(f.having,void 0,this.toExpression,this)+")"+this._newline),f.order&&(h+="ORDER BY "+d(f.order,void 0,function(p){var y="("+this.toExpression(p.expression)+")";return p.descending?"DESC "+y:y},this)+this._newline),f.offset&&(h+="OFFSET "+f.offset+this._newline),f.limit&&(h+="LIMIT "+f.limit+this._newline),f.values&&(h+=this.values(f)),h=this.baseAndPrefixes(f)+h,h.trim()},o.prototype.baseAndPrefixes=function(f){var h=f.base?"BASE <"+f.base+">"+this._newline:"",p="";for(var y in f.prefixes)(this._options.allPrefixes||this._usedPrefixes[y])&&(p+="PREFIX "+y+": <"+f.prefixes[y]+">"+this._newline);return h+p},o.prototype.toPattern=function(f){var h=f.type||f instanceof Array&&"array"||(f.subject&&f.predicate&&f.object?"triple":"");if(!(h in this))throw new Error("Unknown entry type: "+h);return this[h](f)},o.prototype.triple=function(f){return this.toEntity(f.subject)+" "+this.toEntity(f.predicate)+" "+this.toEntity(f.object)+"."},o.prototype.array=function(f){return d(f,this._newline,this.toPattern,this)},o.prototype.bgp=function(f){return this.encodeTriples(f.triples)},o.prototype.encodeTriples=function(f){if(!f.length)return"";for(var h=[],p=void 0,y=void 0,_=0;_<f.length;_++){var b=f[_];s(b.subject,p)?s(b.predicate,y)?h.push(","):(y=b.predicate,h.push(";"+this._newline,this._indent,this.toEntity(y))):(p&&h.push("."+this._newline),p=b.subject,y=b.predicate,h.push(this.toEntity(p)," ",this.toEntity(y))),h.push(" ",this.toEntity(b.object))}return h.push("."),h.join("")},o.prototype.graph=function(f){return"GRAPH "+this.toEntity(f.name)+" "+this.group(f)},o.prototype.graphs=function(f,h){return!h||h.length===0?"":d(h,"",function(p){return f+this.toEntity(p)+this._newline},this)},o.prototype.group=function(f,h){return f=h!==!0?this.array(f.patterns||f.triples):this.toPattern(f.type!=="group"?f:f.patterns),f.indexOf(this._newline)===-1?"{ "+f+" }":"{"+this._newline+this.indent(f)+this._newline+"}"},o.prototype.query=function(f){return this.toQuery(f)},o.prototype.filter=function(f){return"FILTER("+this.toExpression(f.expression)+")"},o.prototype.bind=function(f){return"BIND("+this.toExpression(f.expression)+" AS "+r(f.variable)+")"},o.prototype.optional=function(f){return"OPTIONAL "+this.group(f)},o.prototype.union=function(f){return d(f.patterns,this._newline+"UNION"+this._newline,function(h){return this.group(h,!0)},this)},o.prototype.minus=function(f){return"MINUS "+this.group(f)},o.prototype.values=function(f){var h=Object.keys(f.values.reduce(function(_,b){for(var m in b)_[m]=!0;return _},{})),p,y;return h.length===1?p=y="":(p="(",y=")"),"VALUES "+p+h.join(" ")+y+" {"+this._newline+d(f.values,this._newline,function(_){return"  "+p+d(h,void 0,function(b){return _[b]?this.toEntity(_[b]):"UNDEF"},this)+y},this)+this._newline+"}"},o.prototype.service=function(f){return"SERVICE "+(f.silent?"SILENT ":"")+this.toEntity(f.name)+" "+this.group(f)},o.prototype.toExpression=function(f){if(c(f))return this.toEntity(f);switch(f.type.toLowerCase()){case"aggregate":return f.aggregation.toUpperCase()+"("+(f.distinct?"DISTINCT ":"")+this.toExpression(f.expression)+(typeof f.separator=="string"?'; SEPARATOR = "'+f.separator.replace(i,t)+'"':"")+")";case"functioncall":return this.toEntity(f.function)+"("+d(f.args,", ",this.toExpression,this)+")";case"operation":var h=f.operator.toUpperCase(),p=f.args||[];switch(f.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(c(p[0])?this.toEntity(p[0]):"("+this.toExpression(p[0])+")")+" "+h+" "+(c(p[1])?this.toEntity(p[1]):"("+this.toExpression(p[1])+")");case"!":return"!("+this.toExpression(p[0])+")";case"uplus":return"+("+this.toExpression(p[0])+")";case"uminus":return"-("+this.toExpression(p[0])+")";case"notin":h="NOT IN";case"in":return this.toExpression(p[0])+" "+h+"("+(a(p[1])?p[1]:d(p[1],", ",this.toExpression,this))+")";case"notexists":h="NOT EXISTS";case"exists":return h+" "+this.group(p[0],!0);default:return h+"("+d(p,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+f.type)}},o.prototype.toEntity=function(f){if(c(f))switch(f.termType){case"Wildcard":return"*";case"Variable":return r(f);case"BlankNode":return"_:"+f.value;case"Literal":var h=f.value||"",p=f.language||"",y=f.datatype;if(f='"'+h.replace(i,t)+'"',p)f+="@"+p;else if(y){if(!this._explicitDatatype)switch(y.value){case n:return f;case u:if(/^\d+$/.test(h))return h+" "}f+="^^"+this.encodeIRI(y.value)}return f;case"Quad":if(!this._sparqlStar)throw new Error("SPARQL* support is not enabled");return f.graph&&f.graph.termType!=="DefaultGraph"?"<< GRAPH "+this.toEntity(f.graph)+" { "+this.toEntity(f.subject)+" "+this.toEntity(f.predicate)+" "+this.toEntity(f.object)+" }  >>":"<< "+this.toEntity(f.subject)+" "+this.toEntity(f.predicate)+" "+this.toEntity(f.object)+" >>";default:return this.encodeIRI(f.value)}else{var _=f.items.map(this.toEntity,this),b=f.pathType;switch(b){case"^":case"!":return b+_[0];case"*":case"+":case"?":return"("+_[0]+b+")";default:return"("+_.join(b)+")"}}};var i=/["\\\t\n\r\b\f]/g,t=function(f){return e[f]},e={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};o.prototype.encodeIRI=function(f){var h=this._prefixRegex.exec(f);if(h){var p=this._prefixByIri[h[1]];return this._usedPrefixes[p]=!0,p+":"+h[2]}return"<"+f+">"},o.prototype.toUpdate=function(f){switch(f.type||f.updateType){case"load":return"LOAD"+(f.source?" "+this.toEntity(f.source):"")+(f.destination?" INTO GRAPH "+this.toEntity(f.destination):"");case"insert":return"INSERT DATA "+this.group(f.insert,!0);case"delete":return"DELETE DATA "+this.group(f.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(f.delete,!0);case"insertdelete":return(f.graph?"WITH "+this.toEntity(f.graph)+this._newline:"")+(f.delete.length?"DELETE "+this.group(f.delete,!0)+this._newline:"")+(f.insert.length?"INSERT "+this.group(f.insert,!0)+this._newline:"")+(f.using?this.graphs("USING ",f.using.default):"")+(f.using?this.graphs("USING NAMED ",f.using.named):"")+"WHERE "+this.group(f.where,!0);case"add":case"copy":case"move":return f.type.toUpperCase()+" "+(f.silent?"SILENT ":"")+(f.source.default?"DEFAULT":this.toEntity(f.source.name))+" TO "+this.toEntity(f.destination.name);case"create":case"clear":case"drop":return f.type.toUpperCase()+(f.silent?" SILENT ":" ")+(f.graph.default?"DEFAULT":f.graph.named?"NAMED":f.graph.all?"ALL":"GRAPH "+this.toEntity(f.graph.name));default:throw new Error("Unknown update query type: "+f.type)}},o.prototype.indent=function(f){return f.replace(/^/gm,this._indent)};function r(f){return"?"+f.value}function a(f){return typeof f=="string"}function c(f){return typeof f.termType=="string"}function s(f,h){if(!f||!c(f)||!h||!c(h)||f.termType!==h.termType)return!1;switch(f.termType){case"Literal":return f.value===h.value&&f.language===h.language&&s(f.datatype,h.datatype);case"Quad":return s(f.subject,h.subject)&&s(f.predicate,h.predicate)&&s(f.object,h.object)&&s(f.graph,h.graph);default:return f.value===h.value}}function d(f,h,p,y){return f.map(p,y).join(a(h)?h:" ")}function l(f={}){return{stringify:function(h){var p=Object.create(f);return p.prefixes=h.prefixes,new o(p).toQuery(h)},createGenerator:function(){return new o(f)}}}return eS={Generator:l},eS}var tS,b8;function Ev(){if(b8)return tS;b8=1;const{Parser:u}=vW(),{Generator:n}=TW(),{Wildcard:o}=hz(),{DataFactory:i}=hr();function t({prefixes:e,baseIRI:r,factory:a,pathOnly:c,sparqlStar:s,skipValidation:d,skipUngroupedVariableCheck:l}={}){const f={};for(const p in e??{})f[p]=e[p];const h=new u;return h.parse=function(){return u.base=r||"",u.prefixes=Object.create(f),u.factory=a||new i,u.sparqlStar=!!s,u.pathOnly=!!c,u.skipValidation=!!d||!!l,u.prototype.parse.apply(h,arguments)},h._resetBlanks=u._resetBlanks,h}return tS={Parser:t,Generator:n,Wildcard:o},tS}var y8;function Fw(){if(y8)return Xn;y8=1;var u=Xn&&Xn.__createBinding||(Object.create?(function(c,s,d,l){l===void 0&&(l=d);var f=Object.getOwnPropertyDescriptor(s,d);(!f||("get"in f?!s.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return s[d]}}),Object.defineProperty(c,l,f)}):(function(c,s,d,l){l===void 0&&(l=d),c[l]=s[d]})),n=Xn&&Xn.__setModuleDefault||(Object.create?(function(c,s){Object.defineProperty(c,"default",{enumerable:!0,value:s})}):function(c,s){c.default=s}),o=Xn&&Xn.__importStar||function(c){if(c&&c.__esModule)return c;var s={};if(c!=null)for(var d in c)d!=="default"&&Object.prototype.hasOwnProperty.call(c,d)&&u(s,c,d);return n(s,c),s};Object.defineProperty(Xn,"__esModule",{value:!0});const i=o(Ov()),t=hr(),e=tr(),r=Ev();class a{constructor(s){this.dataFactory=s||new t.DataFactory,this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string")}createAlt(s,d=!0){return this.flattenMulti({type:i.types.ALT,input:s},d)}createAsk(s){return{type:i.types.ASK,input:s}}createBoundAggregate(s,d,l,f,h){const p=this.createAggregateExpression(d,l,f,h);return p.variable=s,p}createBgp(s){return{type:i.types.BGP,patterns:s}}createConstruct(s,d){return{type:i.types.CONSTRUCT,input:s,template:d}}createDescribe(s,d){return{type:i.types.DESCRIBE,input:s,terms:d}}createDistinct(s){return{type:i.types.DISTINCT,input:s}}createExtend(s,d,l){return{type:i.types.EXTEND,input:s,variable:d,expression:l}}createFrom(s,d,l){return{type:i.types.FROM,input:s,default:d,named:l}}createFilter(s,d){return{type:i.types.FILTER,input:s,expression:d}}createGraph(s,d){return{type:i.types.GRAPH,input:s,name:d}}createGroup(s,d,l){return{type:i.types.GROUP,input:s,variables:d,aggregates:l}}createInv(s){return{type:i.types.INV,path:s}}createJoin(s,d=!0){return this.flattenMulti({type:i.types.JOIN,input:s},d)}createLeftJoin(s,d,l){return l?{type:i.types.LEFT_JOIN,input:[s,d],expression:l}:{type:i.types.LEFT_JOIN,input:[s,d]}}createLink(s){return{type:i.types.LINK,iri:s}}createMinus(s,d){return{type:i.types.MINUS,input:[s,d]}}createNop(){return{type:i.types.NOP}}createNps(s){return{type:i.types.NPS,iris:s}}createOneOrMorePath(s){return{type:i.types.ONE_OR_MORE_PATH,path:s}}createOrderBy(s,d){return{type:i.types.ORDER_BY,input:s,expressions:d}}createPath(s,d,l,f){return f?{type:i.types.PATH,subject:s,predicate:d,object:l,graph:f}:{type:i.types.PATH,subject:s,predicate:d,object:l,graph:this.dataFactory.defaultGraph()}}createPattern(s,d,l,f){const h=this.dataFactory.quad(s,d,l,f);return h.type=i.types.PATTERN,h}createProject(s,d){return{type:i.types.PROJECT,input:s,variables:d}}createReduced(s){return{type:i.types.REDUCED,input:s}}createSeq(s,d=!0){return this.flattenMulti({type:i.types.SEQ,input:s},d)}createService(s,d,l){return{type:i.types.SERVICE,input:s,name:d,silent:!!l}}createSlice(s,d,l){return d=d||0,l!==void 0?{type:i.types.SLICE,input:s,start:d,length:l}:{type:i.types.SLICE,input:s,start:d}}createUnion(s,d=!0){return this.flattenMulti({type:i.types.UNION,input:s},d)}createValues(s,d){return{type:i.types.VALUES,variables:s,bindings:d}}createZeroOrMorePath(s){return{type:i.types.ZERO_OR_MORE_PATH,path:s}}createZeroOrOnePath(s){return{type:i.types.ZERO_OR_ONE_PATH,path:s}}createAggregateExpression(s,d,l,f){return f?{type:i.types.EXPRESSION,expressionType:i.expressionTypes.AGGREGATE,aggregator:s,expression:d,separator:f,distinct:l}:{type:i.types.EXPRESSION,expressionType:i.expressionTypes.AGGREGATE,aggregator:s,expression:d,distinct:l}}createExistenceExpression(s,d){return{type:i.types.EXPRESSION,expressionType:i.expressionTypes.EXISTENCE,not:s,input:d}}createNamedExpression(s,d){return{type:i.types.EXPRESSION,expressionType:i.expressionTypes.NAMED,name:s,args:d}}createOperatorExpression(s,d){return{type:i.types.EXPRESSION,expressionType:i.expressionTypes.OPERATOR,operator:s,args:d}}createTermExpression(s){return{type:i.types.EXPRESSION,expressionType:i.expressionTypes.TERM,term:s}}createWildcardExpression(){return{type:i.types.EXPRESSION,expressionType:i.expressionTypes.WILDCARD,wildcard:new r.Wildcard}}createTerm(s){return s[0]==="$"&&(s=s.replace("$","?")),(0,e.stringToTerm)(s,this.dataFactory)}createCompositeUpdate(s){return{type:i.types.COMPOSITE_UPDATE,updates:s}}createDeleteInsert(s,d,l){const f={type:i.types.DELETE_INSERT};return s&&(f.delete=s),d&&(f.insert=d),l&&(f.where=l),f}createLoad(s,d,l){const f={type:i.types.LOAD,source:s};return d&&(f.destination=d),this.addSilent(f,!!l)}createClear(s,d){return this.addSilent({type:i.types.CLEAR,source:s},!!d)}createCreate(s,d){return this.addSilent({type:i.types.CREATE,source:s},!!d)}createDrop(s,d){return this.addSilent({type:i.types.DROP,source:s},!!d)}createAdd(s,d,l){return this.addSilent({type:i.types.ADD,source:s,destination:d},!!l)}createMove(s,d,l){return this.addSilent({type:i.types.MOVE,source:s,destination:d},!!l)}createCopy(s,d,l){return this.addSilent({type:i.types.COPY,source:s,destination:d},!!l)}addSilent(s,d){return d&&(s.silent=d),s}flattenMulti(s,d){if(!d)return s;const l=s.type,f=s.input;let h=[];for(const p of f)p.type===l?h.push(...p.input):h.push(p);return s.input=h,s}}return Xn.default=a,Xn}var of={},Na={},ot={},_8;function pz(){if(_8)return ot;_8=1,Object.defineProperty(ot,"__esModule",{value:!0}),ot.matchPatternMappings=ot.matchPatternComplete=ot.matchPattern=ot.matchTerm=ot.getValueNestedPath=ot.someTermsNested=ot.someTerms=ot.everyTermsNested=ot.everyTerms=ot.reduceTermsNested=ot.reduceTerms=ot.mapTermsNested=ot.mapTerms=ot.filterQuadTermNamesNested=ot.filterQuadTermNames=ot.filterTermsNested=ot.filterTerms=ot.forEachTermsNested=ot.forEachTerms=ot.collectNamedTerms=ot.getNamedTerms=ot.getTermsNested=ot.getTerms=ot.TRIPLE_TERM_NAMES=ot.QUAD_TERM_NAMES=void 0;const u=hr(),n=new u.DataFactory;ot.QUAD_TERM_NAMES=["subject","predicate","object","graph"],ot.TRIPLE_TERM_NAMES=["subject","predicate","object"];function o(O,w){return w&&O.graph.termType==="DefaultGraph"?[O.subject,O.predicate,O.object]:[O.subject,O.predicate,O.object,O.graph]}ot.getTerms=o;function i(O,w){const S=[];for(const E of o(O,w))E.termType==="Quad"?i(E,w).forEach(R=>S.push(R)):S.push(E);return S}ot.getTermsNested=i;function t(O){return[{key:"subject",value:O.subject},{key:"predicate",value:O.predicate},{key:"object",value:O.object},{key:"graph",value:O.graph}]}ot.getNamedTerms=t;function e(O,w,S){const E={};return O.forEach(R=>E[R.key]=R.value),w&&(E.subject=E.subject||w("subject"),E.predicate=E.predicate||w("predicate"),E.object=E.object||w("object"),E.graph=E.graph||w("graph")),(S||n).quad(E.subject,E.predicate,E.object,E.graph)}ot.collectNamedTerms=e;function r(O,w){w(O.subject,"subject"),w(O.predicate,"predicate"),w(O.object,"object"),w(O.graph,"graph")}ot.forEachTerms=r;function a(O,w,S=[]){O.subject.termType==="Quad"?a(O.subject,w,[...S,"subject"]):w(O.subject,[...S,"subject"]),O.predicate.termType==="Quad"?a(O.predicate,w,[...S,"predicate"]):w(O.predicate,[...S,"predicate"]),O.object.termType==="Quad"?a(O.object,w,[...S,"object"]):w(O.object,[...S,"object"]),O.graph.termType==="Quad"?a(O.graph,w,[...S,"graph"]):w(O.graph,[...S,"graph"])}ot.forEachTermsNested=a;function c(O,w){const S=[];return w(O.subject,"subject")&&S.push(O.subject),w(O.predicate,"predicate")&&S.push(O.predicate),w(O.object,"object")&&S.push(O.object),w(O.graph,"graph")&&S.push(O.graph),S}ot.filterTerms=c;function s(O,w,S=[]){let E=[];return O.subject.termType==="Quad"?E=[...E,...s(O.subject,w,[...S,"subject"])]:w(O.subject,[...S,"subject"])&&E.push(O.subject),O.predicate.termType==="Quad"?E=[...E,...s(O.predicate,w,[...S,"predicate"])]:w(O.predicate,[...S,"predicate"])&&E.push(O.predicate),O.object.termType==="Quad"?E=[...E,...s(O.object,w,[...S,"object"])]:w(O.object,[...S,"object"])&&E.push(O.object),O.graph.termType==="Quad"?E=[...E,...s(O.graph,w,[...S,"graph"])]:w(O.graph,[...S,"graph"])&&E.push(O.graph),E}ot.filterTermsNested=s;function d(O,w){const S=[];return w(O.subject,"subject")&&S.push("subject"),w(O.predicate,"predicate")&&S.push("predicate"),w(O.object,"object")&&S.push("object"),w(O.graph,"graph")&&S.push("graph"),S}ot.filterQuadTermNames=d;function l(O,w,S=[]){let E=[];const R=[...S,"subject"];O.subject.termType==="Quad"?E=[...E,...l(O.subject,w,R)]:w(O.subject,R)&&E.push(R);const L=[...S,"predicate"];O.predicate.termType==="Quad"?E=[...E,...l(O.predicate,w,L)]:w(O.predicate,L)&&E.push(L);const M=[...S,"object"];O.object.termType==="Quad"?E=[...E,...l(O.object,w,M)]:w(O.object,M)&&E.push(M);const B=[...S,"graph"];return O.graph.termType==="Quad"?E=[...E,...l(O.graph,w,B)]:w(O.graph,B)&&E.push(B),E}ot.filterQuadTermNamesNested=l;function f(O,w,S){return(S||n).quad(w(O.subject,"subject"),w(O.predicate,"predicate"),w(O.object,"object"),w(O.graph,"graph"))}ot.mapTerms=f;function h(O,w,S,E=[]){return(S||n).quad(O.subject.termType==="Quad"?h(O.subject,w,S,[...E,"subject"]):w(O.subject,[...E,"subject"]),O.predicate.termType==="Quad"?h(O.predicate,w,S,[...E,"predicate"]):w(O.predicate,[...E,"predicate"]),O.object.termType==="Quad"?h(O.object,w,S,[...E,"object"]):w(O.object,[...E,"object"]),O.graph.termType==="Quad"?h(O.graph,w,S,[...E,"graph"]):w(O.graph,[...E,"graph"]))}ot.mapTermsNested=h;function p(O,w,S){let E=S;return E=w(E,O.subject,"subject"),E=w(E,O.predicate,"predicate"),E=w(E,O.object,"object"),w(E,O.graph,"graph")}ot.reduceTerms=p;function y(O,w,S,E=[]){let R=S;return O.subject.termType==="Quad"?R=y(O.subject,w,R,[...E,"subject"]):R=w(R,O.subject,[...E,"subject"]),O.predicate.termType==="Quad"?R=y(O.predicate,w,R,[...E,"predicate"]):R=w(R,O.predicate,[...E,"predicate"]),O.object.termType==="Quad"?R=y(O.object,w,R,[...E,"object"]):R=w(R,O.object,[...E,"object"]),O.graph.termType==="Quad"?R=y(O.graph,w,R,[...E,"graph"]):R=w(R,O.graph,[...E,"graph"]),R}ot.reduceTermsNested=y;function _(O,w){return w(O.subject,"subject")&&w(O.predicate,"predicate")&&w(O.object,"object")&&w(O.graph,"graph")}ot.everyTerms=_;function b(O,w,S=[]){return(O.subject.termType==="Quad"?b(O.subject,w,[...S,"subject"]):w(O.subject,[...S,"subject"]))&&(O.predicate.termType==="Quad"?b(O.predicate,w,[...S,"predicate"]):w(O.predicate,[...S,"predicate"]))&&(O.object.termType==="Quad"?b(O.object,w,[...S,"object"]):w(O.object,[...S,"object"]))&&(O.graph.termType==="Quad"?b(O.graph,w,[...S,"graph"]):w(O.graph,[...S,"graph"]))}ot.everyTermsNested=b;function m(O,w){return w(O.subject,"subject")||w(O.predicate,"predicate")||w(O.object,"object")||w(O.graph,"graph")}ot.someTerms=m;function g(O,w,S=[]){return(O.subject.termType==="Quad"?g(O.subject,w,[...S,"subject"]):w(O.subject,[...S,"subject"]))||(O.predicate.termType==="Quad"?g(O.predicate,w,[...S,"predicate"]):w(O.predicate,[...S,"predicate"]))||(O.object.termType==="Quad"?g(O.object,w,[...S,"object"]):w(O.object,[...S,"object"]))||(O.graph.termType==="Quad"?g(O.graph,w,[...S,"graph"]):w(O.graph,[...S,"graph"]))}ot.someTermsNested=g;function T(O,w){if(w.length===0)return O;if(O.termType==="Quad")return T(O[w[0]],w.slice(1));throw new Error(`Tried to get ${w[0]} from term of type ${O.termType}`)}ot.getValueNestedPath=T;function v(O,w){return!w||w.termType==="Variable"||w.termType==="Quad"&&O.termType==="Quad"&&I(O,w)||w.equals(O)}ot.matchTerm=v;function A(O,w,S,E,R){return v(O.subject,w)&&v(O.predicate,S)&&v(O.object,E)&&v(O.graph,R)}ot.matchPattern=A;function I(O,w){return A(O,w.subject,w.predicate,w.object,w.graph)}ot.matchPatternComplete=I;function q(O,w,S={}){const E={};function R(L,M){return _(L,(B,X)=>{var J,ie;const U=M[X];switch(B.termType){case"Variable":return S.skipVarMapping&&U.termType==="Variable"||((ie=(J=E[B.value])===null||J===void 0?void 0:J.equals(U))!==null&&ie!==void 0?ie:(E[B.value]=U,!0));case"Quad":return U.termType==="Quad"&&R(B,U);default:return B.equals(U)}})}return R(w,O)&&(S.returnMappings?E:!0)}return ot.matchPatternMappings=q,ot}var ir={},g8;function wW(){if(g8)return ir;g8=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.getQuads=ir.getDefaultGraphs=ir.getVariables=ir.getLiterals=ir.getBlankNodes=ir.getNamedNodes=ir.getTermsOfType=ir.uniqTerms=ir.TERM_TYPES=void 0;const u=tr();ir.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function n(s){const d={};return s.filter(l=>{const f=(0,u.termToString)(l);return!(f in d)&&(d[f]=!0)})}ir.uniqTerms=n;function o(s,d){return s.filter(l=>l.termType===d)}ir.getTermsOfType=o;function i(s){return o(s,"NamedNode")}ir.getNamedNodes=i;function t(s){return o(s,"BlankNode")}ir.getBlankNodes=t;function e(s){return o(s,"Literal")}ir.getLiterals=e;function r(s){return o(s,"Variable")}ir.getVariables=r;function a(s){return o(s,"DefaultGraph")}ir.getDefaultGraphs=a;function c(s){return o(s,"Quad")}return ir.getQuads=c,ir}var m8;function gn(){return m8||(m8=1,(function(u){var n=Na&&Na.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Na&&Na.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(pz(),u),o(wW(),u)})(Na)),Na}var v8;function AO(){if(v8)return of;v8=1;var u=of&&of.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(of,"__esModule",{value:!0});const n=Ov(),o=u(Fw()),i=gn();class t{static flatten(r){return Array.prototype.concat(...r).filter(a=>a)}static objectify(r){if(r.termType){if(r.termType==="Quad")return{type:"pattern",termType:"Quad",subject:t.objectify(r.subject),predicate:t.objectify(r.predicate),object:t.objectify(r.object),graph:t.objectify(r.graph)};{let a={termType:r.termType,value:r.value};return r.language&&(a.language=r.language),r.datatype&&(a.datatype=t.objectify(r.datatype)),a}}if(Array.isArray(r))return r.map(a=>t.objectify(a));if(r===Object(r)){let a={};for(let c of Object.keys(r))a[c]=t.objectify(r[c]);return a}return r}static inScopeVariables(r){const a=[];function c(d){a.find(l=>d.value===l.value)||a.push(d)}function s(d){d.subject.termType==="Variable"&&c(d.subject),d.predicate.termType==="Variable"&&c(d.predicate),d.object.termType==="Variable"&&c(d.object),d.graph.termType==="Variable"&&c(d.graph),d.subject.termType==="Quad"&&s(d.subject),d.predicate.termType==="Quad"&&s(d.predicate),d.object.termType==="Quad"&&s(d.object),d.graph.termType==="Quad"&&s(d.graph)}return t.recurseOperation(r,{[n.types.EXPRESSION]:d=>(d.expressionType===n.expressionTypes.AGGREGATE&&d.variable&&c(d.variable),!0),[n.types.EXTEND]:d=>(c(d.variable),!0),[n.types.GRAPH]:d=>(d.name.termType==="Variable"&&c(d.name),!0),[n.types.GROUP]:d=>(d.variables.forEach(c),!0),[n.types.PATH]:d=>(d.subject.termType==="Variable"&&c(d.subject),d.object.termType==="Variable"&&c(d.object),d.graph.termType==="Variable"&&c(d.graph),d.subject.termType==="Quad"&&s(d.subject),d.object.termType==="Quad"&&s(d.object),d.graph.termType==="Quad"&&s(d.graph),!0),[n.types.PATTERN]:d=>(s(d),!0),[n.types.PROJECT]:d=>(d.variables.forEach(c),!1),[n.types.SERVICE]:d=>(d.name.termType==="Variable"&&c(d.name),!0),[n.types.VALUES]:d=>(d.variables.forEach(c),!0)}),a}static recurseOperation(r,a){let c=r,s=!0;const d=a[r.type];if(d&&(s=d(r)),!s)return;let l=f=>t.recurseOperation(f,a);switch(c.type){case n.types.ALT:c.input.map(l);break;case n.types.ASK:l(c.input);break;case n.types.BGP:c.patterns.forEach(l);break;case n.types.CONSTRUCT:l(c.input),c.template.map(l);break;case n.types.DESCRIBE:l(c.input);break;case n.types.DISTINCT:l(c.input);break;case n.types.EXPRESSION:c.expressionType===n.expressionTypes.EXISTENCE&&l(c.input);break;case n.types.EXTEND:l(c.input),l(c.expression);break;case n.types.FILTER:l(c.input),l(c.expression);break;case n.types.FROM:l(c.input);break;case n.types.GRAPH:l(c.input);break;case n.types.GROUP:l(c.input),c.aggregates.forEach(l);break;case n.types.INV:l(c.path);break;case n.types.JOIN:c.input.map(l);break;case n.types.LEFT_JOIN:c.input.map(l),c.expression&&l(c.expression);break;case n.types.LINK:break;case n.types.MINUS:c.input.map(l);break;case n.types.NOP:break;case n.types.NPS:break;case n.types.ONE_OR_MORE_PATH:l(c.path);break;case n.types.ORDER_BY:l(c.input),c.expressions.forEach(l);break;case n.types.PATH:l(c.predicate);break;case n.types.PATTERN:break;case n.types.PROJECT:l(c.input);break;case n.types.REDUCED:l(c.input);break;case n.types.SEQ:c.input.map(l);break;case n.types.SERVICE:l(c.input);break;case n.types.SLICE:l(c.input);break;case n.types.UNION:c.input.map(l);break;case n.types.VALUES:break;case n.types.ZERO_OR_MORE_PATH:l(c.path);break;case n.types.ZERO_OR_ONE_PATH:l(c.path);break;case n.types.COMPOSITE_UPDATE:c.updates.forEach(f=>l(f));break;case n.types.DELETE_INSERT:c.delete&&c.delete.forEach(f=>l(f)),c.insert&&c.insert.forEach(f=>l(f)),c.where&&l(c.where);break;case n.types.LOAD:break;case n.types.CLEAR:break;case n.types.CREATE:break;case n.types.DROP:break;case n.types.ADD:break;case n.types.MOVE:break;case n.types.COPY:break;default:throw new Error(`Unknown Operation type ${c.type}`)}}static mapOperation(r,a,c){let s=r,d=!0,l=!0;c=c||new o.default;const f=a[r.type];if(f){const y=f(r,c);s=y.result,d=y.recurse,l=y.copyMetadata!==!1}let h;if(l&&(s.metadata||r.metadata)&&(h={...s.metadata,...r.metadata}),!d)return h&&(s.metadata=h),s;let p=y=>t.mapOperation(y,a,c);switch(s.type){case n.types.ALT:s=c.createAlt(s.input.map(p));break;case n.types.ASK:s=c.createAsk(p(s.input));break;case n.types.BGP:s=c.createBgp(s.patterns.map(p));break;case n.types.CONSTRUCT:s=c.createConstruct(p(s.input),s.template.map(p));break;case n.types.DESCRIBE:s=c.createDescribe(p(s.input),s.terms);break;case n.types.DISTINCT:s=c.createDistinct(p(s.input));break;case n.types.EXPRESSION:s=t.mapExpression(s,a,c);break;case n.types.EXTEND:s=c.createExtend(p(s.input),s.variable,p(s.expression));break;case n.types.FILTER:s=c.createFilter(p(s.input),p(s.expression));break;case n.types.FROM:s=c.createFrom(p(s.input),[...s.default],[...s.named]);break;case n.types.GRAPH:s=c.createGraph(p(s.input),s.name);break;case n.types.GROUP:s=c.createGroup(p(s.input),[].concat(s.variables),s.aggregates.map(p));break;case n.types.INV:s=c.createInv(p(s.path));break;case n.types.JOIN:s=c.createJoin(s.input.map(p));break;case n.types.LEFT_JOIN:s=c.createLeftJoin(p(s.input[0]),p(s.input[1]),s.expression?p(s.expression):void 0);break;case n.types.LINK:s=c.createLink(s.iri);break;case n.types.MINUS:s=c.createMinus(p(s.input[0]),p(s.input[1]));break;case n.types.NOP:s=c.createNop();break;case n.types.NPS:s=c.createNps([].concat(s.iris));break;case n.types.ONE_OR_MORE_PATH:s=c.createOneOrMorePath(p(s.path));break;case n.types.ORDER_BY:s=c.createOrderBy(p(s.input),s.expressions.map(p));break;case n.types.PATH:s=c.createPath(s.subject,p(s.predicate),s.object,s.graph);break;case n.types.PATTERN:s=c.createPattern(s.subject,s.predicate,s.object,s.graph);break;case n.types.PROJECT:s=c.createProject(p(s.input),[...s.variables]);break;case n.types.REDUCED:s=c.createReduced(p(s.input));break;case n.types.SEQ:s=c.createSeq(s.input.map(p));break;case n.types.SERVICE:s=c.createService(p(s.input),s.name,s.silent);break;case n.types.SLICE:s=c.createSlice(p(s.input),s.start,s.length);break;case n.types.UNION:s=c.createUnion(s.input.map(p));break;case n.types.VALUES:s=c.createValues([].concat(s.variables),s.bindings.map(y=>Object.assign({},y)));break;case n.types.ZERO_OR_MORE_PATH:s=c.createZeroOrMorePath(p(s.path));break;case n.types.ZERO_OR_ONE_PATH:s=c.createZeroOrOnePath(p(s.path));break;case n.types.COMPOSITE_UPDATE:s=c.createCompositeUpdate(s.updates.map(p));break;case n.types.DELETE_INSERT:s=c.createDeleteInsert(s.delete?s.delete.map(p):void 0,s.insert?s.insert.map(p):void 0,s.where?p(s.where):void 0);break;case n.types.LOAD:s=c.createLoad(s.source,s.destination,s.silent);break;case n.types.CLEAR:s=c.createClear(s.source,s.silent);break;case n.types.CREATE:s=c.createCreate(s.source,s.silent);break;case n.types.DROP:s=c.createDrop(s.source,s.silent);break;case n.types.ADD:s=c.createAdd(s.source,s.destination);break;case n.types.MOVE:s=c.createMove(s.source,s.destination);break;case n.types.COPY:s=c.createCopy(s.source,s.destination);break;default:throw new Error(`Unknown Operation type ${s.type}`)}return h&&(s.metadata=h),s}static mapExpression(r,a,c){let s=r,d=!0;c=c||new o.default;const l=a[r.expressionType];if(l&&({result:s,recurse:d}=l(r,c)),!d)return s;let f=h=>t.mapOperation(h,a,c);switch(r.expressionType){case n.expressionTypes.AGGREGATE:return r.variable?c.createBoundAggregate(r.variable,r.aggregator,f(r.expression),r.distinct,r.separator):c.createAggregateExpression(r.aggregator,f(r.expression),r.distinct,r.separator);case n.expressionTypes.EXISTENCE:return c.createExistenceExpression(r.not,f(r.input));case n.expressionTypes.NAMED:return c.createNamedExpression(r.name,r.args.map(f));case n.expressionTypes.OPERATOR:return c.createOperatorExpression(r.operator,r.args.map(f));case n.expressionTypes.TERM:return c.createTermExpression(r.term);case n.expressionTypes.WILDCARD:return c.createWildcardExpression();default:throw new Error(`Unknown Expression type ${r.expressionType}`)}}static cloneOperation(r){return t.mapOperation(r,{})}static cloneExpression(r){return t.mapExpression(r,{})}static createUniqueVariable(r,a,c){let s=0,d=r;for(;a[d];)d=`${r}${s++}`;return c.variable(d)}static isSimpleTerm(r){return r.termType!==void 0&&r.termType!=="Quad"&&r.termType!=="Wildcard"}static isQuad(r){return r.termType==="Quad"}static hasQuadVariables(r){return(0,i.someTermsNested)(r,a=>a.termType==="Variable")}static isWildcard(r){return r.termType==="Wildcard"}}return of.default=t,of}var T8;function SW(){if(T8)return cn;T8=1;var u=cn&&cn.__createBinding||(Object.create?(function(P,D,x,N){N===void 0&&(N=x);var $=Object.getOwnPropertyDescriptor(D,x);(!$||("get"in $?!D.__esModule:$.writable||$.configurable))&&($={enumerable:!0,get:function(){return D[x]}}),Object.defineProperty(P,N,$)}):(function(P,D,x,N){N===void 0&&(N=x),P[N]=D[x]})),n=cn&&cn.__setModuleDefault||(Object.create?(function(P,D){Object.defineProperty(P,"default",{enumerable:!0,value:D})}):function(P,D){P.default=D}),o=cn&&cn.__importStar||function(P){if(P&&P.__esModule)return P;var D={};if(P!=null)for(var x in P)x!=="default"&&Object.prototype.hasOwnProperty.call(P,x)&&u(D,P,x);return n(D,P),D},i=cn&&cn.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(cn,"__esModule",{value:!0});const t=mW(),e=tr(),r=o(Ov()),a=i(Fw()),c=i(AO()),s=Ev().Parser,d=r.types;let l=new Set,f=0,h=!1,p;function y(P,D){D=D||{},p=new a.default(D.dataFactory);let x;if(b(P)){let N=new s(D);N._resetBlanks(),x=N.parse(P)}else x=P;return _(x,D.quads,D.blankToVariable)}cn.default=y;function _(P,D,x){if(l=new Set,f=0,h=!!D,!P.type)return p.createNop();if(P.type!=="query"&&P.type!=="update")throw new Error("Translate only works on complete query or update objects.");let N;if(v(P),P.type==="query"){const $={type:"group",patterns:P.where||[]};N=I($),N=U(P,N)}else P.type==="update"&&(N=he(P));return x&&(N=Q(N)),N}function b(P){return typeof P=="string"}function m(P){return!!(P!=null&&P.termType)}function g(P){return P.subject&&P.predicate&&P.object}function T(P){return(P==null?void 0:P.termType)==="Variable"}function v(P){if(m(P))T(P)&&l.add(`?${P.value}`);else if(Array.isArray(P))for(const D of P)v(D);else if(P&&typeof P=="object")for(let D of Object.keys(P))D.startsWith("?")?l.add(D):D.startsWith("$")&&l.add(`?${D.slice(1)}`),v(P[D])}function A(P){let D={};if(g(P)){const x=[A(P.subject),A(P.predicate),A(P.object),P.graph?A(P.graph):{}];Object.assign(D,...x)}else if(m(P))T(P)&&(D[P.value]=P);else if(P.type==="bgp"){const x=P.triples;Object.assign(D,...x.map(A))}else if(P.type==="path")Object.assign(D,...P.items.map(A));else if(P.type==="group"||P.type==="union"||P.type==="optional")Object.assign(D,...P.patterns.map(A));else if(P.type==="service"||P.type==="graph")Object.assign(D,A(P.name)),Object.assign(D,...P.patterns.map(A));else if(P.type==="bind")Object.assign(D,A(P.variable));else if(P.type==="values"){if(P.values.length>0){const x=Object.keys(P.values[0]).map(N=>p.createTerm(N));Object.assign(D,...x.map(A))}}else if(P.type==="query"&&(P.queryType==="SELECT"||P.queryType==="DESCRIBE")){P.where&&P.variables.some(c.default.isWildcard)&&Object.assign(D,...P.where.map(A));for(const x of P.variables)T(x)?Object.assign(D,A(x)):x.variable&&Object.assign(D,A(x.variable));if(P.queryType==="SELECT"){if(P.group)for(const x of P.group)x.variable&&Object.assign(D,A(x.variable));if(P.values){const x={type:"values",values:P.values};Object.assign(D,A(x))}}}return D}function I(P){if(P.type==="bgp")return O(P);if(P.type==="union")return p.createUnion(P.patterns.map(D=>(D.type!=="group"&&(D={type:"group",patterns:[D]}),I(D))));if(P.type==="graph"){const D={type:"group",patterns:P.patterns};let x=I(D);return h?x=B(x,P.name):x=p.createGraph(x,P.name),x}if(P.type==="values")return ie(P);if(P.type==="query")return _(P,h,!1);if(P.type==="group"){let D=[],x=[];for(let G of P.patterns)(G.type==="filter"?D:x).push(G);let N=x.reduce(X,p.createBgp([])),$=D.map(G=>q(G.expression));return $.length>0&&(N=p.createFilter(N,$.reduce((G,V)=>p.createOperatorExpression("&&",[G,V])))),N}throw new Error(`Unexpected type: ${P.type}`)}function q(P){if(c.default.isSimpleTerm(P))return p.createTermExpression(P);if(c.default.isQuad(P))return c.default.hasQuadVariables(P)?p.createOperatorExpression("triple",[q(P.subject),q(P.predicate),q(P.object)]):p.createTermExpression(P);if(c.default.isWildcard(P))return p.createWildcardExpression();if("aggregation"in P)return p.createAggregateExpression(P.aggregation,q(P.expression),!!P.distinct,P.separator);if("function"in P)return p.createNamedExpression(P.function,P.args.map(q));if("operator"in P)return P.operator==="exists"||P.operator==="notexists"?p.createExistenceExpression(P.operator==="notexists",I(P.args[0])):((P.operator==="in"||P.operator==="notin")&&(P.args=[P.args[0]].concat(P.args[1])),p.createOperatorExpression(P.operator,P.args.map(q)));throw new Error(`Unknown expression: ${JSON.stringify(P)}`)}function O(P){let D=[],x=[];for(let N of P.triples)if("pathType"in N.predicate){let $=w(N);for(let G of $)G.type===d.PATH?(D.length>0&&x.push(p.createBgp(D)),D=[],x.push(G)):D.push(G)}else D.push(L(N));return D.length>0&&x.push(p.createBgp(D)),x.length===1?x[0]:p.createJoin(x)}function w(P){let D=P.subject,x=S(P.predicate),N=P.object;return E(D,x,N)}function S(P){if(c.default.isSimpleTerm(P)){if(P.termType==="NamedNode")return p.createLink(P);throw new Error(`Path predicate should be a NamedNode, got ${JSON.stringify(P)}`)}if(P.pathType==="^")return p.createInv(S(P.items[0]));if(P.pathType==="!"){let D=[],x=[],N;"pathType"in P.items[0]&&P.items[0].pathType==="|"?N=P.items[0].items:N=P.items;for(let V of N)if(c.default.isSimpleTerm(V))D.push(V);else if(V.pathType==="^")x.push(V.items[0]);else throw new Error(`Unexpected item: ${JSON.stringify(V)}`);let $=p.createNps(D),G=p.createInv(p.createNps(x));return x.length===0?$:D.length===0?G:p.createAlt([$,G])}if(P.pathType==="/")return p.createSeq(P.items.map(S));if(P.pathType==="|")return p.createAlt(P.items.map(S));if(P.pathType==="*")return p.createZeroOrMorePath(S(P.items[0]));if(P.pathType==="+")return p.createOneOrMorePath(S(P.items[0]));if(P.pathType==="?")return p.createZeroOrOnePath(S(P.items[0]));throw new Error(`Unable to translate path expression ${JSON.stringify(P)}`)}function E(P,D,x){if(D.type===d.LINK)return[p.createPattern(P,D.iri,x)];if(D.type===d.INV)return E(x,D.path,P);if(D.type===d.SEQ){let N=P;return c.default.flatten(D.input.map(($,G)=>{const V=G===D.input.length-1?x:R(),k=E(N,$,V);return V.termType==="Variable"&&(N=V),k}))}return[p.createPath(P,D,x)]}function R(){let P=`?var${f++}`;return l.has(P)?R():(l.add(P),p.createTerm(P))}function L(P){if("pathType"in P.predicate)throw new Error("Trying to translate property path to quad.");return p.createPattern(P.subject,P.predicate,P.object,P.graph)}let M=Object.values(d);function B(P,D,x){if(P.type===d.GRAPH){if(x)throw new Error("Recursing through nested GRAPH statements with a replacement is impossible.");P=B(P.input,P.name)}else if(P.type!==d.SERVICE)if(P.type===d.BGP)P.patterns=P.patterns.map(N=>(x&&(N.subject.equals(D)&&(N.subject=x),N.predicate.equals(D)&&(N.predicate=x),N.object.equals(D)&&(N.object=x)),N.graph.termType==="DefaultGraph"&&(N.graph=D),N));else if(P.type===d.PATH)x&&(P.subject.equals(D)&&(P.subject=x),P.object.equals(D)&&(P.object=x)),P.graph.termType==="DefaultGraph"&&(P.graph=D);else if(P.type===d.PROJECT&&!x)P.variables.some(N=>N.equals(D))||(x=R()),P.input=B(P.input,D,x);else if(P.type===d.EXTEND&&!x)P.variable.equals(D)&&(x=R()),P.input=B(P.input,D,x);else for(let N of Object.keys(P))Array.isArray(P[N])?P[N]=P[N].map($=>B($,D,x)):M.indexOf(P[N].type)>=0?P[N]=B(P[N],D,x):x&&T(P[N])&&P[N].equals(D)&&(P[N]=x);return P}function X(P,D){if(D.type==="optional"){const x=I({type:"group",patterns:D.patterns});x.type===d.FILTER?P=p.createLeftJoin(P,x.input,x.expression):P=p.createLeftJoin(P,x)}else if(D.type==="minus"){const x=I({type:"group",patterns:D.patterns});P=p.createMinus(P,x)}else if(D.type==="bind")P=p.createExtend(P,D.variable,q(D.expression));else if(D.type==="service"){const x={type:"group",patterns:D.patterns},N=p.createService(I(x),D.name,D.silent);P=J(P,N)}else{const x=I(D);P=J(P,x)}return P}function J(P,D){return P.type===d.BGP&&D.type===d.BGP?P=p.createBgp([...P.patterns,...D.patterns]):P.type===d.BGP&&P.patterns.length===0?P=D:D.type===d.BGP&&D.patterns.length===0||(P=p.createJoin([P,D])),P}function ie(P){let D=(P.values.length===0?[]:Object.keys(P.values[0])).map(p.createTerm.bind(p)),x=P.values.map(N=>{let $=Object.keys(N);$=$.filter(V=>N[V]!==void 0);let G={};for(let V of $)G[V]=N[V];return G});return p.createValues(D,x)}function U(P,D){const x=P,N=[],$={};if(x.variables=x.variables&&x.variables.map(V=>fe(V,$)),x.having=x.having&&x.having.map(V=>fe(V,$)),x.order=x.order&&x.order.map(V=>fe(V,$)),x.group||Object.keys($).length>0){const V=Object.keys($).map(H=>me($[H],p.createTerm(H))),k=[];if(x.group)for(const H of x.group)if(c.default.isSimpleTerm(H.expression))k.push(H.expression);else{const Y="variable"in H?H.variable:R();D=p.createExtend(D,Y,q(H.expression)),k.push(Y)}D=p.createGroup(D,k,V)}if(x.having)for(let V of x.having)D=p.createFilter(D,q(V));P.values&&(D=p.createJoin([D,ie(P)]));let G=[];if(P.queryType==="SELECT"||P.queryType==="DESCRIBE")if(P.variables.some(V=>V&&c.default.isWildcard(V)))G=Object.values(A(P)).sort((V,k)=>V.value.localeCompare(k.value));else for(let V of P.variables)T(V)||!("variable"in V)?G.push(V):V.variable&&(G.push(V.variable),N.push(V));for(let V of N)D=p.createExtend(D,V.variable,q(V.expression));return x.order&&(D=p.createOrderBy(D,x.order.map(V=>{let k=q(V.expression);return V.descending&&(k=p.createOperatorExpression("desc",[k])),k}))),P.queryType==="SELECT"&&(D=p.createProject(D,G)),x.distinct&&(D=p.createDistinct(D)),x.reduced&&(D=p.createReduced(D)),P.queryType==="CONSTRUCT"?D=p.createConstruct(D,(P.template||[]).map(L)):P.queryType==="ASK"?D=p.createAsk(D):P.queryType==="DESCRIBE"&&(D=p.createDescribe(D,G)),(x.offset||x.limit)&&(D=p.createSlice(D,x.offset||0,x.limit)),x.from&&(D=p.createFrom(D,x.from.default,x.from.named)),D}function fe(P,D){if("type"in P&&P.type==="aggregate"){let x=!1,N;for(let $ of Object.keys(D))if(t(D[$],P)){N=p.createTerm($),x=!0;break}return x||(N=R(),D[(0,e.termToString)(N)]=P),N}return"expression"in P&&P.expression?{...P,expression:fe(P.expression,D)}:"args"in P&&P.args?{...P,args:P.args.map(x=>fe(x,D))}:P}function me(P,D){if(P.type!=="aggregate"||!P.aggregation)throw new Error(`Unexpected input: ${JSON.stringify(P)}`);const x=q(P);return x.variable=D,x}function he(P){return P.updates.length===1?te(P.updates[0]):p.createCompositeUpdate(P.updates.map(te))}function te(P){if("type"in P){if(P.type==="load")return pe(P);if(P.type==="clear"||P.type==="create"||P.type==="drop")return Fe(P);if(P.type==="add"||P.type==="copy"||P.type==="move")return ye(P)}else if(P.updateType==="insertdelete"||P.updateType==="deletewhere"||P.updateType==="delete"||P.updateType==="insert")return xe(P);throw new Error(`Unknown update type ${JSON.stringify(P)}`)}function xe(P){if(!h)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");let D=[],x=[],N;if(P.delete&&(D=c.default.flatten(P.delete.map($=>Ie($,P.graph)))),P.insert&&(x=c.default.flatten(P.insert.map($=>Ie($,P.graph)))),P.where&&P.where.length>0){N=I({type:"group",patterns:P.where});const $=P.using;$?N=p.createFrom(N,$.default,$.named):P.graph&&(N=B(N,P.graph))}else P.updateType==="deletewhere"&&D.length>0&&(N=p.createBgp(D));return p.createDeleteInsert(D.length>0?D:void 0,x.length>0?x:void 0,N)}function Ie(P,D){let x=D;P.type==="graph"&&(x=P.name);let N=P.triples;return x&&(N=N.map($=>Object.assign($,{graph:x}))),N.map(L)}function Fe(P){let D;switch(c.default.isSimpleTerm(P.graph)?D=P.graph:P.graph.all?D="ALL":P.graph.default?D="DEFAULT":P.graph.named?D="NAMED":D=P.graph.name,P.type){case"clear":return p.createClear(D,P.silent);case"create":return p.createCreate(D,P.silent);case"drop":return p.createDrop(D,P.silent)}}function pe(P){return p.createLoad(P.source,P.destination,P.silent)}function ye(P){const D=P.source.default?"DEFAULT":P.source.name,x=P.destination.default?"DEFAULT":P.destination.name;switch(P.type){case"copy":return p.createCopy(D,x,P.silent);case"move":return p.createMove(D,x,P.silent);case"add":return p.createAdd(D,x,P.silent)}}function Q(P){const D={},x=Array.from(l).reduce(($,G)=>($[G]=!0,$),{});return c.default.mapOperation(P,{[r.types.DELETE_INSERT]:$=>({result:p.createDeleteInsert($.delete,$.insert,$.where&&Q($.where)),recurse:!1}),[r.types.PATH]:($,G)=>({result:G.createPath(N($.subject),$.predicate,N($.object),N($.graph)),recurse:!1}),[r.types.PATTERN]:($,G)=>({result:G.createPattern(N($.subject),N($.predicate),N($.object),N($.graph)),recurse:!1}),[r.types.CONSTRUCT]:$=>({result:p.createConstruct(Q($.input),$.template),recurse:!1})});function N($){if($.termType==="BlankNode"){let G=D[$.value];return G||(G=c.default.createUniqueVariable($.value,x,p.dataFactory),x[G.value]=!0,D[$.value]=G),G}return $}}return cn}var Mr={},Pa={},At={},rS={},jt={},nS,w8;function xv(){if(w8)return nS;w8=1,nS=u;function u(n,o){if(!n)throw new Error(o||"Assertion failed")}return u.equal=function(o,i,t){if(o!=i)throw new Error(t||"Assertion failed: "+o+" != "+i)},nS}var cT={exports:{}},S8;function AW(){return S8||(S8=1,typeof Object.create=="function"?cT.exports=function(n,o){o&&(n.super_=o,n.prototype=Object.create(o.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}))}:cT.exports=function(n,o){if(o){n.super_=o;var i=function(){};i.prototype=o.prototype,n.prototype=new i,n.prototype.constructor=n}}),cT.exports}var A8;function ei(){if(A8)return jt;A8=1;var u=xv(),n=AW();jt.inherits=n;function o(E,R){return(E.charCodeAt(R)&64512)!==55296||R<0||R+1>=E.length?!1:(E.charCodeAt(R+1)&64512)===56320}function i(E,R){if(Array.isArray(E))return E.slice();if(!E)return[];var L=[];if(typeof E=="string")if(R){if(R==="hex")for(E=E.replace(/[^a-z0-9]+/ig,""),E.length%2!==0&&(E="0"+E),B=0;B<E.length;B+=2)L.push(parseInt(E[B]+E[B+1],16))}else for(var M=0,B=0;B<E.length;B++){var X=E.charCodeAt(B);X<128?L[M++]=X:X<2048?(L[M++]=X>>6|192,L[M++]=X&63|128):o(E,B)?(X=65536+((X&1023)<<10)+(E.charCodeAt(++B)&1023),L[M++]=X>>18|240,L[M++]=X>>12&63|128,L[M++]=X>>6&63|128,L[M++]=X&63|128):(L[M++]=X>>12|224,L[M++]=X>>6&63|128,L[M++]=X&63|128)}else for(B=0;B<E.length;B++)L[B]=E[B]|0;return L}jt.toArray=i;function t(E){for(var R="",L=0;L<E.length;L++)R+=a(E[L].toString(16));return R}jt.toHex=t;function e(E){var R=E>>>24|E>>>8&65280|E<<8&16711680|(E&255)<<24;return R>>>0}jt.htonl=e;function r(E,R){for(var L="",M=0;M<E.length;M++){var B=E[M];R==="little"&&(B=e(B)),L+=c(B.toString(16))}return L}jt.toHex32=r;function a(E){return E.length===1?"0"+E:E}jt.zero2=a;function c(E){return E.length===7?"0"+E:E.length===6?"00"+E:E.length===5?"000"+E:E.length===4?"0000"+E:E.length===3?"00000"+E:E.length===2?"000000"+E:E.length===1?"0000000"+E:E}jt.zero8=c;function s(E,R,L,M){var B=L-R;u(B%4===0);for(var X=new Array(B/4),J=0,ie=R;J<X.length;J++,ie+=4){var U;M==="big"?U=E[ie]<<24|E[ie+1]<<16|E[ie+2]<<8|E[ie+3]:U=E[ie+3]<<24|E[ie+2]<<16|E[ie+1]<<8|E[ie],X[J]=U>>>0}return X}jt.join32=s;function d(E,R){for(var L=new Array(E.length*4),M=0,B=0;M<E.length;M++,B+=4){var X=E[M];R==="big"?(L[B]=X>>>24,L[B+1]=X>>>16&255,L[B+2]=X>>>8&255,L[B+3]=X&255):(L[B+3]=X>>>24,L[B+2]=X>>>16&255,L[B+1]=X>>>8&255,L[B]=X&255)}return L}jt.split32=d;function l(E,R){return E>>>R|E<<32-R}jt.rotr32=l;function f(E,R){return E<<R|E>>>32-R}jt.rotl32=f;function h(E,R){return E+R>>>0}jt.sum32=h;function p(E,R,L){return E+R+L>>>0}jt.sum32_3=p;function y(E,R,L,M){return E+R+L+M>>>0}jt.sum32_4=y;function _(E,R,L,M,B){return E+R+L+M+B>>>0}jt.sum32_5=_;function b(E,R,L,M){var B=E[R],X=E[R+1],J=M+X>>>0,ie=(J<M?1:0)+L+B;E[R]=ie>>>0,E[R+1]=J}jt.sum64=b;function m(E,R,L,M){var B=R+M>>>0,X=(B<R?1:0)+E+L;return X>>>0}jt.sum64_hi=m;function g(E,R,L,M){var B=R+M;return B>>>0}jt.sum64_lo=g;function T(E,R,L,M,B,X,J,ie){var U=0,fe=R;fe=fe+M>>>0,U+=fe<R?1:0,fe=fe+X>>>0,U+=fe<X?1:0,fe=fe+ie>>>0,U+=fe<ie?1:0;var me=E+L+B+J+U;return me>>>0}jt.sum64_4_hi=T;function v(E,R,L,M,B,X,J,ie){var U=R+M+X+ie;return U>>>0}jt.sum64_4_lo=v;function A(E,R,L,M,B,X,J,ie,U,fe){var me=0,he=R;he=he+M>>>0,me+=he<R?1:0,he=he+X>>>0,me+=he<X?1:0,he=he+ie>>>0,me+=he<ie?1:0,he=he+fe>>>0,me+=he<fe?1:0;var te=E+L+B+J+U+me;return te>>>0}jt.sum64_5_hi=A;function I(E,R,L,M,B,X,J,ie,U,fe){var me=R+M+X+ie+fe;return me>>>0}jt.sum64_5_lo=I;function q(E,R,L){var M=R<<32-L|E>>>L;return M>>>0}jt.rotr64_hi=q;function O(E,R,L){var M=E<<32-L|R>>>L;return M>>>0}jt.rotr64_lo=O;function w(E,R,L){return E>>>L}jt.shr64_hi=w;function S(E,R,L){var M=E<<32-L|R>>>L;return M>>>0}return jt.shr64_lo=S,jt}var iS={},O8;function Iv(){if(O8)return iS;O8=1;var u=ei(),n=xv();function o(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return iS.BlockHash=o,o.prototype.update=function(t,e){if(t=u.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){t=this.pending;var r=t.length%this._delta8;this.pending=t.slice(t.length-r,t.length),this.pending.length===0&&(this.pending=null),t=u.join32(t,0,t.length-r,this.endian);for(var a=0;a<t.length;a+=this._delta32)this._update(t,a,a+this._delta32)}return this},o.prototype.digest=function(t){return this.update(this._pad()),n(this.pending===null),this._digest(t)},o.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,r=e-(t+this.padLength)%e,a=new Array(r+this.padLength);a[0]=128;for(var c=1;c<r;c++)a[c]=0;if(t<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)a[c++]=0;a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=t>>>24&255,a[c++]=t>>>16&255,a[c++]=t>>>8&255,a[c++]=t&255}else for(a[c++]=t&255,a[c++]=t>>>8&255,a[c++]=t>>>16&255,a[c++]=t>>>24&255,a[c++]=0,a[c++]=0,a[c++]=0,a[c++]=0,s=8;s<this.padLength;s++)a[c++]=0;return a},iS}var Da={},Jn={},E8;function bz(){if(E8)return Jn;E8=1;var u=ei(),n=u.rotr32;function o(d,l,f,h){if(d===0)return i(l,f,h);if(d===1||d===3)return e(l,f,h);if(d===2)return t(l,f,h)}Jn.ft_1=o;function i(d,l,f){return d&l^~d&f}Jn.ch32=i;function t(d,l,f){return d&l^d&f^l&f}Jn.maj32=t;function e(d,l,f){return d^l^f}Jn.p32=e;function r(d){return n(d,2)^n(d,13)^n(d,22)}Jn.s0_256=r;function a(d){return n(d,6)^n(d,11)^n(d,25)}Jn.s1_256=a;function c(d){return n(d,7)^n(d,18)^d>>>3}Jn.g0_256=c;function s(d){return n(d,17)^n(d,19)^d>>>10}return Jn.g1_256=s,Jn}var aS,x8;function OW(){if(x8)return aS;x8=1;var u=ei(),n=Iv(),o=bz(),i=u.rotl32,t=u.sum32,e=u.sum32_5,r=o.ft_1,a=n.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function s(){if(!(this instanceof s))return new s;a.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return u.inherits(s,a),aS=s,s.blockSize=512,s.outSize=160,s.hmacStrength=80,s.padLength=64,s.prototype._update=function(l,f){for(var h=this.W,p=0;p<16;p++)h[p]=l[f+p];for(;p<h.length;p++)h[p]=i(h[p-3]^h[p-8]^h[p-14]^h[p-16],1);var y=this.h[0],_=this.h[1],b=this.h[2],m=this.h[3],g=this.h[4];for(p=0;p<h.length;p++){var T=~~(p/20),v=e(i(y,5),r(T,_,b,m),g,h[p],c[T]);g=m,m=b,b=i(_,30),_=y,y=v}this.h[0]=t(this.h[0],y),this.h[1]=t(this.h[1],_),this.h[2]=t(this.h[2],b),this.h[3]=t(this.h[3],m),this.h[4]=t(this.h[4],g)},s.prototype._digest=function(l){return l==="hex"?u.toHex32(this.h,"big"):u.split32(this.h,"big")},aS}var uS,I8;function yz(){if(I8)return uS;I8=1;var u=ei(),n=Iv(),o=bz(),i=xv(),t=u.sum32,e=u.sum32_4,r=u.sum32_5,a=o.ch32,c=o.maj32,s=o.s0_256,d=o.s1_256,l=o.g0_256,f=o.g1_256,h=n.BlockHash,p=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;h.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=p,this.W=new Array(64)}return u.inherits(y,h),uS=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(b,m){for(var g=this.W,T=0;T<16;T++)g[T]=b[m+T];for(;T<g.length;T++)g[T]=e(f(g[T-2]),g[T-7],l(g[T-15]),g[T-16]);var v=this.h[0],A=this.h[1],I=this.h[2],q=this.h[3],O=this.h[4],w=this.h[5],S=this.h[6],E=this.h[7];for(i(this.k.length===g.length),T=0;T<g.length;T++){var R=r(E,d(O),a(O,w,S),this.k[T],g[T]),L=t(s(v),c(v,A,I));E=S,S=w,w=O,O=t(q,R),q=I,I=A,A=v,v=t(R,L)}this.h[0]=t(this.h[0],v),this.h[1]=t(this.h[1],A),this.h[2]=t(this.h[2],I),this.h[3]=t(this.h[3],q),this.h[4]=t(this.h[4],O),this.h[5]=t(this.h[5],w),this.h[6]=t(this.h[6],S),this.h[7]=t(this.h[7],E)},y.prototype._digest=function(b){return b==="hex"?u.toHex32(this.h,"big"):u.split32(this.h,"big")},uS}var oS,R8;function EW(){if(R8)return oS;R8=1;var u=ei(),n=yz();function o(){if(!(this instanceof o))return new o;n.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return u.inherits(o,n),oS=o,o.blockSize=512,o.outSize=224,o.hmacStrength=192,o.padLength=64,o.prototype._digest=function(t){return t==="hex"?u.toHex32(this.h.slice(0,7),"big"):u.split32(this.h.slice(0,7),"big")},oS}var sS,F8;function _z(){if(F8)return sS;F8=1;var u=ei(),n=Iv(),o=xv(),i=u.rotr64_hi,t=u.rotr64_lo,e=u.shr64_hi,r=u.shr64_lo,a=u.sum64,c=u.sum64_hi,s=u.sum64_lo,d=u.sum64_4_hi,l=u.sum64_4_lo,f=u.sum64_5_hi,h=u.sum64_5_lo,p=n.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function _(){if(!(this instanceof _))return new _;p.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}u.inherits(_,p),sS=_,_.blockSize=1024,_.outSize=512,_.hmacStrength=192,_.padLength=128,_.prototype._prepareBlock=function(L,M){for(var B=this.W,X=0;X<32;X++)B[X]=L[M+X];for(;X<B.length;X+=2){var J=S(B[X-4],B[X-3]),ie=E(B[X-4],B[X-3]),U=B[X-14],fe=B[X-13],me=O(B[X-30],B[X-29]),he=w(B[X-30],B[X-29]),te=B[X-32],xe=B[X-31];B[X]=d(J,ie,U,fe,me,he,te,xe),B[X+1]=l(J,ie,U,fe,me,he,te,xe)}},_.prototype._update=function(L,M){this._prepareBlock(L,M);var B=this.W,X=this.h[0],J=this.h[1],ie=this.h[2],U=this.h[3],fe=this.h[4],me=this.h[5],he=this.h[6],te=this.h[7],xe=this.h[8],Ie=this.h[9],Fe=this.h[10],pe=this.h[11],ye=this.h[12],Q=this.h[13],P=this.h[14],D=this.h[15];o(this.k.length===B.length);for(var x=0;x<B.length;x+=2){var N=P,$=D,G=I(xe,Ie),V=q(xe,Ie),k=b(xe,Ie,Fe,pe,ye),H=m(xe,Ie,Fe,pe,ye,Q),Y=this.k[x],se=this.k[x+1],ce=B[x],Se=B[x+1],Me=f(N,$,G,V,k,H,Y,se,ce,Se),Ae=h(N,$,G,V,k,H,Y,se,ce,Se);N=v(X,J),$=A(X,J),G=g(X,J,ie,U,fe),V=T(X,J,ie,U,fe,me);var oe=c(N,$,G,V),C=s(N,$,G,V);P=ye,D=Q,ye=Fe,Q=pe,Fe=xe,pe=Ie,xe=c(he,te,Me,Ae),Ie=s(te,te,Me,Ae),he=fe,te=me,fe=ie,me=U,ie=X,U=J,X=c(Me,Ae,oe,C),J=s(Me,Ae,oe,C)}a(this.h,0,X,J),a(this.h,2,ie,U),a(this.h,4,fe,me),a(this.h,6,he,te),a(this.h,8,xe,Ie),a(this.h,10,Fe,pe),a(this.h,12,ye,Q),a(this.h,14,P,D)},_.prototype._digest=function(L){return L==="hex"?u.toHex32(this.h,"big"):u.split32(this.h,"big")};function b(R,L,M,B,X){var J=R&M^~R&X;return J<0&&(J+=4294967296),J}function m(R,L,M,B,X,J){var ie=L&B^~L&J;return ie<0&&(ie+=4294967296),ie}function g(R,L,M,B,X){var J=R&M^R&X^M&X;return J<0&&(J+=4294967296),J}function T(R,L,M,B,X,J){var ie=L&B^L&J^B&J;return ie<0&&(ie+=4294967296),ie}function v(R,L){var M=i(R,L,28),B=i(L,R,2),X=i(L,R,7),J=M^B^X;return J<0&&(J+=4294967296),J}function A(R,L){var M=t(R,L,28),B=t(L,R,2),X=t(L,R,7),J=M^B^X;return J<0&&(J+=4294967296),J}function I(R,L){var M=i(R,L,14),B=i(R,L,18),X=i(L,R,9),J=M^B^X;return J<0&&(J+=4294967296),J}function q(R,L){var M=t(R,L,14),B=t(R,L,18),X=t(L,R,9),J=M^B^X;return J<0&&(J+=4294967296),J}function O(R,L){var M=i(R,L,1),B=i(R,L,8),X=e(R,L,7),J=M^B^X;return J<0&&(J+=4294967296),J}function w(R,L){var M=t(R,L,1),B=t(R,L,8),X=r(R,L,7),J=M^B^X;return J<0&&(J+=4294967296),J}function S(R,L){var M=i(R,L,19),B=i(L,R,29),X=e(R,L,6),J=M^B^X;return J<0&&(J+=4294967296),J}function E(R,L){var M=t(R,L,19),B=t(L,R,29),X=r(R,L,6),J=M^B^X;return J<0&&(J+=4294967296),J}return sS}var cS,N8;function xW(){if(N8)return cS;N8=1;var u=ei(),n=_z();function o(){if(!(this instanceof o))return new o;n.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return u.inherits(o,n),cS=o,o.blockSize=1024,o.outSize=384,o.hmacStrength=192,o.padLength=128,o.prototype._digest=function(t){return t==="hex"?u.toHex32(this.h.slice(0,12),"big"):u.split32(this.h.slice(0,12),"big")},cS}var P8;function IW(){return P8||(P8=1,Da.sha1=OW(),Da.sha224=EW(),Da.sha256=yz(),Da.sha384=xW(),Da.sha512=_z()),Da}var dS={},D8;function RW(){if(D8)return dS;D8=1;var u=ei(),n=Iv(),o=u.rotl32,i=u.sum32,t=u.sum32_3,e=u.sum32_4,r=n.BlockHash;function a(){if(!(this instanceof a))return new a;r.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}u.inherits(a,r),dS.ripemd160=a,a.blockSize=512,a.outSize=160,a.hmacStrength=192,a.padLength=64,a.prototype._update=function(_,b){for(var m=this.h[0],g=this.h[1],T=this.h[2],v=this.h[3],A=this.h[4],I=m,q=g,O=T,w=v,S=A,E=0;E<80;E++){var R=i(o(e(m,c(E,g,T,v),_[l[E]+b],s(E)),h[E]),A);m=A,A=v,v=o(T,10),T=g,g=R,R=i(o(e(I,c(79-E,q,O,w),_[f[E]+b],d(E)),p[E]),S),I=S,S=w,w=o(O,10),O=q,q=R}R=t(this.h[1],T,w),this.h[1]=t(this.h[2],v,S),this.h[2]=t(this.h[3],A,I),this.h[3]=t(this.h[4],m,q),this.h[4]=t(this.h[0],g,O),this.h[0]=R},a.prototype._digest=function(_){return _==="hex"?u.toHex32(this.h,"little"):u.split32(this.h,"little")};function c(y,_,b,m){return y<=15?_^b^m:y<=31?_&b|~_&m:y<=47?(_|~b)^m:y<=63?_&m|b&~m:_^(b|~m)}function s(y){return y<=15?0:y<=31?1518500249:y<=47?1859775393:y<=63?2400959708:2840853838}function d(y){return y<=15?1352829926:y<=31?1548603684:y<=47?1836072691:y<=63?2053994217:0}var l=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],h=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],p=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return dS}var lS,j8;function FW(){if(j8)return lS;j8=1;var u=ei(),n=xv();function o(i,t,e){if(!(this instanceof o))return new o(i,t,e);this.Hash=i,this.blockSize=i.blockSize/8,this.outSize=i.outSize/8,this.inner=null,this.outer=null,this._init(u.toArray(t,e))}return lS=o,o.prototype._init=function(t){t.length>this.blockSize&&(t=new this.Hash().update(t).digest()),n(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=new this.Hash().update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=new this.Hash().update(t)},o.prototype.update=function(t,e){return this.inner.update(t,e),this},o.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)},lS}var L8;function Rv(){return L8||(L8=1,(function(u){var n=u;n.utils=ei(),n.common=Iv(),n.sha=IW(),n.ripemd=RW(),n.hmac=FW(),n.sha1=n.sha.sha1,n.sha256=n.sha.sha256,n.sha224=n.sha.sha224,n.sha384=n.sha.sha384,n.sha512=n.sha.sha512,n.ripemd160=n.ripemd.ripemd160})(rS)),rS}var M8;function NW(){if(M8)return At;M8=1,Object.defineProperty(At,"__esModule",{value:!0}),At.isTermGrounded=At.termToSignature=At.quadToSignature=At.sha1hex=At.hashTerm=At.hashTerms=At.getGraphBlankNodes=At.uniqGraph=At.deindexGraph=At.indexGraph=At.getQuadsWithoutBlankNodes=At.getQuadsWithBlankNodes=At.hasValue=At.hashValues=At.getBijectionInner=At.getBijection=At.isomorphic=void 0;const u=Rv(),n=tr(),o=gn();function i(v,A){return!!t(v,A)}At.isomorphic=i;function t(v,A){const I=l(d(v)),q=l(d(A));if(Object.keys(I).length!==Object.keys(q).length)return null;for(const R in I)if(I[R]!==q[R])return null;const O=h(s(v)),w=h(s(A)),S=p(v),E=p(A);return e(O,w,S,E)}At.getBijection=t;function e(v,A,I,q,O,w){O||(O={}),w||(w={});const[S,E]=y(v,I,O),[R,L]=y(A,q,w);if(Object.keys(S).length!==Object.keys(R).length)return null;for(const B in S)if(!c(R,S[B]))return null;let M={};for(const B of I){const X=n.termToString(B),J=E[X];for(const ie in L)if(L[ie]===J){M[X]=ie,delete L[ie];break}}if(!r(Object.keys(M).sort(),I.map(n.termToString).sort())||!r(a(M).sort(),q.map(n.termToString).sort())){M=null;for(const B of I){const X=n.termToString(B);if(!S[X])for(const J of q){const ie=n.termToString(J);if(!R[ie]&&E[X]===L[ie]){const U=b(X);M=e(v,A,I,q,Object.assign(Object.assign({},S),{[X]:U}),Object.assign(Object.assign({},R),{[ie]:U}))}}}}return M}At.getBijectionInner=e;function r(v,A){if(v.length!==A.length)return!1;for(let I=v.length;I--;)if(v[I]!==A[I])return!1;return!0}function a(v){const A=[];for(const I in v)A.push(v[I]);return A}At.hashValues=a;function c(v,A){for(const I in v)if(v[I]===A)return!0;return!1}At.hasValue=c;function s(v){return v.filter(A=>o.someTerms(A,I=>I.termType==="BlankNode"||I.termType==="Quad"&&o.getTermsNested(I).some(q=>q.termType==="BlankNode")))}At.getQuadsWithBlankNodes=s;function d(v){return v.filter(A=>o.everyTerms(A,I=>I.termType!=="BlankNode"&&!(I.termType==="Quad"&&o.getTermsNested(I).some(q=>q.termType==="BlankNode"))))}At.getQuadsWithoutBlankNodes=d;function l(v){const A={};for(const I of v)A[JSON.stringify(n.quadToStringQuad(I))]=!0;return A}At.indexGraph=l;function f(v){return Object.keys(v).map(A=>n.stringQuadToQuad(JSON.parse(A)))}At.deindexGraph=f;function h(v){return f(l(v))}At.uniqGraph=h;function p(v){return o.uniqTerms(v.map(A=>o.getBlankNodes(o.getTermsNested(A))).reduce((A,I)=>A.concat(I),[]))}At.getGraphBlankNodes=p;function y(v,A,I){const q=Object.assign({},I),O={};let w=!0;for(;w;){const S=Object.keys(q).length;for(const R of A){const L=n.termToString(R);if(!q[L]){const[M,B]=_(R,v,q);M&&(q[L]=B),O[L]=B}}const E={};for(const R in O){const L=O[R];E[L]===void 0?E[L]=R:E[L]=!1}for(const R in E){const L=E[R];L&&(q[L]=R)}w=S!==Object.keys(q).length}return[q,O]}At.hashTerms=y;function _(v,A,I){const q=[];let O=!0;for(const S of A){const E=o.getTermsNested(S);if(E.some(R=>R.equals(v))){q.push(m(S,I,v));for(const R of E)!T(R,I)&&!R.equals(v)&&(O=!1)}}const w=b(q.sort().join(""));return[O,w]}At.hashTerm=_;function b(v){return u.sha1().update(v).digest("hex")}At.sha1hex=b;function m(v,A,I){return o.getTerms(v).map(q=>g(q,A,I)).join("|")}At.quadToSignature=m;function g(v,A,I){return v.equals(I)?"@self":v.termType==="BlankNode"?A[n.termToString(v)]||"@blank":v.termType==="Quad"?`<${m(v,A,I)}>`:n.termToString(v)}At.termToSignature=g;function T(v,A){return v.termType!=="BlankNode"&&!(v.termType==="Quad"&&o.getTermsNested(v).some(I=>!T(I,A)))||!!A[n.termToString(v)]}return At.isTermGrounded=T,At}var C8;function PW(){return C8||(C8=1,(function(u){var n=Pa&&Pa.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Pa&&Pa.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(NW(),u)})(Pa)),Pa}var q8;function DW(){if(q8)return Mr;q8=1;var u=Mr&&Mr.__createBinding||(Object.create?(function(K,we,Ee,$e){$e===void 0&&($e=Ee);var Ne=Object.getOwnPropertyDescriptor(we,Ee);(!Ne||("get"in Ne?!we.__esModule:Ne.writable||Ne.configurable))&&(Ne={enumerable:!0,get:function(){return we[Ee]}}),Object.defineProperty(K,$e,Ne)}):(function(K,we,Ee,$e){$e===void 0&&($e=Ee),K[$e]=we[Ee]})),n=Mr&&Mr.__setModuleDefault||(Object.create?(function(K,we){Object.defineProperty(K,"default",{enumerable:!0,value:we})}):function(K,we){K.default=we}),o=Mr&&Mr.__importStar||function(K){if(K&&K.__esModule)return K;var we={};if(K!=null)for(var Ee in K)Ee!=="default"&&Object.prototype.hasOwnProperty.call(K,Ee)&&u(we,K,Ee);return n(we,K),we},i=Mr&&Mr.__importDefault||function(K){return K&&K.__esModule?K:{default:K}};Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.toSparqlJs=Mr.toSparql=void 0;const t=PW(),e=tr(),r=Ev(),a=o(Ov()),c=i(Fw()),s=i(AO()),d=a.types,l=a.expressionTypes;let f;const h=new c.default;function p(K,we={}){return new r.Generator(we).stringify(y(K))}Mr.toSparql=p;function y(K){_(),K=Ve(K);let we=b(K);return we.type==="group"?we.patterns[0]:we}Mr.toSparqlJs=y;function _(){f={project:!1,extend:[],group:[],aggregates:[],order:[]}}function b(K){switch(K.type!==d.EXTEND&&K.type!==d.ORDER_BY&&K.type!==d.GRAPH&&(f.project=!1),K.type){case d.EXPRESSION:return m(K);case d.ASK:return pe(K,d.ASK);case d.BGP:return R(K);case d.CONSTRUCT:return L(K);case d.DESCRIBE:return pe(K,d.DESCRIBE);case d.DISTINCT:return M(K);case d.EXTEND:return B(K);case d.FROM:return X(K);case d.FILTER:return J(K);case d.GRAPH:return ie(K);case d.GROUP:return U(K);case d.JOIN:return fe(K);case d.LEFT_JOIN:return me(K);case d.MINUS:return he(K);case d.NOP:return{};case d.ORDER_BY:return te(K);case d.PATH:return xe(K);case d.PATTERN:return Ie(K);case d.PROJECT:return pe(K,d.PROJECT);case d.REDUCED:return Q(K);case d.SERVICE:return P(K);case d.SLICE:return D(K);case d.UNION:return x(K);case d.VALUES:return N(K);case d.COMPOSITE_UPDATE:return Se(K);case d.DELETE_INSERT:return Me(K);case d.LOAD:return Ae(K);case d.CLEAR:return oe(K);case d.CREATE:return C(K);case d.DROP:return F(K);case d.ADD:return z(K);case d.MOVE:return Z(K);case d.COPY:return le(K)}throw new Error(`Unknown Operation type ${K.type}`)}function m(K){switch(K.expressionType){case l.AGGREGATE:return v(K);case l.EXISTENCE:return A(K);case l.NAMED:return I(K);case l.OPERATOR:return q(K);case l.TERM:return O(K);case l.WILDCARD:return w(K)}throw new Error(`Unknown Expression Operation type ${K.expressionType}`)}function g(K){switch(K.type){case d.ALT:return $(K);case d.INV:return G(K);case d.LINK:return V(K);case d.NPS:return k(K);case d.ONE_OR_MORE_PATH:return H(K);case d.SEQ:return Y(K);case d.ZERO_OR_MORE_PATH:return se(K);case d.ZERO_OR_ONE_PATH:return ce(K)}throw new Error(`Unknown Path type ${K.type}`)}function T(K){return(0,e.termToString)(K)}function v(K){const we={expression:m(K.expression),type:"aggregate",aggregation:K.aggregator,distinct:K.distinct};return K.separator&&(we.separator=K.separator),we}function A(K){return{type:"operation",operator:K.not?"notexists":"exists",args:[{type:"group",patterns:s.default.flatten([b(K.input)])}]}}function I(K){return{type:"functionCall",function:K.name,args:K.args.map(m)}}function q(K){if(K.operator==="desc"){const Ee={expression:m(K.args[0])};return Ee.descending=!0,Ee}const we={type:"operation",operator:K.operator,args:K.args.map(m)};return(we.operator==="in"||we.operator==="notin")&&(we.args=[we.args[0]].concat([we.args.slice(1)])),we}function O(K){return K.term}function w(K){return K.wildcard}function S(K){return Array.isArray(K)?K.length===1?K[0]:{type:"group",patterns:K}:K}function E(K){return K}function R(K){let we=K.patterns.map(Ie);return we.length===0?null:{type:"bgp",triples:we}}function L(K){return{type:"query",prefixes:{},queryType:"CONSTRUCT",template:K.template.map(Ie),where:s.default.flatten([b(K.input)])}}function M(K){let we=b(K.input);return we.patterns[0].distinct=!0,we}function B(K){return f.project?(f.extend.push(K),b(K.input)):s.default.flatten([b(K.input),{type:"bind",variable:K.variable,expression:m(K.expression)}])}function X(K){const we=b(K.input);let Ee=we;return we.type==="group"&&(Ee=we.patterns[0]),Ee.from={default:K.default,named:K.named},we}function J(K){return{type:"group",patterns:s.default.flatten([b(K.input),{type:"filter",expression:m(K.expression)}])}}function ie(K){return{type:"graph",patterns:s.default.flatten([b(K.input)]),name:K.name}}function U(K){const we=b(K.input),Ee=K.aggregates.map(E);return f.aggregates.push(...Ee),f.group.push(...K.variables),we}function fe(K){return s.default.flatten(K.input.map(b)).reduce((Ee,$e)=>($e.type!=="bgp"||Ee.length==0||Ee[Ee.length-1].type!=="bgp"?Ee.push($e):Ee[Ee.length-1].triples.push(...$e.triples),Ee),[])}function me(K){const we={type:"optional",patterns:[b(K.input[1])]};return K.expression&&we.patterns.push({type:"filter",expression:m(K.expression)}),we.patterns=s.default.flatten(we.patterns),s.default.flatten([b(K.input[0]),we])}function he(K){let we=b(K.input[1]);return we.type==="group"&&(we=we.patterns),Array.isArray(we)||(we=[we]),s.default.flatten([b(K.input[0]),{type:"minus",patterns:we}])}function te(K){return f.order.push(...K.expressions),b(K.input)}function xe(K){return{type:"bgp",triples:[{subject:K.subject,predicate:g(K.predicate),object:K.object}]}}function Ie(K){return{subject:K.subject,predicate:K.predicate,object:K.object}}function Fe(K,we){let Ee=s.default.isSimpleTerm(K)?T(K):K;if(typeof Ee=="string"){if(we[Ee])return we[Ee]}else if(Array.isArray(K))K=K.map($e=>Fe($e,we));else for(let $e of Object.keys(K))K[$e]=Fe(K[$e],we);return K}function pe(K,we){const Ee={type:"query",prefixes:{}},$e=Ee;let Ne;we===d.PROJECT?(Ee.queryType="SELECT",Ne=K.variables):we===d.ASK?Ee.queryType="ASK":we===d.DESCRIBE&&(Ee.queryType="DESCRIBE",Ne=K.terms);const et=f.extend,rt=f.group,Ke=f.aggregates,lt=f.order;_(),f.project=!0;let re=s.default.flatten([b(K.input)]);re.length===1&&re[0].type==="group"&&(re=re[0].patterns),Ee.where=re;let ne={};for(let Qe of f.aggregates)ne[T(Qe.variable)]=m(Qe);let De={};for(let Qe=f.extend.length-1;Qe>=0;--Qe){let Tt=f.extend[Qe];De[T(Tt.variable)]=Fe(m(Tt.expression),ne)}f.group.length>0&&($e.group=f.group.map(Qe=>{let Tt=T(Qe);if(De[Tt]){let Ue=De[Tt];return delete De[Tt],{variable:Qe,expression:Ue}}return{expression:Qe}})),f.order.length>0&&($e.order=f.order.map(b).map(Qe=>Qe.descending?Qe:{expression:Qe})),Ne&&($e.variables=Ne.map(Qe=>{let Tt=T(Qe);if(De[Tt]){let Ue=De[Tt];return delete De[Tt],{variable:Qe,expression:Ue}}return Qe}),$e.variables.length===0&&($e.variables=[new r.Wildcard]));const qe=Object.entries(De);if(qe.length>0){$e.where=$e.where||[];for(const[Qe,Tt]of qe)$e.where.push({type:"bind",variable:(0,e.stringToTerm)(Qe),expression:Tt})}if(Ee.where.length>0&&Ee.where[Ee.where.length-1].type==="filter"){const Qe=Ee.where[Ee.where.length-1];ye(Qe,Object.keys(ne))&&($e.having=s.default.flatten([Fe(Qe.expression,ne)]),Ee.where.splice(-1))}return f.extend=et,f.group=rt,f.aggregates=Ke,f.order=lt,{type:"group",patterns:[$e]}}function ye(K,we){return s.default.isSimpleTerm(K)?we.indexOf(T(K))>=0:Array.isArray(K)?K.some(Ee=>ye(Ee,we)):K===Object(K)?Object.keys(K).some(Ee=>ye(K[Ee],we)):we.indexOf(K)>=0}function Q(K){let we=b(K.input);return we.patterns[0].reduced=!0,we}function P(K){let we=b(K.input);return we.type==="group"&&(we=we.patterns),Array.isArray(we)||(we=[we]),{type:"service",name:K.name,silent:K.silent,patterns:we}}function D(K){let we=b(K.input),Ee=we;return we.type&&we.type==="group"&&(Ee=we.patterns[0]),K.start!==0&&(Ee.offset=K.start),K.length!==void 0&&(Ee.limit=K.length),we}function x(K){return{type:"union",patterns:K.input.map(b).map(S)}}function N(K){return{type:"values",values:K.bindings.map(we=>{let Ee={};for(let $e of K.variables){let Ne=`?${$e.value}`;we[Ne]?Ee[Ne]=we[Ne]:Ee[Ne]=void 0}return Ee})}}function $(K){const we=K.input.map(g);return we.every(Ee=>"pathType"in Ee&&Ee.pathType==="!")?{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:s.default.flatten(we.map(Ee=>Ee.items))}]}:{type:"path",pathType:"|",items:we}}function G(K){if(K.path.type===d.NPS){const we=K.path.iris.map(Ee=>({type:"path",pathType:"^",items:[Ee]}));return we.length<=1?{type:"path",pathType:"!",items:we}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:we}]}}return{type:"path",pathType:"^",items:[g(K.path)]}}function V(K){return K.iri}function k(K){return K.iris.length<=1?{type:"path",pathType:"!",items:K.iris}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:K.iris}]}}function H(K){return{type:"path",pathType:"+",items:[g(K.path)]}}function Y(K){return{type:"path",pathType:"/",items:K.input.map(g)}}function se(K){return{type:"path",pathType:"*",items:[g(K.path)]}}function ce(K){return{type:"path",pathType:"?",items:[g(K.path)]}}function Se(K){const we=K.updates.map(Ee=>b(Ee).updates[0]);return{prefixes:{},type:"update",updates:we}}function Me(K){var we;let Ee=K.where,$e;if(Ee&&Ee.type===d.FROM){let et=Ee;Ee=et.input,$e={default:et.default,named:et.named}}const Ne=[{updateType:"insertdelete",delete:Pe(K.delete||[]),insert:Pe(K.insert||[])}];if($e&&(Ne[0].using=$e),!Ee||Ee.type===d.BGP&&Ee.patterns.length===0)Ne[0].where=[];else{const et=[];let rt=b(Be(Ee,et));if(rt.type==="group"?Ne[0].where=rt.patterns:Ne[0].where=[rt],et.length>0){if(et.length!==1)throw new Error("This is unexpected and might indicate an error in graph handling for updates.");((we=et[0])===null||we===void 0?void 0:we.value)!==""&&(Ne[0].where=[{type:"graph",patterns:Ne[0].where,name:et[0]}])}}return!K.delete&&!K.where?(Ne[0].updateType="insert",delete Ne[0].delete,delete Ne[0].where):!K.insert&&!K.where?(delete Ne[0].insert,delete Ne[0].where,K.delete.some(et=>et.subject.termType==="Variable"||et.predicate.termType==="Variable"||et.object.termType==="Variable")?Ne[0].updateType="deletewhere":Ne[0].updateType="delete"):!K.insert&&K.where&&K.where.type==="bgp"&&(0,t.isomorphic)(K.delete,K.where.patterns)&&(delete Ne[0].where,Ne[0].updateType="deletewhere"),{prefixes:{},type:"update",updates:Ne}}function Ae(K){const we=[{type:"load",silent:!!K.silent,source:K.source}];return K.destination&&(we[0].destination=K.destination),{prefixes:{},type:"update",updates:we}}function oe(K){return j(K,"clear")}function C(K){return j(K,"create")}function F(K){return j(K,"drop")}function j(K,we){const Ee=[{type:we,silent:!!K.silent}];return K.source==="DEFAULT"?Ee[0].graph={default:!0}:K.source==="NAMED"?Ee[0].graph={named:!0}:K.source==="ALL"?Ee[0].graph={all:!0}:Ee[0].graph={type:"graph",name:K.source},{prefixes:{},type:"update",updates:Ee}}function z(K){return ue(K,"add")}function Z(K){return ue(K,"move")}function le(K){return ue(K,"copy")}function ue(K,we){const Ee=[{type:we,silent:!!K.silent}];return Ee[0].source=K.source==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:K.source},Ee[0].destination=K.destination==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:K.destination},{prefixes:{},type:"update",updates:Ee}}function Pe(K){if(!K)return[];const we={};return K.forEach(Ee=>{const $e=Ee.graph.value;we[$e]||(we[$e]=[]),we[$e].push(Ee)}),Object.keys(we).map(Ee=>Ee===""?{type:"bgp",triples:we[Ee].map(Ie)}:{type:"graph",triples:we[Ee].map(Ie),name:we[Ee][0].graph})}function Ve(K){return Be(K,[])}function Be(K,we){if(Array.isArray(K))return K.map(rt=>Be(rt,we));if(!K.type||K.type===d.DELETE_INSERT)return K;if((K.type===d.PATTERN||K.type===d.PATH)&&K.graph)return we.push(K.graph),K.graph.name!==""?K.type===d.PATTERN?h.createPattern(K.subject,K.predicate,K.object):h.createPath(K.subject,K.predicate,K.object):K;const Ee={},$e={},Ne={};for(let rt of Object.keys(K)){const Ke=[];if(Ee[rt]=Be(K[rt],Ke),Ke.length>0){$e[rt]=Ke;for(const lt of Ke)Ne[lt.value]=lt}}const et=Object.keys(Ne);if(et.length>0)if(et.length===1&&![d.PROJECT,d.SERVICE].includes(K.type))we.push(Ne[et[0]]);else{if(K.type===d.BGP)return Ze(K,$e.patterns);for(let rt of Object.keys($e)){const Ke=Ee[rt];Array.isArray(Ke)?Ee[rt]=Ke.map((lt,re)=>$e[rt][0].value===""?lt:h.createGraph(lt,$e[rt][re])):$e[rt][0].value!==""&&(Ee[rt]=h.createGraph(Ke,$e[rt][0]))}}return Ee}function Ze(K,we){var Ee;const $e={};for(let rt=0;rt<K.patterns.length;++rt){const Ke=K.patterns[rt],lt=we[rt].value;$e[lt]=(Ee=$e[lt])!==null&&Ee!==void 0?Ee:{patterns:[],graph:we[rt]},$e[lt].patterns.push(Ke)}let Ne=[];for(const[rt,{patterns:Ke,graph:lt}]of Object.entries($e)){const re=h.createBgp(Ke);Ne.push(rt===""?re:h.createGraph(re,lt))}let et=Ne[0];for(let rt=1;rt<Ne.length;++rt)et=h.createJoin([et,Ne[rt]]);return et}return Mr}var B8;function dt(){return B8||(B8=1,(function(u){var n=Tn&&Tn.__createBinding||(Object.create?(function(d,l,f,h){h===void 0&&(h=f);var p=Object.getOwnPropertyDescriptor(l,f);(!p||("get"in p?!l.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return l[f]}}),Object.defineProperty(d,h,p)}):(function(d,l,f,h){h===void 0&&(h=f),d[h]=l[f]})),o=Tn&&Tn.__setModuleDefault||(Object.create?(function(d,l){Object.defineProperty(d,"default",{enumerable:!0,value:l})}):function(d,l){d.default=l}),i=Tn&&Tn.__importStar||function(d){if(d&&d.__esModule)return d;var l={};if(d!=null)for(var f in d)f!=="default"&&Object.prototype.hasOwnProperty.call(d,f)&&n(l,d,f);return o(l,d),l},t=Tn&&Tn.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(u,"__esModule",{value:!0}),u.Util=u.toSparqlJs=u.toSparql=u.Factory=u.Algebra=u.translate=void 0;const e=t(SW());u.translate=e.default;const r=i(Ov());u.Algebra=r;const a=t(Fw());u.Factory=a.default;const c=DW();Object.defineProperty(u,"toSparql",{enumerable:!0,get:function(){return c.toSparql}}),Object.defineProperty(u,"toSparqlJs",{enumerable:!0,get:function(){return c.toSparqlJs}});const s=t(AO());u.Util=s.default})(Tn)),Tn}var ja={},E0={},$8;function jW(){if($8)return E0;$8=1,Object.defineProperty(E0,"__esModule",{value:!0}),E0.asTermType=void 0;function u(n){if(n==="namedNode"||n==="literal"||n==="blankNode"||n==="quad")return n}return E0.asTermType=u,E0}var x0={},U8;function LW(){if(U8)return x0;U8=1,Object.defineProperty(x0,"__esModule",{value:!0}),x0.Variable=void 0;const u=ra();class n{constructor(i){this.expressionType=u.ExpressionType.Variable,this.name=i}}return x0.Variable=n,x0}var ft={},wn={},V8;function Ql(){if(V8)return wn;V8=1,Object.defineProperty(wn,"__esModule",{value:!0}),wn.SparqlOperator=wn.TypeURL=wn.typedLiteral=wn.TypeAlias=void 0;const u=hr();var n;(function(r){r.SPARQL_NUMERIC="SPARQL_NUMERIC",r.SPARQL_STRINGLY="SPARQL_STRINGLY"})(n||(wn.TypeAlias=n={}));const o=new u.DataFactory;function i(r,a){return o.literal(r,o.namedNode(a))}wn.typedLiteral=i;var t;(function(r){r.XSD_ANY_URI="http://www.w3.org/2001/XMLSchema#anyURI",r.XSD_STRING="http://www.w3.org/2001/XMLSchema#string",r.RDF_LANG_STRING="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",r.XSD_BOOLEAN="http://www.w3.org/2001/XMLSchema#boolean",r.XSD_DATE_TIME="http://www.w3.org/2001/XMLSchema#dateTime",r.XSD_DATE_TIME_STAMP="http://www.w3.org/2001/XMLSchema#dateTimeStamp",r.XSD_DATE="http://www.w3.org/2001/XMLSchema#date",r.XSD_G_MONTH="http://www.w3.org/2001/XMLSchema#gMonth",r.XSD_G_MONTHDAY="http://www.w3.org/2001/XMLSchema#gMonthDay",r.XSD_G_YEAR="http://www.w3.org/2001/XMLSchema#gYear",r.XSD_G_YEAR_MONTH="http://www.w3.org/2001/XMLSchema#gYearMonth",r.XSD_TIME="http://www.w3.org/2001/XMLSchema#time",r.XSD_G_DAY="http://www.w3.org/2001/XMLSchema#gDay",r.XSD_DECIMAL="http://www.w3.org/2001/XMLSchema#decimal",r.XSD_FLOAT="http://www.w3.org/2001/XMLSchema#float",r.XSD_DOUBLE="http://www.w3.org/2001/XMLSchema#double",r.XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",r.XSD_NON_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonPositiveInteger",r.XSD_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#negativeInteger",r.XSD_LONG="http://www.w3.org/2001/XMLSchema#long",r.XSD_INT="http://www.w3.org/2001/XMLSchema#int",r.XSD_SHORT="http://www.w3.org/2001/XMLSchema#short",r.XSD_BYTE="http://www.w3.org/2001/XMLSchema#byte",r.XSD_NON_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonNegativeInteger",r.XSD_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#positiveInteger",r.XSD_UNSIGNED_LONG="http://www.w3.org/2001/XMLSchema#unsignedLong",r.XSD_UNSIGNED_INT="http://www.w3.org/2001/XMLSchema#unsignedInt",r.XSD_UNSIGNED_SHORT="http://www.w3.org/2001/XMLSchema#unsignedShort",r.XSD_UNSIGNED_BYTE="http://www.w3.org/2001/XMLSchema#unsignedByte",r.XSD_NORMALIZED_STRING="http://www.w3.org/2001/XMLSchema#normalizedString",r.XSD_TOKEN="http://www.w3.org/2001/XMLSchema#token",r.XSD_LANGUAGE="http://www.w3.org/2001/XMLSchema#language",r.XSD_NM_TOKEN="http://www.w3.org/2001/XMLSchema#NMTOKEN",r.XSD_NAME="http://www.w3.org/2001/XMLSchema#name",r.XSD_NC_NAME="http://www.w3.org/2001/XMLSchema#NCName",r.XSD_ENTITY="http://www.w3.org/2001/XMLSchema#ENTITY",r.XSD_ID="http://www.w3.org/2001/XMLSchema#ID",r.XSD_ID_REF="http://www.w3.org/2001/XMLSchema#IDREF",r.XSD_DURATION="http://www.w3.org/2001/XMLSchema#duration",r.XSD_YEAR_MONTH_DURATION="http://www.w3.org/2001/XMLSchema#yearMonthDuration",r.XSD_DAY_TIME_DURATION="http://www.w3.org/2001/XMLSchema#dayTimeDuration"})(t||(wn.TypeURL=t={}));var e;return(function(r){r.NOT="!",r.UMINUS="uminus",r.UPLUS="uplus",r.LOGICAL_OR="||",r.LOGICAL_AND="&&",r.EQUAL="=",r.NOT_EQUAL="!=",r.LT="<",r.GT=">",r.LTE="<=",r.GTE=">=",r.SAME_TERM="sameterm",r.IN="in",r.NOT_IN="notin",r.MULTIPLICATION="*",r.DIVISION="/",r.ADDITION="+",r.SUBTRACTION="-",r.IS_IRI="isiri",r.IS_URI="isuri",r.IS_BLANK="isblank",r.IS_LITERAL="isliteral",r.IS_NUMERIC="isnumeric",r.STR="str",r.LANG="lang",r.DATATYPE="datatype",r.IRI="iri",r.URI="uri",r.BNODE="bnode",r.STRDT="strdt",r.STRLANG="strlang",r.UUID="uuid",r.STRUUID="struuid",r.STRLEN="strlen",r.SUBSTR="substr",r.UCASE="ucase",r.LCASE="lcase",r.STRSTARTS="strstarts",r.STRENDS="strends",r.CONTAINS="contains",r.STRBEFORE="strbefore",r.STRAFTER="strafter",r.ENCODE_FOR_URI="encode_for_uri",r.CONCAT="concat",r.LANG_MATCHES="langmatches",r.REGEX="regex",r.REPLACE="replace",r.ABS="abs",r.ROUND="round",r.CEIL="ceil",r.FLOOR="floor",r.RAND="rand",r.NOW="now",r.YEAR="year",r.MONTH="month",r.DAY="day",r.HOURS="hours",r.MINUTES="minutes",r.SECONDS="seconds",r.TIMEZONE="timezone",r.TZ="tz",r.MD5="md5",r.SHA1="sha1",r.SHA256="sha256",r.SHA384="sha384",r.SHA512="sha512",r.TRIPLE="triple",r.SUBJECT="subject",r.PREDICATE="predicate",r.OBJECT="object",r.IS_TRIPLE="istriple",r.BOUND="bound",r.IF="if",r.COALESCE="coalesce"})(e||(wn.SparqlOperator=e={})),wn}var yt={},Q8;function Rf(){if(Q8)return yt;Q8=1,Object.defineProperty(yt,"__esModule",{value:!0}),yt.NoAggregator=yt.ExtensionFunctionError=yt.InvalidExpression=yt.InvalidArity=yt.UnexpectedError=yt.ParseError=yt.EmptyAggregateError=yt.IncompatibleLanguageOperation=yt.InvalidTimezoneCall=yt.CastError=yt.InvalidArgumentTypes=yt.InError=yt.CoalesceError=yt.RDFEqualTypeError=yt.EBVCoercionError=yt.UnboundVariableError=yt.InvalidLexicalForm=yt.isExpressionError=yt.ExpressionError=void 0;class u extends Error{}yt.ExpressionError=u;function n(T){return T instanceof u}yt.isExpressionError=n;class o extends u{constructor(v){super(`Invalid lexical form '${g(v)}'`),this.arg=v}}yt.InvalidLexicalForm=o;class i extends u{constructor(v,A){super(`Unbound variable '${g(v)}'`),this.variable=v,this.bindings=A}}yt.UnboundVariableError=i;class t extends u{constructor(v){super(`Cannot coerce term to EBV '${g(v)}'`),this.arg=v}}yt.EBVCoercionError=t;class e extends u{constructor(v){super("Equality test for literals with unsupported datatypes"),this.args=v}}yt.RDFEqualTypeError=e;class r extends u{constructor(v){super("All COALESCE arguments threw errors"),this.errors=v}}yt.CoalesceError=r;class a extends u{constructor(v){super(`Some argument to IN errorred and none where equal. ${v.map(A=>`(${A.toString()}) `).join("and ")}`),this.errors=v}}yt.InError=a;class c extends u{constructor(v,A){super(`Argument types not valid for operator: '${g(A)}' with '${g(v)}`),this.args=v,this.op=A}}yt.InvalidArgumentTypes=c;class s extends u{constructor(v,A){super(`Invalid cast: '${g(v)}' to '${g(A)}'`),this.arg=v}}yt.CastError=s;class d extends u{constructor(v){super(`TIMEZONE call on ${v} which has no timezone`),this.dateString=v}}yt.InvalidTimezoneCall=d;class l extends u{constructor(v,A){super(`Operation on incompatible language literals '${g(v)}' and '${g(A)}'`),this.arg1=v,this.arg2=A}}yt.IncompatibleLanguageOperation=l;class f extends u{constructor(){super("Empty aggregate expression")}}yt.EmptyAggregateError=f;class h extends u{constructor(v,A){super(`Failed to parse "${v}" as ${A}.`)}}yt.ParseError=h;class p extends Error{constructor(v,A){super(`Programmer Error '${v}'`),this.payload=A}}yt.UnexpectedError=p;class y extends Error{constructor(v,A){super(`The number of args does not match the arity of the operator '${g(A)}'.`),this.args=v,this.op=A}}yt.InvalidArity=y;class _ extends Error{constructor(v){super(`Invalid SPARQL Expression '${g(v)}'`)}}yt.InvalidExpression=_;class b extends Error{constructor(v,A){A instanceof Error?super(`Error thrown in ${v}: ${A.message}${A.stack?`
${A.stack}`:""}`):super(`Error thrown in ${v}`)}}yt.ExtensionFunctionError=b;class m extends Error{constructor(v){super(`Aggregate expression ${g(v)} found, but no aggregate hook provided.`)}}yt.NoAggregator=m;function g(T){return JSON.stringify(T)}return yt}var Sn={},H8;function MW(){if(H8)return Sn;H8=1,Object.defineProperty(Sn,"__esModule",{value:!0}),Sn.serializeDuration=Sn.serializeTime=Sn.serializeDate=Sn.serializeDateTime=void 0;function u(r,a=2){return r.toLocaleString(void 0,{minimumIntegerDigits:a,useGrouping:!1})}function n(r){return`${i({year:r.year,month:r.month,day:r.day})}T${t(r)}`}Sn.serializeDateTime=n;function o(r){return r.zoneHours===void 0||r.zoneMinutes===void 0?"":r.zoneHours===0&&r.zoneMinutes===0?"Z":`${r.zoneHours>=0?`+${u(r.zoneHours)}`:u(r.zoneHours)}:${u(Math.abs(r.zoneMinutes))}`}function i(r){return`${u(r.year,4)}-${u(r.month)}-${u(r.day)}${o(r)}`}Sn.serializeDate=i;function t(r){return`${u(r.hours)}:${u(r.minutes)}:${u(r.seconds)}${o(r)}`}Sn.serializeTime=t;function e(r,a="PT0S"){if(!Object.values(r).some(_=>(_||0)!==0))return a;const c=Object.values(r).some(_=>(_||0)<0)?"-":"",s=r.year?`${Math.abs(r.year)}Y`:"",d=r.month?`${Math.abs(r.month)}M`:"",l=r.day?`${Math.abs(r.day)}D`:"",f=`${c}P${s}${d}${l}`;if(!(r.hours||r.minutes||r.seconds))return f;const h=r.hours?`${Math.abs(r.hours)}H`:"",p=r.minutes?`${Math.abs(r.minutes)}M`:"",y=r.seconds?`${Math.abs(r.seconds)}S`:"";return`${f}T${h}${p}${y}`}return Sn.serializeDuration=e,Sn}var fS={},Vt={},I0={},G8;function gz(){if(G8)return I0;G8=1,Object.defineProperty(I0,"__esModule",{value:!0}),I0.OverloadTree=void 0;const u=Ff(),n=Nw();let o=class AA{constructor(t,e){this.identifier=t,this.implementation=void 0,this.generalOverloads=Object.create(null),this.literalOverLoads=[],this.depth=e??0,this.promotionCount=void 0}getSubtree(t){const e=(0,n.asGeneralType)(t);if(e)return this.generalOverloads[e];for(const[r,a]of this.literalOverLoads)if(t===r)return a}getImplementationExact(t){let e=this;for(const r of t)if(e=e.getSubtree(r),!e)return;return e.implementation}search(t,e,r){let a=r[this.identifier],c=0;for(;c<t.length&&(a!=null&&a.cache);){const l=t[c],f=(0,u.isLiteralTermExpression)(l);a=a.cache[f?f.dataType:l.termType],c++}if(c===t.length&&(a!=null&&a.func))return a.func;const s=[],d=0;if(t.length===0)return this.implementation;for(s.push(...this.getSubTreeWithArg(t[d],e).map(l=>({node:l,index:d+1})));s.length>0;){const{index:l,node:f}=s.pop();if(l===t.length&&f.implementation)return this.addToCache(r,t,f.implementation),f.implementation;s.push(...f.getSubTreeWithArg(t[l],e).map(h=>({node:h,index:l+1})))}}addToCache(t,e,r){function a(s,d){return d in s||(s[d]={}),s[d]}let c=a(t,this.identifier);for(const s of e){const d=(0,u.isLiteralTermExpression)(s),l=d?d.dataType:s.termType;c.cache=c.cache??{},c=a(c.cache,l)}c.func=r}addOverload(t,e){this._addOverload([...t],e,0)}_addOverload(t,e,r){const[a,...c]=t;if(!a){(this.promotionCount===void 0||r<=this.promotionCount)&&(this.promotionCount=r,this.implementation=e);return}let s=this.getSubtree(a);if(!s){const d=new AA(this.identifier,this.depth+1),l=(0,n.asGeneralType)(a);l&&(this.generalOverloads[l]=d);const f=(0,n.asOverrideType)(a);f&&this.literalOverLoads.push([f,d]),s=d}if(s._addOverload(c,e,r),n.typePromotion[a])for(const d of n.typePromotion[a])this.addPromotedOverload(d.typeToPromote,e,d.conversionFunction,c,r)}addPromotedOverload(t,e,r,a,c){let s=this.getSubtree(t);if(!s){const d=new AA(this.identifier,this.depth+1);this.literalOverLoads.push([t,d]),s=d}s._addOverload(a,d=>l=>e(d)([...l.slice(0,this.depth),r(l[this.depth]),...l.slice(this.depth+1,l.length)]),c+1)}getSubTreeWithArg(t,e){const r=[],a=(0,u.isLiteralTermExpression)(t);if(this.generalOverloads.term&&r.push(this.generalOverloads.term),this.generalOverloads[t.termType]&&r.push(this.generalOverloads[t.termType]),a){const c=(0,n.asKnownLiteralType)(a.dataType);let s;c?s=n.superTypeDictTable[c]:s=(0,n.getSuperTypes)(a.dataType,e);const d=this.literalOverLoads.filter(([l,f])=>l in s).map(([l,f])=>[s[l],f]);d.sort(([l,f],[h,p])=>l-h),r.push(...d.map(([l,f])=>f))}return r}};return I0.OverloadTree=o,I0}var z8;function mz(){if(z8)return Vt;z8=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.expressionToVar=Vt.dateTime=Vt.langString=Vt.string=Vt.double=Vt.float=Vt.decimal=Vt.integer=Vt.bool=Vt.Builder=Vt.declare=void 0;const u=Ce(),n=Ff(),o=Ff(),i=Ql(),t=Ql(),e=Rf(),r=gz();function a(m){return new c(m)}Vt.declare=a;class c{constructor(g){this.overloadTree=new r.OverloadTree(g),this.collected=!1}collect(){if(this.collected)throw new Error("Builders can only be collected once!");return this.collected=!0,this.overloadTree}static wrapInvalidLexicalProtected(g){return T=>v=>{for(const[A,I]of v.entries())if(I instanceof o.NonLexicalLiteral)throw new e.InvalidLexicalForm(v[A].toRDF(T.context.getSafe(u.KeysInitQuery.dataFactory)));return g(T)(v)}}set(g,T,v=!0){return this.overloadTree.addOverload(g,v?c.wrapInvalidLexicalProtected(T):T),this}copy({from:g,to:T}){const v=this.overloadTree.getImplementationExact(g);if(!v)throw new e.UnexpectedError("Tried to copy implementation, but types not found",{from:g,to:T});return this.set(T,v)}onUnary(g,T,v=!0){return this.set([g],A=>([I])=>T(A)(I),v)}onUnaryTyped(g,T,v=!0){return this.set([g],A=>([I])=>T(A)(I.typedValue),v)}onBinary(g,T,v=!0){return this.set(g,A=>([I,q])=>T(A)(I,q),v)}onBinaryTyped(g,T,v=!0){return this.set(g,A=>([I,q])=>T(A)(I.typedValue,q.typedValue),v)}onTernaryTyped(g,T,v=!0){return this.set(g,A=>([I,q,O])=>T(A)(I.typedValue,q.typedValue,O.typedValue),v)}onTernary(g,T,v=!0){return this.set(g,A=>([I,q,O])=>T(A)(I,q,O),v)}onQuaternaryTyped(g,T,v=!0){return this.set(g,A=>([I,q,O,w])=>T(A)(I.typedValue,q.typedValue,O.typedValue,w.typedValue),v)}onTerm1(g,T=!1){return this.set(["term"],v=>([A])=>g(v)(A),T)}onTerm3(g){return this.set(["term","term","term"],T=>([v,A,I])=>g(T)(v,A,I))}onQuad1(g){return this.set(["quad"],T=>([v])=>g(T)(v))}onLiteral1(g,T=!0){return this.set(["literal"],v=>([A])=>g(v)(A),T)}onBoolean1(g,T=!0){return this.set([i.TypeURL.XSD_BOOLEAN],v=>([A])=>g(v)(A),T)}onBoolean1Typed(g,T=!0){return this.set([i.TypeURL.XSD_BOOLEAN],v=>([A])=>g(v)(A.typedValue),T)}onString1(g,T=!0){return this.set([i.TypeURL.XSD_STRING],v=>([A])=>g(v)(A),T)}onString1Typed(g,T=!0){return this.set([i.TypeURL.XSD_STRING],v=>([A])=>g(v)(A.typedValue),T)}onLangString1(g,T=!0){return this.set([i.TypeURL.RDF_LANG_STRING],v=>([A])=>g(v)(A),T)}onStringly1(g,T=!0){return this.set([i.TypeAlias.SPARQL_STRINGLY],v=>([A])=>g(v)(A),T)}onStringly1Typed(g,T=!0){return this.set([i.TypeAlias.SPARQL_STRINGLY],v=>([A])=>g(v)(A.typedValue),T)}onNumeric1(g,T=!0){return this.set([i.TypeAlias.SPARQL_NUMERIC],v=>([A])=>g(v)(A),T)}onDateTime1(g,T=!0){return this.set([i.TypeURL.XSD_DATE_TIME],v=>([A])=>g(v)(A),T)}numericConverter(g,T=!0){const v=A=>I=>g(A)(I.typedValue);return this.onUnary(t.TypeURL.XSD_INTEGER,A=>I=>d(v(A)(I)),T).onUnary(t.TypeURL.XSD_DECIMAL,A=>I=>l(v(A)(I)),T).onUnary(t.TypeURL.XSD_FLOAT,A=>I=>f(v(A)(I)),T).onUnary(t.TypeURL.XSD_DOUBLE,A=>I=>h(v(A)(I)),T)}arithmetic(g,T=!0){const v=A=>(I,q)=>g(A)(I.typedValue,q.typedValue);return this.onBinary([t.TypeURL.XSD_INTEGER,t.TypeURL.XSD_INTEGER],A=>(I,q)=>d(v(A)(I,q)),T).onBinary([t.TypeURL.XSD_DECIMAL,t.TypeURL.XSD_DECIMAL],A=>(I,q)=>l(v(A)(I,q)),T).onBinary([t.TypeURL.XSD_FLOAT,t.TypeURL.XSD_FLOAT],A=>(I,q)=>f(v(A)(I,q)),T).onBinary([t.TypeURL.XSD_DOUBLE,t.TypeURL.XSD_DOUBLE],A=>(I,q)=>h(v(A)(I,q)),T)}numberTest(g){return this.numeric(T=>([v,A])=>{const I=g(T)(v.typedValue,A.typedValue);return s(I)})}stringTest(g,T=!0){return this.set([i.TypeURL.XSD_STRING,i.TypeURL.XSD_STRING],v=>([A,I])=>{const q=g(v)(A.typedValue,I.typedValue);return s(q)},T)}booleanTest(g,T=!0){return this.set([i.TypeURL.XSD_BOOLEAN,i.TypeURL.XSD_BOOLEAN],v=>([A,I])=>{const q=g(v)(A.typedValue,I.typedValue);return s(q)},T)}dateTimeTest(g,T=!0){return this.set([i.TypeURL.XSD_DATE_TIME,i.TypeURL.XSD_DATE_TIME],v=>([A,I])=>{const q=g(v)(A.typedValue,I.typedValue);return s(q)},T)}numeric(g){return this.set([i.TypeAlias.SPARQL_NUMERIC,i.TypeAlias.SPARQL_NUMERIC],g)}}Vt.Builder=c;function s(m){return new n.BooleanLiteral(m)}Vt.bool=s;function d(m){return new n.IntegerLiteral(m)}Vt.integer=d;function l(m){return new n.DecimalLiteral(m)}Vt.decimal=l;function f(m){return new n.FloatLiteral(m)}Vt.float=f;function h(m){return new n.DoubleLiteral(m)}Vt.double=h;function p(m){return new n.StringLiteral(m)}Vt.string=p;function y(m,g){return new n.LangStringLiteral(m,g)}Vt.langString=y;function _(m,g){return new n.DateTimeLiteral(m,g)}Vt.dateTime=_;function b(m,g){return m.variable(g.name.slice(1))}return Vt.expressionToVar=b,Vt}var X8;function Nw(){return X8||(X8=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.typePromotion=u.isSubTypeOf=u.getSuperTypeDict=u.isInternalSubType=u.asGeneralType=u.asOverrideType=u.asKnownLiteralType=u.asTypeAlias=u.typeAliasCheck=u.extensionTableInit=u.getSuperTypes=u.superTypeDictTable=u.extensionTableInput=void 0;const n=Ff(),o=mz(),i=Ql();u.extensionTableInput={[i.TypeURL.XSD_DATE_TIME_STAMP]:i.TypeURL.XSD_DATE_TIME,[i.TypeURL.XSD_DAY_TIME_DURATION]:i.TypeURL.XSD_DURATION,[i.TypeURL.XSD_YEAR_MONTH_DURATION]:i.TypeURL.XSD_DURATION,[i.TypeURL.RDF_LANG_STRING]:i.TypeAlias.SPARQL_STRINGLY,[i.TypeURL.XSD_STRING]:i.TypeAlias.SPARQL_STRINGLY,[i.TypeURL.XSD_NORMALIZED_STRING]:i.TypeURL.XSD_STRING,[i.TypeURL.XSD_TOKEN]:i.TypeURL.XSD_NORMALIZED_STRING,[i.TypeURL.XSD_LANGUAGE]:i.TypeURL.XSD_TOKEN,[i.TypeURL.XSD_NM_TOKEN]:i.TypeURL.XSD_TOKEN,[i.TypeURL.XSD_NAME]:i.TypeURL.XSD_TOKEN,[i.TypeURL.XSD_NC_NAME]:i.TypeURL.XSD_NAME,[i.TypeURL.XSD_ENTITY]:i.TypeURL.XSD_NC_NAME,[i.TypeURL.XSD_ID]:i.TypeURL.XSD_NC_NAME,[i.TypeURL.XSD_ID_REF]:i.TypeURL.XSD_NC_NAME,[i.TypeURL.XSD_DOUBLE]:i.TypeAlias.SPARQL_NUMERIC,[i.TypeURL.XSD_FLOAT]:i.TypeAlias.SPARQL_NUMERIC,[i.TypeURL.XSD_DECIMAL]:i.TypeAlias.SPARQL_NUMERIC,[i.TypeURL.XSD_INTEGER]:i.TypeURL.XSD_DECIMAL,[i.TypeURL.XSD_NON_POSITIVE_INTEGER]:i.TypeURL.XSD_INTEGER,[i.TypeURL.XSD_NEGATIVE_INTEGER]:i.TypeURL.XSD_NON_POSITIVE_INTEGER,[i.TypeURL.XSD_LONG]:i.TypeURL.XSD_INTEGER,[i.TypeURL.XSD_INT]:i.TypeURL.XSD_LONG,[i.TypeURL.XSD_SHORT]:i.TypeURL.XSD_INT,[i.TypeURL.XSD_BYTE]:i.TypeURL.XSD_SHORT,[i.TypeURL.XSD_NON_NEGATIVE_INTEGER]:i.TypeURL.XSD_INTEGER,[i.TypeURL.XSD_POSITIVE_INTEGER]:i.TypeURL.XSD_NON_NEGATIVE_INTEGER,[i.TypeURL.XSD_UNSIGNED_LONG]:i.TypeURL.XSD_NON_NEGATIVE_INTEGER,[i.TypeURL.XSD_UNSIGNED_INT]:i.TypeURL.XSD_UNSIGNED_LONG,[i.TypeURL.XSD_UNSIGNED_SHORT]:i.TypeURL.XSD_UNSIGNED_INT,[i.TypeURL.XSD_UNSIGNED_BYTE]:i.TypeURL.XSD_UNSIGNED_SHORT,[i.TypeURL.XSD_DATE_TIME]:"term",[i.TypeURL.XSD_BOOLEAN]:"term",[i.TypeURL.XSD_DATE]:"term",[i.TypeURL.XSD_G_MONTH]:"term",[i.TypeURL.XSD_G_MONTHDAY]:"term",[i.TypeURL.XSD_G_YEAR]:"term",[i.TypeURL.XSD_G_YEAR_MONTH]:"term",[i.TypeURL.XSD_TIME]:"term",[i.TypeURL.XSD_G_DAY]:"term",[i.TypeURL.XSD_DURATION]:"term",[i.TypeAlias.SPARQL_NUMERIC]:"term",[i.TypeAlias.SPARQL_STRINGLY]:"term",[i.TypeURL.XSD_ANY_URI]:"term"},u.superTypeDictTable=Object.create(null);function t(y,_){const b=_.cache.get(y);if(b)return b;const m=_.discoverer(y);if(m==="term"){const v=Object.create(null);return v.__depth=0,v[y]=0,_.cache.set(y,v),v}let g;const T=s(m);return T?g={...u.superTypeDictTable[T]}:g={...t(m,_)},g.__depth++,g[y]=g.__depth,_.cache.set(y,g),g}u.getSuperTypes=t;function e(){for(const[y,_]of Object.entries(u.extensionTableInput)){const b=y;u.superTypeDictTable[b]||r(b,_,u.superTypeDictTable)}}u.extensionTableInit=e,e();function r(y,_,b){if(_==="term"||_===void 0){const m=Object.create(null);m.__depth=0,m[y]=0,b[y]=m;return}b[_]||r(_,u.extensionTableInput[_],b),b[y]={...b[_],[y]:b[_].__depth+1,__depth:b[_].__depth+1}}u.typeAliasCheck=Object.create(null);function a(){for(const y of Object.values(i.TypeAlias))u.typeAliasCheck[y]=!0}a();function c(y){if(y in u.typeAliasCheck)return y}u.asTypeAlias=c;function s(y){if(y in u.superTypeDictTable)return y}u.asKnownLiteralType=s;function d(y){if(s(y)??y==="term")return y}u.asOverrideType=d;function l(y){if(y==="term"||(0,n.asTermType)(y))return y}u.asGeneralType=l;function f(y,_){return y!=="term"&&u.superTypeDictTable[y]&&u.superTypeDictTable[y][_]!==void 0}u.isInternalSubType=f;function h(y,_){const b=s(y);return b?u.superTypeDictTable[b]:t(y,_)}u.getSuperTypeDict=h;function p(y,_,b){return y==="term"?!1:h(y,b)[_]!==void 0}u.isSubTypeOf=p,u.typePromotion={[i.TypeURL.XSD_STRING]:[{typeToPromote:i.TypeURL.XSD_ANY_URI,conversionFunction:y=>(0,o.string)(y.str())}],[i.TypeURL.XSD_DOUBLE]:[{typeToPromote:i.TypeURL.XSD_FLOAT,conversionFunction:y=>(0,o.double)(y.typedValue)},{typeToPromote:i.TypeURL.XSD_DECIMAL,conversionFunction:y=>(0,o.double)(y.typedValue)}],[i.TypeURL.XSD_FLOAT]:[{typeToPromote:i.TypeURL.XSD_DECIMAL,conversionFunction:y=>(0,o.float)(y.typedValue)}]}})(fS)),fS}var J8;function CW(){if(J8)return ft;J8=1,Object.defineProperty(ft,"__esModule",{value:!0}),ft.isNonLexicalLiteral=ft.NonLexicalLiteral=ft.YearMonthDurationLiteral=ft.DayTimeDurationLiteral=ft.DurationLiteral=ft.DateLiteral=ft.TimeLiteral=ft.DateTimeLiteral=ft.StringLiteral=ft.LangStringLiteral=ft.BooleanLiteral=ft.DoubleLiteral=ft.FloatLiteral=ft.DecimalLiteral=ft.IntegerLiteral=ft.NumericLiteral=ft.Literal=ft.isLiteralTermExpression=ft.DefaultGraph=ft.Quad=ft.BlankNode=ft.NamedNode=ft.Term=void 0;const u=ra(),n=Ql(),o=Ql(),i=Rf(),t=MW(),e=Nw();class r{constructor(){this.expressionType=u.ExpressionType.Term}str(){throw new i.InvalidArgumentTypes([this],n.SparqlOperator.STR)}coerceEBV(){throw new i.EBVCoercionError(this)}}ft.Term=r;class a extends r{constructor(L){super(),this.value=L,this.termType="namedNode"}toRDF(L){return L.namedNode(this.value)}str(){return this.value}}ft.NamedNode=a;class c extends r{constructor(L){super(),this.termType="blankNode",this.value=L}toRDF(L){return typeof this.value=="string"?L.blankNode(this.value):this.value}}ft.BlankNode=c;class s extends r{constructor(L,M,B,X){super(),this.subject=L,this.predicate=M,this.object=B,this.graph=X,this.termType="quad"}toRDF(L){return L.quad(this.subject.toRDF(L),this.predicate.toRDF(L),this.object.toRDF(L),this.graph.toRDF(L))}str(){return`Quad: [${this.subject.str()}, ${this.predicate.str()}, ${this.object.str()}, ${this.graph.str()}]`}}ft.Quad=s;class d extends r{constructor(){super(),this.termType="defaultGraph"}toRDF(L){return L.defaultGraph()}str(){return"DefaultGraph"}}ft.DefaultGraph=d;function l(R){if(R.termType==="literal")return R}ft.isLiteralTermExpression=l;class f extends r{constructor(L,M,B,X){super(),this.typedValue=L,this.dataType=M,this.strValue=B,this.language=X,this.termType="literal"}toRDF(L){return L.literal(this.strValue??this.str(),this.language??L.namedNode(this.dataType))}str(){return this.strValue??this.typedValue.toString()}}ft.Literal=f;class h extends f{constructor(L,M,B,X){super(L,M,B,X),this.typedValue=L,this.strValue=B,this.language=X}coerceEBV(){return!!this.typedValue}toRDF(L){const M=super.toRDF(L);return Number.isFinite(this.typedValue)||(M.value=M.value.replace("Infinity","INF")),M}str(){return this.strValue??this.specificFormatter(this.typedValue)}}ft.NumericLiteral=h;class p extends h{constructor(L,M,B,X){super(L,M??o.TypeURL.XSD_INTEGER,B,X),this.typedValue=L,this.strValue=B,this.language=X}specificFormatter(L){return L.toFixed(0)}}ft.IntegerLiteral=p;class y extends h{constructor(L,M,B,X){super(L,M??o.TypeURL.XSD_DECIMAL,B,X),this.typedValue=L,this.strValue=B,this.language=X}specificFormatter(L){return L.toString()}}ft.DecimalLiteral=y;class _ extends h{constructor(L,M,B,X){super(L,M??o.TypeURL.XSD_FLOAT,B,X),this.typedValue=L,this.strValue=B,this.language=X}specificFormatter(L){return L.toString()}}ft.FloatLiteral=_;class b extends h{constructor(L,M,B,X){super(L,M??o.TypeURL.XSD_DOUBLE,B,X),this.typedValue=L,this.strValue=B,this.language=X}specificFormatter(L){if(!Number.isFinite(L))return L>0?"INF":L<0?"-INF":"NaN";const M=L.toExponential(),[B,X]=M.split("e"),J=X.replace(/\+/u,"");return`${B.includes(".")?B:`${B}.0`}E${J}`}}ft.DoubleLiteral=b;class m extends f{constructor(L,M,B){super(L,B??o.TypeURL.XSD_BOOLEAN,M),this.typedValue=L,this.strValue=M}coerceEBV(){return this.typedValue}}ft.BooleanLiteral=m;class g extends f{constructor(L,M,B){super(L,B??o.TypeURL.RDF_LANG_STRING,L,M),this.typedValue=L,this.language=M}coerceEBV(){return this.str().length>0}}ft.LangStringLiteral=g;class T extends f{constructor(L,M){super(L,M??o.TypeURL.XSD_STRING,L),this.typedValue=L}coerceEBV(){return this.str().length>0}}ft.StringLiteral=T;class v extends f{constructor(L,M,B){super(L,B??o.TypeURL.XSD_DATE_TIME,M),this.typedValue=L,this.strValue=M}str(){return(0,t.serializeDateTime)(this.typedValue)}}ft.DateTimeLiteral=v;class A extends f{constructor(L,M,B){super(L,B??o.TypeURL.XSD_TIME,M),this.typedValue=L,this.strValue=M}str(){return(0,t.serializeTime)(this.typedValue)}}ft.TimeLiteral=A;class I extends f{constructor(L,M,B){super(L,B??o.TypeURL.XSD_DATE,M),this.typedValue=L,this.strValue=M}str(){return(0,t.serializeDate)(this.typedValue)}}ft.DateLiteral=I;class q extends f{constructor(L,M,B){super(L,B??o.TypeURL.XSD_DURATION,M),this.typedValue=L,this.strValue=M}str(){return(0,t.serializeDuration)(this.typedValue)}}ft.DurationLiteral=q;class O extends q{constructor(L,M,B){super(L,M,B??o.TypeURL.XSD_DAY_TIME_DURATION),this.typedValue=L,this.strValue=M}}ft.DayTimeDurationLiteral=O;class w extends f{constructor(L,M,B){super(L,B??o.TypeURL.XSD_YEAR_MONTH_DURATION,M),this.typedValue=L,this.strValue=M}str(){return(0,t.serializeDuration)(this.typedValue,"P0M")}}ft.YearMonthDurationLiteral=w;class S extends f{constructor(L,M,B,X,J){super({toString:()=>"undefined"},M,X,J),this.openWorldType=B}coerceEBV(){if((0,e.isSubTypeOf)(this.dataType,o.TypeURL.XSD_BOOLEAN,this.openWorldType)||(0,e.isSubTypeOf)(this.dataType,o.TypeAlias.SPARQL_NUMERIC,this.openWorldType))return!1;throw new i.EBVCoercionError(this)}toRDF(L){return L.literal(this.str(),this.language??L.namedNode(this.dataType))}str(){return this.strValue??""}}ft.NonLexicalLiteral=S;function E(R){if(R instanceof S)return R}return ft.isNonLexicalLiteral=E,ft}var R0={},k8;function qW(){if(k8)return R0;k8=1,Object.defineProperty(R0,"__esModule",{value:!0}),R0.Operator=void 0;const u=ra();let n=class{constructor(i,t,e){this.name=i,this.args=t,this.apply=e,this.expressionType=u.ExpressionType.Operator}};return R0.Operator=n,R0}var F0={},K8;function BW(){if(K8)return F0;K8=1,Object.defineProperty(F0,"__esModule",{value:!0}),F0.Aggregate=void 0;const u=ra();let n=class{constructor(i,t){this.name=i,this.expression=t,this.expressionType=u.ExpressionType.Aggregate}};return F0.Aggregate=n,F0}var N0={},W8;function $W(){if(W8)return N0;W8=1,Object.defineProperty(N0,"__esModule",{value:!0}),N0.Existence=void 0;const u=ra();let n=class{constructor(i){this.expression=i,this.expressionType=u.ExpressionType.Existence}};return N0.Existence=n,N0}var Y8;function Ff(){return Y8||(Y8=1,(function(u){var n=ja&&ja.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ja&&ja.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(jW(),u),o(LW(),u),o(CW(),u),o(qW(),u),o(BW(),u),o($W(),u)})(ja)),ja}var dr={},It={},Z8;function uv(){if(Z8)return It;Z8=1,Object.defineProperty(It,"__esModule",{value:!0}),It.extractTimeZone=It.extractRawTimeZone=It.dayTimeDurationsToSeconds=It.yearMonthDurationsToMonths=It.trimToDayTimeDuration=It.trimToYearMonthDuration=It.toUTCDate=It.toJSDate=It.negateDuration=It.toDateTimeRepresentation=It.defaultedDateTimeRepresentation=It.simplifyDurationRepresentation=It.defaultedDurationRepresentation=It.defaultedYearMonthDurationRepresentation=It.defaultedDayTimeDurationRepresentation=void 0;function u(y){return{day:y.day??0,hours:y.hours??0,minutes:y.minutes??0,seconds:y.seconds??0}}It.defaultedDayTimeDurationRepresentation=u;function n(y){return{year:y.year??0,month:y.month??0}}It.defaultedYearMonthDurationRepresentation=n;function o(y){return{...u(y),...n(y)}}It.defaultedDurationRepresentation=o;function i(y){const _=o(y),b={},m=_.year+Math.trunc(_.month/12);m&&(b.year=m,_.month%=12),_.month&&(b.month=_.month);const g=_.day+Math.trunc(_.hours/24)+Math.trunc(_.minutes/1440)+Math.trunc(_.seconds/(1440*60));g&&(b.day=g,_.hours%=24,_.minutes%=1440,_.seconds%=1440*60);const T=_.hours+Math.trunc(_.minutes/60)+Math.trunc(_.seconds/3600);T&&(b.hours=T,_.minutes%=60,_.seconds%=3600);const v=_.minutes+Math.trunc(_.seconds/60);return v&&(b.minutes=v,_.seconds%=60),_.seconds&&(b.seconds=_.seconds),b}It.simplifyDurationRepresentation=i;function t(y){return{...y,day:y.day??1,hours:y.hours??0,month:y.month??1,year:y.year??0,seconds:y.seconds??0,minutes:y.minutes??0}}It.defaultedDateTimeRepresentation=t;function e({date:y,timeZone:_}){return{year:y.getFullYear(),month:y.getMonth()+1,day:y.getDate(),hours:y.getHours(),minutes:y.getMinutes(),seconds:y.getSeconds(),zoneHours:_.zoneHours,zoneMinutes:_.zoneMinutes}}It.toDateTimeRepresentation=e;function r(y){return{year:y.year===void 0?void 0:-1*y.year,month:y.month===void 0?void 0:-1*y.month,day:y.day===void 0?void 0:-1*y.day,hours:y.hours===void 0?void 0:-1*y.hours,minutes:y.minutes===void 0?void 0:-1*y.minutes,seconds:y.seconds===void 0?void 0:-1*y.seconds}}It.negateDuration=r;function a(y){const _=new Date(y.year,y.month-1,y.day,y.hours,y.minutes,Math.trunc(y.seconds),y.seconds%1*1e3);return y.year>=0&&y.year<100&&_.setFullYear(_.getFullYear()-1900),_}It.toJSDate=a;function c(y,_){const b=a(t(y)),m=b.getTimezoneOffset(),g=y.zoneHours??_.zoneHours,T=y.zoneMinutes??_.zoneMinutes;return new Date(b.getTime()-(m+g*60+T)*60*1e3)}It.toUTCDate=c;function s(y){return{year:y.year,month:y.month}}It.trimToYearMonthDuration=s;function d(y){return{day:y.day,hours:y.hours,minutes:y.minutes,seconds:y.seconds}}It.trimToDayTimeDuration=d;function l(y){return y.year*12+y.month}It.yearMonthDurationsToMonths=l;function f(y){return((y.day*24+y.hours)*60+y.minutes)*60+y.seconds}It.dayTimeDurationsToSeconds=f;function h(y){return/(Z|([+-]\d\d:\d\d))?$/u.exec(y)[0]}It.extractRawTimeZone=h;function p(y){return{zoneHours:y.getTimezoneOffset()/60,zoneMinutes:y.getTimezoneOffset()%60}}return It.extractTimeZone=p,It}var hi={},e5;function vz(){if(e5)return hi;e5=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.elapsedDuration=hi.addDurationToDateTime=hi.maximumDayInMonthFor=void 0;const u=uv();function n(e,r,a=0){const c=e-a,s=r-a,d=Math.floor(c/s);return{intDiv:d,remainder:e-d*s}}function o(e,r){const{intDiv:a,remainder:c}=n(r,13,1),s=e+a;return[1,3,5,7,8,10,12].includes(c)?31:[4,6,9,11].includes(c)?30:c===2&&(n(s,400).remainder===0||n(s,100).remainder!==0&&n(s,4).remainder===0)?29:28}hi.maximumDayInMonthFor=o;function i(e,r){const a={...e};let c=n(e.month+r.month,13,1);for(a.month=c.remainder,a.year=e.year+r.year+c.intDiv,c=n(e.seconds+r.seconds,60),a.seconds=c.remainder,c=n(e.minutes+r.minutes+c.intDiv,60),a.minutes=c.remainder,c=n(e.hours+r.hours+c.intDiv,24),a.hours=c.remainder,a.day=e.day+r.day+c.intDiv;;){let s;if(a.day<1)a.day+=o(a.year,a.month-1),s=-1;else if(a.day>o(a.year,a.month))a.day-=o(a.year,a.month),s=1;else break;c=n(a.month+s,13,1),a.month=c.remainder,a.year+=c.intDiv}return a}hi.addDurationToDateTime=i;function t(e,r,a){const c=(0,u.toUTCDate)(e,a),s=(0,u.toUTCDate)(r,a),d=c.getTime()-s.getTime();return{day:Math.floor(d/(1e3*60*60*24)),hours:Math.floor(d%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(d%(1e3*60*60)/(1e3*60)),seconds:d%(1e3*60)}}return hi.elapsedDuration=t,hi}var t5;function OA(){if(t5)return dr;t5=1,Object.defineProperty(dr,"__esModule",{value:!0}),dr.parseDayTimeDuration=dr.parseYearMonthDuration=dr.parseDuration=dr.parseTime=dr.parseDate=dr.parseDateTime=dr.parseXSDDecimal=dr.parseXSDFloat=void 0;const u=uv(),n=Rf(),o=vz();function i(h){const p=Number(h);return Number.isNaN(p)?h==="NaN"?Number.NaN:h==="INF"||h==="+INF"?Number.POSITIVE_INFINITY:h==="-INF"?Number.NEGATIVE_INFINITY:void 0:p}dr.parseXSDFloat=i;function t(h){const p=Number(h);return Number.isNaN(p)?void 0:p}dr.parseXSDDecimal=t;function e(h){const[p,y]=h.split("T");if(y===void 0)throw new n.ParseError(h,"dateTime");return{...a(p),...c(y)}}dr.parseDateTime=e;function r(h){if(h==="")return{zoneHours:void 0,zoneMinutes:void 0};if(h==="Z")return{zoneHours:0,zoneMinutes:0};const y=h.replaceAll(/^([+|-])(\d\d):(\d\d)$/gu,"$11!$2!$3").split("!").map(Number);return{zoneHours:y[0]*y[1],zoneMinutes:y[0]*y[2]}}function a(h){const p=h.replaceAll(/^(-)?([123456789]*\d{4})-(\d\d)-(\d\d)(Z|([+-]\d\d:\d\d))?$/gu,"$11!$2!$3!$4!$5");if(p===h)throw new n.ParseError(h,"date");const y=p.split("!"),_=y.slice(0,-1).map(Number),b={year:_[0]*_[1],month:_[2],day:_[3],...r(y[4])};if(!(b.month>=1&&b.month<=12)||!(b.day>=1&&b.day<=(0,o.maximumDayInMonthFor)(b.year,b.month)))throw new n.ParseError(h,"date");return b}dr.parseDate=a;function c(h){const p=h.replaceAll(/^(\d\d):(\d\d):(\d\d(\.\d+)?)(Z|([+-]\d\d:\d\d))?$/gu,"$1!$2!$3!$5");if(p===h)throw new n.ParseError(h,"time");const y=p.split("!"),_=y.slice(0,-1).map(Number),b={hours:_[0],minutes:_[1],seconds:_[2],...r(y[3])};if(b.seconds>=60||b.minutes>=60||b.hours>24||b.hours===24&&(b.minutes!==0||b.seconds!==0))throw new n.ParseError(h,"time");return b}function s(h){const p=c(h);return p.hours%=24,p}dr.parseTime=s;function d(h){const[p,y]=h.split("T"),_=p.replaceAll(/^(-)?P(\d+Y)?(\d+M)?(\d+D)?$/gu,"$11S!$2!$3!$4");if(_===p)throw new n.ParseError(h,"duration");const b=_.split("!");if(y!==void 0){const T=y.replaceAll(/^(\d+H)?(\d+M)?(\d+(\.\d+)?S)?$/gu,"$1!$2!$3");if(y===""||y===T)throw new n.ParseError(h,"duration");b.push(...T.split("!"))}const m=b.map(T=>T.slice(0,-1));if(!m.slice(1).some(Boolean))throw new n.ParseError(h,"duration");const g=Number(m[0]);return(0,u.simplifyDurationRepresentation)({year:m[1]?g*Number(m[1]):void 0,month:m[2]?g*Number(m[2]):void 0,day:m[3]?g*Number(m[3]):void 0,hours:m[4]?g*Number(m[4]):void 0,minutes:m[5]?g*Number(m[5]):void 0,seconds:m[6]?g*Number(m[6]):void 0})}dr.parseDuration=d;function l(h){const p=d(h);if(["hours","minutes","seconds","day"].some(y=>!!p[y]))throw new n.ParseError(h,"yearMonthDuration");return p}dr.parseYearMonthDuration=l;function f(h){const p=d(h);if(["year","month"].some(y=>!!p[y]))throw new n.ParseError(h,"dayTimeDuration");return p}return dr.parseDayTimeDuration=f,dr}var r5;function UW(){if(r5)return g0;r5=1,Object.defineProperty(g0,"__esModule",{value:!0}),g0.TermTransformer=void 0;const u=tr(),n=dt(),o=Ff(),i=Ql(),t=Rf(),e=Rf(),r=OA(),a=OA(),c=Nw();let s=class{constructor(l){this.superTypeProvider=l}transformRDFTermUnsafe(l){return this.transformTerm({term:l,type:n.Algebra.types.EXPRESSION,expressionType:n.Algebra.expressionTypes.TERM})}transformTerm(l){if(!l.term)throw new t.InvalidExpression(l);switch(l.term.termType){case"Variable":return new o.Variable(u.termToString(l.term));case"Literal":return this.transformLiteral(l.term);case"NamedNode":return new o.NamedNode(l.term.value);case"BlankNode":return new o.BlankNode(l.term.value);case"Quad":return new o.Quad(this.transformRDFTermUnsafe(l.term.subject),this.transformRDFTermUnsafe(l.term.predicate),this.transformRDFTermUnsafe(l.term.object),this.transformRDFTermUnsafe(l.term.graph));case"DefaultGraph":return new o.DefaultGraph}}transformLiteral(l){if(!l.datatype||[null,void 0,""].includes(l.datatype.value))return l.language?new o.LangStringLiteral(l.value,l.language):new o.StringLiteral(l.value);const f=l.datatype.value,h=(0,c.getSuperTypeDict)(f,this.superTypeProvider);try{if(i.TypeURL.XSD_STRING in h)return new o.StringLiteral(l.value,f);if(i.TypeURL.RDF_LANG_STRING in h)return new o.LangStringLiteral(l.value,l.language);if(i.TypeURL.XSD_YEAR_MONTH_DURATION in h)return new o.YearMonthDurationLiteral((0,r.parseYearMonthDuration)(l.value),l.value,f);if(i.TypeURL.XSD_DAY_TIME_DURATION in h)return new o.DayTimeDurationLiteral((0,r.parseDayTimeDuration)(l.value),l.value,f);if(i.TypeURL.XSD_DURATION in h)return new o.DurationLiteral((0,r.parseDuration)(l.value),l.value,f);if(i.TypeURL.XSD_DATE_TIME in h){const _=new Date(l.value);return Number.isNaN(_.getTime())?new o.NonLexicalLiteral(void 0,f,this.superTypeProvider,l.value):new o.DateTimeLiteral((0,r.parseDateTime)(l.value),l.value,f)}if(i.TypeURL.XSD_DATE in h)return new o.DateLiteral((0,r.parseDate)(l.value),l.value,f);if(i.TypeURL.XSD_TIME in h)return new o.TimeLiteral((0,r.parseTime)(l.value),l.value,f);if(i.TypeURL.XSD_BOOLEAN in h)return l.value!=="true"&&l.value!=="false"&&l.value!=="1"&&l.value!=="0"?new o.NonLexicalLiteral(void 0,f,this.superTypeProvider,l.value):new o.BooleanLiteral(l.value==="true"||l.value==="1",l.value);if(i.TypeURL.XSD_DECIMAL in h){const _=a.parseXSDDecimal(l.value);return _===void 0?new o.NonLexicalLiteral(void 0,f,this.superTypeProvider,l.value):i.TypeURL.XSD_INTEGER in h?new o.IntegerLiteral(_,f,l.value):new o.DecimalLiteral(_,f,l.value)}const p=i.TypeURL.XSD_FLOAT in h,y=i.TypeURL.XSD_DOUBLE in h;if(p||y){const _=a.parseXSDFloat(l.value);return _===void 0?new o.NonLexicalLiteral(void 0,f,this.superTypeProvider,l.value):p?new o.FloatLiteral(_,f,l.value):new o.DoubleLiteral(_,f,l.value)}return new o.Literal(l.value,f,l.value)}catch(p){if((0,e.isExpressionError)(p))return new o.NonLexicalLiteral(void 0,f,this.superTypeProvider,l.value);throw p}}};return g0.TermTransformer=s,g0}var P0={},D0={},n5;function Vf(){var f,h,y,_,b,m,g,T,v,A,I,q,O,w,S,E,R,L,M,B,X,J,ie,U,fe,me,he,te,EA,Ie,Fe,pe,ye,Tz,P,D,x,Bi,$i,xA,YT,ZT,Qt,IA,$3,Ui,RA;if(n5)return D0;n5=1,Object.defineProperty(D0,"__esModule",{value:!0}),D0.LRUCache=void 0;const u=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,n=new Set,o=typeof process=="object"&&process?process:{},i=(Ae,oe,C,F)=>{typeof o.emitWarning=="function"?o.emitWarning(Ae,oe,C,F):console.error(`[${C}] ${oe}: ${Ae}`)};let t=globalThis.AbortController,e=globalThis.AbortSignal;if(typeof t>"u"){e=class{constructor(){Jt(this,"onabort");Jt(this,"_onabort",[]);Jt(this,"reason");Jt(this,"aborted",!1)}addEventListener(F,j){this._onabort.push(j)}},t=class{constructor(){Jt(this,"signal",new e);oe()}abort(F){var j,z;if(!this.signal.aborted){this.signal.reason=F,this.signal.aborted=!0;for(const Z of this.signal._onabort)Z(F);(z=(j=this.signal).onabort)==null||z.call(j,F)}}};let Ae=((f=o.env)==null?void 0:f.LRU_CACHE_IGNORE_AC_WARNING)!=="1";const oe=()=>{Ae&&(Ae=!1,i("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",oe))}}const r=Ae=>!n.has(Ae),a=Ae=>Ae&&Ae===Math.floor(Ae)&&Ae>0&&isFinite(Ae),c=Ae=>a(Ae)?Ae<=Math.pow(2,8)?Uint8Array:Ae<=Math.pow(2,16)?Uint16Array:Ae<=Math.pow(2,32)?Uint32Array:Ae<=Number.MAX_SAFE_INTEGER?s:null:null;class s extends Array{constructor(oe){super(oe),this.fill(0)}}const p=class p{constructor(oe,C){Jt(this,"heap");Jt(this,"length");if(!de(p,h))throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new C(oe),this.length=0}static create(oe){const C=c(oe);if(!C)return[];ct(p,h,!0);const F=new p(oe,C);return ct(p,h,!1),F}push(oe){this.heap[this.length++]=oe}pop(){return this.heap[--this.length]}};h=new WeakMap,Et(p,h,!1);let d=p;const Me=class Me{constructor(oe){Et(this,te);Et(this,b);Et(this,m);Et(this,g);Et(this,T);Et(this,v);Et(this,A);Jt(this,"ttl");Jt(this,"ttlResolution");Jt(this,"ttlAutopurge");Jt(this,"updateAgeOnGet");Jt(this,"updateAgeOnHas");Jt(this,"allowStale");Jt(this,"noDisposeOnSet");Jt(this,"noUpdateTTL");Jt(this,"maxEntrySize");Jt(this,"sizeCalculation");Jt(this,"noDeleteOnFetchRejection");Jt(this,"noDeleteOnStaleGet");Jt(this,"allowStaleOnFetchAbort");Jt(this,"allowStaleOnFetchRejection");Jt(this,"ignoreFetchAbort");Et(this,I);Et(this,q);Et(this,O);Et(this,w);Et(this,S);Et(this,E);Et(this,R);Et(this,L);Et(this,M);Et(this,B);Et(this,X);Et(this,J);Et(this,ie);Et(this,U);Et(this,fe);Et(this,me);Et(this,he);Et(this,Ie,()=>{});Et(this,Fe,()=>{});Et(this,pe,()=>{});Et(this,ye,()=>!1);Et(this,P,oe=>{});Et(this,D,(oe,C,F)=>{});Et(this,x,(oe,C,F,j)=>{if(F||j)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0});Jt(this,y,"LRUCache");const{max:C=0,ttl:F,ttlResolution:j=1,ttlAutopurge:z,updateAgeOnGet:Z,updateAgeOnHas:le,allowStale:ue,dispose:Pe,disposeAfter:Ve,noDisposeOnSet:Be,noUpdateTTL:Ze,maxSize:K=0,maxEntrySize:we=0,sizeCalculation:Ee,fetchMethod:$e,memoMethod:Ne,noDeleteOnFetchRejection:et,noDeleteOnStaleGet:rt,allowStaleOnFetchRejection:Ke,allowStaleOnFetchAbort:lt,ignoreFetchAbort:re}=oe;if(C!==0&&!a(C))throw new TypeError("max option must be a nonnegative integer");const ne=C?c(C):Array;if(!ne)throw new Error("invalid max value: "+C);if(ct(this,b,C),ct(this,m,K),this.maxEntrySize=we||de(this,m),this.sizeCalculation=Ee,this.sizeCalculation){if(!de(this,m)&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(Ne!==void 0&&typeof Ne!="function")throw new TypeError("memoMethod must be a function if defined");if(ct(this,A,Ne),$e!==void 0&&typeof $e!="function")throw new TypeError("fetchMethod must be a function if specified");if(ct(this,v,$e),ct(this,me,!!$e),ct(this,O,new Map),ct(this,w,new Array(C).fill(void 0)),ct(this,S,new Array(C).fill(void 0)),ct(this,E,new ne(C)),ct(this,R,new ne(C)),ct(this,L,0),ct(this,M,0),ct(this,B,d.create(C)),ct(this,I,0),ct(this,q,0),typeof Pe=="function"&&ct(this,g,Pe),typeof Ve=="function"?(ct(this,T,Ve),ct(this,X,[])):(ct(this,T,void 0),ct(this,X,void 0)),ct(this,fe,!!de(this,g)),ct(this,he,!!de(this,T)),this.noDisposeOnSet=!!Be,this.noUpdateTTL=!!Ze,this.noDeleteOnFetchRejection=!!et,this.allowStaleOnFetchRejection=!!Ke,this.allowStaleOnFetchAbort=!!lt,this.ignoreFetchAbort=!!re,this.maxEntrySize!==0){if(de(this,m)!==0&&!a(de(this,m)))throw new TypeError("maxSize must be a positive integer if specified");if(!a(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");nt(this,te,Tz).call(this)}if(this.allowStale=!!ue,this.noDeleteOnStaleGet=!!rt,this.updateAgeOnGet=!!Z,this.updateAgeOnHas=!!le,this.ttlResolution=a(j)||j===0?j:1,this.ttlAutopurge=!!z,this.ttl=F||0,this.ttl){if(!a(this.ttl))throw new TypeError("ttl must be a positive integer if specified");nt(this,te,EA).call(this)}if(de(this,b)===0&&this.ttl===0&&de(this,m)===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!de(this,b)&&!de(this,m)){const De="LRU_CACHE_UNBOUNDED";r(De)&&(n.add(De),i("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",De,Me))}}static unsafeExposeInternals(oe){return{starts:de(oe,ie),ttls:de(oe,U),sizes:de(oe,J),keyMap:de(oe,O),keyList:de(oe,w),valList:de(oe,S),next:de(oe,E),prev:de(oe,R),get head(){return de(oe,L)},get tail(){return de(oe,M)},free:de(oe,B),isBackgroundFetch:C=>{var F;return nt(F=oe,te,Qt).call(F,C)},backgroundFetch:(C,F,j,z)=>{var Z;return nt(Z=oe,te,ZT).call(Z,C,F,j,z)},moveToTail:C=>{var F;return nt(F=oe,te,$3).call(F,C)},indexes:C=>{var F;return nt(F=oe,te,Bi).call(F,C)},rindexes:C=>{var F;return nt(F=oe,te,$i).call(F,C)},isStale:C=>{var F;return de(F=oe,ye).call(F,C)}}}get max(){return de(this,b)}get maxSize(){return de(this,m)}get calculatedSize(){return de(this,q)}get size(){return de(this,I)}get fetchMethod(){return de(this,v)}get memoMethod(){return de(this,A)}get dispose(){return de(this,g)}get disposeAfter(){return de(this,T)}getRemainingTTL(oe){return de(this,O).has(oe)?1/0:0}*entries(){for(const oe of nt(this,te,Bi).call(this))de(this,S)[oe]!==void 0&&de(this,w)[oe]!==void 0&&!nt(this,te,Qt).call(this,de(this,S)[oe])&&(yield[de(this,w)[oe],de(this,S)[oe]])}*rentries(){for(const oe of nt(this,te,$i).call(this))de(this,S)[oe]!==void 0&&de(this,w)[oe]!==void 0&&!nt(this,te,Qt).call(this,de(this,S)[oe])&&(yield[de(this,w)[oe],de(this,S)[oe]])}*keys(){for(const oe of nt(this,te,Bi).call(this)){const C=de(this,w)[oe];C!==void 0&&!nt(this,te,Qt).call(this,de(this,S)[oe])&&(yield C)}}*rkeys(){for(const oe of nt(this,te,$i).call(this)){const C=de(this,w)[oe];C!==void 0&&!nt(this,te,Qt).call(this,de(this,S)[oe])&&(yield C)}}*values(){for(const oe of nt(this,te,Bi).call(this))de(this,S)[oe]!==void 0&&!nt(this,te,Qt).call(this,de(this,S)[oe])&&(yield de(this,S)[oe])}*rvalues(){for(const oe of nt(this,te,$i).call(this))de(this,S)[oe]!==void 0&&!nt(this,te,Qt).call(this,de(this,S)[oe])&&(yield de(this,S)[oe])}[(_=Symbol.iterator,y=Symbol.toStringTag,_)](){return this.entries()}find(oe,C={}){for(const F of nt(this,te,Bi).call(this)){const j=de(this,S)[F],z=nt(this,te,Qt).call(this,j)?j.__staleWhileFetching:j;if(z!==void 0&&oe(z,de(this,w)[F],this))return this.get(de(this,w)[F],C)}}forEach(oe,C=this){for(const F of nt(this,te,Bi).call(this)){const j=de(this,S)[F],z=nt(this,te,Qt).call(this,j)?j.__staleWhileFetching:j;z!==void 0&&oe.call(C,z,de(this,w)[F],this)}}rforEach(oe,C=this){for(const F of nt(this,te,$i).call(this)){const j=de(this,S)[F],z=nt(this,te,Qt).call(this,j)?j.__staleWhileFetching:j;z!==void 0&&oe.call(C,z,de(this,w)[F],this)}}purgeStale(){let oe=!1;for(const C of nt(this,te,$i).call(this,{allowStale:!0}))de(this,ye).call(this,C)&&(nt(this,te,Ui).call(this,de(this,w)[C],"expire"),oe=!0);return oe}info(oe){const C=de(this,O).get(oe);if(C===void 0)return;const F=de(this,S)[C],j=nt(this,te,Qt).call(this,F)?F.__staleWhileFetching:F;if(j===void 0)return;const z={value:j};if(de(this,U)&&de(this,ie)){const Z=de(this,U)[C],le=de(this,ie)[C];if(Z&&le){const ue=Z-(u.now()-le);z.ttl=ue,z.start=Date.now()}}return de(this,J)&&(z.size=de(this,J)[C]),z}dump(){const oe=[];for(const C of nt(this,te,Bi).call(this,{allowStale:!0})){const F=de(this,w)[C],j=de(this,S)[C],z=nt(this,te,Qt).call(this,j)?j.__staleWhileFetching:j;if(z===void 0||F===void 0)continue;const Z={value:z};if(de(this,U)&&de(this,ie)){Z.ttl=de(this,U)[C];const le=u.now()-de(this,ie)[C];Z.start=Math.floor(Date.now()-le)}de(this,J)&&(Z.size=de(this,J)[C]),oe.unshift([F,Z])}return oe}load(oe){this.clear();for(const[C,F]of oe){if(F.start){const j=Date.now()-F.start;F.start=u.now()-j}this.set(C,F.value,F)}}set(oe,C,F={}){var Ze,K,we,Ee,$e;if(C===void 0)return this.delete(oe),this;const{ttl:j=this.ttl,start:z,noDisposeOnSet:Z=this.noDisposeOnSet,sizeCalculation:le=this.sizeCalculation,status:ue}=F;let{noUpdateTTL:Pe=this.noUpdateTTL}=F;const Ve=de(this,x).call(this,oe,C,F.size||0,le);if(this.maxEntrySize&&Ve>this.maxEntrySize)return ue&&(ue.set="miss",ue.maxEntrySizeExceeded=!0),nt(this,te,Ui).call(this,oe,"set"),this;let Be=de(this,I)===0?void 0:de(this,O).get(oe);if(Be===void 0)Be=de(this,I)===0?de(this,M):de(this,B).length!==0?de(this,B).pop():de(this,I)===de(this,b)?nt(this,te,YT).call(this,!1):de(this,I),de(this,w)[Be]=oe,de(this,S)[Be]=C,de(this,O).set(oe,Be),de(this,E)[de(this,M)]=Be,de(this,R)[Be]=de(this,M),ct(this,M,Be),iT(this,I)._++,de(this,D).call(this,Be,Ve,ue),ue&&(ue.set="add"),Pe=!1;else{nt(this,te,$3).call(this,Be);const Ne=de(this,S)[Be];if(C!==Ne){if(de(this,me)&&nt(this,te,Qt).call(this,Ne)){Ne.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:et}=Ne;et!==void 0&&!Z&&(de(this,fe)&&((Ze=de(this,g))==null||Ze.call(this,et,oe,"set")),de(this,he)&&((K=de(this,X))==null||K.push([et,oe,"set"])))}else Z||(de(this,fe)&&((we=de(this,g))==null||we.call(this,Ne,oe,"set")),de(this,he)&&((Ee=de(this,X))==null||Ee.push([Ne,oe,"set"])));if(de(this,P).call(this,Be),de(this,D).call(this,Be,Ve,ue),de(this,S)[Be]=C,ue){ue.set="replace";const et=Ne&&nt(this,te,Qt).call(this,Ne)?Ne.__staleWhileFetching:Ne;et!==void 0&&(ue.oldValue=et)}}else ue&&(ue.set="update")}if(j!==0&&!de(this,U)&&nt(this,te,EA).call(this),de(this,U)&&(Pe||de(this,pe).call(this,Be,j,z),ue&&de(this,Fe).call(this,ue,Be)),!Z&&de(this,he)&&de(this,X)){const Ne=de(this,X);let et;for(;et=Ne==null?void 0:Ne.shift();)($e=de(this,T))==null||$e.call(this,...et)}return this}pop(){var oe;try{for(;de(this,I);){const C=de(this,S)[de(this,L)];if(nt(this,te,YT).call(this,!0),nt(this,te,Qt).call(this,C)){if(C.__staleWhileFetching)return C.__staleWhileFetching}else if(C!==void 0)return C}}finally{if(de(this,he)&&de(this,X)){const C=de(this,X);let F;for(;F=C==null?void 0:C.shift();)(oe=de(this,T))==null||oe.call(this,...F)}}}has(oe,C={}){const{updateAgeOnHas:F=this.updateAgeOnHas,status:j}=C,z=de(this,O).get(oe);if(z!==void 0){const Z=de(this,S)[z];if(nt(this,te,Qt).call(this,Z)&&Z.__staleWhileFetching===void 0)return!1;if(de(this,ye).call(this,z))j&&(j.has="stale",de(this,Fe).call(this,j,z));else return F&&de(this,Ie).call(this,z),j&&(j.has="hit",de(this,Fe).call(this,j,z)),!0}else j&&(j.has="miss");return!1}peek(oe,C={}){const{allowStale:F=this.allowStale}=C,j=de(this,O).get(oe);if(j===void 0||!F&&de(this,ye).call(this,j))return;const z=de(this,S)[j];return nt(this,te,Qt).call(this,z)?z.__staleWhileFetching:z}async fetch(oe,C={}){const{allowStale:F=this.allowStale,updateAgeOnGet:j=this.updateAgeOnGet,noDeleteOnStaleGet:z=this.noDeleteOnStaleGet,ttl:Z=this.ttl,noDisposeOnSet:le=this.noDisposeOnSet,size:ue=0,sizeCalculation:Pe=this.sizeCalculation,noUpdateTTL:Ve=this.noUpdateTTL,noDeleteOnFetchRejection:Be=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:Ze=this.allowStaleOnFetchRejection,ignoreFetchAbort:K=this.ignoreFetchAbort,allowStaleOnFetchAbort:we=this.allowStaleOnFetchAbort,context:Ee,forceRefresh:$e=!1,status:Ne,signal:et}=C;if(!de(this,me))return Ne&&(Ne.fetch="get"),this.get(oe,{allowStale:F,updateAgeOnGet:j,noDeleteOnStaleGet:z,status:Ne});const rt={allowStale:F,updateAgeOnGet:j,noDeleteOnStaleGet:z,ttl:Z,noDisposeOnSet:le,size:ue,sizeCalculation:Pe,noUpdateTTL:Ve,noDeleteOnFetchRejection:Be,allowStaleOnFetchRejection:Ze,allowStaleOnFetchAbort:we,ignoreFetchAbort:K,status:Ne,signal:et};let Ke=de(this,O).get(oe);if(Ke===void 0){Ne&&(Ne.fetch="miss");const lt=nt(this,te,ZT).call(this,oe,Ke,rt,Ee);return lt.__returned=lt}else{const lt=de(this,S)[Ke];if(nt(this,te,Qt).call(this,lt)){const Qe=F&&lt.__staleWhileFetching!==void 0;return Ne&&(Ne.fetch="inflight",Qe&&(Ne.returnedStale=!0)),Qe?lt.__staleWhileFetching:lt.__returned=lt}const re=de(this,ye).call(this,Ke);if(!$e&&!re)return Ne&&(Ne.fetch="hit"),nt(this,te,$3).call(this,Ke),j&&de(this,Ie).call(this,Ke),Ne&&de(this,Fe).call(this,Ne,Ke),lt;const ne=nt(this,te,ZT).call(this,oe,Ke,rt,Ee),qe=ne.__staleWhileFetching!==void 0&&F;return Ne&&(Ne.fetch=re?"stale":"refresh",qe&&re&&(Ne.returnedStale=!0)),qe?ne.__staleWhileFetching:ne.__returned=ne}}async forceFetch(oe,C={}){const F=await this.fetch(oe,C);if(F===void 0)throw new Error("fetch() returned undefined");return F}memo(oe,C={}){const F=de(this,A);if(!F)throw new Error("no memoMethod provided to constructor");const{context:j,forceRefresh:z,...Z}=C,le=this.get(oe,Z);if(!z&&le!==void 0)return le;const ue=F(oe,le,{options:Z,context:j});return this.set(oe,ue,Z),ue}get(oe,C={}){const{allowStale:F=this.allowStale,updateAgeOnGet:j=this.updateAgeOnGet,noDeleteOnStaleGet:z=this.noDeleteOnStaleGet,status:Z}=C,le=de(this,O).get(oe);if(le!==void 0){const ue=de(this,S)[le],Pe=nt(this,te,Qt).call(this,ue);return Z&&de(this,Fe).call(this,Z,le),de(this,ye).call(this,le)?(Z&&(Z.get="stale"),Pe?(Z&&F&&ue.__staleWhileFetching!==void 0&&(Z.returnedStale=!0),F?ue.__staleWhileFetching:void 0):(z||nt(this,te,Ui).call(this,oe,"expire"),Z&&F&&(Z.returnedStale=!0),F?ue:void 0)):(Z&&(Z.get="hit"),Pe?ue.__staleWhileFetching:(nt(this,te,$3).call(this,le),j&&de(this,Ie).call(this,le),ue))}else Z&&(Z.get="miss")}delete(oe){return nt(this,te,Ui).call(this,oe,"delete")}clear(){return nt(this,te,RA).call(this,"delete")}};b=new WeakMap,m=new WeakMap,g=new WeakMap,T=new WeakMap,v=new WeakMap,A=new WeakMap,I=new WeakMap,q=new WeakMap,O=new WeakMap,w=new WeakMap,S=new WeakMap,E=new WeakMap,R=new WeakMap,L=new WeakMap,M=new WeakMap,B=new WeakMap,X=new WeakMap,J=new WeakMap,ie=new WeakMap,U=new WeakMap,fe=new WeakMap,me=new WeakMap,he=new WeakMap,te=new WeakSet,EA=function(){const oe=new s(de(this,b)),C=new s(de(this,b));ct(this,U,oe),ct(this,ie,C),ct(this,pe,(z,Z,le=u.now())=>{if(C[z]=Z!==0?le:0,oe[z]=Z,Z!==0&&this.ttlAutopurge){const ue=setTimeout(()=>{de(this,ye).call(this,z)&&nt(this,te,Ui).call(this,de(this,w)[z],"expire")},Z+1);ue.unref&&ue.unref()}}),ct(this,Ie,z=>{C[z]=oe[z]!==0?u.now():0}),ct(this,Fe,(z,Z)=>{if(oe[Z]){const le=oe[Z],ue=C[Z];if(!le||!ue)return;z.ttl=le,z.start=ue,z.now=F||j();const Pe=z.now-ue;z.remainingTTL=le-Pe}});let F=0;const j=()=>{const z=u.now();if(this.ttlResolution>0){F=z;const Z=setTimeout(()=>F=0,this.ttlResolution);Z.unref&&Z.unref()}return z};this.getRemainingTTL=z=>{const Z=de(this,O).get(z);if(Z===void 0)return 0;const le=oe[Z],ue=C[Z];if(!le||!ue)return 1/0;const Pe=(F||j())-ue;return le-Pe},ct(this,ye,z=>{const Z=C[z],le=oe[z];return!!le&&!!Z&&(F||j())-Z>le})},Ie=new WeakMap,Fe=new WeakMap,pe=new WeakMap,ye=new WeakMap,Tz=function(){const oe=new s(de(this,b));ct(this,q,0),ct(this,J,oe),ct(this,P,C=>{ct(this,q,de(this,q)-oe[C]),oe[C]=0}),ct(this,x,(C,F,j,z)=>{if(nt(this,te,Qt).call(this,F))return 0;if(!a(j))if(z){if(typeof z!="function")throw new TypeError("sizeCalculation must be a function");if(j=z(F,C),!a(j))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return j}),ct(this,D,(C,F,j)=>{if(oe[C]=F,de(this,m)){const z=de(this,m)-oe[C];for(;de(this,q)>z;)nt(this,te,YT).call(this,!0)}ct(this,q,de(this,q)+oe[C]),j&&(j.entrySize=F,j.totalCalculatedSize=de(this,q))})},P=new WeakMap,D=new WeakMap,x=new WeakMap,Bi=function*({allowStale:oe=this.allowStale}={}){if(de(this,I))for(let C=de(this,M);!(!nt(this,te,xA).call(this,C)||((oe||!de(this,ye).call(this,C))&&(yield C),C===de(this,L)));)C=de(this,R)[C]},$i=function*({allowStale:oe=this.allowStale}={}){if(de(this,I))for(let C=de(this,L);!(!nt(this,te,xA).call(this,C)||((oe||!de(this,ye).call(this,C))&&(yield C),C===de(this,M)));)C=de(this,E)[C]},xA=function(oe){return oe!==void 0&&de(this,O).get(de(this,w)[oe])===oe},YT=function(oe){var z,Z;const C=de(this,L),F=de(this,w)[C],j=de(this,S)[C];return de(this,me)&&nt(this,te,Qt).call(this,j)?j.__abortController.abort(new Error("evicted")):(de(this,fe)||de(this,he))&&(de(this,fe)&&((z=de(this,g))==null||z.call(this,j,F,"evict")),de(this,he)&&((Z=de(this,X))==null||Z.push([j,F,"evict"]))),de(this,P).call(this,C),oe&&(de(this,w)[C]=void 0,de(this,S)[C]=void 0,de(this,B).push(C)),de(this,I)===1?(ct(this,L,ct(this,M,0)),de(this,B).length=0):ct(this,L,de(this,E)[C]),de(this,O).delete(F),iT(this,I)._--,C},ZT=function(oe,C,F,j){const z=C===void 0?void 0:de(this,S)[C];if(nt(this,te,Qt).call(this,z))return z;const Z=new t,{signal:le}=F;le==null||le.addEventListener("abort",()=>Z.abort(le.reason),{signal:Z.signal});const ue={signal:Z.signal,options:F,context:j},Pe=(Ee,$e=!1)=>{const{aborted:Ne}=Z.signal,et=F.ignoreFetchAbort&&Ee!==void 0;if(F.status&&(Ne&&!$e?(F.status.fetchAborted=!0,F.status.fetchError=Z.signal.reason,et&&(F.status.fetchAbortIgnored=!0)):F.status.fetchResolved=!0),Ne&&!et&&!$e)return Be(Z.signal.reason);const rt=K;return de(this,S)[C]===K&&(Ee===void 0?rt.__staleWhileFetching?de(this,S)[C]=rt.__staleWhileFetching:nt(this,te,Ui).call(this,oe,"fetch"):(F.status&&(F.status.fetchUpdated=!0),this.set(oe,Ee,ue.options))),Ee},Ve=Ee=>(F.status&&(F.status.fetchRejected=!0,F.status.fetchError=Ee),Be(Ee)),Be=Ee=>{const{aborted:$e}=Z.signal,Ne=$e&&F.allowStaleOnFetchAbort,et=Ne||F.allowStaleOnFetchRejection,rt=et||F.noDeleteOnFetchRejection,Ke=K;if(de(this,S)[C]===K&&(!rt||Ke.__staleWhileFetching===void 0?nt(this,te,Ui).call(this,oe,"fetch"):Ne||(de(this,S)[C]=Ke.__staleWhileFetching)),et)return F.status&&Ke.__staleWhileFetching!==void 0&&(F.status.returnedStale=!0),Ke.__staleWhileFetching;if(Ke.__returned===Ke)throw Ee},Ze=(Ee,$e)=>{var et;const Ne=(et=de(this,v))==null?void 0:et.call(this,oe,z,ue);Ne&&Ne instanceof Promise&&Ne.then(rt=>Ee(rt===void 0?void 0:rt),$e),Z.signal.addEventListener("abort",()=>{(!F.ignoreFetchAbort||F.allowStaleOnFetchAbort)&&(Ee(void 0),F.allowStaleOnFetchAbort&&(Ee=rt=>Pe(rt,!0)))})};F.status&&(F.status.fetchDispatched=!0);const K=new Promise(Ze).then(Pe,Ve),we=Object.assign(K,{__abortController:Z,__staleWhileFetching:z,__returned:void 0});return C===void 0?(this.set(oe,we,{...ue.options,status:void 0}),C=de(this,O).get(oe)):de(this,S)[C]=we,we},Qt=function(oe){if(!de(this,me))return!1;const C=oe;return!!C&&C instanceof Promise&&C.hasOwnProperty("__staleWhileFetching")&&C.__abortController instanceof t},IA=function(oe,C){de(this,R)[C]=oe,de(this,E)[oe]=C},$3=function(oe){oe!==de(this,M)&&(oe===de(this,L)?ct(this,L,de(this,E)[oe]):nt(this,te,IA).call(this,de(this,R)[oe],de(this,E)[oe]),nt(this,te,IA).call(this,de(this,M),oe),ct(this,M,oe))},Ui=function(oe,C){var j,z,Z,le;let F=!1;if(de(this,I)!==0){const ue=de(this,O).get(oe);if(ue!==void 0)if(F=!0,de(this,I)===1)nt(this,te,RA).call(this,C);else{de(this,P).call(this,ue);const Pe=de(this,S)[ue];if(nt(this,te,Qt).call(this,Pe)?Pe.__abortController.abort(new Error("deleted")):(de(this,fe)||de(this,he))&&(de(this,fe)&&((j=de(this,g))==null||j.call(this,Pe,oe,C)),de(this,he)&&((z=de(this,X))==null||z.push([Pe,oe,C]))),de(this,O).delete(oe),de(this,w)[ue]=void 0,de(this,S)[ue]=void 0,ue===de(this,M))ct(this,M,de(this,R)[ue]);else if(ue===de(this,L))ct(this,L,de(this,E)[ue]);else{const Ve=de(this,R)[ue];de(this,E)[Ve]=de(this,E)[ue];const Be=de(this,E)[ue];de(this,R)[Be]=de(this,R)[ue]}iT(this,I)._--,de(this,B).push(ue)}}if(de(this,he)&&((Z=de(this,X))!=null&&Z.length)){const ue=de(this,X);let Pe;for(;Pe=ue==null?void 0:ue.shift();)(le=de(this,T))==null||le.call(this,...Pe)}return F},RA=function(oe){var C,F,j;for(const z of nt(this,te,$i).call(this,{allowStale:!0})){const Z=de(this,S)[z];if(nt(this,te,Qt).call(this,Z))Z.__abortController.abort(new Error("deleted"));else{const le=de(this,w)[z];de(this,fe)&&((C=de(this,g))==null||C.call(this,Z,le,oe)),de(this,he)&&((F=de(this,X))==null||F.push([Z,le,oe]))}}if(de(this,O).clear(),de(this,S).fill(void 0),de(this,w).fill(void 0),de(this,U)&&de(this,ie)&&(de(this,U).fill(0),de(this,ie).fill(0)),de(this,J)&&de(this,J).fill(0),ct(this,L,0),ct(this,M,0),de(this,B).length=0,ct(this,q,0),ct(this,I,0),de(this,he)&&de(this,X)){const z=de(this,X);let Z;for(;Z=z==null?void 0:z.shift();)(j=de(this,T))==null||j.call(this,...Z)}};let l=Me;return D0.LRUCache=l,D0}var i5;function VW(){if(i5)return P0;i5=1,Object.defineProperty(P0,"__esModule",{value:!0}),P0.prepareEvaluatorActionContext=void 0;const u=Ce(),n=Vf(),o=uv();function i(t){let e=t;if(e.has(u.KeysInitQuery.extensionFunctionCreator)&&e.has(u.KeysInitQuery.extensionFunctions))throw new Error("Illegal simultaneous usage of extensionFunctionCreator and extensionFunctions in context");if(e.has(u.KeysInitQuery.extensionFunctionCreator))e=e.set(u.KeysExpressionEvaluator.extensionFunctionCreator,e.get(u.KeysInitQuery.extensionFunctionCreator));else if(e.has(u.KeysInitQuery.extensionFunctions)){const r=e.getSafe(u.KeysInitQuery.extensionFunctions);e=e.set(u.KeysExpressionEvaluator.extensionFunctionCreator,async a=>r[a.value])}else e=e.setDefault(u.KeysExpressionEvaluator.extensionFunctionCreator,async()=>{});return e=e.setDefault(u.KeysExpressionEvaluator.defaultTimeZone,(0,o.extractTimeZone)(e.getSafe(u.KeysInitQuery.queryTimestamp))),e=e.setDefault(u.KeysExpressionEvaluator.superTypeProvider,{cache:new n.LRUCache({max:1e3}),discoverer:()=>"term"}),e}return P0.prepareEvaluatorActionContext=i,P0}var a5;function ge(){return a5||(a5=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.LangStringLiteral=u.TimeLiteral=u.DurationLiteral=u.DateLiteral=u.DayTimeDurationLiteral=u.DateTimeLiteral=u.yearMonthDurationsToMonths=u.toUTCDate=u.toDateTimeRepresentation=u.negateDuration=u.extractRawTimeZone=u.defaultedYearMonthDurationRepresentation=u.defaultedDurationRepresentation=u.defaultedDayTimeDurationRepresentation=u.defaultedDateTimeRepresentation=u.dayTimeDurationsToSeconds=u.isSubTypeOf=u.SparqlOperator=u.TypeAlias=u.TypeURL=u.typedLiteral=u.InvalidArity=u.InvalidLexicalForm=u.ExtensionFunctionError=u.CastError=u.UnboundVariableError=u.NoAggregator=u.InError=u.CoalesceError=u.InvalidArgumentTypes=u.InvalidTimezoneCall=u.IncompatibleLanguageOperation=u.RDFEqualTypeError=u.EmptyAggregateError=u.isExpressionError=u.ExpressionError=u.Builder=u.expressionToVar=u.float=u.decimal=u.langString=u.dateTime=u.integer=u.double=u.string=u.bool=u.declare=u.prepareEvaluatorActionContext=u.OverloadTree=u.TermTransformer=void 0,u.trimToDayTimeDuration=u.trimToYearMonthDuration=u.parseDate=u.parseXSDFloat=u.parseXSDDecimal=u.parseYearMonthDuration=u.parseTime=u.parseDuration=u.parseDayTimeDuration=u.parseDateTime=u.elapsedDuration=u.addDurationToDateTime=u.isNonLexicalLiteral=u.StringLiteral=u.NonLexicalLiteral=u.FloatLiteral=u.IntegerLiteral=u.Literal=u.Existence=u.Aggregate=u.DoubleLiteral=u.DefaultGraph=u.DecimalLiteral=u.BlankNode=u.BooleanLiteral=u.NumericLiteral=u.Variable=u.NamedNode=u.Operator=u.Quad=u.YearMonthDurationLiteral=u.Term=void 0;var n=UW();Object.defineProperty(u,"TermTransformer",{enumerable:!0,get:function(){return n.TermTransformer}});var o=gz();Object.defineProperty(u,"OverloadTree",{enumerable:!0,get:function(){return o.OverloadTree}});var i=VW();Object.defineProperty(u,"prepareEvaluatorActionContext",{enumerable:!0,get:function(){return i.prepareEvaluatorActionContext}});var t=mz();Object.defineProperty(u,"declare",{enumerable:!0,get:function(){return t.declare}}),Object.defineProperty(u,"bool",{enumerable:!0,get:function(){return t.bool}}),Object.defineProperty(u,"string",{enumerable:!0,get:function(){return t.string}}),Object.defineProperty(u,"double",{enumerable:!0,get:function(){return t.double}}),Object.defineProperty(u,"integer",{enumerable:!0,get:function(){return t.integer}}),Object.defineProperty(u,"dateTime",{enumerable:!0,get:function(){return t.dateTime}}),Object.defineProperty(u,"langString",{enumerable:!0,get:function(){return t.langString}}),Object.defineProperty(u,"decimal",{enumerable:!0,get:function(){return t.decimal}}),Object.defineProperty(u,"float",{enumerable:!0,get:function(){return t.float}}),Object.defineProperty(u,"expressionToVar",{enumerable:!0,get:function(){return t.expressionToVar}}),Object.defineProperty(u,"Builder",{enumerable:!0,get:function(){return t.Builder}});var e=Rf();Object.defineProperty(u,"ExpressionError",{enumerable:!0,get:function(){return e.ExpressionError}}),Object.defineProperty(u,"isExpressionError",{enumerable:!0,get:function(){return e.isExpressionError}}),Object.defineProperty(u,"EmptyAggregateError",{enumerable:!0,get:function(){return e.EmptyAggregateError}}),Object.defineProperty(u,"RDFEqualTypeError",{enumerable:!0,get:function(){return e.RDFEqualTypeError}}),Object.defineProperty(u,"IncompatibleLanguageOperation",{enumerable:!0,get:function(){return e.IncompatibleLanguageOperation}}),Object.defineProperty(u,"InvalidTimezoneCall",{enumerable:!0,get:function(){return e.InvalidTimezoneCall}}),Object.defineProperty(u,"InvalidArgumentTypes",{enumerable:!0,get:function(){return e.InvalidArgumentTypes}}),Object.defineProperty(u,"CoalesceError",{enumerable:!0,get:function(){return e.CoalesceError}}),Object.defineProperty(u,"InError",{enumerable:!0,get:function(){return e.InError}}),Object.defineProperty(u,"NoAggregator",{enumerable:!0,get:function(){return e.NoAggregator}}),Object.defineProperty(u,"UnboundVariableError",{enumerable:!0,get:function(){return e.UnboundVariableError}}),Object.defineProperty(u,"CastError",{enumerable:!0,get:function(){return e.CastError}}),Object.defineProperty(u,"ExtensionFunctionError",{enumerable:!0,get:function(){return e.ExtensionFunctionError}}),Object.defineProperty(u,"InvalidLexicalForm",{enumerable:!0,get:function(){return e.InvalidLexicalForm}}),Object.defineProperty(u,"InvalidArity",{enumerable:!0,get:function(){return e.InvalidArity}});var r=Ql();Object.defineProperty(u,"typedLiteral",{enumerable:!0,get:function(){return r.typedLiteral}}),Object.defineProperty(u,"TypeURL",{enumerable:!0,get:function(){return r.TypeURL}}),Object.defineProperty(u,"TypeAlias",{enumerable:!0,get:function(){return r.TypeAlias}}),Object.defineProperty(u,"SparqlOperator",{enumerable:!0,get:function(){return r.SparqlOperator}});var a=Nw();Object.defineProperty(u,"isSubTypeOf",{enumerable:!0,get:function(){return a.isSubTypeOf}});var c=uv();Object.defineProperty(u,"dayTimeDurationsToSeconds",{enumerable:!0,get:function(){return c.dayTimeDurationsToSeconds}}),Object.defineProperty(u,"defaultedDateTimeRepresentation",{enumerable:!0,get:function(){return c.defaultedDateTimeRepresentation}}),Object.defineProperty(u,"defaultedDayTimeDurationRepresentation",{enumerable:!0,get:function(){return c.defaultedDayTimeDurationRepresentation}}),Object.defineProperty(u,"defaultedDurationRepresentation",{enumerable:!0,get:function(){return c.defaultedDurationRepresentation}}),Object.defineProperty(u,"defaultedYearMonthDurationRepresentation",{enumerable:!0,get:function(){return c.defaultedYearMonthDurationRepresentation}}),Object.defineProperty(u,"extractRawTimeZone",{enumerable:!0,get:function(){return c.extractRawTimeZone}}),Object.defineProperty(u,"negateDuration",{enumerable:!0,get:function(){return c.negateDuration}}),Object.defineProperty(u,"toDateTimeRepresentation",{enumerable:!0,get:function(){return c.toDateTimeRepresentation}}),Object.defineProperty(u,"toUTCDate",{enumerable:!0,get:function(){return c.toUTCDate}}),Object.defineProperty(u,"yearMonthDurationsToMonths",{enumerable:!0,get:function(){return c.yearMonthDurationsToMonths}});var s=Ff();Object.defineProperty(u,"DateTimeLiteral",{enumerable:!0,get:function(){return s.DateTimeLiteral}}),Object.defineProperty(u,"DayTimeDurationLiteral",{enumerable:!0,get:function(){return s.DayTimeDurationLiteral}}),Object.defineProperty(u,"DateLiteral",{enumerable:!0,get:function(){return s.DateLiteral}}),Object.defineProperty(u,"DurationLiteral",{enumerable:!0,get:function(){return s.DurationLiteral}}),Object.defineProperty(u,"TimeLiteral",{enumerable:!0,get:function(){return s.TimeLiteral}}),Object.defineProperty(u,"LangStringLiteral",{enumerable:!0,get:function(){return s.LangStringLiteral}}),Object.defineProperty(u,"Term",{enumerable:!0,get:function(){return s.Term}}),Object.defineProperty(u,"YearMonthDurationLiteral",{enumerable:!0,get:function(){return s.YearMonthDurationLiteral}}),Object.defineProperty(u,"Quad",{enumerable:!0,get:function(){return s.Quad}}),Object.defineProperty(u,"Operator",{enumerable:!0,get:function(){return s.Operator}}),Object.defineProperty(u,"NamedNode",{enumerable:!0,get:function(){return s.NamedNode}}),Object.defineProperty(u,"Variable",{enumerable:!0,get:function(){return s.Variable}}),Object.defineProperty(u,"NumericLiteral",{enumerable:!0,get:function(){return s.NumericLiteral}}),Object.defineProperty(u,"BooleanLiteral",{enumerable:!0,get:function(){return s.BooleanLiteral}}),Object.defineProperty(u,"BlankNode",{enumerable:!0,get:function(){return s.BlankNode}}),Object.defineProperty(u,"DecimalLiteral",{enumerable:!0,get:function(){return s.DecimalLiteral}}),Object.defineProperty(u,"DefaultGraph",{enumerable:!0,get:function(){return s.DefaultGraph}}),Object.defineProperty(u,"DoubleLiteral",{enumerable:!0,get:function(){return s.DoubleLiteral}}),Object.defineProperty(u,"Aggregate",{enumerable:!0,get:function(){return s.Aggregate}}),Object.defineProperty(u,"Existence",{enumerable:!0,get:function(){return s.Existence}}),Object.defineProperty(u,"Literal",{enumerable:!0,get:function(){return s.Literal}}),Object.defineProperty(u,"IntegerLiteral",{enumerable:!0,get:function(){return s.IntegerLiteral}}),Object.defineProperty(u,"FloatLiteral",{enumerable:!0,get:function(){return s.FloatLiteral}}),Object.defineProperty(u,"NonLexicalLiteral",{enumerable:!0,get:function(){return s.NonLexicalLiteral}}),Object.defineProperty(u,"StringLiteral",{enumerable:!0,get:function(){return s.StringLiteral}}),Object.defineProperty(u,"isNonLexicalLiteral",{enumerable:!0,get:function(){return s.isNonLexicalLiteral}});var d=vz();Object.defineProperty(u,"addDurationToDateTime",{enumerable:!0,get:function(){return d.addDurationToDateTime}}),Object.defineProperty(u,"elapsedDuration",{enumerable:!0,get:function(){return d.elapsedDuration}});var l=OA();Object.defineProperty(u,"parseDateTime",{enumerable:!0,get:function(){return l.parseDateTime}}),Object.defineProperty(u,"parseDayTimeDuration",{enumerable:!0,get:function(){return l.parseDayTimeDuration}}),Object.defineProperty(u,"parseDuration",{enumerable:!0,get:function(){return l.parseDuration}}),Object.defineProperty(u,"parseTime",{enumerable:!0,get:function(){return l.parseTime}}),Object.defineProperty(u,"parseYearMonthDuration",{enumerable:!0,get:function(){return l.parseYearMonthDuration}}),Object.defineProperty(u,"parseXSDDecimal",{enumerable:!0,get:function(){return l.parseXSDDecimal}}),Object.defineProperty(u,"parseXSDFloat",{enumerable:!0,get:function(){return l.parseXSDFloat}}),Object.defineProperty(u,"parseDate",{enumerable:!0,get:function(){return l.parseDate}});var f=uv();Object.defineProperty(u,"trimToYearMonthDuration",{enumerable:!0,get:function(){return f.trimToYearMonthDuration}}),Object.defineProperty(u,"trimToDayTimeDuration",{enumerable:!0,get:function(){return f.trimToDayTimeDuration}})})(J6)),J6}var u5;function wz(){if(u5)return Ra;u5=1,Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.TermFunctionBase=Ra.ExpressionFunctionBase=void 0;const u=Ce(),n=ge();class o{constructor({arity:e,operator:r,apply:a}){this.arity=e,this.operator=r,this.apply=a}checkArity(e){return Array.isArray(this.arity)?this.arity.includes(e.length):this.arity===Number.POSITIVE_INFINITY?!0:e.length===this.arity}}Ra.ExpressionFunctionBase=o;class i extends o{constructor({arity:e,operator:r,overloads:a}){super({arity:e,operator:r,apply:async({args:c,exprEval:s,mapping:d})=>this.applyOnTerms(await Promise.all(c.map(l=>s.evaluatorExpressionEvaluation(l,d))),s)}),this.supportsTermExpressions=!0,this.overloads=a}applyOnTerms(e,r){return(this.overloads.search(e,r.context.getSafe(u.KeysExpressionEvaluator.superTypeProvider),r.context.getSafe(u.KeysInitQuery.functionArgumentsCache))??this.handleInvalidTypes(e))(r)(e)}handleInvalidTypes(e){throw new n.InvalidArgumentTypes(e,this.operator)}}return Ra.TermFunctionBase=i,Ra}var o5;function Te(){return o5||(o5=1,(function(u){var n=xa&&xa.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=xa&&xa.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(oz(),u),o(bW(),u),o(yW(),u),o(wz(),u)})(xa)),xa}var La={},j0={},s5;function Sz(){if(s5)return j0;s5=1,Object.defineProperty(j0,"__esModule",{value:!0}),j0.ActorQueryOperation=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i)}};return j0.ActorQueryOperation=n,j0}var L0={},Ma={},M0={},c5;function QW(){if(c5)return M0;c5=1,Object.defineProperty(M0,"__esModule",{value:!0}),M0.MetadataValidationState=void 0;let u=class{constructor(){this.invalidateListeners=[],this.valid=!0}addInvalidateListener(o){this.invalidateListeners.push(o)}invalidate(){if(this.valid){this.valid=!1;for(const o of this.invalidateListeners)o()}}};return M0.MetadataValidationState=u,M0}var Zr={},d5;function HW(){if(d5)return Zr;d5=1,Object.defineProperty(Zr,"__esModule",{value:!0}),Zr.cachifyMetadata=Zr.validateMetadataBindings=Zr.validateMetadataQuads=Zr.getMetadataBindings=Zr.getMetadataQuads=void 0;function u(e){return t(()=>new Promise((r,a)=>{e.getProperty("metadata",c=>r(c)),e.on("error",a)}).then(r=>o(r)))}Zr.getMetadataQuads=u;function n(e){return t(()=>new Promise((r,a)=>{e.getProperty("metadata",c=>r(c)),e.on("error",a)}).then(r=>i(r)))}Zr.getMetadataBindings=n;function o(e){for(const r of["cardinality"])if(!(r in e))throw new Error(`Invalid metadata: missing ${r} in ${JSON.stringify(e)}`);return e}Zr.validateMetadataQuads=o;function i(e){for(const r of["cardinality","variables"])if(!(r in e))throw new Error(`Invalid metadata: missing ${r} in ${JSON.stringify(e)}`);return e}Zr.validateMetadataBindings=i;function t(e){let r;return()=>(r||(r=e(),r.then(a=>a.state.addInvalidateListener(()=>{r=void 0})).catch(()=>{})),r)}return Zr.cachifyMetadata=t,Zr}var l5;function br(){return l5||(l5=1,(function(u){var n=Ma&&Ma.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ma&&Ma.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(QW(),u),o(HW(),u)})(Ma)),Ma}var f5;function Az(){if(f5)return L0;f5=1,Object.defineProperty(L0,"__esModule",{value:!0}),L0.ActorQueryOperationTyped=void 0;const u=Ce(),n=be(),o=br(),i=Sz();let t=class extends i.ActorQueryOperation{constructor(r,a){if(super({...r,operationName:a}),!this.operationName)throw new Error('A valid "operationName" argument must be provided.')}async test(r){if(!r.operation)return(0,n.failTest)("Missing field 'operation' in a query operation action.");if(r.operation.type!==this.operationName)return(0,n.failTest)(`Actor ${this.name} only supports ${this.operationName} operations, but got ${r.operation.type}`);const a=r.operation;return this.testOperation(a,r.context)}async run(r,a){const c=r.context.get(u.KeysInitQuery.physicalQueryPlanLogger);c&&(c.logOperation(r.operation.type,void 0,r.operation,r.context.get(u.KeysInitQuery.physicalQueryPlanNode),this.name,{}),r.context=r.context.set(u.KeysInitQuery.physicalQueryPlanNode,r.operation));const s=r.operation,d=r.context.set(u.KeysQueryOperation.operation,s),l=await this.runOperation(s,d,a);return"metadata"in l&&(l.metadata=(0,o.cachifyMetadata)(l.metadata)),l}};return L0.ActorQueryOperationTyped=t,L0}var C0={},h5;function GW(){if(h5)return C0;h5=1,Object.defineProperty(C0,"__esModule",{value:!0}),C0.ActorQueryOperationTypedMediated=void 0;const u=Az();let n=class extends u.ActorQueryOperationTyped{constructor(i,t){super(i,t)}};return C0.ActorQueryOperationTypedMediated=n,C0}var q0={},p5;function zW(){if(p5)return q0;p5=1,Object.defineProperty(q0,"__esModule",{value:!0}),q0.BusQueryOperation=void 0;const u=be();let n=class extends u.BusIndexed{constructor(i){super({...i,actorIdentifierFields:["operationName"],actionIdentifierFields:["operation","type"]})}};return q0.BusQueryOperation=n,q0}var b5;function Lt(){return b5||(b5=1,(function(u){var n=La&&La.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=La&&La.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Sz(),u),o(Az(),u),o(GW(),u),o(zW(),u)})(La)),La}var Ca={},B0={},qa={},$0={},y5;function XW(){if(y5)return $0;y5=1,Object.defineProperty($0,"__esModule",{value:!0}),$0.ActorContextPreprocess=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i)}};return $0.ActorContextPreprocess=n,$0}var _5;function Fv(){return _5||(_5=1,(function(u){var n=qa&&qa.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=qa&&qa.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(XW(),u)})(qa)),qa}var g5;function JW(){if(g5)return B0;g5=1,Object.defineProperty(B0,"__esModule",{value:!0}),B0.ActorContextPreprocessConvertShortcuts=void 0;const u=Fv(),n=be();let o=class Oz extends u.ActorContextPreprocess{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}async run(t){return{context:Oz.expandShortcuts(t.context,this.contextKeyShortcuts)}}static expandShortcuts(t,e){for(const r of t.keys())e[r.name]&&(t=t.set(new n.ActionContextKey(e[r.name]),t.get(r)).delete(r));return t}};return B0.ActorContextPreprocessConvertShortcuts=o,B0}var m5;function kW(){return m5||(m5=1,(function(u){var n=Ca&&Ca.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ca&&Ca.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(JW(),u)})(Ca)),Ca}var Ba={},U0={},v5;function KW(){if(v5)return U0;v5=1,Object.defineProperty(U0,"__esModule",{value:!0}),U0.ActorContextPreprocessSetDefaults=void 0;const u=Fv(),n=Ce(),o=be(),i=hr();let t=class extends u.ActorContextPreprocess{constructor(r){super(r),this.defaultFunctionArgumentsCache={}}async test(r){return(0,o.passTestVoid)()}async run(r){let a=r.context;if(r.initialize){a=a.setDefault(n.KeysInitQuery.queryTimestamp,new Date).setDefault(n.KeysInitQuery.queryTimestampHighResolution,performance.now()).setDefault(n.KeysQuerySourceIdentify.sourceIds,new Map).setDefault(n.KeysCore.log,this.logger).setDefault(n.KeysInitQuery.functionArgumentsCache,this.defaultFunctionArgumentsCache).setDefault(n.KeysQuerySourceIdentify.hypermediaSourcesAggregatedStores,new Map).setDefault(n.KeysInitQuery.dataFactory,new i.DataFactory);let c={language:"sparql",version:"1.1"};a.has(n.KeysInitQuery.queryFormat)?(c=a.get(n.KeysInitQuery.queryFormat),c.language==="graphql"&&(a=a.setDefault(n.KeysInitQuery.graphqlSingularizeVariables,{}))):a=a.set(n.KeysInitQuery.queryFormat,c)}return{context:a}}};return U0.ActorContextPreprocessSetDefaults=t,U0}var T5;function WW(){return T5||(T5=1,(function(u){var n=Ba&&Ba.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ba&&Ba.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(KW(),u)})(Ba)),Ba}var $a={},V0={},w5;function YW(){if(w5)return V0;w5=1,Object.defineProperty(V0,"__esModule",{value:!0}),V0.ActorContextPreprocessSourceToDestination=void 0;const u=Fv(),n=Ce(),o=be();let i=class extends u.ActorContextPreprocess{constructor(e){super(e)}async test(e){return(0,o.passTestVoid)()}async run(e){if(e.context.get(n.KeysInitQuery.querySourcesUnidentified)&&!e.context.get(n.KeysRdfUpdateQuads.destination)){const r=e.context.get(n.KeysInitQuery.querySourcesUnidentified);if(r.length===1)return{context:e.context.set(n.KeysRdfUpdateQuads.destination,r[0])}}return e}};return V0.ActorContextPreprocessSourceToDestination=i,V0}var S5;function ZW(){return S5||(S5=1,(function(u){var n=$a&&$a.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=$a&&$a.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(YW(),u)})($a)),$a}var Ua={},Q0={},H0={},hS={},dT={exports:{}},A5;function Nv(){if(A5)return dT.exports;A5=1;var u=typeof Reflect=="object"?Reflect:null,n=u&&typeof u.apply=="function"?u.apply:function(v,A,I){return Function.prototype.apply.call(v,A,I)},o;u&&typeof u.ownKeys=="function"?o=u.ownKeys:Object.getOwnPropertySymbols?o=function(v){return Object.getOwnPropertyNames(v).concat(Object.getOwnPropertySymbols(v))}:o=function(v){return Object.getOwnPropertyNames(v)};function i(T){console&&console.warn&&console.warn(T)}var t=Number.isNaN||function(v){return v!==v};function e(){e.init.call(this)}dT.exports=e,dT.exports.once=b,e.EventEmitter=e,e.prototype._events=void 0,e.prototype._eventsCount=0,e.prototype._maxListeners=void 0;var r=10;function a(T){if(typeof T!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof T)}Object.defineProperty(e,"defaultMaxListeners",{enumerable:!0,get:function(){return r},set:function(T){if(typeof T!="number"||T<0||t(T))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+T+".");r=T}}),e.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},e.prototype.setMaxListeners=function(v){if(typeof v!="number"||v<0||t(v))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+v+".");return this._maxListeners=v,this};function c(T){return T._maxListeners===void 0?e.defaultMaxListeners:T._maxListeners}e.prototype.getMaxListeners=function(){return c(this)},e.prototype.emit=function(v){for(var A=[],I=1;I<arguments.length;I++)A.push(arguments[I]);var q=v==="error",O=this._events;if(O!==void 0)q=q&&O.error===void 0;else if(!q)return!1;if(q){var w;if(A.length>0&&(w=A[0]),w instanceof Error)throw w;var S=new Error("Unhandled error."+(w?" ("+w.message+")":""));throw S.context=w,S}var E=O[v];if(E===void 0)return!1;if(typeof E=="function")n(E,this,A);else for(var R=E.length,L=p(E,R),I=0;I<R;++I)n(L[I],this,A);return!0};function s(T,v,A,I){var q,O,w;if(a(A),O=T._events,O===void 0?(O=T._events=Object.create(null),T._eventsCount=0):(O.newListener!==void 0&&(T.emit("newListener",v,A.listener?A.listener:A),O=T._events),w=O[v]),w===void 0)w=O[v]=A,++T._eventsCount;else if(typeof w=="function"?w=O[v]=I?[A,w]:[w,A]:I?w.unshift(A):w.push(A),q=c(T),q>0&&w.length>q&&!w.warned){w.warned=!0;var S=new Error("Possible EventEmitter memory leak detected. "+w.length+" "+String(v)+" listeners added. Use emitter.setMaxListeners() to increase limit");S.name="MaxListenersExceededWarning",S.emitter=T,S.type=v,S.count=w.length,i(S)}return T}e.prototype.addListener=function(v,A){return s(this,v,A,!1)},e.prototype.on=e.prototype.addListener,e.prototype.prependListener=function(v,A){return s(this,v,A,!0)};function d(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function l(T,v,A){var I={fired:!1,wrapFn:void 0,target:T,type:v,listener:A},q=d.bind(I);return q.listener=A,I.wrapFn=q,q}e.prototype.once=function(v,A){return a(A),this.on(v,l(this,v,A)),this},e.prototype.prependOnceListener=function(v,A){return a(A),this.prependListener(v,l(this,v,A)),this},e.prototype.removeListener=function(v,A){var I,q,O,w,S;if(a(A),q=this._events,q===void 0)return this;if(I=q[v],I===void 0)return this;if(I===A||I.listener===A)--this._eventsCount===0?this._events=Object.create(null):(delete q[v],q.removeListener&&this.emit("removeListener",v,I.listener||A));else if(typeof I!="function"){for(O=-1,w=I.length-1;w>=0;w--)if(I[w]===A||I[w].listener===A){S=I[w].listener,O=w;break}if(O<0)return this;O===0?I.shift():y(I,O),I.length===1&&(q[v]=I[0]),q.removeListener!==void 0&&this.emit("removeListener",v,S||A)}return this},e.prototype.off=e.prototype.removeListener,e.prototype.removeAllListeners=function(v){var A,I,q;if(I=this._events,I===void 0)return this;if(I.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):I[v]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete I[v]),this;if(arguments.length===0){var O=Object.keys(I),w;for(q=0;q<O.length;++q)w=O[q],w!=="removeListener"&&this.removeAllListeners(w);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(A=I[v],typeof A=="function")this.removeListener(v,A);else if(A!==void 0)for(q=A.length-1;q>=0;q--)this.removeListener(v,A[q]);return this};function f(T,v,A){var I=T._events;if(I===void 0)return[];var q=I[v];return q===void 0?[]:typeof q=="function"?A?[q.listener||q]:[q]:A?_(q):p(q,q.length)}e.prototype.listeners=function(v){return f(this,v,!0)},e.prototype.rawListeners=function(v){return f(this,v,!1)},e.listenerCount=function(T,v){return typeof T.listenerCount=="function"?T.listenerCount(v):h.call(T,v)},e.prototype.listenerCount=h;function h(T){var v=this._events;if(v!==void 0){var A=v[T];if(typeof A=="function")return 1;if(A!==void 0)return A.length}return 0}e.prototype.eventNames=function(){return this._eventsCount>0?o(this._events):[]};function p(T,v){for(var A=new Array(v),I=0;I<v;++I)A[I]=T[I];return A}function y(T,v){for(;v+1<T.length;v++)T[v]=T[v+1];T.pop()}function _(T){for(var v=new Array(T.length),A=0;A<v.length;++A)v[A]=T[A].listener||T[A];return v}function b(T,v){return new Promise(function(A,I){function q(w){T.removeListener(v,O),I(w)}function O(){typeof T.removeListener=="function"&&T.removeListener("error",q),A([].slice.call(arguments))}g(T,v,O,{once:!0}),v!=="error"&&m(T,q,{once:!0})})}function m(T,v,A){typeof T.on=="function"&&g(T,"error",v,A)}function g(T,v,A,I){if(typeof T.on=="function")I.once?T.once(v,A):T.on(v,A);else if(typeof T.addEventListener=="function")T.addEventListener(v,function q(O){I.once&&T.removeEventListener(v,q),A(O)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof T)}return dT.exports}var G0={},O5;function eY(){if(O5)return G0;O5=1,Object.defineProperty(G0,"__esModule",{value:!0}),G0.LinkedList=void 0;class u{constructor(){this._length=0,this._head=null,this._tail=null}get length(){return this._length}get first(){var o;return(o=this._head)===null||o===void 0?void 0:o.value}get last(){var o;return(o=this._tail)===null||o===void 0?void 0:o.value}get empty(){return this._head===null}push(o){const i={value:o,next:null};this._tail===null?this._head=this._tail=i:this._tail.next=this._tail=i,this._length++}shift(){if(this._head===null)return;const{value:o,next:i}=this._head;return this._head=i,i===null&&(this._tail=null),this._length--,o}clear(){this._length=0,this._head=this._tail=null}}return G0.LinkedList=u,G0}var z0={},E5;function tY(){if(E5)return z0;E5=1,Object.defineProperty(z0,"__esModule",{value:!0}),z0.createTaskScheduler=void 0;const u=Promise.resolve(void 0);function n(){const o=typeof queueMicrotask=="function"?queueMicrotask:r=>u.then(r),i=typeof setImmediate=="function"?setImmediate:r=>setTimeout(r,0);let t=0,e=null;return r=>{e!==null?e.push(r):++t<100?o(r):(e=[r],i(()=>{for(const a of e)o(a);e=null,t=0}))}}return z0.createTaskScheduler=n,z0}var x5;function pt(){return x5||(x5=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.isIterator=u.isIterable=u.isSourceExpression=u.isPromise=u.isEventEmitter=u.isFunction=u.range=u.union=u.fromIterable=u.fromIterator=u.fromArray=u.single=u.empty=u.wrap=u.WrappingIterator=u.ClonedIterator=u.UnionIterator=u.MultiTransformIterator=u.SimpleTransformIterator=u.TransformIterator=u.BufferedIterator=u.MappingIterator=u.DESTINATION=u.identity=u.IntegerIterator=u.ArrayIterator=u.SingletonIterator=u.EmptyIterator=u.AsyncIterator=u.DESTROYED=u.ENDED=u.CLOSED=u.CLOSING=u.OPEN=u.INIT=u.setTaskScheduler=u.getTaskScheduler=u.scheduleTask=u.LinkedList=void 0;const n=Nv(),o=eY();Object.defineProperty(u,"LinkedList",{enumerable:!0,get:function(){return o.LinkedList}});let t=tY().createTaskScheduler();function e(D){t(D)}u.scheduleTask=e;function r(){return t}u.getTaskScheduler=r;function a(D){t=D}u.setTaskScheduler=a,u.INIT=1,u.OPEN=2,u.CLOSING=4,u.CLOSED=8,u.ENDED=16,u.DESTROYED=32;class c extends n.EventEmitter{constructor(x=u.OPEN){super(),this._readable=!1,this._state=x,this.on("newListener",s)}_changeState(x,N=!1){const $=x>this._state&&this._state<u.ENDED;return $&&(this._state=x,x===u.ENDED&&(N?t(()=>this.emit("end")):this.emit("end"))),$}read(){return null}forEach(x,N){this.on("data",xe(x,N))}close(){this._changeState(u.CLOSED)&&this._endAsync()}destroy(x){this.done||this._destroy(x,N=>{x=x||N,x&&this.emit("error",x),this._end(!0)})}_destroy(x,N){N()}_end(x=!1){this._changeState(x?u.DESTROYED:u.ENDED)&&(this._readable=!1,this.removeAllListeners("readable"),this.removeAllListeners("data"),this.removeAllListeners("end"))}_endAsync(){t(()=>this._end())}get readable(){return this._readable}set readable(x){x=!!x&&!this.done,this._readable!==x&&(this._readable=x,x&&t(()=>this.emit("readable")))}get closed(){return this._state>=u.CLOSING}get ended(){return this._state===u.ENDED}get destroyed(){return this._state===u.DESTROYED}get done(){return this._state>=u.ENDED}toString(){const x=this._toStringDetails();return`[${this.constructor.name}${x?` ${x}`:""}]`}_toStringDetails(){return""}toArray(x){const N=[],$=typeof(x==null?void 0:x.limit)=="number"?x.limit:1/0;return this.ended||$<=0?Promise.resolve(N):new Promise((G,V)=>{const k=()=>G(N),H=Y=>{N.push(Y),N.length>=$&&(this.removeListener("error",V),this.removeListener("data",H),this.removeListener("end",k),G(N))};this.on("error",V),this.on("data",H),this.on("end",k)})}getProperty(x,N){const $=this._properties;if(!N)return $&&$[x];if($&&x in $)t(()=>N($[x]));else{let G;(G=this._propertyCallbacks)||(this._propertyCallbacks=G=Object.create(null)),x in G?G[x].push(N):G[x]=[N]}}setProperty(x,N){const $=this._properties||(this._properties=Object.create(null));$[x]=N;const G=this._propertyCallbacks||{},V=G[x];if(V){delete G[x],t(()=>{for(const k of V)k(N)});for(x in G)return;delete this._propertyCallbacks}}getProperties(){const x=this._properties,N={};for(const $ in x)N[$]=x[$];return N}setProperties(x){for(const N in x)this.setProperty(N,x[N])}copyProperties(x,N){for(const $ of N)x.getProperty($,G=>this.setProperty($,G))}transform(x){return new w(this,x)}map(x,N){return new b(this,xe(x,N))}filter(x,N){return this.map(function($){return x.call(N||this,$)?$:null})}uniq(x=_){const N=new Set;return this.filter(function($){const G=x.call(this,$);return N.has(G)?!1:(N.add(G),!0)})}prepend(x){return this.transform({prepend:x})}append(x){return this.transform({append:x})}surround(x,N){return this.transform({prepend:x,append:N})}skip(x){return this.map(N=>x-- >0?null:N)}take(x){return this.transform({limit:x})}range(x,N){return this.transform({offset:x,limit:Math.max(N-x+1,0)})}clone(){return new L(this)}[Symbol.asyncIterator](){const x=this;let N=null,$=null,G=null;x.addListener("readable",V),x.addListener("end",V),x.addListener("error",k);function V(){if(N!==null)if(G!==null)k(G);else if(x.done)N({done:!0,value:void 0}),N=$=null,H();else{const Y=x.read();Y!==null&&(N({done:!1,value:Y}),N=$=null)}}function k(Y){$!==null?($(Y),N=$=G=null,H()):G===null&&(G=Y)}function H(){x.removeListener("readable",V),x.removeListener("end",V),x.removeListener("error",k)}return{next(){return new Promise((Y,se)=>{N=Y,$=se,V()})}}}}u.AsyncIterator=c;function s(D){D==="data"&&(this.removeListener("newListener",s),l(this,"readable",d),this.readable&&t(()=>d.call(this)))}function d(){let D;for(;this.listenerCount("data")!==0&&(D=this.read())!==null;)this.emit("data",D);this.listenerCount("data")===0&&!this.done&&(this.removeListener("readable",d),l(this,"newListener",s))}function l(D,x,N){D.listeners(x).includes(N)||D.on(x,N)}class f extends c{constructor(){super(),this._changeState(u.ENDED,!0)}}u.EmptyIterator=f;class h extends c{constructor(x){super(),this._item=x,x===null?this.close():this.readable=!0}read(){const x=this._item;return this._item=null,this.close(),x}_toStringDetails(){return this._item===null?"":`(${this._item})`}}u.SingletonIterator=h;class p extends c{constructor(x=[],{autoStart:N=!0,preserve:$=!0}={}){super();const G=$||!Array.isArray(x)?[...x]:x;this._index=0,this._sourceStarted=N!==!1,this._truncateThreshold=$?-1:64,this._sourceStarted&&G.length===0?this.close():this._buffer=G,this.readable=!0}read(){this._sourceStarted||(this._sourceStarted=!0);let x=null;return this._buffer&&(this._index<this._buffer.length&&(x=this._buffer[this._index++]),this._index===this._buffer.length?(delete this._buffer,this.close()):this._index===this._truncateThreshold&&(this._buffer.splice(0,this._truncateThreshold),this._index=0)),x}_toStringDetails(){return`(${this._buffer?this._buffer.length-this._index:0})`}_destroy(x,N){delete this._buffer,N()}toArray(x={}){if(!this._buffer)return Promise.resolve([]);const{length:N}=this._buffer,$=this._index,G=typeof x.limit!="number"?N:$+x.limit,V=this._buffer.slice($,G);return this._index=G,G>=N&&this.close(),Promise.resolve(V)}}u.ArrayIterator=p;class y extends c{constructor({start:x=0,step:N=1,end:$}={}){super(),Number.isFinite(x)&&(x=Math.trunc(x)),this._next=x,Number.isFinite(N)&&(N=Math.trunc(N)),this._step=N;const G=N>=0,V=G?1/0:-1/0;Number.isFinite($)?$=Math.trunc($):$!==-V&&($=V),this._last=$,!Number.isFinite(x)||(G?x>$:x<$)?this.close():this.readable=!0}read(){if(this.closed)return null;const x=this._next,N=this._step,$=this._last,G=this._next+=N;return(N>=0?G>$:G<$)&&this.close(),x}_toStringDetails(){return`(${this._next}...${this._last})`}}u.IntegerIterator=y;function _(D){return D}u.identity=_,u.DESTINATION=Symbol("destination");class b extends c{constructor(x,N=_,$={}){super(),this._map=N,this._source=m(x),this._destroySource=$.destroySource!==!1,x.done?this.close():(this._source[u.DESTINATION]=this,this._source.on("end",I),this._source.on("error",A),this._source.on("readable",v),this.readable=this._source.readable)}read(){if(!this.done){if(this._source.readable){let x,N;for(;(x=this._source.read())!==null;)if((N=this._map(x))!==null)return N}this.readable=!1,this._source.done&&this.close()}return null}_end(x){this._source.removeListener("end",I),this._source.removeListener("error",A),this._source.removeListener("readable",v),delete this._source[u.DESTINATION],this._destroySource&&this._source.destroy(),super._end(x)}}u.MappingIterator=b;function m(D,x=!1){if(!D||!Ie(D.read)||!Ie(D.on))throw new TypeError(`Invalid source: ${D}`);if(!x&&D[u.DESTINATION])throw new Error("The source already has a destination");return D}class g extends c{constructor({maxBufferSize:x=4,autoStart:N=!0}={}){super(u.INIT),this._buffer=new o.LinkedList,this._maxBufferSize=4,this._reading=!0,this._pushedCount=0,this.maxBufferSize=x,t(()=>this._init(N)),this._sourceStarted=N!==!1}get maxBufferSize(){return this._maxBufferSize}set maxBufferSize(x){x!==1/0&&(x=Number.isFinite(x)?Math.max(Math.trunc(x),1):4),this._maxBufferSize!==x&&(this._maxBufferSize=x,this._state===u.OPEN&&this._fillBuffer())}_init(x){let N=!1;this._reading=!0,this._begin(()=>{if(N)throw new Error("done callback called multiple times");N=!0,this._reading=!1,this._changeState(u.OPEN),x?this._fillBufferAsync():this.readable=!0})}_begin(x){x()}read(){if(this.done)return null;this._sourceStarted||(this._sourceStarted=!0);const x=this._buffer;let N;return x.empty?(N=null,this.readable=!1):N=x.shift(),!this._reading&&x.length<this._maxBufferSize&&(this.closed?x.empty&&this._endAsync():this._fillBufferAsync()),N}_read(x,N){N()}_push(x){this.done||(this._pushedCount++,this._buffer.push(x),this.readable=!0)}_fillBuffer(){let x;this._reading||(this.closed?this._completeClose():(x=Math.min(this._maxBufferSize-this._buffer.length,128))>0&&(this._pushedCount=0,this._reading=!0,this._read(x,()=>{if(!x)throw new Error("done callback called multiple times");x=0,this._reading=!1,this.closed?this._completeClose():this._pushedCount&&(this.readable=!0,this._buffer.length<this._maxBufferSize/2&&this._fillBufferAsync())})))}_fillBufferAsync(){this._reading||(this._reading=!0,t(()=>{this._reading=!1,this._fillBuffer()}))}close(){this._reading?this._changeState(u.CLOSING):this._completeClose()}_completeClose(){this._changeState(u.CLOSED)&&(this._reading=!0,this._flush(()=>{if(!this._reading)throw new Error("done callback called multiple times");this._reading=!1,this._buffer.empty&&this._endAsync()}))}_destroy(x,N){this._buffer.clear(),N()}_flush(x){x()}_toStringDetails(){const x=this._buffer;return`{${x.empty?"":`next: ${x.first}, `}buffer: ${x.length}}`}}u.BufferedIterator=g;class T extends g{constructor(x,N=x||{}){super(N),this._boundPush=$=>this._push($),ye(x)||(x=N.source),Fe(x)?this.source=x:x&&(this._createSource=pe(x)?()=>x:x,this._sourceStarted&&this._loadSourceAsync()),this._optional=!!N.optional,this._destroySource=N.destroySource!==!1}get source(){return Ie(this._createSource)&&this._loadSourceAsync(),this._source}set source(x){const N=this._source=this._validateSource(x);N[u.DESTINATION]=this,this.done?this._destroySource&&N.destroy():N.done?this.close():(N.on("end",q),N.on("readable",O),N.on("error",A))}_loadSourceAsync(){Ie(this._createSource)&&(Promise.resolve(this._createSource()).then(x=>{delete this._createSource,this.source=x,this._fillBuffer()},x=>this.emit("error",x)),this._createSource=null)}_validateSource(x,N=!1){if(this._source||typeof this._createSource<"u")throw new Error("The source cannot be changed after it has been set");return m(x,N)}_read(x,N){const $=()=>{this._pushedCount<x&&!this.closed?t(()=>this._readAndTransform($,N)):N()};this._readAndTransform($,N)}_readAndTransform(x,N){let $;const G=this.source;!G||G.done||($=G.read())===null?N():this._optional?this._optionalTransform($,x):this._transform($,x,this._boundPush)}_optionalTransform(x,N){const $=this._pushedCount;this._transform(x,()=>{$===this._pushedCount&&this._push(x),N()},this._boundPush)}_transform(x,N,$){$(x),N()}_closeWhenDone(){this.close()}_end(x){const N=this._source;N&&(N.removeListener("end",q),N.removeListener("error",A),N.removeListener("readable",O),delete N[u.DESTINATION],this._destroySource&&N.destroy()),super._end(x)}}u.TransformIterator=T;function v(){this[u.DESTINATION].readable=!0}function A(D){this[u.DESTINATION].emit("error",D)}function I(){this[u.DESTINATION].close()}function q(){this[u.DESTINATION]._closeWhenDone()}function O(){this[u.DESTINATION]._sourceStarted!==!1&&this[u.DESTINATION]._fillBuffer()}class w extends T{constructor(x,N){if(super(x,N),this._offset=0,this._limit=1/0,this._filter=$=>!0,N=N||(ye(x)?null:x),N){const $=Ie(N)?N:N.transform,{limit:G,offset:V,filter:k,map:H,prepend:Y,append:se}=N;V===1/0||G===-1/0?this._limit=0:(Number.isFinite(V)&&(this._offset=Math.max(Math.trunc(V),0)),Number.isFinite(G)&&(this._limit=Math.max(Math.trunc(G),0)),Ie(k)&&(this._filter=k),Ie(H)&&(this._map=H),this._transform=Ie($)?$:null),Y&&(this._prepender=Fe(Y)?Y:U(Y)),se&&(this._appender=Fe(se)?se:U(se))}}_read(x,N){const $=()=>this._readAndTransformSimple(x,G,N);this._readAndTransformSimple(x,G,N);function G(){t($)}}_readAndTransformSimple(x,N,$){let G;const{source:V}=this;if(!V||V.done){$();return}for(this._limit===0&&this.close();!this.closed&&this._pushedCount<x&&(G=V.read())!==null;){if(!this._filter(G)||this._offset!==0&&this._offset--)continue;const k=typeof this._map>"u"?G:this._map(G);if(k===null)this._optional&&this._push(G);else if(!Ie(this._transform))this._push(k);else{this._optional?this._optionalTransform(k,N):this._transform(k,N,this._boundPush);return}--this._limit===0&&this.close()}$()}_begin(x){this._insert(this._prepender,x),delete this._prepender}_flush(x){this._insert(this._appender,x),delete this._appender}_insert(x,N){const $=V=>this._push(V);!x||x.done?N():(x.on("data",$),x.on("end",G));function G(){x.removeListener("data",$),x.removeListener("end",G),N()}}}u.SimpleTransformIterator=w;class S extends T{constructor(x,N){if(super(x,N),this._transformerQueue=[],N){const $=Ie(N)?N:N.multiTransform;$&&(this._createTransformer=$)}}_read(x,N){const $=this._transformerQueue,G=this._optional;let V,k;for(;(V=$[0])&&V.transformer.done;){G&&V.item!==null&&(x--,this._push(V.item)),$.shift();const{transformer:Y}=V;Y.removeListener("end",O),Y.removeListener("readable",O),Y.removeListener("error",A)}const{source:H}=this;for(;H&&!H.done&&$.length<this.maxBufferSize&&(k=H.read(),k!==null);){const Y=this._createTransformer(k)||new f;Y[u.DESTINATION]=this,Y.on("end",O),Y.on("readable",O),Y.on("error",A),$.push({transformer:Y,item:k})}if(V=$[0],V){const{transformer:Y}=V;for(;x-- >0&&(k=Y.read())!==null;)this._push(k),G&&(V.item=null)}else H&&H.done&&this.close();N()}_createTransformer(x){return new h(x)}_closeWhenDone(){this._transformerQueue.length||this.close()}_end(x){if(super._end(x),this._destroySource)for(const N of this._transformerQueue)N.transformer.destroy()}}u.MultiTransformIterator=S;class E extends g{constructor(x,N={}){super(N),this._sources=[],this._currentSource=-1;const $=N.autoStart!==!1;if(Fe(x))x.on("error",G=>this.emit("error",G)),this._pending={loading:!1,sources:x},$&&this._loadSources();else if(Array.isArray(x)&&x.length>0)for(const G of x)this._addSource(G);else $&&this.close();this._destroySources=N.destroySources!==!1}_loadSources(){const x=this._pending.sources;this._pending.loading=!0,x.done?(delete this._pending,this.close()):(x.on("data",N=>{this._addSource(N),this._fillBufferAsync()}),x.on("end",()=>{delete this._pending,this._fillBuffer()}))}_addSource(x){pe(x)&&(x=X(x)),x.done||(this._sources.push(x),x[u.DESTINATION]=this,x.on("error",A),x.on("readable",O),x.on("end",R))}_removeEmptySources(){this._sources=this._sources.filter((x,N)=>(x.done&&N<=this._currentSource&&this._currentSource--,!x.done)),this._fillBuffer()}_read(x,N){var $;(($=this._pending)===null||$===void 0?void 0:$.loading)===!1&&this._loadSources();let G=0,V;for(;G!==(G=x);)for(let k=0;k<this._sources.length&&x>0;k++)this._currentSource=(this._currentSource+1)%this._sources.length,(V=this._sources[this._currentSource].read())!==null&&(x--,this._push(V));!this._pending&&this._sources.length===0&&this.close(),N()}_end(x=!1){if(super._end(x),this._destroySources){for(const N of this._sources)N.destroy();this._pending&&(this._pending.sources.destroy(),delete this._pending)}}}u.UnionIterator=E;function R(){this[u.DESTINATION]._removeEmptySources()}class L extends T{constructor(x){super(x,{autoStart:!1}),this._readPosition=0,this._reading=!1,x&&(this.readable=!0)}_init(){}close(){c.prototype.close.call(this)}get source(){return super.source}set source(x){const N=this._source=this._validateSource(x),$=N&&N[u.DESTINATION]||(N[u.DESTINATION]=new M(N));this.done?this._destroySource&&N.destroy():$.endsAt(0)?this.close():($.register(this),(N._sourceStarted===!1||$.readAt(0)!==null)&&(this.readable=!0));const G=this._propertyCallbacks;for(const V in G){const k=G[V];for(const H of k)this._getSourceProperty(V,H)}}_validateSource(x,N=!1){const $=x&&x[u.DESTINATION];return super._validateSource(x,!$||$ instanceof M)}getProperty(x,N){const{source:$}=this,G=this._properties,V=G&&x in G;if(!N)return V?G&&G[x]:$&&$.getProperty(x);super.getProperty(x,N),$&&!V&&this._getSourceProperty(x,N)}_getSourceProperty(x,N){this.source.getProperty(x,$=>{(!this._properties||!(x in this._properties))&&N($)})}getProperties(){const x=this.source?this.source.getProperties():{},N=this._properties;for(const $ in N)x[$]=N[$];return x}_toStringDetails(){return`{source: ${this.source?this.source.toString():"none"}}`}read(){this._sourceStarted||(this._sourceStarted=!0);const x=this.source;let N=null;if(!this.done&&x){const $=x[u.DESTINATION];(N=$.readAt(this._readPosition))!==null?this._readPosition++:this.readable=!1,$.endsAt(this._readPosition)&&this.close()}return N}_end(x){const N=this.source,$=N==null?void 0:N[u.DESTINATION];$&&$.unregister(this),g.prototype._end.call(this,x)}}u.ClonedIterator=L;class M{constructor(x){if(this._history=[],this._trackers=new Set,this._source=x,!x.done){const N=()=>{for(const V of this._trackers)V.readable=!0},$=V=>{for(const k of this._trackers)k.emit("error",V)},G=()=>{for(const V of this._trackers)V._sourceStarted!==!1&&V._readPosition===this._history.length&&V.close();this._trackers.clear(),x.removeListener("end",G),x.removeListener("error",$),x.removeListener("readable",N)};x.on("end",G),x.on("error",$),x.on("readable",N)}}register(x){this._source.done||this._trackers.add(x)}unregister(x){this._trackers.delete(x)}readAt(x){let N=null;return x<this._history.length?N=this._history[x]:!this._source.done&&(N=this._source.read())!==null&&(this._history[x]=N),N}endsAt(x){return this._source.done&&this._history.length===x}}class B extends c{constructor(x,N){super(),this._source=null,this._destroySource=(N==null?void 0:N.destroySource)!==!1,pe(x)?(this._source=new c,x.then($=>{this._source=null,this.source=$}).catch($=>this.emit("error",$))):x&&(this.source=x)}set source(x){let N=x;if(this._source!==null)throw new Error("The source cannot be changed after it has been set");if(Q(N)&&(N=N[Symbol.iterator]()),P(N)){let $=N;N=new n.EventEmitter,N.read=()=>{if($!==null){let G;for(;!(G=$.next()).done;)if(G.value!==null)return G.value;$=null,this.close()}return null}}else N=m(N);if(this.done){this._destroySource&&Ie(N.destroy)&&N.destroy();return}N[u.DESTINATION]=this,N.on("end",I),N.on("error",A),N.on("readable",v),this._source=N,this.readable=N.readable!==!1}read(){if(this._source!==null&&this._source.readable!==!1){const x=this._source.read();if(x!==null)return x;this.readable=!1}return null}_end(x=!1){this._source!==null&&(this._source.removeListener("end",I),this._source.removeListener("error",A),this._source.removeListener("readable",v),delete this._source[u.DESTINATION],this._destroySource&&Ie(this._source.destroy)&&this._source.destroy(),this._source=null),super._end(x)}}u.WrappingIterator=B;function X(D,x){if(x&&("autoStart"in x||"optional"in x||"source"in x||"maxBufferSize"in x))return D&&!Fe(D)&&(D=new B(D)),new T(D,x);if(!D)return J();if(pe(D))return new B(D,x);if(D instanceof c)return D;if(Array.isArray(D))return U(D);if(Q(D)||P(D)||Fe(D))return new B(D,x);throw new TypeError(`Invalid source: ${D}`)}u.wrap=X;function J(){return new f}u.empty=J;function ie(D){return new h(D)}u.single=ie;function U(D){return new p(D)}u.fromArray=U;function fe(D){return new B(D)}u.fromIterator=fe;function me(D){return new B(D)}u.fromIterable=me;function he(D){return new E(D)}u.union=he;function te(D,x,N){return new y({start:D,end:x,step:N})}u.range=te;function xe(D,x){return x?D.bind(x):D}function Ie(D){return typeof D=="function"}u.isFunction=Ie;function Fe(D){return Ie(D==null?void 0:D.on)}u.isEventEmitter=Fe;function pe(D){return Ie(D==null?void 0:D.then)}u.isPromise=pe;function ye(D){return D&&(Fe(D)||pe(D)||Ie(D))}u.isSourceExpression=ye;function Q(D){return D&&Symbol.iterator in D}u.isIterable=Q;function P(D){return Ie(D==null?void 0:D.next)}u.isIterator=P})(hS)),hS}var pS={},Va={},X0={},I5;function rY(){if(I5)return X0;I5=1,Object.defineProperty(X0,"__esModule",{value:!0}),X0.BlankNodeScoped=void 0;let u=class{constructor(o,i){this.termType="BlankNode",this.value=o,this.skolemized=i}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}};return X0.BlankNodeScoped=u,X0}var J0={},R5;function nY(){if(R5)return J0;R5=1,Object.defineProperty(J0,"__esModule",{value:!0}),J0.BlankNodeBindingsScoped=void 0;let u=class{constructor(o){this.termType="BlankNode",this.singleBindingsScope=!0,this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}};return J0.BlankNodeBindingsScoped=u,J0}var F5;function OO(){return F5||(F5=1,(function(u){var n=Va&&Va.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Va&&Va.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(rY(),u),o(nY(),u)})(Va)),Va}var N5;function EO(){return N5||(N5=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.deskolemizeOperation=u.deskolemizeQuad=u.deskolemizeTermNestedThrowing=u.deskolemizeTerm=u.skolemizeBindingsStream=u.skolemizeQuadStream=u.skolemizeBindings=u.skolemizeQuad=u.skolemizeTerm=u.getSourceId=u.SKOLEM_PREFIX=void 0;const n=OO(),o=gn(),i=dt();u.SKOLEM_PREFIX="urn:comunica_skolem:source_";function t(p,y){let _=p.get(y.referenceValue);return _===void 0&&(_=`${p.size}`,p.set(y.referenceValue,_)),_}u.getSourceId=t;function e(p,y,_){return y.termType==="BlankNode"?new n.BlankNodeScoped(`bc_${_}_${y.value}`,p.namedNode(`${u.SKOLEM_PREFIX}${_}:${y.value}`)):y}u.skolemizeTerm=e;function r(p,y,_){return(0,o.mapTermsNested)(y,b=>e(p,b,_))}u.skolemizeQuad=r;function a(p,y,_){return y.map(b=>b.termType==="Quad"?r(p,b,_):e(p,b,_))}u.skolemizeBindings=a;function c(p,y,_){const b=y.map(g=>r(p,g,_));function m(){y.getProperty("metadata",g=>{b.setProperty("metadata",g),g.state.addInvalidateListener(m)})}return m(),b}u.skolemizeQuadStream=c;function s(p,y,_){const b=y.map(g=>a(p,g,_));function m(){y.getProperty("metadata",g=>{b.setProperty("metadata",g),g.state.addInvalidateListener(m)})}return m(),b}u.skolemizeBindingsStream=s;function d(p,y,_){if(y.termType==="BlankNode"&&"skolemized"in y&&(y=y.skolemized),y.termType==="NamedNode"&&y.value.startsWith(u.SKOLEM_PREFIX)){const b=y.value.indexOf(":",u.SKOLEM_PREFIX.length);if(y.value.slice(u.SKOLEM_PREFIX.length,b)===_){const g=y.value.slice(b+1,y.value.length);return p.blankNode(g)}return null}return y}u.deskolemizeTerm=d;function l(p,y,_){if(y.termType==="Quad")return(0,o.mapTermsNested)(y,m=>{const g=d(p,m,_);if(!g)throw new Error("Skolemized term is not in scope for this source");return g});const b=d(p,y,_);if(b===null)throw new Error("Skolemized term is not in scope for this source");return b}u.deskolemizeTermNestedThrowing=l;function f(p,y,_){return(0,o.mapTermsNested)(y,b=>d(p,b,_)??b)}u.deskolemizeQuad=f;function h(p,y,_){const b=new i.Factory;try{return i.Util.mapOperation(y,{[i.Algebra.types.PATTERN](m,g){return{result:Object.assign(g.createPattern(l(p,m.subject,_),l(p,m.predicate,_),l(p,m.object,_),l(p,m.graph,_)),{metadata:m.metadata}),recurse:!1}},[i.Algebra.types.PATH](m,g){return{result:Object.assign(g.createPath(l(p,m.subject,_),m.predicate,l(p,m.object,_),l(p,m.graph,_)),{metadata:m.metadata}),recurse:!1}}},b)}catch{}}u.deskolemizeOperation=h})(pS)),pS}var P5;function Ez(){if(P5)return H0;P5=1,Object.defineProperty(H0,"__esModule",{value:!0}),H0.QuerySourceSkolemized=void 0;const u=Ce(),n=br(),o=pt(),i=EO();let t=class{constructor(r,a){this.innerSource=r,this.sourceId=a}async getSelectorShape(r){return this.innerSource.getSelectorShape(r)}queryBindings(r,a,c){const s=a.getSafe(u.KeysInitQuery.dataFactory),d=(0,i.deskolemizeOperation)(s,r,this.sourceId);if(!d){const l=new o.ArrayIterator([],{autoStart:!1});return l.setProperty("metadata",{state:new n.MetadataValidationState,cardinality:{type:"exact",value:0},variables:[]}),l}return(0,i.skolemizeBindingsStream)(s,this.innerSource.queryBindings(d,a,c),this.sourceId)}queryBoolean(r,a){return this.innerSource.queryBoolean(r,a)}queryQuads(r,a){const c=a.getSafe(u.KeysInitQuery.dataFactory),s=(0,i.deskolemizeOperation)(c,r,this.sourceId);if(!s){const d=new o.ArrayIterator([],{autoStart:!1});return d.setProperty("metadata",{state:new n.MetadataValidationState,cardinality:{type:"exact",value:0}}),d}return(0,i.skolemizeQuadStream)(c,this.innerSource.queryQuads(s,a),this.sourceId)}queryVoid(r,a){return this.innerSource.queryVoid(r,a)}get referenceValue(){return this.innerSource.referenceValue}toString(){return`${this.innerSource.toString()}(SkolemID:${this.sourceId})`}};return H0.QuerySourceSkolemized=t,H0}var D5;function iY(){if(D5)return Q0;D5=1,Object.defineProperty(Q0,"__esModule",{value:!0}),Q0.ActorContextPreprocessQuerySourceSkolemize=void 0;const u=Fv(),n=Ce(),o=be(),i=Ez(),t=EO();let e=class extends u.ActorContextPreprocess{constructor(a){super(a)}async test(a){return(0,o.passTestVoid)()}async run(a){let c=a.context;if(c.has(n.KeysQueryOperation.querySources)){c.has(n.KeysQuerySourceIdentify.sourceIds)||(c=c.set(n.KeysQuerySourceIdentify.sourceIds,new Map));const s=c.getSafe(n.KeysQuerySourceIdentify.sourceIds);let d=c.getSafe(n.KeysQueryOperation.querySources);d=d.map(l=>({source:new i.QuerySourceSkolemized(l.source,(0,t.getSourceId)(s,l.source)),context:l.context})),c=c.set(n.KeysQueryOperation.querySources,d)}return{context:c}}};return Q0.ActorContextPreprocessQuerySourceSkolemize=e,Q0}var j5;function xz(){return j5||(j5=1,(function(u){var n=Ua&&Ua.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ua&&Ua.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(iY(),u),o(Ez(),u),o(EO(),u)})(Ua)),Ua}var Qa={},k0={},L5;function aY(){if(L5)return k0;L5=1,Object.defineProperty(k0,"__esModule",{value:!0}),k0.MediatorCombinePipeline=void 0;const u=be();let n=class extends u.Mediator{constructor(i){super(i)}async mediate(i){let t;try{t=this.publish(i)}catch{return i}if(this.filterFailures){const c=[];for(const s of t)(await s.reply).isPassed()&&c.push(s);t=c}const e=[];if(t=await Promise.all(t.map(async({actor:c,reply:s},d)=>{try{const l=await s,f=l.getOrThrow();return e[d]=l.getSideData(),{actor:c,reply:f}}catch(l){throw new Error(this.constructFailureMessage(i,[l.message]))}})),this.order){const c=s=>{const d=this.field?s[this.field]:s;if(typeof d!="number")throw new TypeError("Cannot order elements that are not numbers.");return d};t=t.sort((s,d)=>(this.order==="increasing"?1:-1)*(c(s.reply)-c(d.reply)))}let r=i,a=0;for(const{actor:c}of t)r={...r,...await c.runObservable(r,e[a++])};return r}mediateWith(){throw new Error("Method not supported.")}};return k0.MediatorCombinePipeline=n,k0}var M5;function C5(){return M5||(M5=1,(function(u){var n=Qa&&Qa.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Qa&&Qa.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(aY(),u)})(Qa)),Qa}var Ha={},K0={},Ga={},W0={},q5;function uY(){if(q5)return W0;q5=1,Object.defineProperty(W0,"__esModule",{value:!0}),W0.ActorHashBindings=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i)}};return W0.ActorHashBindings=n,W0}var B5;function oY(){return B5||(B5=1,(function(u){var n=Ga&&Ga.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ga&&Ga.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(uY(),u)})(Ga)),Ga}var bS={exports:{}};/**
 * @preserve
 * JS Implementation of incremental MurmurHash3 (r150) (as of May 10, 2013)
 *
 * @author <a href="mailto:jensyt@gmail.com">Jens Taylor</a>
 * @see http://github.com/homebrewing/brauhaus-diff
 * @author <a href="mailto:gary.court@gmail.com">Gary Court</a>
 * @see http://github.com/garycourt/murmurhash-js
 * @author <a href="mailto:aappleby@gmail.com">Austin Appleby</a>
 * @see http://sites.google.com/site/murmurhash/
 */var $5;function Iz(){return $5||($5=1,(function(u){(function(){var n;function o(i,t){var e=this instanceof o?this:n;if(e.reset(t),typeof i=="string"&&i.length>0&&e.hash(i),e!==this)return e}o.prototype.hash=function(i){var t,e,r,a,c;switch(c=i.length,this.len+=c,e=this.k1,r=0,this.rem){case 0:e^=c>r?i.charCodeAt(r++)&65535:0;case 1:e^=c>r?(i.charCodeAt(r++)&65535)<<8:0;case 2:e^=c>r?(i.charCodeAt(r++)&65535)<<16:0;case 3:e^=c>r?(i.charCodeAt(r)&255)<<24:0,e^=c>r?(i.charCodeAt(r++)&65280)>>8:0}if(this.rem=c+this.rem&3,c-=this.rem,c>0){for(t=this.h1;e=e*11601+(e&65535)*3432906752&4294967295,e=e<<15|e>>>17,e=e*13715+(e&65535)*461832192&4294967295,t^=e,t=t<<13|t>>>19,t=t*5+3864292196&4294967295,!(r>=c);)e=i.charCodeAt(r++)&65535^(i.charCodeAt(r++)&65535)<<8^(i.charCodeAt(r++)&65535)<<16,a=i.charCodeAt(r++),e^=(a&255)<<24^(a&65280)>>8;switch(e=0,this.rem){case 3:e^=(i.charCodeAt(r+2)&65535)<<16;case 2:e^=(i.charCodeAt(r+1)&65535)<<8;case 1:e^=i.charCodeAt(r)&65535}this.h1=t}return this.k1=e,this},o.prototype.result=function(){var i,t;return i=this.k1,t=this.h1,i>0&&(i=i*11601+(i&65535)*3432906752&4294967295,i=i<<15|i>>>17,i=i*13715+(i&65535)*461832192&4294967295,t^=i),t^=this.len,t^=t>>>16,t=t*51819+(t&65535)*2246770688&4294967295,t^=t>>>13,t=t*44597+(t&65535)*3266445312&4294967295,t^=t>>>16,t>>>0},o.prototype.reset=function(i){return this.h1=typeof i=="number"?i:0,this.rem=this.k1=this.len=0,this},n=new o,u.exports=o})()})(bS)),bS.exports}var U5;function sY(){if(U5)return K0;U5=1,Object.defineProperty(K0,"__esModule",{value:!0}),K0.ActorHashBindingsMurmur=void 0;const u=oY(),n=be(),o=Iz();let i=class extends u.ActorHashBindings{async test(e){return(0,n.passTestVoid)()}async run(e){return{hashFunction:(r,a)=>{var s;let c=o();for(const d of a)c=c.hash(((s=r.get(d))==null?void 0:s.value)??"UNDEF");return c.result()}}}};return K0.ActorHashBindingsMurmur=i,K0}var V5;function cY(){return V5||(V5=1,(function(u){var n=Ha&&Ha.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ha&&Ha.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(sY(),u)})(Ha)),Ha}var za={},Y0={},Q5;function dY(){if(Q5)return Y0;Q5=1,Object.defineProperty(Y0,"__esModule",{value:!0}),Y0.MediatorRace=void 0;const u=be();let n=class extends u.Mediator{constructor(i){super(i)}mediateWith(i,t){return new Promise((e,r)=>{const a=[];for(const c of t)c.reply.then(s=>{s.isPassed()?e((0,u.passTestWithSideData)(c.actor,s.getSideData())):(a.push(s.getFailMessage()),a.length===t.length&&e((0,u.failTest)(this.constructFailureMessage(i,a))))}).catch(s=>{r(s)})})}};return Y0.MediatorRace=n,Y0}var H5;function pr(){return H5||(H5=1,(function(u){var n=za&&za.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=za&&za.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(dY(),u)})(za)),za}var Xa={},Z0={},Ja={},eh={},G5;function lY(){if(G5)return eh;G5=1,Object.defineProperty(eh,"__esModule",{value:!0}),eh.ActorHashQuads=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i)}};return eh.ActorHashQuads=n,eh}var z5;function fY(){return z5||(z5=1,(function(u){var n=Ja&&Ja.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ja&&Ja.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(lY(),u)})(Ja)),Ja}var X5;function hY(){if(X5)return Z0;X5=1,Object.defineProperty(Z0,"__esModule",{value:!0}),Z0.ActorHashQuadsMurmur=void 0;const u=fY(),n=be(),o=Iz();let i=class extends u.ActorHashQuads{async test(e){return(0,n.passTestVoid)()}async run(e){return{hashFunction:r=>{const a=o(r.subject.value);return a.hash(r.predicate.value),a.hash(r.object.value),a.hash(r.graph.value),a.result()}}}};return Z0.ActorHashQuadsMurmur=i,Z0}var J5;function pY(){return J5||(J5=1,(function(u){var n=Xa&&Xa.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Xa&&Xa.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(hY(),u)})(Xa)),Xa}var ka={},th={},Ka={},rh={},k5;function bY(){if(k5)return rh;k5=1,Object.defineProperty(rh,"__esModule",{value:!0}),rh.ActorOptimizeQueryOperation=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i)}};return rh.ActorOptimizeQueryOperation=n,rh}var K5;function mn(){return K5||(K5=1,(function(u){var n=Ka&&Ka.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ka&&Ka.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(bY(),u)})(Ka)),Ka}var W5;function yY(){if(W5)return th;W5=1,Object.defineProperty(th,"__esModule",{value:!0}),th.ActorOptimizeQueryOperationRewriteCopy=void 0;const u=mn(),n=Ce(),o=be(),i=dt();let t=class extends u.ActorOptimizeQueryOperation{constructor(r){super(r)}async test(r){return(0,o.passTestVoid)()}async run(r){const a=r.context.getSafe(n.KeysInitQuery.dataFactory),c=new i.Factory(a);return{operation:i.Util.mapOperation(r.operation,{[i.Algebra.types.COPY](d,l){let f;return typeof d.destination=="string"&&typeof d.source=="string"&&d.destination===d.source||typeof d.destination!="string"&&typeof d.source!="string"&&d.destination.equals(d.source)?f=l.createCompositeUpdate([]):f=l.createCompositeUpdate([l.createDrop(d.destination,!0),l.createAdd(d.source,d.destination,d.silent)]),{result:f,recurse:!1}}},c),context:r.context}}};return th.ActorOptimizeQueryOperationRewriteCopy=t,th}var Y5;function _Y(){return Y5||(Y5=1,(function(u){var n=ka&&ka.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ka&&ka.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(yY(),u)})(ka)),ka}var Wa={},nh={},Z5;function gY(){if(Z5)return nh;Z5=1,Object.defineProperty(nh,"__esModule",{value:!0}),nh.ActorOptimizeQueryOperationRewriteMove=void 0;const u=mn(),n=Ce(),o=be(),i=dt();let t=class extends u.ActorOptimizeQueryOperation{constructor(r){super(r)}async test(r){return(0,o.passTestVoid)()}async run(r){const a=r.context.getSafe(n.KeysInitQuery.dataFactory),c=new i.Factory(a);return{operation:i.Util.mapOperation(r.operation,{[i.Algebra.types.MOVE](d,l){let f;if(typeof d.destination=="string"&&typeof d.source=="string"&&d.destination===d.source||typeof d.destination!="string"&&typeof d.source!="string"&&d.destination.equals(d.source))f=l.createCompositeUpdate([]);else{const h=[l.createDrop(d.destination,!0),l.createAdd(d.source,d.destination,d.silent),l.createDrop(d.source)];f=l.createCompositeUpdate(h)}return{result:f,recurse:!1}}},c),context:r.context}}};return nh.ActorOptimizeQueryOperationRewriteMove=t,nh}var eI;function mY(){return eI||(eI=1,(function(u){var n=Wa&&Wa.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Wa&&Wa.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(gY(),u)})(Wa)),Wa}var Ya={},ih={},tI;function vY(){if(tI)return ih;tI=1,Object.defineProperty(ih,"__esModule",{value:!0}),ih.ActorOptimizeQueryOperationRewriteAdd=void 0;const u=mn(),n=Ce(),o=be(),i=hr(),t=dt(),e=new i.DataFactory;let r=class extends u.ActorOptimizeQueryOperation{constructor(c){super(c)}async test(c){return(0,o.passTestVoid)()}async run(c){const s=c.context.getSafe(n.KeysInitQuery.dataFactory),d=new t.Factory(s);return{operation:t.Util.mapOperation(c.operation,{[t.Algebra.types.ADD](f,h){const p=f.destination==="DEFAULT"?e.defaultGraph():f.destination,y=f.source==="DEFAULT"?e.defaultGraph():f.source;return{result:h.createDeleteInsert(void 0,[h.createPattern(e.variable("s"),e.variable("p"),e.variable("o"),p)],h.createPattern(e.variable("s"),e.variable("p"),e.variable("o"),y)),recurse:!1}}},d),context:c.context}}};return ih.ActorOptimizeQueryOperationRewriteAdd=r,ih}var rI;function TY(){return rI||(rI=1,(function(u){var n=Ya&&Ya.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ya&&Ya.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(vY(),u)})(Ya)),Ya}var Za={},ah={},eu={},Cr={},nI;function wY(){if(nI)return Cr;nI=1,Object.defineProperty(Cr,"__esModule",{value:!0}),Cr.estimateNpsCardinality=Cr.estimateJoinCardinality=Cr.estimateUnionCardinality=Cr.estimateSliceCardinality=Cr.estimateMinusCardinality=Cr.estimateCardinality=void 0;const u=hr(),n=dt(),o=new u.DataFactory,i=new n.Factory(o);function t(d,l){const f=l.getCardinality(d);if(f)return f;switch(d.type){case n.Algebra.types.ASK:return{type:"exact",value:1,dataset:l.uri};case n.Algebra.types.LOAD:case n.Algebra.types.DELETE_INSERT:case n.Algebra.types.ADD:case n.Algebra.types.COMPOSITE_UPDATE:case n.Algebra.types.CLEAR:case n.Algebra.types.NOP:case n.Algebra.types.DROP:case n.Algebra.types.CREATE:case n.Algebra.types.MOVE:case n.Algebra.types.COPY:return{type:"exact",value:0,dataset:l.uri};case n.Algebra.types.PROJECT:case n.Algebra.types.FILTER:case n.Algebra.types.ORDER_BY:case n.Algebra.types.GROUP:case n.Algebra.types.CONSTRUCT:case n.Algebra.types.DISTINCT:case n.Algebra.types.REDUCED:case n.Algebra.types.EXTEND:case n.Algebra.types.FROM:case n.Algebra.types.GRAPH:return t(d.input,l);case n.Algebra.types.ZERO_OR_ONE_PATH:case n.Algebra.types.ZERO_OR_MORE_PATH:case n.Algebra.types.ONE_OR_MORE_PATH:case n.Algebra.types.INV:return t(d.path,l);case n.Algebra.types.PATH:return t(d.predicate,l);case n.Algebra.types.NPS:return s(d,l);case n.Algebra.types.LINK:return t(i.createPattern(o.variable("s"),d.iri,o.variable("o")),l);case n.Algebra.types.UNION:case n.Algebra.types.SEQ:case n.Algebra.types.ALT:return a(d.input,l);case n.Algebra.types.BGP:return c(d.patterns,l);case n.Algebra.types.JOIN:case n.Algebra.types.LEFT_JOIN:return c(d.input,l);case n.Algebra.types.SLICE:return r(d,l);case n.Algebra.types.MINUS:return e(d,l);case n.Algebra.types.VALUES:return{type:"exact",value:d.bindings.length,dataset:l.uri};case n.Algebra.types.SERVICE:case n.Algebra.types.DESCRIBE:case n.Algebra.types.EXPRESSION:case n.Algebra.types.PATTERN:return{type:"estimate",value:Number.POSITIVE_INFINITY,dataset:l.uri}}}Cr.estimateCardinality=t;function e(d,l){const f=t(d.input[0],l),h=t(d.input[1],l);return{type:"estimate",value:Math.max(f.value-h.value,0),dataset:l.uri}}Cr.estimateMinusCardinality=e;function r(d,l){const f=t(d.input,l);return f.value>0&&(f.value=Math.max(f.value-d.start,0),d.length!==void 0&&(f.value=Math.min(f.value,d.length))),f}Cr.estimateSliceCardinality=r;function a(d,l){const f={type:"exact",value:0,dataset:l.uri};for(const h of d){const p=t(h,l);p.type==="estimate"&&f.type==="exact"&&(f.type=p.type),p.value>0&&(f.value+=p.value)}return f}Cr.estimateUnionCardinality=a;function c(d,l){const f=[];for(const p of d){const y=n.Util.inScopeVariables(p).map(b=>b.value),_=f.find(b=>y.some(m=>b.vars.has(m)));if(_){_.ops.push(p);for(const b of y)_.vars.add(b)}else f.push({ops:[p],vars:new Set(y)})}return{type:"estimate",value:f.map(p=>Math.min(...p.ops.map(y=>t(y,l).value))).reduce((p,y)=>p*y,1),dataset:l.uri}}Cr.estimateJoinCardinality=c;function s(d,l){const f=i.createSeq([...d.iris].reverse().map(_=>i.createLink(_))),h=t(f,l),p=i.createPattern(o.variable("s"),o.variable("p"),o.variable("o")),y=t(p,l);return{type:"estimate",value:Math.max(0,y.value-h.value),dataset:l.uri}}return Cr.estimateNpsCardinality=s,Cr}var uh={},iI;function SY(){if(iI)return uh;iI=1,Object.defineProperty(uh,"__esModule",{value:!0}),uh.doesShapeAcceptOperation=void 0;function u(i,t,e){return n(i,i,t,e)}uh.doesShapeAcceptOperation=u;function n(i,t,e,r){if(t.type==="conjunction")return t.children.every(c=>n(i,c,e,r));if(t.type==="disjunction")return t.children.some(c=>n(i,c,e,r));if(t.type==="arity")return n(i,t.child,e,r);if(((r==null?void 0:r.joinBindings)&&!t.joinBindings)??((r==null?void 0:r.filterBindings)&&!t.filterBindings))return!1;const a=t.operation;switch(a.operationType){case"type":return o(i,t,e,r)?a.type===e.type:!1;case"pattern":return o(i,t,e,r)?a.pattern.type===e.type:!1;case"wildcard":return!0}}function o(i,t,e,r){return!(e.input&&!(Array.isArray(e.input)?e.input:[e.input]).every(c=>n(i,i,c,r))||e.patterns&&!e.patterns.every(a=>n(i,i,a,r)))}return uh}var ar={},aI;function AY(){if(aI)return ar;aI=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.removeOperationSource=ar.assignOperationSource=ar.getOperationSource=ar.testReadOnly=ar.validateQueryOutput=ar.getSafeVoid=ar.getSafeBoolean=ar.getSafeQuads=ar.getSafeBindings=void 0;const u=Ce(),n=be();function o(l){return r(l,"bindings"),l}ar.getSafeBindings=o;function i(l){return r(l,"quads"),l}ar.getSafeQuads=i;function t(l){return r(l,"boolean"),l}ar.getSafeBoolean=t;function e(l){return r(l,"void"),l}ar.getSafeVoid=e;function r(l,f){if(l.type!==f)throw new Error(`Invalid query output type: Expected '${f}' but got '${l.type}'`)}ar.validateQueryOutput=r;function a(l){return l.get(u.KeysQueryOperation.readOnly)?(0,n.failTest)("Attempted a write operation in read-only mode"):(0,n.passTestVoid)()}ar.testReadOnly=a;function c(l){var f;return(f=l.metadata)==null?void 0:f.scopedSource}ar.getOperationSource=c;function s(l,f){return l={...l},l.metadata=l.metadata?{...l.metadata}:{},l.metadata.scopedSource=f,l}ar.assignOperationSource=s;function d(l){var f;(f=l.metadata)==null||delete f.scopedSource,l.metadata&&Object.keys(l.metadata).length===0&&delete l.metadata}return ar.removeOperationSource=d,ar}var tu={},uI;function OY(){if(uI)return tu;uI=1,Object.defineProperty(tu,"__esModule",{value:!0}),tu.materializeOperation=tu.materializeTerm=void 0;const u=tr(),n=gn(),o=dt();function i(r,a){if(r.termType==="Variable"){const c=a.get(r);if(c)return c}return r.termType==="Quad"&&(0,n.someTermsNested)(r,c=>c.termType==="Variable")?(0,n.mapTermsNested)(r,c=>i(c,a)):r}tu.materializeTerm=i;function t(r,a,c,s,d={}){return d={strictTargetVariables:"strictTargetVariables"in d?d.strictTargetVariables:!1,bindFilter:"bindFilter"in d?d.bindFilter:!0,originalBindings:"originalBindings"in d?d.originalBindings:a},o.Util.mapOperation(r,{path(l,f){return{recurse:!1,result:Object.assign(f.createPath(i(l.subject,a),l.predicate,i(l.object,a),i(l.graph,a)),{metadata:l.metadata})}},pattern(l,f){return{recurse:!1,result:Object.assign(f.createPattern(i(l.subject,a),i(l.predicate,a),i(l.object,a),i(l.graph,a)),{metadata:l.metadata})}},join(l,f){return{recurse:!1,result:f.createJoin(l.input.map(h=>t(h,a,c,s,d)),l.input.every(h=>!h.metadata))}},extend(l){if(a.has(l.variable)){if(d.strictTargetVariables)throw new Error(`Tried to bind variable ${(0,u.termToString)(l.variable)} in a BIND operator.`);return{recurse:!0,result:t(l.input,a,c,s,d)}}return{recurse:!0,result:l}},group(l,f){if(d.strictTargetVariables){for(const p of l.variables)if(a.has(p))throw new Error(`Tried to bind variable ${(0,u.termToString)(p)} in a GROUP BY operator.`);return{recurse:!0,result:l}}const h=l.variables.filter(p=>!a.has(p));return{recurse:!0,result:f.createGroup(l.input,h,l.aggregates)}},filter(l,f){const h=d.originalBindings;if(l.expression.expressionType!=="operator"||h.size===0)return{recurse:!1,result:l};const p=e(f,h),y=t(l.expression,a,c,s,d);let _=t(l.input,a,c,s,d);return p.length>0&&(_=f.createJoin([...p,_])),{recurse:!1,result:f.createFilter(_,y)}},project(l,f){const h=e(f,d.originalBindings,l.variables);let p=t(l.input,a,c,s,d);return h.length>0&&(p=f.createJoin([...h,p])),{recurse:!1,result:f.createProject(p,l.variables)}},values(l,f){if(d.strictTargetVariables){for(const h of l.variables)if(a.has(h))throw new Error(`Tried to bind variable ${(0,u.termToString)(h)} in a VALUES operator.`)}else{const h=l.variables.filter(y=>!a.has(y)),p=l.bindings.map(y=>{const _={...y};let b=!0;return a.forEach((m,g)=>{const T=(0,u.termToString)(g);T in _&&(m.equals(_[T])||(b=!1),delete _[T])}),b?_:void 0}).filter(Boolean);return{recurse:!0,result:f.createValues(h,p)}}return{recurse:!1,result:l}},expression(l,f){if(!d.bindFilter)return{recurse:!1,result:l};if(l.expressionType==="term")return{recurse:!1,result:f.createTermExpression(i(l.term,a))};if(l.expressionType==="operator")return l.operator==="bound"&&l.args.length===1&&l.args[0].expressionType==="term"&&[...a.keys()].some(h=>l.args[0].term.equals(h))?{recurse:!1,result:f.createTermExpression(f.dataFactory.literal("true",f.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#boolean")))}:{recurse:!0,result:l};if(l.expressionType==="aggregate"&&"variable"in l&&a.has(l.variable)){if(d.strictTargetVariables)throw new Error(`Tried to bind ${(0,u.termToString)(l.variable)} in a ${l.aggregator} aggregate.`);return{recurse:!0,result:l}}return{recurse:!0,result:l}}},c)}tu.materializeOperation=t;function e(r,a,c){const s=[];for(const[d,l]of a)if(!c||c.some(f=>f.equals(d))){const f={[(0,u.termToString)(d)]:l};s.push(r.createValues([d],[f]))}return s}return tu}var oI;function gt(){return oI||(oI=1,(function(u){var n=eu&&eu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=eu&&eu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(wY(),u),o(SY(),u),o(AY(),u),o(OY(),u)})(eu)),eu}var sI;function EY(){if(sI)return ah;sI=1,Object.defineProperty(ah,"__esModule",{value:!0}),ah.ActorOptimizeQueryOperationGroupSources=void 0;const u=mn(),n=Ce(),o=be(),i=gt(),t=dt();let e=class extends u.ActorOptimizeQueryOperation{constructor(a){super(a)}async test(a){return(0,i.getOperationSource)(a.operation)?(0,o.failTest)(`Actor ${this.name} does not work with top-level operation sources.`):(0,o.passTestVoid)()}async run(a){return{operation:await this.groupOperation(a.operation,a.context),context:a.context}}async groupOperation(a,c){var p;const s=c.getSafe(n.KeysInitQuery.dataFactory),d=new t.Factory(s);if((0,i.getOperationSource)(a)??!("input"in a))return a;if(!Array.isArray(a.input)){const y=await this.groupOperation(a.input,c);if((p=y.metadata)!=null&&p.scopedSource){const _=(0,i.getOperationSource)(y);(0,i.doesShapeAcceptOperation)(await _.source.getSelectorShape(c),a)&&(this.logDebug(c,`Hoist 1 source-specific operation into a single ${a.type} operation for ${_.source.toString()}`),(0,i.removeOperationSource)(y),a=(0,i.assignOperationSource)(a,_))}return{...a,input:y}}const l=await Promise.all(a.input.map(y=>this.groupOperation(y,c))),f=this.clusterOperationsWithEqualSources(l);if(f.length===1){const y=f[0],_=(0,i.getOperationSource)(f[0][0]);return{...await this.moveSourceAnnotationUpwardsIfPossible(a,y,_,c),input:y}}if(f.length===l.length)return{...a,input:l};let h;switch(a.type){case t.Algebra.types.JOIN:h=d.createJoin.bind(d);break;case t.Algebra.types.UNION:h=d.createUnion.bind(d);break;case t.Algebra.types.ALT:h=d.createAlt.bind(d);break;case t.Algebra.types.SEQ:h=d.createSeq.bind(d);break;default:throw new Error(`Unsupported operation '${a.type}' detected while grouping sources`)}return await this.groupOperationMulti(f,h,c)}async groupOperationMulti(a,c,s){let d=!0;const l=await Promise.all(a.map(async f=>{const h=(0,i.getOperationSource)(f[0]),p=await this.moveSourceAnnotationUpwardsIfPossible(c(f,!0),f,h,s);return(0,i.getOperationSource)(p)&&(d=!1),p}));return c(l,d)}clusterOperationsWithEqualSources(a){const c=new Map,s=[];for(const l of a){const f=(0,i.getOperationSource)(l);f?(c.has(f)||c.set(f,[]),c.get(f).push(l)):s.push(l)}const d=[];s.length>0&&d.push(s);for(const[l,f]of c.entries())d.push(f.map(h=>(0,i.assignOperationSource)(h,l)));return d}async moveSourceAnnotationUpwardsIfPossible(a,c,s,d){if(s&&(0,i.doesShapeAcceptOperation)(await s.source.getSelectorShape(d),a)){this.logDebug(d,`Hoist ${c.length} source-specific operations into a single ${a.type} operation for ${s.source.toString()}`),a=(0,i.assignOperationSource)(a,s);for(const l of c)(0,i.removeOperationSource)(l)}return a}};return ah.ActorOptimizeQueryOperationGroupSources=e,ah}var cI;function xY(){return cI||(cI=1,(function(u){var n=Za&&Za.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Za&&Za.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(EY(),u)})(Za)),Za}var ru={},oh={},dI;function IY(){if(dI)return oh;dI=1,Object.defineProperty(oh,"__esModule",{value:!0}),oh.ActorOptimizeQueryOperationConstructDistinct=void 0;const u=mn(),n=iz(),o=be(),i=dt();let t=class extends u.ActorOptimizeQueryOperation{constructor(r){super(r)}async test(r){return r.context.has(n.KeysInitQuery.distinctConstruct)?(0,o.passTestVoid)():(0,o.failTest)(`${this.name} was not enabled by the query.`)}async run(r){return{operation:i.Util.mapOperation(r.operation,{construct(c,s){return{recurse:!1,result:s.createDistinct(s.createConstruct(c.input,c.template))}}}),context:r.context.delete(n.KeysInitQuery.distinctConstruct)}}};return oh.ActorOptimizeQueryOperationConstructDistinct=t,oh}var lI;function RY(){return lI||(lI=1,(function(u){var n=ru&&ru.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ru&&ru.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(IY(),u)})(ru)),ru}var nu={},sh={},iu={},ch={},fI;function FY(){if(fI)return ch;fI=1,Object.defineProperty(ch,"__esModule",{value:!0}),ch.ActorQueryParse=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i)}};return ch.ActorQueryParse=n,ch}var hI;function Rz(){return hI||(hI=1,(function(u){var n=iu&&iu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=iu&&iu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(FY(),u)})(iu)),iu}var pI;function NY(){if(pI)return sh;pI=1,Object.defineProperty(sh,"__esModule",{value:!0}),sh.ActorQueryParseSparql=void 0;const u=Rz(),n=Ce(),o=be(),i=dt(),t=Ev();let e=class extends u.ActorQueryParse{constructor(a){super(a),this.prefixes=Object.freeze(this.prefixes)}async test(a){return a.queryFormat&&a.queryFormat.language!=="sparql"?(0,o.failTest)("This actor can only parse SPARQL queries"):(0,o.passTestVoid)()}async run(a){const c=a.context.getSafe(n.KeysInitQuery.dataFactory),d=new t.Parser({prefixes:this.prefixes,baseIRI:a.baseIRI,sparqlStar:!0,factory:c}).parse(a.query);return{baseIRI:d.type==="query"?d.base:void 0,operation:(0,i.translate)(d,{quads:!0,prefixes:this.prefixes,blankToVariable:!0,baseIRI:a.baseIRI,dataFactory:c})}}};return sh.ActorQueryParseSparql=e,sh}var bI;function PY(){return bI||(bI=1,(function(u){var n=nu&&nu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=nu&&nu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(NY(),u)})(nu)),nu}var au={},dh={},uu={},ou={},su={},lh={},yI;function Qf(){if(yI)return lh;yI=1,Object.defineProperty(lh,"__esModule",{value:!0}),lh.DirectiveNodeHandlerAdapter=void 0;let u=class{constructor(o,i,t){this.targetKind=o,this.util=i,this.settings=t}getDirectiveConditionalValue(o,i){const t=this.util.getArgument(o.arguments,"if");if(!t)throw new Error(`The directive ${o.name.value} is missing an if-argument.`);const e=this.util.handleNodeValue(t.value,t.name.value,i);if(e.terms.length!==1)throw new Error(`Can not apply the directive ${o.name.value} with a list.`);return e.terms[0]}isDirectiveScopeAll(o){const i=this.util.getArgument(o.arguments,"scope");return i&&i.value.kind==="EnumValue"&&i.value.value==="all"}};return lh.DirectiveNodeHandlerAdapter=u,lh}var fh={},_I;function DY(){if(_I)return fh;_I=1,Object.defineProperty(fh,"__esModule",{value:!0}),fh.DirectiveNodeHandlerInclude=void 0;const u=Qf();let n=class extends u.DirectiveNodeHandlerAdapter{constructor(i,t){super("include",i,t)}handle(i,t){const e=this.getDirectiveConditionalValue(i.directive,t);return e.termType==="Literal"&&e.value==="false"?{ignore:!0}:{}}};return fh.DirectiveNodeHandlerInclude=n,fh}var hh={},gI;function jY(){if(gI)return hh;gI=1,Object.defineProperty(hh,"__esModule",{value:!0}),hh.DirectiveNodeHandlerOptional=void 0;const u=Qf();let n=class extends u.DirectiveNodeHandlerAdapter{constructor(i,t){super("optional",i,t)}handle(i,t){return{operationOverrider:e=>this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),e)}}};return hh.DirectiveNodeHandlerOptional=n,hh}var ph={},yS={},mI;function Pv(){return mI||(mI=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.SingularizeState=void 0,(function(n){n[n.SINGLE=0]="SINGLE",n[n.PLURAL=1]="PLURAL"})(u.SingularizeState||(u.SingularizeState={}))})(yS)),yS}var vI;function LY(){if(vI)return ph;vI=1,Object.defineProperty(ph,"__esModule",{value:!0}),ph.DirectiveNodeHandlerPlural=void 0;const u=Pv(),n=Qf();let o=class extends n.DirectiveNodeHandlerAdapter{constructor(t,e){super("plural",t,e)}handle(t,e){return this.isDirectiveScopeAll(t.directive)&&(e.singularizeState=u.SingularizeState.PLURAL),delete e.singularizeVariables[this.util.nameToVariable(t.fieldLabel,e).value],{}}};return ph.DirectiveNodeHandlerPlural=o,ph}var bh={},TI;function MY(){if(TI)return bh;TI=1,Object.defineProperty(bh,"__esModule",{value:!0}),bh.DirectiveNodeHandlerSingle=void 0;const u=Pv(),n=Qf();let o=class extends n.DirectiveNodeHandlerAdapter{constructor(t,e){super("single",t,e)}handle(t,e){return this.isDirectiveScopeAll(t.directive)&&(e.singularizeState=u.SingularizeState.SINGLE),e.singularizeVariables[this.util.nameToVariable(t.fieldLabel,e).value]=!0,{}}};return bh.DirectiveNodeHandlerSingle=o,bh}var yh={},wI;function CY(){if(wI)return yh;wI=1,Object.defineProperty(yh,"__esModule",{value:!0}),yh.DirectiveNodeHandlerSkip=void 0;const u=Qf();let n=class extends u.DirectiveNodeHandlerAdapter{constructor(i,t){super("skip",i,t)}handle(i,t){const e=this.getDirectiveConditionalValue(i.directive,t);return e.termType==="Literal"&&e.value==="true"?{ignore:!0}:{}}};return yh.DirectiveNodeHandlerSkip=n,yh}var SI;function Fz(){return SI||(SI=1,(function(u){var n=su&&su.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=su&&su.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Qf(),u),o(DY(),u),o(jY(),u),o(LY(),u),o(MY(),u),o(CY(),u)})(su)),su}var cu={},_h={},AI;function ti(){if(AI)return _h;AI=1,Object.defineProperty(_h,"__esModule",{value:!0}),_h.NodeValueHandlerAdapter=void 0;let u=class{constructor(o,i,t){this.targetKind=o,this.util=i,this.settings=t}};return _h.NodeValueHandlerAdapter=u,_h}var gh={},OI;function qY(){if(OI)return gh;OI=1,Object.defineProperty(gh,"__esModule",{value:!0}),gh.NodeValueHandlerBoolean=void 0;const u=ti();let n=class extends u.NodeValueHandlerAdapter{constructor(i,t){super("BooleanValue",i,t),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#boolean")}handle(i,t,e){return{terms:[this.util.dataFactory.literal(i.value?"true":"false",this.datatype)]}}};return gh.NodeValueHandlerBoolean=n,gh}var mh={},EI;function BY(){if(EI)return mh;EI=1,Object.defineProperty(mh,"__esModule",{value:!0}),mh.NodeValueHandlerEnum=void 0;const u=ti();let n=class extends u.NodeValueHandlerAdapter{constructor(i,t){super("EnumValue",i,t)}handle(i,t,e){return{terms:[this.util.valueToNamedNode(i.value,e.context)]}}};return mh.NodeValueHandlerEnum=n,mh}var vh={},xI;function $Y(){if(xI)return vh;xI=1,Object.defineProperty(vh,"__esModule",{value:!0}),vh.NodeValueHandlerFloat=void 0;const u=ti();let n=class extends u.NodeValueHandlerAdapter{constructor(i,t){super("FloatValue",i,t),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#float")}handle(i,t,e){return{terms:[this.util.dataFactory.literal(i.value,this.datatype)]}}};return vh.NodeValueHandlerFloat=n,vh}var Th={},II;function UY(){if(II)return Th;II=1,Object.defineProperty(Th,"__esModule",{value:!0}),Th.NodeValueHandlerInt=void 0;const u=ti();let n=class extends u.NodeValueHandlerAdapter{constructor(i,t){super("IntValue",i,t),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#integer")}handle(i,t,e){return{terms:[this.util.dataFactory.literal(i.value,this.datatype)]}}};return Th.NodeValueHandlerInt=n,Th}var wh={},RI;function VY(){if(RI)return wh;RI=1,Object.defineProperty(wh,"__esModule",{value:!0}),wh.NodeValueHandlerList=void 0;const u=ti();let n=class extends u.NodeValueHandlerAdapter{constructor(i,t){super("ListValue",i,t),this.nodeFirst=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),this.nodeRest=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),this.nodeNil=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil")}handle(i,t,e){const r=[];let a=[];for(const c of i.values){const s=this.util.handleNodeValue(c,t,e);for(const d of s.terms)r.push(d);s.auxiliaryPatterns&&(a=a.concat(s.auxiliaryPatterns))}if(this.settings.arraysToRdfLists){const c=this.util.dataFactory.blankNode();let s=c,d=r.length;for(const l of r){a.push(this.util.operationFactory.createPattern(s,this.nodeFirst,l,e.graph));const f=--d===0?this.nodeNil:this.util.dataFactory.blankNode();a.push(this.util.operationFactory.createPattern(s,this.nodeRest,f,e.graph)),s=f}return{terms:[c],auxiliaryPatterns:a}}else return{terms:r,auxiliaryPatterns:a}}};return wh.NodeValueHandlerList=n,wh}var Sh={},FI;function QY(){if(FI)return Sh;FI=1,Object.defineProperty(Sh,"__esModule",{value:!0}),Sh.NodeValueHandlerNull=void 0;const u=ti();let n=class extends u.NodeValueHandlerAdapter{constructor(i,t){super("NullValue",i,t),this.nil=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil")}handle(i,t,e){return{terms:[this.nil]}}};return Sh.NodeValueHandlerNull=n,Sh}var Ah={},NI;function HY(){if(NI)return Ah;NI=1,Object.defineProperty(Ah,"__esModule",{value:!0}),Ah.NodeValueHandlerObject=void 0;const u=ti();let n=class extends u.NodeValueHandlerAdapter{constructor(i,t){super("ObjectValue",i,t)}handle(i,t,e){const r=this.util.dataFactory.blankNode();let a=[];for(const c of i.fields){const s=this.util.handleNodeValue(c.value,t,e);for(const d of s.terms)a.push(this.util.createQuadPattern(r,c.name,d,e.graph,e.context));s.auxiliaryPatterns&&(a=a.concat(s.auxiliaryPatterns))}return{terms:[r],auxiliaryPatterns:a}}};return Ah.NodeValueHandlerObject=n,Ah}var Oh={},PI;function GY(){if(PI)return Oh;PI=1,Object.defineProperty(Oh,"__esModule",{value:!0}),Oh.NodeValueHandlerString=void 0;const u=ti();let n=class extends u.NodeValueHandlerAdapter{constructor(i,t){super("StringValue",i,t)}handle(i,t,e){const r=e.context.getContextRaw()[t];let a,c;return r&&typeof r!="string"&&(r["@language"]?a=r["@language"]:r["@type"]&&(c=this.util.dataFactory.namedNode(r["@type"]))),{terms:[this.util.dataFactory.literal(i.value,a||c)]}}};return Oh.NodeValueHandlerString=n,Oh}var Eh={},DI;function zY(){if(DI)return Eh;DI=1,Object.defineProperty(Eh,"__esModule",{value:!0}),Eh.NodeValueHandlerVariable=void 0;const u=ti();let n=class extends u.NodeValueHandlerAdapter{constructor(i,t){super("Variable",i,t)}handle(i,t,e){const r=i.name.value,a=e.variablesDict[r],c=e.variablesMetaDict[r];if(!a){if(!e.ignoreUnknownVariables&&(!c||c.mandatory))throw new Error(`Undefined variable: ${r}`);{const s=this.util.dataFactory.variable(r);return e.terminalVariables.map(d=>d.value).indexOf(r)<0&&e.terminalVariables.push(s),{terms:[s]}}}if(a.kind==="Variable")throw new Error(`Variable refers to another variable: ${r}`);if(c)if(c.list){if(a.kind!=="ListValue")throw new Error(`Expected a list, but got ${a.kind} for ${r}`);if(c.type){const s=a;for(const d of s.values)if(d.kind!==c.type)throw new Error(`Expected ${c.type}, but got ${d.kind} for ${r}`)}}else c.type;return this.util.handleNodeValue(a,t,e)}};return Eh.NodeValueHandlerVariable=n,Eh}var jI;function XY(){return jI||(jI=1,(function(u){var n=cu&&cu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=cu&&cu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ti(),u),o(qY(),u),o(BY(),u),o($Y(),u),o(UY(),u),o(VY(),u),o(QY(),u),o(HY(),u),o(GY(),u),o(zY(),u)})(cu)),cu}var xh={},LI;function Pw(){if(LI)return xh;LI=1,Object.defineProperty(xh,"__esModule",{value:!0}),xh.NodeHandlerAdapter=void 0;let u=class{constructor(o,i,t){this.targetKind=o,this.util=i,this.settings=t}getNodeQuadContextSelectionSet(o,i,t){const e={};if(o){for(const r of o.selections)if(r.kind==="Field"){const a=r;this.handleNodeQuadContextField(a,t,e,"id","subject"),this.handleNodeQuadContextField(a,t,e,"graph","graph")}}return e}handleNodeQuadContextField(o,i,t,e,r){if(!t[r]&&o.name.value===e){if(!t[r]){const a=this.util.getArgument(o.arguments,"_");if(a){const c=this.util.handleNodeValue(a.value,o.name.value,i);if(c.terms.length!==1)throw new Error(`Only single values can be set as ${e}, but got ${c.terms.length} at ${o.name.value}`);t[r]=c.terms[0],c.auxiliaryPatterns&&(t.auxiliaryPatterns||(t.auxiliaryPatterns=[]),t.auxiliaryPatterns.concat(c.auxiliaryPatterns))}}if(!t[r]){const a=this.util.nameToVariable(this.util.getFieldLabel(o),i);i.terminalVariables.push(a),t[r]=a}}}getDirectiveOutputs(o,i,t){const e=[];if(o)for(const r of o){const a=this.util.handleDirectiveNode({directive:r,fieldLabel:i},t);if(a){if(a.ignore)return null;e.push(a)}}return e}handleDirectiveOutputs(o,i){for(const t of o){if(t.ignore)return this.util.operationFactory.createBgp([]);t.operationOverrider&&(i=t.operationOverrider(i))}return i}};return xh.NodeHandlerAdapter=u,xh}var Ih={},MI;function xO(){if(MI)return Ih;MI=1,Object.defineProperty(Ih,"__esModule",{value:!0}),Ih.NodeHandlerDefinitionAdapter=void 0;const u=Pw();let n=class extends u.NodeHandlerAdapter{constructor(i,t,e){super(i,t,e)}};return Ih.NodeHandlerDefinitionAdapter=n,Ih}var Rh={},CI;function JY(){if(CI)return Rh;CI=1,Object.defineProperty(Rh,"__esModule",{value:!0}),Rh.NodeHandlerDefinitionFragment=void 0;const u=xO();let n=class extends u.NodeHandlerDefinitionAdapter{constructor(i,t){super("FragmentDefinition",i,t)}handle(i,t){throw new Error("Illegal state: fragment definitions must be indexed and removed before processing")}};return Rh.NodeHandlerDefinitionFragment=n,Rh}var Fh={},qI;function kY(){if(qI)return Fh;qI=1,Object.defineProperty(Fh,"__esModule",{value:!0}),Fh.NodeHandlerDefinitionOperation=void 0;const u=xO();let n=class extends u.NodeHandlerDefinitionAdapter{constructor(i,t){super("OperationDefinition",i,t)}handle(i,t){if(i.operation!=="query")throw new Error("Unsupported definition operation: "+i.operation);if(i.variableDefinitions)for(const a of i.variableDefinitions){const c=a.variable.name.value;a.defaultValue&&(t.variablesDict[c]||(t.variablesDict[c]=a.defaultValue));let s=a.type;const d=s.kind==="NonNullType";d&&(s=s.type);const l=s.kind==="ListType";l&&(s=s.type);const f=s.name.value;t.variablesMetaDict[c]={mandatory:d,list:l,type:f}}const e=this.getDirectiveOutputs(i.directives,i.name?i.name.value:"",t);if(!e)return this.util.operationFactory.createBgp([]);const r=this.util.joinOperations(i.selectionSet.selections.map(a=>this.util.handleNode(a,t)));return this.handleDirectiveOutputs(e,r)}};return Fh.NodeHandlerDefinitionOperation=n,Fh}var Nh={},BI;function KY(){if(BI)return Nh;BI=1,Object.defineProperty(Nh,"__esModule",{value:!0}),Nh.NodeHandlerDocument=void 0;const u=dt(),n=Pw();let o=class extends n.NodeHandlerAdapter{constructor(t,e){super("Document",t,e)}handle(t,e){const r=t.definitions.map(c=>{const s=this.getNodeQuadContextDefinitionNode(c,Object.assign(Object.assign({},e),{ignoreUnknownVariables:!0})),d=Object.assign(Object.assign({},e),{graph:s.graph||e.graph,subject:s.subject||this.util.dataFactory.blankNode()});let l=this.util.handleNode(c,d);return s&&s.auxiliaryPatterns&&(l=this.util.joinOperations([l,this.util.operationFactory.createBgp(s.auxiliaryPatterns)])),l}),a=this.util.operationFactory.createProject(r.length===1?r[0]:this.util.operationFactory.createUnion(r),e.terminalVariables);return this.translateBlankNodesToVariables(a)}getNodeQuadContextDefinitionNode(t,e){if(t.kind==="OperationDefinition")return this.getNodeQuadContextSelectionSet(t.selectionSet,t.name?t.name.value:"",e);throw new Error(`Unsupported definition: ${t.kind}`)}translateBlankNodesToVariables(t){const e=this,r={},a=Array.from(t.variables).reduce((s,d)=>(s[d.value]=!0,s),{});return u.Util.mapOperation(t,{path:(s,d)=>({recurse:!1,result:d.createPath(c(s.subject),s.predicate,c(s.object),c(s.graph))}),pattern:(s,d)=>({recurse:!1,result:d.createPattern(c(s.subject),c(s.predicate),c(s.object),c(s.graph))})});function c(s){if(s.termType==="BlankNode"){let d=r[s.value];return d||(d=u.Util.createUniqueVariable(s.value,a,e.util.dataFactory),a[d.value]=!0,r[s.value]=d),d}return s}}};return Nh.NodeHandlerDocument=o,Nh}var Ph={},$I;function Dw(){if($I)return Ph;$I=1,Object.defineProperty(Ph,"__esModule",{value:!0}),Ph.NodeHandlerSelectionAdapter=void 0;const u=dt(),n=Pv(),o=Pw();let i=class extends o.NodeHandlerAdapter{constructor(e,r,a){super(e,r,a)}getNodeQuadContextFieldNode(e,r,a){return this.getNodeQuadContextSelectionSet(e.selectionSet,r,Object.assign(Object.assign({},a),{path:this.util.appendFieldToPath(a.path,r)}))}fieldToOperation(e,r,a,c){const s=a;let d=0,l;if((r.name.value==="id"||r.name.value==="graph")&&(a=!1,r.arguments))for(const v of r.arguments)v.name.value==="_"&&this.util.handleNodeValue(v.value,r.name.value,e);const f=this.util.getFieldLabel(r);if(e.singularizeState===n.SingularizeState.SINGLE&&(e.singularizeVariables[this.util.nameToVariable(f,e).value]=!0),a){const v=this.handleMetaField(e,f,c);if(v)return v}const h=c?[this.util.operationFactory.createBgp(c)]:[],p=this.getNodeQuadContextFieldNode(r,f,e);let y=p.subject||this.util.nameToVariable(f,e),_=p.graph||e.graph;p.auxiliaryPatterns&&h.push(this.util.operationFactory.createBgp(p.auxiliaryPatterns));let b=!0,m=null;if(a&&r.arguments&&r.arguments.length){for(const v of r.arguments)if(v.name.value==="_"){const A=this.util.handleNodeValue(v.value,r.name.value,e);m=A.terms,h.push(this.util.operationFactory.createBgp(A.terms.map(I=>this.util.createQuadPattern(e.subject,r.name,I,e.graph,e.context)))),A.auxiliaryPatterns&&h.push(this.util.operationFactory.createBgp(A.auxiliaryPatterns)),a=!1;break}else if(v.name.value==="graph"){const A=this.util.handleNodeValue(v.value,r.name.value,e);if(A.terms.length!==1)throw new Error(`Only single values can be set as graph, but got ${A.terms.length} at ${r.name.value}`);_=A.terms[0],e=Object.assign(Object.assign({},e),{graph:_}),A.auxiliaryPatterns&&h.push(this.util.operationFactory.createBgp(A.auxiliaryPatterns));break}else if(v.name.value==="alt"){let A=v.value;A.kind!=="ListValue"&&(A={kind:"ListValue",values:[A]}),h.push(this.util.createQuadPath(e.subject,r.name,A,y,e.graph,e.context)),b=!1;break}}if(a&&b&&h.push(this.util.operationFactory.createBgp([this.util.createQuadPattern(e.subject,r.name,y,e.graph,e.context)])),r.arguments&&r.arguments.length){for(const v of r.arguments)if(!(v.name.value==="_"||v.name.value==="graph"||v.name.value==="alt"))if(v.name.value==="first"){if(v.value.kind!=="IntValue")throw new Error("Invalid value type for 'first' argument: "+v.value.kind);l=parseInt(v.value.value,10)}else if(v.name.value==="offset"){if(v.value.kind!=="IntValue")throw new Error("Invalid value type for 'offset' argument: "+v.value.kind);d=parseInt(v.value.value,10)}else{const A=this.util.handleNodeValue(v.value,v.name.value,e);h.push(this.util.operationFactory.createBgp(A.terms.map(I=>this.util.createQuadPattern(y,v.name,I,e.graph,e.context)))),A.auxiliaryPatterns&&h.push(this.util.operationFactory.createBgp(A.auxiliaryPatterns))}}const g=this.getDirectiveOutputs(r.directives,f,e);if(!g)return this.util.operationFactory.createBgp([]);let T=this.util.joinOperations(h);if(r.selectionSet&&r.selectionSet.selections.length){if(m){if(m.length!==1)throw new Error(`Only single values can be set as id, but got ${m.length} at ${r.name.value}`);y=m[0]}const v=Object.assign(Object.assign(Object.assign({},e),s?{path:this.util.appendFieldToPath(e.path,f)}:{}),{graph:_,subject:s?y:e.subject});let A=!1;const I=r.selectionSet.selections.filter(O=>O.kind==="Field"&&O.name.value==="totalCount"?(A=!0,!1):!0);let q=this.util.joinOperations(h.concat(I.map(O=>this.util.handleNode(O,v))));if(A){const O=this.util.dataFactory.variable("var"+this.settings.expressionVariableCounter++),w=this.util.dataFactory.variable(y.value+this.settings.variableDelimiter+"totalCount"),S=this.util.operationFactory.createBoundAggregate(O,"count",this.util.operationFactory.createTermExpression(y),!1),E=this.util.operationFactory.createProject(this.util.operationFactory.createExtend(this.util.operationFactory.createGroup(T,[],[S]),w,this.util.operationFactory.createTermExpression(O)),[w]);e.terminalVariables.push(w),I.length?q=this.util.operationFactory.createJoin([this.util.operationFactory.createProject(q,[]),E]):q=E}T=q}else a&&y.termType==="Variable"&&e.terminalVariables.push(y);return(d||l)&&(T=this.util.operationFactory.createSlice(this.util.operationFactory.createProject(T,u.Util.inScopeVariables(T)),d,l)),this.handleDirectiveOutputs(g,T)}handleMetaField(e,r,a){if(r==="__typename"){const c=this.util.nameToVariable(r,e);return e.terminalVariables.push(c),this.util.operationFactory.createBgp([this.util.operationFactory.createPattern(e.subject,this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.util.nameToVariable(r,e),e.graph)].concat(a||[]))}}};return Ph.NodeHandlerSelectionAdapter=i,Ph}var Dh={},UI;function WY(){if(UI)return Dh;UI=1,Object.defineProperty(Dh,"__esModule",{value:!0}),Dh.NodeHandlerSelectionField=void 0;const u=Dw();let n=class extends u.NodeHandlerSelectionAdapter{constructor(i,t){super("Field",i,t)}handle(i,t){return this.fieldToOperation(t,i,!0)}};return Dh.NodeHandlerSelectionField=n,Dh}var jh={},VI;function YY(){if(VI)return jh;VI=1,Object.defineProperty(jh,"__esModule",{value:!0}),jh.NodeHandlerSelectionFragmentSpread=void 0;const u=Dw();let n=class extends u.NodeHandlerSelectionAdapter{constructor(i,t){super("FragmentSpread",i,t)}handle(i,t){const e=t.fragmentDefinitions[i.name.value];if(!e)throw new Error("Undefined fragment definition: "+i.name.value);const r={alias:void 0,arguments:void 0,directives:e.directives,kind:"Field",name:i.name,selectionSet:e.selectionSet},a=[this.util.newTypePattern(t.subject,e.typeCondition,t)];return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),this.fieldToOperation(t,r,!1,a))}};return jh.NodeHandlerSelectionFragmentSpread=n,jh}var Lh={},QI;function ZY(){if(QI)return Lh;QI=1,Object.defineProperty(Lh,"__esModule",{value:!0}),Lh.NodeHandlerSelectionInlineFragment=void 0;const u=Dw();let n=class extends u.NodeHandlerSelectionAdapter{constructor(i,t){super("InlineFragment",i,t)}handle(i,t){const e={alias:void 0,arguments:void 0,directives:i.directives,kind:"Field",name:{kind:"Name",value:t.subject.value},selectionSet:i.selectionSet},r=i.typeCondition?[this.util.newTypePattern(t.subject,i.typeCondition,t)]:[];return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),this.fieldToOperation(t,e,!1,r))}};return Lh.NodeHandlerSelectionInlineFragment=n,Lh}var HI;function Nz(){return HI||(HI=1,(function(u){var n=ou&&ou.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ou&&ou.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Fz(),u),o(XY(),u),o(Pw(),u),o(xO(),u),o(JY(),u),o(kY(),u),o(KY(),u),o(Dw(),u),o(WY(),u),o(YY(),u),o(ZY(),u)})(ou)),ou}var du={},Pz=typeof Symbol=="function"&&Symbol.toStringTag!=null?Symbol.toStringTag:"@@toStringTag",FA=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0;function ew(u){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ew=function(o){return typeof o}:ew=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},ew(u)}var eZ=10,Dz=2;function jz(u){return jw(u,[])}function jw(u,n){switch(ew(u)){case"string":return JSON.stringify(u);case"function":return u.name?"[function ".concat(u.name,"]"):"[function]";case"object":return u===null?"null":tZ(u,n);default:return String(u)}}function tZ(u,n){if(n.indexOf(u)!==-1)return"[Circular]";var o=[].concat(n,[u]),i=iZ(u);if(i!==void 0){var t=i.call(u);if(t!==u)return typeof t=="string"?t:jw(t,o)}else if(Array.isArray(u))return nZ(u,o);return rZ(u,o)}function rZ(u,n){var o=Object.keys(u);if(o.length===0)return"{}";if(n.length>Dz)return"["+aZ(u)+"]";var i=o.map(function(t){var e=jw(u[t],n);return t+": "+e});return"{ "+i.join(", ")+" }"}function nZ(u,n){if(u.length===0)return"[]";if(n.length>Dz)return"[Array]";for(var o=Math.min(eZ,u.length),i=u.length-o,t=[],e=0;e<o;++e)t.push(jw(u[e],n));return i===1?t.push("... 1 more item"):i>1&&t.push("... ".concat(i," more items")),"["+t.join(", ")+"]"}function iZ(u){var n=u[String(FA)];if(typeof n=="function")return n;if(typeof u.inspect=="function")return u.inspect}function aZ(u){var n=Object.prototype.toString.call(u).replace(/^\[object /,"").replace(/]$/,"");if(n==="Object"&&typeof u.constructor=="function"){var o=u.constructor.name;if(typeof o=="string"&&o!=="")return o}return n}function tw(u,n){var o=!!u;if(!o)throw new Error(n)}const uZ=(function(n,o){return n instanceof o});function oZ(u,n){for(var o=0;o<n.length;o++){var i=n[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(u,i.key,i)}}function sZ(u,n,o){return n&&oZ(u.prototype,n),u}var IO=(function(){function u(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"GraphQL request",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{line:1,column:1};typeof n=="string"||tw(0,"Body must be a string. Received: ".concat(jz(n),".")),this.body=n,this.name=o,this.locationOffset=i,this.locationOffset.line>0||tw(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||tw(0,"column in locationOffset is 1-indexed and must be positive.")}return sZ(u,[{key:Pz,get:function(){return"Source"}}]),u})();function cZ(u){return uZ(u,IO)}function yw(u,n){for(var o=/\r\n|[\n\r]/g,i=1,t=n+1,e;(e=o.exec(u.body))&&e.index<n;)i+=1,t=n+1-(e.index+e[0].length);return{line:i,column:t}}function Lz(u){return RO(u.source,yw(u.source,u.start))}function RO(u,n){var o=u.locationOffset.column-1,i=rw(o)+u.body,t=n.line-1,e=u.locationOffset.line-1,r=n.line+e,a=n.line===1?o:0,c=n.column+a,s="".concat(u.name,":").concat(r,":").concat(c,`
`),d=i.split(/\r\n|[\n\r]/g),l=d[t];if(l.length>120){for(var f=Math.floor(c/80),h=c%80,p=[],y=0;y<l.length;y+=80)p.push(l.slice(y,y+80));return s+GI([["".concat(r),p[0]]].concat(p.slice(1,f+1).map(function(_){return["",_]}),[[" ",rw(h-1)+"^"],["",p[f+1]]]))}return s+GI([["".concat(r-1),d[t-1]],["".concat(r),l],["",rw(c-1)+"^"],["".concat(r+1),d[t+1]]])}function GI(u){var n=u.filter(function(i){i[0];var t=i[1];return t!==void 0}),o=Math.max.apply(Math,n.map(function(i){var t=i[0];return t.length}));return n.map(function(i){var t=i[0],e=i[1];return dZ(o,t)+(e?" | "+e:" |")}).join(`
`)}function rw(u){return Array(u+1).join(" ")}function dZ(u,n){return rw(u-n.length)+n}var ke=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),je=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function nw(u){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nw=function(o){return typeof o}:nw=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},nw(u)}function lZ(u){return nw(u)=="object"&&u!==null}function iw(u){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?iw=function(o){return typeof o}:iw=function(o){return o&&typeof Symbol=="function"&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},iw(u)}function zI(u,n){var o=Object.keys(u);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(u);n&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(u,t).enumerable})),o.push.apply(o,i)}return o}function fZ(u){for(var n=1;n<arguments.length;n++){var o=arguments[n]!=null?arguments[n]:{};n%2?zI(Object(o),!0).forEach(function(i){hZ(u,i,o[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(o)):zI(Object(o)).forEach(function(i){Object.defineProperty(u,i,Object.getOwnPropertyDescriptor(o,i))})}return u}function hZ(u,n,o){return n in u?Object.defineProperty(u,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):u[n]=o,u}function pZ(u,n){if(!(u instanceof n))throw new TypeError("Cannot call a class as a function")}function bZ(u,n){for(var o=0;o<n.length;o++){var i=n[o];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(u,i.key,i)}}function yZ(u,n,o){return n&&bZ(u.prototype,n),u}function _Z(u,n){if(typeof n!="function"&&n!==null)throw new TypeError("Super expression must either be null or a function");u.prototype=Object.create(n&&n.prototype,{constructor:{value:u,writable:!0,configurable:!0}}),n&&ov(u,n)}function gZ(u){var n=Cz();return function(){var i=sv(u),t;if(n){var e=sv(this).constructor;t=Reflect.construct(i,arguments,e)}else t=i.apply(this,arguments);return Mz(this,t)}}function Mz(u,n){return n&&(iw(n)==="object"||typeof n=="function")?n:U3(u)}function U3(u){if(u===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return u}function NA(u){var n=typeof Map=="function"?new Map:void 0;return NA=function(i){if(i===null||!mZ(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof n<"u"){if(n.has(i))return n.get(i);n.set(i,t)}function t(){return aw(i,arguments,sv(this).constructor)}return t.prototype=Object.create(i.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),ov(t,i)},NA(u)}function aw(u,n,o){return Cz()?aw=Reflect.construct:aw=function(t,e,r){var a=[null];a.push.apply(a,e);var c=Function.bind.apply(t,a),s=new c;return r&&ov(s,r.prototype),s},aw.apply(null,arguments)}function Cz(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function mZ(u){return Function.toString.call(u).indexOf("[native code]")!==-1}function ov(u,n){return ov=Object.setPrototypeOf||function(i,t){return i.__proto__=t,i},ov(u,n)}function sv(u){return sv=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},sv(u)}var vZ=(function(u){_Z(o,u);var n=gZ(o);function o(i,t,e,r,a,c,s){var d,l,f,h;pZ(this,o),h=n.call(this,i),h.name="GraphQLError",h.originalError=c??void 0,h.nodes=XI(Array.isArray(t)?t:t?[t]:void 0);for(var p=[],y=0,_=(b=h.nodes)!==null&&b!==void 0?b:[];y<_.length;y++){var b,m=_[y],g=m.loc;g!=null&&p.push(g)}p=XI(p),h.source=e??((d=p)===null||d===void 0?void 0:d[0].source),h.positions=r??((l=p)===null||l===void 0?void 0:l.map(function(v){return v.start})),h.locations=r&&e?r.map(function(v){return yw(e,v)}):(f=p)===null||f===void 0?void 0:f.map(function(v){return yw(v.source,v.start)}),h.path=a??void 0;var T=c==null?void 0:c.extensions;return s==null&&lZ(T)?h.extensions=fZ({},T):h.extensions=s??{},Object.defineProperties(U3(h),{message:{enumerable:!0},locations:{enumerable:h.locations!=null},path:{enumerable:h.path!=null},extensions:{enumerable:h.extensions!=null&&Object.keys(h.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),c!=null&&c.stack?(Object.defineProperty(U3(h),"stack",{value:c.stack,writable:!0,configurable:!0}),Mz(h)):(Error.captureStackTrace?Error.captureStackTrace(U3(h),o):Object.defineProperty(U3(h),"stack",{value:Error().stack,writable:!0,configurable:!0}),h)}return yZ(o,[{key:"toString",value:function(){return TZ(this)}},{key:"toJSON",value:function(){return wZ(this)}},{key:Pz,get:function(){return"Object"}}]),o})(NA(Error));function XI(u){return u===void 0||u.length===0?void 0:u}function TZ(u){var n=u.message;if(u.nodes)for(var o=0,i=u.nodes;o<i.length;o++){var t=i[o];t.loc&&(n+=`

`+Lz(t.loc))}else if(u.source&&u.locations)for(var e=0,r=u.locations;e<r.length;e++){var a=r[e];n+=`

`+RO(u.source,a)}return n}function wZ(u){var n;u||tw(0,"Received null or undefined error.");var o=(n=u.message)!==null&&n!==void 0?n:"An unknown error occurred.",i=u.locations,t=u.path,e=u.extensions;return e&&Object.keys(e).length>0?{message:o,locations:i,path:t,extensions:e}:{message:o,locations:i,path:t}}function nn(u,n,o){return new vZ("Syntax Error: ".concat(o),void 0,u,[n])}function SZ(u,n){var o=!!u;if(!o)throw new Error("Unexpected invariant triggered.")}function qz(u){var n=u.prototype.toJSON;typeof n=="function"||SZ(0),u.prototype.inspect=n,FA&&(u.prototype[FA]=n)}var FO=(function(){function u(o,i,t){this.start=o.start,this.end=i.end,this.startToken=o,this.endToken=i,this.source=t}var n=u.prototype;return n.toJSON=function(){return{start:this.start,end:this.end}},u})();qz(FO);var Zt=(function(){function u(o,i,t,e,r,a,c){this.kind=o,this.start=i,this.end=t,this.line=e,this.column=r,this.value=c,this.prev=a,this.next=null}var n=u.prototype;return n.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},u})();qz(Zt);function JI(u){return u!=null&&typeof u.kind=="string"}function AZ(u){var n=u.split(/\r\n|[\n\r]/g),o=OZ(u);if(o!==0)for(var i=1;i<n.length;i++)n[i]=n[i].slice(o);for(var t=0;t<n.length&&kI(n[t]);)++t;for(var e=n.length;e>t&&kI(n[e-1]);)--e;return n.slice(t,e).join(`
`)}function kI(u){for(var n=0;n<u.length;++n)if(u[n]!==" "&&u[n]!=="	")return!1;return!0}function OZ(u){for(var n,o=!0,i=!0,t=0,e=null,r=0;r<u.length;++r)switch(u.charCodeAt(r)){case 13:u.charCodeAt(r+1)===10&&++r;case 10:o=!1,i=!0,t=0;break;case 9:case 32:++t;break;default:i&&!o&&(e===null||t<e)&&(e=t),i=!1}return(n=e)!==null&&n!==void 0?n:0}function EZ(u){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,i=u.indexOf(`
`)===-1,t=u[0]===" "||u[0]==="	",e=u[u.length-1]==='"',r=u[u.length-1]==="\\",a=!i||e||r||o,c="";return a&&!(i&&t)&&(c+=`
`+n),c+=n?u.replace(/\n/g,`
`+n):u,a&&(c+=`
`),'"""'+c.replace(/"""/g,'\\"""')+'"""'}var Bz=(function(){function u(o){var i=new Zt(je.SOF,0,0,0,0,null);this.source=o,this.lastToken=i,this.token=i,this.line=1,this.lineStart=0}var n=u.prototype;return n.advance=function(){this.lastToken=this.token;var i=this.token=this.lookahead();return i},n.lookahead=function(){var i=this.token;if(i.kind!==je.EOF)do{var t;i=(t=i.next)!==null&&t!==void 0?t:i.next=IZ(this,i)}while(i.kind===je.COMMENT);return i},u})();function xZ(u){return u===je.BANG||u===je.DOLLAR||u===je.AMP||u===je.PAREN_L||u===je.PAREN_R||u===je.SPREAD||u===je.COLON||u===je.EQUALS||u===je.AT||u===je.BRACKET_L||u===je.BRACKET_R||u===je.BRACE_L||u===je.PIPE||u===je.BRACE_R}function Hl(u){return isNaN(u)?je.EOF:u<127?JSON.stringify(String.fromCharCode(u)):'"\\u'.concat(("00"+u.toString(16).toUpperCase()).slice(-4),'"')}function IZ(u,n){for(var o=u.source,i=o.body,t=i.length,e=n.end;e<t;){var r=i.charCodeAt(e),a=u.line,c=1+e-u.lineStart;switch(r){case 65279:case 9:case 32:case 44:++e;continue;case 10:++e,++u.line,u.lineStart=e;continue;case 13:i.charCodeAt(e+1)===10?e+=2:++e,++u.line,u.lineStart=e;continue;case 33:return new Zt(je.BANG,e,e+1,a,c,n);case 35:return FZ(o,e,a,c,n);case 36:return new Zt(je.DOLLAR,e,e+1,a,c,n);case 38:return new Zt(je.AMP,e,e+1,a,c,n);case 40:return new Zt(je.PAREN_L,e,e+1,a,c,n);case 41:return new Zt(je.PAREN_R,e,e+1,a,c,n);case 46:if(i.charCodeAt(e+1)===46&&i.charCodeAt(e+2)===46)return new Zt(je.SPREAD,e,e+3,a,c,n);break;case 58:return new Zt(je.COLON,e,e+1,a,c,n);case 61:return new Zt(je.EQUALS,e,e+1,a,c,n);case 64:return new Zt(je.AT,e,e+1,a,c,n);case 91:return new Zt(je.BRACKET_L,e,e+1,a,c,n);case 93:return new Zt(je.BRACKET_R,e,e+1,a,c,n);case 123:return new Zt(je.BRACE_L,e,e+1,a,c,n);case 124:return new Zt(je.PIPE,e,e+1,a,c,n);case 125:return new Zt(je.BRACE_R,e,e+1,a,c,n);case 34:return i.charCodeAt(e+1)===34&&i.charCodeAt(e+2)===34?DZ(o,e,a,c,n,u):PZ(o,e,a,c,n);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return NZ(o,e,r,a,c,n);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return LZ(o,e,a,c,n)}throw nn(o,e,RZ(r))}var s=u.line,d=1+e-u.lineStart;return new Zt(je.EOF,t,t,s,d,n)}function RZ(u){return u<32&&u!==9&&u!==10&&u!==13?"Cannot contain the invalid character ".concat(Hl(u),"."):u===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:"Cannot parse the unexpected character ".concat(Hl(u),".")}function FZ(u,n,o,i,t){var e=u.body,r,a=n;do r=e.charCodeAt(++a);while(!isNaN(r)&&(r>31||r===9));return new Zt(je.COMMENT,n,a,o,i,t,e.slice(n+1,a))}function NZ(u,n,o,i,t,e){var r=u.body,a=o,c=n,s=!1;if(a===45&&(a=r.charCodeAt(++c)),a===48){if(a=r.charCodeAt(++c),a>=48&&a<=57)throw nn(u,c,"Invalid number, unexpected digit after 0: ".concat(Hl(a),"."))}else c=_S(u,c,a),a=r.charCodeAt(c);if(a===46&&(s=!0,a=r.charCodeAt(++c),c=_S(u,c,a),a=r.charCodeAt(c)),(a===69||a===101)&&(s=!0,a=r.charCodeAt(++c),(a===43||a===45)&&(a=r.charCodeAt(++c)),c=_S(u,c,a),a=r.charCodeAt(c)),a===46||MZ(a))throw nn(u,c,"Invalid number, expected digit but got: ".concat(Hl(a),"."));return new Zt(s?je.FLOAT:je.INT,n,c,i,t,e,r.slice(n,c))}function _S(u,n,o){var i=u.body,t=n,e=o;if(e>=48&&e<=57){do e=i.charCodeAt(++t);while(e>=48&&e<=57);return t}throw nn(u,t,"Invalid number, expected digit but got: ".concat(Hl(e),"."))}function PZ(u,n,o,i,t){for(var e=u.body,r=n+1,a=r,c=0,s="";r<e.length&&!isNaN(c=e.charCodeAt(r))&&c!==10&&c!==13;){if(c===34)return s+=e.slice(a,r),new Zt(je.STRING,n,r+1,o,i,t,s);if(c<32&&c!==9)throw nn(u,r,"Invalid character within String: ".concat(Hl(c),"."));if(++r,c===92){switch(s+=e.slice(a,r-1),c=e.charCodeAt(r),c){case 34:s+='"';break;case 47:s+="/";break;case 92:s+="\\";break;case 98:s+="\b";break;case 102:s+="\f";break;case 110:s+=`
`;break;case 114:s+="\r";break;case 116:s+="	";break;case 117:{var d=jZ(e.charCodeAt(r+1),e.charCodeAt(r+2),e.charCodeAt(r+3),e.charCodeAt(r+4));if(d<0){var l=e.slice(r+1,r+5);throw nn(u,r,"Invalid character escape sequence: \\u".concat(l,"."))}s+=String.fromCharCode(d),r+=4;break}default:throw nn(u,r,"Invalid character escape sequence: \\".concat(String.fromCharCode(c),"."))}++r,a=r}}throw nn(u,r,"Unterminated string.")}function DZ(u,n,o,i,t,e){for(var r=u.body,a=n+3,c=a,s=0,d="";a<r.length&&!isNaN(s=r.charCodeAt(a));){if(s===34&&r.charCodeAt(a+1)===34&&r.charCodeAt(a+2)===34)return d+=r.slice(c,a),new Zt(je.BLOCK_STRING,n,a+3,o,i,t,AZ(d));if(s<32&&s!==9&&s!==10&&s!==13)throw nn(u,a,"Invalid character within String: ".concat(Hl(s),"."));s===10?(++a,++e.line,e.lineStart=a):s===13?(r.charCodeAt(a+1)===10?a+=2:++a,++e.line,e.lineStart=a):s===92&&r.charCodeAt(a+1)===34&&r.charCodeAt(a+2)===34&&r.charCodeAt(a+3)===34?(d+=r.slice(c,a)+'"""',a+=4,c=a):++a}throw nn(u,a,"Unterminated string.")}function jZ(u,n,o,i){return lT(u)<<12|lT(n)<<8|lT(o)<<4|lT(i)}function lT(u){return u>=48&&u<=57?u-48:u>=65&&u<=70?u-55:u>=97&&u<=102?u-87:-1}function LZ(u,n,o,i,t){for(var e=u.body,r=e.length,a=n+1,c=0;a!==r&&!isNaN(c=e.charCodeAt(a))&&(c===95||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++a;return new Zt(je.NAME,n,a,o,i,t,e.slice(n,a))}function MZ(u){return u===95||u>=65&&u<=90||u>=97&&u<=122}var $z=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function CZ(u,n){var o=new NO(u,n);return o.parseDocument()}function qZ(u,n){var o=new NO(u,n);o.expectToken(je.SOF);var i=o.parseValueLiteral(!1);return o.expectToken(je.EOF),i}function BZ(u,n){var o=new NO(u,n);o.expectToken(je.SOF);var i=o.parseTypeReference();return o.expectToken(je.EOF),i}var NO=(function(){function u(o,i){var t=cZ(o)?o:new IO(o);this._lexer=new Bz(t),this._options=i}var n=u.prototype;return n.parseName=function(){var i=this.expectToken(je.NAME);return{kind:ke.NAME,value:i.value,loc:this.loc(i)}},n.parseDocument=function(){var i=this._lexer.token;return{kind:ke.DOCUMENT,definitions:this.many(je.SOF,this.parseDefinition,je.EOF),loc:this.loc(i)}},n.parseDefinition=function(){if(this.peek(je.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(je.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},n.parseOperationDefinition=function(){var i=this._lexer.token;if(this.peek(je.BRACE_L))return{kind:ke.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(i)};var t=this.parseOperationType(),e;return this.peek(je.NAME)&&(e=this.parseName()),{kind:ke.OPERATION_DEFINITION,operation:t,name:e,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(i)}},n.parseOperationType=function(){var i=this.expectToken(je.NAME);switch(i.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(i)},n.parseVariableDefinitions=function(){return this.optionalMany(je.PAREN_L,this.parseVariableDefinition,je.PAREN_R)},n.parseVariableDefinition=function(){var i=this._lexer.token;return{kind:ke.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(je.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(je.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(i)}},n.parseVariable=function(){var i=this._lexer.token;return this.expectToken(je.DOLLAR),{kind:ke.VARIABLE,name:this.parseName(),loc:this.loc(i)}},n.parseSelectionSet=function(){var i=this._lexer.token;return{kind:ke.SELECTION_SET,selections:this.many(je.BRACE_L,this.parseSelection,je.BRACE_R),loc:this.loc(i)}},n.parseSelection=function(){return this.peek(je.SPREAD)?this.parseFragment():this.parseField()},n.parseField=function(){var i=this._lexer.token,t=this.parseName(),e,r;return this.expectOptionalToken(je.COLON)?(e=t,r=this.parseName()):r=t,{kind:ke.FIELD,alias:e,name:r,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(je.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(i)}},n.parseArguments=function(i){var t=i?this.parseConstArgument:this.parseArgument;return this.optionalMany(je.PAREN_L,t,je.PAREN_R)},n.parseArgument=function(){var i=this._lexer.token,t=this.parseName();return this.expectToken(je.COLON),{kind:ke.ARGUMENT,name:t,value:this.parseValueLiteral(!1),loc:this.loc(i)}},n.parseConstArgument=function(){var i=this._lexer.token;return{kind:ke.ARGUMENT,name:this.parseName(),value:(this.expectToken(je.COLON),this.parseValueLiteral(!0)),loc:this.loc(i)}},n.parseFragment=function(){var i=this._lexer.token;this.expectToken(je.SPREAD);var t=this.expectOptionalKeyword("on");return!t&&this.peek(je.NAME)?{kind:ke.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(i)}:{kind:ke.INLINE_FRAGMENT,typeCondition:t?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(i)}},n.parseFragmentDefinition=function(){var i,t=this._lexer.token;return this.expectKeyword("fragment"),((i=this._options)===null||i===void 0?void 0:i.experimentalFragmentVariables)===!0?{kind:ke.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}:{kind:ke.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(t)}},n.parseFragmentName=function(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()},n.parseValueLiteral=function(i){var t=this._lexer.token;switch(t.kind){case je.BRACKET_L:return this.parseList(i);case je.BRACE_L:return this.parseObject(i);case je.INT:return this._lexer.advance(),{kind:ke.INT,value:t.value,loc:this.loc(t)};case je.FLOAT:return this._lexer.advance(),{kind:ke.FLOAT,value:t.value,loc:this.loc(t)};case je.STRING:case je.BLOCK_STRING:return this.parseStringLiteral();case je.NAME:switch(this._lexer.advance(),t.value){case"true":return{kind:ke.BOOLEAN,value:!0,loc:this.loc(t)};case"false":return{kind:ke.BOOLEAN,value:!1,loc:this.loc(t)};case"null":return{kind:ke.NULL,loc:this.loc(t)};default:return{kind:ke.ENUM,value:t.value,loc:this.loc(t)}}case je.DOLLAR:if(!i)return this.parseVariable();break}throw this.unexpected()},n.parseStringLiteral=function(){var i=this._lexer.token;return this._lexer.advance(),{kind:ke.STRING,value:i.value,block:i.kind===je.BLOCK_STRING,loc:this.loc(i)}},n.parseList=function(i){var t=this,e=this._lexer.token,r=function(){return t.parseValueLiteral(i)};return{kind:ke.LIST,values:this.any(je.BRACKET_L,r,je.BRACKET_R),loc:this.loc(e)}},n.parseObject=function(i){var t=this,e=this._lexer.token,r=function(){return t.parseObjectField(i)};return{kind:ke.OBJECT,fields:this.any(je.BRACE_L,r,je.BRACE_R),loc:this.loc(e)}},n.parseObjectField=function(i){var t=this._lexer.token,e=this.parseName();return this.expectToken(je.COLON),{kind:ke.OBJECT_FIELD,name:e,value:this.parseValueLiteral(i),loc:this.loc(t)}},n.parseDirectives=function(i){for(var t=[];this.peek(je.AT);)t.push(this.parseDirective(i));return t},n.parseDirective=function(i){var t=this._lexer.token;return this.expectToken(je.AT),{kind:ke.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(i),loc:this.loc(t)}},n.parseTypeReference=function(){var i=this._lexer.token,t;return this.expectOptionalToken(je.BRACKET_L)?(t=this.parseTypeReference(),this.expectToken(je.BRACKET_R),t={kind:ke.LIST_TYPE,type:t,loc:this.loc(i)}):t=this.parseNamedType(),this.expectOptionalToken(je.BANG)?{kind:ke.NON_NULL_TYPE,type:t,loc:this.loc(i)}:t},n.parseNamedType=function(){var i=this._lexer.token;return{kind:ke.NAMED_TYPE,name:this.parseName(),loc:this.loc(i)}},n.parseTypeSystemDefinition=function(){var i=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(i.kind===je.NAME)switch(i.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(i)},n.peekDescription=function(){return this.peek(je.STRING)||this.peek(je.BLOCK_STRING)},n.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},n.parseSchemaDefinition=function(){var i=this._lexer.token,t=this.parseDescription();this.expectKeyword("schema");var e=this.parseDirectives(!0),r=this.many(je.BRACE_L,this.parseOperationTypeDefinition,je.BRACE_R);return{kind:ke.SCHEMA_DEFINITION,description:t,directives:e,operationTypes:r,loc:this.loc(i)}},n.parseOperationTypeDefinition=function(){var i=this._lexer.token,t=this.parseOperationType();this.expectToken(je.COLON);var e=this.parseNamedType();return{kind:ke.OPERATION_TYPE_DEFINITION,operation:t,type:e,loc:this.loc(i)}},n.parseScalarTypeDefinition=function(){var i=this._lexer.token,t=this.parseDescription();this.expectKeyword("scalar");var e=this.parseName(),r=this.parseDirectives(!0);return{kind:ke.SCALAR_TYPE_DEFINITION,description:t,name:e,directives:r,loc:this.loc(i)}},n.parseObjectTypeDefinition=function(){var i=this._lexer.token,t=this.parseDescription();this.expectKeyword("type");var e=this.parseName(),r=this.parseImplementsInterfaces(),a=this.parseDirectives(!0),c=this.parseFieldsDefinition();return{kind:ke.OBJECT_TYPE_DEFINITION,description:t,name:e,interfaces:r,directives:a,fields:c,loc:this.loc(i)}},n.parseImplementsInterfaces=function(){var i;if(!this.expectOptionalKeyword("implements"))return[];if(((i=this._options)===null||i===void 0?void 0:i.allowLegacySDLImplementsInterfaces)===!0){var t=[];this.expectOptionalToken(je.AMP);do t.push(this.parseNamedType());while(this.expectOptionalToken(je.AMP)||this.peek(je.NAME));return t}return this.delimitedMany(je.AMP,this.parseNamedType)},n.parseFieldsDefinition=function(){var i;return((i=this._options)===null||i===void 0?void 0:i.allowLegacySDLEmptyFields)===!0&&this.peek(je.BRACE_L)&&this._lexer.lookahead().kind===je.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(je.BRACE_L,this.parseFieldDefinition,je.BRACE_R)},n.parseFieldDefinition=function(){var i=this._lexer.token,t=this.parseDescription(),e=this.parseName(),r=this.parseArgumentDefs();this.expectToken(je.COLON);var a=this.parseTypeReference(),c=this.parseDirectives(!0);return{kind:ke.FIELD_DEFINITION,description:t,name:e,arguments:r,type:a,directives:c,loc:this.loc(i)}},n.parseArgumentDefs=function(){return this.optionalMany(je.PAREN_L,this.parseInputValueDef,je.PAREN_R)},n.parseInputValueDef=function(){var i=this._lexer.token,t=this.parseDescription(),e=this.parseName();this.expectToken(je.COLON);var r=this.parseTypeReference(),a;this.expectOptionalToken(je.EQUALS)&&(a=this.parseValueLiteral(!0));var c=this.parseDirectives(!0);return{kind:ke.INPUT_VALUE_DEFINITION,description:t,name:e,type:r,defaultValue:a,directives:c,loc:this.loc(i)}},n.parseInterfaceTypeDefinition=function(){var i=this._lexer.token,t=this.parseDescription();this.expectKeyword("interface");var e=this.parseName(),r=this.parseImplementsInterfaces(),a=this.parseDirectives(!0),c=this.parseFieldsDefinition();return{kind:ke.INTERFACE_TYPE_DEFINITION,description:t,name:e,interfaces:r,directives:a,fields:c,loc:this.loc(i)}},n.parseUnionTypeDefinition=function(){var i=this._lexer.token,t=this.parseDescription();this.expectKeyword("union");var e=this.parseName(),r=this.parseDirectives(!0),a=this.parseUnionMemberTypes();return{kind:ke.UNION_TYPE_DEFINITION,description:t,name:e,directives:r,types:a,loc:this.loc(i)}},n.parseUnionMemberTypes=function(){return this.expectOptionalToken(je.EQUALS)?this.delimitedMany(je.PIPE,this.parseNamedType):[]},n.parseEnumTypeDefinition=function(){var i=this._lexer.token,t=this.parseDescription();this.expectKeyword("enum");var e=this.parseName(),r=this.parseDirectives(!0),a=this.parseEnumValuesDefinition();return{kind:ke.ENUM_TYPE_DEFINITION,description:t,name:e,directives:r,values:a,loc:this.loc(i)}},n.parseEnumValuesDefinition=function(){return this.optionalMany(je.BRACE_L,this.parseEnumValueDefinition,je.BRACE_R)},n.parseEnumValueDefinition=function(){var i=this._lexer.token,t=this.parseDescription(),e=this.parseName(),r=this.parseDirectives(!0);return{kind:ke.ENUM_VALUE_DEFINITION,description:t,name:e,directives:r,loc:this.loc(i)}},n.parseInputObjectTypeDefinition=function(){var i=this._lexer.token,t=this.parseDescription();this.expectKeyword("input");var e=this.parseName(),r=this.parseDirectives(!0),a=this.parseInputFieldsDefinition();return{kind:ke.INPUT_OBJECT_TYPE_DEFINITION,description:t,name:e,directives:r,fields:a,loc:this.loc(i)}},n.parseInputFieldsDefinition=function(){return this.optionalMany(je.BRACE_L,this.parseInputValueDef,je.BRACE_R)},n.parseTypeSystemExtension=function(){var i=this._lexer.lookahead();if(i.kind===je.NAME)switch(i.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(i)},n.parseSchemaExtension=function(){var i=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var t=this.parseDirectives(!0),e=this.optionalMany(je.BRACE_L,this.parseOperationTypeDefinition,je.BRACE_R);if(t.length===0&&e.length===0)throw this.unexpected();return{kind:ke.SCHEMA_EXTENSION,directives:t,operationTypes:e,loc:this.loc(i)}},n.parseScalarTypeExtension=function(){var i=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var t=this.parseName(),e=this.parseDirectives(!0);if(e.length===0)throw this.unexpected();return{kind:ke.SCALAR_TYPE_EXTENSION,name:t,directives:e,loc:this.loc(i)}},n.parseObjectTypeExtension=function(){var i=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var t=this.parseName(),e=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),a=this.parseFieldsDefinition();if(e.length===0&&r.length===0&&a.length===0)throw this.unexpected();return{kind:ke.OBJECT_TYPE_EXTENSION,name:t,interfaces:e,directives:r,fields:a,loc:this.loc(i)}},n.parseInterfaceTypeExtension=function(){var i=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var t=this.parseName(),e=this.parseImplementsInterfaces(),r=this.parseDirectives(!0),a=this.parseFieldsDefinition();if(e.length===0&&r.length===0&&a.length===0)throw this.unexpected();return{kind:ke.INTERFACE_TYPE_EXTENSION,name:t,interfaces:e,directives:r,fields:a,loc:this.loc(i)}},n.parseUnionTypeExtension=function(){var i=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var t=this.parseName(),e=this.parseDirectives(!0),r=this.parseUnionMemberTypes();if(e.length===0&&r.length===0)throw this.unexpected();return{kind:ke.UNION_TYPE_EXTENSION,name:t,directives:e,types:r,loc:this.loc(i)}},n.parseEnumTypeExtension=function(){var i=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var t=this.parseName(),e=this.parseDirectives(!0),r=this.parseEnumValuesDefinition();if(e.length===0&&r.length===0)throw this.unexpected();return{kind:ke.ENUM_TYPE_EXTENSION,name:t,directives:e,values:r,loc:this.loc(i)}},n.parseInputObjectTypeExtension=function(){var i=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var t=this.parseName(),e=this.parseDirectives(!0),r=this.parseInputFieldsDefinition();if(e.length===0&&r.length===0)throw this.unexpected();return{kind:ke.INPUT_OBJECT_TYPE_EXTENSION,name:t,directives:e,fields:r,loc:this.loc(i)}},n.parseDirectiveDefinition=function(){var i=this._lexer.token,t=this.parseDescription();this.expectKeyword("directive"),this.expectToken(je.AT);var e=this.parseName(),r=this.parseArgumentDefs(),a=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var c=this.parseDirectiveLocations();return{kind:ke.DIRECTIVE_DEFINITION,description:t,name:e,arguments:r,repeatable:a,locations:c,loc:this.loc(i)}},n.parseDirectiveLocations=function(){return this.delimitedMany(je.PIPE,this.parseDirectiveLocation)},n.parseDirectiveLocation=function(){var i=this._lexer.token,t=this.parseName();if($z[t.value]!==void 0)return t;throw this.unexpected(i)},n.loc=function(i){var t;if(((t=this._options)===null||t===void 0?void 0:t.noLocation)!==!0)return new FO(i,this._lexer.lastToken,this._lexer.source)},n.peek=function(i){return this._lexer.token.kind===i},n.expectToken=function(i){var t=this._lexer.token;if(t.kind===i)return this._lexer.advance(),t;throw nn(this._lexer.source,t.start,"Expected ".concat(Uz(i),", found ").concat(gS(t),"."))},n.expectOptionalToken=function(i){var t=this._lexer.token;if(t.kind===i)return this._lexer.advance(),t},n.expectKeyword=function(i){var t=this._lexer.token;if(t.kind===je.NAME&&t.value===i)this._lexer.advance();else throw nn(this._lexer.source,t.start,'Expected "'.concat(i,'", found ').concat(gS(t),"."))},n.expectOptionalKeyword=function(i){var t=this._lexer.token;return t.kind===je.NAME&&t.value===i?(this._lexer.advance(),!0):!1},n.unexpected=function(i){var t=i??this._lexer.token;return nn(this._lexer.source,t.start,"Unexpected ".concat(gS(t),"."))},n.any=function(i,t,e){this.expectToken(i);for(var r=[];!this.expectOptionalToken(e);)r.push(t.call(this));return r},n.optionalMany=function(i,t,e){if(this.expectOptionalToken(i)){var r=[];do r.push(t.call(this));while(!this.expectOptionalToken(e));return r}return[]},n.many=function(i,t,e){this.expectToken(i);var r=[];do r.push(t.call(this));while(!this.expectOptionalToken(e));return r},n.delimitedMany=function(i,t){this.expectOptionalToken(i);var e=[];do e.push(t.call(this));while(this.expectOptionalToken(i));return e},u})();function gS(u){var n=u.value;return Uz(u.kind)+(n!=null?' "'.concat(n,'"'):"")}function Uz(u){return xZ(u)?'"'.concat(u,'"'):u}var $Z={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},vf=Object.freeze({});function Vz(u,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$Z,i=void 0,t=Array.isArray(u),e=[u],r=-1,a=[],c=void 0,s=void 0,d=void 0,l=[],f=[],h=u;do{r++;var p=r===e.length,y=p&&a.length!==0;if(p){if(s=f.length===0?void 0:l[l.length-1],c=d,d=f.pop(),y){if(t)c=c.slice();else{for(var _={},b=0,m=Object.keys(c);b<m.length;b++){var g=m[b];_[g]=c[g]}c=_}for(var T=0,v=0;v<a.length;v++){var A=a[v][0],I=a[v][1];t&&(A-=T),t&&I===null?(c.splice(A,1),T++):c[A]=I}}r=i.index,e=i.keys,a=i.edits,t=i.inArray,i=i.prev}else{if(s=d?t?r:e[r]:void 0,c=d?d[s]:h,c==null)continue;d&&l.push(s)}var q=void 0;if(!Array.isArray(c)){if(!JI(c))throw new Error("Invalid AST Node: ".concat(jz(c),"."));var O=_w(n,c.kind,p);if(O){if(q=O.call(n,c,s,d,l,f),q===vf)break;if(q===!1){if(!p){l.pop();continue}}else if(q!==void 0&&(a.push([s,q]),!p))if(JI(q))c=q;else{l.pop();continue}}}if(q===void 0&&y&&a.push([s,c]),p)l.pop();else{var w;i={inArray:t,index:r,keys:e,edits:a,prev:i},t=Array.isArray(c),e=t?c:(w=o[c.kind])!==null&&w!==void 0?w:[],r=-1,a=[],d&&f.push(d),d=c}}while(i!==void 0);return a.length!==0&&(h=a[a.length-1][1]),h}function UZ(u){var n=new Array(u.length);return{enter:function(i){for(var t=0;t<u.length;t++)if(n[t]==null){var e=_w(u[t],i.kind,!1);if(e){var r=e.apply(u[t],arguments);if(r===!1)n[t]=i;else if(r===vf)n[t]=vf;else if(r!==void 0)return r}}},leave:function(i){for(var t=0;t<u.length;t++)if(n[t]==null){var e=_w(u[t],i.kind,!0);if(e){var r=e.apply(u[t],arguments);if(r===vf)n[t]=vf;else if(r!==void 0&&r!==!1)return r}}else n[t]===i&&(n[t]=null)}}}function _w(u,n,o){var i=u[n];if(i){if(!o&&typeof i=="function")return i;var t=o?i.leave:i.enter;if(typeof t=="function")return t}else{var e=o?u.leave:u.enter;if(e){if(typeof e=="function")return e;var r=e[n];if(typeof r=="function")return r}}}function VZ(u){return Vz(u,{leave:HZ})}var QZ=80,HZ={Name:function(n){return n.value},Variable:function(n){return"$"+n.name},Document:function(n){return it(n.definitions,`

`)+`
`},OperationDefinition:function(n){var o=n.operation,i=n.name,t=Yt("(",it(n.variableDefinitions,", "),")"),e=it(n.directives," "),r=n.selectionSet;return!i&&!e&&!t&&o==="query"?r:it([o,it([i,t]),e,r]," ")},VariableDefinition:function(n){var o=n.variable,i=n.type,t=n.defaultValue,e=n.directives;return o+": "+i+Yt(" = ",t)+Yt(" ",it(e," "))},SelectionSet:function(n){var o=n.selections;return On(o)},Field:function(n){var o=n.alias,i=n.name,t=n.arguments,e=n.directives,r=n.selectionSet,a=Yt("",o,": ")+i,c=a+Yt("(",it(t,", "),")");return c.length>QZ&&(c=a+Yt(`(
`,uw(it(t,`
`)),`
)`)),it([c,it(e," "),r]," ")},Argument:function(n){var o=n.name,i=n.value;return o+": "+i},FragmentSpread:function(n){var o=n.name,i=n.directives;return"..."+o+Yt(" ",it(i," "))},InlineFragment:function(n){var o=n.typeCondition,i=n.directives,t=n.selectionSet;return it(["...",Yt("on ",o),it(i," "),t]," ")},FragmentDefinition:function(n){var o=n.name,i=n.typeCondition,t=n.variableDefinitions,e=n.directives,r=n.selectionSet;return"fragment ".concat(o).concat(Yt("(",it(t,", "),")")," ")+"on ".concat(i," ").concat(Yt("",it(e," ")," "))+r},IntValue:function(n){var o=n.value;return o},FloatValue:function(n){var o=n.value;return o},StringValue:function(n,o){var i=n.value,t=n.block;return t?EZ(i,o==="description"?"":"  "):JSON.stringify(i)},BooleanValue:function(n){var o=n.value;return o?"true":"false"},NullValue:function(){return"null"},EnumValue:function(n){var o=n.value;return o},ListValue:function(n){var o=n.values;return"["+it(o,", ")+"]"},ObjectValue:function(n){var o=n.fields;return"{"+it(o,", ")+"}"},ObjectField:function(n){var o=n.name,i=n.value;return o+": "+i},Directive:function(n){var o=n.name,i=n.arguments;return"@"+o+Yt("(",it(i,", "),")")},NamedType:function(n){var o=n.name;return o},ListType:function(n){var o=n.type;return"["+o+"]"},NonNullType:function(n){var o=n.type;return o+"!"},SchemaDefinition:An(function(u){var n=u.directives,o=u.operationTypes;return it(["schema",it(n," "),On(o)]," ")}),OperationTypeDefinition:function(n){var o=n.operation,i=n.type;return o+": "+i},ScalarTypeDefinition:An(function(u){var n=u.name,o=u.directives;return it(["scalar",n,it(o," ")]," ")}),ObjectTypeDefinition:An(function(u){var n=u.name,o=u.interfaces,i=u.directives,t=u.fields;return it(["type",n,Yt("implements ",it(o," & ")),it(i," "),On(t)]," ")}),FieldDefinition:An(function(u){var n=u.name,o=u.arguments,i=u.type,t=u.directives;return n+(KI(o)?Yt(`(
`,uw(it(o,`
`)),`
)`):Yt("(",it(o,", "),")"))+": "+i+Yt(" ",it(t," "))}),InputValueDefinition:An(function(u){var n=u.name,o=u.type,i=u.defaultValue,t=u.directives;return it([n+": "+o,Yt("= ",i),it(t," ")]," ")}),InterfaceTypeDefinition:An(function(u){var n=u.name,o=u.interfaces,i=u.directives,t=u.fields;return it(["interface",n,Yt("implements ",it(o," & ")),it(i," "),On(t)]," ")}),UnionTypeDefinition:An(function(u){var n=u.name,o=u.directives,i=u.types;return it(["union",n,it(o," "),i&&i.length!==0?"= "+it(i," | "):""]," ")}),EnumTypeDefinition:An(function(u){var n=u.name,o=u.directives,i=u.values;return it(["enum",n,it(o," "),On(i)]," ")}),EnumValueDefinition:An(function(u){var n=u.name,o=u.directives;return it([n,it(o," ")]," ")}),InputObjectTypeDefinition:An(function(u){var n=u.name,o=u.directives,i=u.fields;return it(["input",n,it(o," "),On(i)]," ")}),DirectiveDefinition:An(function(u){var n=u.name,o=u.arguments,i=u.repeatable,t=u.locations;return"directive @"+n+(KI(o)?Yt(`(
`,uw(it(o,`
`)),`
)`):Yt("(",it(o,", "),")"))+(i?" repeatable":"")+" on "+it(t," | ")}),SchemaExtension:function(n){var o=n.directives,i=n.operationTypes;return it(["extend schema",it(o," "),On(i)]," ")},ScalarTypeExtension:function(n){var o=n.name,i=n.directives;return it(["extend scalar",o,it(i," ")]," ")},ObjectTypeExtension:function(n){var o=n.name,i=n.interfaces,t=n.directives,e=n.fields;return it(["extend type",o,Yt("implements ",it(i," & ")),it(t," "),On(e)]," ")},InterfaceTypeExtension:function(n){var o=n.name,i=n.interfaces,t=n.directives,e=n.fields;return it(["extend interface",o,Yt("implements ",it(i," & ")),it(t," "),On(e)]," ")},UnionTypeExtension:function(n){var o=n.name,i=n.directives,t=n.types;return it(["extend union",o,it(i," "),t&&t.length!==0?"= "+it(t," | "):""]," ")},EnumTypeExtension:function(n){var o=n.name,i=n.directives,t=n.values;return it(["extend enum",o,it(i," "),On(t)]," ")},InputObjectTypeExtension:function(n){var o=n.name,i=n.directives,t=n.fields;return it(["extend input",o,it(i," "),On(t)]," ")}};function An(u){return function(n){return it([n.description,u(n)],`
`)}}function it(u){var n,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(n=u==null?void 0:u.filter(function(i){return i}).join(o))!==null&&n!==void 0?n:""}function On(u){return Yt(`{
`,uw(it(u,`
`)),`
}`)}function Yt(u,n){var o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return n!=null&&n!==""?u+n+o:""}function uw(u){return Yt("  ",u.replace(/\n/g,`
  `))}function GZ(u){return u.indexOf(`
`)!==-1}function KI(u){return u!=null&&u.some(GZ)}function zZ(u){return Qz(u)||Hz(u)||zz(u)}function Qz(u){return u.kind===ke.OPERATION_DEFINITION||u.kind===ke.FRAGMENT_DEFINITION}function XZ(u){return u.kind===ke.FIELD||u.kind===ke.FRAGMENT_SPREAD||u.kind===ke.INLINE_FRAGMENT}function JZ(u){return u.kind===ke.VARIABLE||u.kind===ke.INT||u.kind===ke.FLOAT||u.kind===ke.STRING||u.kind===ke.BOOLEAN||u.kind===ke.NULL||u.kind===ke.ENUM||u.kind===ke.LIST||u.kind===ke.OBJECT}function kZ(u){return u.kind===ke.NAMED_TYPE||u.kind===ke.LIST_TYPE||u.kind===ke.NON_NULL_TYPE}function Hz(u){return u.kind===ke.SCHEMA_DEFINITION||Gz(u)||u.kind===ke.DIRECTIVE_DEFINITION}function Gz(u){return u.kind===ke.SCALAR_TYPE_DEFINITION||u.kind===ke.OBJECT_TYPE_DEFINITION||u.kind===ke.INTERFACE_TYPE_DEFINITION||u.kind===ke.UNION_TYPE_DEFINITION||u.kind===ke.ENUM_TYPE_DEFINITION||u.kind===ke.INPUT_OBJECT_TYPE_DEFINITION}function zz(u){return u.kind===ke.SCHEMA_EXTENSION||Xz(u)}function Xz(u){return u.kind===ke.SCALAR_TYPE_EXTENSION||u.kind===ke.OBJECT_TYPE_EXTENSION||u.kind===ke.INTERFACE_TYPE_EXTENSION||u.kind===ke.UNION_TYPE_EXTENSION||u.kind===ke.ENUM_TYPE_EXTENSION||u.kind===ke.INPUT_OBJECT_TYPE_EXTENSION}const KZ=Object.freeze(Object.defineProperty({__proto__:null,BREAK:vf,DirectiveLocation:$z,Kind:ke,Lexer:Bz,Location:FO,Source:IO,Token:Zt,TokenKind:je,getLocation:yw,getVisitFn:_w,isDefinitionNode:zZ,isExecutableDefinitionNode:Qz,isSelectionNode:XZ,isTypeDefinitionNode:Gz,isTypeExtensionNode:Xz,isTypeNode:kZ,isTypeSystemDefinitionNode:Hz,isTypeSystemExtensionNode:zz,isValueNode:JZ,parse:CZ,parseType:BZ,parseValue:qZ,print:VZ,printLocation:Lz,printSourceLocation:RO,visit:Vz,visitInParallel:UZ},Symbol.toStringTag,{value:"Module"})),WZ=VA(KZ);var Mh={},lu={},Ch={},fu={},pi={},WI;function YZ(){if(WI)return pi;WI=1,Object.defineProperty(pi,"__esModule",{value:!0}),pi.removeDotSegmentsOfPath=pi.removeDotSegments=pi.resolve=void 0;function u(t,e){e=e||"";const r=e.indexOf("#");if(r>0&&(e=e.substr(0,r)),!t.length){if(e.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${e}' for value '${t}'`);return e}if(t.startsWith("?")){const h=e.indexOf("?");return h>0&&(e=e.substr(0,h)),e+t}if(t.startsWith("#"))return e+t;if(!e.length){const h=t.indexOf(":");if(h<0)throw new Error(`Found invalid relative IRI '${t}' for a missing baseIRI`);return o(t,h)}const a=t.indexOf(":");if(a>=0)return o(t,a);const c=e.indexOf(":");if(c<0)throw new Error(`Found invalid baseIRI '${e}' for value '${t}'`);const s=e.substr(0,c+1);if(t.indexOf("//")===0)return s+o(t,a);let d;if(e.indexOf("//",c)===c+1){if(d=e.indexOf("/",c+3),d<0)return e.length>c+3?e+"/"+o(t,a):s+o(t,a)}else if(d=e.indexOf("/",c+1),d<0)return s+o(t,a);if(t.indexOf("/")===0)return e.substr(0,d)+n(t);let l=e.substr(d);const f=l.lastIndexOf("/");return f>=0&&f<l.length-1&&(l=l.substr(0,f+1),t[0]==="."&&t[1]!=="."&&t[1]!=="/"&&t[2]&&(t=t.substr(1))),t=l+t,t=n(t),e.substr(0,d)+t}pi.resolve=u;function n(t){const e=[];let r=0;for(;r<t.length;)switch(t[r]){case"/":if(t[r+1]===".")if(t[r+2]==="."){if(!i(t[r+3])){e.push([]),r++;break}e.pop(),t[r+3]||e.push([]),r+=3}else{if(!i(t[r+2])){e.push([]),r++;break}t[r+2]||e.push([]),r+=2}else e.push([]),r++;break;case"#":case"?":e.length||e.push([]),e[e.length-1].push(t.substr(r)),r=t.length;break;default:e.length||e.push([]),e[e.length-1].push(t[r]),r++;break}return"/"+e.map(a=>a.join("")).join("/")}pi.removeDotSegments=n;function o(t,e){let r=e+1;e>=0?t[e+1]==="/"&&t[e+2]==="/"&&(r=e+3):t[0]==="/"&&t[1]==="/"&&(r=2);const a=t.indexOf("/",r);if(a<0)return t;const c=t.substr(0,a),s=t.substr(a);return c+n(s)}pi.removeDotSegmentsOfPath=o;function i(t){return!t||t==="#"||t==="?"||t==="/"}return pi}var YI;function cr(){return YI||(YI=1,(function(u){var n=fu&&fu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e),Object.defineProperty(i,r,{enumerable:!0,get:function(){return t[e]}})}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=fu&&fu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(YZ(),u)})(fu)),fu}var mS={},ZI;function Lw(){return ZI||(ZI=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.ERROR_CODES=u.ErrorCoded=void 0;class n extends Error{constructor(i,t){super(i),this.code=t}}u.ErrorCoded=n,(function(o){o.COLLIDING_KEYWORDS="colliding keywords",o.CONFLICTING_INDEXES="conflicting indexes",o.CYCLIC_IRI_MAPPING="cyclic IRI mapping",o.INVALID_ID_VALUE="invalid @id value",o.INVALID_INDEX_VALUE="invalid @index value",o.INVALID_NEST_VALUE="invalid @nest value",o.INVALID_PREFIX_VALUE="invalid @prefix value",o.INVALID_PROPAGATE_VALUE="invalid @propagate value",o.INVALID_REVERSE_VALUE="invalid @reverse value",o.INVALID_IMPORT_VALUE="invalid @import value",o.INVALID_VERSION_VALUE="invalid @version value",o.INVALID_BASE_IRI="invalid base IRI",o.INVALID_CONTAINER_MAPPING="invalid container mapping",o.INVALID_CONTEXT_ENTRY="invalid context entry",o.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",o.INVALID_DEFAULT_LANGUAGE="invalid default language",o.INVALID_INCLUDED_VALUE="invalid @included value",o.INVALID_IRI_MAPPING="invalid IRI mapping",o.INVALID_JSON_LITERAL="invalid JSON literal",o.INVALID_KEYWORD_ALIAS="invalid keyword alias",o.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",o.INVALID_LANGUAGE_MAPPING="invalid language mapping",o.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",o.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",o.INVALID_LOCAL_CONTEXT="invalid local context",o.INVALID_REMOTE_CONTEXT="invalid remote context",o.INVALID_REVERSE_PROPERTY="invalid reverse property",o.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",o.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",o.INVALID_SCOPED_CONTEXT="invalid scoped context",o.INVALID_SCRIPT_ELEMENT="invalid script element",o.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",o.INVALID_TERM_DEFINITION="invalid term definition",o.INVALID_TYPE_MAPPING="invalid type mapping",o.INVALID_TYPE_VALUE="invalid type value",o.INVALID_TYPED_VALUE="invalid typed value",o.INVALID_VALUE_OBJECT="invalid value object",o.INVALID_VALUE_OBJECT_VALUE="invalid value object value",o.INVALID_VOCAB_MAPPING="invalid vocab mapping",o.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",o.KEYWORD_REDEFINITION="keyword redefinition",o.LOADING_DOCUMENT_FAILED="loading document failed",o.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",o.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",o.PROCESSING_MODE_CONFLICT="processing mode conflict",o.PROTECTED_TERM_REDEFINITION="protected term redefinition",o.CONTEXT_OVERFLOW="context overflow",o.INVALID_BASE_DIRECTION="invalid base direction",o.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",o.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",o.INVALID_EMBEDDED_NODE="invalid embedded node",o.INVALID_ANNOTATION="invalid annotation"})(u.ERROR_CODES||(u.ERROR_CODES={}))})(mS)),mS}var qh={},vS,eR;function Dv(){if(eR)return vS;eR=1;var u=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/\s|\uFEFF|\xA0/,i=/\r?\n[\x20\x09]+/g,t=/[;,"]/,e=/[;,"]|\s/,r=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,a={IDLE:1,URI:2,ATTR:4};function c(p){return p.replace(n,"")}function s(p){return o.test(p)}function d(p,y){for(;s(p[y]);)y++;return y}function l(p){return e.test(p)||!r.test(p)}function f(p,y){return Object.keys(p).length===Object.keys(y).length&&Object.keys(p).every(_=>_ in y&&p[_]===y[_])}class h{constructor(y){this.refs=[],y&&this.parse(y)}rel(y){for(var _=[],b=y.toLowerCase(),m=0;m<this.refs.length;m++)typeof this.refs[m].rel=="string"&&this.refs[m].rel.toLowerCase()===b&&_.push(this.refs[m]);return _}get(y,_){y=y.toLowerCase(),_=_.toLowerCase();for(var b=[],m=0;m<this.refs.length;m++)typeof this.refs[m][y]=="string"&&this.refs[m][y].toLowerCase()===_&&b.push(this.refs[m]);return b}set(y){return this.refs.push(y),this}setUnique(y){return this.refs.some(_=>f(_,y))||this.refs.push(y),this}has(y,_){y=y.toLowerCase(),_=_.toLowerCase();for(var b=0;b<this.refs.length;b++)if(typeof this.refs[b][y]=="string"&&this.refs[b][y].toLowerCase()===_)return!0;return!1}parse(y,g){g=g||0,y=g?y.slice(g):y,y=c(y).replace(i,"");for(var b=a.IDLE,m=y.length,g=0,T=null;g<m;)if(b===a.IDLE){if(s(y[g])){g++;continue}else if(y[g]==="<"){T!=null&&(T.rel!=null?this.refs.push(...h.expandRelations(T)):this.refs.push(T));var v=y.indexOf(">",g);if(v===-1)throw new Error("Expected end of URI delimiter at offset "+g);T={uri:y.slice(g+1,v)},g=v,b=a.URI}else throw new Error('Unexpected character "'+y[g]+'" at offset '+g);g++}else if(b===a.URI)if(s(y[g])){g++;continue}else if(y[g]===";")b=a.ATTR,g++;else if(y[g]===",")b=a.IDLE,g++;else throw new Error('Unexpected character "'+y[g]+'" at offset '+g);else if(b===a.ATTR){if(y[g]===";"||s(y[g])){g++;continue}var v=y.indexOf("=",g);v===-1&&(v=y.indexOf(";",g)),v===-1&&(v=y.length);var A=c(y.slice(g,v)).toLowerCase(),I="";if(g=v+1,g=d(y,g),y[g]==='"')for(g++;g<m;){if(y[g]==='"'){g++;break}y[g]==="\\"&&g++,I+=y[g],g++}else{for(var v=g+1;!t.test(y[v])&&v<m;)v++;I=y.slice(g,v),g=v}switch(T[A]&&h.isSingleOccurenceAttr(A)||(A[A.length-1]==="*"?T[A]=h.parseExtendedValue(I):(I=A==="type"?I.toLowerCase():I,T[A]!=null?Array.isArray(T[A])?T[A].push(I):T[A]=[T[A],I]:T[A]=I)),y[g]){case",":b=a.IDLE;break;case";":b=a.ATTR;break}g++}else throw new Error('Unknown parser state "'+b+'"');return T!=null&&(T.rel!=null?this.refs.push(...h.expandRelations(T)):this.refs.push(T)),T=null,this}toString(){for(var y=[],_="",b=null,m=0;m<this.refs.length;m++)b=this.refs[m],_=Object.keys(this.refs[m]).reduce(function(g,T){return T==="uri"?g:g+"; "+h.formatAttribute(T,b[T])},"<"+b.uri+">"),y.push(_);return y.join(", ")}}return h.isCompatibleEncoding=function(p){return u.test(p)},h.parse=function(p,y){return new h().parse(p,y)},h.isSingleOccurenceAttr=function(p){return p==="rel"||p==="type"||p==="media"||p==="title"||p==="title*"},h.isTokenAttr=function(p){return p==="rel"||p==="type"||p==="anchor"},h.escapeQuotes=function(p){return p.replace(/"/g,'\\"')},h.expandRelations=function(p){var y=p.rel.split(" ");return y.map(function(_){var b=Object.assign({},p);return b.rel=_,b})},h.parseExtendedValue=function(p){var y=/([^']+)?(?:'([^']*)')?(.+)/.exec(p);return{language:y[2].toLowerCase(),encoding:h.isCompatibleEncoding(y[1])?null:y[1].toLowerCase(),value:h.isCompatibleEncoding(y[1])?decodeURIComponent(y[3]):y[3]}},h.formatExtendedAttribute=function(p,y){var _=(y.encoding||"utf-8").toUpperCase(),b=y.language||"en",m="";return Buffer.isBuffer(y.value)&&h.isCompatibleEncoding(_)?m=y.value.toString(_):Buffer.isBuffer(y.value)?m=y.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):m=encodeURIComponent(y.value),p+"="+_+"'"+b+"'"+m},h.formatAttribute=function(p,y){return Array.isArray(y)?y.map(_=>h.formatAttribute(p,_)).join("; "):p[p.length-1]==="*"||typeof y!="string"?h.formatExtendedAttribute(p,y):(h.isTokenAttr(p)?y=l(y)?'"'+h.escapeQuotes(y)+'"':h.escapeQuotes(y):l(y)&&(y=encodeURIComponent(y),y=y.replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"),y='"'+y+'"'),p+"="+y)},vS=h,vS}var tR;function Jz(){if(tR)return qh;tR=1,Object.defineProperty(qh,"__esModule",{value:!0}),qh.FetchDocumentLoader=void 0;const u=Lw(),n=Dv(),o=cr();class i{constructor(e){this.fetcher=e}async load(e){const r=await(this.fetcher||fetch)(e,{headers:new Headers({accept:"application/ld+json"})});if(r.ok&&r.headers){let a=r.headers.get("Content-Type");if(a){const c=a.indexOf(";");c>0&&(a=a.substr(0,c))}if(a==="application/ld+json")return await r.json();if(r.headers.has("Link")){let c;if(r.headers.forEach((s,d)=>{if(d==="link"){const l=(0,n.parse)(s);for(const f of l.get("type","application/ld+json"))if(f.rel==="alternate"){if(c)throw new Error("Multiple JSON-LD alternate links were found on "+e);c=(0,o.resolve)(f.uri,e)}}}),c)return this.load(c)}throw new u.ErrorCoded(`Unsupported JSON-LD media type ${a}`,u.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(r.statusText||`Status code: ${r.status}`)}}return qh.FetchDocumentLoader=i,qh}var TS={},Bh={},rR;function PO(){if(rR)return Bh;rR=1,Object.defineProperty(Bh,"__esModule",{value:!0}),Bh.Util=void 0;class u{static isCompactIri(o){return o.indexOf(":")>0&&!(o&&o[0]==="#")}static getPrefix(o,i){if(o&&o[0]==="#")return null;const t=o.indexOf(":");if(t>=0){if(o.length>t+1&&o.charAt(t+1)==="/"&&o.charAt(t+2)==="/")return null;const e=o.substr(0,t);if(e==="_")return null;if(i[e])return e}return null}static getContextValueId(o){if(o===null||typeof o=="string")return o;const i=o["@id"];return i||null}static isSimpleTermDefinitionPrefix(o,i){return!u.isPotentialKeyword(o)&&(i.allowPrefixNonGenDelims||typeof o=="string"&&(o[0]==="_"||u.isPrefixIriEndingWithGenDelim(o)))}static isPotentialKeyword(o){return typeof o=="string"&&u.KEYWORD_REGEX.test(o)}static isPrefixIriEndingWithGenDelim(o){return u.ENDS_WITH_GEN_DELIM.test(o)}static isPrefixValue(o){return o&&(typeof o=="string"||o&&typeof o=="object")}static isValidIri(o){return!!(o&&u.IRI_REGEX.test(o))}static isValidIriWeak(o){return!!o&&o[0]!==":"&&u.IRI_REGEX_WEAK.test(o)}static isValidKeyword(o){return u.VALID_KEYWORDS[o]}static isTermProtected(o,i){const t=o[i];return typeof t!="string"&&t&&t["@protected"]}static hasProtectedTerms(o){for(const i of Object.keys(o))if(u.isTermProtected(o,i))return!0;return!1}static isReservedInternalKeyword(o){return o.startsWith("@__")}static deepEqual(o,i){const t=Object.keys(o),e=Object.keys(i);return t.length!==e.length?!1:t.every(r=>{const a=o[r],c=i[r];return a===c||a!==null&&c!==null&&typeof a=="object"&&typeof c=="object"&&this.deepEqual(a,c)})}}return u.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,u.IRI_REGEX_WEAK=/(?::[^:])|\//,u.KEYWORD_REGEX=/^@[a-z]+$/i,u.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,u.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,u.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,u.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},u.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],u.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],u.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],u.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],u.CONTAINERS_1_0=["@list","@set","@index"],Bh.Util=u,Bh}var nR;function kz(){return nR||(nR=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.defaultExpandOptions=u.JsonLdContextNormalized=void 0;const n=cr(),o=Lw(),i=PO();class t{constructor(r){this.contextRaw=r}getContextRaw(){return this.contextRaw}expandTerm(r,a,c=u.defaultExpandOptions){const s=this.contextRaw[r];if(s===null||s&&s["@id"]===null)return null;let d=!0;if(s&&a){const _=i.Util.getContextValueId(s);if(_&&_!==r)if(typeof _!="string"||!i.Util.isValidIri(_)&&!i.Util.isValidKeyword(_))i.Util.isPotentialKeyword(_)||(d=!1);else return _}const l=i.Util.getPrefix(r,this.contextRaw),f=this.contextRaw["@vocab"],h=(!!f||f==="")&&f.indexOf(":")<0,p=this.contextRaw["@base"],y=i.Util.isPotentialKeyword(r);if(l){const _=this.contextRaw[l],b=i.Util.getContextValueId(_);if(b){if(typeof _=="string"||!c.allowPrefixForcing){if(!i.Util.isSimpleTermDefinitionPrefix(b,c))return r}else if(b[0]!=="_"&&!y&&!_["@prefix"]&&!(r in this.contextRaw))return r;return b+r.substr(l.length+1)}}else if(a&&(f||f===""||c.allowVocabRelativeToBase&&p&&h)&&!y&&!i.Util.isCompactIri(r))if(h){if(c.allowVocabRelativeToBase)return(f||p?(0,n.resolve)(f,p):"")+r;throw new o.ErrorCoded(`Relative vocab expansion for term '${r}' with vocab '${f}' is not allowed.`,o.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return f+r;else if(!a&&p&&!y&&!i.Util.isCompactIri(r))return(0,n.resolve)(r,p);if(d)return r;throw new o.ErrorCoded(`Invalid IRI mapping found for context entry '${r}': '${JSON.stringify(s)}'`,o.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(r,a){if(a&&this.contextRaw["@vocab"]&&r.startsWith(this.contextRaw["@vocab"]))return r.substr(this.contextRaw["@vocab"].length);if(!a&&this.contextRaw["@base"]&&r.startsWith(this.contextRaw["@base"]))return r.substr(this.contextRaw["@base"].length);const c={prefix:"",suffix:r};for(const s in this.contextRaw){const d=this.contextRaw[s];if(d&&!i.Util.isPotentialKeyword(s)){const l=i.Util.getContextValueId(d);if(r.startsWith(l)){const f=r.substr(l.length);if(f)f.length<c.suffix.length&&(c.prefix=s,c.suffix=f);else if(a)return s}}}return c.prefix?c.prefix+":"+c.suffix:r}}u.JsonLdContextNormalized=t,u.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}})(TS)),TS}var iR;function ZZ(){if(iR)return Ch;iR=1,Object.defineProperty(Ch,"__esModule",{value:!0}),Ch.ContextParser=void 0;const u=cr(),n=Lw(),o=Jz(),i=kz(),t=PO();class e{constructor(a){a=a||{},this.documentLoader=a.documentLoader||new o.FetchDocumentLoader,this.documentCache={},this.validateContext=!a.skipValidation,this.expandContentTypeToBase=!!a.expandContentTypeToBase,this.remoteContextsDepthLimit=a.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in a?!!a.redirectSchemaOrgHttps:!0}static validateLanguage(a,c,s){if(typeof a!="string")throw new n.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(a)}'`,s);if(!t.Util.REGEX_LANGUAGE_TAG.test(a)){if(c)throw new n.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(a)}'`,s);return!1}return!0}static validateDirection(a,c){if(typeof a!="string")throw new n.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(a)}'`,n.ERROR_CODES.INVALID_BASE_DIRECTION);if(!t.Util.REGEX_DIRECTION_TAG.test(a)){if(c)throw new n.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(a)}'`,n.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(a){for(const c of Object.keys(a)){let s=a[c];if(s&&typeof s=="object"&&s["@reverse"]&&!s["@id"]){if(typeof s["@reverse"]!="string"||t.Util.isValidKeyword(s["@reverse"]))throw new n.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${s["@reverse"]}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);s=a[c]=Object.assign(Object.assign({},s),{"@id":s["@reverse"]}),s["@id"]=s["@reverse"],t.Util.isPotentialKeyword(s["@reverse"])?delete s["@reverse"]:s["@reverse"]=!0}}return a}expandPrefixedTerms(a,c,s){const d=a.getContextRaw();for(const l of s||Object.keys(d))if(t.Util.EXPAND_KEYS_BLACKLIST.indexOf(l)<0&&!t.Util.isReservedInternalKeyword(l)){const f=d[l];if(t.Util.isPotentialKeyword(l)&&t.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(l)>=0&&(l!=="@type"||typeof d[l]=="object"&&!(d[l]["@protected"]||d[l]["@container"]==="@set")))throw new n.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${l} to ${JSON.stringify(f)}`,n.ERROR_CODES.KEYWORD_REDEFINITION);if(t.Util.ALIAS_RANGE_BLACKLIST.indexOf(t.Util.getContextValueId(f))>=0)throw new n.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${l} to ${JSON.stringify(f)}`,n.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(f&&t.Util.isPotentialKeyword(t.Util.getContextValueId(f))&&f["@prefix"]===!0)throw new n.ErrorCoded(`Tried to use keyword aliases as prefix: '${l}': '${JSON.stringify(f)}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);for(;t.Util.isPrefixValue(d[l]);){const h=d[l];let p=!1;if(typeof h=="string")d[l]=a.expandTerm(h,!0),p=p||h!==d[l];else{const y=h["@id"],_=h["@type"],b=!("@prefix"in h)||t.Util.isValidIri(l);if("@id"in h)y!=null&&typeof y=="string"&&(d[l]=Object.assign(Object.assign({},d[l]),{"@id":a.expandTerm(y,!0)}),p=p||y!==d[l]["@id"]);else if(!t.Util.isPotentialKeyword(l)&&b){const m=a.expandTerm(l,!0);m!==l&&(d[l]=Object.assign(Object.assign({},d[l]),{"@id":m}),p=!0)}if(_&&typeof _=="string"&&_!=="@vocab"&&(!h["@container"]||!h["@container"]["@type"])&&b){let m=a.expandTerm(_,!0);c&&_===m&&(m=a.expandTerm(_,!1)),m!==_&&(p=!0,d[l]=Object.assign(Object.assign({},d[l]),{"@type":m}))}}if(!p)break}}}normalize(a,{processingMode:c,normalizeLanguageTags:s}){if(s||c===1)for(const d of Object.keys(a))if(d==="@language"&&typeof a[d]=="string")a[d]=a[d].toLowerCase();else{const l=a[d];if(l&&typeof l=="object"&&typeof l["@language"]=="string"){const f=l["@language"].toLowerCase();f!==l["@language"]&&(a[d]=Object.assign(Object.assign({},l),{"@language":f}))}}}containersToHash(a){for(const c of Object.keys(a)){const s=a[c];if(s&&typeof s=="object"){if(typeof s["@container"]=="string")a[c]=Object.assign(Object.assign({},s),{"@container":{[s["@container"]]:!0}});else if(Array.isArray(s["@container"])){const d={};for(const l of s["@container"])d[l]=!0;a[c]=Object.assign(Object.assign({},s),{"@container":d})}}}}applyScopedProtected(a,{processingMode:c},s){if(c&&c>=1.1&&a["@protected"]){for(const d of Object.keys(a))if(!t.Util.isReservedInternalKeyword(d)&&!t.Util.isPotentialKeyword(d)&&!t.Util.isTermProtected(a,d)){const l=a[d];l&&typeof l=="object"?"@protected"in a[d]||(a[d]=Object.assign(Object.assign({},a[d]),{"@protected":!0})):(a[d]={"@id":l,"@protected":!0},t.Util.isSimpleTermDefinitionPrefix(l,s)&&(a[d]=Object.assign(Object.assign({},a[d]),{"@prefix":!0})))}delete a["@protected"]}}validateKeywordRedefinitions(a,c,s,d){for(const l of d??Object.keys(c))if(t.Util.isTermProtected(a,l)&&(typeof c[l]=="string"?c[l]={"@id":c[l],"@protected":!0}:c[l]=Object.assign(Object.assign({},c[l]),{"@protected":!0}),!t.Util.deepEqual(a[l],c[l])))throw new n.ErrorCoded(`Attempted to override the protected keyword ${l} from ${JSON.stringify(t.Util.getContextValueId(a[l]))} to ${JSON.stringify(t.Util.getContextValueId(c[l]))}`,n.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(a,{processingMode:c}){for(const s of Object.keys(a)){if(t.Util.isReservedInternalKeyword(s))continue;if(s==="")throw new n.ErrorCoded(`The empty term is not allowed, got: '${s}': '${JSON.stringify(a[s])}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);const d=a[s],l=typeof d;if(t.Util.isPotentialKeyword(s)){switch(s.substr(1)){case"vocab":if(d!==null&&l!=="string")throw new n.ErrorCoded(`Found an invalid @vocab IRI: ${d}`,n.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(d!==null&&l!=="string")throw new n.ErrorCoded(`Found an invalid @base IRI: ${a[s]}`,n.ERROR_CODES.INVALID_BASE_IRI);break;case"language":d!==null&&e.validateLanguage(d,!0,n.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(d!==null&&l!=="number")throw new n.ErrorCoded(`Found an invalid @version number: ${d}`,n.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":d!==null&&e.validateDirection(d,!0);break;case"propagate":if(c===1)throw new n.ErrorCoded(`Found an illegal @propagate keyword: ${d}`,n.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(d!==null&&l!=="boolean")throw new n.ErrorCoded(`Found an invalid @propagate value: ${d}`,n.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(t.Util.isValidKeyword(s)&&t.Util.isValidKeyword(t.Util.getContextValueId(d)))throw new n.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${t.Util.getContextValueId(d)}'`,n.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(d!==null)switch(l){case"string":if(t.Util.getPrefix(d,a)===s)throw new n.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.CYCLIC_IRI_MAPPING);if(t.Util.isValidIriWeak(s)){if(d==="@type")throw new n.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${d}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.isValidIri(d)&&d!==new i.JsonLdContextNormalized(a).expandTerm(s))throw new n.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${d}'`,n.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!t.Util.isCompactIri(s)&&!("@id"in d)&&(d["@type"]==="@id"?!a["@base"]:!a["@vocab"]))throw new n.ErrorCoded(`Missing @id in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);for(const f of Object.keys(d)){const h=d[f];if(h)switch(f){case"@id":if(t.Util.isValidKeyword(h)&&h!=="@type"&&h!=="@id"&&h!=="@graph"&&h!=="@nest")throw new n.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.isValidIriWeak(s)){if(h==="@type")throw new n.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.isValidIri(h)&&h!==new i.JsonLdContextNormalized(a).expandTerm(s))throw new n.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof h!="string")throw new n.ErrorCoded(`Detected non-string @id in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.getPrefix(h,a)===s)throw new n.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(d["@container"]==="@type"&&h!=="@id"&&h!=="@vocab")throw new n.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${s}': '${h}'`,n.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof h!="string")throw new n.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(l)}'`,n.ERROR_CODES.INVALID_TYPE_MAPPING);if(h!=="@id"&&h!=="@vocab"&&(c===1||h!=="@json")&&(c===1||h!=="@none")&&(h[0]==="_"||!t.Util.isValidIri(h)))throw new n.ErrorCoded(`A context @type must be an absolute IRI, found: '${s}': '${h}'`,n.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof h=="string"&&d["@id"]&&d["@id"]!==h)throw new n.ErrorCoded(`Found non-matching @id and @reverse term values in '${s}':'${h}' and '${d["@id"]}'`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in d)throw new n.ErrorCoded(`@nest is not allowed in the reverse property '${s}'`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(c===1&&(Object.keys(h).length>1||t.Util.CONTAINERS_1_0.indexOf(Object.keys(h)[0])<0))throw new n.ErrorCoded(`Invalid term @container for '${s}' ('${Object.keys(h)}') in 1.0, must be only one of ${t.Util.CONTAINERS_1_0.join(", ")}`,n.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const p of Object.keys(h)){if(p==="@list"&&d["@reverse"])throw new n.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${s}'`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(t.Util.CONTAINERS.indexOf(p)<0)throw new n.ErrorCoded(`Invalid term @container for '${s}' ('${p}'), must be one of ${t.Util.CONTAINERS.join(", ")}`,n.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":e.validateLanguage(h,!0,n.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":e.validateDirection(h,!0);break;case"@prefix":if(h!==null&&typeof h!="boolean")throw new n.ErrorCoded(`Found an invalid term @prefix boolean in: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in d)&&!t.Util.isValidIri(s))throw new n.ErrorCoded(`Invalid @prefix definition for '${s}' ('${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(c===1||!d["@container"]||!d["@container"]["@index"])throw new n.ErrorCoded(`Attempt to add illegal key to value object: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(t.Util.isPotentialKeyword(h)&&h!=="@nest")throw new n.ErrorCoded(`Found an invalid term @nest value in: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new n.ErrorCoded(`Found an invalid term value: '${s}': '${d}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(a,c,s){return typeof a=="string"||(s&&!("@base"in a)&&c.parentContext&&typeof c.parentContext=="object"&&"@base"in c.parentContext&&(a["@base"]=c.parentContext["@base"],c.parentContext["@__baseDocument"]&&(a["@__baseDocument"]=!0)),c.baseIRI&&!c.external&&("@base"in a?a["@base"]!==null&&typeof a["@base"]=="string"&&!t.Util.isValidIri(a["@base"])&&(a["@base"]=(0,u.resolve)(a["@base"],c.parentContext&&c.parentContext["@base"]||c.baseIRI)):(a["@base"]=c.baseIRI,a["@__baseDocument"]=!0))),a}normalizeContextIri(a,c){if(!t.Util.isValidIri(a))try{a=(0,u.resolve)(a,c)}catch{throw new Error(`Invalid context IRI: ${a}`)}return this.redirectSchemaOrgHttps&&a.startsWith("http://schema.org")&&(a="https://schema.org/"),a}async parseInnerContexts(a,c,s){for(const d of s??Object.keys(a)){const l=a[d];if(l&&typeof l=="object"&&"@context"in l&&l["@context"]!==null&&!c.ignoreScopedContexts){if(this.validateContext)try{const f=Object.assign(Object.assign({},a),{[d]:Object.assign({},a[d])});delete f[d]["@context"],await this.parse(l["@context"],Object.assign(Object.assign({},c),{external:!1,parentContext:f,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(f){throw new n.ErrorCoded(f.message,n.ERROR_CODES.INVALID_SCOPED_CONTEXT)}a[d]=Object.assign(Object.assign({},l),{"@context":(await this.parse(l["@context"],Object.assign(Object.assign({},c),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:a}))).getContextRaw()})}}return a}async parse(a,c={},s={}){const{baseIRI:d,parentContext:l,external:f,processingMode:h=e.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:p,ignoreProtection:y,minimalProcessing:_}=c,b=c.remoteContexts||{};if(Object.keys(b).length>=this.remoteContextsDepthLimit)throw new n.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(b),n.ERROR_CODES.CONTEXT_OVERFLOW);if(a==null){if(!y&&l&&t.Util.hasProtectedTerms(l))throw new n.ErrorCoded("Illegal context nullification when terms are protected",n.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new i.JsonLdContextNormalized(this.applyBaseEntry({},c,!1))}else if(typeof a=="string"){const m=this.normalizeContextIri(a,d),g=this.getOverriddenLoad(m,c);if(g)return new i.JsonLdContextNormalized(g);const T=await this.parse(await this.load(m),Object.assign(Object.assign({},c),{baseIRI:m,external:!0,remoteContexts:Object.assign(Object.assign({},b),{[m]:!0})}));return this.applyBaseEntry(T.getContextRaw(),c,!0),T}else if(Array.isArray(a)){const m=[],g=await Promise.all(a.map((v,A)=>{if(typeof v=="string"){const I=this.normalizeContextIri(v,d);m[A]=I;const q=this.getOverriddenLoad(I,c);return q||this.load(I)}else return v}));if(_)return new i.JsonLdContextNormalized(g);const T=await g.reduce((v,A,I)=>v.then(q=>this.parse(A,Object.assign(Object.assign({},c),{baseIRI:m[I]||c.baseIRI,external:!!m[I]||c.external,parentContext:q.getContextRaw(),remoteContexts:m[I]?Object.assign(Object.assign({},b),{[m[I]]:!0}):b}),{skipValidation:I<g.length-1})),Promise.resolve(new i.JsonLdContextNormalized(l||{})));return this.applyBaseEntry(T.getContextRaw(),c,!0),T}else if(typeof a=="object"){if("@context"in a)return await this.parse(a["@context"],c);if(a=Object.assign({},a),f&&delete a["@base"],this.applyBaseEntry(a,c,!0),this.containersToHash(a),_)return new i.JsonLdContextNormalized(a);let m={};if("@import"in a)if(h>=1.1){if(typeof a["@import"]!="string")throw new n.ErrorCoded("An @import value must be a string, but got "+typeof a["@import"],n.ERROR_CODES.INVALID_IMPORT_VALUE);m=await this.loadImportContext(this.normalizeContextIri(a["@import"],d)),delete a["@import"]}else throw new n.ErrorCoded("Context importing is not supported in JSON-LD 1.0",n.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(m,{processingMode:h},i.defaultExpandOptions);const g=Object.assign(m,a);this.idifyReverseTerms(g),this.normalize(g,{processingMode:h,normalizeLanguageTags:p}),this.applyScopedProtected(g,{processingMode:h},i.defaultExpandOptions);const T=Object.keys(g),v=[];if(typeof l=="object")for(const I in l)I in g?v.push(I):g[I]=l[I];await this.parseInnerContexts(g,c,T);const A=new i.JsonLdContextNormalized(g);return(g&&g["@version"]||e.DEFAULT_PROCESSING_MODE)>=1.1&&(a["@vocab"]&&typeof a["@vocab"]=="string"||a["@vocab"]==="")&&(l&&"@vocab"in l&&a["@vocab"].indexOf(":")<0?g["@vocab"]=l["@vocab"]+a["@vocab"]:(t.Util.isCompactIri(a["@vocab"])||a["@vocab"]in g)&&(g["@vocab"]=A.expandTerm(a["@vocab"],!0))),this.expandPrefixedTerms(A,this.expandContentTypeToBase,T),!y&&l&&h>=1.1&&this.validateKeywordRedefinitions(l,g,i.defaultExpandOptions,v),this.validateContext&&!s.skipValidation&&this.validate(g,{processingMode:h}),A}else throw new n.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${a}`,n.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(a){const c=this.documentCache[a];if(c)return c;let s;try{s=await this.documentLoader.load(a)}catch(d){throw new n.ErrorCoded(`Failed to load remote context ${a}: ${d.message}`,n.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in s))throw new n.ErrorCoded(`Missing @context in remote context at ${a}`,n.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[a]=s["@context"]}getOverriddenLoad(a,c){if(a in(c.remoteContexts||{})){if(c.ignoreRemoteScopedContexts)return a;throw new n.ErrorCoded("Detected a cyclic context inclusion of "+a,n.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(a){let c=await this.load(a);if(typeof c!="object"||Array.isArray(c))throw new n.ErrorCoded("An imported context must be a single object: "+a,n.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in c)throw new n.ErrorCoded("An imported context can not import another context: "+a,n.ERROR_CODES.INVALID_CONTEXT_ENTRY);return c=Object.assign({},c),this.containersToHash(c),c}}return e.DEFAULT_PROCESSING_MODE=1.1,Ch.ContextParser=e,Ch}var wS={},aR;function eee(){return aR||(aR=1,Object.defineProperty(wS,"__esModule",{value:!0})),wS}var SS={},uR;function tee(){return uR||(uR=1,Object.defineProperty(SS,"__esModule",{value:!0})),SS}var oR;function ree(){return oR||(oR=1,(function(u){var n=lu&&lu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=lu&&lu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ZZ(),u),o(Lw(),u),o(Jz(),u),o(eee(),u),o(tee(),u),o(kz(),u),o(PO(),u)})(lu)),lu}var sR;function Kz(){if(sR)return Mh;sR=1,Object.defineProperty(Mh,"__esModule",{value:!0}),Mh.Util=void 0;const u=hr(),n=ree(),o=dt();class i{constructor(e){this.nodeHandlers={},this.nodeValueHandlers={},this.directiveNodeHandlers={},this.settings=e,this.dataFactory=e.dataFactory||new u.DataFactory,this.operationFactory=new o.Factory(this.dataFactory),this.contextParser=new n.ContextParser}registerNodeHandler(e){this.nodeHandlers[e.targetKind]=e}registerNodeValueHandler(e){this.nodeValueHandlers[e.targetKind]=e}registerDirectiveNodeHandler(e){this.directiveNodeHandlers[e.targetKind]=e}handleNode(e,r){const a=this.nodeHandlers[e.kind];if(!a)throw new Error(`Unsupported GraphQL node '${e.kind}'`);return a.handle(e,r)}handleNodeValue(e,r,a){const c=this.nodeValueHandlers[e.kind];if(!c)throw new Error(`Unsupported GraphQL value node '${e.kind}'`);return c.handle(e,r,a)}handleDirectiveNode(e,r){const a=this.directiveNodeHandlers[e.directive.name.value];return a?a.handle(e,r):null}joinOperations(e){if(e.length===1)return e[0];const r=[],a=[];for(const c of e)c.type==="bgp"?r.push(c):a.push(c);if(r.length===e.length)return this.joinOperationsAsBgp(r);if(r.length===e.length-1&&a[0].type==="leftjoin"&&a[0].input[0].type==="bgp"){const c=a[0];return r.push(c.input[0]),this.operationFactory.createLeftJoin(this.joinOperationsAsBgp(r),c.input[1])}else return a.length===e.length?this.joinOperationsAsNestedJoin(a):this.joinOperationsAsNestedJoin([this.joinOperationsAsBgp(r),this.joinOperationsAsNestedJoin(a)])}joinOperationsAsBgp(e){return this.operationFactory.createBgp([].concat.apply([],e.map(r=>r.patterns)))}joinOperationsAsNestedJoin(e){return this.operationFactory.createJoin(e)}appendFieldToPath(e,r){return e.concat([r])}getFieldLabel(e){return(e.alias?e.alias:e.name).value}nameToVariable(e,r){return this.dataFactory.variable((r.path.length?r.path.join(this.settings.variableDelimiter)+this.settings.variableDelimiter:"")+e)}valueToNamedNode(e,r){const a=r.expandTerm(e,!0);if(this.settings.requireContext&&!a)throw new Error("No context entry was found for "+e);return this.dataFactory.namedNode(a||e)}getArgument(e,r){if(e){for(const a of e)if(a.name.value===r)return a}}newTypePattern(e,r,a){return this.operationFactory.createPattern(e,this.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.valueToNamedNode(r.name.value,a.context),a.graph)}createQuadPattern(e,r,a,c,s){const d=this.valueToNamedNode(r.value,s);return s&&s.getContextRaw()[r.value]&&s.getContextRaw()[r.value]["@reverse"]?this.operationFactory.createPattern(a,d,e,c):this.operationFactory.createPattern(e,d,a,c)}createQuadPath(e,r,a,c,s,d){const l=this.valueToNamedNode(r.value,d);let f=this.operationFactory.createLink(l);for(const h of a.values){if(h.kind!=="EnumValue")throw new Error("Invalid value type for 'alt' argument, must be EnumValue, but got "+h.kind);f=this.operationFactory.createAlt([f,this.operationFactory.createLink(this.valueToNamedNode(h.value,d))])}return d&&d.getContextRaw()[r.value]&&d.getContextRaw()[r.value]["@reverse"]?this.operationFactory.createPath(c,f,e,s):this.operationFactory.createPath(e,f,c,s)}}return Mh.Util=i,Mh}var cR;function nee(){if(cR)return du;cR=1;var u=du&&du.__awaiter||function(a,c,s,d){function l(f){return f instanceof s?f:new s(function(h){h(f)})}return new(s||(s=Promise))(function(f,h){function p(b){try{_(d.next(b))}catch(m){h(m)}}function y(b){try{_(d.throw(b))}catch(m){h(m)}}function _(b){b.done?f(b.value):l(b.value).then(p,y)}_((d=d.apply(a,c||[])).next())})};Object.defineProperty(du,"__esModule",{value:!0}),du.Converter=void 0;const n=WZ,o=Nz(),i=Fz(),t=Pv(),e=Kz();class r{constructor(c){c=c||{},c.variableDelimiter=c.variableDelimiter||"_",c.expressionVariableCounter=c.expressionVariableCounter||0,this.util=new e.Util(c),this.initializeNodeHandlers(c)}static registerNodeHandlers(c,s){c.registerNodeHandler(new o.NodeHandlerDocument(c,s)),c.registerNodeHandler(new o.NodeHandlerDefinitionOperation(c,s)),c.registerNodeHandler(new o.NodeHandlerDefinitionFragment(c,s)),c.registerNodeHandler(new o.NodeHandlerSelectionFragmentSpread(c,s)),c.registerNodeHandler(new o.NodeHandlerSelectionInlineFragment(c,s)),c.registerNodeHandler(new o.NodeHandlerSelectionField(c,s))}static registerNodeValueHandlers(c,s){c.registerNodeValueHandler(new o.NodeValueHandlerVariable(c,s)),c.registerNodeValueHandler(new o.NodeValueHandlerInt(c,s)),c.registerNodeValueHandler(new o.NodeValueHandlerFloat(c,s)),c.registerNodeValueHandler(new o.NodeValueHandlerString(c,s)),c.registerNodeValueHandler(new o.NodeValueHandlerBoolean(c,s)),c.registerNodeValueHandler(new o.NodeValueHandlerNull(c,s)),c.registerNodeValueHandler(new o.NodeValueHandlerEnum(c,s)),c.registerNodeValueHandler(new o.NodeValueHandlerList(c,s)),c.registerNodeValueHandler(new o.NodeValueHandlerObject(c,s))}static registerDirectiveNodeHandlers(c,s){c.registerDirectiveNodeHandler(new i.DirectiveNodeHandlerInclude(c,s)),c.registerDirectiveNodeHandler(new i.DirectiveNodeHandlerOptional(c,s)),c.registerDirectiveNodeHandler(new i.DirectiveNodeHandlerPlural(c,s)),c.registerDirectiveNodeHandler(new i.DirectiveNodeHandlerSingle(c,s)),c.registerDirectiveNodeHandler(new i.DirectiveNodeHandlerSkip(c,s))}graphqlToSparqlAlgebra(c,s,d){return u(this,void 0,void 0,function*(){return this.graphqlToSparqlAlgebraRawContext(c,yield this.util.contextParser.parse(s),d)})}graphqlToSparqlAlgebraRawContext(c,s,d){d=d||{};const l=typeof c=="string"?(0,n.parse)(c):c,f=this.indexFragments(l),h={context:s,fragmentDefinitions:f,graph:this.util.dataFactory.defaultGraph(),path:[],singularizeState:t.SingularizeState.PLURAL,singularizeVariables:d.singularizeVariables||{},subject:null,terminalVariables:[],variablesDict:d.variablesDict||{},variablesMetaDict:{}};return this.util.handleNode(l,h)}indexFragments(c){const s={},d=[];for(const l of c.definitions)l.kind==="FragmentDefinition"?s[l.name.value]=l:d.push(l);return c.definitions=d,s}initializeNodeHandlers(c){r.registerNodeHandlers(this.util,c),r.registerNodeValueHandlers(this.util,c),r.registerDirectiveNodeHandlers(this.util,c)}}return du.Converter=r,du}var AS={},dR;function iee(){return dR||(dR=1,Object.defineProperty(AS,"__esModule",{value:!0})),AS}var lR;function aee(){return lR||(lR=1,(function(u){var n=uu&&uu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=uu&&uu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Nz(),u),o(nee(),u),o(Pv(),u),o(iee(),u),o(Kz(),u)})(uu)),uu}var fR;function uee(){if(fR)return dh;fR=1,Object.defineProperty(dh,"__esModule",{value:!0}),dh.ActorQueryParseGraphql=void 0;const u=Rz(),n=Ce(),o=be(),i=aee();let t=class extends u.ActorQueryParse{constructor(r){super(r),this.graphqlToSparql=new i.Converter({requireContext:!0})}async test(r){var a;return((a=r.queryFormat)==null?void 0:a.language)!=="graphql"?(0,o.failTest)("This actor can only parse GraphQL queries"):(0,o.passTestVoid)()}async run(r){const a=r.context.get(n.KeysInitQuery.jsonLdContext)||{},c={singularizeVariables:r.context.get(n.KeysInitQuery.graphqlSingularizeVariables)};return{operation:await this.graphqlToSparql.graphqlToSparqlAlgebra(r.query,a,c)}}};return dh.ActorQueryParseGraphql=t,dh}var hR;function oee(){return hR||(hR=1,(function(u){var n=au&&au.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=au&&au.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(uee(),u)})(au)),au}var hu={},$h={},pu={},Uh={},bu={},Vh={},pR;function Wz(){if(pR)return Vh;pR=1,Object.defineProperty(Vh,"__esModule",{value:!0}),Vh.ActorAbstractMediaTyped=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i)}async run(i){if("handle"in i){const t=i;return{handle:await this.runHandle(t.handle,t.handleMediaType,i.context)}}if("mediaTypes"in i)return{mediaTypes:await this.getMediaTypes(i.context)};if("mediaTypeFormats"in i)return{mediaTypeFormats:await this.getMediaTypeFormats(i.context)};throw new Error("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided")}async test(i){if("handle"in i){const t=i;return(await this.testHandle(t.handle,t.handleMediaType,i.context)).map(e=>({handle:e}))}return"mediaTypes"in i?(await this.testMediaType(i.context)).map(t=>({mediaTypes:t})):"mediaTypeFormats"in i?(await this.testMediaTypeFormats(i.context)).map(t=>({mediaTypeFormats:t})):(0,u.failTest)("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided")}};return Vh.ActorAbstractMediaTyped=n,Vh}var Qh={},bR;function see(){if(bR)return Qh;bR=1,Object.defineProperty(Qh,"__esModule",{value:!0}),Qh.ActorAbstractMediaTypedFixed=void 0;const u=be(),n=Wz();let o=class extends n.ActorAbstractMediaTyped{constructor(t){super(t);const e=this.priorityScale||this.priorityScale===0?this.priorityScale:1;if(this.mediaTypePriorities)for(const[r,[a,c]]of Object.entries(this.mediaTypePriorities).entries())this.mediaTypePriorities[a]=e*c;this.mediaTypePriorities=Object.freeze(this.mediaTypePriorities),this.mediaTypeFormats=Object.freeze(this.mediaTypeFormats)}async testHandle(t,e,r){return!e||!(e in this.mediaTypePriorities)?(0,u.failTest)(`Unrecognized media type: ${e}`):await this.testHandleChecked(t,r)}async testMediaType(t){return(0,u.passTestVoid)()}async getMediaTypes(t){return this.mediaTypePriorities}async testMediaTypeFormats(t){return(0,u.passTestVoid)()}async getMediaTypeFormats(t){return this.mediaTypeFormats}};return Qh.ActorAbstractMediaTypedFixed=o,Qh}var yR;function Hf(){return yR||(yR=1,(function(u){var n=bu&&bu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=bu&&bu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Wz(),u),o(see(),u)})(bu)),bu}var _R;function cee(){if(_R)return Uh;_R=1,Object.defineProperty(Uh,"__esModule",{value:!0}),Uh.ActorQueryResultSerialize=void 0;const u=Hf();let n=class extends u.ActorAbstractMediaTyped{constructor(i){super(i)}};return Uh.ActorQueryResultSerialize=n,Uh}var Hh={},gR;function dee(){if(gR)return Hh;gR=1,Object.defineProperty(Hh,"__esModule",{value:!0}),Hh.ActorQueryResultSerializeFixedMediaTypes=void 0;const u=Hf(),n=be();let o=class extends u.ActorAbstractMediaTypedFixed{constructor(t){super(t)}async testHandleChecked(t,e){return(0,n.passTestVoid)()}};return Hh.ActorQueryResultSerializeFixedMediaTypes=o,Hh}var mR;function ri(){return mR||(mR=1,(function(u){var n=pu&&pu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=pu&&pu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(cee(),u),o(dee(),u)})(pu)),pu}var OS={exports:{}},ES={exports:{}},xS={},Gh={},vR;function lee(){if(vR)return Gh;vR=1,Gh.byteLength=a,Gh.toByteArray=s,Gh.fromByteArray=f;for(var u=[],n=[],o=typeof Uint8Array<"u"?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=0,e=i.length;t<e;++t)u[t]=i[t],n[i.charCodeAt(t)]=t;n[45]=62,n[95]=63;function r(h){var p=h.length;if(p%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var y=h.indexOf("=");y===-1&&(y=p);var _=y===p?0:4-y%4;return[y,_]}function a(h){var p=r(h),y=p[0],_=p[1];return(y+_)*3/4-_}function c(h,p,y){return(p+y)*3/4-y}function s(h){var p,y=r(h),_=y[0],b=y[1],m=new o(c(h,_,b)),g=0,T=b>0?_-4:_,v;for(v=0;v<T;v+=4)p=n[h.charCodeAt(v)]<<18|n[h.charCodeAt(v+1)]<<12|n[h.charCodeAt(v+2)]<<6|n[h.charCodeAt(v+3)],m[g++]=p>>16&255,m[g++]=p>>8&255,m[g++]=p&255;return b===2&&(p=n[h.charCodeAt(v)]<<2|n[h.charCodeAt(v+1)]>>4,m[g++]=p&255),b===1&&(p=n[h.charCodeAt(v)]<<10|n[h.charCodeAt(v+1)]<<4|n[h.charCodeAt(v+2)]>>2,m[g++]=p>>8&255,m[g++]=p&255),m}function d(h){return u[h>>18&63]+u[h>>12&63]+u[h>>6&63]+u[h&63]}function l(h,p,y){for(var _,b=[],m=p;m<y;m+=3)_=(h[m]<<16&16711680)+(h[m+1]<<8&65280)+(h[m+2]&255),b.push(d(_));return b.join("")}function f(h){for(var p,y=h.length,_=y%3,b=[],m=16383,g=0,T=y-_;g<T;g+=m)b.push(l(h,g,g+m>T?T:g+m));return _===1?(p=h[y-1],b.push(u[p>>2]+u[p<<4&63]+"==")):_===2&&(p=(h[y-2]<<8)+h[y-1],b.push(u[p>>10]+u[p>>4&63]+u[p<<2&63]+"=")),b.join("")}return Gh}var fT={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */var TR;function fee(){return TR||(TR=1,fT.read=function(u,n,o,i,t){var e,r,a=t*8-i-1,c=(1<<a)-1,s=c>>1,d=-7,l=o?t-1:0,f=o?-1:1,h=u[n+l];for(l+=f,e=h&(1<<-d)-1,h>>=-d,d+=a;d>0;e=e*256+u[n+l],l+=f,d-=8);for(r=e&(1<<-d)-1,e>>=-d,d+=i;d>0;r=r*256+u[n+l],l+=f,d-=8);if(e===0)e=1-s;else{if(e===c)return r?NaN:(h?-1:1)*(1/0);r=r+Math.pow(2,i),e=e-s}return(h?-1:1)*r*Math.pow(2,e-i)},fT.write=function(u,n,o,i,t,e){var r,a,c,s=e*8-t-1,d=(1<<s)-1,l=d>>1,f=t===23?Math.pow(2,-24)-Math.pow(2,-77):0,h=i?0:e-1,p=i?1:-1,y=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(a=isNaN(n)?1:0,r=d):(r=Math.floor(Math.log(n)/Math.LN2),n*(c=Math.pow(2,-r))<1&&(r--,c*=2),r+l>=1?n+=f/c:n+=f*Math.pow(2,1-l),n*c>=2&&(r++,c/=2),r+l>=d?(a=0,r=d):r+l>=1?(a=(n*c-1)*Math.pow(2,t),r=r+l):(a=n*Math.pow(2,l-1)*Math.pow(2,t),r=0));t>=8;u[o+h]=a&255,h+=p,a/=256,t-=8);for(r=r<<t|a,s+=t;s>0;u[o+h]=r&255,h+=p,r/=256,s-=8);u[o+h-p]|=y*128}),fT}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var wR;function ni(){return wR||(wR=1,(function(u){const n=lee(),o=fee(),i=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;u.Buffer=a,u.SlowBuffer=m,u.INSPECT_MAX_BYTES=50;const t=2147483647;u.kMaxLength=t,a.TYPED_ARRAY_SUPPORT=e(),!a.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function e(){try{const C=new Uint8Array(1),F={foo:function(){return 42}};return Object.setPrototypeOf(F,Uint8Array.prototype),Object.setPrototypeOf(C,F),C.foo()===42}catch{return!1}}Object.defineProperty(a.prototype,"parent",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.buffer}}),Object.defineProperty(a.prototype,"offset",{enumerable:!0,get:function(){if(a.isBuffer(this))return this.byteOffset}});function r(C){if(C>t)throw new RangeError('The value "'+C+'" is invalid for option "size"');const F=new Uint8Array(C);return Object.setPrototypeOf(F,a.prototype),F}function a(C,F,j){if(typeof C=="number"){if(typeof F=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return l(C)}return c(C,F,j)}a.poolSize=8192;function c(C,F,j){if(typeof C=="string")return f(C,F);if(ArrayBuffer.isView(C))return p(C);if(C==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C);if(ce(C,ArrayBuffer)||C&&ce(C.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(ce(C,SharedArrayBuffer)||C&&ce(C.buffer,SharedArrayBuffer)))return y(C,F,j);if(typeof C=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const z=C.valueOf&&C.valueOf();if(z!=null&&z!==C)return a.from(z,F,j);const Z=_(C);if(Z)return Z;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof C[Symbol.toPrimitive]=="function")return a.from(C[Symbol.toPrimitive]("string"),F,j);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof C)}a.from=function(C,F,j){return c(C,F,j)},Object.setPrototypeOf(a.prototype,Uint8Array.prototype),Object.setPrototypeOf(a,Uint8Array);function s(C){if(typeof C!="number")throw new TypeError('"size" argument must be of type number');if(C<0)throw new RangeError('The value "'+C+'" is invalid for option "size"')}function d(C,F,j){return s(C),C<=0?r(C):F!==void 0?typeof j=="string"?r(C).fill(F,j):r(C).fill(F):r(C)}a.alloc=function(C,F,j){return d(C,F,j)};function l(C){return s(C),r(C<0?0:b(C)|0)}a.allocUnsafe=function(C){return l(C)},a.allocUnsafeSlow=function(C){return l(C)};function f(C,F){if((typeof F!="string"||F==="")&&(F="utf8"),!a.isEncoding(F))throw new TypeError("Unknown encoding: "+F);const j=g(C,F)|0;let z=r(j);const Z=z.write(C,F);return Z!==j&&(z=z.slice(0,Z)),z}function h(C){const F=C.length<0?0:b(C.length)|0,j=r(F);for(let z=0;z<F;z+=1)j[z]=C[z]&255;return j}function p(C){if(ce(C,Uint8Array)){const F=new Uint8Array(C);return y(F.buffer,F.byteOffset,F.byteLength)}return h(C)}function y(C,F,j){if(F<0||C.byteLength<F)throw new RangeError('"offset" is outside of buffer bounds');if(C.byteLength<F+(j||0))throw new RangeError('"length" is outside of buffer bounds');let z;return F===void 0&&j===void 0?z=new Uint8Array(C):j===void 0?z=new Uint8Array(C,F):z=new Uint8Array(C,F,j),Object.setPrototypeOf(z,a.prototype),z}function _(C){if(a.isBuffer(C)){const F=b(C.length)|0,j=r(F);return j.length===0||C.copy(j,0,0,F),j}if(C.length!==void 0)return typeof C.length!="number"||Se(C.length)?r(0):h(C);if(C.type==="Buffer"&&Array.isArray(C.data))return h(C.data)}function b(C){if(C>=t)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+t.toString(16)+" bytes");return C|0}function m(C){return+C!=C&&(C=0),a.alloc(+C)}a.isBuffer=function(F){return F!=null&&F._isBuffer===!0&&F!==a.prototype},a.compare=function(F,j){if(ce(F,Uint8Array)&&(F=a.from(F,F.offset,F.byteLength)),ce(j,Uint8Array)&&(j=a.from(j,j.offset,j.byteLength)),!a.isBuffer(F)||!a.isBuffer(j))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(F===j)return 0;let z=F.length,Z=j.length;for(let le=0,ue=Math.min(z,Z);le<ue;++le)if(F[le]!==j[le]){z=F[le],Z=j[le];break}return z<Z?-1:Z<z?1:0},a.isEncoding=function(F){switch(String(F).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(F,j){if(!Array.isArray(F))throw new TypeError('"list" argument must be an Array of Buffers');if(F.length===0)return a.alloc(0);let z;if(j===void 0)for(j=0,z=0;z<F.length;++z)j+=F[z].length;const Z=a.allocUnsafe(j);let le=0;for(z=0;z<F.length;++z){let ue=F[z];if(ce(ue,Uint8Array))le+ue.length>Z.length?(a.isBuffer(ue)||(ue=a.from(ue)),ue.copy(Z,le)):Uint8Array.prototype.set.call(Z,ue,le);else if(a.isBuffer(ue))ue.copy(Z,le);else throw new TypeError('"list" argument must be an Array of Buffers');le+=ue.length}return Z};function g(C,F){if(a.isBuffer(C))return C.length;if(ArrayBuffer.isView(C)||ce(C,ArrayBuffer))return C.byteLength;if(typeof C!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof C);const j=C.length,z=arguments.length>2&&arguments[2]===!0;if(!z&&j===0)return 0;let Z=!1;for(;;)switch(F){case"ascii":case"latin1":case"binary":return j;case"utf8":case"utf-8":return V(C).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return j*2;case"hex":return j>>>1;case"base64":return Y(C).length;default:if(Z)return z?-1:V(C).length;F=(""+F).toLowerCase(),Z=!0}}a.byteLength=g;function T(C,F,j){let z=!1;if((F===void 0||F<0)&&(F=0),F>this.length||((j===void 0||j>this.length)&&(j=this.length),j<=0)||(j>>>=0,F>>>=0,j<=F))return"";for(C||(C="utf8");;)switch(C){case"hex":return ie(this,F,j);case"utf8":case"utf-8":return L(this,F,j);case"ascii":return X(this,F,j);case"latin1":case"binary":return J(this,F,j);case"base64":return R(this,F,j);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,F,j);default:if(z)throw new TypeError("Unknown encoding: "+C);C=(C+"").toLowerCase(),z=!0}}a.prototype._isBuffer=!0;function v(C,F,j){const z=C[F];C[F]=C[j],C[j]=z}a.prototype.swap16=function(){const F=this.length;if(F%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let j=0;j<F;j+=2)v(this,j,j+1);return this},a.prototype.swap32=function(){const F=this.length;if(F%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let j=0;j<F;j+=4)v(this,j,j+3),v(this,j+1,j+2);return this},a.prototype.swap64=function(){const F=this.length;if(F%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let j=0;j<F;j+=8)v(this,j,j+7),v(this,j+1,j+6),v(this,j+2,j+5),v(this,j+3,j+4);return this},a.prototype.toString=function(){const F=this.length;return F===0?"":arguments.length===0?L(this,0,F):T.apply(this,arguments)},a.prototype.toLocaleString=a.prototype.toString,a.prototype.equals=function(F){if(!a.isBuffer(F))throw new TypeError("Argument must be a Buffer");return this===F?!0:a.compare(this,F)===0},a.prototype.inspect=function(){let F="";const j=u.INSPECT_MAX_BYTES;return F=this.toString("hex",0,j).replace(/(.{2})/g,"$1 ").trim(),this.length>j&&(F+=" ... "),"<Buffer "+F+">"},i&&(a.prototype[i]=a.prototype.inspect),a.prototype.compare=function(F,j,z,Z,le){if(ce(F,Uint8Array)&&(F=a.from(F,F.offset,F.byteLength)),!a.isBuffer(F))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof F);if(j===void 0&&(j=0),z===void 0&&(z=F?F.length:0),Z===void 0&&(Z=0),le===void 0&&(le=this.length),j<0||z>F.length||Z<0||le>this.length)throw new RangeError("out of range index");if(Z>=le&&j>=z)return 0;if(Z>=le)return-1;if(j>=z)return 1;if(j>>>=0,z>>>=0,Z>>>=0,le>>>=0,this===F)return 0;let ue=le-Z,Pe=z-j;const Ve=Math.min(ue,Pe),Be=this.slice(Z,le),Ze=F.slice(j,z);for(let K=0;K<Ve;++K)if(Be[K]!==Ze[K]){ue=Be[K],Pe=Ze[K];break}return ue<Pe?-1:Pe<ue?1:0};function A(C,F,j,z,Z){if(C.length===0)return-1;if(typeof j=="string"?(z=j,j=0):j>2147483647?j=2147483647:j<-2147483648&&(j=-2147483648),j=+j,Se(j)&&(j=Z?0:C.length-1),j<0&&(j=C.length+j),j>=C.length){if(Z)return-1;j=C.length-1}else if(j<0)if(Z)j=0;else return-1;if(typeof F=="string"&&(F=a.from(F,z)),a.isBuffer(F))return F.length===0?-1:I(C,F,j,z,Z);if(typeof F=="number")return F=F&255,typeof Uint8Array.prototype.indexOf=="function"?Z?Uint8Array.prototype.indexOf.call(C,F,j):Uint8Array.prototype.lastIndexOf.call(C,F,j):I(C,[F],j,z,Z);throw new TypeError("val must be string, number or Buffer")}function I(C,F,j,z,Z){let le=1,ue=C.length,Pe=F.length;if(z!==void 0&&(z=String(z).toLowerCase(),z==="ucs2"||z==="ucs-2"||z==="utf16le"||z==="utf-16le")){if(C.length<2||F.length<2)return-1;le=2,ue/=2,Pe/=2,j/=2}function Ve(Ze,K){return le===1?Ze[K]:Ze.readUInt16BE(K*le)}let Be;if(Z){let Ze=-1;for(Be=j;Be<ue;Be++)if(Ve(C,Be)===Ve(F,Ze===-1?0:Be-Ze)){if(Ze===-1&&(Ze=Be),Be-Ze+1===Pe)return Ze*le}else Ze!==-1&&(Be-=Be-Ze),Ze=-1}else for(j+Pe>ue&&(j=ue-Pe),Be=j;Be>=0;Be--){let Ze=!0;for(let K=0;K<Pe;K++)if(Ve(C,Be+K)!==Ve(F,K)){Ze=!1;break}if(Ze)return Be}return-1}a.prototype.includes=function(F,j,z){return this.indexOf(F,j,z)!==-1},a.prototype.indexOf=function(F,j,z){return A(this,F,j,z,!0)},a.prototype.lastIndexOf=function(F,j,z){return A(this,F,j,z,!1)};function q(C,F,j,z){j=Number(j)||0;const Z=C.length-j;z?(z=Number(z),z>Z&&(z=Z)):z=Z;const le=F.length;z>le/2&&(z=le/2);let ue;for(ue=0;ue<z;++ue){const Pe=parseInt(F.substr(ue*2,2),16);if(Se(Pe))return ue;C[j+ue]=Pe}return ue}function O(C,F,j,z){return se(V(F,C.length-j),C,j,z)}function w(C,F,j,z){return se(k(F),C,j,z)}function S(C,F,j,z){return se(Y(F),C,j,z)}function E(C,F,j,z){return se(H(F,C.length-j),C,j,z)}a.prototype.write=function(F,j,z,Z){if(j===void 0)Z="utf8",z=this.length,j=0;else if(z===void 0&&typeof j=="string")Z=j,z=this.length,j=0;else if(isFinite(j))j=j>>>0,isFinite(z)?(z=z>>>0,Z===void 0&&(Z="utf8")):(Z=z,z=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const le=this.length-j;if((z===void 0||z>le)&&(z=le),F.length>0&&(z<0||j<0)||j>this.length)throw new RangeError("Attempt to write outside buffer bounds");Z||(Z="utf8");let ue=!1;for(;;)switch(Z){case"hex":return q(this,F,j,z);case"utf8":case"utf-8":return O(this,F,j,z);case"ascii":case"latin1":case"binary":return w(this,F,j,z);case"base64":return S(this,F,j,z);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return E(this,F,j,z);default:if(ue)throw new TypeError("Unknown encoding: "+Z);Z=(""+Z).toLowerCase(),ue=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function R(C,F,j){return F===0&&j===C.length?n.fromByteArray(C):n.fromByteArray(C.slice(F,j))}function L(C,F,j){j=Math.min(C.length,j);const z=[];let Z=F;for(;Z<j;){const le=C[Z];let ue=null,Pe=le>239?4:le>223?3:le>191?2:1;if(Z+Pe<=j){let Ve,Be,Ze,K;switch(Pe){case 1:le<128&&(ue=le);break;case 2:Ve=C[Z+1],(Ve&192)===128&&(K=(le&31)<<6|Ve&63,K>127&&(ue=K));break;case 3:Ve=C[Z+1],Be=C[Z+2],(Ve&192)===128&&(Be&192)===128&&(K=(le&15)<<12|(Ve&63)<<6|Be&63,K>2047&&(K<55296||K>57343)&&(ue=K));break;case 4:Ve=C[Z+1],Be=C[Z+2],Ze=C[Z+3],(Ve&192)===128&&(Be&192)===128&&(Ze&192)===128&&(K=(le&15)<<18|(Ve&63)<<12|(Be&63)<<6|Ze&63,K>65535&&K<1114112&&(ue=K))}}ue===null?(ue=65533,Pe=1):ue>65535&&(ue-=65536,z.push(ue>>>10&1023|55296),ue=56320|ue&1023),z.push(ue),Z+=Pe}return B(z)}const M=4096;function B(C){const F=C.length;if(F<=M)return String.fromCharCode.apply(String,C);let j="",z=0;for(;z<F;)j+=String.fromCharCode.apply(String,C.slice(z,z+=M));return j}function X(C,F,j){let z="";j=Math.min(C.length,j);for(let Z=F;Z<j;++Z)z+=String.fromCharCode(C[Z]&127);return z}function J(C,F,j){let z="";j=Math.min(C.length,j);for(let Z=F;Z<j;++Z)z+=String.fromCharCode(C[Z]);return z}function ie(C,F,j){const z=C.length;(!F||F<0)&&(F=0),(!j||j<0||j>z)&&(j=z);let Z="";for(let le=F;le<j;++le)Z+=Me[C[le]];return Z}function U(C,F,j){const z=C.slice(F,j);let Z="";for(let le=0;le<z.length-1;le+=2)Z+=String.fromCharCode(z[le]+z[le+1]*256);return Z}a.prototype.slice=function(F,j){const z=this.length;F=~~F,j=j===void 0?z:~~j,F<0?(F+=z,F<0&&(F=0)):F>z&&(F=z),j<0?(j+=z,j<0&&(j=0)):j>z&&(j=z),j<F&&(j=F);const Z=this.subarray(F,j);return Object.setPrototypeOf(Z,a.prototype),Z};function fe(C,F,j){if(C%1!==0||C<0)throw new RangeError("offset is not uint");if(C+F>j)throw new RangeError("Trying to access beyond buffer length")}a.prototype.readUintLE=a.prototype.readUIntLE=function(F,j,z){F=F>>>0,j=j>>>0,z||fe(F,j,this.length);let Z=this[F],le=1,ue=0;for(;++ue<j&&(le*=256);)Z+=this[F+ue]*le;return Z},a.prototype.readUintBE=a.prototype.readUIntBE=function(F,j,z){F=F>>>0,j=j>>>0,z||fe(F,j,this.length);let Z=this[F+--j],le=1;for(;j>0&&(le*=256);)Z+=this[F+--j]*le;return Z},a.prototype.readUint8=a.prototype.readUInt8=function(F,j){return F=F>>>0,j||fe(F,1,this.length),this[F]},a.prototype.readUint16LE=a.prototype.readUInt16LE=function(F,j){return F=F>>>0,j||fe(F,2,this.length),this[F]|this[F+1]<<8},a.prototype.readUint16BE=a.prototype.readUInt16BE=function(F,j){return F=F>>>0,j||fe(F,2,this.length),this[F]<<8|this[F+1]},a.prototype.readUint32LE=a.prototype.readUInt32LE=function(F,j){return F=F>>>0,j||fe(F,4,this.length),(this[F]|this[F+1]<<8|this[F+2]<<16)+this[F+3]*16777216},a.prototype.readUint32BE=a.prototype.readUInt32BE=function(F,j){return F=F>>>0,j||fe(F,4,this.length),this[F]*16777216+(this[F+1]<<16|this[F+2]<<8|this[F+3])},a.prototype.readBigUInt64LE=Ae(function(F){F=F>>>0,x(F,"offset");const j=this[F],z=this[F+7];(j===void 0||z===void 0)&&N(F,this.length-8);const Z=j+this[++F]*2**8+this[++F]*2**16+this[++F]*2**24,le=this[++F]+this[++F]*2**8+this[++F]*2**16+z*2**24;return BigInt(Z)+(BigInt(le)<<BigInt(32))}),a.prototype.readBigUInt64BE=Ae(function(F){F=F>>>0,x(F,"offset");const j=this[F],z=this[F+7];(j===void 0||z===void 0)&&N(F,this.length-8);const Z=j*2**24+this[++F]*2**16+this[++F]*2**8+this[++F],le=this[++F]*2**24+this[++F]*2**16+this[++F]*2**8+z;return(BigInt(Z)<<BigInt(32))+BigInt(le)}),a.prototype.readIntLE=function(F,j,z){F=F>>>0,j=j>>>0,z||fe(F,j,this.length);let Z=this[F],le=1,ue=0;for(;++ue<j&&(le*=256);)Z+=this[F+ue]*le;return le*=128,Z>=le&&(Z-=Math.pow(2,8*j)),Z},a.prototype.readIntBE=function(F,j,z){F=F>>>0,j=j>>>0,z||fe(F,j,this.length);let Z=j,le=1,ue=this[F+--Z];for(;Z>0&&(le*=256);)ue+=this[F+--Z]*le;return le*=128,ue>=le&&(ue-=Math.pow(2,8*j)),ue},a.prototype.readInt8=function(F,j){return F=F>>>0,j||fe(F,1,this.length),this[F]&128?(255-this[F]+1)*-1:this[F]},a.prototype.readInt16LE=function(F,j){F=F>>>0,j||fe(F,2,this.length);const z=this[F]|this[F+1]<<8;return z&32768?z|4294901760:z},a.prototype.readInt16BE=function(F,j){F=F>>>0,j||fe(F,2,this.length);const z=this[F+1]|this[F]<<8;return z&32768?z|4294901760:z},a.prototype.readInt32LE=function(F,j){return F=F>>>0,j||fe(F,4,this.length),this[F]|this[F+1]<<8|this[F+2]<<16|this[F+3]<<24},a.prototype.readInt32BE=function(F,j){return F=F>>>0,j||fe(F,4,this.length),this[F]<<24|this[F+1]<<16|this[F+2]<<8|this[F+3]},a.prototype.readBigInt64LE=Ae(function(F){F=F>>>0,x(F,"offset");const j=this[F],z=this[F+7];(j===void 0||z===void 0)&&N(F,this.length-8);const Z=this[F+4]+this[F+5]*2**8+this[F+6]*2**16+(z<<24);return(BigInt(Z)<<BigInt(32))+BigInt(j+this[++F]*2**8+this[++F]*2**16+this[++F]*2**24)}),a.prototype.readBigInt64BE=Ae(function(F){F=F>>>0,x(F,"offset");const j=this[F],z=this[F+7];(j===void 0||z===void 0)&&N(F,this.length-8);const Z=(j<<24)+this[++F]*2**16+this[++F]*2**8+this[++F];return(BigInt(Z)<<BigInt(32))+BigInt(this[++F]*2**24+this[++F]*2**16+this[++F]*2**8+z)}),a.prototype.readFloatLE=function(F,j){return F=F>>>0,j||fe(F,4,this.length),o.read(this,F,!0,23,4)},a.prototype.readFloatBE=function(F,j){return F=F>>>0,j||fe(F,4,this.length),o.read(this,F,!1,23,4)},a.prototype.readDoubleLE=function(F,j){return F=F>>>0,j||fe(F,8,this.length),o.read(this,F,!0,52,8)},a.prototype.readDoubleBE=function(F,j){return F=F>>>0,j||fe(F,8,this.length),o.read(this,F,!1,52,8)};function me(C,F,j,z,Z,le){if(!a.isBuffer(C))throw new TypeError('"buffer" argument must be a Buffer instance');if(F>Z||F<le)throw new RangeError('"value" argument is out of bounds');if(j+z>C.length)throw new RangeError("Index out of range")}a.prototype.writeUintLE=a.prototype.writeUIntLE=function(F,j,z,Z){if(F=+F,j=j>>>0,z=z>>>0,!Z){const Pe=Math.pow(2,8*z)-1;me(this,F,j,z,Pe,0)}let le=1,ue=0;for(this[j]=F&255;++ue<z&&(le*=256);)this[j+ue]=F/le&255;return j+z},a.prototype.writeUintBE=a.prototype.writeUIntBE=function(F,j,z,Z){if(F=+F,j=j>>>0,z=z>>>0,!Z){const Pe=Math.pow(2,8*z)-1;me(this,F,j,z,Pe,0)}let le=z-1,ue=1;for(this[j+le]=F&255;--le>=0&&(ue*=256);)this[j+le]=F/ue&255;return j+z},a.prototype.writeUint8=a.prototype.writeUInt8=function(F,j,z){return F=+F,j=j>>>0,z||me(this,F,j,1,255,0),this[j]=F&255,j+1},a.prototype.writeUint16LE=a.prototype.writeUInt16LE=function(F,j,z){return F=+F,j=j>>>0,z||me(this,F,j,2,65535,0),this[j]=F&255,this[j+1]=F>>>8,j+2},a.prototype.writeUint16BE=a.prototype.writeUInt16BE=function(F,j,z){return F=+F,j=j>>>0,z||me(this,F,j,2,65535,0),this[j]=F>>>8,this[j+1]=F&255,j+2},a.prototype.writeUint32LE=a.prototype.writeUInt32LE=function(F,j,z){return F=+F,j=j>>>0,z||me(this,F,j,4,4294967295,0),this[j+3]=F>>>24,this[j+2]=F>>>16,this[j+1]=F>>>8,this[j]=F&255,j+4},a.prototype.writeUint32BE=a.prototype.writeUInt32BE=function(F,j,z){return F=+F,j=j>>>0,z||me(this,F,j,4,4294967295,0),this[j]=F>>>24,this[j+1]=F>>>16,this[j+2]=F>>>8,this[j+3]=F&255,j+4};function he(C,F,j,z,Z){D(F,z,Z,C,j,7);let le=Number(F&BigInt(4294967295));C[j++]=le,le=le>>8,C[j++]=le,le=le>>8,C[j++]=le,le=le>>8,C[j++]=le;let ue=Number(F>>BigInt(32)&BigInt(4294967295));return C[j++]=ue,ue=ue>>8,C[j++]=ue,ue=ue>>8,C[j++]=ue,ue=ue>>8,C[j++]=ue,j}function te(C,F,j,z,Z){D(F,z,Z,C,j,7);let le=Number(F&BigInt(4294967295));C[j+7]=le,le=le>>8,C[j+6]=le,le=le>>8,C[j+5]=le,le=le>>8,C[j+4]=le;let ue=Number(F>>BigInt(32)&BigInt(4294967295));return C[j+3]=ue,ue=ue>>8,C[j+2]=ue,ue=ue>>8,C[j+1]=ue,ue=ue>>8,C[j]=ue,j+8}a.prototype.writeBigUInt64LE=Ae(function(F,j=0){return he(this,F,j,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeBigUInt64BE=Ae(function(F,j=0){return te(this,F,j,BigInt(0),BigInt("0xffffffffffffffff"))}),a.prototype.writeIntLE=function(F,j,z,Z){if(F=+F,j=j>>>0,!Z){const Ve=Math.pow(2,8*z-1);me(this,F,j,z,Ve-1,-Ve)}let le=0,ue=1,Pe=0;for(this[j]=F&255;++le<z&&(ue*=256);)F<0&&Pe===0&&this[j+le-1]!==0&&(Pe=1),this[j+le]=(F/ue>>0)-Pe&255;return j+z},a.prototype.writeIntBE=function(F,j,z,Z){if(F=+F,j=j>>>0,!Z){const Ve=Math.pow(2,8*z-1);me(this,F,j,z,Ve-1,-Ve)}let le=z-1,ue=1,Pe=0;for(this[j+le]=F&255;--le>=0&&(ue*=256);)F<0&&Pe===0&&this[j+le+1]!==0&&(Pe=1),this[j+le]=(F/ue>>0)-Pe&255;return j+z},a.prototype.writeInt8=function(F,j,z){return F=+F,j=j>>>0,z||me(this,F,j,1,127,-128),F<0&&(F=255+F+1),this[j]=F&255,j+1},a.prototype.writeInt16LE=function(F,j,z){return F=+F,j=j>>>0,z||me(this,F,j,2,32767,-32768),this[j]=F&255,this[j+1]=F>>>8,j+2},a.prototype.writeInt16BE=function(F,j,z){return F=+F,j=j>>>0,z||me(this,F,j,2,32767,-32768),this[j]=F>>>8,this[j+1]=F&255,j+2},a.prototype.writeInt32LE=function(F,j,z){return F=+F,j=j>>>0,z||me(this,F,j,4,2147483647,-2147483648),this[j]=F&255,this[j+1]=F>>>8,this[j+2]=F>>>16,this[j+3]=F>>>24,j+4},a.prototype.writeInt32BE=function(F,j,z){return F=+F,j=j>>>0,z||me(this,F,j,4,2147483647,-2147483648),F<0&&(F=4294967295+F+1),this[j]=F>>>24,this[j+1]=F>>>16,this[j+2]=F>>>8,this[j+3]=F&255,j+4},a.prototype.writeBigInt64LE=Ae(function(F,j=0){return he(this,F,j,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),a.prototype.writeBigInt64BE=Ae(function(F,j=0){return te(this,F,j,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function xe(C,F,j,z,Z,le){if(j+z>C.length)throw new RangeError("Index out of range");if(j<0)throw new RangeError("Index out of range")}function Ie(C,F,j,z,Z){return F=+F,j=j>>>0,Z||xe(C,F,j,4),o.write(C,F,j,z,23,4),j+4}a.prototype.writeFloatLE=function(F,j,z){return Ie(this,F,j,!0,z)},a.prototype.writeFloatBE=function(F,j,z){return Ie(this,F,j,!1,z)};function Fe(C,F,j,z,Z){return F=+F,j=j>>>0,Z||xe(C,F,j,8),o.write(C,F,j,z,52,8),j+8}a.prototype.writeDoubleLE=function(F,j,z){return Fe(this,F,j,!0,z)},a.prototype.writeDoubleBE=function(F,j,z){return Fe(this,F,j,!1,z)},a.prototype.copy=function(F,j,z,Z){if(!a.isBuffer(F))throw new TypeError("argument should be a Buffer");if(z||(z=0),!Z&&Z!==0&&(Z=this.length),j>=F.length&&(j=F.length),j||(j=0),Z>0&&Z<z&&(Z=z),Z===z||F.length===0||this.length===0)return 0;if(j<0)throw new RangeError("targetStart out of bounds");if(z<0||z>=this.length)throw new RangeError("Index out of range");if(Z<0)throw new RangeError("sourceEnd out of bounds");Z>this.length&&(Z=this.length),F.length-j<Z-z&&(Z=F.length-j+z);const le=Z-z;return this===F&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(j,z,Z):Uint8Array.prototype.set.call(F,this.subarray(z,Z),j),le},a.prototype.fill=function(F,j,z,Z){if(typeof F=="string"){if(typeof j=="string"?(Z=j,j=0,z=this.length):typeof z=="string"&&(Z=z,z=this.length),Z!==void 0&&typeof Z!="string")throw new TypeError("encoding must be a string");if(typeof Z=="string"&&!a.isEncoding(Z))throw new TypeError("Unknown encoding: "+Z);if(F.length===1){const ue=F.charCodeAt(0);(Z==="utf8"&&ue<128||Z==="latin1")&&(F=ue)}}else typeof F=="number"?F=F&255:typeof F=="boolean"&&(F=Number(F));if(j<0||this.length<j||this.length<z)throw new RangeError("Out of range index");if(z<=j)return this;j=j>>>0,z=z===void 0?this.length:z>>>0,F||(F=0);let le;if(typeof F=="number")for(le=j;le<z;++le)this[le]=F;else{const ue=a.isBuffer(F)?F:a.from(F,Z),Pe=ue.length;if(Pe===0)throw new TypeError('The value "'+F+'" is invalid for argument "value"');for(le=0;le<z-j;++le)this[le+j]=ue[le%Pe]}return this};const pe={};function ye(C,F,j){pe[C]=class extends j{constructor(){super(),Object.defineProperty(this,"message",{value:F.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${C}]`,this.stack,delete this.name}get code(){return C}set code(Z){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:Z,writable:!0})}toString(){return`${this.name} [${C}]: ${this.message}`}}}ye("ERR_BUFFER_OUT_OF_BOUNDS",function(C){return C?`${C} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),ye("ERR_INVALID_ARG_TYPE",function(C,F){return`The "${C}" argument must be of type number. Received type ${typeof F}`},TypeError),ye("ERR_OUT_OF_RANGE",function(C,F,j){let z=`The value of "${C}" is out of range.`,Z=j;return Number.isInteger(j)&&Math.abs(j)>2**32?Z=Q(String(j)):typeof j=="bigint"&&(Z=String(j),(j>BigInt(2)**BigInt(32)||j<-(BigInt(2)**BigInt(32)))&&(Z=Q(Z)),Z+="n"),z+=` It must be ${F}. Received ${Z}`,z},RangeError);function Q(C){let F="",j=C.length;const z=C[0]==="-"?1:0;for(;j>=z+4;j-=3)F=`_${C.slice(j-3,j)}${F}`;return`${C.slice(0,j)}${F}`}function P(C,F,j){x(F,"offset"),(C[F]===void 0||C[F+j]===void 0)&&N(F,C.length-(j+1))}function D(C,F,j,z,Z,le){if(C>j||C<F){const ue=typeof F=="bigint"?"n":"";let Pe;throw F===0||F===BigInt(0)?Pe=`>= 0${ue} and < 2${ue} ** ${(le+1)*8}${ue}`:Pe=`>= -(2${ue} ** ${(le+1)*8-1}${ue}) and < 2 ** ${(le+1)*8-1}${ue}`,new pe.ERR_OUT_OF_RANGE("value",Pe,C)}P(z,Z,le)}function x(C,F){if(typeof C!="number")throw new pe.ERR_INVALID_ARG_TYPE(F,"number",C)}function N(C,F,j){throw Math.floor(C)!==C?(x(C,j),new pe.ERR_OUT_OF_RANGE("offset","an integer",C)):F<0?new pe.ERR_BUFFER_OUT_OF_BOUNDS:new pe.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${F}`,C)}const $=/[^+/0-9A-Za-z-_]/g;function G(C){if(C=C.split("=")[0],C=C.trim().replace($,""),C.length<2)return"";for(;C.length%4!==0;)C=C+"=";return C}function V(C,F){F=F||1/0;let j;const z=C.length;let Z=null;const le=[];for(let ue=0;ue<z;++ue){if(j=C.charCodeAt(ue),j>55295&&j<57344){if(!Z){if(j>56319){(F-=3)>-1&&le.push(239,191,189);continue}else if(ue+1===z){(F-=3)>-1&&le.push(239,191,189);continue}Z=j;continue}if(j<56320){(F-=3)>-1&&le.push(239,191,189),Z=j;continue}j=(Z-55296<<10|j-56320)+65536}else Z&&(F-=3)>-1&&le.push(239,191,189);if(Z=null,j<128){if((F-=1)<0)break;le.push(j)}else if(j<2048){if((F-=2)<0)break;le.push(j>>6|192,j&63|128)}else if(j<65536){if((F-=3)<0)break;le.push(j>>12|224,j>>6&63|128,j&63|128)}else if(j<1114112){if((F-=4)<0)break;le.push(j>>18|240,j>>12&63|128,j>>6&63|128,j&63|128)}else throw new Error("Invalid code point")}return le}function k(C){const F=[];for(let j=0;j<C.length;++j)F.push(C.charCodeAt(j)&255);return F}function H(C,F){let j,z,Z;const le=[];for(let ue=0;ue<C.length&&!((F-=2)<0);++ue)j=C.charCodeAt(ue),z=j>>8,Z=j%256,le.push(Z),le.push(z);return le}function Y(C){return n.toByteArray(G(C))}function se(C,F,j,z){let Z;for(Z=0;Z<z&&!(Z+j>=F.length||Z>=C.length);++Z)F[Z+j]=C[Z];return Z}function ce(C,F){return C instanceof F||C!=null&&C.constructor!=null&&C.constructor.name!=null&&C.constructor.name===F.name}function Se(C){return C!==C}const Me=(function(){const C="0123456789abcdef",F=new Array(256);for(let j=0;j<16;++j){const z=j*16;for(let Z=0;Z<16;++Z)F[z+Z]=C[j]+C[Z]}return F})();function Ae(C){return typeof BigInt>"u"?oe:C}function oe(){throw new Error("BigInt not supported")}})(xS)),xS}var IS,SR;function er(){if(SR)return IS;SR=1;class u extends Error{constructor(o){if(!Array.isArray(o))throw new TypeError(`Expected input to be an Array, got ${typeof o}`);let i="";for(let t=0;t<o.length;t++)i+=`    ${o[t].stack}
`;super(i),this.name="AggregateError",this.errors=o}}return IS={AggregateError:u,ArrayIsArray(n){return Array.isArray(n)},ArrayPrototypeIncludes(n,o){return n.includes(o)},ArrayPrototypeIndexOf(n,o){return n.indexOf(o)},ArrayPrototypeJoin(n,o){return n.join(o)},ArrayPrototypeMap(n,o){return n.map(o)},ArrayPrototypePop(n,o){return n.pop(o)},ArrayPrototypePush(n,o){return n.push(o)},ArrayPrototypeSlice(n,o,i){return n.slice(o,i)},Error,FunctionPrototypeCall(n,o,...i){return n.call(o,...i)},FunctionPrototypeSymbolHasInstance(n,o){return Function.prototype[Symbol.hasInstance].call(n,o)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(n,o){return Object.defineProperties(n,o)},ObjectDefineProperty(n,o,i){return Object.defineProperty(n,o,i)},ObjectGetOwnPropertyDescriptor(n,o){return Object.getOwnPropertyDescriptor(n,o)},ObjectKeys(n){return Object.keys(n)},ObjectSetPrototypeOf(n,o){return Object.setPrototypeOf(n,o)},Promise,PromisePrototypeCatch(n,o){return n.catch(o)},PromisePrototypeThen(n,o,i){return n.then(o,i)},PromiseReject(n){return Promise.reject(n)},PromiseResolve(n){return Promise.resolve(n)},ReflectApply:Reflect.apply,RegExpPrototypeTest(n,o){return n.test(o)},SafeSet:Set,String,StringPrototypeSlice(n,o,i){return n.slice(o,i)},StringPrototypeToLowerCase(n){return n.toLowerCase()},StringPrototypeToUpperCase(n){return n.toUpperCase()},StringPrototypeTrim(n){return n.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(n,o,i){return n.set(o,i)},Boolean,Uint8Array},IS}var RS={exports:{}},FS,AR;function Yz(){return AR||(AR=1,FS={format(u,...n){return u.replace(/%([sdifj])/g,function(...[o,i]){const t=n.shift();return i==="f"?t.toFixed(6):i==="j"?JSON.stringify(t):i==="s"&&typeof t=="object"?`${t.constructor!==Object?t.constructor.name:""} {}`.trim():t.toString()})},inspect(u){switch(typeof u){case"string":if(u.includes("'"))if(u.includes('"')){if(!u.includes("`")&&!u.includes("${"))return`\`${u}\``}else return`"${u}"`;return`'${u}'`;case"number":return isNaN(u)?"NaN":Object.is(u,-0)?String(u):u;case"bigint":return`${String(u)}n`;case"boolean":case"undefined":return String(u);case"object":return"{}"}}}),FS}var NS,OR;function Qr(){if(OR)return NS;OR=1;const{format:u,inspect:n}=Yz(),{AggregateError:o}=er(),i=globalThis.AggregateError||o,t=Symbol("kIsNodeError"),e=["string","function","number","object","Function","Object","boolean","bigint","symbol"],r=/^([A-Z][a-z0-9]*)+$/,a="__node_internal_",c={};function s(_,b){if(!_)throw new c.ERR_INTERNAL_ASSERTION(b)}function d(_){let b="",m=_.length;const g=_[0]==="-"?1:0;for(;m>=g+4;m-=3)b=`_${_.slice(m-3,m)}${b}`;return`${_.slice(0,m)}${b}`}function l(_,b,m){if(typeof b=="function")return s(b.length<=m.length,`Code: ${_}; The provided arguments length (${m.length}) does not match the required ones (${b.length}).`),b(...m);const g=(b.match(/%[dfijoOs]/g)||[]).length;return s(g===m.length,`Code: ${_}; The provided arguments length (${m.length}) does not match the required ones (${g}).`),m.length===0?b:u(b,...m)}function f(_,b,m){m||(m=Error);class g extends m{constructor(...v){super(l(_,b,v))}toString(){return`${this.name} [${_}]: ${this.message}`}}Object.defineProperties(g.prototype,{name:{value:m.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${_}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),g.prototype.code=_,g.prototype[t]=!0,c[_]=g}function h(_){const b=a+_.name;return Object.defineProperty(_,"name",{value:b}),_}function p(_,b){if(_&&b&&_!==b){if(Array.isArray(b.errors))return b.errors.push(_),b;const m=new i([b,_],b.message);return m.code=b.code,m}return _||b}class y extends Error{constructor(b="The operation was aborted",m=void 0){if(m!==void 0&&typeof m!="object")throw new c.ERR_INVALID_ARG_TYPE("options","Object",m);super(b,m),this.code="ABORT_ERR",this.name="AbortError"}}return f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",(_,b,m)=>{s(typeof _=="string","'name' must be a string"),Array.isArray(b)||(b=[b]);let g="The ";_.endsWith(" argument")?g+=`${_} `:g+=`"${_}" ${_.includes(".")?"property":"argument"} `,g+="must be ";const T=[],v=[],A=[];for(const q of b)s(typeof q=="string","All expected entries have to be of type string"),e.includes(q)?T.push(q.toLowerCase()):r.test(q)?v.push(q):(s(q!=="object",'The value "object" should be written as "Object"'),A.push(q));if(v.length>0){const q=T.indexOf("object");q!==-1&&(T.splice(T,q,1),v.push("Object"))}if(T.length>0){switch(T.length){case 1:g+=`of type ${T[0]}`;break;case 2:g+=`one of type ${T[0]} or ${T[1]}`;break;default:{const q=T.pop();g+=`one of type ${T.join(", ")}, or ${q}`}}(v.length>0||A.length>0)&&(g+=" or ")}if(v.length>0){switch(v.length){case 1:g+=`an instance of ${v[0]}`;break;case 2:g+=`an instance of ${v[0]} or ${v[1]}`;break;default:{const q=v.pop();g+=`an instance of ${v.join(", ")}, or ${q}`}}A.length>0&&(g+=" or ")}switch(A.length){case 0:break;case 1:A[0].toLowerCase()!==A[0]&&(g+="an "),g+=`${A[0]}`;break;case 2:g+=`one of ${A[0]} or ${A[1]}`;break;default:{const q=A.pop();g+=`one of ${A.join(", ")}, or ${q}`}}if(m==null)g+=`. Received ${m}`;else if(typeof m=="function"&&m.name)g+=`. Received function ${m.name}`;else if(typeof m=="object"){var I;if((I=m.constructor)!==null&&I!==void 0&&I.name)g+=`. Received an instance of ${m.constructor.name}`;else{const q=n(m,{depth:-1});g+=`. Received ${q}`}}else{let q=n(m,{colors:!1});q.length>25&&(q=`${q.slice(0,25)}...`),g+=`. Received type ${typeof m} (${q})`}return g},TypeError),f("ERR_INVALID_ARG_VALUE",(_,b,m="is invalid")=>{let g=n(b);return g.length>128&&(g=g.slice(0,128)+"..."),`The ${_.includes(".")?"property":"argument"} '${_}' ${m}. Received ${g}`},TypeError),f("ERR_INVALID_RETURN_VALUE",(_,b,m)=>{var g;const T=m!=null&&(g=m.constructor)!==null&&g!==void 0&&g.name?`instance of ${m.constructor.name}`:`type ${typeof m}`;return`Expected ${_} to be returned from the "${b}" function but got ${T}.`},TypeError),f("ERR_MISSING_ARGS",(..._)=>{s(_.length>0,"At least one arg needs to be specified");let b;const m=_.length;switch(_=(Array.isArray(_)?_:[_]).map(g=>`"${g}"`).join(" or "),m){case 1:b+=`The ${_[0]} argument`;break;case 2:b+=`The ${_[0]} and ${_[1]} arguments`;break;default:{const g=_.pop();b+=`The ${_.join(", ")}, and ${g} arguments`}break}return`${b} must be specified`},TypeError),f("ERR_OUT_OF_RANGE",(_,b,m)=>{s(b,'Missing "range" argument');let g;if(Number.isInteger(m)&&Math.abs(m)>2**32)g=d(String(m));else if(typeof m=="bigint"){g=String(m);const T=BigInt(2)**BigInt(32);(m>T||m<-T)&&(g=d(g)),g+="n"}else g=n(m);return`The value of "${_}" is out of range. It must be ${b}. Received ${g}`},RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),NS={AbortError:y,aggregateTwoErrors:h(p),hideStackFrames:h,codes:c},NS}var zh={exports:{}},ER;function cv(){if(ER)return zh.exports;ER=1;const{AbortController:u,AbortSignal:n}=typeof self<"u"?self:typeof window<"u"?window:void 0;return zh.exports=u,zh.exports.AbortSignal=n,zh.exports.default=u,zh.exports}var xR;function Jr(){return xR||(xR=1,(function(u){const n=ni(),{format:o,inspect:i}=Yz(),{codes:{ERR_INVALID_ARG_TYPE:t}}=Qr(),{kResistStopPropagation:e,AggregateError:r,SymbolDispose:a}=er(),c=globalThis.AbortSignal||cv().AbortSignal,s=globalThis.AbortController||cv().AbortController,d=Object.getPrototypeOf(async function(){}).constructor,l=globalThis.Blob||n.Blob,f=typeof l<"u"?function(_){return _ instanceof l}:function(_){return!1},h=(y,_)=>{if(y!==void 0&&(y===null||typeof y!="object"||!("aborted"in y)))throw new t(_,"AbortSignal",y)},p=(y,_)=>{if(typeof y!="function")throw new t(_,"Function",y)};u.exports={AggregateError:r,kEmptyObject:Object.freeze({}),once(y){let _=!1;return function(...b){_||(_=!0,y.apply(this,b))}},createDeferredPromise:function(){let y,_;return{promise:new Promise((m,g)=>{y=m,_=g}),resolve:y,reject:_}},promisify(y){return new Promise((_,b)=>{y((m,...g)=>m?b(m):_(...g))})},debuglog(){return function(){}},format:o,inspect:i,types:{isAsyncFunction(y){return y instanceof d},isArrayBufferView(y){return ArrayBuffer.isView(y)}},isBlob:f,deprecate(y,_){return y},addAbortListener:Nv().addAbortListener||function(_,b){if(_===void 0)throw new t("signal","AbortSignal",_);h(_,"signal"),p(b,"listener");let m;return _.aborted?queueMicrotask(()=>b()):(_.addEventListener("abort",b,{__proto__:null,once:!0,[e]:!0}),m=()=>{_.removeEventListener("abort",b)}),{__proto__:null,[a](){var g;(g=m)===null||g===void 0||g()}}},AbortSignalAny:c.any||function(_){if(_.length===1)return _[0];const b=new s,m=()=>b.abort();return _.forEach(g=>{h(g,"signals"),g.addEventListener("abort",m,{once:!0})}),b.signal.addEventListener("abort",()=>{_.forEach(g=>g.removeEventListener("abort",m))},{once:!0}),b.signal}},u.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(RS)),RS.exports}var hT={},PS,IR;function jv(){if(IR)return PS;IR=1;const{ArrayIsArray:u,ArrayPrototypeIncludes:n,ArrayPrototypeJoin:o,ArrayPrototypeMap:i,NumberIsInteger:t,NumberIsNaN:e,NumberMAX_SAFE_INTEGER:r,NumberMIN_SAFE_INTEGER:a,NumberParseInt:c,ObjectPrototypeHasOwnProperty:s,RegExpPrototypeExec:d,String:l,StringPrototypeToUpperCase:f,StringPrototypeTrim:h}=er(),{hideStackFrames:p,codes:{ERR_SOCKET_BAD_PORT:y,ERR_INVALID_ARG_TYPE:_,ERR_INVALID_ARG_VALUE:b,ERR_OUT_OF_RANGE:m,ERR_UNKNOWN_SIGNAL:g}}=Qr(),{normalizeEncoding:T}=Jr(),{isAsyncFunction:v,isArrayBufferView:A}=Jr().types,I={};function q(H){return H===(H|0)}function O(H){return H===H>>>0}const w=/^[0-7]+$/,S="must be a 32-bit unsigned integer or an octal string";function E(H,Y,se){if(typeof H>"u"&&(H=se),typeof H=="string"){if(d(w,H)===null)throw new b(Y,H,S);H=c(H,8)}return M(H,Y),H}const R=p((H,Y,se=a,ce=r)=>{if(typeof H!="number")throw new _(Y,"number",H);if(!t(H))throw new m(Y,"an integer",H);if(H<se||H>ce)throw new m(Y,`>= ${se} && <= ${ce}`,H)}),L=p((H,Y,se=-2147483648,ce=2147483647)=>{if(typeof H!="number")throw new _(Y,"number",H);if(!t(H))throw new m(Y,"an integer",H);if(H<se||H>ce)throw new m(Y,`>= ${se} && <= ${ce}`,H)}),M=p((H,Y,se=!1)=>{if(typeof H!="number")throw new _(Y,"number",H);if(!t(H))throw new m(Y,"an integer",H);const ce=se?1:0,Se=4294967295;if(H<ce||H>Se)throw new m(Y,`>= ${ce} && <= ${Se}`,H)});function B(H,Y){if(typeof H!="string")throw new _(Y,"string",H)}function X(H,Y,se=void 0,ce){if(typeof H!="number")throw new _(Y,"number",H);if(se!=null&&H<se||ce!=null&&H>ce||(se!=null||ce!=null)&&e(H))throw new m(Y,`${se!=null?`>= ${se}`:""}${se!=null&&ce!=null?" && ":""}${ce!=null?`<= ${ce}`:""}`,H)}const J=p((H,Y,se)=>{if(!n(se,H)){const Se="must be one of: "+o(i(se,Me=>typeof Me=="string"?`'${Me}'`:l(Me)),", ");throw new b(Y,H,Se)}});function ie(H,Y){if(typeof H!="boolean")throw new _(Y,"boolean",H)}function U(H,Y,se){return H==null||!s(H,Y)?se:H[Y]}const fe=p((H,Y,se=null)=>{const ce=U(se,"allowArray",!1),Se=U(se,"allowFunction",!1);if(!U(se,"nullable",!1)&&H===null||!ce&&u(H)||typeof H!="object"&&(!Se||typeof H!="function"))throw new _(Y,"Object",H)}),me=p((H,Y)=>{if(H!=null&&typeof H!="object"&&typeof H!="function")throw new _(Y,"a dictionary",H)}),he=p((H,Y,se=0)=>{if(!u(H))throw new _(Y,"Array",H);if(H.length<se){const ce=`must be longer than ${se}`;throw new b(Y,H,ce)}});function te(H,Y){he(H,Y);for(let se=0;se<H.length;se++)B(H[se],`${Y}[${se}]`)}function xe(H,Y){he(H,Y);for(let se=0;se<H.length;se++)ie(H[se],`${Y}[${se}]`)}function Ie(H,Y){he(H,Y);for(let se=0;se<H.length;se++){const ce=H[se],Se=`${Y}[${se}]`;if(ce==null)throw new _(Se,"AbortSignal",ce);P(ce,Se)}}function Fe(H,Y="signal"){if(B(H,Y),I[H]===void 0)throw I[f(H)]!==void 0?new g(H+" (signals must use all capital letters)"):new g(H)}const pe=p((H,Y="buffer")=>{if(!A(H))throw new _(Y,["Buffer","TypedArray","DataView"],H)});function ye(H,Y){const se=T(Y),ce=H.length;if(se==="hex"&&ce%2!==0)throw new b("encoding",Y,`is invalid for data of length ${ce}`)}function Q(H,Y="Port",se=!0){if(typeof H!="number"&&typeof H!="string"||typeof H=="string"&&h(H).length===0||+H!==+H>>>0||H>65535||H===0&&!se)throw new y(Y,H,se);return H|0}const P=p((H,Y)=>{if(H!==void 0&&(H===null||typeof H!="object"||!("aborted"in H)))throw new _(Y,"AbortSignal",H)}),D=p((H,Y)=>{if(typeof H!="function")throw new _(Y,"Function",H)}),x=p((H,Y)=>{if(typeof H!="function"||v(H))throw new _(Y,"Function",H)}),N=p((H,Y)=>{if(H!==void 0)throw new _(Y,"undefined",H)});function $(H,Y,se){if(!n(se,H))throw new _(Y,`('${o(se,"|")}')`,H)}const G=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function V(H,Y){if(typeof H>"u"||!d(G,H))throw new b(Y,H,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function k(H){if(typeof H=="string")return V(H,"hints"),H;if(u(H)){const Y=H.length;let se="";if(Y===0)return se;for(let ce=0;ce<Y;ce++){const Se=H[ce];V(Se,"hints"),se+=Se,ce!==Y-1&&(se+=", ")}return se}throw new b("hints",H,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return PS={isInt32:q,isUint32:O,parseFileMode:E,validateArray:he,validateStringArray:te,validateBooleanArray:xe,validateAbortSignalArray:Ie,validateBoolean:ie,validateBuffer:pe,validateDictionary:me,validateEncoding:ye,validateFunction:D,validateInt32:L,validateInteger:R,validateNumber:X,validateObject:fe,validateOneOf:J,validatePlainFunction:x,validatePort:Q,validateSignalName:Fe,validateString:B,validateUint32:M,validateUndefined:N,validateUnion:$,validateAbortSignal:P,validateLinkHeaderValue:k},PS}var pT={exports:{}},DS,RR;function Fi(){if(RR)return DS;RR=1;const{SymbolAsyncIterator:u,SymbolIterator:n,SymbolFor:o}=er(),i=o("nodejs.stream.destroyed"),t=o("nodejs.stream.errored"),e=o("nodejs.stream.readable"),r=o("nodejs.stream.writable"),a=o("nodejs.stream.disturbed"),c=o("nodejs.webstream.isClosedPromise"),s=o("nodejs.webstream.controllerErrorFunction");function d(U,fe=!1){var me;return!!(U&&typeof U.pipe=="function"&&typeof U.on=="function"&&(!fe||typeof U.pause=="function"&&typeof U.resume=="function")&&(!U._writableState||((me=U._readableState)===null||me===void 0?void 0:me.readable)!==!1)&&(!U._writableState||U._readableState))}function l(U){var fe;return!!(U&&typeof U.write=="function"&&typeof U.on=="function"&&(!U._readableState||((fe=U._writableState)===null||fe===void 0?void 0:fe.writable)!==!1))}function f(U){return!!(U&&typeof U.pipe=="function"&&U._readableState&&typeof U.on=="function"&&typeof U.write=="function")}function h(U){return U&&(U._readableState||U._writableState||typeof U.write=="function"&&typeof U.on=="function"||typeof U.pipe=="function"&&typeof U.on=="function")}function p(U){return!!(U&&!h(U)&&typeof U.pipeThrough=="function"&&typeof U.getReader=="function"&&typeof U.cancel=="function")}function y(U){return!!(U&&!h(U)&&typeof U.getWriter=="function"&&typeof U.abort=="function")}function _(U){return!!(U&&!h(U)&&typeof U.readable=="object"&&typeof U.writable=="object")}function b(U){return p(U)||y(U)||_(U)}function m(U,fe){return U==null?!1:fe===!0?typeof U[u]=="function":fe===!1?typeof U[n]=="function":typeof U[u]=="function"||typeof U[n]=="function"}function g(U){if(!h(U))return null;const fe=U._writableState,me=U._readableState,he=fe||me;return!!(U.destroyed||U[i]||he!=null&&he.destroyed)}function T(U){if(!l(U))return null;if(U.writableEnded===!0)return!0;const fe=U._writableState;return fe!=null&&fe.errored?!1:typeof(fe==null?void 0:fe.ended)!="boolean"?null:fe.ended}function v(U,fe){if(!l(U))return null;if(U.writableFinished===!0)return!0;const me=U._writableState;return me!=null&&me.errored?!1:typeof(me==null?void 0:me.finished)!="boolean"?null:!!(me.finished||fe===!1&&me.ended===!0&&me.length===0)}function A(U){if(!d(U))return null;if(U.readableEnded===!0)return!0;const fe=U._readableState;return!fe||fe.errored?!1:typeof(fe==null?void 0:fe.ended)!="boolean"?null:fe.ended}function I(U,fe){if(!d(U))return null;const me=U._readableState;return me!=null&&me.errored?!1:typeof(me==null?void 0:me.endEmitted)!="boolean"?null:!!(me.endEmitted||fe===!1&&me.ended===!0&&me.length===0)}function q(U){return U&&U[e]!=null?U[e]:typeof(U==null?void 0:U.readable)!="boolean"?null:g(U)?!1:d(U)&&U.readable&&!I(U)}function O(U){return U&&U[r]!=null?U[r]:typeof(U==null?void 0:U.writable)!="boolean"?null:g(U)?!1:l(U)&&U.writable&&!T(U)}function w(U,fe){return h(U)?g(U)?!0:!((fe==null?void 0:fe.readable)!==!1&&q(U)||(fe==null?void 0:fe.writable)!==!1&&O(U)):null}function S(U){var fe,me;return h(U)?U.writableErrored?U.writableErrored:(fe=(me=U._writableState)===null||me===void 0?void 0:me.errored)!==null&&fe!==void 0?fe:null:null}function E(U){var fe,me;return h(U)?U.readableErrored?U.readableErrored:(fe=(me=U._readableState)===null||me===void 0?void 0:me.errored)!==null&&fe!==void 0?fe:null:null}function R(U){if(!h(U))return null;if(typeof U.closed=="boolean")return U.closed;const fe=U._writableState,me=U._readableState;return typeof(fe==null?void 0:fe.closed)=="boolean"||typeof(me==null?void 0:me.closed)=="boolean"?(fe==null?void 0:fe.closed)||(me==null?void 0:me.closed):typeof U._closed=="boolean"&&L(U)?U._closed:null}function L(U){return typeof U._closed=="boolean"&&typeof U._defaultKeepAlive=="boolean"&&typeof U._removedConnection=="boolean"&&typeof U._removedContLen=="boolean"}function M(U){return typeof U._sent100=="boolean"&&L(U)}function B(U){var fe;return typeof U._consuming=="boolean"&&typeof U._dumped=="boolean"&&((fe=U.req)===null||fe===void 0?void 0:fe.upgradeOrConnect)===void 0}function X(U){if(!h(U))return null;const fe=U._writableState,me=U._readableState,he=fe||me;return!he&&M(U)||!!(he&&he.autoDestroy&&he.emitClose&&he.closed===!1)}function J(U){var fe;return!!(U&&((fe=U[a])!==null&&fe!==void 0?fe:U.readableDidRead||U.readableAborted))}function ie(U){var fe,me,he,te,xe,Ie,Fe,pe,ye,Q;return!!(U&&((fe=(me=(he=(te=(xe=(Ie=U[t])!==null&&Ie!==void 0?Ie:U.readableErrored)!==null&&xe!==void 0?xe:U.writableErrored)!==null&&te!==void 0?te:(Fe=U._readableState)===null||Fe===void 0?void 0:Fe.errorEmitted)!==null&&he!==void 0?he:(pe=U._writableState)===null||pe===void 0?void 0:pe.errorEmitted)!==null&&me!==void 0?me:(ye=U._readableState)===null||ye===void 0?void 0:ye.errored)!==null&&fe!==void 0?fe:!((Q=U._writableState)===null||Q===void 0)&&Q.errored))}return DS={isDestroyed:g,kIsDestroyed:i,isDisturbed:J,kIsDisturbed:a,isErrored:ie,kIsErrored:t,isReadable:q,kIsReadable:e,kIsClosedPromise:c,kControllerErrorFunction:s,kIsWritable:r,isClosed:R,isDuplexNodeStream:f,isFinished:w,isIterable:m,isReadableNodeStream:d,isReadableStream:p,isReadableEnded:A,isReadableFinished:I,isReadableErrored:E,isNodeStream:h,isWebStream:b,isWritable:O,isWritableNodeStream:l,isWritableStream:y,isWritableEnded:T,isWritableFinished:v,isWritableErrored:S,isServerRequest:B,isServerResponse:M,willEmitClose:X,isTransformStream:_},DS}var FR;function na(){if(FR)return pT.exports;FR=1;const u=ta(),{AbortError:n,codes:o}=Qr(),{ERR_INVALID_ARG_TYPE:i,ERR_STREAM_PREMATURE_CLOSE:t}=o,{kEmptyObject:e,once:r}=Jr(),{validateAbortSignal:a,validateFunction:c,validateObject:s,validateBoolean:d}=jv(),{Promise:l,PromisePrototypeThen:f,SymbolDispose:h}=er(),{isClosed:p,isReadable:y,isReadableNodeStream:_,isReadableStream:b,isReadableFinished:m,isReadableErrored:g,isWritable:T,isWritableNodeStream:v,isWritableStream:A,isWritableFinished:I,isWritableErrored:q,isNodeStream:O,willEmitClose:w,kIsClosedPromise:S}=Fi();let E;function R(J){return J.setHeader&&typeof J.abort=="function"}const L=()=>{};function M(J,ie,U){var fe,me;if(arguments.length===2?(U=ie,ie=e):ie==null?ie=e:s(ie,"options"),c(U,"callback"),a(ie.signal,"options.signal"),U=r(U),b(J)||A(J))return B(J,ie,U);if(!O(J))throw new i("stream",["ReadableStream","WritableStream","Stream"],J);const he=(fe=ie.readable)!==null&&fe!==void 0?fe:_(J),te=(me=ie.writable)!==null&&me!==void 0?me:v(J),xe=J._writableState,Ie=J._readableState,Fe=()=>{J.writable||Q()};let pe=w(J)&&_(J)===he&&v(J)===te,ye=I(J,!1);const Q=()=>{ye=!0,J.destroyed&&(pe=!1),!(pe&&(!J.readable||he))&&(!he||P)&&U.call(J)};let P=m(J,!1);const D=()=>{P=!0,J.destroyed&&(pe=!1),!(pe&&(!J.writable||te))&&(!te||ye)&&U.call(J)},x=H=>{U.call(J,H)};let N=p(J);const $=()=>{N=!0;const H=q(J)||g(J);if(H&&typeof H!="boolean")return U.call(J,H);if(he&&!P&&_(J,!0)&&!m(J,!1))return U.call(J,new t);if(te&&!ye&&!I(J,!1))return U.call(J,new t);U.call(J)},G=()=>{N=!0;const H=q(J)||g(J);if(H&&typeof H!="boolean")return U.call(J,H);U.call(J)},V=()=>{J.req.on("finish",Q)};R(J)?(J.on("complete",Q),pe||J.on("abort",$),J.req?V():J.on("request",V)):te&&!xe&&(J.on("end",Fe),J.on("close",Fe)),!pe&&typeof J.aborted=="boolean"&&J.on("aborted",$),J.on("end",D),J.on("finish",Q),ie.error!==!1&&J.on("error",x),J.on("close",$),N?u.nextTick($):xe!=null&&xe.errorEmitted||Ie!=null&&Ie.errorEmitted?pe||u.nextTick(G):(!he&&(!pe||y(J))&&(ye||T(J)===!1)||!te&&(!pe||T(J))&&(P||y(J)===!1)||Ie&&J.req&&J.aborted)&&u.nextTick(G);const k=()=>{U=L,J.removeListener("aborted",$),J.removeListener("complete",Q),J.removeListener("abort",$),J.removeListener("request",V),J.req&&J.req.removeListener("finish",Q),J.removeListener("end",Fe),J.removeListener("close",Fe),J.removeListener("finish",Q),J.removeListener("end",D),J.removeListener("error",x),J.removeListener("close",$)};if(ie.signal&&!N){const H=()=>{const Y=U;k(),Y.call(J,new n(void 0,{cause:ie.signal.reason}))};if(ie.signal.aborted)u.nextTick(H);else{E=E||Jr().addAbortListener;const Y=E(ie.signal,H),se=U;U=r((...ce)=>{Y[h](),se.apply(J,ce)})}}return k}function B(J,ie,U){let fe=!1,me=L;if(ie.signal)if(me=()=>{fe=!0,U.call(J,new n(void 0,{cause:ie.signal.reason}))},ie.signal.aborted)u.nextTick(me);else{E=E||Jr().addAbortListener;const te=E(ie.signal,me),xe=U;U=r((...Ie)=>{te[h](),xe.apply(J,Ie)})}const he=(...te)=>{fe||u.nextTick(()=>U.apply(J,te))};return f(J[S].promise,he,he),L}function X(J,ie){var U;let fe=!1;return ie===null&&(ie=e),(U=ie)!==null&&U!==void 0&&U.cleanup&&(d(ie.cleanup,"cleanup"),fe=ie.cleanup),new l((me,he)=>{const te=M(J,ie,xe=>{fe&&te(),xe?he(xe):me()})})}return pT.exports=M,pT.exports.finished=X,pT.exports}var jS,NR;function Gf(){if(NR)return jS;NR=1;const u=ta(),{aggregateTwoErrors:n,codes:{ERR_MULTIPLE_CALLBACK:o},AbortError:i}=Qr(),{Symbol:t}=er(),{kIsDestroyed:e,isDestroyed:r,isFinished:a,isServerRequest:c}=Fi(),s=t("kDestroy"),d=t("kConstruct");function l(w,S,E){w&&(w.stack,S&&!S.errored&&(S.errored=w),E&&!E.errored&&(E.errored=w))}function f(w,S){const E=this._readableState,R=this._writableState,L=R||E;return R!=null&&R.destroyed||E!=null&&E.destroyed?(typeof S=="function"&&S(),this):(l(w,R,E),R&&(R.destroyed=!0),E&&(E.destroyed=!0),L.constructed?h(this,w,S):this.once(s,function(M){h(this,n(M,w),S)}),this)}function h(w,S,E){let R=!1;function L(M){if(R)return;R=!0;const B=w._readableState,X=w._writableState;l(M,X,B),X&&(X.closed=!0),B&&(B.closed=!0),typeof E=="function"&&E(M),M?u.nextTick(p,w,M):u.nextTick(y,w)}try{w._destroy(S||null,L)}catch(M){L(M)}}function p(w,S){_(w,S),y(w)}function y(w){const S=w._readableState,E=w._writableState;E&&(E.closeEmitted=!0),S&&(S.closeEmitted=!0),(E!=null&&E.emitClose||S!=null&&S.emitClose)&&w.emit("close")}function _(w,S){const E=w._readableState,R=w._writableState;R!=null&&R.errorEmitted||E!=null&&E.errorEmitted||(R&&(R.errorEmitted=!0),E&&(E.errorEmitted=!0),w.emit("error",S))}function b(){const w=this._readableState,S=this._writableState;w&&(w.constructed=!0,w.closed=!1,w.closeEmitted=!1,w.destroyed=!1,w.errored=null,w.errorEmitted=!1,w.reading=!1,w.ended=w.readable===!1,w.endEmitted=w.readable===!1),S&&(S.constructed=!0,S.destroyed=!1,S.closed=!1,S.closeEmitted=!1,S.errored=null,S.errorEmitted=!1,S.finalCalled=!1,S.prefinished=!1,S.ended=S.writable===!1,S.ending=S.writable===!1,S.finished=S.writable===!1)}function m(w,S,E){const R=w._readableState,L=w._writableState;if(L!=null&&L.destroyed||R!=null&&R.destroyed)return this;R!=null&&R.autoDestroy||L!=null&&L.autoDestroy?w.destroy(S):S&&(S.stack,L&&!L.errored&&(L.errored=S),R&&!R.errored&&(R.errored=S),E?u.nextTick(_,w,S):_(w,S))}function g(w,S){if(typeof w._construct!="function")return;const E=w._readableState,R=w._writableState;E&&(E.constructed=!1),R&&(R.constructed=!1),w.once(d,S),!(w.listenerCount(d)>1)&&u.nextTick(T,w)}function T(w){let S=!1;function E(R){if(S){m(w,R??new o);return}S=!0;const L=w._readableState,M=w._writableState,B=M||L;L&&(L.constructed=!0),M&&(M.constructed=!0),B.destroyed?w.emit(s,R):R?m(w,R,!0):u.nextTick(v,w)}try{w._construct(R=>{u.nextTick(E,R)})}catch(R){u.nextTick(E,R)}}function v(w){w.emit(d)}function A(w){return(w==null?void 0:w.setHeader)&&typeof w.abort=="function"}function I(w){w.emit("close")}function q(w,S){w.emit("error",S),u.nextTick(I,w)}function O(w,S){!w||r(w)||(!S&&!a(w)&&(S=new i),c(w)?(w.socket=null,w.destroy(S)):A(w)?w.abort():A(w.req)?w.req.abort():typeof w.destroy=="function"?w.destroy(S):typeof w.close=="function"?w.close():S?u.nextTick(q,w,S):u.nextTick(I,w),w.destroyed||(w[e]=!0))}return jS={construct:g,destroyer:O,destroy:f,undestroy:b,errorOrDestroy:m},jS}var LS,PR;function DO(){if(PR)return LS;PR=1;const{ArrayIsArray:u,ObjectSetPrototypeOf:n}=er(),{EventEmitter:o}=Nv();function i(e){o.call(this,e)}n(i.prototype,o.prototype),n(i,o),i.prototype.pipe=function(e,r){const a=this;function c(y){e.writable&&e.write(y)===!1&&a.pause&&a.pause()}a.on("data",c);function s(){a.readable&&a.resume&&a.resume()}e.on("drain",s),!e._isStdio&&(!r||r.end!==!1)&&(a.on("end",l),a.on("close",f));let d=!1;function l(){d||(d=!0,e.end())}function f(){d||(d=!0,typeof e.destroy=="function"&&e.destroy())}function h(y){p(),o.listenerCount(this,"error")===0&&this.emit("error",y)}t(a,"error",h),t(e,"error",h);function p(){a.removeListener("data",c),e.removeListener("drain",s),a.removeListener("end",l),a.removeListener("close",f),a.removeListener("error",h),e.removeListener("error",h),a.removeListener("end",p),a.removeListener("close",p),e.removeListener("close",p)}return a.on("end",p),a.on("close",p),e.on("close",p),e.emit("pipe",a),e};function t(e,r,a){if(typeof e.prependListener=="function")return e.prependListener(r,a);!e._events||!e._events[r]?e.on(r,a):u(e._events[r])?e._events[r].unshift(a):e._events[r]=[a,e._events[r]]}return LS={Stream:i,prependListener:t},LS}var MS={exports:{}},DR;function Mw(){return DR||(DR=1,(function(u){const{SymbolDispose:n}=er(),{AbortError:o,codes:i}=Qr(),{isNodeStream:t,isWebStream:e,kControllerErrorFunction:r}=Fi(),a=na(),{ERR_INVALID_ARG_TYPE:c}=i;let s;const d=(l,f)=>{if(typeof l!="object"||!("aborted"in l))throw new c(f,"AbortSignal",l)};u.exports.addAbortSignal=function(f,h){if(d(f,"signal"),!t(h)&&!e(h))throw new c("stream",["ReadableStream","WritableStream","Stream"],h);return u.exports.addAbortSignalNoValidate(f,h)},u.exports.addAbortSignalNoValidate=function(l,f){if(typeof l!="object"||!("aborted"in l))return f;const h=t(f)?()=>{f.destroy(new o(void 0,{cause:l.reason}))}:()=>{f[r](new o(void 0,{cause:l.reason}))};if(l.aborted)h();else{s=s||Jr().addAbortListener;const p=s(l,h);a(f,p[n])}return f}})(MS)),MS.exports}var CS,jR;function hee(){if(jR)return CS;jR=1;const{StringPrototypeSlice:u,SymbolIterator:n,TypedArrayPrototypeSet:o,Uint8Array:i}=er(),{Buffer:t}=ni(),{inspect:e}=Jr();return CS=class{constructor(){this.head=null,this.tail=null,this.length=0}push(a){const c={data:a,next:null};this.length>0?this.tail.next=c:this.head=c,this.tail=c,++this.length}unshift(a){const c={data:a,next:this.head};this.length===0&&(this.tail=c),this.head=c,++this.length}shift(){if(this.length===0)return;const a=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,a}clear(){this.head=this.tail=null,this.length=0}join(a){if(this.length===0)return"";let c=this.head,s=""+c.data;for(;(c=c.next)!==null;)s+=a+c.data;return s}concat(a){if(this.length===0)return t.alloc(0);const c=t.allocUnsafe(a>>>0);let s=this.head,d=0;for(;s;)o(c,s.data,d),d+=s.data.length,s=s.next;return c}consume(a,c){const s=this.head.data;if(a<s.length){const d=s.slice(0,a);return this.head.data=s.slice(a),d}return a===s.length?this.shift():c?this._getString(a):this._getBuffer(a)}first(){return this.head.data}*[n](){for(let a=this.head;a;a=a.next)yield a.data}_getString(a){let c="",s=this.head,d=0;do{const l=s.data;if(a>l.length)c+=l,a-=l.length;else{a===l.length?(c+=l,++d,s.next?this.head=s.next:this.head=this.tail=null):(c+=u(l,0,a),this.head=s,s.data=u(l,a));break}++d}while((s=s.next)!==null);return this.length-=d,c}_getBuffer(a){const c=t.allocUnsafe(a),s=a;let d=this.head,l=0;do{const f=d.data;if(a>f.length)o(c,f,s-a),a-=f.length;else{a===f.length?(o(c,f,s-a),++l,d.next?this.head=d.next:this.head=this.tail=null):(o(c,new i(f.buffer,f.byteOffset,a),s-a),this.head=d,d.data=f.slice(a));break}++l}while((d=d.next)!==null);return this.length-=l,c}[Symbol.for("nodejs.util.inspect.custom")](a,c){return e(this,{...c,depth:0,customInspect:!1})}},CS}var qS,LR;function Cw(){if(LR)return qS;LR=1;const{MathFloor:u,NumberIsInteger:n}=er(),{validateInteger:o}=jv(),{ERR_INVALID_ARG_VALUE:i}=Qr().codes;let t=16*1024,e=16;function r(d,l,f){return d.highWaterMark!=null?d.highWaterMark:l?d[f]:null}function a(d){return d?e:t}function c(d,l){o(l,"value",0),d?e=l:t=l}function s(d,l,f,h){const p=r(l,h,f);if(p!=null){if(!n(p)||p<0){const y=h?`options.${f}`:"options.highWaterMark";throw new i(y,p)}return u(p)}return a(d.objectMode)}return qS={getHighWaterMark:s,getDefaultHighWaterMark:a,setDefaultHighWaterMark:c},qS}var BS={},bT={exports:{}};/*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */var MR;function pee(){return MR||(MR=1,(function(u,n){var o=ni(),i=o.Buffer;function t(r,a){for(var c in r)a[c]=r[c]}i.from&&i.alloc&&i.allocUnsafe&&i.allocUnsafeSlow?u.exports=o:(t(o,n),n.Buffer=e);function e(r,a,c){return i(r,a,c)}e.prototype=Object.create(i.prototype),t(i,e),e.from=function(r,a,c){if(typeof r=="number")throw new TypeError("Argument must not be a number");return i(r,a,c)},e.alloc=function(r,a,c){if(typeof r!="number")throw new TypeError("Argument must be a number");var s=i(r);return a!==void 0?typeof c=="string"?s.fill(a,c):s.fill(a):s.fill(0),s},e.allocUnsafe=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return i(r)},e.allocUnsafeSlow=function(r){if(typeof r!="number")throw new TypeError("Argument must be a number");return o.SlowBuffer(r)}})(bT,bT.exports)),bT.exports}var CR;function bee(){if(CR)return BS;CR=1;var u=pee().Buffer,n=u.isEncoding||function(b){switch(b=""+b,b&&b.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function o(b){if(!b)return"utf8";for(var m;;)switch(b){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return b;default:if(m)return;b=(""+b).toLowerCase(),m=!0}}function i(b){var m=o(b);if(typeof m!="string"&&(u.isEncoding===n||!n(b)))throw new Error("Unknown encoding: "+b);return m||b}BS.StringDecoder=t;function t(b){this.encoding=i(b);var m;switch(this.encoding){case"utf16le":this.text=l,this.end=f,m=4;break;case"utf8":this.fillLast=c,m=4;break;case"base64":this.text=h,this.end=p,m=3;break;default:this.write=y,this.end=_;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=u.allocUnsafe(m)}t.prototype.write=function(b){if(b.length===0)return"";var m,g;if(this.lastNeed){if(m=this.fillLast(b),m===void 0)return"";g=this.lastNeed,this.lastNeed=0}else g=0;return g<b.length?m?m+this.text(b,g):this.text(b,g):m||""},t.prototype.end=d,t.prototype.text=s,t.prototype.fillLast=function(b){if(this.lastNeed<=b.length)return b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,this.lastTotal-this.lastNeed,0,b.length),this.lastNeed-=b.length};function e(b){return b<=127?0:b>>5===6?2:b>>4===14?3:b>>3===30?4:b>>6===2?-1:-2}function r(b,m,g){var T=m.length-1;if(T<g)return 0;var v=e(m[T]);return v>=0?(v>0&&(b.lastNeed=v-1),v):--T<g||v===-2?0:(v=e(m[T]),v>=0?(v>0&&(b.lastNeed=v-2),v):--T<g||v===-2?0:(v=e(m[T]),v>=0?(v>0&&(v===2?v=0:b.lastNeed=v-3),v):0))}function a(b,m,g){if((m[0]&192)!==128)return b.lastNeed=0,"";if(b.lastNeed>1&&m.length>1){if((m[1]&192)!==128)return b.lastNeed=1,"";if(b.lastNeed>2&&m.length>2&&(m[2]&192)!==128)return b.lastNeed=2,""}}function c(b){var m=this.lastTotal-this.lastNeed,g=a(this,b);if(g!==void 0)return g;if(this.lastNeed<=b.length)return b.copy(this.lastChar,m,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);b.copy(this.lastChar,m,0,b.length),this.lastNeed-=b.length}function s(b,m){var g=r(this,b,m);if(!this.lastNeed)return b.toString("utf8",m);this.lastTotal=g;var T=b.length-(g-this.lastNeed);return b.copy(this.lastChar,0,T),b.toString("utf8",m,T)}function d(b){var m=b&&b.length?this.write(b):"";return this.lastNeed?m+"":m}function l(b,m){if((b.length-m)%2===0){var g=b.toString("utf16le",m);if(g){var T=g.charCodeAt(g.length-1);if(T>=55296&&T<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1],g.slice(0,-1)}return g}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=b[b.length-1],b.toString("utf16le",m,b.length-1)}function f(b){var m=b&&b.length?this.write(b):"";if(this.lastNeed){var g=this.lastTotal-this.lastNeed;return m+this.lastChar.toString("utf16le",0,g)}return m}function h(b,m){var g=(b.length-m)%3;return g===0?b.toString("base64",m):(this.lastNeed=3-g,this.lastTotal=3,g===1?this.lastChar[0]=b[b.length-1]:(this.lastChar[0]=b[b.length-2],this.lastChar[1]=b[b.length-1]),b.toString("base64",m,b.length-g))}function p(b){var m=b&&b.length?this.write(b):"";return this.lastNeed?m+this.lastChar.toString("base64",0,3-this.lastNeed):m}function y(b){return b.toString(this.encoding)}function _(b){return b&&b.length?this.write(b):""}return BS}var $S,qR;function Zz(){if(qR)return $S;qR=1;const u=ta(),{PromisePrototypeThen:n,SymbolAsyncIterator:o,SymbolIterator:i}=er(),{Buffer:t}=ni(),{ERR_INVALID_ARG_TYPE:e,ERR_STREAM_NULL_VALUES:r}=Qr().codes;function a(c,s,d){let l;if(typeof s=="string"||s instanceof t)return new c({objectMode:!0,...d,read(){this.push(s),this.push(null)}});let f;if(s&&s[o])f=!0,l=s[o]();else if(s&&s[i])f=!1,l=s[i]();else throw new e("iterable",["Iterable"],s);const h=new c({objectMode:!0,highWaterMark:1,...d});let p=!1;h._read=function(){p||(p=!0,_())},h._destroy=function(b,m){n(y(b),()=>u.nextTick(m,b),g=>u.nextTick(m,g||b))};async function y(b){const m=b!=null,g=typeof l.throw=="function";if(m&&g){const{value:T,done:v}=await l.throw(b);if(await T,v)return}if(typeof l.return=="function"){const{value:T}=await l.return();await T}}async function _(){for(;;){try{const{value:b,done:m}=f?await l.next():l.next();if(m)h.push(null);else{const g=b&&typeof b.then=="function"?await b:b;if(g===null)throw p=!1,new r;if(h.push(g))continue;p=!1}}catch(b){h.destroy(b)}break}}return h}return $S=a,$S}var US,BR;function qw(){if(BR)return US;BR=1;const u=ta(),{ArrayPrototypeIndexOf:n,NumberIsInteger:o,NumberIsNaN:i,NumberParseInt:t,ObjectDefineProperties:e,ObjectKeys:r,ObjectSetPrototypeOf:a,Promise:c,SafeSet:s,SymbolAsyncDispose:d,SymbolAsyncIterator:l,Symbol:f}=er();US=ce,ce.ReadableState=se;const{EventEmitter:h}=Nv(),{Stream:p,prependListener:y}=DO(),{Buffer:_}=ni(),{addAbortSignal:b}=Mw(),m=na();let g=Jr().debuglog("stream",re=>{g=re});const T=hee(),v=Gf(),{getHighWaterMark:A,getDefaultHighWaterMark:I}=Cw(),{aggregateTwoErrors:q,codes:{ERR_INVALID_ARG_TYPE:O,ERR_METHOD_NOT_IMPLEMENTED:w,ERR_OUT_OF_RANGE:S,ERR_STREAM_PUSH_AFTER_EOF:E,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:R},AbortError:L}=Qr(),{validateObject:M}=jv(),B=f("kPaused"),{StringDecoder:X}=bee(),J=Zz();a(ce.prototype,p.prototype),a(ce,p);const ie=()=>{},{errorOrDestroy:U}=v,fe=1,me=2,he=4,te=8,xe=16,Ie=32,Fe=64,pe=128,ye=256,Q=512,P=1024,D=2048,x=4096,N=8192,$=16384,G=32768,V=65536,k=1<<17,H=1<<18;function Y(re){return{enumerable:!1,get(){return(this.state&re)!==0},set(ne){ne?this.state|=re:this.state&=~re}}}e(se.prototype,{objectMode:Y(fe),ended:Y(me),endEmitted:Y(he),reading:Y(te),constructed:Y(xe),sync:Y(Ie),needReadable:Y(Fe),emittedReadable:Y(pe),readableListening:Y(ye),resumeScheduled:Y(Q),errorEmitted:Y(P),emitClose:Y(D),autoDestroy:Y(x),destroyed:Y(N),closed:Y($),closeEmitted:Y(G),multiAwaitDrain:Y(V),readingMore:Y(k),dataEmitted:Y(H)});function se(re,ne,De){typeof De!="boolean"&&(De=ne instanceof Ri()),this.state=D|x|xe|Ie,re&&re.objectMode&&(this.state|=fe),De&&re&&re.readableObjectMode&&(this.state|=fe),this.highWaterMark=re?A(this,re,"readableHighWaterMark",De):I(!1),this.buffer=new T,this.length=0,this.pipes=[],this.flowing=null,this[B]=null,re&&re.emitClose===!1&&(this.state&=~D),re&&re.autoDestroy===!1&&(this.state&=~x),this.errored=null,this.defaultEncoding=re&&re.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,re&&re.encoding&&(this.decoder=new X(re.encoding),this.encoding=re.encoding)}function ce(re){if(!(this instanceof ce))return new ce(re);const ne=this instanceof Ri();this._readableState=new se(re,this,ne),re&&(typeof re.read=="function"&&(this._read=re.read),typeof re.destroy=="function"&&(this._destroy=re.destroy),typeof re.construct=="function"&&(this._construct=re.construct),re.signal&&!ne&&b(re.signal,this)),p.call(this,re),v.construct(this,()=>{this._readableState.needReadable&&Z(this,this._readableState)})}ce.prototype.destroy=v.destroy,ce.prototype._undestroy=v.undestroy,ce.prototype._destroy=function(re,ne){ne(re)},ce.prototype[h.captureRejectionSymbol]=function(re){this.destroy(re)},ce.prototype[d]=function(){let re;return this.destroyed||(re=this.readableEnded?null:new L,this.destroy(re)),new c((ne,De)=>m(this,qe=>qe&&qe!==re?De(qe):ne(null)))},ce.prototype.push=function(re,ne){return Se(this,re,ne,!1)},ce.prototype.unshift=function(re,ne){return Se(this,re,ne,!0)};function Se(re,ne,De,qe){g("readableAddChunk",ne);const Qe=re._readableState;let Tt;if((Qe.state&fe)===0&&(typeof ne=="string"?(De=De||Qe.defaultEncoding,Qe.encoding!==De&&(qe&&Qe.encoding?ne=_.from(ne,De).toString(Qe.encoding):(ne=_.from(ne,De),De=""))):ne instanceof _?De="":p._isUint8Array(ne)?(ne=p._uint8ArrayToBuffer(ne),De=""):ne!=null&&(Tt=new O("chunk",["string","Buffer","Uint8Array"],ne))),Tt)U(re,Tt);else if(ne===null)Qe.state&=~te,F(re,Qe);else if((Qe.state&fe)!==0||ne&&ne.length>0)if(qe)if((Qe.state&he)!==0)U(re,new R);else{if(Qe.destroyed||Qe.errored)return!1;Me(re,Qe,ne,!0)}else if(Qe.ended)U(re,new E);else{if(Qe.destroyed||Qe.errored)return!1;Qe.state&=~te,Qe.decoder&&!De?(ne=Qe.decoder.write(ne),Qe.objectMode||ne.length!==0?Me(re,Qe,ne,!1):Z(re,Qe)):Me(re,Qe,ne,!1)}else qe||(Qe.state&=~te,Z(re,Qe));return!Qe.ended&&(Qe.length<Qe.highWaterMark||Qe.length===0)}function Me(re,ne,De,qe){ne.flowing&&ne.length===0&&!ne.sync&&re.listenerCount("data")>0?((ne.state&V)!==0?ne.awaitDrainWriters.clear():ne.awaitDrainWriters=null,ne.dataEmitted=!0,re.emit("data",De)):(ne.length+=ne.objectMode?1:De.length,qe?ne.buffer.unshift(De):ne.buffer.push(De),(ne.state&Fe)!==0&&j(re)),Z(re,ne)}ce.prototype.isPaused=function(){const re=this._readableState;return re[B]===!0||re.flowing===!1},ce.prototype.setEncoding=function(re){const ne=new X(re);this._readableState.decoder=ne,this._readableState.encoding=this._readableState.decoder.encoding;const De=this._readableState.buffer;let qe="";for(const Qe of De)qe+=ne.write(Qe);return De.clear(),qe!==""&&De.push(qe),this._readableState.length=qe.length,this};const Ae=1073741824;function oe(re){if(re>Ae)throw new S("size","<= 1GiB",re);return re--,re|=re>>>1,re|=re>>>2,re|=re>>>4,re|=re>>>8,re|=re>>>16,re++,re}function C(re,ne){return re<=0||ne.length===0&&ne.ended?0:(ne.state&fe)!==0?1:i(re)?ne.flowing&&ne.length?ne.buffer.first().length:ne.length:re<=ne.length?re:ne.ended?ne.length:0}ce.prototype.read=function(re){g("read",re),re===void 0?re=NaN:o(re)||(re=t(re,10));const ne=this._readableState,De=re;if(re>ne.highWaterMark&&(ne.highWaterMark=oe(re)),re!==0&&(ne.state&=~pe),re===0&&ne.needReadable&&((ne.highWaterMark!==0?ne.length>=ne.highWaterMark:ne.length>0)||ne.ended))return g("read: emitReadable",ne.length,ne.ended),ne.length===0&&ne.ended?Ne(this):j(this),null;if(re=C(re,ne),re===0&&ne.ended)return ne.length===0&&Ne(this),null;let qe=(ne.state&Fe)!==0;if(g("need readable",qe),(ne.length===0||ne.length-re<ne.highWaterMark)&&(qe=!0,g("length less than watermark",qe)),ne.ended||ne.reading||ne.destroyed||ne.errored||!ne.constructed)qe=!1,g("reading, ended or constructing",qe);else if(qe){g("do read"),ne.state|=te|Ie,ne.length===0&&(ne.state|=Fe);try{this._read(ne.highWaterMark)}catch(Tt){U(this,Tt)}ne.state&=~Ie,ne.reading||(re=C(De,ne))}let Qe;return re>0?Qe=$e(re,ne):Qe=null,Qe===null?(ne.needReadable=ne.length<=ne.highWaterMark,re=0):(ne.length-=re,ne.multiAwaitDrain?ne.awaitDrainWriters.clear():ne.awaitDrainWriters=null),ne.length===0&&(ne.ended||(ne.needReadable=!0),De!==re&&ne.ended&&Ne(this)),Qe!==null&&!ne.errorEmitted&&!ne.closeEmitted&&(ne.dataEmitted=!0,this.emit("data",Qe)),Qe};function F(re,ne){if(g("onEofChunk"),!ne.ended){if(ne.decoder){const De=ne.decoder.end();De&&De.length&&(ne.buffer.push(De),ne.length+=ne.objectMode?1:De.length)}ne.ended=!0,ne.sync?j(re):(ne.needReadable=!1,ne.emittedReadable=!0,z(re))}}function j(re){const ne=re._readableState;g("emitReadable",ne.needReadable,ne.emittedReadable),ne.needReadable=!1,ne.emittedReadable||(g("emitReadable",ne.flowing),ne.emittedReadable=!0,u.nextTick(z,re))}function z(re){const ne=re._readableState;g("emitReadable_",ne.destroyed,ne.length,ne.ended),!ne.destroyed&&!ne.errored&&(ne.length||ne.ended)&&(re.emit("readable"),ne.emittedReadable=!1),ne.needReadable=!ne.flowing&&!ne.ended&&ne.length<=ne.highWaterMark,K(re)}function Z(re,ne){!ne.readingMore&&ne.constructed&&(ne.readingMore=!0,u.nextTick(le,re,ne))}function le(re,ne){for(;!ne.reading&&!ne.ended&&(ne.length<ne.highWaterMark||ne.flowing&&ne.length===0);){const De=ne.length;if(g("maybeReadMore read 0"),re.read(0),De===ne.length)break}ne.readingMore=!1}ce.prototype._read=function(re){throw new w("_read()")},ce.prototype.pipe=function(re,ne){const De=this,qe=this._readableState;qe.pipes.length===1&&(qe.multiAwaitDrain||(qe.multiAwaitDrain=!0,qe.awaitDrainWriters=new s(qe.awaitDrainWriters?[qe.awaitDrainWriters]:[]))),qe.pipes.push(re),g("pipe count=%d opts=%j",qe.pipes.length,ne);const Tt=(!ne||ne.end!==!1)&&re!==u.stdout&&re!==u.stderr?ht:ae;qe.endEmitted?u.nextTick(Tt):De.once("end",Tt),re.on("unpipe",Ue);function Ue(_e,ve){g("onunpipe"),_e===De&&ve&&ve.hasUnpiped===!1&&(ve.hasUnpiped=!0,tt())}function ht(){g("onend"),re.end()}let He,Je=!1;function tt(){g("cleanup"),re.removeListener("close",xr),re.removeListener("finish",Ge),He&&re.removeListener("drain",He),re.removeListener("error",Xe),re.removeListener("unpipe",Ue),De.removeListener("end",ht),De.removeListener("end",ae),De.removeListener("data",at),Je=!0,He&&qe.awaitDrainWriters&&(!re._writableState||re._writableState.needDrain)&&He()}function wt(){Je||(qe.pipes.length===1&&qe.pipes[0]===re?(g("false write response, pause",0),qe.awaitDrainWriters=re,qe.multiAwaitDrain=!1):qe.pipes.length>1&&qe.pipes.includes(re)&&(g("false write response, pause",qe.awaitDrainWriters.size),qe.awaitDrainWriters.add(re)),De.pause()),He||(He=ue(De,re),re.on("drain",He))}De.on("data",at);function at(_e){g("ondata");const ve=re.write(_e);g("dest.write",ve),ve===!1&&wt()}function Xe(_e){if(g("onerror",_e),ae(),re.removeListener("error",Xe),re.listenerCount("error")===0){const ve=re._writableState||re._readableState;ve&&!ve.errorEmitted?U(re,_e):re.emit("error",_e)}}y(re,"error",Xe);function xr(){re.removeListener("finish",Ge),ae()}re.once("close",xr);function Ge(){g("onfinish"),re.removeListener("close",xr),ae()}re.once("finish",Ge);function ae(){g("unpipe"),De.unpipe(re)}return re.emit("pipe",De),re.writableNeedDrain===!0?wt():qe.flowing||(g("pipe resume"),De.resume()),re};function ue(re,ne){return function(){const qe=re._readableState;qe.awaitDrainWriters===ne?(g("pipeOnDrain",1),qe.awaitDrainWriters=null):qe.multiAwaitDrain&&(g("pipeOnDrain",qe.awaitDrainWriters.size),qe.awaitDrainWriters.delete(ne)),(!qe.awaitDrainWriters||qe.awaitDrainWriters.size===0)&&re.listenerCount("data")&&re.resume()}}ce.prototype.unpipe=function(re){const ne=this._readableState,De={hasUnpiped:!1};if(ne.pipes.length===0)return this;if(!re){const Qe=ne.pipes;ne.pipes=[],this.pause();for(let Tt=0;Tt<Qe.length;Tt++)Qe[Tt].emit("unpipe",this,{hasUnpiped:!1});return this}const qe=n(ne.pipes,re);return qe===-1?this:(ne.pipes.splice(qe,1),ne.pipes.length===0&&this.pause(),re.emit("unpipe",this,De),this)},ce.prototype.on=function(re,ne){const De=p.prototype.on.call(this,re,ne),qe=this._readableState;return re==="data"?(qe.readableListening=this.listenerCount("readable")>0,qe.flowing!==!1&&this.resume()):re==="readable"&&!qe.endEmitted&&!qe.readableListening&&(qe.readableListening=qe.needReadable=!0,qe.flowing=!1,qe.emittedReadable=!1,g("on readable",qe.length,qe.reading),qe.length?j(this):qe.reading||u.nextTick(Ve,this)),De},ce.prototype.addListener=ce.prototype.on,ce.prototype.removeListener=function(re,ne){const De=p.prototype.removeListener.call(this,re,ne);return re==="readable"&&u.nextTick(Pe,this),De},ce.prototype.off=ce.prototype.removeListener,ce.prototype.removeAllListeners=function(re){const ne=p.prototype.removeAllListeners.apply(this,arguments);return(re==="readable"||re===void 0)&&u.nextTick(Pe,this),ne};function Pe(re){const ne=re._readableState;ne.readableListening=re.listenerCount("readable")>0,ne.resumeScheduled&&ne[B]===!1?ne.flowing=!0:re.listenerCount("data")>0?re.resume():ne.readableListening||(ne.flowing=null)}function Ve(re){g("readable nexttick read 0"),re.read(0)}ce.prototype.resume=function(){const re=this._readableState;return re.flowing||(g("resume"),re.flowing=!re.readableListening,Be(this,re)),re[B]=!1,this};function Be(re,ne){ne.resumeScheduled||(ne.resumeScheduled=!0,u.nextTick(Ze,re,ne))}function Ze(re,ne){g("resume",ne.reading),ne.reading||re.read(0),ne.resumeScheduled=!1,re.emit("resume"),K(re),ne.flowing&&!ne.reading&&re.read(0)}ce.prototype.pause=function(){return g("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(g("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[B]=!0,this};function K(re){const ne=re._readableState;for(g("flow",ne.flowing);ne.flowing&&re.read()!==null;);}ce.prototype.wrap=function(re){let ne=!1;re.on("data",qe=>{!this.push(qe)&&re.pause&&(ne=!0,re.pause())}),re.on("end",()=>{this.push(null)}),re.on("error",qe=>{U(this,qe)}),re.on("close",()=>{this.destroy()}),re.on("destroy",()=>{this.destroy()}),this._read=()=>{ne&&re.resume&&(ne=!1,re.resume())};const De=r(re);for(let qe=1;qe<De.length;qe++){const Qe=De[qe];this[Qe]===void 0&&typeof re[Qe]=="function"&&(this[Qe]=re[Qe].bind(re))}return this},ce.prototype[l]=function(){return we(this)},ce.prototype.iterator=function(re){return re!==void 0&&M(re,"options"),we(this,re)};function we(re,ne){typeof re.read!="function"&&(re=ce.wrap(re,{objectMode:!0}));const De=Ee(re,ne);return De.stream=re,De}async function*Ee(re,ne){let De=ie;function qe(Ue){this===re?(De(),De=ie):De=Ue}re.on("readable",qe);let Qe;const Tt=m(re,{writable:!1},Ue=>{Qe=Ue?q(Qe,Ue):null,De(),De=ie});try{for(;;){const Ue=re.destroyed?null:re.read();if(Ue!==null)yield Ue;else{if(Qe)throw Qe;if(Qe===null)return;await new c(qe)}}}catch(Ue){throw Qe=q(Qe,Ue),Qe}finally{(Qe||(ne==null?void 0:ne.destroyOnReturn)!==!1)&&(Qe===void 0||re._readableState.autoDestroy)?v.destroyer(re,null):(re.off("readable",qe),Tt())}}e(ce.prototype,{readable:{__proto__:null,get(){const re=this._readableState;return!!re&&re.readable!==!1&&!re.destroyed&&!re.errorEmitted&&!re.endEmitted},set(re){this._readableState&&(this._readableState.readable=!!re)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(re){this._readableState&&(this._readableState.flowing=re)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(re){this._readableState&&(this._readableState.destroyed=re)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),e(se.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[B]!==!1},set(re){this[B]=!!re}}}),ce._fromList=$e;function $e(re,ne){if(ne.length===0)return null;let De;return ne.objectMode?De=ne.buffer.shift():!re||re>=ne.length?(ne.decoder?De=ne.buffer.join(""):ne.buffer.length===1?De=ne.buffer.first():De=ne.buffer.concat(ne.length),ne.buffer.clear()):De=ne.buffer.consume(re,ne.decoder),De}function Ne(re){const ne=re._readableState;g("endReadable",ne.endEmitted),ne.endEmitted||(ne.ended=!0,u.nextTick(et,ne,re))}function et(re,ne){if(g("endReadableNT",re.endEmitted,re.length),!re.errored&&!re.closeEmitted&&!re.endEmitted&&re.length===0){if(re.endEmitted=!0,ne.emit("end"),ne.writable&&ne.allowHalfOpen===!1)u.nextTick(rt,ne);else if(re.autoDestroy){const De=ne._writableState;(!De||De.autoDestroy&&(De.finished||De.writable===!1))&&ne.destroy()}}}function rt(re){re.writable&&!re.writableEnded&&!re.destroyed&&re.end()}ce.from=function(re,ne){return J(ce,re,ne)};let Ke;function lt(){return Ke===void 0&&(Ke={}),Ke}return ce.fromWeb=function(re,ne){return lt().newStreamReadableFromReadableStream(re,ne)},ce.toWeb=function(re,ne){return lt().newReadableStreamFromStreamReadable(re,ne)},ce.wrap=function(re,ne){var De,qe;return new ce({objectMode:(De=(qe=re.readableObjectMode)!==null&&qe!==void 0?qe:re.objectMode)!==null&&De!==void 0?De:!0,...ne,destroy(Qe,Tt){v.destroyer(re,Qe),Tt(Qe)}}).wrap(re)},US}var VS,$R;function jO(){if($R)return VS;$R=1;const u=ta(),{ArrayPrototypeSlice:n,Error:o,FunctionPrototypeSymbolHasInstance:i,ObjectDefineProperty:t,ObjectDefineProperties:e,ObjectSetPrototypeOf:r,StringPrototypeToLowerCase:a,Symbol:c,SymbolHasInstance:s}=er();VS=M,M.WritableState=R;const{EventEmitter:d}=Nv(),l=DO().Stream,{Buffer:f}=ni(),h=Gf(),{addAbortSignal:p}=Mw(),{getHighWaterMark:y,getDefaultHighWaterMark:_}=Cw(),{ERR_INVALID_ARG_TYPE:b,ERR_METHOD_NOT_IMPLEMENTED:m,ERR_MULTIPLE_CALLBACK:g,ERR_STREAM_CANNOT_PIPE:T,ERR_STREAM_DESTROYED:v,ERR_STREAM_ALREADY_FINISHED:A,ERR_STREAM_NULL_VALUES:I,ERR_STREAM_WRITE_AFTER_END:q,ERR_UNKNOWN_ENCODING:O}=Qr().codes,{errorOrDestroy:w}=h;r(M.prototype,l.prototype),r(M,l);function S(){}const E=c("kOnFinished");function R(x,N,$){typeof $!="boolean"&&($=N instanceof Ri()),this.objectMode=!!(x&&x.objectMode),$&&(this.objectMode=this.objectMode||!!(x&&x.writableObjectMode)),this.highWaterMark=x?y(this,x,"writableHighWaterMark",$):_(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const G=!!(x&&x.decodeStrings===!1);this.decodeStrings=!G,this.defaultEncoding=x&&x.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=U.bind(void 0,N),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,L(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!x||x.emitClose!==!1,this.autoDestroy=!x||x.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[E]=[]}function L(x){x.buffered=[],x.bufferedIndex=0,x.allBuffers=!0,x.allNoop=!0}R.prototype.getBuffer=function(){return n(this.buffered,this.bufferedIndex)},t(R.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function M(x){const N=this instanceof Ri();if(!N&&!i(M,this))return new M(x);this._writableState=new R(x,this,N),x&&(typeof x.write=="function"&&(this._write=x.write),typeof x.writev=="function"&&(this._writev=x.writev),typeof x.destroy=="function"&&(this._destroy=x.destroy),typeof x.final=="function"&&(this._final=x.final),typeof x.construct=="function"&&(this._construct=x.construct),x.signal&&p(x.signal,this)),l.call(this,x),h.construct(this,()=>{const $=this._writableState;$.writing||te(this,$),pe(this,$)})}t(M,s,{__proto__:null,value:function(x){return i(this,x)?!0:this!==M?!1:x&&x._writableState instanceof R}}),M.prototype.pipe=function(){w(this,new T)};function B(x,N,$,G){const V=x._writableState;if(typeof $=="function")G=$,$=V.defaultEncoding;else{if(!$)$=V.defaultEncoding;else if($!=="buffer"&&!f.isEncoding($))throw new O($);typeof G!="function"&&(G=S)}if(N===null)throw new I;if(!V.objectMode)if(typeof N=="string")V.decodeStrings!==!1&&(N=f.from(N,$),$="buffer");else if(N instanceof f)$="buffer";else if(l._isUint8Array(N))N=l._uint8ArrayToBuffer(N),$="buffer";else throw new b("chunk",["string","Buffer","Uint8Array"],N);let k;return V.ending?k=new q:V.destroyed&&(k=new v("write")),k?(u.nextTick(G,k),w(x,k,!0),k):(V.pendingcb++,X(x,V,N,$,G))}M.prototype.write=function(x,N,$){return B(this,x,N,$)===!0},M.prototype.cork=function(){this._writableState.corked++},M.prototype.uncork=function(){const x=this._writableState;x.corked&&(x.corked--,x.writing||te(this,x))},M.prototype.setDefaultEncoding=function(N){if(typeof N=="string"&&(N=a(N)),!f.isEncoding(N))throw new O(N);return this._writableState.defaultEncoding=N,this};function X(x,N,$,G,V){const k=N.objectMode?1:$.length;N.length+=k;const H=N.length<N.highWaterMark;return H||(N.needDrain=!0),N.writing||N.corked||N.errored||!N.constructed?(N.buffered.push({chunk:$,encoding:G,callback:V}),N.allBuffers&&G!=="buffer"&&(N.allBuffers=!1),N.allNoop&&V!==S&&(N.allNoop=!1)):(N.writelen=k,N.writecb=V,N.writing=!0,N.sync=!0,x._write($,G,N.onwrite),N.sync=!1),H&&!N.errored&&!N.destroyed}function J(x,N,$,G,V,k,H){N.writelen=G,N.writecb=H,N.writing=!0,N.sync=!0,N.destroyed?N.onwrite(new v("write")):$?x._writev(V,N.onwrite):x._write(V,k,N.onwrite),N.sync=!1}function ie(x,N,$,G){--N.pendingcb,G($),he(N),w(x,$)}function U(x,N){const $=x._writableState,G=$.sync,V=$.writecb;if(typeof V!="function"){w(x,new g);return}$.writing=!1,$.writecb=null,$.length-=$.writelen,$.writelen=0,N?(N.stack,$.errored||($.errored=N),x._readableState&&!x._readableState.errored&&(x._readableState.errored=N),G?u.nextTick(ie,x,$,N,V):ie(x,$,N,V)):($.buffered.length>$.bufferedIndex&&te(x,$),G?$.afterWriteTickInfo!==null&&$.afterWriteTickInfo.cb===V?$.afterWriteTickInfo.count++:($.afterWriteTickInfo={count:1,cb:V,stream:x,state:$},u.nextTick(fe,$.afterWriteTickInfo)):me(x,$,1,V))}function fe({stream:x,state:N,count:$,cb:G}){return N.afterWriteTickInfo=null,me(x,N,$,G)}function me(x,N,$,G){for(!N.ending&&!x.destroyed&&N.length===0&&N.needDrain&&(N.needDrain=!1,x.emit("drain"));$-- >0;)N.pendingcb--,G();N.destroyed&&he(N),pe(x,N)}function he(x){if(x.writing)return;for(let V=x.bufferedIndex;V<x.buffered.length;++V){var N;const{chunk:k,callback:H}=x.buffered[V],Y=x.objectMode?1:k.length;x.length-=Y,H((N=x.errored)!==null&&N!==void 0?N:new v("write"))}const $=x[E].splice(0);for(let V=0;V<$.length;V++){var G;$[V]((G=x.errored)!==null&&G!==void 0?G:new v("end"))}L(x)}function te(x,N){if(N.corked||N.bufferProcessing||N.destroyed||!N.constructed)return;const{buffered:$,bufferedIndex:G,objectMode:V}=N,k=$.length-G;if(!k)return;let H=G;if(N.bufferProcessing=!0,k>1&&x._writev){N.pendingcb-=k-1;const Y=N.allNoop?S:ce=>{for(let Se=H;Se<$.length;++Se)$[Se].callback(ce)},se=N.allNoop&&H===0?$:n($,H);se.allBuffers=N.allBuffers,J(x,N,!0,N.length,se,"",Y),L(N)}else{do{const{chunk:Y,encoding:se,callback:ce}=$[H];$[H++]=null;const Se=V?1:Y.length;J(x,N,!1,Se,Y,se,ce)}while(H<$.length&&!N.writing);H===$.length?L(N):H>256?($.splice(0,H),N.bufferedIndex=0):N.bufferedIndex=H}N.bufferProcessing=!1}M.prototype._write=function(x,N,$){if(this._writev)this._writev([{chunk:x,encoding:N}],$);else throw new m("_write()")},M.prototype._writev=null,M.prototype.end=function(x,N,$){const G=this._writableState;typeof x=="function"?($=x,x=null,N=null):typeof N=="function"&&($=N,N=null);let V;if(x!=null){const k=B(this,x,N);k instanceof o&&(V=k)}return G.corked&&(G.corked=1,this.uncork()),V||(!G.errored&&!G.ending?(G.ending=!0,pe(this,G,!0),G.ended=!0):G.finished?V=new A("end"):G.destroyed&&(V=new v("end"))),typeof $=="function"&&(V||G.finished?u.nextTick($,V):G[E].push($)),this};function xe(x){return x.ending&&!x.destroyed&&x.constructed&&x.length===0&&!x.errored&&x.buffered.length===0&&!x.finished&&!x.writing&&!x.errorEmitted&&!x.closeEmitted}function Ie(x,N){let $=!1;function G(V){if($){w(x,V??g());return}if($=!0,N.pendingcb--,V){const k=N[E].splice(0);for(let H=0;H<k.length;H++)k[H](V);w(x,V,N.sync)}else xe(N)&&(N.prefinished=!0,x.emit("prefinish"),N.pendingcb++,u.nextTick(ye,x,N))}N.sync=!0,N.pendingcb++;try{x._final(G)}catch(V){G(V)}N.sync=!1}function Fe(x,N){!N.prefinished&&!N.finalCalled&&(typeof x._final=="function"&&!N.destroyed?(N.finalCalled=!0,Ie(x,N)):(N.prefinished=!0,x.emit("prefinish")))}function pe(x,N,$){xe(N)&&(Fe(x,N),N.pendingcb===0&&($?(N.pendingcb++,u.nextTick((G,V)=>{xe(V)?ye(G,V):V.pendingcb--},x,N)):xe(N)&&(N.pendingcb++,ye(x,N))))}function ye(x,N){N.pendingcb--,N.finished=!0;const $=N[E].splice(0);for(let G=0;G<$.length;G++)$[G]();if(x.emit("finish"),N.autoDestroy){const G=x._readableState;(!G||G.autoDestroy&&(G.endEmitted||G.readable===!1))&&x.destroy()}}e(M.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(x){this._writableState&&(this._writableState.destroyed=x)}},writable:{__proto__:null,get(){const x=this._writableState;return!!x&&x.writable!==!1&&!x.destroyed&&!x.errored&&!x.ending&&!x.ended},set(x){this._writableState&&(this._writableState.writable=!!x)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const x=this._writableState;return x?!x.destroyed&&!x.ending&&x.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const Q=h.destroy;M.prototype.destroy=function(x,N){const $=this._writableState;return!$.destroyed&&($.bufferedIndex<$.buffered.length||$[E].length)&&u.nextTick(he,$),Q.call(this,x,N),this},M.prototype._undestroy=h.undestroy,M.prototype._destroy=function(x,N){N(x)},M.prototype[d.captureRejectionSymbol]=function(x){this.destroy(x)};let P;function D(){return P===void 0&&(P={}),P}return M.fromWeb=function(x,N){return D().newStreamWritableFromWritableStream(x,N)},M.toWeb=function(x){return D().newWritableStreamFromStreamWritable(x)},VS}var QS,UR;function yee(){if(UR)return QS;UR=1;const u=ta(),n=ni(),{isReadable:o,isWritable:i,isIterable:t,isNodeStream:e,isReadableNodeStream:r,isWritableNodeStream:a,isDuplexNodeStream:c,isReadableStream:s,isWritableStream:d}=Fi(),l=na(),{AbortError:f,codes:{ERR_INVALID_ARG_TYPE:h,ERR_INVALID_RETURN_VALUE:p}}=Qr(),{destroyer:y}=Gf(),_=Ri(),b=qw(),m=jO(),{createDeferredPromise:g}=Jr(),T=Zz(),v=globalThis.Blob||n.Blob,A=typeof v<"u"?function(R){return R instanceof v}:function(R){return!1},I=globalThis.AbortController||cv().AbortController,{FunctionPrototypeCall:q}=er();class O extends _{constructor(R){super(R),(R==null?void 0:R.readable)===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),(R==null?void 0:R.writable)===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}QS=function E(R,L){if(c(R))return R;if(r(R))return S({readable:R});if(a(R))return S({writable:R});if(e(R))return S({writable:!1,readable:!1});if(s(R))return S({readable:b.fromWeb(R)});if(d(R))return S({writable:m.fromWeb(R)});if(typeof R=="function"){const{value:B,write:X,final:J,destroy:ie}=w(R);if(t(B))return T(O,B,{objectMode:!0,write:X,final:J,destroy:ie});const U=B==null?void 0:B.then;if(typeof U=="function"){let fe;const me=q(U,B,he=>{if(he!=null)throw new p("nully","body",he)},he=>{y(fe,he)});return fe=new O({objectMode:!0,readable:!1,write:X,final(he){J(async()=>{try{await me,u.nextTick(he,null)}catch(te){u.nextTick(he,te)}})},destroy:ie})}throw new p("Iterable, AsyncIterable or AsyncFunction",L,B)}if(A(R))return E(R.arrayBuffer());if(t(R))return T(O,R,{objectMode:!0,writable:!1});if(s(R==null?void 0:R.readable)&&d(R==null?void 0:R.writable))return O.fromWeb(R);if(typeof(R==null?void 0:R.writable)=="object"||typeof(R==null?void 0:R.readable)=="object"){const B=R!=null&&R.readable?r(R==null?void 0:R.readable)?R==null?void 0:R.readable:E(R.readable):void 0,X=R!=null&&R.writable?a(R==null?void 0:R.writable)?R==null?void 0:R.writable:E(R.writable):void 0;return S({readable:B,writable:X})}const M=R==null?void 0:R.then;if(typeof M=="function"){let B;return q(M,R,X=>{X!=null&&B.push(X),B.push(null)},X=>{y(B,X)}),B=new O({objectMode:!0,writable:!1,read(){}})}throw new h(L,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],R)};function w(E){let{promise:R,resolve:L}=g();const M=new I,B=M.signal;return{value:E((async function*(){for(;;){const J=R;R=null;const{chunk:ie,done:U,cb:fe}=await J;if(u.nextTick(fe),U)return;if(B.aborted)throw new f(void 0,{cause:B.reason});({promise:R,resolve:L}=g()),yield ie}})(),{signal:B}),write(J,ie,U){const fe=L;L=null,fe({chunk:J,done:!1,cb:U})},final(J){const ie=L;L=null,ie({done:!0,cb:J})},destroy(J,ie){M.abort(),ie(J)}}}function S(E){const R=E.readable&&typeof E.readable.read!="function"?b.wrap(E.readable):E.readable,L=E.writable;let M=!!o(R),B=!!i(L),X,J,ie,U,fe;function me(he){const te=U;U=null,te?te(he):he&&fe.destroy(he)}return fe=new O({readableObjectMode:!!(R!=null&&R.readableObjectMode),writableObjectMode:!!(L!=null&&L.writableObjectMode),readable:M,writable:B}),B&&(l(L,he=>{B=!1,he&&y(R,he),me(he)}),fe._write=function(he,te,xe){L.write(he,te)?xe():X=xe},fe._final=function(he){L.end(),J=he},L.on("drain",function(){if(X){const he=X;X=null,he()}}),L.on("finish",function(){if(J){const he=J;J=null,he()}})),M&&(l(R,he=>{M=!1,he&&y(R,he),me(he)}),R.on("readable",function(){if(ie){const he=ie;ie=null,he()}}),R.on("end",function(){fe.push(null)}),fe._read=function(){for(;;){const he=R.read();if(he===null){ie=fe._read;return}if(!fe.push(he))return}}),fe._destroy=function(he,te){!he&&U!==null&&(he=new f),ie=null,X=null,J=null,U===null?te(he):(U=te,y(L,he),y(R,he))},fe}return QS}var HS,VR;function Ri(){if(VR)return HS;VR=1;const{ObjectDefineProperties:u,ObjectGetOwnPropertyDescriptor:n,ObjectKeys:o,ObjectSetPrototypeOf:i}=er();HS=r;const t=qw(),e=jO();i(r.prototype,t.prototype),i(r,t);{const d=o(e.prototype);for(let l=0;l<d.length;l++){const f=d[l];r.prototype[f]||(r.prototype[f]=e.prototype[f])}}function r(d){if(!(this instanceof r))return new r(d);t.call(this,d),e.call(this,d),d?(this.allowHalfOpen=d.allowHalfOpen!==!1,d.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),d.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}u(r.prototype,{writable:{__proto__:null,...n(e.prototype,"writable")},writableHighWaterMark:{__proto__:null,...n(e.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...n(e.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...n(e.prototype,"writableBuffer")},writableLength:{__proto__:null,...n(e.prototype,"writableLength")},writableFinished:{__proto__:null,...n(e.prototype,"writableFinished")},writableCorked:{__proto__:null,...n(e.prototype,"writableCorked")},writableEnded:{__proto__:null,...n(e.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...n(e.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(d){this._readableState&&this._writableState&&(this._readableState.destroyed=d,this._writableState.destroyed=d)}}});let a;function c(){return a===void 0&&(a={}),a}r.fromWeb=function(d,l){return c().newStreamDuplexFromReadableWritablePair(d,l)},r.toWeb=function(d){return c().newReadableWritablePairFromDuplex(d)};let s;return r.from=function(d){return s||(s=yee()),s(d,"body")},HS}var GS,QR;function eX(){if(QR)return GS;QR=1;const{ObjectSetPrototypeOf:u,Symbol:n}=er();GS=r;const{ERR_METHOD_NOT_IMPLEMENTED:o}=Qr().codes,i=Ri(),{getHighWaterMark:t}=Cw();u(r.prototype,i.prototype),u(r,i);const e=n("kCallback");function r(s){if(!(this instanceof r))return new r(s);const d=s?t(this,s,"readableHighWaterMark",!0):null;d===0&&(s={...s,highWaterMark:null,readableHighWaterMark:d,writableHighWaterMark:s.writableHighWaterMark||0}),i.call(this,s),this._readableState.sync=!1,this[e]=null,s&&(typeof s.transform=="function"&&(this._transform=s.transform),typeof s.flush=="function"&&(this._flush=s.flush)),this.on("prefinish",c)}function a(s){typeof this._flush=="function"&&!this.destroyed?this._flush((d,l)=>{if(d){s?s(d):this.destroy(d);return}l!=null&&this.push(l),this.push(null),s&&s()}):(this.push(null),s&&s())}function c(){this._final!==a&&a.call(this)}return r.prototype._final=a,r.prototype._transform=function(s,d,l){throw new o("_transform()")},r.prototype._write=function(s,d,l){const f=this._readableState,h=this._writableState,p=f.length;this._transform(s,d,(y,_)=>{if(y){l(y);return}_!=null&&this.push(_),h.ended||p===f.length||f.length<f.highWaterMark?l():this[e]=l})},r.prototype._read=function(){if(this[e]){const s=this[e];this[e]=null,s()}},GS}var zS,HR;function tX(){if(HR)return zS;HR=1;const{ObjectSetPrototypeOf:u}=er();zS=o;const n=eX();u(o.prototype,n.prototype),u(o,n);function o(i){if(!(this instanceof o))return new o(i);n.call(this,i)}return o.prototype._transform=function(i,t,e){e(null,i)},zS}var XS,GR;function LO(){if(GR)return XS;GR=1;const u=ta(),{ArrayIsArray:n,Promise:o,SymbolAsyncIterator:i,SymbolDispose:t}=er(),e=na(),{once:r}=Jr(),a=Gf(),c=Ri(),{aggregateTwoErrors:s,codes:{ERR_INVALID_ARG_TYPE:d,ERR_INVALID_RETURN_VALUE:l,ERR_MISSING_ARGS:f,ERR_STREAM_DESTROYED:h,ERR_STREAM_PREMATURE_CLOSE:p},AbortError:y}=Qr(),{validateFunction:_,validateAbortSignal:b}=jv(),{isIterable:m,isReadable:g,isReadableNodeStream:T,isNodeStream:v,isTransformStream:A,isWebStream:I,isReadableStream:q,isReadableFinished:O}=Fi(),w=globalThis.AbortController||cv().AbortController;let S,E,R;function L(he,te,xe){let Ie=!1;he.on("close",()=>{Ie=!0});const Fe=e(he,{readable:te,writable:xe},pe=>{Ie=!pe});return{destroy:pe=>{Ie||(Ie=!0,a.destroyer(he,pe||new h("pipe")))},cleanup:Fe}}function M(he){return _(he[he.length-1],"streams[stream.length - 1]"),he.pop()}function B(he){if(m(he))return he;if(T(he))return X(he);throw new d("val",["Readable","Iterable","AsyncIterable"],he)}async function*X(he){E||(E=qw()),yield*E.prototype[i].call(he)}async function J(he,te,xe,{end:Ie}){let Fe,pe=null;const ye=D=>{if(D&&(Fe=D),pe){const x=pe;pe=null,x()}},Q=()=>new o((D,x)=>{Fe?x(Fe):pe=()=>{Fe?x(Fe):D()}});te.on("drain",ye);const P=e(te,{readable:!1},ye);try{te.writableNeedDrain&&await Q();for await(const D of he)te.write(D)||await Q();Ie&&(te.end(),await Q()),xe()}catch(D){xe(Fe!==D?s(Fe,D):D)}finally{P(),te.off("drain",ye)}}async function ie(he,te,xe,{end:Ie}){A(te)&&(te=te.writable);const Fe=te.getWriter();try{for await(const pe of he)await Fe.ready,Fe.write(pe).catch(()=>{});await Fe.ready,Ie&&await Fe.close(),xe()}catch(pe){try{await Fe.abort(pe),xe(pe)}catch(ye){xe(ye)}}}function U(...he){return fe(he,r(M(he)))}function fe(he,te,xe){if(he.length===1&&n(he[0])&&(he=he[0]),he.length<2)throw new f("streams");const Ie=new w,Fe=Ie.signal,pe=xe==null?void 0:xe.signal,ye=[];b(pe,"options.signal");function Q(){V(new y)}R=R||Jr().addAbortListener;let P;pe&&(P=R(pe,Q));let D,x;const N=[];let $=0;function G(se){V(se,--$===0)}function V(se,ce){var Se;if(se&&(!D||D.code==="ERR_STREAM_PREMATURE_CLOSE")&&(D=se),!(!D&&!ce)){for(;N.length;)N.shift()(D);(Se=P)===null||Se===void 0||Se[t](),Ie.abort(),ce&&(D||ye.forEach(Me=>Me()),u.nextTick(te,D,x))}}let k;for(let se=0;se<he.length;se++){const ce=he[se],Se=se<he.length-1,Me=se>0,Ae=Se||(xe==null?void 0:xe.end)!==!1,oe=se===he.length-1;if(v(ce)){let C=function(F){F&&F.name!=="AbortError"&&F.code!=="ERR_STREAM_PREMATURE_CLOSE"&&G(F)};if(Ae){const{destroy:F,cleanup:j}=L(ce,Se,Me);N.push(F),g(ce)&&oe&&ye.push(j)}ce.on("error",C),g(ce)&&oe&&ye.push(()=>{ce.removeListener("error",C)})}if(se===0)if(typeof ce=="function"){if(k=ce({signal:Fe}),!m(k))throw new l("Iterable, AsyncIterable or Stream","source",k)}else m(ce)||T(ce)||A(ce)?k=ce:k=c.from(ce);else if(typeof ce=="function"){if(A(k)){var H;k=B((H=k)===null||H===void 0?void 0:H.readable)}else k=B(k);if(k=ce(k,{signal:Fe}),Se){if(!m(k,!0))throw new l("AsyncIterable",`transform[${se-1}]`,k)}else{var Y;S||(S=tX());const C=new S({objectMode:!0}),F=(Y=k)===null||Y===void 0?void 0:Y.then;if(typeof F=="function")$++,F.call(k,Z=>{x=Z,Z!=null&&C.write(Z),Ae&&C.end(),u.nextTick(G)},Z=>{C.destroy(Z),u.nextTick(G,Z)});else if(m(k,!0))$++,J(k,C,G,{end:Ae});else if(q(k)||A(k)){const Z=k.readable||k;$++,J(Z,C,G,{end:Ae})}else throw new l("AsyncIterable or Promise","destination",k);k=C;const{destroy:j,cleanup:z}=L(k,!1,!0);N.push(j),oe&&ye.push(z)}}else if(v(ce)){if(T(k)){$+=2;const C=me(k,ce,G,{end:Ae});g(ce)&&oe&&ye.push(C)}else if(A(k)||q(k)){const C=k.readable||k;$++,J(C,ce,G,{end:Ae})}else if(m(k))$++,J(k,ce,G,{end:Ae});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],k);k=ce}else if(I(ce)){if(T(k))$++,ie(B(k),ce,G,{end:Ae});else if(q(k)||m(k))$++,ie(k,ce,G,{end:Ae});else if(A(k))$++,ie(k.readable,ce,G,{end:Ae});else throw new d("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],k);k=ce}else k=c.from(ce)}return(Fe!=null&&Fe.aborted||pe!=null&&pe.aborted)&&u.nextTick(Q),k}function me(he,te,xe,{end:Ie}){let Fe=!1;if(te.on("close",()=>{Fe||xe(new p)}),he.pipe(te,{end:!1}),Ie){let pe=function(){Fe=!0,te.end()};O(he)?u.nextTick(pe):he.once("end",pe)}else xe();return e(he,{readable:!0,writable:!1},pe=>{const ye=he._readableState;pe&&pe.code==="ERR_STREAM_PREMATURE_CLOSE"&&ye&&ye.ended&&!ye.errored&&!ye.errorEmitted?he.once("end",xe).once("error",xe):xe(pe)}),e(te,{readable:!1,writable:!0},xe)}return XS={pipelineImpl:fe,pipeline:U},XS}var JS,zR;function rX(){if(zR)return JS;zR=1;const{pipeline:u}=LO(),n=Ri(),{destroyer:o}=Gf(),{isNodeStream:i,isReadable:t,isWritable:e,isWebStream:r,isTransformStream:a,isWritableStream:c,isReadableStream:s}=Fi(),{AbortError:d,codes:{ERR_INVALID_ARG_VALUE:l,ERR_MISSING_ARGS:f}}=Qr(),h=na();return JS=function(...y){if(y.length===0)throw new f("streams");if(y.length===1)return n.from(y[0]);const _=[...y];if(typeof y[0]=="function"&&(y[0]=n.from(y[0])),typeof y[y.length-1]=="function"){const S=y.length-1;y[S]=n.from(y[S])}for(let S=0;S<y.length;++S)if(!(!i(y[S])&&!r(y[S]))){if(S<y.length-1&&!(t(y[S])||s(y[S])||a(y[S])))throw new l(`streams[${S}]`,_[S],"must be readable");if(S>0&&!(e(y[S])||c(y[S])||a(y[S])))throw new l(`streams[${S}]`,_[S],"must be writable")}let b,m,g,T,v;function A(S){const E=T;T=null,E?E(S):S?v.destroy(S):!w&&!O&&v.destroy()}const I=y[0],q=u(y,A),O=!!(e(I)||c(I)||a(I)),w=!!(t(q)||s(q)||a(q));if(v=new n({writableObjectMode:!!(I!=null&&I.writableObjectMode),readableObjectMode:!!(q!=null&&q.readableObjectMode),writable:O,readable:w}),O){if(i(I))v._write=function(E,R,L){I.write(E,R)?L():b=L},v._final=function(E){I.end(),m=E},I.on("drain",function(){if(b){const E=b;b=null,E()}});else if(r(I)){const R=(a(I)?I.writable:I).getWriter();v._write=async function(L,M,B){try{await R.ready,R.write(L).catch(()=>{}),B()}catch(X){B(X)}},v._final=async function(L){try{await R.ready,R.close().catch(()=>{}),m=L}catch(M){L(M)}}}const S=a(q)?q.readable:q;h(S,()=>{if(m){const E=m;m=null,E()}})}if(w){if(i(q))q.on("readable",function(){if(g){const S=g;g=null,S()}}),q.on("end",function(){v.push(null)}),v._read=function(){for(;;){const S=q.read();if(S===null){g=v._read;return}if(!v.push(S))return}};else if(r(q)){const E=(a(q)?q.readable:q).getReader();v._read=async function(){for(;;)try{const{value:R,done:L}=await E.read();if(!v.push(R))return;if(L){v.push(null);return}}catch{return}}}}return v._destroy=function(S,E){!S&&T!==null&&(S=new d),g=null,b=null,m=null,T===null?E(S):(T=E,i(q)&&o(q,S))},v},JS}var XR;function _ee(){if(XR)return hT;XR=1;const u=globalThis.AbortController||cv().AbortController,{codes:{ERR_INVALID_ARG_VALUE:n,ERR_INVALID_ARG_TYPE:o,ERR_MISSING_ARGS:i,ERR_OUT_OF_RANGE:t},AbortError:e}=Qr(),{validateAbortSignal:r,validateInteger:a,validateObject:c}=jv(),s=er().Symbol("kWeak"),d=er().Symbol("kResistStopPropagation"),{finished:l}=na(),f=rX(),{addAbortSignalNoValidate:h}=Mw(),{isWritable:p,isNodeStream:y}=Fi(),{deprecate:_}=Jr(),{ArrayPrototypePush:b,Boolean:m,MathFloor:g,Number:T,NumberIsNaN:v,Promise:A,PromiseReject:I,PromiseResolve:q,PromisePrototypeThen:O,Symbol:w}=er(),S=w("kEmpty"),E=w("kEof");function R(pe,ye){if(ye!=null&&c(ye,"options"),(ye==null?void 0:ye.signal)!=null&&r(ye.signal,"options.signal"),y(pe)&&!p(pe))throw new n("stream",pe,"must be writable");const Q=f(this,pe);return ye!=null&&ye.signal&&h(ye.signal,Q),Q}function L(pe,ye){if(typeof pe!="function")throw new o("fn",["Function","AsyncFunction"],pe);ye!=null&&c(ye,"options"),(ye==null?void 0:ye.signal)!=null&&r(ye.signal,"options.signal");let Q=1;(ye==null?void 0:ye.concurrency)!=null&&(Q=g(ye.concurrency));let P=Q-1;return(ye==null?void 0:ye.highWaterMark)!=null&&(P=g(ye.highWaterMark)),a(Q,"options.concurrency",1),a(P,"options.highWaterMark",0),P+=Q,(async function*(){const x=Jr().AbortSignalAny([ye==null?void 0:ye.signal].filter(m)),N=this,$=[],G={signal:x};let V,k,H=!1,Y=0;function se(){H=!0,ce()}function ce(){Y-=1,Se()}function Se(){k&&!H&&Y<Q&&$.length<P&&(k(),k=null)}async function Me(){try{for await(let Ae of N){if(H)return;if(x.aborted)throw new e;try{if(Ae=pe(Ae,G),Ae===S)continue;Ae=q(Ae)}catch(oe){Ae=I(oe)}Y+=1,O(Ae,ce,se),$.push(Ae),V&&(V(),V=null),!H&&($.length>=P||Y>=Q)&&await new A(oe=>{k=oe})}$.push(E)}catch(Ae){const oe=I(Ae);O(oe,ce,se),$.push(oe)}finally{H=!0,V&&(V(),V=null)}}Me();try{for(;;){for(;$.length>0;){const Ae=await $[0];if(Ae===E)return;if(x.aborted)throw new e;Ae!==S&&(yield Ae),$.shift(),Se()}await new A(Ae=>{V=Ae})}}finally{H=!0,k&&(k(),k=null)}}).call(this)}function M(pe=void 0){return pe!=null&&c(pe,"options"),(pe==null?void 0:pe.signal)!=null&&r(pe.signal,"options.signal"),(async function*(){let Q=0;for await(const D of this){var P;if(pe!=null&&(P=pe.signal)!==null&&P!==void 0&&P.aborted)throw new e({cause:pe.signal.reason});yield[Q++,D]}}).call(this)}async function B(pe,ye=void 0){for await(const Q of U.call(this,pe,ye))return!0;return!1}async function X(pe,ye=void 0){if(typeof pe!="function")throw new o("fn",["Function","AsyncFunction"],pe);return!await B.call(this,async(...Q)=>!await pe(...Q),ye)}async function J(pe,ye){for await(const Q of U.call(this,pe,ye))return Q}async function ie(pe,ye){if(typeof pe!="function")throw new o("fn",["Function","AsyncFunction"],pe);async function Q(P,D){return await pe(P,D),S}for await(const P of L.call(this,Q,ye));}function U(pe,ye){if(typeof pe!="function")throw new o("fn",["Function","AsyncFunction"],pe);async function Q(P,D){return await pe(P,D)?P:S}return L.call(this,Q,ye)}class fe extends i{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function me(pe,ye,Q){var P;if(typeof pe!="function")throw new o("reducer",["Function","AsyncFunction"],pe);Q!=null&&c(Q,"options"),(Q==null?void 0:Q.signal)!=null&&r(Q.signal,"options.signal");let D=arguments.length>1;if(Q!=null&&(P=Q.signal)!==null&&P!==void 0&&P.aborted){const V=new e(void 0,{cause:Q.signal.reason});throw this.once("error",()=>{}),await l(this.destroy(V)),V}const x=new u,N=x.signal;if(Q!=null&&Q.signal){const V={once:!0,[s]:this,[d]:!0};Q.signal.addEventListener("abort",()=>x.abort(),V)}let $=!1;try{for await(const V of this){var G;if($=!0,Q!=null&&(G=Q.signal)!==null&&G!==void 0&&G.aborted)throw new e;D?ye=await pe(ye,V,{signal:N}):(ye=V,D=!0)}if(!$&&!D)throw new fe}finally{x.abort()}return ye}async function he(pe){pe!=null&&c(pe,"options"),(pe==null?void 0:pe.signal)!=null&&r(pe.signal,"options.signal");const ye=[];for await(const P of this){var Q;if(pe!=null&&(Q=pe.signal)!==null&&Q!==void 0&&Q.aborted)throw new e(void 0,{cause:pe.signal.reason});b(ye,P)}return ye}function te(pe,ye){const Q=L.call(this,pe,ye);return(async function*(){for await(const D of Q)yield*D}).call(this)}function xe(pe){if(pe=T(pe),v(pe))return 0;if(pe<0)throw new t("number",">= 0",pe);return pe}function Ie(pe,ye=void 0){return ye!=null&&c(ye,"options"),(ye==null?void 0:ye.signal)!=null&&r(ye.signal,"options.signal"),pe=xe(pe),(async function*(){var P;if(ye!=null&&(P=ye.signal)!==null&&P!==void 0&&P.aborted)throw new e;for await(const x of this){var D;if(ye!=null&&(D=ye.signal)!==null&&D!==void 0&&D.aborted)throw new e;pe--<=0&&(yield x)}}).call(this)}function Fe(pe,ye=void 0){return ye!=null&&c(ye,"options"),(ye==null?void 0:ye.signal)!=null&&r(ye.signal,"options.signal"),pe=xe(pe),(async function*(){var P;if(ye!=null&&(P=ye.signal)!==null&&P!==void 0&&P.aborted)throw new e;for await(const x of this){var D;if(ye!=null&&(D=ye.signal)!==null&&D!==void 0&&D.aborted)throw new e;if(pe-- >0&&(yield x),pe<=0)return}}).call(this)}return hT.streamReturningOperators={asIndexedPairs:_(M,"readable.asIndexedPairs will be removed in a future version."),drop:Ie,filter:U,flatMap:te,map:L,take:Fe,compose:R},hT.promiseReturningOperators={every:X,forEach:ie,reduce:me,toArray:he,some:B,find:J},hT}var kS,JR;function nX(){if(JR)return kS;JR=1;const{ArrayPrototypePop:u,Promise:n}=er(),{isIterable:o,isNodeStream:i,isWebStream:t}=Fi(),{pipelineImpl:e}=LO(),{finished:r}=na();iX();function a(...c){return new n((s,d)=>{let l,f;const h=c[c.length-1];if(h&&typeof h=="object"&&!i(h)&&!o(h)&&!t(h)){const p=u(c);l=p.signal,f=p.end}e(c,(p,y)=>{p?d(p):s(y)},{signal:l,end:f})})}return kS={finished:r,pipeline:a},kS}var kR;function iX(){if(kR)return ES.exports;kR=1;const{Buffer:u}=ni(),{ObjectDefineProperty:n,ObjectKeys:o,ReflectApply:i}=er(),{promisify:{custom:t}}=Jr(),{streamReturningOperators:e,promiseReturningOperators:r}=_ee(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:a}}=Qr(),c=rX(),{setDefaultHighWaterMark:s,getDefaultHighWaterMark:d}=Cw(),{pipeline:l}=LO(),{destroyer:f}=Gf(),h=na(),p=nX(),y=Fi(),_=ES.exports=DO().Stream;_.isDestroyed=y.isDestroyed,_.isDisturbed=y.isDisturbed,_.isErrored=y.isErrored,_.isReadable=y.isReadable,_.isWritable=y.isWritable,_.Readable=qw();for(const m of o(e)){let T=function(...v){if(new.target)throw a();return _.Readable.from(i(g,this,v))};const g=e[m];n(T,"name",{__proto__:null,value:g.name}),n(T,"length",{__proto__:null,value:g.length}),n(_.Readable.prototype,m,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}for(const m of o(r)){let T=function(...v){if(new.target)throw a();return i(g,this,v)};const g=r[m];n(T,"name",{__proto__:null,value:g.name}),n(T,"length",{__proto__:null,value:g.length}),n(_.Readable.prototype,m,{__proto__:null,value:T,enumerable:!1,configurable:!0,writable:!0})}_.Writable=jO(),_.Duplex=Ri(),_.Transform=eX(),_.PassThrough=tX(),_.pipeline=l;const{addAbortSignal:b}=Mw();return _.addAbortSignal=b,_.finished=h,_.destroy=f,_.compose=c,_.setDefaultHighWaterMark=s,_.getDefaultHighWaterMark=d,n(_,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return p}}),n(l,t,{__proto__:null,enumerable:!0,get(){return p.pipeline}}),n(h,t,{__proto__:null,enumerable:!0,get(){return p.finished}}),_.Stream=_,_._isUint8Array=function(g){return g instanceof Uint8Array},_._uint8ArrayToBuffer=function(g){return u.from(g.buffer,g.byteOffset,g.byteLength)},ES.exports}var KR;function Dt(){return KR||(KR=1,(function(u){const n=iX(),o=nX(),i=n.Readable.destroy;u.exports=n.Readable,u.exports._uint8ArrayToBuffer=n._uint8ArrayToBuffer,u.exports._isUint8Array=n._isUint8Array,u.exports.isDisturbed=n.isDisturbed,u.exports.isErrored=n.isErrored,u.exports.isReadable=n.isReadable,u.exports.Readable=n.Readable,u.exports.Writable=n.Writable,u.exports.Duplex=n.Duplex,u.exports.Transform=n.Transform,u.exports.PassThrough=n.PassThrough,u.exports.addAbortSignal=n.addAbortSignal,u.exports.finished=n.finished,u.exports.destroy=n.destroy,u.exports.destroy=i,u.exports.pipeline=n.pipeline,u.exports.compose=n.compose,Object.defineProperty(n,"promises",{configurable:!0,enumerable:!0,get(){return o}}),u.exports.Stream=n.Stream,u.exports.default=u.exports})(OS)),OS.exports}var WR;function gee(){if(WR)return $h;WR=1,Object.defineProperty($h,"__esModule",{value:!0}),$h.ActorQueryResultSerializeJson=void 0;const u=ri(),n=be(),o=pt(),i=tr(),t=Dt();let e=class extends u.ActorQueryResultSerializeFixedMediaTypes{constructor(a){super(a)}async testHandleChecked(a,c){return["bindings","quads","boolean"].includes(a.type)?(0,n.passTestVoid)():(0,n.failTest)("This actor can only handle bindings or quad streams.")}async runHandle(a,c,s){const d=new t.Readable;if(d._read=()=>{},a.type==="bindings"||a.type==="quads"){let l=a.type==="bindings"?(0,o.wrap)(a.bindingsStream).map(h=>JSON.stringify(Object.fromEntries([...h].map(([p,y])=>[p.value,i.termToString(y)])))):(0,o.wrap)(a.quadStream).map(h=>JSON.stringify(i.quadToStringQuad(h))),f=!0;l=l.map(h=>{const p=`${f?"":","}
${h}`;return f=!1,p}).prepend(["["]).append([`
]
`]),d.wrap(l)}else try{d.push(`${JSON.stringify(await a.execute())}
`),d.push(null)}catch(l){setTimeout(()=>d.emit("error",l))}return{data:d}}};return $h.ActorQueryResultSerializeJson=e,$h}var YR;function mee(){return YR||(YR=1,(function(u){var n=hu&&hu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=hu&&hu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(gee(),u)})(hu)),hu}var yu={},Xh={},ZR;function vee(){if(ZR)return Xh;ZR=1,Object.defineProperty(Xh,"__esModule",{value:!0}),Xh.ActorQueryResultSerializeSimple=void 0;const u=ri(),n=be(),o=pt(),i=tr(),t=Dt();let e=class yf extends u.ActorQueryResultSerializeFixedMediaTypes{constructor(a){super(a)}async testHandleChecked(a,c){return["bindings","quads","boolean","void"].includes(a.type)?(0,n.passTestVoid)():(0,n.failTest)("This actor can only handle bindings streams, quad streams, booleans, or updates.")}static termToString(a){return a.termType==="Quad"?(0,i.termToString)(a):a.value}async runHandle(a,c,s){const d=new t.Readable;return a.type==="bindings"?d.wrap(a.bindingsStream.map(l=>`${[...l].map(([f,h])=>`?${f.value}: ${yf.termToString(h)}`).join(`
`)}

`)):a.type==="quads"?d.wrap(a.quadStream.map(l=>`subject: ${yf.termToString(l.subject)}
predicate: ${yf.termToString(l.predicate)}
object: ${yf.termToString(l.object)}
graph: ${yf.termToString(l.graph)}

`)):d.wrap((0,o.wrap)(a.type==="boolean"?a.execute().then(l=>[`${l}
`]):a.execute().then(()=>[`ok
`]))),{data:d}}};return Xh.ActorQueryResultSerializeSimple=e,Xh}var eF;function Tee(){return eF||(eF=1,(function(u){var n=yu&&yu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=yu&&yu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(vee(),u)})(yu)),yu}var _u={},Jh={},tF;function wee(){if(tF)return Jh;tF=1,Object.defineProperty(Jh,"__esModule",{value:!0}),Jh.ActorQueryResultSerializeSparqlCsv=void 0;const u=ri(),n=be(),o=Dt();let i=class V3 extends u.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}static bindingToCsvBindings(e){if(!e)return"";let r=e.value;if(e.termType==="Literal")r=`${r}`;else if(e.termType==="BlankNode")r=`_:${r}`;else if(e.termType==="Quad"){let a=V3.bindingToCsvBindings(e.object);e.object.termType==="Literal"&&(a=`"${a.replaceAll('"','""')}"`),r=`<< ${V3.bindingToCsvBindings(e.subject)} ${V3.bindingToCsvBindings(e.predicate)} ${a} >>`}else r=`<${r}>`;return/[",\n\r]/u.test(r)&&(r=`"${r.replaceAll('"','""')}"`),r}async testHandleChecked(e,r){return e.type!=="bindings"?(0,n.failTest)("This actor can only handle bindings streams."):(0,n.passTestVoid)()}async runHandle(e,r,a){const c=e,s=new o.Readable,d=await c.metadata();return s.push(`${d.variables.map(l=>l.variable.value).join(",")}\r
`),s.wrap(c.bindingsStream.map(l=>`${d.variables.map(f=>V3.bindingToCsvBindings(l.get(f.variable))).join(",")}\r
`)),{data:s}}};return Jh.ActorQueryResultSerializeSparqlCsv=i,Jh}var rF;function See(){return rF||(rF=1,(function(u){var n=_u&&_u.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=_u&&_u.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(wee(),u)})(_u)),_u}var gu={},kh={},KS={},Sr={},nF;function Aee(){if(nF)return Sr;nF=1,Object.defineProperty(Sr,"__esModule",{value:!0}),Sr.stringQuadToQuad=Sr.quadToStringQuad=Sr.stringToTerm=Sr.getLiteralLanguage=Sr.getLiteralType=Sr.getLiteralValue=Sr.termToString=void 0;const u=hr(),n=new u.DataFactory;function o(p){if(p)switch(p.termType){case"NamedNode":return`<${s(p.value)}>`;case"BlankNode":return`_:${p.value}`;case"Literal":{const y=p;return`"${d(y.value)}"${y.datatype&&y.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&y.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?`^^<${y.datatype.value}>`:""}${y.language?`@${y.language}`:""}`}case"Quad":return`<<${o(p.subject)} ${o(p.predicate)} ${o(p.object)}${p.graph.termType==="DefaultGraph"?"":` ${o(p.graph)}`}>>`;case"Variable":return`?${p.value}`;case"DefaultGraph":return p.value}}Sr.termToString=o;function i(p){const y=/^"([^]*)"((\^\^.*)|(@.*))?$/u.exec(p);if(!y)throw new Error(`${p} is not a literal`);return y[1].replace(/\\"/ug,'"')}Sr.getLiteralValue=i;function t(p){const y=/^"[^]*"(?:\^\^<([^"]+)>|(@)[^@"]+)?$/u.exec(p);if(!y)throw new Error(`${p} is not a literal`);return y[1]||(y[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}Sr.getLiteralType=t;function e(p){const y=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/u.exec(p);if(!y)throw new Error(`${p} is not a literal`);return y[1]?y[1].toLowerCase():""}Sr.getLiteralLanguage=e;function r(p,y){if(y=y||n,!p||p.length===0)return y.defaultGraph();switch(p[0]){case"_":return y.blankNode(p.slice(2));case"?":if(!y.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return y.variable(p.slice(1));case'"':{const _=e(p),b=y.namedNode(t(p));return y.literal(i(p),_||b)}case"<":default:if(p.startsWith("<<")&&p.endsWith(">>")){const _=p.slice(2,-2),b=[];let m=0,g=0;for(let T=0;T<_.length;T++){const v=_[T];if(v==="<"&&m++,v===">"){if(m===0)throw new Error(`Found closing tag without opening tag in ${p}`);m--}v===" "&&m===0&&(b.push(_.slice(g,T)),g=T+1)}if(m!==0)throw new Error(`Found opening tag without closing tag in ${p}`);if(b.push(_.slice(g,_.length)),b.length!==3&&b.length!==4)throw new Error(`Nested quad syntax error ${p}`);return y.quad(r(b[0]),r(b[1]),r(b[2]),b[3]?r(b[3]):void 0)}if(!p.startsWith("<")||!p.endsWith(">"))throw new Error(`Detected invalid iri for named node (must be wrapped in <>): ${p}`);return y.namedNode(p.slice(1,-1))}}Sr.stringToTerm=r;function a(p){return{subject:o(p.subject),predicate:o(p.predicate),object:o(p.object),graph:o(p.graph)}}Sr.quadToStringQuad=a;function c(p,y){return y=y||n,y.quad(r(p.subject,y),r(p.predicate,y),r(p.object,y),r(p.graph,y))}Sr.stringQuadToQuad=c;function s(p){return p.replace(l,h)}function d(p){return l.test(p)&&(p=p.replace(l,h)),p}const l=/["\\\t\n\r\b\f\u0000-\u0019]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=new Map([["\\","\\\\"],['"','\\"'],["	","\\t"],[`
`,"\\n"],["\r","\\r"],["\b","\\b"],["\f","\\f"]]);function h(p){const y=f.get(p);if(!y){if(p.length===1){const b=p.charCodeAt(0).toString(16);return`${"\\u0000".slice(0,-b.length)}${b}`}const _=((p.charCodeAt(0)-55296)*1024+p.charCodeAt(1)+9216).toString(16);return`${"\\U00000000".slice(0,-_.length)}${_}`}return y}return Sr}var iF;function Lv(){return iF||(iF=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.termToString=u.stringToTerm=u.stringQuadToQuad=u.quadToStringQuad=u.getLiteralValue=u.getLiteralType=u.getLiteralLanguage=void 0;const n=Aee();Object.defineProperty(u,"getLiteralLanguage",{enumerable:!0,get:function(){return n.getLiteralLanguage}}),Object.defineProperty(u,"getLiteralType",{enumerable:!0,get:function(){return n.getLiteralType}}),Object.defineProperty(u,"getLiteralValue",{enumerable:!0,get:function(){return n.getLiteralValue}}),Object.defineProperty(u,"quadToStringQuad",{enumerable:!0,get:function(){return n.quadToStringQuad}}),Object.defineProperty(u,"stringQuadToQuad",{enumerable:!0,get:function(){return n.stringQuadToQuad}}),Object.defineProperty(u,"stringToTerm",{enumerable:!0,get:function(){return n.stringToTerm}}),Object.defineProperty(u,"termToString",{enumerable:!0,get:function(){return n.termToString}})})(KS)),KS}var aF;function Oee(){if(aF)return kh;aF=1,Object.defineProperty(kh,"__esModule",{value:!0}),kh.ActorQueryResultSerializeSparqlTsv=void 0;const u=ri(),n=be(),o=Lv(),i=Dt();let t=class aX extends u.ActorQueryResultSerializeFixedMediaTypes{constructor(r){super(r)}static bindingToTsvBindings(r){return r?(0,o.termToString)(r).replaceAll("	","\\t").replaceAll(`
`,"\\n").replaceAll("\r","\\r"):""}async testHandleChecked(r,a){return r.type!=="bindings"?(0,n.failTest)("This actor can only handle bindings streams."):(0,n.passTestVoid)()}async runHandle(r,a,c){const s=r,d=new i.Readable,l=await s.metadata();return d.push(`${l.variables.map(f=>f.variable.value).join("	")}
`),d.wrap(s.bindingsStream.map(f=>`${l.variables.map(h=>aX.bindingToTsvBindings(f.get(h.variable))).join("	")}
`)),{data:d}}};return kh.ActorQueryResultSerializeSparqlTsv=t,kh}var uF;function Eee(){return uF||(uF=1,(function(u){var n=gu&&gu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=gu&&gu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Oee(),u)})(gu)),gu}var mu={},Kh={},Wh={},oF;function xee(){if(oF)return Wh;oF=1,Object.defineProperty(Wh,"__esModule",{value:!0}),Wh.XmlSerializer=void 0;let u=class{constructor(){this.stack=[]}open(o,i){const t=`${this.identation()+this.formatTag(o,i,"open")}
`;return this.stack.push(o),t}close(){const o=this.stack.pop();if(o===void 0)throw new Error("There is no tag left to close");return`${this.identation()+this.formatTag(o,{},"close")}
`}serializeNode(o){if(o.children===void 0)return`${this.identation()+this.formatTag(o.name,o.attributes,"self-closing")}
`;if(typeof o.children=="string")return`${this.identation()+this.formatTag(o.name,o.attributes,"open")+this.escape(o.children)+this.formatTag(o.name,{},"close")}
`;const i=[];i.push(`${this.identation()+this.formatTag(o.name,o.attributes,"open")}
`),this.stack.push(o.name);for(const t of o.children)i.push(this.serializeNode(t));return this.stack.pop(),i.push(`${this.identation()+this.formatTag(o.name,{},"close")}
`),i.join("")}identation(){return this.stack.map(o=>"  ").join("")}formatTag(o,i,t){return`<${t==="close"?"/":""}${o}${Object.entries(i??{}).map(e=>` ${e[0]}="${this.escape(e[1])}"`)}${t==="self-closing"?"/":""}>`}escape(o){return o.replaceAll(/["&'<>]/gu,(i=>{switch(i){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;"}}))}};return Wh.XmlSerializer=u,u.header=`<?xml version="1.0" encoding="UTF-8"?>
`,Wh}var sF;function Iee(){if(sF)return Kh;sF=1,Object.defineProperty(Kh,"__esModule",{value:!0}),Kh.ActorQueryResultSerializeSparqlXml=void 0;const u=ri(),n=be(),o=pt(),i=Dt(),t=xee();let e=class uX extends u.ActorQueryResultSerializeFixedMediaTypes{constructor(a){super(a)}static bindingToXmlBindings(a,c){return{name:"binding",attributes:{name:c.value},children:[this.valueToXmlValue(a)]}}static valueToXmlValue(a){let c;switch(a.termType){case"Literal":return a.language?c={"xml:lang":a.language}:a.datatype&&a.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"?c={datatype:a.datatype.value}:c={},{name:"literal",attributes:c,children:a.value};case"BlankNode":return{name:"bnode",children:a.value};case"Quad":return{name:"triple",children:[{name:"subject",children:[this.valueToXmlValue(a.subject)]},{name:"predicate",children:[this.valueToXmlValue(a.predicate)]},{name:"object",children:[this.valueToXmlValue(a.object)]}]};default:return{name:"uri",children:a.value}}}async testHandleChecked(a,c){return["bindings","boolean"].includes(a.type)?(0,n.passTestVoid)():(0,n.failTest)("This actor can only handle bindings streams or booleans.")}async runHandle(a,c,s){const d=new i.Readable;d._read=()=>{};const l=new t.XmlSerializer,f=await a.metadata();if(d.push(t.XmlSerializer.header),d.push(l.open("sparql",{xmlns:"http://www.w3.org/2005/sparql-results#"})),d.push(l.serializeNode({name:"head",children:f.variables.map(h=>({name:"variable",attributes:{name:h.variable.value}}))})),a.type==="bindings"){function*h(){yield l.close(),yield l.close()}d.push(l.open("results"));const p=(0,o.wrap)(a.bindingsStream).map(y=>l.serializeNode({name:"result",children:[...y].map(([_,b])=>uX.bindingToXmlBindings(b,_))})).append((0,o.wrap)(h()));d.wrap(p)}else try{const h=await a.execute();d.push(l.serializeNode({name:"boolean",children:h.toString()})),d.push(l.close()),setTimeout(()=>d.push(null))}catch(h){setTimeout(()=>d.emit("error",h))}return{data:d}}};return Kh.ActorQueryResultSerializeSparqlXml=e,Kh}var cF;function Ree(){return cF||(cF=1,(function(u){var n=mu&&mu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=mu&&mu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Iee(),u)})(mu)),mu}var vu={},Yh={},dF;function Fee(){if(dF)return Yh;dF=1,Object.defineProperty(Yh,"__esModule",{value:!0}),Yh.ActorQueryResultSerializeTable=void 0;const u=ri(),n=Ce(),o=be(),i=tr(),t=gn(),e=Dt();let r=class PA extends u.ActorQueryResultSerializeFixedMediaTypes{constructor(c){super(c),this.padding=PA.repeat(" ",this.columnWidth)}static repeat(c,s){return c.repeat(s)}async testHandleChecked(c,s){return["bindings","quads"].includes(c.type)?(0,o.passTestVoid)():(0,o.failTest)("This actor can only handle bindings or quad streams.")}termToString(c){return c.termType==="Quad"?(0,i.termToString)(c):c.value}pad(c){return c.length<=this.columnWidth?c+this.padding.slice(c.length):`${c.slice(0,this.columnWidth-1)}`}pushHeader(c,s){const d=s.map(l=>this.pad(l.value)).join(" ");c.push(`${d}
${PA.repeat("-",d.length)}
`)}createRow(c,s){return`${c.map(d=>s.has(d)?this.termToString(s.get(d)):"").map(d=>this.pad(d)).join(" ")}
`}async runHandle(c,s,d){const l=new e.Readable;let f;if(c.type==="bindings"){f=c.bindingsStream.map(p=>this.createRow(h,p));const h=(await c.metadata()).variables.map(p=>p.variable);this.pushHeader(l,h)}else{f=c.quadStream.map(p=>`${(0,t.getTerms)(p).map(y=>this.pad(this.termToString(y))).join(" ")}
`);const h=c.context.getSafe(n.KeysInitQuery.dataFactory);this.pushHeader(l,t.QUAD_TERM_NAMES.map(p=>h.variable(p)))}return l.wrap(f),{data:l}}};return Yh.ActorQueryResultSerializeTable=r,Yh}var lF;function Nee(){return lF||(lF=1,(function(u){var n=vu&&vu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=vu&&vu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Fee(),u)})(vu)),vu}var Tu={},Zh={},wu={},ep={},Su={},Au={},tp={},rp={},fF;function Nf(){if(fF)return rp;fF=1,Object.defineProperty(rp,"__esModule",{value:!0}),rp.Translator=void 0;let u=class{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(o){throw new Error(`Invalid RDF ${o.datatype.value} value: '${o.value}'`)}registerHandler(o,i,t){for(const e of i)this.supportedRdfDatatypes.push(e),this.fromRdfHandlers[e.value]=o;for(const e of t){let r=this.toRdfHandlers[e];r||(this.toRdfHandlers[e]=r=[]),r.push(o)}}fromRdf(o,i){const t=this.fromRdfHandlers[o.datatype.value];return t?t.fromRdf(o,i):o.value}toRdf(o,i){const t=this.toRdfHandlers[typeof o];if(t)for(const e of t){const r=e.toRdf(o,i);if(r)return r}throw new Error(`Invalid JavaScript value: '${o}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}};return rp.Translator=u,rp}var hF;function Pee(){if(hF)return tp;hF=1,Object.defineProperty(tp,"__esModule",{value:!0}),tp.TypeHandlerBoolean=void 0;const u=Nf();let n=class oX{fromRdf(i,t){switch(i.value){case"true":return!0;case"false":return!1;case"1":return!0;case"0":return!1}return t&&u.Translator.incorrectRdfDataType(i),!1}toRdf(i,{datatype:t,dataFactory:e}){return e.literal(i?"true":"false",t||e.namedNode(oX.TYPE))}};return n.TYPE="http://www.w3.org/2001/XMLSchema#boolean",tp.TypeHandlerBoolean=n,tp}var np={},pF;function Dee(){if(pF)return np;pF=1,Object.defineProperty(np,"__esModule",{value:!0}),np.TypeHandlerDate=void 0;const u=Nf();let n=class DA{fromRdf(i,t){switch(t&&!i.value.match(DA.VALIDATORS[i.datatype.value.substr(33,i.datatype.value.length)])&&u.Translator.incorrectRdfDataType(i),i.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(i.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const e=i.value.split("-");return new Date(0,parseInt(e[0],10)-1,parseInt(e[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(i.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(i.value+"-01");default:return new Date(i.value)}}toRdf(i,{datatype:t,dataFactory:e}){if(t=t||e.namedNode(DA.TYPES[0]),!(i instanceof Date))return null;const r=i;let a;switch(t.value){case"http://www.w3.org/2001/XMLSchema#gDay":a=String(r.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":a=r.getUTCMonth()+1+"-"+r.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":a=String(r.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":a=r.getUTCFullYear()+"-"+(r.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":a=r.toISOString().replace(/T.*$/,"");break;default:a=r.toISOString()}return e.literal(a,t)}};return n.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],n.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/},np.TypeHandlerDate=n,np}var ip={},bF;function jee(){if(bF)return ip;bF=1,Object.defineProperty(ip,"__esModule",{value:!0}),ip.TypeHandlerNumberDouble=void 0;const u=Nf();let n=class sX{fromRdf(i,t){const e=parseFloat(i.value);return t&&isNaN(e)&&u.Translator.incorrectRdfDataType(i),e}toRdf(i,{datatype:t,dataFactory:e}){return t=t||e.namedNode(sX.TYPES[0]),isNaN(i)?e.literal("NaN",t):isFinite(i)?i%1===0?null:e.literal(i.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),t):e.literal(i>0?"INF":"-INF",t)}};return n.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"],ip.TypeHandlerNumberDouble=n,ip}var ap={},yF;function Lee(){if(yF)return ap;yF=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.TypeHandlerNumberInteger=void 0;const u=Nf();let n=class Q3{fromRdf(i,t){const e=parseInt(i.value,10);return t&&(isNaN(e)||i.value.indexOf(".")>=0)&&u.Translator.incorrectRdfDataType(i),e}toRdf(i,{datatype:t,dataFactory:e}){return e.literal(String(i),t||(i<=Q3.MAX_INT&&i>=Q3.MIN_INT?e.namedNode(Q3.TYPES[0]):e.namedNode(Q3.TYPES[1])))}};return n.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],n.MAX_INT=2147483647,n.MIN_INT=-2147483648,ap.TypeHandlerNumberInteger=n,ap}var up={},_F;function Mee(){if(_F)return up;_F=1,Object.defineProperty(up,"__esModule",{value:!0}),up.TypeHandlerString=void 0;let u=class{fromRdf(o){return o.value}toRdf(o,{datatype:i,dataFactory:t}){return t.literal(o,i)}};return u.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"],up.TypeHandlerString=u,up}var gF;function mF(){return gF||(gF=1,(function(u){var n=Au&&Au.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Au&&Au.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Pee(),u),o(Dee(),u),o(jee(),u),o(Lee(),u),o(Mee(),u)})(Au)),Au}var WS={},vF;function Cee(){return vF||(vF=1,Object.defineProperty(WS,"__esModule",{value:!0})),WS}var TF;function qee(){return TF||(TF=1,(function(u){var n=Su&&Su.__createBinding||(Object.create?(function(h,p,y,_){_===void 0&&(_=y);var b=Object.getOwnPropertyDescriptor(p,y);(!b||("get"in b?!p.__esModule:b.writable||b.configurable))&&(b={enumerable:!0,get:function(){return p[y]}}),Object.defineProperty(h,_,b)}):(function(h,p,y,_){_===void 0&&(_=y),h[_]=p[y]})),o=Su&&Su.__exportStar||function(h,p){for(var y in h)y!=="default"&&!Object.prototype.hasOwnProperty.call(p,y)&&n(p,h,y)};Object.defineProperty(u,"__esModule",{value:!0}),u.getSupportedJavaScriptPrimitives=u.getSupportedRdfDatatypes=u.getTermRaw=u.toRdf=u.fromRdf=void 0;const i=hr(),t=mF(),e=Nf();o(mF(),u),o(Cee(),u),o(Nf(),u);const r=new i.DataFactory,a=new e.Translator;a.registerHandler(new t.TypeHandlerString,t.TypeHandlerString.TYPES.map(h=>r.namedNode(h)),["string"]),a.registerHandler(new t.TypeHandlerBoolean,[t.TypeHandlerBoolean.TYPE].map(h=>r.namedNode(h)),["boolean"]),a.registerHandler(new t.TypeHandlerNumberDouble,t.TypeHandlerNumberDouble.TYPES.map(h=>r.namedNode(h)),["number"]),a.registerHandler(new t.TypeHandlerNumberInteger,t.TypeHandlerNumberInteger.TYPES.map(h=>r.namedNode(h)),["number"]),a.registerHandler(new t.TypeHandlerDate,t.TypeHandlerDate.TYPES.map(h=>r.namedNode(h)),["object"]);function c(h,p){return a.fromRdf(h,p)}u.fromRdf=c;function s(h,p){return p&&"namedNode"in p&&(p={dataFactory:p}),p=p||{},p&&!p.dataFactory&&(p.dataFactory=r),a.toRdf(h,p)}u.toRdf=s;function d(h,p){return h.termType==="Literal"?c(h,p):h.value}u.getTermRaw=d;function l(){return a.getSupportedRdfDatatypes()}u.getSupportedRdfDatatypes=l;function f(){return a.getSupportedJavaScriptPrimitives()}u.getSupportedJavaScriptPrimitives=f})(Su)),Su}var Ou={},op={},YS,wF;function cX(){if(wF)return YS;wF=1;var{Buffer:u}=ni(),n={},o=n.LEFT_BRACE=1,i=n.RIGHT_BRACE=2,t=n.LEFT_BRACKET=3,e=n.RIGHT_BRACKET=4,r=n.COLON=5,a=n.COMMA=6,c=n.TRUE=7,s=n.FALSE=8,d=n.NULL=9,l=n.STRING=10,f=n.NUMBER=11,h=n.START=17,p=n.STOP=18,y=n.TRUE1=33,_=n.TRUE2=34,b=n.TRUE3=35,m=n.FALSE1=49,g=n.FALSE2=50,T=n.FALSE3=51,v=n.FALSE4=52,A=n.NULL1=65,I=n.NULL2=66,q=n.NULL3=67,O=n.NUMBER1=81,w=n.NUMBER3=83,S=n.STRING1=97,E=n.STRING2=98,R=n.STRING3=99,L=n.STRING4=100,M=n.STRING5=101,B=n.STRING6=102,X=n.VALUE=113,J=n.KEY=114,ie=n.OBJECT=129,U=n.ARRAY=130,fe=92,me=47,he=8,te=12,xe=10,Ie=13,Fe=9,pe=64*1024;function ye(D){return u.alloc?u.alloc(D):new u(D)}function Q(){this.tState=h,this.value=void 0,this.string=void 0,this.stringBuffer=ye(pe),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=X,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:ye(2),3:ye(3),4:ye(4)},this.offset=-1}Q.toknam=function(D){for(var x=Object.keys(n),N=0,$=x.length;N<$;N++){var G=x[N];if(n[G]===D)return G}return D&&"0x"+D.toString(16)};var P=Q.prototype;return P.onError=function(D){throw D},P.charError=function(D,x){this.tState=p,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(D[x]))+" at position "+x+" in state "+Q.toknam(this.tState)))},P.appendStringChar=function(D){this.stringBufferOffset>=pe&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=D},P.appendStringBuf=function(D,x,N){var $=D.length;typeof x=="number"&&(typeof N=="number"?N<0?$=D.length-x+N:$=N-x:$=D.length-x),$<0&&($=0),this.stringBufferOffset+$>pe&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),D.copy(this.stringBuffer,this.stringBufferOffset,x,N),this.stringBufferOffset+=$},P.write=function(D){typeof D=="string"&&(D=new u(D));for(var x,N=0,$=D.length;N<$;N++)if(this.tState===h){if(x=D[N],this.offset++,x===123)this.onToken(o,"{");else if(x===125)this.onToken(i,"}");else if(x===91)this.onToken(t,"[");else if(x===93)this.onToken(e,"]");else if(x===58)this.onToken(r,":");else if(x===44)this.onToken(a,",");else if(x===116)this.tState=y;else if(x===102)this.tState=m;else if(x===110)this.tState=A;else if(x===34)this.string="",this.stringBufferOffset=0,this.tState=S;else if(x===45)this.string="-",this.tState=O;else if(x>=48&&x<64)this.string=String.fromCharCode(x),this.tState=w;else if(!(x===32||x===9||x===10||x===13))return this.charError(D,N)}else if(this.tState===S)if(x=D[N],this.bytes_remaining>0){for(var G=0;G<this.bytes_remaining;G++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+G]=D[G];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,N=N+G-1}else if(this.bytes_remaining===0&&x>=128){if(x<=193||x>244)return this.onError(new Error("Invalid UTF-8 character at position "+N+" in state "+Q.toknam(this.tState)));if(x>=194&&x<=223&&(this.bytes_in_sequence=2),x>=224&&x<=239&&(this.bytes_in_sequence=3),x>=240&&x<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+N>D.length){for(var V=0;V<=D.length-1-N;V++)this.temp_buffs[this.bytes_in_sequence][V]=D[N+V];this.bytes_remaining=N+this.bytes_in_sequence-D.length,N=D.length-1}else this.appendStringBuf(D,N,N+this.bytes_in_sequence),N=N+this.bytes_in_sequence-1}else if(x===34)this.tState=h,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(l,this.string),this.offset+=u.byteLength(this.string,"utf8")+1,this.string=void 0;else if(x===92)this.tState=E;else if(x>=32)this.appendStringChar(x);else return this.charError(D,N);else if(this.tState===E)if(x=D[N],x===34)this.appendStringChar(x),this.tState=S;else if(x===92)this.appendStringChar(fe),this.tState=S;else if(x===47)this.appendStringChar(me),this.tState=S;else if(x===98)this.appendStringChar(he),this.tState=S;else if(x===102)this.appendStringChar(te),this.tState=S;else if(x===110)this.appendStringChar(xe),this.tState=S;else if(x===114)this.appendStringChar(Ie),this.tState=S;else if(x===116)this.appendStringChar(Fe),this.tState=S;else if(x===117)this.unicode="",this.tState=R;else return this.charError(D,N);else if(this.tState===R||this.tState===L||this.tState===M||this.tState===B)if(x=D[N],x>=48&&x<64||x>64&&x<=70||x>96&&x<=102){if(this.unicode+=String.fromCharCode(x),this.tState++===B){var k=parseInt(this.unicode,16);this.unicode=void 0,this.highSurrogate!==void 0&&k>=56320&&k<57344?(this.appendStringBuf(new u(String.fromCharCode(this.highSurrogate,k))),this.highSurrogate=void 0):this.highSurrogate===void 0&&k>=55296&&k<56320?this.highSurrogate=k:(this.highSurrogate!==void 0&&(this.appendStringBuf(new u(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new u(String.fromCharCode(k)))),this.tState=S}}else return this.charError(D,N);else if(this.tState===O||this.tState===w)switch(x=D[N],x){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(x),this.tState=w;break;default:this.tState=h;var H=this.numberReviver(this.string,D,N);if(H)return H;this.offset+=this.string.length-1,this.string=void 0,N--;break}else if(this.tState===y)if(D[N]===114)this.tState=_;else return this.charError(D,N);else if(this.tState===_)if(D[N]===117)this.tState=b;else return this.charError(D,N);else if(this.tState===b)if(D[N]===101)this.tState=h,this.onToken(c,!0),this.offset+=3;else return this.charError(D,N);else if(this.tState===m)if(D[N]===97)this.tState=g;else return this.charError(D,N);else if(this.tState===g)if(D[N]===108)this.tState=T;else return this.charError(D,N);else if(this.tState===T)if(D[N]===115)this.tState=v;else return this.charError(D,N);else if(this.tState===v)if(D[N]===101)this.tState=h,this.onToken(s,!1),this.offset+=4;else return this.charError(D,N);else if(this.tState===A)if(D[N]===117)this.tState=I;else return this.charError(D,N);else if(this.tState===I)if(D[N]===108)this.tState=q;else return this.charError(D,N);else if(this.tState===q)if(D[N]===108)this.tState=h,this.onToken(d,null),this.offset+=3;else return this.charError(D,N)},P.onToken=function(D,x){},P.parseError=function(D,x){this.tState=p,this.onError(new Error("Unexpected "+Q.toknam(D)+(x?"("+JSON.stringify(x)+")":"")+" in state "+Q.toknam(this.state)))},P.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},P.pop=function(){var D=this.value,x=this.stack.pop();this.value=x.value,this.key=x.key,this.mode=x.mode,this.emit(D),this.mode||(this.state=X)},P.emit=function(D){this.mode&&(this.state=a),this.onValue(D)},P.onValue=function(D){},P.onToken=function(D,x){if(this.state===X)if(D===l||D===f||D===c||D===s||D===d)this.value&&(this.value[this.key]=x),this.emit(x);else if(D===o)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=J,this.mode=ie;else if(D===t)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=U,this.state=X;else if(D===i)if(this.mode===ie)this.pop();else return this.parseError(D,x);else if(D===e)if(this.mode===U)this.pop();else return this.parseError(D,x);else return this.parseError(D,x);else if(this.state===J)if(D===l)this.key=x,this.state=r;else if(D===i)this.pop();else return this.parseError(D,x);else if(this.state===r)if(D===r)this.state=X;else return this.parseError(D,x);else if(this.state===a)if(D===a)this.mode===U?(this.key++,this.state=X):this.mode===ie&&(this.state=J);else if(D===e&&this.mode===U||D===i&&this.mode===ie)this.pop();else return this.parseError(D,x);else return this.parseError(D,x)},P.numberReviver=function(D,x,N){var $=Number(D);if(isNaN($))return this.charError(x,N);D.match(/[0-9]+/)==D&&$.toString()!=D?this.onToken(l,D):this.onToken(f,$)},Q.C=n,YS=Q,YS}var SF;function Bee(){if(SF)return op;SF=1,Object.defineProperty(op,"__esModule",{value:!0}),op.SparqlJsonParser=void 0;const u=hr(),n=Dt(),o=cX();let i=class{constructor(e){var r;e=e||{},this.dataFactory=e.dataFactory||new u.DataFactory,this.prefixVariableQuestionMark=!!e.prefixVariableQuestionMark,this.suppressMissingStreamResultsError=(r=e.suppressMissingStreamResultsError)!==null&&r!==void 0?r:!0}parseJsonResults(e){return e.results.bindings.map(r=>this.parseJsonBindings(r))}parseJsonResultsStream(e){const r=l=>d.emit("error",l);e.on("error",r);const a=new o;a.onError=r;let c=!1,s=!1;a.onValue=l=>{if(a.key==="vars"&&a.stack.length===2&&a.stack[1].key==="head")d.emit("variables",l.map(f=>this.dataFactory.variable(f))),c=!0;else if(a.key==="results"&&a.stack.length===1)s=!0;else if(typeof a.key=="number"&&a.stack.length===3&&a.stack[1].key==="results"&&a.stack[2].key==="bindings")try{d.push(this.parseJsonBindings(l))}catch(f){d.emit("error",f)}else a.key==="metadata"&&a.stack.length===1&&d.emit("metadata",l)};const d=e.on("end",l=>{!s&&!this.suppressMissingStreamResultsError?d.emit("error",new Error("No valid SPARQL query results were found.")):c||d.emit("variables",[])}).pipe(new n.Transform({objectMode:!0,transform(l,f,h){a.write(l),h()}}));return d}parseJsonBindings(e){const r={};for(const a in e){const c=e[a];r[this.prefixVariableQuestionMark?"?"+a:a]=this.parseJsonValue(c)}return r}parseJsonValue(e){let r;switch(e.type){case"bnode":r=this.dataFactory.blankNode(e.value);break;case"literal":e["xml:lang"]?r=this.dataFactory.literal(e.value,e["xml:lang"]):e.datatype?r=this.dataFactory.literal(e.value,this.dataFactory.namedNode(e.datatype)):r=this.dataFactory.literal(e.value);break;case"typed-literal":r=this.dataFactory.literal(e.value,this.dataFactory.namedNode(e.datatype));break;case"triple":const a=e.value;if(!a||!a.subject||!a.predicate||!a.object)throw new Error("Invalid quoted triple: "+JSON.stringify(e));r=this.dataFactory.quad(this.parseJsonValue(a.subject),this.parseJsonValue(a.predicate),this.parseJsonValue(a.object));break;default:r=this.dataFactory.namedNode(e.value);break}return r}parseJsonBoolean(e){if("boolean"in e)return e.boolean;throw new Error("No valid ASK response was found.")}parseJsonBooleanStream(e){return new Promise((r,a)=>{const c=new o;c.onError=a,c.onValue=s=>{c.key==="boolean"&&typeof s=="boolean"&&c.stack.length===1&&r(s)},e.on("error",a).on("data",s=>c.write(s)).on("end",()=>a(new Error("No valid ASK response was found.")))})}};return op.SparqlJsonParser=i,op}var AF;function dX(){return AF||(AF=1,(function(u){var n=Ou&&Ou.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ou&&Ou.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Bee(),u)})(Ou)),Ou}var OF;function $ee(){if(OF)return ep;OF=1,Object.defineProperty(ep,"__esModule",{value:!0}),ep.Converter=void 0;const u=qee(),n=dX();let o=class Si{constructor(t){t=t||{delimiter:"_"},t.prefixVariableQuestionMark=!1,this.delimiter=t.delimiter||"_",this.parser=new n.SparqlJsonParser(t),this.materializeRdfJsTerms=t.materializeRdfJsTerms}static addValueToTree(t,e,r,a,c,s){const d=e[0],l=a?a+s+d:d,f=c.singularizeVariables[l];if(e.length===1)f?t[d]||(t[d]=r):(t[d]||(t[d]=[]),t[d].push(r));else{let h;f?(t[d]||(t[d]={}),h=t[d]):(t[d]||(t[d]=[{}]),h=t[d][0]),Si.addValueToTree(h,e.slice(1),r,l,c,s)}}static mergeTrees(t,e){if(typeof t!=typeof e)throw new Error(`Two incompatible tree nodes were found: ${typeof t} and ${typeof e}`);if(Array.isArray(t)!==Array.isArray(e))throw new Error(`Two incompatible tree nodes were found: Array?${Array.isArray(t)} and Array?${Array.isArray(e)}`);if(typeof t=="object"&&typeof e=="object"){if(t.termType&&e.termType)return t.equals(e)?{valid:!0,result:t}:{valid:!1,result:t};if(Array.isArray(t)&&Array.isArray(e)){if(t.length>0){const r=[];let a=!1;for(const c of t){const s=Si.mergeTrees(c,e[0]);s.valid?(a=!0,r.push(s.result)):r.push(c)}if(a)return{valid:!0,result:r}}return{valid:!0,result:t.concat(e)}}else{const r={};for(const a in e)r[a]=e[a];for(const a in t)if(r[a]){const c=Si.mergeTrees(t[a],r[a]);if(c.valid)r[a]=c.result;else return{valid:!1,result:t}}else r[a]=t[a];return{valid:!0,result:r}}}else throw new Error(`Unmergable tree types: ${typeof t} and ${typeof e}`)}static materializeTree(t){if(t.termType)return(0,u.getTermRaw)(t);if(Array.isArray(t))return t.map(Si.materializeTree);{const e={};for(const r in t)e[r]=Si.materializeTree(t[r]);return e}}sparqlJsonResultsToTree(t,e){return this.bindingsToTree(this.parser.parseJsonResults(t),e||{singularizeVariables:{}})}bindingsToTree(t,e){const r=e&&e.singularizeVariables[""];let a=r?{}:[];for(const c of t){const s=r?{}:[{}];for(const d in c){const l=d.split(this.delimiter),f=c[d];Si.addValueToTree(r?s:s[0],l,f,"",e,this.delimiter)}a=Si.mergeTrees(a,s).result}return this.materializeRdfJsTerms&&(a=Si.materializeTree(a)),a}};return ep.Converter=o,ep}var EF;function Uee(){return EF||(EF=1,(function(u){var n=wu&&wu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=wu&&wu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o($ee(),u)})(wu)),wu}var xF;function IF(){if(xF)return Zh;xF=1,Object.defineProperty(Zh,"__esModule",{value:!0}),Zh.ActorQueryResultSerializeTree=void 0;const u=ri(),n=Ce(),o=be(),i=Dt(),t=Uee();let e=class lX extends u.ActorQueryResultSerializeFixedMediaTypes{constructor(a){super(a)}static async bindingsStreamToGraphQl(a,c,s){const d=o.ActionContext.ensureActionContext(c),l=new t.Converter(s),f={singularizeVariables:d.get(n.KeysInitQuery.graphqlSingularizeVariables)??{}};return l.bindingsToTree(await a.map(h=>Object.fromEntries([...h].map(([p,y])=>[p.value,y]))).toArray(),f)}async testHandleChecked(a){return a.type!=="bindings"?(0,o.failTest)("This actor can only handle bindings streams."):(0,o.passTestVoid)()}async runHandle(a,c){const s=new i.Readable;return s._read=()=>{s._read=()=>{},lX.bindingsStreamToGraphQl(a.bindingsStream,a.context,{materializeRdfJsTerms:!0}).then(d=>{s.push(JSON.stringify(d,null,"  ")),s.push(null)}).catch(d=>s.emit("error",d))},{data:s}}};return Zh.ActorQueryResultSerializeTree=e,Zh}var RF;function Vee(){return RF||(RF=1,(function(u){var n=Tu&&Tu.__createBinding||(Object.create?(function(e,r,a,c){c===void 0&&(c=a);var s=Object.getOwnPropertyDescriptor(r,a);(!s||("get"in s?!r.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return r[a]}}),Object.defineProperty(e,c,s)}):(function(e,r,a,c){c===void 0&&(c=a),e[c]=r[a]})),o=Tu&&Tu.__exportStar||function(e,r){for(var a in e)a!=="default"&&!Object.prototype.hasOwnProperty.call(r,a)&&n(r,e,a)};Object.defineProperty(u,"__esModule",{value:!0}),u.bindingsStreamToGraphQl=void 0;const i=IF(),{bindingsStreamToGraphQl:t}=i.ActorQueryResultSerializeTree;u.bindingsStreamToGraphQl=t,o(IF(),u)})(Tu)),Tu}var Eu={},sp={},FF;function Qee(){if(FF)return sp;FF=1,Object.defineProperty(sp,"__esModule",{value:!0}),sp.MediatorCombineUnion=void 0;const u=be();let n=class extends u.Mediator{constructor(i){super(i),this.combiner=this.createCombiner()}async mediate(i){let t;try{t=this.publish(i)}catch{t=[]}if(this.filterFailures){const a=[];for(const c of t)(await c.reply).isPassed()&&a.push(c);t=a}const e=[];await Promise.all(t.map(async({reply:a},c)=>{const s=await a,d=s.getOrThrow();return e[c]=s.getSideData(),d}));const r=await Promise.all(t.map((a,c)=>a.actor.runObservable(i,e[c])));return this.combiner(r)}mediateWith(){throw new Error("Method not supported.")}createCombiner(){return i=>{const t={};return t[this.field]={},[{}].concat(i.map(e=>e[this.field])).forEach(e=>{t[this.field]={...e,...t[this.field]}}),t}}};return sp.MediatorCombineUnion=n,sp}var NF;function Mi(){return NF||(NF=1,(function(u){var n=Eu&&Eu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Eu&&Eu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Qee(),u)})(Eu)),Eu}var xu={},cp={},PF;function Hee(){if(PF)return cp;PF=1,Object.defineProperty(cp,"__esModule",{value:!0}),cp.MediatorNumber=void 0;const u=be();let n=class extends u.Mediator{constructor(i){super(i),this.indexPicker=this.createIndexPicker()}createIndexPicker(){switch(this.type){case"min":return i=>i.reduce((t,e,r)=>{const a=this.getOrDefault(e[this.field],Number.POSITIVE_INFINITY);return a!==null&&(Number.isNaN(t[0])||t[0]>a)?[a,r]:t},[Number.NaN,-1])[1];case"max":return i=>i.reduce((t,e,r)=>{const a=this.getOrDefault(e[this.field],Number.NEGATIVE_INFINITY);return a!==null&&(Number.isNaN(t[0])||t[0]<a)?[a,r]:t},[Number.NaN,-1])[1];default:throw new Error(`No valid "type" value was given, must be either 'min' or 'max', but got: ${this.type}`)}}getOrDefault(i,t){return i===void 0?t:i}async mediateWith(i,t){let e=await Promise.all(t.map(({reply:d})=>d));const r=[];if(this.ignoreFailures){const d={};d[this.field]=null,e=e.map(l=>l.isFailed()?(r.push(l.getFailMessage()),(0,u.passTestWithSideData)(d,void 0)):l)}const a=[],c=e.map((d,l)=>{const f=d.getOrThrow();return a[l]=d.getSideData(),f}),s=this.indexPicker(c);return s<0?(0,u.failTest)(this.constructFailureMessage(i,r)):(0,u.passTestWithSideData)(t[s].actor,a[s])}};return cp.MediatorNumber=n,cp}var DF;function sf(){return DF||(DF=1,(function(u){var n=xu&&xu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=xu&&xu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Hee(),u)})(xu)),xu}var Iu={},dp={},Ru={},lp={},bi={},jF;function MO(){if(jF)return bi;jF=1,Object.defineProperty(bi,"__esModule",{value:!0}),bi.ActorDereferenceBase=bi.isHardError=bi.emptyReadable=void 0;const u=Ce(),n=be(),o=Dt();function i(){const r=new o.Readable;return r.push(null),r}bi.emptyReadable=i;function t(r){return!r.get(u.KeysInitQuery.lenient)}bi.isHardError=t;let e=class extends n.Actor{constructor(a){super(a)}async dereferenceErrorHandler(a,c,s){if(t(a.context))throw c;return this.logWarn(a.context,c.message,()=>({url:a.url})),{...s,data:i()}}};return bi.ActorDereferenceBase=e,bi}var LF;function Gee(){if(LF)return lp;LF=1,Object.defineProperty(lp,"__esModule",{value:!0}),lp.ActorDereference=void 0;const u=MO();let n=class extends u.ActorDereferenceBase{constructor(i){super(i)}async handleDereferenceErrors(i,t,e,r=0){return this.dereferenceErrorHandler(i,t,{url:i.url,exists:!1,headers:e,requestTime:r})}};return lp.ActorDereference=n,lp}var Fu={},MF;function zee(){if(MF)return Fu;MF=1,Object.defineProperty(Fu,"__esModule",{value:!0}),Fu.ActorDereferenceParse=Fu.getMediaTypeFromExtension=void 0;const u=be(),n=Dt(),o=MO();function i(e,r){const a=e.lastIndexOf(".");return a>=0&&(r==null?void 0:r[e.slice(a+1)])||""}Fu.getMediaTypeFromExtension=i;let t=class extends o.ActorDereferenceBase{constructor(r){super(r)}async test(r){return(0,u.passTestVoid)()}handleDereferenceStreamErrors(r,a){return(0,o.isHardError)(r.context)||(a.on("error",c=>{this.logWarn(r.context,c.message,()=>({url:r.url})),a.push(null)}),a=a.pipe(new n.PassThrough({objectMode:!0}))),a}async run(r){var d,l,f,h;const{context:a}=r,c=await this.mediatorDereference.mediate({...r,mediaTypes:async()=>{var p,y;return(y=await((p=this.mediatorParseMediatypes)==null?void 0:p.mediate({context:a,mediaTypes:!0})))==null?void 0:y.mediaTypes}});let s;if(c.exists)try{s=(await this.mediatorParse.mediate({context:a,handle:{context:a,...c,metadata:await this.getMetadata(c)},handleMediaType:c.mediaType||r.mediaType||i(c.url,this.mediaMappings)})).handle,s.data=this.handleDereferenceStreamErrors(r,s.data)}catch(p){await((l=(d=c.data).close)==null?void 0:l.call(d)),s=await this.dereferenceErrorHandler(r,p,{})}else await((h=(f=c.data).close)==null?void 0:h.call(f)),s={data:(0,o.emptyReadable)()};return{...c,...s}}};return Fu.ActorDereferenceParse=t,Fu}var CF;function CO(){return CF||(CF=1,(function(u){var n=Ru&&Ru.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ru&&Ru.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Gee(),u),o(zee(),u),o(MO(),u)})(Ru)),Ru}var qF;function Xee(){if(qF)return dp;qF=1,Object.defineProperty(dp,"__esModule",{value:!0}),dp.ActorDereferenceFallback=void 0;const u=CO(),n=be();let o=class extends u.ActorDereference{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}async run(t){return this.handleDereferenceErrors(t,new Error(`Could not dereference '${t.url}'`))}};return dp.ActorDereferenceFallback=o,dp}var BF;function Jee(){return BF||(BF=1,(function(u){var n=Iu&&Iu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Iu&&Iu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Xee(),u)})(Iu)),Iu}var Nu={},fp={},Pu={},hp={},$F;function kee(){if($F)return hp;$F=1,Object.defineProperty(hp,"__esModule",{value:!0}),hp.ActorRdfJoinEntriesSort=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i)}};return hp.ActorRdfJoinEntriesSort=n,hp}var UF;function fX(){return UF||(UF=1,(function(u){var n=Pu&&Pu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Pu&&Pu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(kee(),u)})(Pu)),Pu}var VF;function Kee(){if(VF)return fp;VF=1,Object.defineProperty(fp,"__esModule",{value:!0}),fp.ActorRdfJoinEntriesSortCardinality=void 0;const u=fX(),n=be();let o=class extends u.ActorRdfJoinEntriesSort{constructor(t){super(t)}async test(t){return(0,n.passTest)({accuracy:t.entries.length===0?1:t.entries.reduce((e,r)=>e+(Number.isFinite(r.metadata.cardinality.value)?1:0),0)/t.entries.length})}async run(t){return{entries:[...t.entries].sort((r,a)=>r.metadata.cardinality.value-a.metadata.cardinality.value)}}};return fp.ActorRdfJoinEntriesSortCardinality=o,fp}var QF;function Wee(){return QF||(QF=1,(function(u){var n=Nu&&Nu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Nu&&Nu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Kee(),u)})(Nu)),Nu}var Du={},ju={},Lu={},pp={},HF;function Yee(){if(HF)return pp;HF=1,Object.defineProperty(pp,"__esModule",{value:!0}),pp.ActorRdfJoinSelectivity=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i)}};return pp.ActorRdfJoinSelectivity=n,pp}var GF;function Zee(){return GF||(GF=1,(function(u){var n=Lu&&Lu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Lu&&Lu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Yee(),u)})(Lu)),Lu}var zF;function ete(){if(zF)return ju;zF=1,Object.defineProperty(ju,"__esModule",{value:!0}),ju.JoinTypes=ju.ActorRdfJoinSelectivityVariableCounting=void 0;const u=Zee(),n=be(),o=dt();let i=class Pl extends u.ActorRdfJoinSelectivity{constructor(r){super(r)}async test(r){return(0,n.passTest)({accuracy:.5})}static getPatternCost(r){let a=1;return r.subject.termType==="Variable"&&(a+=4),(r.predicate.termType==="Variable"||r.type===o.Algebra.types.PATH)&&(a+=1),r.object.termType==="Variable"&&(a+=2),r.graph.termType==="Variable"&&(a+=1),a/9}static getJoinTypes(r,a){const c=[];return r.subject.termType==="Variable"?(r.subject.equals(a.subject)&&c.push(t.unboundSS),a.type==="pattern"&&r.subject.equals(a.predicate)&&c.push(t.unboundSP),r.subject.equals(a.object)&&c.push(t.unboundSO),r.subject.equals(a.graph)&&c.push(t.unboundSG)):(r.subject.equals(a.subject)&&c.push(t.boundSS),a.type==="pattern"&&r.subject.equals(a.predicate)&&c.push(t.boundSP),r.subject.equals(a.object)&&c.push(t.boundSO),r.subject.equals(a.graph)&&c.push(t.boundSG)),r.type==="pattern"&&(r.predicate.termType==="Variable"?(r.predicate.equals(a.subject)&&c.push(t.unboundPS),a.type==="pattern"&&r.predicate.equals(a.predicate)&&c.push(t.unboundPP),r.predicate.equals(a.object)&&c.push(t.unboundPO),r.predicate.equals(a.graph)&&c.push(t.unboundPG)):(r.predicate.equals(a.subject)&&c.push(t.boundPS),a.type==="pattern"&&r.predicate.equals(a.predicate)&&c.push(t.boundPP),r.predicate.equals(a.object)&&c.push(t.boundPO),r.predicate.equals(a.graph)&&c.push(t.boundPG))),r.object.termType==="Variable"?(r.object.equals(a.subject)&&c.push(t.unboundOS),a.type==="pattern"&&r.object.equals(a.predicate)&&c.push(t.unboundOP),r.object.equals(a.object)&&c.push(t.unboundOO),r.object.equals(a.graph)&&c.push(t.unboundOG)):(r.object.equals(a.subject)&&c.push(t.boundOS),a.type==="pattern"&&r.object.equals(a.predicate)&&c.push(t.boundOP),r.object.equals(a.object)&&c.push(t.boundOO),r.object.equals(a.graph)&&c.push(t.boundOG)),r.graph.termType==="Variable"?(r.graph.equals(a.subject)&&c.push(t.unboundGS),a.type==="pattern"&&r.graph.equals(a.predicate)&&c.push(t.unboundGP),r.graph.equals(a.object)&&c.push(t.unboundGO),r.graph.equals(a.graph)&&c.push(t.unboundGG)):(r.graph.equals(a.subject)&&c.push(t.boundGS),a.type==="pattern"&&r.graph.equals(a.predicate)&&c.push(t.boundGP),r.graph.equals(a.object)&&c.push(t.boundGO),r.graph.equals(a.graph)&&c.push(t.boundGG)),c}static getOperationsPairwiseJoinCost(r,a){let c=Pl.MAX_PAIRWISE_COST;for(const s of Pl.getJoinTypes(r,a))switch(s){case t.boundSS:c-=4;break;case t.boundSP:c-=6;break;case t.boundSO:c-=2;break;case t.boundSG:c-=6;break;case t.boundPS:c-=6;break;case t.boundPP:return 1;case t.boundPO:c-=6;break;case t.boundPG:c-=6;break;case t.boundOS:c-=2;break;case t.boundOP:c-=6;break;case t.boundOO:c-=2;break;case t.boundOG:c-=6;break;case t.boundGS:c-=6;break;case t.boundGP:c-=6;break;case t.boundGO:c-=6;break;case t.boundGG:c-=6;break;case t.unboundSS:c-=2;break;case t.unboundSP:c-=3;break;case t.unboundSO:c-=1;break;case t.unboundSG:c-=3;break;case t.unboundPS:c-=3;break;case t.unboundPP:c-=3;break;case t.unboundPO:c-=3;break;case t.unboundPG:c-=3;break;case t.unboundOS:c-=1;break;case t.unboundOP:c-=3;break;case t.unboundOO:c-=1;break;case t.unboundOG:c-=3;break;case t.unboundGS:c-=3;break;case t.unboundGP:c-=3;break;case t.unboundGO:c-=3;break;case t.unboundGG:c-=3;break}return c/Pl.MAX_PAIRWISE_COST}static getOperationsJoinCost(r){const a=[];for(const d of r)o.Util.recurseOperation(d,{[o.Algebra.types.PATTERN](l){return a.push(l),!1},[o.Algebra.types.PATH](l){return a.push(l),!1}});let c=0,s=0;for(const d of a)for(const l of a)d!==l&&(c+=Pl.getOperationsPairwiseJoinCost(d,l),s++);return s===0?1:c/s*a.reduce((d,l)=>d*Pl.getPatternCost(l),1)}async run(r){return r.entries.length<=1?{selectivity:1}:{selectivity:Pl.getOperationsJoinCost(r.entries.map(a=>a.operation))}}};ju.ActorRdfJoinSelectivityVariableCounting=i,i.MAX_PAIRWISE_COST=82;var t;return(function(e){e[e.boundSS=0]="boundSS",e[e.boundSP=1]="boundSP",e[e.boundSO=2]="boundSO",e[e.boundSG=3]="boundSG",e[e.boundPS=4]="boundPS",e[e.boundPP=5]="boundPP",e[e.boundPO=6]="boundPO",e[e.boundPG=7]="boundPG",e[e.boundOS=8]="boundOS",e[e.boundOP=9]="boundOP",e[e.boundOO=10]="boundOO",e[e.boundOG=11]="boundOG",e[e.boundGS=12]="boundGS",e[e.boundGP=13]="boundGP",e[e.boundGO=14]="boundGO",e[e.boundGG=15]="boundGG",e[e.unboundSS=16]="unboundSS",e[e.unboundSP=17]="unboundSP",e[e.unboundSO=18]="unboundSO",e[e.unboundSG=19]="unboundSG",e[e.unboundPS=20]="unboundPS",e[e.unboundPP=21]="unboundPP",e[e.unboundPO=22]="unboundPO",e[e.unboundPG=23]="unboundPG",e[e.unboundOS=24]="unboundOS",e[e.unboundOP=25]="unboundOP",e[e.unboundOO=26]="unboundOO",e[e.unboundOG=27]="unboundOG",e[e.unboundGS=28]="unboundGS",e[e.unboundGP=29]="unboundGP",e[e.unboundGO=30]="unboundGO",e[e.unboundGG=31]="unboundGG"})(t||(ju.JoinTypes=t={})),ju}var XF;function tte(){return XF||(XF=1,(function(u){var n=Du&&Du.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Du&&Du.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ete(),u)})(Du)),Du}var Mu={},bp={},Cu={},yp={},JF;function rte(){if(JF)return yp;JF=1,Object.defineProperty(yp,"__esModule",{value:!0}),yp.ActorRdfMetadata=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i)}};return yp.ActorRdfMetadata=n,yp}var kF;function hX(){return kF||(kF=1,(function(u){var n=Cu&&Cu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Cu&&Cu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(rte(),u)})(Cu)),Cu}var KF;function nte(){if(KF)return bp;KF=1,Object.defineProperty(bp,"__esModule",{value:!0}),bp.ActorRdfMetadataPrimaryTopic=void 0;const u=hX(),n=be(),o=Dt();let i=class extends u.ActorRdfMetadata{constructor(e){super(e)}async test(e){return e.triples?(0,n.failTest)("This actor only supports non-triple quad streams."):(0,n.passTestVoid)()}async run(e){const r=new o.Readable({objectMode:!0}),a=new o.Readable({objectMode:!0}),c=()=>{r._read=a._read=()=>{},e.quads.on("error",f=>{r.emit("error",f),a.emit("error",f)});const s={};let d;const l={};e.quads.on("data",f=>{f.predicate.value==="http://rdfs.org/ns/void#subset"&&f.object.value===e.url?d=f.subject.value:f.predicate.value==="http://xmlns.com/foaf/0.1/primaryTopic"&&(l[f.object.value]=f.subject.value);let h=s[f.graph.value];h||(h=s[f.graph.value]=[]),h.push(f)}),e.quads.on("end",()=>{const f=d?l[d]:void 0;for(const h in s)if(h===f){for(const p of s[h])a.push(p);if(this.metadataToData)for(const p of s[h])r.push(p)}else{for(const p of s[h])r.push(p);if(!f&&this.dataToMetadataOnInvalidMetadataGraph)for(const p of s[h])a.push(p)}r.push(null),a.push(null)})};return r._read=a._read=()=>{c()},{data:r,metadata:a}}};return bp.ActorRdfMetadataPrimaryTopic=i,bp}var WF;function ite(){return WF||(WF=1,(function(u){var n=Mu&&Mu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Mu&&Mu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(nte(),u)})(Mu)),Mu}var qu={},_p={},YF;function ate(){if(YF)return _p;YF=1,Object.defineProperty(_p,"__esModule",{value:!0}),_p.ActorRdfMetadataAll=void 0;const u=hX(),n=be(),o=Dt();let i=class extends u.ActorRdfMetadata{constructor(e){super(e)}async test(e){return(0,n.passTestVoid)()}async run(e){const r=new o.Readable({objectMode:!0}),a=new o.Readable({objectMode:!0});e.quads.on("error",s=>{r.emit("error",s),a.emit("error",s)}),e.quads.on("end",()=>{r.push(null),a.push(null)});const c=r._read=a._read=s=>{for(;s>0;){const d=e.quads.read();if(d===null)return e.quads.once("readable",()=>c(s));s--,r.push(d),a.push(d)}};return{data:r,metadata:a}}};return _p.ActorRdfMetadataAll=i,_p}var ZF;function ute(){return ZF||(ZF=1,(function(u){var n=qu&&qu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=qu&&qu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ate(),u)})(qu)),qu}var Bu={},gp={},$u={},mp={},e9;function ote(){if(e9)return mp;e9=1,Object.defineProperty(mp,"__esModule",{value:!0}),mp.ActorRdfMetadataAccumulate=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i)}};return mp.ActorRdfMetadataAccumulate=n,mp}var t9;function qO(){return t9||(t9=1,(function(u){var n=$u&&$u.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=$u&&$u.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ote(),u)})($u)),$u}var r9;function ste(){if(r9)return gp;r9=1,Object.defineProperty(gp,"__esModule",{value:!0}),gp.ActorRdfMetadataAccumulateCardinality=void 0;const u=qO(),n=be();let o=class extends u.ActorRdfMetadataAccumulate{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}async run(t){if(t.mode==="initialize")return{metadata:{cardinality:{type:"exact",value:0}}};const e={...t.accumulatedMetadata.cardinality};if(e.dataset){if(t.accumulatedMetadata.defaultGraph===e.dataset&&e.dataset!==t.appendingMetadata.cardinality.dataset)return{metadata:{cardinality:t.appendingMetadata.cardinality}};if(t.appendingMetadata.cardinality.dataset){if(e.dataset!==t.appendingMetadata.cardinality.dataset&&t.appendingMetadata.subsetOf===e.dataset)return{metadata:{cardinality:t.appendingMetadata.cardinality}};if(e.dataset===t.appendingMetadata.cardinality.dataset)return{metadata:{cardinality:e}};delete e.dataset}else return{metadata:{cardinality:e}}}return!t.appendingMetadata.cardinality||!Number.isFinite(t.appendingMetadata.cardinality.value)?(e.type="estimate",e.value=Number.POSITIVE_INFINITY):(t.appendingMetadata.cardinality.type==="estimate"&&(e.type="estimate"),e.value+=t.appendingMetadata.cardinality.value),{metadata:{cardinality:e}}}};return gp.ActorRdfMetadataAccumulateCardinality=o,gp}var n9;function cte(){return n9||(n9=1,(function(u){var n=Bu&&Bu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Bu&&Bu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ste(),u)})(Bu)),Bu}var Uu={},vp={},i9;function dte(){if(i9)return vp;i9=1,Object.defineProperty(vp,"__esModule",{value:!0}),vp.ActorRdfMetadataAccumulatePageSize=void 0;const u=qO(),n=be();let o=class extends u.ActorRdfMetadataAccumulate{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}async run(t){return t.mode==="initialize"?{metadata:{}}:{metadata:{..."pageSize"in t.accumulatedMetadata||"pageSize"in t.appendingMetadata?{pageSize:(t.accumulatedMetadata.pageSize??0)+(t.appendingMetadata.pageSize??0)}:{}}}}};return vp.ActorRdfMetadataAccumulatePageSize=o,vp}var a9;function lte(){return a9||(a9=1,(function(u){var n=Uu&&Uu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Uu&&Uu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(dte(),u)})(Uu)),Uu}var Vu={},Tp={},u9;function fte(){if(u9)return Tp;u9=1,Object.defineProperty(Tp,"__esModule",{value:!0}),Tp.ActorRdfMetadataAccumulateRequestTime=void 0;const u=qO(),n=be();let o=class extends u.ActorRdfMetadataAccumulate{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}async run(t){return t.mode==="initialize"?{metadata:{}}:{metadata:{..."requestTime"in t.accumulatedMetadata||"requestTime"in t.appendingMetadata?{requestTime:(t.accumulatedMetadata.requestTime??0)+(t.appendingMetadata.requestTime??0)}:{}}}}};return Tp.ActorRdfMetadataAccumulateRequestTime=o,Tp}var o9;function hte(){return o9||(o9=1,(function(u){var n=Vu&&Vu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Vu&&Vu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(fte(),u)})(Vu)),Vu}var Qu={},wp={},Hu={},Sp={},s9;function pte(){if(s9)return Sp;s9=1,Object.defineProperty(Sp,"__esModule",{value:!0}),Sp.ActorRdfMetadataExtract=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i)}};return Sp.ActorRdfMetadataExtract=n,Sp}var c9;function Ni(){return c9||(c9=1,(function(u){var n=Hu&&Hu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Hu&&Hu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(pte(),u)})(Hu)),Hu}var ZS={exports:{}},d9;function bte(){return d9||(d9=1,(function(u){(function(n){var o=(function(){function p(y){this.options=y}return p.prototype.toString=function(){return JSON&&JSON.stringify?JSON.stringify(this.options):this.options},p})(),i=(function(){function p(I){return Object.prototype.toString.apply(I)==="[object Array]"}function y(I){return Object.prototype.toString.apply(I)==="[object String]"}function _(I){return Object.prototype.toString.apply(I)==="[object Number]"}function b(I){return Object.prototype.toString.apply(I)==="[object Boolean]"}function m(I,q){var O="",w=!0,S;for(S=0;S<I.length;S+=1)w?w=!1:O+=q,O+=I[S];return O}function g(I,q){for(var O=[],w=0;w<I.length;w+=1)O.push(q(I[w]));return O}function T(I,q){for(var O=[],w=0;w<I.length;w+=1)q(I[w])&&O.push(I[w]);return O}function v(I){if(typeof I!="object"||I===null)return I;Object.freeze(I);var q,O;for(O in I)I.hasOwnProperty(O)&&(q=I[O],typeof q=="object"&&A(q));return I}function A(I){return typeof Object.freeze=="function"?v(I):I}return{isArray:p,isString:y,isNumber:_,isBoolean:b,join:m,map:g,filter:T,deepFreeze:A}})(),t=(function(){function p(b){return b>="a"&&b<="z"||b>="A"&&b<="Z"}function y(b){return b>="0"&&b<="9"}function _(b){return y(b)||b>="a"&&b<="f"||b>="A"&&b<="F"}return{isAlpha:p,isDigit:y,isHexDigit:_}})(),e=(function(){var p={encode:function(T){return unescape(encodeURIComponent(T))},numBytes:function(T){return T<=127?1:194<=T&&T<=223?2:224<=T&&T<=239?3:240<=T&&T<=244?4:0},isValidFollowingCharCode:function(T){return 128<=T&&T<=191}};function y(T){var v="",A=p.encode(T),I,q;for(q=0;q<A.length;q+=1)I=A.charCodeAt(q),v+="%"+(I<16?"0":"")+I.toString(16).toUpperCase();return v}function _(T,v){return T.charAt(v)==="%"&&t.isHexDigit(T.charAt(v+1))&&t.isHexDigit(T.charAt(v+2))}function b(T,v){return parseInt(T.substr(v,2),16)}function m(T){if(!_(T,0))return!1;var v=b(T,1),A=p.numBytes(v);if(A===0)return!1;for(var I=1;I<A;I+=1)if(!_(T,3*I)||!p.isValidFollowingCharCode(b(T,3*I+1)))return!1;return!0}function g(T,v){var A=T.charAt(v);if(!_(T,v))return A;var I=b(T,v+1),q=p.numBytes(I);if(q===0)return A;for(var O=1;O<q;O+=1)if(!_(T,v+3*O)||!p.isValidFollowingCharCode(b(T,v+3*O+1)))return A;return T.substr(v,3*q)}return{encodeCharacter:y,isPctEncoded:m,pctCharAt:g}})(),r=(function(){function p(b){return t.isAlpha(b)||t.isDigit(b)||b==="_"||e.isPctEncoded(b)}function y(b){return t.isAlpha(b)||t.isDigit(b)||b==="-"||b==="."||b==="_"||b==="~"}function _(b){return b===":"||b==="/"||b==="?"||b==="#"||b==="["||b==="]"||b==="@"||b==="!"||b==="$"||b==="&"||b==="("||b===")"||b==="*"||b==="+"||b===","||b===";"||b==="="||b==="'"}return{isVarchar:p,isUnreserved:y,isReserved:_}})(),a=(function(){function p(m,g){var T="",v,A="";for((typeof m=="number"||typeof m=="boolean")&&(m=m.toString()),v=0;v<m.length;v+=A.length)A=m.charAt(v),T+=r.isUnreserved(A)||g&&r.isReserved(A)?A:e.encodeCharacter(A);return T}function y(m){return p(m,!0)}function _(m,g){var T=e.pctCharAt(m,g);return T.length>1||r.isReserved(T)||r.isUnreserved(T)?T:e.encodeCharacter(T)}function b(m){var g="",T,v="";for(T=0;T<m.length;T+=v.length)v=e.pctCharAt(m,T),v.length>1?g+=v:g+=r.isReserved(v)||r.isUnreserved(v)?v:e.encodeCharacter(v);return g}return{encode:p,encodePassReserved:y,encodeLiteral:b,encodeLiteralCharacter:_}})(),c=(function(){var p={};function y(_){p[_]={symbol:_,separator:_==="?"?"&":_===""||_==="+"||_==="#"?",":_,named:_===";"||_==="&"||_==="?",ifEmpty:_==="&"||_==="?"?"=":"",first:_==="+"?"":_,encode:_==="+"||_==="#"?a.encodePassReserved:a.encode,toString:function(){return this.symbol}}}return y(""),y("+"),y("#"),y("."),y("/"),y(";"),y("?"),y("&"),{valueOf:function(_){return p[_]?p[_]:"=,!@|".indexOf(_)>=0?null:p[""]}}})();function s(p){var y;if(p==null)return!1;if(i.isArray(p))return p.length>0;if(typeof p=="string"||typeof p=="number"||typeof p=="boolean")return!0;for(y in p)if(p.hasOwnProperty(y)&&s(p[y]))return!0;return!1}var d=(function(){function p(y){this.literal=a.encodeLiteral(y)}return p.prototype.expand=function(){return this.literal},p.prototype.toString=p.prototype.expand,p})(),l=(function(){function p(_){var b,m=[],g=null,T=null,v=null,A,I="";function q(){var w=_.substring(T,A);if(w.length===0)throw new o({expressionText:_,message:"a varname must be specified",position:A});g={varname:w,exploded:!1,maxLength:null},T=null}function O(){if(v===A)throw new o({expressionText:_,message:"after a ':' you have to specify the length",position:A});g.maxLength=parseInt(_.substring(v,A),10),v=null}for(b=(function(w){var S=c.valueOf(w);if(S===null)throw new o({expressionText:_,message:"illegal use of reserved operator",position:A,operator:w});return S})(_.charAt(0)),A=b.symbol.length,T=A;A<_.length;A+=I.length){if(I=e.pctCharAt(_,A),T!==null){if(I==="."){if(T===A)throw new o({expressionText:_,message:"a varname MUST NOT start with a dot",position:A});continue}if(r.isVarchar(I))continue;q()}if(v!==null){if(A===v&&I==="0")throw new o({expressionText:_,message:"A :prefix must not start with digit 0",position:A});if(t.isDigit(I)){if(A-v>=4)throw new o({expressionText:_,message:"A :prefix must have max 4 digits",position:A});continue}O()}if(I===":"){if(g.maxLength!==null)throw new o({expressionText:_,message:"only one :maxLength is allowed per varspec",position:A});if(g.exploded)throw new o({expressionText:_,message:"an exploeded varspec MUST NOT be varspeced",position:A});v=A+1;continue}if(I==="*"){if(g===null)throw new o({expressionText:_,message:"exploded without varspec",position:A});if(g.exploded)throw new o({expressionText:_,message:"exploded twice",position:A});if(g.maxLength)throw new o({expressionText:_,message:"an explode (*) MUST NOT follow to a prefix",position:A});g.exploded=!0;continue}if(I===","){m.push(g),g=null,T=A+1;continue}throw new o({expressionText:_,message:"illegal character",character:I,position:A})}return T!==null&&q(),v!==null&&O(),m.push(g),new f(_,b,m)}function y(_){var b,m,g=[],T=null,v=0;for(b=0;b<_.length;b+=1){if(m=_.charAt(b),v!==null){if(m==="}")throw new o({templateText:_,message:"unopened brace closed",position:b});m==="{"&&(v<b&&g.push(new d(_.substring(v,b))),v=null,T=b);continue}if(T!==null){if(m==="{")throw new o({templateText:_,message:"brace already opened",position:b});if(m==="}"){if(T+1===b)throw new o({templateText:_,message:"empty braces",position:T});try{g.push(p(_.substring(T+1,b)))}catch(A){throw A.prototype===o.prototype?new o({templateText:_,message:A.options.message,position:T+A.options.position,details:A.options}):A}T=null,v=b+1}continue}throw new Error("reached unreachable code")}if(T!==null)throw new o({templateText:_,message:"unclosed brace",position:T});return v<_.length&&g.push(new d(_.substr(v))),new h(_,g)}return y})(),f=(function(){function p(I){return JSON&&JSON.stringify?JSON.stringify(I):I}function y(I){if(!s(I))return!0;if(i.isString(I))return I==="";if(i.isNumber(I)||i.isBoolean(I))return!1;if(i.isArray(I))return I.length===0;for(var q in I)if(I.hasOwnProperty(q))return!1;return!0}function _(I){var q=[],O;for(O in I)I.hasOwnProperty(O)&&q.push({name:O,value:I[O]});return q}function b(I,q,O){this.templateText=I,this.operator=q,this.varspecs=O}b.prototype.toString=function(){return this.templateText};function m(I,q,O){var w="";if(O=O.toString(),q.named){if(w+=a.encodeLiteral(I.varname),O==="")return w+=q.ifEmpty,w;w+="="}return I.maxLength!==null&&(O=O.substr(0,I.maxLength)),w+=q.encode(O),w}function g(I){return s(I.value)}function T(I,q,O){var w=[],S="";if(q.named){if(S+=a.encodeLiteral(I.varname),y(O))return S+=q.ifEmpty,S;S+="="}return i.isArray(O)?(w=O,w=i.filter(w,s),w=i.map(w,q.encode),S+=i.join(w,",")):(w=_(O),w=i.filter(w,g),w=i.map(w,function(E){return q.encode(E.name)+","+q.encode(E.value)}),S+=i.join(w,",")),S}function v(I,q,O){var w=i.isArray(O),S=[];return w?(S=O,S=i.filter(S,s),S=i.map(S,function(E){var R=a.encodeLiteral(I.varname);return y(E)?R+=q.ifEmpty:R+="="+q.encode(E),R})):(S=_(O),S=i.filter(S,g),S=i.map(S,function(E){var R=a.encodeLiteral(E.name);return y(E.value)?R+=q.ifEmpty:R+="="+q.encode(E.value),R})),i.join(S,q.separator)}function A(I,q){var O=[],w="";return i.isArray(q)?(O=q,O=i.filter(O,s),O=i.map(O,I.encode),w+=i.join(O,I.separator)):(O=_(q),O=i.filter(O,function(S){return s(S.value)}),O=i.map(O,function(S){return I.encode(S.name)+"="+I.encode(S.value)}),w+=i.join(O,I.separator)),w}return b.prototype.expand=function(I){var q=[],O,w,S,E=this.operator;for(O=0;O<this.varspecs.length;O+=1)if(w=this.varspecs[O],S=I[w.varname],S!=null)if(w.exploded,i.isArray(S),typeof S=="string"||typeof S=="number"||typeof S=="boolean")q.push(m(w,E,S));else{if(w.maxLength&&s(S))throw new Error("Prefix modifiers are not applicable to variables that have composite values. You tried to expand "+this+" with "+p(S));w.exploded?s(S)&&(E.named?q.push(v(w,E,S)):q.push(A(E,S))):(E.named||!y(S))&&q.push(T(w,E,S))}return q.length===0?"":E.first+i.join(q,E.separator)},b})(),h=(function(){function p(y,_){this.templateText=y,this.expressions=_,i.deepFreeze(this)}return p.prototype.toString=function(){return this.templateText},p.prototype.expand=function(y){var _,b="";for(_=0;_<this.expressions.length;_+=1)b+=this.expressions[_].expand(y);return b},p.parse=l,p.UriTemplateError=o,p})();n(h)})(function(n){u.exports=n})})(ZS)),ZS.exports}var l9;function yte(){if(l9)return wp;l9=1,Object.defineProperty(wp,"__esModule",{value:!0}),wp.ActorRdfMetadataExtractHydraControls=void 0;const u=Ni(),n=be(),o=bte();let i=class ow extends u.ActorRdfMetadataExtract{constructor(e){super(e),this.parsedUriTemplateCache={}}async test(e){return(0,n.passTestVoid)()}getLinks(e,r){return Object.fromEntries(ow.LINK_TYPES.map(a=>{const c=r[a]||r[`${a}Page`],s=c&&c[e];return[a,s&&s.length>0?[s[0]]:[]]}))}parseUriTemplateCached(e){const r=this.parsedUriTemplateCache[e];return r||(this.parsedUriTemplateCache[e]=(0,o.parse)(e))}getSearchForms(e){const r=e.search,a=[];if(r)for(const c in r)for(const s of r[c]){const d=(e.template||{})[s]||[];if(d.length!==1)throw new Error(`Expected 1 hydra:template for ${s}`);const l=d[0],f=this.parseUriTemplateCached(l),h=Object.fromEntries(((e.mapping||{})[s]||[]).map(y=>{const _=((e.variable||{})[y]||[])[0],b=((e.property||{})[y]||[])[0];if(!_)throw new Error(`Expected a hydra:variable for ${y}`);if(!b)throw new Error(`Expected a hydra:property for ${y}`);return[b,_]})),p=y=>f.expand(Object.fromEntries(Object.keys(y).map(_=>[h[_],y[_]])));a.push({dataset:c,template:l,mappings:h,getUri:p})}return{values:a}}getHydraProperties(e){return new Promise((r,a)=>{e.on("error",a);const c={};e.on("data",s=>{if(s.predicate.value.startsWith(ow.HYDRA)){const d=s.predicate.value.slice(ow.HYDRA.length),l=c[d]||(c[d]={});(l[s.subject.value]||(l[s.subject.value]=[])).push(s.object.value)}}),e.on("end",()=>r(c))})}async run(e){const r={},a=await this.getHydraProperties(e.metadata);return Object.assign(r,this.getLinks(e.url,a)),r.searchForms=this.getSearchForms(a),{metadata:r}}};return wp.ActorRdfMetadataExtractHydraControls=i,i.HYDRA="http://www.w3.org/ns/hydra/core#",i.LINK_TYPES=["first","next","previous","last"],wp}var f9;function _te(){return f9||(f9=1,(function(u){var n=Qu&&Qu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Qu&&Qu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(yte(),u)})(Qu)),Qu}var Gu={},Ap={},h9;function gte(){if(h9)return Ap;h9=1,Object.defineProperty(Ap,"__esModule",{value:!0}),Ap.ActorRdfMetadataExtractHydraCount=void 0;const u=Ni(),n=be();let o=class extends u.ActorRdfMetadataExtract{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}run(t){return new Promise((e,r)=>{t.metadata.on("error",r),t.metadata.on("data",a=>{this.predicates.includes(a.predicate.value)&&e({metadata:{cardinality:{type:"estimate",value:Number.parseInt(a.object.value,10),dataset:a.subject.value}}})}),t.metadata.on("end",()=>{e({metadata:{cardinality:{type:"estimate",value:0}}})})})}};return Ap.ActorRdfMetadataExtractHydraCount=o,Ap}var p9;function mte(){return p9||(p9=1,(function(u){var n=Gu&&Gu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Gu&&Gu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(gte(),u)})(Gu)),Gu}var zu={},Op={},b9;function vte(){if(b9)return Op;b9=1,Object.defineProperty(Op,"__esModule",{value:!0}),Op.ActorRdfMetadataExtractHydraPagesize=void 0;const u=Ni(),n=be();let o=class extends u.ActorRdfMetadataExtract{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}async run(t){return new Promise((e,r)=>{t.metadata.on("error",r),t.metadata.on("data",a=>{this.predicates.includes(a.predicate.value)&&e({metadata:{pageSize:Number.parseInt(a.object.value,10)}})}),t.metadata.on("end",()=>{e({metadata:{}})})})}};return Op.ActorRdfMetadataExtractHydraPagesize=o,Op}var y9;function Tte(){return y9||(y9=1,(function(u){var n=zu&&zu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=zu&&zu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(vte(),u)})(zu)),zu}var Xu={},Ep={},_9;function wte(){if(_9)return Ep;_9=1,Object.defineProperty(Ep,"__esModule",{value:!0}),Ep.ActorRdfMetadataExtractRequestTime=void 0;const u=Ni(),n=be();let o=class extends u.ActorRdfMetadataExtract{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}async run(t){return{metadata:{requestTime:t.requestTime}}}};return Ep.ActorRdfMetadataExtractRequestTime=o,Ep}var g9;function Ste(){return g9||(g9=1,(function(u){var n=Xu&&Xu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Xu&&Xu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(wte(),u)})(Xu)),Xu}var Ju={},xp={},m9;function Ate(){if(m9)return xp;m9=1,Object.defineProperty(xp,"__esModule",{value:!0}),xp.ActorRdfMetadataExtractAllowHttpMethods=void 0;const u=Ni(),n=be();let o=class extends u.ActorRdfMetadataExtract{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}async run(t){var r,a;const e={};return(r=t.headers)!=null&&r.get("allow")&&(e.allowHttpMethods=(a=t.headers.get("allow"))==null?void 0:a.split(/, */u)),{metadata:e}}};return xp.ActorRdfMetadataExtractAllowHttpMethods=o,xp}var v9;function Ote(){return v9||(v9=1,(function(u){var n=Ju&&Ju.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ju&&Ju.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ate(),u)})(Ju)),Ju}var ku={},Ip={},T9;function Ete(){if(T9)return Ip;T9=1,Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.ActorRdfMetadataExtractPutAccepted=void 0;const u=Ni(),n=be();let o=class extends u.ActorRdfMetadataExtract{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}async run(t){var r,a;const e={};return(r=t.headers)!=null&&r.get("accept-put")&&(e.putAccepted=(a=t.headers.get("accept-put"))==null?void 0:a.split(/, */u)),{metadata:e}}};return Ip.ActorRdfMetadataExtractPutAccepted=o,Ip}var w9;function xte(){return w9||(w9=1,(function(u){var n=ku&&ku.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ku&&ku.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ete(),u)})(ku)),ku}var Ku={},Rp={},S9;function Ite(){if(S9)return Rp;S9=1,Object.defineProperty(Rp,"__esModule",{value:!0}),Rp.ActorRdfMetadataExtractPatchSparqlUpdate=void 0;const u=Ni(),n=be();let o=class extends u.ActorRdfMetadataExtract{constructor(t){super(t)}async test(t){return(0,n.passTestVoid)()}async run(t){var r,a,c,s;const e={};return(((a=(r=t.headers)==null?void 0:r.get("accept-patch"))==null?void 0:a.includes("application/sparql-update"))??((s=(c=t.headers)==null?void 0:c.get("ms-author-via"))==null?void 0:s.includes("SPARQL")))&&(e.patchSparqlUpdate=!0),{metadata:e}}};return Rp.ActorRdfMetadataExtractPatchSparqlUpdate=o,Rp}var A9;function Rte(){return A9||(A9=1,(function(u){var n=Ku&&Ku.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ku&&Ku.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ite(),u)})(Ku)),Ku}var Wu={},Fp={},O9;function Fte(){if(O9)return Fp;O9=1,Object.defineProperty(Fp,"__esModule",{value:!0}),Fp.ActorRdfMetadataExtractSparqlService=void 0;const u=Ni(),n=be(),o=cr();let i=class extends u.ActorRdfMetadataExtract{constructor(e){super(e)}async test(e){return(0,n.passTestVoid)()}async run(e){return new Promise((r,a)=>{e.metadata.on("error",a);const c=new Set([e.url]),s={},d=new Set,l=new Set,f=new Set;e.metadata.on("data",h=>{if(h.predicate.value==="http://rdfs.org/ns/void#subset"&&h.object.value===e.url)c.add(h.subject.value);else if(h.subject.value===s.defaultDataset||h.subject.termType==="BlankNode"||c.has(h.subject.value))switch(h.predicate.value){case"http://www.w3.org/ns/sparql-service-description#endpoint":s.sparqlService=h.object.termType==="Literal"?(0,o.resolve)(h.object.value,e.url):h.object.value,this.inferHttpsEndpoint&&e.url.startsWith("https")&&!h.object.value.startsWith("https")&&(s.sparqlService=s.sparqlService.replace(/^http:/u,"https:"));break;case"http://www.w3.org/ns/sparql-service-description#defaultDataset":s.defaultDataset=h.object.value;break;case"http://www.w3.org/ns/sparql-service-description#defaultGraph":s.defaultGraph=h.object.value;break;case"http://www.w3.org/ns/sparql-service-description#inputFormat":d.add(h.object.value);break;case"http://www.w3.org/ns/sparql-service-description#resultFormat":l.add(h.object.value);break;case"http://www.w3.org/ns/sparql-service-description#supportedLanguage":f.add(h.object.value);break;case"http://www.w3.org/ns/sparql-service-description#feature":h.object.value==="http://www.w3.org/ns/sparql-service-description#UnionDefaultGraph"?s.unionDefaultGraph=!0:h.object.value==="http://www.w3.org/ns/sparql-service-description#BasicFederatedQuery"&&(s.basicFederatedQuery=!0);break}}),e.metadata.on("end",()=>{r({metadata:{...s,...d.size>0?{inputFormats:[...d.values()]}:{},...l.size>0?{resultFormats:[...l.values()]}:{},...f.size>0?{supportedLanguages:[...f.values()]}:{}}})})})}};return Fp.ActorRdfMetadataExtractSparqlService=i,Fp}var E9;function Nte(){return E9||(E9=1,(function(u){var n=Wu&&Wu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Wu&&Wu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Fte(),u)})(Wu)),Wu}var Yu={},Np={},e4={},x9;function pX(){return x9||(x9=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.VOID_CLASS_PARTITION=u.VOID_PROPERTY_PARTITION=u.VOID_DISTINCT_SUBJECTS=u.VOID_DISTINCT_OBJECTS=u.VOID_URI_REGEX_PATTERN=u.VOID_URI_SPACE=u.VOID_VOCABULARY=u.VOID_PROPERTY=u.VOID_CLASS=u.VOID_ENTITIES=u.VOID_TRIPLES=u.VOID_CLASSES=u.VOID_DATASET=u.VOID=u.SD_GRAPH=u.SD_FEATURE=u.SD_UNION_DEFAULT_GRAPH=u.SD_DEFAULT_GRAPH=u.SD_DEFAULT_DATASET=u.SD=u.RDF_TYPE=void 0,u.RDF_TYPE="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",u.SD="http://www.w3.org/ns/sparql-service-description#",u.SD_DEFAULT_DATASET=`${u.SD}defaultDataset`,u.SD_DEFAULT_GRAPH=`${u.SD}defaultGraph`,u.SD_UNION_DEFAULT_GRAPH=`${u.SD}UnionDefaultGraph`,u.SD_FEATURE=`${u.SD}feature`,u.SD_GRAPH=`${u.SD}Graph`,u.VOID="http://rdfs.org/ns/void#",u.VOID_DATASET=`${u.VOID}Dataset`,u.VOID_CLASSES=`${u.VOID}classes`,u.VOID_TRIPLES=`${u.VOID}triples`,u.VOID_ENTITIES=`${u.VOID}entities`,u.VOID_CLASS=`${u.VOID}class`,u.VOID_PROPERTY=`${u.VOID}property`,u.VOID_VOCABULARY=`${u.VOID}vocabulary`,u.VOID_URI_SPACE=`${u.VOID}uriSpace`,u.VOID_URI_REGEX_PATTERN=`${u.VOID}uriRegexPattern`,u.VOID_DISTINCT_OBJECTS=`${u.VOID}distinctSubjects`,u.VOID_DISTINCT_SUBJECTS=`${u.VOID}distinctObjects`,u.VOID_PROPERTY_PARTITION=`${u.VOID}propertyPartition`,u.VOID_CLASS_PARTITION=`${u.VOID}classPartition`})(e4)),e4}var Kt={},I9;function Pte(){if(I9)return Kt;I9=1,Object.defineProperty(Kt,"__esModule",{value:!0}),Kt.getClassPartitionEntities=Kt.getPredicateTriples=Kt.getPredicateSubjects=Kt.getPredicateObjects=Kt.getDistinctSubjects=Kt.getDistinctObjects=Kt.estimatePatternCardinalityRaw=Kt.matchPatternVocabularies=Kt.matchPatternResourceUris=Kt.estimatePatternCardinality=void 0;const u=pX();function n(l,f){const h={type:"exact",value:0};if(i(l,f)&&o(l,f)){const p=t(l,f);p>0&&(h.value=p,h.type="estimate")}return h}Kt.estimatePatternCardinality=n;function o(l,f){return!l.uriRegexPattern||f.subject.termType!=="NamedNode"||l.uriRegexPattern.test(f.subject.value)||f.object.termType!=="NamedNode"||l.uriRegexPattern.test(f.object.value)}Kt.matchPatternResourceUris=o;function i(l,f){return l.vocabularies!==void 0&&f.predicate.termType==="NamedNode"?l.vocabularies.some(h=>f.predicate.value.startsWith(h)):!0}Kt.matchPatternVocabularies=i;function t(l,f){if(f.subject.termType==="Variable"&&f.predicate.termType==="NamedNode"&&f.predicate.value===u.RDF_TYPE&&(f.object.termType==="NamedNode"||f.object.termType==="BlankNode"))return d(l,f.object);if(f.subject.termType==="Variable"&&f.predicate.termType==="Variable"&&f.object.termType==="Variable")return l.triples;if((f.subject.termType==="NamedNode"||f.subject.termType==="BlankNode")&&f.predicate.termType==="Variable"&&(f.object.termType==="Variable"||f.object.termType==="Literal")){const h=r(l);if(h>0)return l.triples/h}if(f.subject.termType==="Variable"&&f.predicate.termType==="NamedNode"&&(f.object.termType==="Variable"||f.object.termType==="Literal"))return s(l,f.predicate);if(f.subject.termType==="Variable"&&f.predicate.termType==="Variable"&&(f.object.termType==="NamedNode"||f.object.termType==="BlankNode"||f.object.termType==="Literal")){const h=e(l);if(h>0)return l.triples/h}if((f.subject.termType==="NamedNode"||f.subject.termType==="BlankNode")&&f.predicate.termType==="NamedNode"&&(f.object.termType==="Variable"||f.object.termType==="Literal")){const h=s(l,f.predicate),p=c(l,f.predicate);return p>0?h/p:h}if((f.subject.termType==="NamedNode"||f.subject.termType==="BlankNode")&&f.predicate.termType==="Variable"&&(f.object.termType==="NamedNode"||f.object.termType==="BlankNode")){const h=r(l),p=e(l);if(h>0&&p>0)return l.triples/(h*p)}if(f.subject.termType==="Variable"&&f.predicate.termType==="NamedNode"&&(f.object.termType==="NamedNode"||f.object.termType==="BlankNode")){const h=s(l,f.predicate),p=a(l,f.predicate);return p>0?h/p:h}if((f.subject.termType==="NamedNode"||f.subject.termType==="BlankNode")&&f.predicate.termType==="NamedNode"&&(f.object.termType==="NamedNode"||f.object.termType==="BlankNode")){const h=s(l,f.predicate),p=c(l,f.predicate),y=a(l,f.predicate);return p>0&&y>0?h/(p*y):h}return l.triples}Kt.estimatePatternCardinalityRaw=t;function e(l){return l.distinctObjects??l.entities??l.triples}Kt.getDistinctObjects=e;function r(l){return l.distinctSubjects??l.entities??l.triples}Kt.getDistinctSubjects=r;function a(l,f){if(l.propertyPartitions){const h=l.propertyPartitions[f.value];return(h==null?void 0:h.distinctObjects)??(h==null?void 0:h.triples)??0}return l.triples}Kt.getPredicateObjects=a;function c(l,f){if(l.propertyPartitions){const h=l.propertyPartitions[f.value];return(h==null?void 0:h.distinctSubjects)??(h==null?void 0:h.triples)??0}return l.triples}Kt.getPredicateSubjects=c;function s(l,f){var h;return l.propertyPartitions?((h=l.propertyPartitions[f.value])==null?void 0:h.triples)??0:l.triples}Kt.getPredicateTriples=s;function d(l,f){var h;return l.classPartitions?((h=l.classPartitions[f.value])==null?void 0:h.entities)??0:l.entities!==void 0&&l.classes?l.entities/l.classes:l.triples}return Kt.getClassPartitionEntities=d,Kt}var R9;function Dte(){if(R9)return Np;R9=1,Object.defineProperty(Np,"__esModule",{value:!0}),Np.ActorRdfMetadataExtractVoid=void 0;const u=Ni(),n=be(),o=dt(),i=pX(),t=Pte();let e=class extends u.ActorRdfMetadataExtract{constructor(a){super(a)}async test(a){return(0,n.passTestVoid)()}async run(a){return new Promise((c,s)=>{const d=new Set,l=new Set,f={},h={},p={},y={},_={},b={},m={},g={},T={},v={},A={};let I,q,O=!1;a.metadata.on("error",s).on("data",w=>{switch(w.predicate.value){case i.RDF_TYPE:(w.object.value===i.SD_GRAPH||w.object.value===i.VOID_DATASET)&&d.add(w.subject.value);break;case i.VOID_TRIPLES:f[w.subject.value]=Number.parseInt(w.object.value,10);break;case i.VOID_ENTITIES:h[w.subject.value]=Number.parseInt(w.object.value,10);break;case i.VOID_CLASSES:y[w.subject.value]=Number.parseInt(w.object.value,10);break;case i.VOID_CLASS:A[w.subject.value]=w.object.value;break;case i.VOID_PROPERTY:T[w.subject.value]=w.object.value;break;case i.VOID_DISTINCT_OBJECTS:_[w.subject.value]=Number.parseInt(w.object.value,10);break;case i.VOID_DISTINCT_SUBJECTS:b[w.subject.value]=Number.parseInt(w.object.value,10);break;case i.VOID_VOCABULARY:p[w.subject.value]?p[w.subject.value].push(w.object.value):p[w.subject.value]=[w.object.value];break;case i.VOID_URI_SPACE:m[w.subject.value]||(m[w.subject.value]=new RegExp(`^${w.object.value}`,"u"));break;case i.VOID_URI_REGEX_PATTERN:m[w.subject.value]=new RegExp(w.object.value,"u");break;case i.VOID_PROPERTY_PARTITION:l.add(w.object.value),g[w.subject.value]?g[w.subject.value].push(w.object.value):g[w.subject.value]=[w.object.value];break;case i.VOID_CLASS_PARTITION:l.add(w.object.value),v[w.subject.value]?v[w.subject.value].push(w.object.value):v[w.subject.value]=[w.object.value];break;case i.SD_DEFAULT_DATASET:I=w.object.value;break;case i.SD_DEFAULT_GRAPH:q=w.object.value;break;case i.SD_FEATURE:w.object.value===i.SD_UNION_DEFAULT_GRAPH&&(O=!0);break}}).on("end",()=>{var R;const w=[],S=L=>{const M={};for(const B of g[L]){const X=T[B];X&&(M[X]={distinctObjects:_[B],distinctSubjects:b[B],triples:f[B]})}return M},E=L=>{const M={};for(const B of v[L]){const X=A[B];X&&(M[X]={entities:h[B],propertyPartitions:g[B]?S(B):void 0})}return M};I&&l.add(I),O&&q&&l.add(q),I&&q&&p[I]&&(p[q]=[...p[q]??[],...p[I]]);for(const L of l)d.delete(L);for(const L of d)if(f[L]){const M={entities:h[L],identifier:L,classes:y[L]??((R=v[L])==null?void 0:R.length)??0,classPartitions:v[L]?E(L):void 0,distinctObjects:_[L],distinctSubjects:b[L],propertyPartitions:g[L]?S(L):void 0,triples:f[L],uriRegexPattern:m[L],vocabularies:p[L]};w.push({uri:L,source:a.url,getCardinality:B=>{if(B.type===o.Algebra.types.PATTERN)return{...(0,t.estimatePatternCardinality)(M,B),dataset:L}}})}c({metadata:w.length>0?{datasets:w}:{}})})})}};return Np.ActorRdfMetadataExtractVoid=e,Np}var F9;function jte(){return F9||(F9=1,(function(u){var n=Yu&&Yu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Yu&&Yu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Dte(),u)})(Yu)),Yu}var Zu={},Pp={},eo={},Dp={},N9;function Lte(){if(N9)return Dp;N9=1,Object.defineProperty(Dp,"__esModule",{value:!0}),Dp.ActorRdfParse=void 0;const u=Hf();let n=class extends u.ActorAbstractMediaTyped{constructor(i){super(i)}};return Dp.ActorRdfParse=n,Dp}var jp={},P9;function Mte(){if(P9)return jp;P9=1,Object.defineProperty(jp,"__esModule",{value:!0}),jp.ActorRdfParseFixedMediaTypes=void 0;const u=Hf(),n=be();let o=class extends u.ActorAbstractMediaTypedFixed{constructor(t){super(t)}async testHandleChecked(t){return(0,n.passTestVoid)()}};return jp.ActorRdfParseFixedMediaTypes=o,jp}var D9;function zf(){return D9||(D9=1,(function(u){var n=eo&&eo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=eo&&eo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Lte(),u),o(Mte(),u)})(eo)),eo}var Cte=ni();const Lp="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Mp="http://www.w3.org/2001/XMLSchema#",yT="http://www.w3.org/2000/10/swap/",Ar={xsd:{decimal:`${Mp}decimal`,boolean:`${Mp}boolean`,double:`${Mp}double`,integer:`${Mp}integer`,string:`${Mp}string`},rdf:{type:`${Lp}type`,nil:`${Lp}nil`,first:`${Lp}first`,rest:`${Lp}rest`,langString:`${Lp}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${yT}reify#forSome`,forAll:`${yT}reify#forAll`},log:{implies:`${yT}log#implies`,isImpliedBy:`${yT}log#isImpliedBy`}},{xsd:_T}=Ar,qte=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,j9={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},Bte=/[\x00-\x20<>\\"\{\}\|\^\`]/,$te={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},Ute=/$0^/;class BO{constructor(n){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,n=n||{},this._isImpliedBy=n.isImpliedBy,this._lineMode=!!n.lineMode){this._n3Mode=!1;for(const o in this)!(o in $te)&&this[o]instanceof RegExp&&(this[o]=Ute)}else this._n3Mode=n.n3!==!1;this.comments=!!n.comments,this._literalClosingPos=0}_tokenizeToEnd(n,o){let i=this._input,t=i.length;for(;;){let a,c;for(;a=this._newline.exec(i);)this.comments&&(c=this._comment.exec(a[0]))&&e("comment",c[1],"",this._line,a[0].length),i=i.substr(a[0].length,i.length),t=i.length,this._line++;if(!a&&(a=this._whitespace.exec(i))&&(i=i.substr(a[0].length,i.length)),this._endOfFile.test(i))return o&&(this.comments&&(c=this._comment.exec(i))&&e("comment",c[1],"",this._line,i.length),i=null,e("eof","","",this._line,0)),this._input=i;const s=this._line,d=i[0];let l="",f="",h="",p=null,y=0,_=!1;switch(d){case"^":if(i.length<3)break;if(i[1]==="^"){if(this._previousMarker="^^",i=i.substr(2),i[0]!=="<"){_=!0;break}}else{this._n3Mode&&(y=1,l="^");break}case"<":if(p=this._unescapedIri.exec(i))l="IRI",f=p[1];else if(p=this._iri.exec(i)){if(f=this._unescape(p[1]),f===null||Bte.test(f))return r(this);l="IRI"}else i.length>1&&i[1]==="<"?(l="<<",y=2):this._n3Mode&&i.length>1&&i[1]==="="&&(y=2,this._isImpliedBy?(l="abbreviation",f="<"):(l="inverse",f=">"));break;case">":i.length>1&&i[1]===">"&&(l=">>",y=2);break;case"_":((p=this._blank.exec(i))||o&&(p=this._blank.exec(`${i} `)))&&(l="blank",h="_",f=p[1]);break;case'"':if(p=this._simpleQuotedString.exec(i))f=p[1];else if({value:f,matchLength:y}=this._parseLiteral(i),f===null)return r(this);(p!==null||y!==0)&&(l="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(p=this._simpleApostropheString.exec(i))f=p[1];else if({value:f,matchLength:y}=this._parseLiteral(i),f===null)return r(this);(p!==null||y!==0)&&(l="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(p=this._variable.exec(i))&&(l="var",f=p[0]);break;case"@":this._previousMarker==="literal"&&(p=this._langcode.exec(i))?(l="langcode",f=p[1]):(p=this._keyword.exec(i))&&(l=p[0]);break;case".":if(i.length===1?o:i[1]<"0"||i[1]>"9"){l=".",y=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(p=this._number.exec(i)||o&&(p=this._number.exec(`${i} `)))&&(l="literal",f=p[0],h=typeof p[1]=="string"?_T.double:typeof p[2]=="string"?_T.decimal:_T.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(p=this._sparqlKeyword.exec(i))?l=p[0].toUpperCase():_=!0;break;case"f":case"t":(p=this._boolean.exec(i))?(l="literal",f=p[0],h=_T.boolean):_=!0;break;case"a":(p=this._shortPredicates.exec(i))?(l="abbreviation",f="a"):_=!0;break;case"=":this._n3Mode&&i.length>1&&(l="abbreviation",i[1]!==">"?(y=1,f="="):(y=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(y=1,l=d);break;case"{":!this._lineMode&&i.length>=2&&(i[1]==="|"?(l="{|",y=2):(l=d,y=1));break;case"|":i.length>=2&&i[1]==="}"&&(l="|}",y=2);break;default:_=!0}if(_&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(p=this._prefix.exec(i))?(l="prefix",f=p[1]||""):((p=this._prefixed.exec(i))||o&&(p=this._prefixed.exec(`${i} `)))&&(l="prefixed",h=p[1]||"",f=this._unescape(p[2]))),this._previousMarker==="^^")switch(l){case"prefixed":l="type";break;case"IRI":l="typeIRI";break;default:l=""}if(!l)return o||!/^'''|^"""/.test(i)&&/\n|\r/.test(i)?r(this):this._input=i;const b=y||p[0].length,m=e(l,f,h,s,b);this.previousToken=m,this._previousMarker=l,i=i.substr(b,i.length)}function e(a,c,s,d,l){const f=i?t-i.length:t,h=f+l,p={type:a,value:c,prefix:s,line:d,start:f,end:h};return n(null,p),p}function r(a){n(a._syntaxError(/^\S*/.exec(i)[0]))}}_unescape(n){let o=!1;const i=n.replace(qte,(t,e,r,a)=>{if(typeof e=="string")return String.fromCharCode(Number.parseInt(e,16));if(typeof r=="string"){let c=Number.parseInt(r,16);return c<=65535?String.fromCharCode(Number.parseInt(r,16)):String.fromCharCode(55296+((c-=65536)>>10),56320+(c&1023))}return a in j9?j9[a]:(o=!0,"")});return o?null:i}_parseLiteral(n){if(n.length>=3){const o=n.match(/^(?:"""|"|'''|'|)/)[0],i=o.length;let t=Math.max(this._literalClosingPos,i);for(;(t=n.indexOf(o,t))>0;){let e=0;for(;n[t-e-1]==="\\";)e++;if(e%2===0){const r=n.substring(i,t),a=r.split(/\r\n|\r|\n/).length-1,c=t+i;if(i===1&&a!==0||i===3&&this._lineMode)break;return this._line+=a,{value:this._unescape(r),matchLength:c}}t++}this._literalClosingPos=n.length-i+1}return{value:"",matchLength:0}}_syntaxError(n){this._input=null;const o=new Error(`Unexpected "${n}" on line ${this._line}.`);return o.context={token:void 0,line:this._line,previousToken:this.previousToken},o}_readStartingBom(n){return n.startsWith("\uFEFF")?n.substr(1):n}tokenize(n,o){if(this._line=1,typeof n=="string")if(this._input=this._readStartingBom(n),typeof o=="function")queueMicrotask(()=>this._tokenizeToEnd(o,!0));else{const i=[];let t;if(this._tokenizeToEnd((e,r)=>e?t=e:i.push(r),!0),t)throw t;return i}else this._pendingBuffer=null,typeof n.setEncoding=="function"&&n.setEncoding("utf8"),n.on("data",i=>{this._input!==null&&i.length!==0&&(this._pendingBuffer&&(i=Cte.Buffer.concat([this._pendingBuffer,i]),this._pendingBuffer=null),i[i.length-1]&128?this._pendingBuffer=i:(typeof this._input>"u"?this._input=this._readStartingBom(typeof i=="string"?i:i.toString()):this._input+=i,this._tokenizeToEnd(o,!1)))}),n.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(o,!0)}),n.on("error",o)}}const{rdf:Vte,xsd:ql}=Ar;let Xf,Qte=0;const Qn={namedNode:yX,blankNode:_X,variable:mX,literal:gX,defaultGraph:Hte,quad:jA,triple:jA,fromTerm:H3,fromQuad:vX};class on{constructor(n){this.id=n}get value(){return this.id}equals(n){return n instanceof on?this.id===n.id:!!n&&this.termType===n.termType&&this.value===n.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}let Bw=class extends on{get termType(){return"NamedNode"}},Tf=class bX extends on{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const n=this.id;let o=n.lastIndexOf('"')+1;return o<n.length&&n[o++]==="@"?n.substr(o).toLowerCase():""}get datatype(){return new Bw(this.datatypeString)}get datatypeString(){const n=this.id,o=n.lastIndexOf('"')+1,i=o<n.length?n[o]:"";return i==="^"?n.substr(o+2):i!=="@"?ql.string:Vte.langString}equals(n){return n instanceof bX?this.id===n.id:!!n&&!!n.datatype&&this.termType===n.termType&&this.value===n.value&&this.language===n.language&&this.datatype.value===n.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}},$O=class extends on{constructor(n){super(`_:${n}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},UO=class extends on{constructor(n){super(`?${n}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},VO=class extends on{constructor(){return super(""),Xf||this}get termType(){return"DefaultGraph"}equals(n){return this===n||!!n&&this.termType===n.termType}};Xf=new VO;function $l(u,n,o){if(n=n||Qn,!u)return n.defaultGraph();switch(u[0]){case"?":return n.variable(u.substr(1));case"_":return n.blankNode(u.substr(2));case'"':if(n===Qn)return new Tf(u);if(u[u.length-1]==='"')return n.literal(u.substr(1,u.length-2));const i=u.lastIndexOf('"',u.length-1);return n.literal(u.substr(1,i-1),u[i+1]==="@"?u.substr(i+2):n.namedNode(u.substr(i+3)));case"[":u=JSON.parse(u);break;default:if(!o||!Array.isArray(u))return n.namedNode(u)}return n.quad($l(u[0],n,!0),$l(u[1],n,!0),$l(u[2],n,!0),u[3]&&$l(u[3],n,!0))}function Xi(u,n){if(typeof u=="string")return u;if(u instanceof on&&u.termType!=="Quad")return u.id;if(!u)return Xf.id;switch(u.termType){case"NamedNode":return u.value;case"BlankNode":return`_:${u.value}`;case"Variable":return`?${u.value}`;case"DefaultGraph":return"";case"Literal":return`"${u.value}"${u.language?`@${u.language}`:u.datatype&&u.datatype.value!==ql.string?`^^${u.datatype.value}`:""}`;case"Quad":const o=[Xi(u.subject,!0),Xi(u.predicate,!0),Xi(u.object,!0)];return u.graph&&u.graph.termType!=="DefaultGraph"&&o.push(Xi(u.graph,!0)),n?o:JSON.stringify(o);default:throw new Error(`Unexpected termType: ${u.termType}`)}}let Pf=class extends on{constructor(n,o,i,t){super(""),this._subject=n,this._predicate=o,this._object=i,this._graph=t||Xf}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(n){return!!n&&this._subject.equals(n.subject)&&this._predicate.equals(n.predicate)&&this._object.equals(n.object)&&this._graph.equals(n.graph)}};function yX(u){return new Bw(u)}function _X(u){return new $O(u||`n3-${Qte++}`)}function gX(u,n){if(typeof n=="string")return new Tf(`"${u}"@${n.toLowerCase()}`);let o=n?n.value:"";return o===""&&(typeof u=="boolean"?o=ql.boolean:typeof u=="number"&&(Number.isFinite(u)?o=Number.isInteger(u)?ql.integer:ql.double:(o=ql.double,Number.isNaN(u)||(u=u>0?"INF":"-INF")))),o===""||o===ql.string?new Tf(`"${u}"`):new Tf(`"${u}"^^${o}`)}function mX(u){return new UO(u)}function Hte(){return Xf}function jA(u,n,o,i){return new Pf(u,n,o,i)}function H3(u){if(u instanceof on)return u;switch(u.termType){case"NamedNode":return yX(u.value);case"BlankNode":return _X(u.value);case"Variable":return mX(u.value);case"DefaultGraph":return Xf;case"Literal":return gX(u.value,u.language||u.datatype);case"Quad":return vX(u);default:throw new Error(`Unexpected termType: ${u.termType}`)}}function vX(u){if(u instanceof Pf)return u;if(u.termType!=="Quad")throw new Error(`Unexpected termType: ${u.termType}`);return jA(H3(u.subject),H3(u.predicate),H3(u.object),H3(u.graph))}let L9=0;class $w{constructor(n){this._contextStack=[],this._graph=null,n=n||{},this._setBase(n.baseIRI),n.factory&&TX(this,n.factory);const o=typeof n.format=="string"?n.format.match(/\w*$/)[0].toLowerCase():"",i=/turtle/.test(o),t=/trig/.test(o),e=/triple/.test(o),r=/quad/.test(o),a=this._n3Mode=/n3/.test(o),c=e||r;(this._supportsNamedGraphs=!(i||a))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(i||t||e||a),this._isImpliedBy=n.isImpliedBy,this._supportsRDFStar=o===""||/star|\*$/.test(o),c&&(this._resolveRelativeIRI=s=>null),this._blankNodePrefix=typeof n.blankNodePrefix!="string"?"":n.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=n.lexer||new BO({lineMode:c,n3:a,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!n.explicitQuantifiers}static _resetBlankNodePrefix(){L9=0}_setBase(n){if(!n)this._base="",this._basePath="";else{const o=n.indexOf("#");o>=0&&(n=n.substr(0,o)),this._base=n,this._basePath=n.indexOf("/")<0?n:n.replace(/[^\/?]*(?:\?.*)?$/,""),n=n.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=n[0],this._baseScheme=n[1]}}_saveContext(n,o,i,t,e){const r=this._n3Mode;this._contextStack.push({type:n,subject:i,predicate:t,object:e,graph:o,inverse:r?this._inversePredicate:!1,blankPrefix:r?this._prefixes._:"",quantified:r?this._quantified:null}),r&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(n,o){const i=this._contextStack.pop();if(!i||i.type!==n)return this._error(`Unexpected ${o.type}`,o);this._subject=i.subject,this._predicate=i.predicate,this._object=i.object,this._graph=i.graph,this._n3Mode&&(this._inversePredicate=i.inverse,this._prefixes._=i.blankPrefix,this._quantified=i.quantified)}_readInTopContext(n){switch(n.type){case"eof":return this._graph!==null?this._error("Unclosed graph",n):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(n)}}_readEntity(n,o){let i;switch(n.type){case"IRI":case"typeIRI":const t=this._resolveIRI(n.value);if(t===null)return this._error("Invalid IRI",n);i=this._factory.namedNode(t);break;case"type":case"prefixed":const e=this._prefixes[n.prefix];if(e===void 0)return this._error(`Undefined prefix "${n.prefix}:"`,n);i=this._factory.namedNode(e+n.value);break;case"blank":i=this._factory.blankNode(this._prefixes[n.prefix]+n.value);break;case"var":i=this._factory.variable(n.value.substr(1));break;default:return this._error(`Expected entity but got ${n.type}`,n)}return!o&&this._n3Mode&&i.id in this._quantified&&(i=this._quantified[i.id]),i}_readSubject(n){switch(this._predicate=null,n.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",n);case"}":return this._readPunctuation(n);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',n);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',n);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",n);if(n.prefix.length===0)return this._literalValue=n.value,this._completeSubjectLiteral;this._subject=this._factory.literal(n.value,this._factory.namedNode(n.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",n);default:if((this._subject=this._readEntity(n))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(n){const o=n.type;switch(o){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[n.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${o}`,n):(this._subject=null,o==="]"?this._readBlankNodeTail(n):this._readPunctuation(n));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",n);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",n);default:if((this._predicate=this._readEntity(n))===void 0)return}return this._readObject}_readObject(n){switch(n.type){case"literal":if(n.prefix.length===0)return this._literalValue=n.value,this._readDataTypeOrLang;this._object=this._factory.literal(n.value,this._factory.namedNode(n.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",n);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",n);default:if((this._object=this._readEntity(n))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(n){return n.type==="{"?this._readGraph(n):this._readPredicate(n)}_readGraph(n){return n.type!=="{"?this._error(`Expected graph but got ${n.type}`,n):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(n){return n.type==="]"?(this._subject=null,this._readBlankNodeTail(n)):(this._predicate=null,this._readPredicate(n))}_readBlankNodeTail(n){if(n.type!=="]")return this._readBlankNodePunctuation(n);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const o=this._predicate===null;return this._restoreContext("blank",n),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:o?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(n){switch(n.type){case".":case"}":return this._subject=null,this._readPunctuation(n);default:return this._readPredicate(n)}}_readListItem(n){let o=null,i=null,t=this._readListItem;const e=this._subject,r=this._contextStack,a=r[r.length-1];switch(n.type){case"[":this._saveContext("blank",this._graph,i=this._factory.blankNode(),this.RDF_FIRST,this._subject=o=this._factory.blankNode()),t=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,i=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",n),r.length!==0&&r[r.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(t=this._readPredicate,this._subject===this.RDF_NIL)return t}else if(t=this._getContextEndReader(),this._object===this.RDF_NIL)return t;i=this.RDF_NIL;break;case"literal":n.prefix.length===0?(this._literalValue=n.value,t=this._readListItemDataTypeOrLang):(o=this._factory.literal(n.value,this._factory.namedNode(n.prefix)),t=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",n);default:if((o=this._readEntity(n))===void 0)return}if(i===null&&(this._subject=i=this._factory.blankNode()),e===null?a.predicate===null?a.subject=i:a.object=i:this._emit(e,this.RDF_REST,i,this._graph),o!==null){if(this._n3Mode&&(n.type==="IRI"||n.type==="prefixed"))return this._saveContext("item",this._graph,i,this.RDF_FIRST,o),this._subject=o,this._predicate=null,this._getPathReader(this._readListItem);this._emit(i,this.RDF_FIRST,o,this._graph)}return t}_readDataTypeOrLang(n){return this._completeObjectLiteral(n,!1)}_readListItemDataTypeOrLang(n){return this._completeObjectLiteral(n,!0)}_completeLiteral(n){let o=this._factory.literal(this._literalValue);switch(n.type){case"type":case"typeIRI":const i=this._readEntity(n);if(i===void 0)return;o=this._factory.literal(this._literalValue,i),n=null;break;case"langcode":o=this._factory.literal(this._literalValue,n.value),n=null;break}return{token:n,literal:o}}_completeSubjectLiteral(n){return this._subject=this._completeLiteral(n).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(n,o){const i=this._completeLiteral(n);if(i)return this._object=i.literal,o&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),i.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(i.token))}_readFormulaTail(n){return n.type!=="}"?this._readPunctuation(n):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",n),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(n){let o,i=this._graph;const t=this._subject,e=this._inversePredicate;switch(n.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",n);if(this._n3Mode)return this._readFormulaTail(n);this._graph=null;case".":this._subject=null,o=this._contextStack.length?this._readSubject:this._readInTopContext,e&&(this._inversePredicate=!1);break;case";":o=this._readPredicate;break;case",":o=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",n);const r=this._predicate,a=this._object;this._subject=this._factory.quad(t,r,a,this.DEFAULTGRAPH),o=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",n);this._subject=null,o=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(i=this._readEntity(n))!==void 0){o=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,n)}if(t!==null){const r=this._predicate,a=this._object;e?this._emit(a,r,t,i):this._emit(t,r,a,i)}return o}_readBlankNodePunctuation(n){let o;switch(n.type){case";":o=this._readPredicate;break;case",":o=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,n)}return this._emit(this._subject,this._predicate,this._object,this._graph),o}_readQuadPunctuation(n){return n.type!=="."?this._error("Expected dot to follow quad",n):this._readInTopContext}_readPrefix(n){return n.type!=="prefix"?this._error("Expected prefix to follow @prefix",n):(this._prefix=n.value,this._readPrefixIRI)}_readPrefixIRI(n){if(n.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,n);const o=this._readEntity(n);return this._prefixes[this._prefix]=o.value,this._prefixCallback(this._prefix,o),this._readDeclarationPunctuation}_readBaseIRI(n){const o=n.type==="IRI"&&this._resolveIRI(n.value);return o?(this._setBase(o),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",n)}_readNamedGraphLabel(n){switch(n.type){case"IRI":case"blank":case"prefixed":return this._readSubject(n),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",n)}}_readNamedGraphBlankLabel(n){return n.type!=="]"?this._error("Invalid graph label",n):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(n){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(n)):n.type!=="."?this._error("Expected declaration to end with a dot",n):this._readInTopContext}_readQuantifierList(n){let o;switch(n.type){case"IRI":case"prefixed":if((o=this._readEntity(n,!0))!==void 0)break;default:return this._error(`Unexpected ${n.type}`,n)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,o,this.QUANTIFIERS_GRAPH)):this._quantified[o.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(n){return n.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(n))}_getPathReader(n){return this._afterPath=n,this._readPath}_readPath(n){switch(n.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const o=this._contextStack,i=o.length&&o[o.length-1];if(i&&i.type==="item"){const t=this._subject;this._restoreContext("item",n),this._emit(this._subject,this.RDF_FIRST,t,this._graph)}return this._afterPath(n)}}_readForwardPath(n){let o,i;const t=this._factory.blankNode();if((i=this._readEntity(n))!==void 0)return this._predicate===null?(o=this._subject,this._subject=t):(o=this._object,this._object=t),this._emit(o,i,t,this._graph),this._readPath}_readBackwardPath(n){const o=this._factory.blankNode();let i,t;if((i=this._readEntity(n))!==void 0)return this._predicate===null?(t=this._subject,this._subject=o):(t=this._object,this._object=o),this._emit(o,i,t,this._graph),this._readPath}_readRDFStarTailOrGraph(n){return n.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(n))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,n):this._readRDFStarTail(n)}_readRDFStarTail(n){if(n.type!==">>")return this._error(`Expected >> but got ${n.type}`,n);const o=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",n),this._subject===null?(this._subject=o,this._readPredicate):(this._object=o,this._getContextEndReader())}_getContextEndReader(){const n=this._contextStack;if(!n.length)return this._readPunctuation;switch(n[n.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(n,o,i,t){this._callback(null,this._factory.quad(n,o,i,t||this.DEFAULTGRAPH))}_error(n,o){const i=new Error(`${n} on line ${o.line}.`);i.context={token:o,line:o.line,previousToken:this._lexer.previousToken},this._callback(i),this._callback=gT}_resolveIRI(n){return/^[a-z][a-z0-9+.-]*:/i.test(n)?n:this._resolveRelativeIRI(n)}_resolveRelativeIRI(n){if(!n.length)return this._base;switch(n[0]){case"#":return this._base+n;case"?":return this._base.replace(/(?:\?.*)?$/,n);case"/":return(n[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(n);default:return/^[^/:]*:/.test(n)?null:this._removeDotSegments(this._basePath+n)}}_removeDotSegments(n){if(!/(^|\/)\.\.?($|[/#?])/.test(n))return n;const o=n.length;let i="",t=-1,e=-1,r=0,a="/";for(;t<o;){switch(a){case":":if(e<0&&n[++t]==="/"&&n[++t]==="/")for(;(e=t+1)<o&&n[e]!=="/";)t=e;break;case"?":case"#":t=o;break;case"/":if(n[t+1]===".")switch(a=n[++t+1],a){case"/":i+=n.substring(r,t-1),r=t+1;break;case void 0:case"?":case"#":return i+n.substring(r,t)+n.substr(t+1);case".":if(a=n[++t+1],a===void 0||a==="/"||a==="?"||a==="#"){if(i+=n.substring(r,t-2),(r=i.lastIndexOf("/"))>=e&&(i=i.substr(0,r)),a!=="/")return`${i}/${n.substr(t+1)}`;r=t+1}}}a=n[++t]}return i+n.substring(r)}parse(n,o,i){let t,e,r;if(o&&(o.onQuad||o.onPrefix||o.onComment)?(t=o.onQuad,e=o.onPrefix,r=o.onComment):(t=o,e=i),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${L9++}_`,this._prefixCallback=e||gT,this._inversePredicate=!1,this._quantified=Object.create(null),!t){const c=[];let s;if(this._callback=(d,l)=>{d?s=d:l&&c.push(l)},this._lexer.tokenize(n).every(d=>this._readCallback=this._readCallback(d)),s)throw s;return c}let a=(c,s)=>{c!==null?(this._callback(c),this._callback=gT):this._readCallback&&(this._readCallback=this._readCallback(s))};r&&(this._lexer.comments=!0,a=(c,s)=>{c!==null?(this._callback(c),this._callback=gT):this._readCallback&&(s.type==="comment"?r(s.value):this._readCallback=this._readCallback(s))}),this._callback=t,this._lexer.tokenize(n,a)}}function gT(){}function TX(u,n){u._factory=n,u.DEFAULTGRAPH=n.defaultGraph(),u.RDF_FIRST=n.namedNode(Ar.rdf.first),u.RDF_REST=n.namedNode(Ar.rdf.rest),u.RDF_NIL=n.namedNode(Ar.rdf.nil),u.N3_FORALL=n.namedNode(Ar.r.forAll),u.N3_FORSOME=n.namedNode(Ar.r.forSome),u.ABBREVIATIONS={a:n.namedNode(Ar.rdf.type),"=":n.namedNode(Ar.owl.sameAs),">":n.namedNode(Ar.log.implies),"<":n.namedNode(Ar.log.isImpliedBy)},u.QUANTIFIERS_GRAPH=n.namedNode("urn:n3:quantifiers")}TX($w.prototype,Qn);function Gte(u){return!!u&&u.termType==="NamedNode"}function zte(u){return!!u&&u.termType==="BlankNode"}function Xte(u){return!!u&&u.termType==="Literal"}function Jte(u){return!!u&&u.termType==="Variable"}function kte(u){return!!u&&u.termType==="Quad"}function dv(u){return!!u&&u.termType==="DefaultGraph"}function Kte(u){return dv(u.graph)}function Wte(u,n){return wX({"":u.value||u},n)("")}function wX(u,n){const o=Object.create(null);for(const t in u)i(t,u[t]);n=n||Qn;function i(t,e){if(typeof e=="string"){const r=Object.create(null);o[t]=a=>r[a]||(r[a]=n.namedNode(e+a))}else if(!(t in o))throw new Error(`Unknown prefix: ${t}`);return o[t]}return i}const SX=Object.freeze(Object.defineProperty({__proto__:null,inDefaultGraph:Kte,isBlankNode:zte,isDefaultGraph:dv,isLiteral:Xte,isNamedNode:Gte,isQuad:kte,isVariable:Jte,prefix:Wte,prefixes:wX},Symbol.toStringTag,{value:"Module"}));function sw(u){return u.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const Yte=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,Zte=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,M9="./",ere="../",t4="?",C9="#";class Mv{constructor(n){this.base=n,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(n.length+1)}static supports(n){return!Yte.test(n)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!Mv.supports(this.base))return this._baseMatcher=/.^/;const n=/^[^:]*:\/*/.exec(this.base)[0],o=["^",sw(n)],i=[],t=[],e=/[^/?#]*([/?#])/y;let r,a=0,c=0,s=e.lastIndex=n.length;for(;!a&&!c&&(r=e.exec(this.base));)r[1]===C9?c=e.lastIndex-1:(o.push(sw(r[0]),"(?:"),i.push(")?"),r[1]!==t4?t.push(s=e.lastIndex):(a=s=e.lastIndex,c=this.base.indexOf(C9,a),this._pathReplacements[a]=t4));for(let d=0;d<t.length;d++)this._pathReplacements[t[d]]=ere.repeat(t.length-d-1);return this._pathReplacements[t[t.length-1]]=M9,this._baseLength=c>0?c:this.base.length,o.push(sw(this.base.substring(s,this._baseLength)),a?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...o,...i].join(""))}toRelative(n){const o=this._getBaseMatcher().exec(n);if(!o)return n;const i=o[0].length;if(i===this._baseLength&&i===n.length)return"";const t=this._pathReplacements[i];if(t){const e=n.substring(i);return t!==t4&&!Zte.test(e)?n:t===M9&&/^[^?#]/.test(e)?e:t+e}return n.substring(i-1)}}const Cp=Qn.defaultGraph(),{rdf:tre,xsd:cf}=Ar,q9=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,B9=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,rre={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class qp extends on{equals(n){return n===this}}class Cv{constructor(n,o){if(this._prefixRegex=/$0^/,n&&typeof n.write!="function"&&(o=n,n=null),o=o||{},this._lists=o.lists,n)this._outputStream=n,this._endStream=o.end===void 0?!0:!!o.end;else{let i="";this._outputStream={write(t,e,r){i+=t,r&&r()},end:t=>{t&&t(null,i)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(o.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=Cp,this._prefixIRIs=Object.create(null),o.prefixes&&this.addPrefixes(o.prefixes),o.baseIRI&&(this._baseIri=new Mv(o.baseIRI)))}get _inDefaultGraph(){return Cp.equals(this._graph)}_write(n,o){this._outputStream.write(n,"utf8",o)}_writeQuad(n,o,i,t,e){try{t.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(Cp.equals(t)?"":`${this._encodeIriOrBlank(t)} {
`)),this._graph=t,this._subject=null),n.equals(this._subject)?o.equals(this._predicate)?this._write(`, ${this._encodeObject(i)}`,e):this._write(`;
    ${this._encodePredicate(this._predicate=o)} ${this._encodeObject(i)}`,e):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=n)} ${this._encodePredicate(this._predicate=o)} ${this._encodeObject(i)}`,e)}catch(r){e&&e(r)}}_writeQuadLine(n,o,i,t,e){delete this._prefixMatch,this._write(this.quadToString(n,o,i,t),e)}quadToString(n,o,i,t){return`${this._encodeSubject(n)} ${this._encodeIriOrBlank(o)} ${this._encodeObject(i)}${t&&t.value?` ${this._encodeIriOrBlank(t)} .
`:` .
`}`}quadsToString(n){let o="";for(const i of n)o+=this.quadToString(i.subject,i.predicate,i.object,i.graph);return o}_encodeSubject(n){return n.termType==="Quad"?this._encodeQuad(n):this._encodeIriOrBlank(n)}_encodeIriOrBlank(n){if(n.termType!=="NamedNode")return this._lists&&n.value in this._lists&&(n=this.list(this._lists[n.value])),"id"in n?n.id:`_:${n.value}`;let o=n.value;this._baseIri&&(o=this._baseIri.toRelative(o)),q9.test(o)&&(o=o.replace(B9,$9));const i=this._prefixRegex.exec(o);return i?i[1]?this._prefixIRIs[i[1]]+i[2]:o:`<${o}>`}_encodeLiteral(n){let o=n.value;if(q9.test(o)&&(o=o.replace(B9,$9)),n.language)return`"${o}"@${n.language}`;if(this._lineMode){if(n.datatype.value===cf.string)return`"${o}"`}else switch(n.datatype.value){case cf.string:return`"${o}"`;case cf.boolean:if(o==="true"||o==="false")return o;break;case cf.integer:if(/^[+-]?\d+$/.test(o))return o;break;case cf.decimal:if(/^[+-]?\d*\.\d+$/.test(o))return o;break;case cf.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(o))return o;break}return`"${o}"^^${this._encodeIriOrBlank(n.datatype)}`}_encodePredicate(n){return n.value===tre.type?"a":this._encodeIriOrBlank(n)}_encodeObject(n){switch(n.termType){case"Quad":return this._encodeQuad(n);case"Literal":return this._encodeLiteral(n);default:return this._encodeIriOrBlank(n)}}_encodeQuad({subject:n,predicate:o,object:i,graph:t}){return`<<${this._encodeSubject(n)} ${this._encodePredicate(o)} ${this._encodeObject(i)}${dv(t)?"":` ${this._encodeIriOrBlank(t)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(n,o,i,t,e){i===void 0?this._writeQuad(n.subject,n.predicate,n.object,n.graph,o):typeof t=="function"?this._writeQuad(n,o,i,Cp,t):this._writeQuad(n,o,i,t||Cp,e)}addQuads(n){for(let o=0;o<n.length;o++)this.addQuad(n[o])}addPrefix(n,o,i){const t={};t[n]=o,this.addPrefixes(t,i)}addPrefixes(n,o){if(!this._prefixIRIs)return o&&o();let i=!1;for(let t in n){let e=n[t];typeof e!="string"&&(e=e.value),i=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[e]=t+=":",this._write(`@prefix ${t} <${e}>.
`)}if(i){let t="",e="";for(const r in this._prefixIRIs)t+=t?`|${r}`:r,e+=(e?"|":"")+this._prefixIRIs[r];t=sw(t),this._prefixRegex=new RegExp(`^(?:${e})[^/]*$|^(${t})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(i?`
`:"",o)}blank(n,o){let i=n,t,e;switch(n===void 0?i=[]:n.termType?i=[{predicate:n,object:o}]:"length"in n||(i=[n]),e=i.length){case 0:return new qp("[]");case 1:if(t=i[0],!(t.object instanceof qp))return new qp(`[ ${this._encodePredicate(t.predicate)} ${this._encodeObject(t.object)} ]`);default:let r="[";for(let a=0;a<e;a++)t=i[a],t.predicate.equals(n)?r+=`, ${this._encodeObject(t.object)}`:(r+=`${(a?`;
  `:`
  `)+this._encodePredicate(t.predicate)} ${this._encodeObject(t.object)}`,n=t.predicate);return new qp(`${r}
]`)}}list(n){const o=n&&n.length||0,i=new Array(o);for(let t=0;t<o;t++)i[t]=this._encodeObject(n[t]);return new qp(`(${i.join(" ")})`)}end(n){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let o=n&&((i,t)=>{o=null,n(i,t)});if(this._endStream)try{return this._outputStream.end(o)}catch{}o&&o()}}function $9(u){let n=rre[u];return n===void 0&&(u.length===1?(n=u.charCodeAt(0).toString(16),n="\\u0000".substr(0,6-n.length)+n):(n=((u.charCodeAt(0)-55296)*1024+u.charCodeAt(1)+9216).toString(16),n="\\U00000000".substr(0,10-n.length)+n)),n}var Uw=Dt();const r4=Symbol("iter");function Z3(u,n,o=4){if(o===0)return Object.assign(u,n);for(const i in n)u[i]=Z3(u[i]||Object.create(null),n[i],o-1);return u}function AX(u,n,o=4){let i=!1;for(const t in u)if(t in n){const e=o===0?null:AX(u[t],n[t],o-1);if(e!==!1)i=i||Object.create(null),i[t]=e;else if(o===3)return!1}return i}function OX(u,n,o=4){let i=!1;for(const t in u)if(!(t in n))i=i||Object.create(null),i[t]=o===0?null:Z3({},u[t],o-1);else if(o!==0){const e=OX(u[t],n[t],o-1);if(e!==!1)i=i||Object.create(null),i[t]=e;else if(o===3)return!1}return i}class QO{constructor(n={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=n.factory||Qn}_termFromId(n){if(n[0]==="."){const o=this._entities,i=n.split(".");return this._factory.quad(this._termFromId(o[i[1]]),this._termFromId(o[i[2]]),this._termFromId(o[i[3]]),i[4]&&this._termFromId(o[i[4]]))}return $l(n,this._factory)}_termToNumericId(n){if(n.termType==="Quad"){const o=this._termToNumericId(n.subject),i=this._termToNumericId(n.predicate),t=this._termToNumericId(n.object);let e;return o&&i&&t&&(dv(n.graph)||(e=this._termToNumericId(n.graph)))&&this._ids[e?`.${o}.${i}.${t}.${e}`:`.${o}.${i}.${t}`]}return this._ids[Xi(n)]}_termToNewNumericId(n){const o=n&&n.termType==="Quad"?`.${this._termToNewNumericId(n.subject)}.${this._termToNewNumericId(n.predicate)}.${this._termToNewNumericId(n.object)}${dv(n.graph)?"":`.${this._termToNewNumericId(n.graph)}`}`:Xi(n);return this._ids[o]||(this._ids[this._entities[++this._id]=o]=this._id)}createBlankNode(n){let o,i;if(n)for(o=n=`_:${n}`,i=1;this._ids[o];)o=n+i++;else do o=`_:b${this._blankNodeIndex++}`;while(this._ids[o]);return this._ids[o]=++this._id,this._entities[this._id]=o,this._factory.blankNode(o.substr(2))}}class Fr{constructor(n,o){this._size=0,this._graphs=Object.create(null),!o&&n&&!n[0]&&typeof n.match!="function"&&(o=n,n=null),o=o||{},this._factory=o.factory||Qn,this._entityIndex=o.entityIndex||new QO({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),n&&this.addAll(n)}get size(){let n=this._size;if(n!==null)return n;n=0;const o=this._graphs;let i,t;for(const e in o)for(const r in i=o[e].subjects)for(const a in t=i[r])n+=Object.keys(t[a]).length;return this._size=n}_addToIndex(n,o,i,t){const e=n[o]||(n[o]={}),r=e[i]||(e[i]={}),a=t in r;return a||(r[t]=null),!a}_removeFromIndex(n,o,i,t){const e=n[o],r=e[i];delete r[t];for(const a in r)return;delete e[i];for(const a in e)return;delete n[o]}*_findInIndex(n,o,i,t,e,r,a,c){let s,d,l;const f=this._entities,h=this._termFromId(f[c]),p={subject:null,predicate:null,object:null};o&&((s=n,n={})[o]=s[o]);for(const y in n)if(d=n[y]){p[e]=this._termFromId(f[y]),i&&((s=d,d={})[i]=s[i]);for(const _ in d)if(l=d[_]){p[r]=this._termFromId(f[_]);const b=t?t in l?[t]:[]:Object.keys(l);for(let m=0;m<b.length;m++)p[a]=this._termFromId(f[b[m]]),yield this._factory.quad(p.subject,p.predicate,p.object,h)}}}_loop(n,o){for(const i in n)o(i)}_loopByKey0(n,o,i){let t,e;if(t=n[o])for(e in t)i(e)}_loopByKey1(n,o,i){let t,e;for(t in n)e=n[t],e[o]&&i(t)}_loopBy2Keys(n,o,i,t){let e,r,a;if((e=n[o])&&(r=e[i]))for(a in r)t(a)}_countInIndex(n,o,i,t){let e=0,r,a,c;o&&((r=n,n={})[o]=r[o]);for(const s in n)if(a=n[s]){i&&((r=a,a={})[i]=r[i]);for(const d in a)(c=a[d])&&(t?t in c&&e++:e+=Object.keys(c).length)}return e}_getGraphs(n){return n=n===""?1:n&&(this._termToNumericId(n)||-1),typeof n!="number"?this._graphs:{[n]:this._graphs[n]}}_uniqueEntities(n){const o=Object.create(null);return i=>{i in o||(o[i]=!0,n(this._termFromId(this._entities[i],this._factory)))}}add(n){return this.addQuad(n),this}addQuad(n,o,i,t){o||(t=n.graph,i=n.object,o=n.predicate,n=n.subject),t=t?this._termToNewNumericId(t):1;let e=this._graphs[t];return e||(e=this._graphs[t]={subjects:{},predicates:{},objects:{}},Object.freeze(e)),n=this._termToNewNumericId(n),o=this._termToNewNumericId(o),i=this._termToNewNumericId(i),this._addToIndex(e.subjects,n,o,i)?(this._addToIndex(e.predicates,o,i,n),this._addToIndex(e.objects,i,n,o),this._size=null,!0):!1}addQuads(n){for(let o=0;o<n.length;o++)this.addQuad(n[o])}delete(n){return this.removeQuad(n),this}has(n,o,i,t){return n&&n.subject&&({subject:n,predicate:o,object:i,graph:t}=n),!this.readQuads(n,o,i,t).next().done}import(n){return n.on("data",o=>{this.addQuad(o)}),n}removeQuad(n,o,i,t){o||({subject:n,predicate:o,object:i,graph:t}=n),t=t?this._termToNumericId(t):1;const e=this._graphs;let r,a,c;if(!(n=n&&this._termToNumericId(n))||!(o=o&&this._termToNumericId(o))||!(i=i&&this._termToNumericId(i))||!(r=e[t])||!(a=r.subjects[n])||!(c=a[o])||!(i in c))return!1;this._removeFromIndex(r.subjects,n,o,i),this._removeFromIndex(r.predicates,o,i,n),this._removeFromIndex(r.objects,i,n,o),this._size!==null&&this._size--;for(n in r.subjects)return!0;return delete e[t],!0}removeQuads(n){for(let o=0;o<n.length;o++)this.removeQuad(n[o])}remove(n){return n.on("data",o=>{this.removeQuad(o)}),n}removeMatches(n,o,i,t){const e=new Uw.Readable({objectMode:!0}),r=this.readQuads(n,o,i,t);return e._read=a=>{for(;--a>=0;){const{done:c,value:s}=r.next();if(c){e.push(null);return}e.push(s)}},this.remove(e)}deleteGraph(n){return this.removeMatches(null,null,null,n)}getQuads(n,o,i,t){return[...this.readQuads(n,o,i,t)]}*readQuads(n,o,i,t){const e=this._getGraphs(t);let r,a,c,s;if(!(n&&!(a=this._termToNumericId(n))||o&&!(c=this._termToNumericId(o))||i&&!(s=this._termToNumericId(i))))for(const d in e)(r=e[d])&&(a?s?yield*this._findInIndex(r.objects,s,a,c,"object","subject","predicate",d):yield*this._findInIndex(r.subjects,a,c,null,"subject","predicate","object",d):c?yield*this._findInIndex(r.predicates,c,s,null,"predicate","object","subject",d):s?yield*this._findInIndex(r.objects,s,null,null,"object","subject","predicate",d):yield*this._findInIndex(r.subjects,null,null,null,"subject","predicate","object",d))}match(n,o,i,t){return new zi(this,n,o,i,t,{entityIndex:this._entityIndex})}countQuads(n,o,i,t){const e=this._getGraphs(t);let r=0,a,c,s,d;if(n&&!(c=this._termToNumericId(n))||o&&!(s=this._termToNumericId(o))||i&&!(d=this._termToNumericId(i)))return 0;for(const l in e)(a=e[l])&&(n?i?r+=this._countInIndex(a.objects,d,c,s):r+=this._countInIndex(a.subjects,c,s,d):o?r+=this._countInIndex(a.predicates,s,d,c):r+=this._countInIndex(a.objects,d,c,s));return r}forEach(n,o,i,t,e){this.some(r=>(n(r,this),!1),o,i,t,e)}every(n,o,i,t,e){return!this.some(r=>!n(r,this),o,i,t,e)}some(n,o,i,t,e){for(const r of this.readQuads(o,i,t,e))if(n(r,this))return!0;return!1}getSubjects(n,o,i){const t=[];return this.forSubjects(e=>{t.push(e)},n,o,i),t}forSubjects(n,o,i,t){const e=this._getGraphs(t);let r,a,c;if(n=this._uniqueEntities(n),!(o&&!(a=this._termToNumericId(o))||i&&!(c=this._termToNumericId(i))))for(t in e)(r=e[t])&&(a?c?this._loopBy2Keys(r.predicates,a,c,n):this._loopByKey1(r.subjects,a,n):c?this._loopByKey0(r.objects,c,n):this._loop(r.subjects,n))}getPredicates(n,o,i){const t=[];return this.forPredicates(e=>{t.push(e)},n,o,i),t}forPredicates(n,o,i,t){const e=this._getGraphs(t);let r,a,c;if(n=this._uniqueEntities(n),!(o&&!(a=this._termToNumericId(o))||i&&!(c=this._termToNumericId(i))))for(t in e)(r=e[t])&&(a?c?this._loopBy2Keys(r.objects,c,a,n):this._loopByKey0(r.subjects,a,n):c?this._loopByKey1(r.predicates,c,n):this._loop(r.predicates,n))}getObjects(n,o,i){const t=[];return this.forObjects(e=>{t.push(e)},n,o,i),t}forObjects(n,o,i,t){const e=this._getGraphs(t);let r,a,c;if(n=this._uniqueEntities(n),!(o&&!(a=this._termToNumericId(o))||i&&!(c=this._termToNumericId(i))))for(t in e)(r=e[t])&&(a?c?this._loopBy2Keys(r.subjects,a,c,n):this._loopByKey1(r.objects,a,n):c?this._loopByKey0(r.predicates,c,n):this._loop(r.objects,n))}getGraphs(n,o,i){const t=[];return this.forGraphs(e=>{t.push(e)},n,o,i),t}forGraphs(n,o,i,t){for(const e in this._graphs)this.some(r=>(n(r.graph),!0),o,i,t,this._termFromId(this._entities[e]))}createBlankNode(n){return this._entityIndex.createBlankNode(n)}extractLists({remove:n=!1,ignoreErrors:o=!1}={}){const i={},t=o?(()=>!0):((a,c)=>{throw new Error(`${a.value} ${c}`)}),e=this.getQuads(null,Ar.rdf.rest,Ar.rdf.nil,null),r=n?[...e]:[];return e.forEach(a=>{const c=[];let s=!1,d,l;const f=a.graph;let h=a.subject;for(;h&&!s;){const p=this.getQuads(null,null,h,null),y=this.getQuads(h,null,null,null);let _,b=null,m=null,g=null;for(let T=0;T<y.length&&!s;T++)_=y[T],_.graph.equals(f)?d?s=t(h,"has non-list arcs out"):_.predicate.value===Ar.rdf.first?b?s=t(h,"has multiple rdf:first arcs"):r.push(b=_):_.predicate.value===Ar.rdf.rest?m?s=t(h,"has multiple rdf:rest arcs"):r.push(m=_):p.length?s=t(h,"can't be subject and object"):(d=_,l="subject"):s=t(h,"not confined to single graph");for(let T=0;T<p.length&&!s;++T)_=p[T],d?s=t(h,"can't have coreferences"):_.predicate.value===Ar.rdf.rest?g?s=t(h,"has incoming rdf:rest arcs"):g=_:(d=_,l="object");b?c.unshift(b.object):s=t(h,"has no list head"),h=g&&g.subject}s?n=!1:d&&(i[d[l].value]=c)}),n&&this.removeQuads(r),i}addAll(n){if(n instanceof zi&&(n=n.filtered),Array.isArray(n))this.addQuads(n);else if(n instanceof Fr&&n._entityIndex===this._entityIndex)n._size!==0&&(this._graphs=Z3(this._graphs,n._graphs),this._size=null);else for(const o of n)this.add(o);return this}contains(n){if(n instanceof zi&&(n=n.filtered),n===this)return!0;if(!(n instanceof Fr)||this._entityIndex!==n._entityIndex)return n.every(s=>this.has(s));const o=this._graphs,i=n._graphs;let t,e,r,a,c;for(const s in i){if(!(t=o[s]))return!1;t=t.subjects;for(const d in e=i[s].subjects){if(!(r=t[d]))return!1;for(const l in a=e[d]){if(!(c=r[l]))return!1;for(const f in a[l])if(!(f in c))return!1}}}return!0}deleteMatches(n,o,i,t){for(const e of this.match(n,o,i,t))this.removeQuad(e);return this}difference(n){if(n&&n instanceof zi&&(n=n.filtered),n===this)return new Fr({entityIndex:this._entityIndex});if(n instanceof Fr&&n._entityIndex===this._entityIndex){const o=new Fr({entityIndex:this._entityIndex}),i=OX(this._graphs,n._graphs);return i&&(o._graphs=i,o._size=null),o}return this.filter(o=>!n.has(o))}equals(n){return n instanceof zi&&(n=n.filtered),n===this||this.size===n.size&&this.contains(n)}filter(n){const o=new Fr({entityIndex:this._entityIndex});for(const i of this)n(i,this)&&o.add(i);return o}intersection(n){if(n instanceof zi&&(n=n.filtered),n===this){const o=new Fr({entityIndex:this._entityIndex});return o._graphs=Z3(Object.create(null),this._graphs),o._size=this._size,o}else if(n instanceof Fr&&this._entityIndex===n._entityIndex){const o=new Fr({entityIndex:this._entityIndex}),i=AX(n._graphs,this._graphs);return i&&(o._graphs=i,o._size=null),o}return this.filter(o=>n.has(o))}map(n){const o=new Fr({entityIndex:this._entityIndex});for(const i of this)o.add(n(i,this));return o}reduce(n,o){const i=this.readQuads();let t=o===void 0?i.next().value:o;for(const e of i)t=n(t,e,this);return t}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return new Cv().quadsToString(this)}union(n){const o=new Fr({entityIndex:this._entityIndex});return o._graphs=Z3(Object.create(null),this._graphs),o._size=this._size,o.addAll(n),o}*[Symbol.iterator](){yield*this.readQuads()}}function Wn(u,n,o=0){const i=n[o];if(i&&!(i in u))return!1;let t=!1;for(const e in i?{[i]:u[i]}:u){const r=o===2?null:Wn(u[e],n,o+1);r!==!1&&(t=t||Object.create(null),t[e]=r)}return t}class zi extends Uw.Readable{constructor(n,o,i,t,e,r){super({objectMode:!0}),Object.assign(this,{n3Store:n,subject:o,predicate:i,object:t,graph:e,options:r})}get filtered(){if(!this._filtered){const{n3Store:n,graph:o,object:i,predicate:t,subject:e}=this,r=this._filtered=new Fr({factory:n._factory,entityIndex:this.options.entityIndex});let a,c,s;if(e&&!(a=r._termToNumericId(e))||t&&!(c=r._termToNumericId(t))||i&&!(s=r._termToNumericId(i)))return r;const d=n._getGraphs(o);for(const l in d){let f,h,p,y;(y=d[l])&&(!a&&c?(h=Wn(y.predicates,[c,s,a]))&&(f=Wn(y.subjects,[a,c,s]),p=Wn(y.objects,[s,a,c])):s?(p=Wn(y.objects,[s,a,c]))&&(f=Wn(y.subjects,[a,c,s]),h=Wn(y.predicates,[c,s,a])):(f=Wn(y.subjects,[a,c,s]))&&(h=Wn(y.predicates,[c,s,a]),p=Wn(y.objects,[s,a,c])),f&&(r._graphs[l]={subjects:f,predicates:h,objects:p}))}r._size=null}return this._filtered}get size(){return this.filtered.size}_read(n){n>0&&!this[r4]&&(this[r4]=this[Symbol.iterator]());const o=this[r4];for(;--n>=0;){const{done:i,value:t}=o.next();if(i){this.push(null);return}this.push(t)}}addAll(n){return this.filtered.addAll(n)}contains(n){return this.filtered.contains(n)}deleteMatches(n,o,i,t){return this.filtered.deleteMatches(n,o,i,t)}difference(n){return this.filtered.difference(n)}equals(n){return this.filtered.equals(n)}every(n,o,i,t,e){return this.filtered.every(n,o,i,t,e)}filter(n){return this.filtered.filter(n)}forEach(n,o,i,t,e){return this.filtered.forEach(n,o,i,t,e)}import(n){return this.filtered.import(n)}intersection(n){return this.filtered.intersection(n)}map(n){return this.filtered.map(n)}some(n,o,i,t,e){return this.filtered.some(n,o,i,t,e)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(n){return this._filtered?this._filtered.union(n):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(n)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(n,o){return this.filtered.reduce(n,o)}toString(){return new Cv().quadsToString(this)}add(n){return this.filtered.add(n)}delete(n){return this.filtered.delete(n)}has(n){return this.filtered.has(n)}match(n,o,i,t){return new zi(this.filtered,n,o,i,t,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}class EX{dataset(n){return new Fr(n)}}function xX(u){const n=[];for(const{subject:o,object:i}of u.match(null,Qn.namedNode("http://www.w3.org/2000/10/swap/log#implies"),null,Qn.defaultGraph())){const t=[...u.match(null,null,null,o)],e=[...u.match(null,null,null,i)];n.push({premise:t,conclusion:e})}return n}class IX{constructor(n){this._store=n}_add(n,o,i,t,e){this._store._addToIndex(t.subjects,n,o,i)&&(this._store._addToIndex(t.predicates,o,i,n),this._store._addToIndex(t.objects,i,n,o),e())}_evaluatePremise(n,o,i,t=0){let e,r,a,c,s;const[d,l,f]=n.premise[t].value,h=o[n.premise[t].content],p=!(a=d.value);for(a in p?h:{[a]:h[a]})if(c=h[a]){p&&(d.value=Number(a)),e=!(a=l.value);for(a in e?c:{[a]:c[a]})if(s=c[a]){e&&(l.value=Number(a)),r=!(a=f.value);for(a in r?s:{[a]:s[a]})r&&(f.value=Number(a)),t===n.premise.length-1?n.conclusion.forEach(y=>{this._add(y.subject.value,y.predicate.value,y.object.value,o,()=>{i(y)})}):this._evaluatePremise(n,o,i,t+1);r&&(f.value=null)}e&&(l.value=null)}p&&(d.value=null)}_evaluateRules(n,o,i){for(let t=0;t<n.length;t++)this._evaluatePremise(n[t],o,i)}_reasonGraphNaive(n,o){const i=[];function t(a){a.next&&a.next.forEach(c=>{i.push([a.subject.value,a.predicate.value,a.object.value,c])})}const e=a=>{a.forEach(c=>{this._add(c.subject.value,c.predicate.value,c.object.value,o,()=>{t(c)})})};this._evaluateRules(n,o,t);let r;for(;(r=i.pop())!==void 0;){const[a,c,s,d]=r,l=d.basePremise.subject.value;l||(d.basePremise.subject.value=a);const f=d.basePremise.predicate.value;f||(d.basePremise.predicate.value=c);const h=d.basePremise.object.value;h||(d.basePremise.object.value=s),d.premise.length===0?e(d.conclusion):this._evaluatePremise(d,o,t),l||(d.basePremise.subject.value=null),f||(d.basePremise.predicate.value=null),h||(d.basePremise.object.value=null)}}_createRule({premise:n,conclusion:o}){const i={},t=r=>r.termType==="Variable"?i[r.value]=i[r.value]||{}:{value:this._store._termToNewNumericId(r)},e=r=>({subject:t(r.subject),predicate:t(r.predicate),object:t(r.object)});return{premise:n.map(r=>e(r)),conclusion:o.map(r=>e(r)),variables:Object.values(i)}}reason(n){Array.isArray(n)||(n=xX(n)),n=n.map(i=>this._createRule(i));for(const i of n)for(const t of n)for(let e=0;e<t.premise.length;e++){const r=t.premise[e];for(const a of i.conclusion){if(n4(r.subject,a.subject)&&n4(r.predicate,a.predicate)&&n4(r.object,a.object)){const c=new Set,s=[];r.subject.value=r.subject.value||1,r.object.value=r.object.value||1,r.predicate.value=r.predicate.value||1;for(let d=0;d<t.premise.length;d++)d!==e&&s.push(U9(t.premise[d],c));(a.next=a.next||[]).push({premise:s,conclusion:t.conclusion,basePremise:r})}t.variables.forEach(c=>{c.value=null})}}for(const i of n){const t=new Set;i.premise=i.premise.map(e=>U9(e,t))}const o=this._store._getGraphs();for(const i in o)this._reasonGraphNaive(n,o[i]);this._store._size=null}}function U9({subject:u,predicate:n,object:o},i){const t=u.value||i.has(u)||(i.add(u),!1),e=n.value||i.has(n)||(i.add(n),!1),r=o.value||i.has(o)||(i.add(o),!1);return!t&&e?{content:"predicates",value:[n,o,u]}:r?{content:"objects",value:[o,u,n]}:{content:"subjects",value:[u,n,o]}}function n4(u,n){return u.value===null&&(u.value=n.value),u.value===n.value}class RX extends Uw.Transform{constructor(n){super({decodeStrings:!0}),this._readableState.objectMode=!0;const o=new $w(n);let i,t;const e={onQuad:(r,a)=>{r&&this.emit("error",r)||a&&this.push(a)},onPrefix:(r,a)=>{this.emit("prefix",r,a)}};n&&n.comments&&(e.onComment=r=>{this.emit("comment",r)}),o.parse({on:(r,a)=>{switch(r){case"data":i=a;break;case"end":t=a;break}}},e),this._transform=(r,a,c)=>{i(r),c()},this._flush=r=>{t(),r()}}import(n){return n.on("data",o=>{this.write(o)}),n.on("end",()=>{this.end()}),n.on("error",o=>{this.emit("error",o)}),this}}class FX extends Uw.Transform{constructor(n){super({encoding:"utf8",writableObjectMode:!0});const o=this._writer=new Cv({write:(i,t,e)=>{this.push(i),e&&e()},end:i=>{this.push(null),i&&i()}},n);this._transform=(i,t,e)=>{o.addQuad(i,e)},this._flush=i=>{o.end(i)}}import(n){return n.on("data",o=>{this.write(o)}),n.on("end",()=>{this.end()}),n.on("error",o=>{this.emit("error",o)}),n.on("prefix",(o,i)=>{this._writer.addPrefix(o,i)}),this}}const nre={Lexer:BO,Parser:$w,Writer:Cv,Store:Fr,StoreFactory:EX,EntityIndex:QO,StreamParser:RX,StreamWriter:FX,Util:SX,Reasoner:IX,BaseIRI:Mv,DataFactory:Qn,Term:on,NamedNode:Bw,Literal:Tf,BlankNode:$O,Variable:UO,DefaultGraph:VO,Quad:Pf,Triple:Pf,termFromId:$l,termToId:Xi},ire=Object.freeze(Object.defineProperty({__proto__:null,BaseIRI:Mv,BlankNode:$O,DataFactory:Qn,DefaultGraph:VO,EntityIndex:QO,Lexer:BO,Literal:Tf,NamedNode:Bw,Parser:$w,Quad:Pf,Reasoner:IX,Store:Fr,StoreFactory:EX,StreamParser:RX,StreamWriter:FX,Term:on,Triple:Pf,Util:SX,Variable:UO,Writer:Cv,default:nre,getRulesFromDataset:xX,termFromId:$l,termToId:Xi},Symbol.toStringTag,{value:"Module"})),ia=VA(ire);var V9;function are(){if(V9)return Pp;V9=1,Object.defineProperty(Pp,"__esModule",{value:!0}),Pp.ActorRdfParseN3=void 0;const u=zf(),n=Ce(),o=ia;let i=class extends u.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,a){var d;const c=e.context.getSafe(n.KeysInitQuery.dataFactory);e.data.on("error",l=>s.emit("error",l));const s=e.data.pipe(new o.StreamParser({factory:c,baseIRI:(d=e.metadata)==null?void 0:d.baseIRI,format:r.endsWith("n3")?r:`${r}*`}));return{data:s,metadata:{triples:r==="text/turtle"||r==="application/n-triples"||r==="text/n3"}}}};return Pp.ActorRdfParseN3=i,Pp}var Q9;function ure(){return Q9||(Q9=1,(function(u){var n=Zu&&Zu.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Zu&&Zu.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(are(),u)})(Zu)),Zu}var to={},Bp={},ro={},no={},io={},i4={},H9;function ore(){return H9||(H9=1,(function(u){/**
 * Character classes and associated utilities for the 5th edition of XML 1.0.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(u,"__esModule",{value:!0}),u.CHAR=`	
\r ---`,u.S=` 	\r
`,u.NAME_START_CHAR=":A-Z_a-z-----------",u.NAME_CHAR="-"+u.NAME_START_CHAR+".0-9--",u.CHAR_RE=new RegExp("^["+u.CHAR+"]$","u"),u.S_RE=new RegExp("^["+u.S+"]+$","u"),u.NAME_START_CHAR_RE=new RegExp("^["+u.NAME_START_CHAR+"]$","u"),u.NAME_CHAR_RE=new RegExp("^["+u.NAME_CHAR+"]$","u"),u.NAME_RE=new RegExp("^["+u.NAME_START_CHAR+"]["+u.NAME_CHAR+"]*$","u"),u.NMTOKEN_RE=new RegExp("^["+u.NAME_CHAR+"]+$","u");var n=9,o=10,i=13,t=32;u.S_LIST=[t,o,i,n];function e(s){return s>=t&&s<=55295||s===o||s===i||s===n||s>=57344&&s<=65533||s>=65536&&s<=1114111}u.isChar=e;function r(s){return s===t||s===o||s===i||s===n}u.isS=r;function a(s){return s>=65&&s<=90||s>=97&&s<=122||s===58||s===95||s===8204||s===8205||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533||s>=65536&&s<=983039}u.isNameStartChar=a;function c(s){return a(s)||s>=48&&s<=57||s===45||s===46||s===183||s>=768&&s<=879||s>=8255&&s<=8256}u.isNameChar=c})(i4)),i4}var a4={},G9;function sre(){return G9||(G9=1,(function(u){/**
 * Character classes and associated utilities for the 2nd edition of XML 1.1.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(u,"__esModule",{value:!0}),u.CHAR="---",u.RESTRICTED_CHAR="-\b\v\f---",u.S=` 	\r
`,u.NAME_START_CHAR=":A-Z_a-z-----------",u.NAME_CHAR="-"+u.NAME_START_CHAR+".0-9--",u.CHAR_RE=new RegExp("^["+u.CHAR+"]$","u"),u.RESTRICTED_CHAR_RE=new RegExp("^["+u.RESTRICTED_CHAR+"]$","u"),u.S_RE=new RegExp("^["+u.S+"]+$","u"),u.NAME_START_CHAR_RE=new RegExp("^["+u.NAME_START_CHAR+"]$","u"),u.NAME_CHAR_RE=new RegExp("^["+u.NAME_CHAR+"]$","u"),u.NAME_RE=new RegExp("^["+u.NAME_START_CHAR+"]["+u.NAME_CHAR+"]*$","u"),u.NMTOKEN_RE=new RegExp("^["+u.NAME_CHAR+"]+$","u");var n=9,o=10,i=13,t=32;u.S_LIST=[t,o,i,n];function e(l){return l>=1&&l<=55295||l>=57344&&l<=65533||l>=65536&&l<=1114111}u.isChar=e;function r(l){return l>=1&&l<=8||l===11||l===12||l>=14&&l<=31||l>=127&&l<=132||l>=134&&l<=159}u.isRestrictedChar=r;function a(l){return l===9||l===10||l===13||l>31&&l<127||l===133||l>159&&l<=55295||l>=57344&&l<=65533||l>=65536&&l<=1114111}u.isCharAndNotRestricted=a;function c(l){return l===t||l===o||l===i||l===n}u.isS=c;function s(l){return l>=65&&l<=90||l>=97&&l<=122||l===58||l===95||l===8204||l===8205||l>=192&&l<=214||l>=216&&l<=246||l>=248&&l<=767||l>=880&&l<=893||l>=895&&l<=8191||l>=8304&&l<=8591||l>=11264&&l<=12271||l>=12289&&l<=55295||l>=63744&&l<=64975||l>=65008&&l<=65533||l>=65536&&l<=983039}u.isNameStartChar=s;function d(l){return s(l)||l>=48&&l<=57||l===45||l===46||l===183||l>=768&&l<=879||l>=8255&&l<=8256}u.isNameChar=d})(a4)),a4}var u4={},z9;function cre(){return z9||(z9=1,(function(u){/**
 * Character class utilities for XML NS 1.0 edition 3.
 *
 * @author Louis-Dominique Dubeau
 * @license MIT
 * @copyright Louis-Dominique Dubeau
 */Object.defineProperty(u,"__esModule",{value:!0}),u.NC_NAME_START_CHAR="A-Z_a-z------------",u.NC_NAME_CHAR="-"+u.NC_NAME_START_CHAR+".0-9--",u.NC_NAME_START_CHAR_RE=new RegExp("^["+u.NC_NAME_START_CHAR+"]$","u"),u.NC_NAME_CHAR_RE=new RegExp("^["+u.NC_NAME_CHAR+"]$","u"),u.NC_NAME_RE=new RegExp("^["+u.NC_NAME_START_CHAR+"]["+u.NC_NAME_CHAR+"]*$","u");function n(i){return i>=65&&i<=90||i===95||i>=97&&i<=122||i>=192&&i<=214||i>=216&&i<=246||i>=248&&i<=767||i>=880&&i<=893||i>=895&&i<=8191||i>=8204&&i<=8205||i>=8304&&i<=8591||i>=11264&&i<=12271||i>=12289&&i<=55295||i>=63744&&i<=64975||i>=65008&&i<=65533||i>=65536&&i<=983039}u.isNCNameStartChar=n;function o(i){return n(i)||i===45||i===46||i>=48&&i<=57||i===183||i>=768&&i<=879||i>=8255&&i<=8256}u.isNCNameChar=o})(u4)),u4}var X9;function NX(){if(X9)return io;X9=1,Object.defineProperty(io,"__esModule",{value:!0}),io.SaxesParser=io.EVENTS=void 0;const u=ore(),n=sre(),o=cre();var i=u.isS,t=u.isChar,e=u.isNameStartChar,r=u.isNameChar,a=u.S_LIST,c=u.NAME_RE,s=n.isChar,d=o.isNCNameStartChar,l=o.isNCNameChar,f=o.NC_NAME_RE;const h="http://www.w3.org/XML/1998/namespace",p="http://www.w3.org/2000/xmlns/",y={__proto__:null,xml:h,xmlns:p},_={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},b=-1,m=-2,g=0,T=1,v=2,A=3,I=4,q=5,O=6,w=7,S=8,E=9,R=10,L=11,M=12,B=13,X=14,J=15,ie=16,U=17,fe=18,me=19,he=20,te=21,xe=22,Ie=23,Fe=24,pe=25,ye=26,Q=27,P=28,D=29,x=30,N=31,$=32,G=33,V=34,k=35,H=36,Y=37,se=38,ce=39,Se=40,Me=41,Ae=42,oe=43,C=44,F=9,j=10,z=13,Z=32,le=33,ue=34,Pe=38,Ve=39,Be=45,Ze=47,K=59,we=60,Ee=61,$e=62,Ne=63,et=91,rt=93,Ke=133,lt=8232,re=Ge=>Ge===ue||Ge===Ve,ne=[ue,Ve],De=[...ne,et,$e],qe=[...ne,we,rt],Qe=[Ee,Ne,...a],Tt=[...a,$e,Pe,we];function Ue(Ge,ae,_e){switch(ae){case"xml":_e!==h&&Ge.fail(`xml prefix must be bound to ${h}.`);break;case"xmlns":_e!==p&&Ge.fail(`xmlns prefix must be bound to ${p}.`);break}switch(_e){case p:Ge.fail(ae===""?`the default namespace may not be set to ${_e}.`:`may not assign a prefix (even "xmlns") to the URI ${p}.`);break;case h:switch(ae){case"xml":break;case"":Ge.fail(`the default namespace may not be set to ${_e}.`);break;default:Ge.fail("may not assign the xml namespace to another prefix.")}break}}function ht(Ge,ae){for(const _e of Object.keys(ae))Ue(Ge,_e,ae[_e])}const He=Ge=>f.test(Ge),Je=Ge=>c.test(Ge),tt=0,wt=1,at=2;io.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const Xe={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};class xr{get closed(){return this._closed}constructor(ae){this.opt=ae??{},this.fragmentOpt=!!this.opt.fragment;const _e=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,_e){this.nameStartCheck=d,this.nameCheck=l,this.isName=He,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},y);const ve=this.opt.additionalNamespaces;ve!=null&&(ht(this,ve),Object.assign(this.ns,ve))}else this.nameStartCheck=e,this.nameCheck=r,this.isName=Je,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}_init(){var ae;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=tt,this.attribList=[];const{fragmentOpt:_e}=this;this.state=_e?B:g,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=_e,this.xmlDeclPossible=!_e,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:ve}=this.opt;if(ve===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");ve="1.0"}this.setXMLVersion(ve),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(_),(ae=this.readyHandler)===null||ae===void 0||ae.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(ae,_e){this[Xe[ae]]=_e}off(ae){this[Xe[ae]]=void 0}makeError(ae){var _e;let ve=(_e=this.fileName)!==null&&_e!==void 0?_e:"";return this.trackPosition&&(ve.length>0&&(ve+=":"),ve+=`${this.line}:${this.column}`),ve.length>0&&(ve+=": "),new Error(ve+ae)}fail(ae){const _e=this.makeError(ae),ve=this.errorHandler;if(ve===void 0)throw _e;return ve(_e),this}write(ae){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let _e=!1;ae===null?(_e=!0,ae=""):typeof ae=="object"&&(ae=ae.toString()),this.carriedFromPrevious!==void 0&&(ae=`${this.carriedFromPrevious}${ae}`,this.carriedFromPrevious=void 0);let ve=ae.length;const We=ae.charCodeAt(ve-1);!_e&&(We===z||We>=55296&&We<=56319)&&(this.carriedFromPrevious=ae[ve-1],ve--,ae=ae.slice(0,ve));const{stateTable:Ye}=this;for(this.chunk=ae,this.i=0;this.i<ve;)Ye[this.state].call(this);return this.chunkPosition+=ve,_e?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:ae,i:_e}=this;if(this.prevI=_e,this.i=_e+1,_e>=ae.length)return b;const ve=ae.charCodeAt(_e);if(this.column++,ve<55296){if(ve>=Z||ve===F)return ve;switch(ve){case j:return this.line++,this.column=0,this.positionAtNewLine=this.position,j;case z:return ae.charCodeAt(_e+1)===j&&(this.i=_e+2),this.line++,this.column=0,this.positionAtNewLine=this.position,m;default:return this.fail("disallowed character."),ve}}if(ve>56319)return ve>=57344&&ve<=65533||this.fail("disallowed character."),ve;const We=65536+(ve-55296)*1024+(ae.charCodeAt(_e+1)-56320);return this.i=_e+2,We>1114111&&this.fail("disallowed character."),We}getCode11(){const{chunk:ae,i:_e}=this;if(this.prevI=_e,this.i=_e+1,_e>=ae.length)return b;const ve=ae.charCodeAt(_e);if(this.column++,ve<55296){if(ve>31&&ve<127||ve>159&&ve!==lt||ve===F)return ve;switch(ve){case j:return this.line++,this.column=0,this.positionAtNewLine=this.position,j;case z:{const Ye=ae.charCodeAt(_e+1);(Ye===j||Ye===Ke)&&(this.i=_e+2)}case Ke:case lt:return this.line++,this.column=0,this.positionAtNewLine=this.position,m;default:return this.fail("disallowed character."),ve}}if(ve>56319)return ve>=57344&&ve<=65533||this.fail("disallowed character."),ve;const We=65536+(ve-55296)*1024+(ae.charCodeAt(_e+1)-56320);return this.i=_e+2,We>1114111&&this.fail("disallowed character."),We}getCodeNorm(){const ae=this.getCode();return ae===m?j:ae}unget(){this.i=this.prevI,this.column--}captureTo(ae){let{i:_e}=this;const{chunk:ve}=this;for(;;){const We=this.getCode(),Ye=We===m,mt=Ye?j:We;if(mt===b||ae.includes(mt))return this.text+=ve.slice(_e,this.prevI),mt;Ye&&(this.text+=`${ve.slice(_e,this.prevI)}
`,_e=this.i)}}captureToChar(ae){let{i:_e}=this;const{chunk:ve}=this;for(;;){let We=this.getCode();switch(We){case m:this.text+=`${ve.slice(_e,this.prevI)}
`,_e=this.i,We=j;break;case b:return this.text+=ve.slice(_e),!1}if(We===ae)return this.text+=ve.slice(_e,this.prevI),!0}}captureNameChars(){const{chunk:ae,i:_e}=this;for(;;){const ve=this.getCode();if(ve===b)return this.name+=ae.slice(_e),b;if(!r(ve))return this.name+=ae.slice(_e,this.prevI),ve===m?j:ve}}skipSpaces(){for(;;){const ae=this.getCodeNorm();if(ae===b||!i(ae))return ae}}setXMLVersion(ae){this.currentXMLVersion=ae,ae==="1.0"?(this.isChar=t,this.getCode=this.getCode10):(this.isChar=s,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=T}sBeginWhitespace(){const ae=this.i,_e=this.skipSpaces();switch(this.prevI!==ae&&(this.xmlDeclPossible=!1),_e){case we:if(this.state=J,this.text.length!==0)throw new Error("no-empty text at start");break;case b:break;default:this.unget(),this.state=B,this.xmlDeclPossible=!1}}sDoctype(){var ae;const _e=this.captureTo(De);switch(_e){case $e:{(ae=this.doctypeHandler)===null||ae===void 0||ae.call(this,this.text),this.text="",this.state=B,this.doctype=!0;break}case b:break;default:this.text+=String.fromCodePoint(_e),_e===et?this.state=I:re(_e)&&(this.state=A,this.q=_e)}}sDoctypeQuote(){const ae=this.q;this.captureToChar(ae)&&(this.text+=String.fromCodePoint(ae),this.q=null,this.state=v)}sDTD(){const ae=this.captureTo(qe);ae!==b&&(this.text+=String.fromCodePoint(ae),ae===rt?this.state=v:ae===we?this.state=O:re(ae)&&(this.state=q,this.q=ae))}sDTDQuoted(){const ae=this.q;this.captureToChar(ae)&&(this.text+=String.fromCodePoint(ae),this.state=I,this.q=null)}sDTDOpenWaka(){const ae=this.getCodeNorm();switch(this.text+=String.fromCodePoint(ae),ae){case le:this.state=w,this.openWakaBang="";break;case Ne:this.state=L;break;default:this.state=I}}sDTDOpenWakaBang(){const ae=String.fromCodePoint(this.getCodeNorm()),_e=this.openWakaBang+=ae;this.text+=ae,_e!=="-"&&(this.state=_e==="--"?S:I,this.openWakaBang="")}sDTDComment(){this.captureToChar(Be)&&(this.text+="-",this.state=E)}sDTDCommentEnding(){const ae=this.getCodeNorm();this.text+=String.fromCodePoint(ae),this.state=ae===Be?R:S}sDTDCommentEnded(){const ae=this.getCodeNorm();this.text+=String.fromCodePoint(ae),ae===$e?this.state=I:(this.fail("malformed comment."),this.state=S)}sDTDPI(){this.captureToChar(Ne)&&(this.text+="?",this.state=M)}sDTDPIEnding(){const ae=this.getCodeNorm();this.text+=String.fromCodePoint(ae),ae===$e&&(this.state=I)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:ae}=this;const{chunk:_e}=this;e:for(;;)switch(this.getCode()){case m:this.entity+=`${_e.slice(ae,this.prevI)}
`,ae=this.i;break;case K:{const{entityReturnState:ve}=this,We=this.entity+_e.slice(ae,this.prevI);this.state=ve;let Ye;We===""?(this.fail("empty entity name."),Ye="&;"):(Ye=this.parseEntity(We),this.entity=""),(ve!==B||this.textHandler!==void 0)&&(this.text+=Ye);break e}case b:this.entity+=_e.slice(ae);break e}}sOpenWaka(){const ae=this.getCode();if(e(ae))this.state=V,this.unget(),this.xmlDeclPossible=!1;else switch(ae){case Ze:this.state=oe,this.xmlDeclPossible=!1;break;case le:this.state=ie,this.openWakaBang="",this.xmlDeclPossible=!1;break;case Ne:this.state=Ie;break;default:this.fail("disallowed character in tag name"),this.state=B,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=he,this.openWakaBang="";break;case"--":this.state=U,this.openWakaBang="";break;case"DOCTYPE":this.state=v,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(Be)&&(this.state=fe)}sCommentEnding(){var ae;const _e=this.getCodeNorm();_e===Be?(this.state=me,(ae=this.commentHandler)===null||ae===void 0||ae.call(this,this.text),this.text=""):(this.text+=`-${String.fromCodePoint(_e)}`,this.state=U)}sCommentEnded(){const ae=this.getCodeNorm();ae!==$e?(this.fail("malformed comment."),this.text+=`--${String.fromCodePoint(ae)}`,this.state=U):this.state=B}sCData(){this.captureToChar(rt)&&(this.state=te)}sCDataEnding(){const ae=this.getCodeNorm();ae===rt?this.state=xe:(this.text+=`]${String.fromCodePoint(ae)}`,this.state=he)}sCDataEnding2(){var ae;const _e=this.getCodeNorm();switch(_e){case $e:{(ae=this.cdataHandler)===null||ae===void 0||ae.call(this,this.text),this.text="",this.state=B;break}case rt:this.text+="]";break;default:this.text+=`]]${String.fromCodePoint(_e)}`,this.state=he}}sPIFirstChar(){const ae=this.getCodeNorm();this.nameStartCheck(ae)?(this.piTarget+=String.fromCodePoint(ae),this.state=Fe):ae===Ne||i(ae)?(this.fail("processing instruction without a target."),this.state=ae===Ne?ye:pe):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(ae),this.state=Fe)}sPIRest(){const{chunk:ae,i:_e}=this;for(;;){const ve=this.getCodeNorm();if(ve===b){this.piTarget+=ae.slice(_e);return}if(!this.nameCheck(ve)){this.piTarget+=ae.slice(_e,this.prevI);const We=ve===Ne;We||i(ve)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=We?G:Q):this.state=We?ye:pe:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(ve));break}}}sPIBody(){if(this.text.length===0){const ae=this.getCodeNorm();ae===Ne?this.state=ye:i(ae)||(this.text=String.fromCodePoint(ae))}else this.captureToChar(Ne)&&(this.state=ye)}sPIEnding(){var ae;const _e=this.getCodeNorm();if(_e===$e){const{piTarget:ve}=this;ve.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(ae=this.piHandler)===null||ae===void 0||ae.call(this,{target:ve,body:this.text}),this.piTarget=this.text="",this.state=B}else _e===Ne?this.text+="?":(this.text+=`?${String.fromCodePoint(_e)}`,this.state=pe);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const ae=this.skipSpaces();if(ae===Ne){this.state=G;return}ae!==b&&(this.state=P,this.name=String.fromCodePoint(ae))}sXMLDeclName(){const ae=this.captureTo(Qe);if(ae===Ne){this.state=G,this.name+=this.text,this.text="",this.fail("XML declaration is incomplete.");return}if(i(ae)||ae===Ee){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail(`expected one of ${this.xmlDeclExpects.join(", ")}`)}this.state=ae===Ee?x:D}}sXMLDeclEq(){const ae=this.getCodeNorm();if(ae===Ne){this.state=G,this.fail("XML declaration is incomplete.");return}i(ae)||(ae!==Ee&&this.fail("value required."),this.state=x)}sXMLDeclValueStart(){const ae=this.getCodeNorm();if(ae===Ne){this.state=G,this.fail("XML declaration is incomplete.");return}i(ae)||(re(ae)?this.q=ae:(this.fail("value must be quoted."),this.q=Z),this.state=N)}sXMLDeclValue(){const ae=this.captureTo([this.q,Ne]);if(ae===Ne){this.state=G,this.text="",this.fail("XML declaration is incomplete.");return}if(ae===b)return;const _e=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const ve=_e;this.xmlDecl.version=ve,/^1\.[0-9]+$/.test(ve)?this.opt.forceXMLVersion||this.setXMLVersion(ve):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(_e)||this.fail("encoding value must match 	/^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=_e;break;case"standalone":_e!=="yes"&&_e!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=_e;break}this.name="",this.state=$}sXMLDeclSeparator(){const ae=this.getCodeNorm();if(ae===Ne){this.state=G;return}i(ae)||(this.fail("whitespace required."),this.unget()),this.state=Q}sXMLDeclEnding(){var ae;this.getCodeNorm()===$e?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(ae=this.xmldeclHandler)===null||ae===void 0||ae.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=B):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var ae;const _e=this.captureNameChars();if(_e===b)return;const ve=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=ve.ns=Object.create(null)),(ae=this.openTagStartHandler)===null||ae===void 0||ae.call(this,ve),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),_e){case $e:this.openTag();break;case Ze:this.state=k;break;default:i(_e)||this.fail("disallowed character in tag name."),this.state=H}}sOpenTagSlash(){this.getCode()===$e?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=H)}sAttrib(){const ae=this.skipSpaces();ae!==b&&(e(ae)?(this.unget(),this.state=Y):ae===$e?this.openTag():ae===Ze?this.state=k:this.fail("disallowed character in attribute name."))}sAttribName(){const ae=this.captureNameChars();ae===Ee?this.state=ce:i(ae)?this.state=se:ae===$e?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):ae!==b&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const ae=this.skipSpaces();switch(ae){case b:return;case Ee:this.state=ce;break;default:this.fail("attribute without value."),this.text="",this.name="",ae===$e?this.openTag():e(ae)?(this.unget(),this.state=Y):(this.fail("disallowed character in attribute name."),this.state=H)}}sAttribValue(){const ae=this.getCodeNorm();re(ae)?(this.q=ae,this.state=Se):i(ae)||(this.fail("unquoted attribute value."),this.state=Ae,this.unget())}sAttribValueQuoted(){const{q:ae,chunk:_e}=this;let{i:ve}=this;for(;;)switch(this.getCode()){case ae:this.pushAttrib(this.name,this.text+_e.slice(ve,this.prevI)),this.name=this.text="",this.q=null,this.state=Me;return;case Pe:this.text+=_e.slice(ve,this.prevI),this.state=X,this.entityReturnState=Se;return;case j:case m:case F:this.text+=`${_e.slice(ve,this.prevI)} `,ve=this.i;break;case we:this.text+=_e.slice(ve,this.prevI),this.fail("disallowed character.");return;case b:this.text+=_e.slice(ve);return}}sAttribValueClosed(){const ae=this.getCodeNorm();i(ae)?this.state=H:ae===$e?this.openTag():ae===Ze?this.state=k:e(ae)?(this.fail("no whitespace between attributes."),this.unget(),this.state=Y):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const ae=this.captureTo(Tt);switch(ae){case Pe:this.state=X,this.entityReturnState=Ae;break;case we:this.fail("disallowed character.");break;case b:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",ae===$e?this.openTag():this.state=H}}sCloseTag(){const ae=this.captureNameChars();ae===$e?this.closeTag():i(ae)?this.state=C:ae!==b&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case $e:this.closeTag();break;case b:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:ae,forbiddenState:_e}=this;const{chunk:ve,textHandler:We}=this;e:for(;;)switch(this.getCode()){case we:{if(this.state=J,We!==void 0){const{text:Ye}=this,mt=ve.slice(ae,this.prevI);Ye.length!==0?(We(Ye+mt),this.text=""):mt.length!==0&&We(mt)}_e=tt;break e}case Pe:this.state=X,this.entityReturnState=B,We!==void 0&&(this.text+=ve.slice(ae,this.prevI)),_e=tt;break e;case rt:switch(_e){case tt:_e=wt;break;case wt:_e=at;break;case at:break;default:throw new Error("impossible state")}break;case $e:_e===at&&this.fail('the string "]]>" is disallowed in char data.'),_e=tt;break;case m:We!==void 0&&(this.text+=`${ve.slice(ae,this.prevI)}
`),ae=this.i,_e=tt;break;case b:We!==void 0&&(this.text+=ve.slice(ae));break e;default:_e=tt}this.forbiddenState=_e}handleTextOutsideRoot(){let{i:ae}=this;const{chunk:_e,textHandler:ve}=this;let We=!1;e:for(;;){const Ye=this.getCode();switch(Ye){case we:{if(this.state=J,ve!==void 0){const{text:mt}=this,kt=_e.slice(ae,this.prevI);mt.length!==0?(ve(mt+kt),this.text=""):kt.length!==0&&ve(kt)}break e}case Pe:this.state=X,this.entityReturnState=B,ve!==void 0&&(this.text+=_e.slice(ae,this.prevI)),We=!0;break e;case m:ve!==void 0&&(this.text+=`${_e.slice(ae,this.prevI)}
`),ae=this.i;break;case b:ve!==void 0&&(this.text+=_e.slice(ae));break e;default:i(Ye)||(We=!0)}}We&&(!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(ae,_e){var ve;const{prefix:We,local:Ye}=this.qname(ae),mt={name:ae,prefix:We,local:Ye,value:_e};if(this.attribList.push(mt),(ve=this.attributeHandler)===null||ve===void 0||ve.call(this,mt),We==="xmlns"){const kt=_e.trim();this.currentXMLVersion==="1.0"&&kt===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[Ye]=kt,Ue(this,Ye,kt)}else if(ae==="xmlns"){const kt=_e.trim();this.topNS[""]=kt,Ue(this,"",kt)}}pushAttribPlain(ae,_e){var ve;const We={name:ae,value:_e};this.attribList.push(We),(ve=this.attributeHandler)===null||ve===void 0||ve.call(this,We)}end(){var ae,_e;this.sawRoot||this.fail("document must contain a root element.");const{tags:ve}=this;for(;ve.length>0;){const Ye=ve.pop();this.fail(`unclosed tag: ${Ye.name}`)}this.state!==g&&this.state!==B&&this.fail("unexpected end.");const{text:We}=this;return We.length!==0&&((ae=this.textHandler)===null||ae===void 0||ae.call(this,We),this.text=""),this._closed=!0,(_e=this.endHandler)===null||_e===void 0||_e.call(this),this._init(),this}resolve(ae){var _e,ve;let We=this.topNS[ae];if(We!==void 0)return We;const{tags:Ye}=this;for(let mt=Ye.length-1;mt>=0;mt--)if(We=Ye[mt].ns[ae],We!==void 0)return We;return We=this.ns[ae],We!==void 0?We:(ve=(_e=this.opt).resolvePrefix)===null||ve===void 0?void 0:ve.call(_e,ae)}qname(ae){const _e=ae.indexOf(":");if(_e===-1)return{prefix:"",local:ae};const ve=ae.slice(_e+1),We=ae.slice(0,_e);return(We===""||ve===""||ve.includes(":"))&&this.fail(`malformed name: ${ae}.`),{prefix:We,local:ve}}processAttribsNS(){var ae;const{attribList:_e}=this,ve=this.tag;{const{prefix:mt,local:kt}=this.qname(ve.name);ve.prefix=mt,ve.local=kt;const qt=ve.uri=(ae=this.resolve(mt))!==null&&ae!==void 0?ae:"";mt!==""&&(mt==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),qt===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(mt)}.`),ve.uri=mt))}if(_e.length===0)return;const{attributes:We}=ve,Ye=new Set;for(const mt of _e){const{name:kt,prefix:qt,local:ui}=mt;let Kr,Ut;qt===""?(Kr=kt==="xmlns"?p:"",Ut=kt):(Kr=this.resolve(qt),Kr===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(qt)}.`),Kr=qt),Ut=`{${Kr}}${ui}`),Ye.has(Ut)&&this.fail(`duplicate attribute: ${Ut}.`),Ye.add(Ut),mt.uri=Kr,We[kt]=mt}this.attribList=[]}processAttribsPlain(){const{attribList:ae}=this,_e=this.tag.attributes;for(const{name:ve,value:We}of ae)_e[ve]!==void 0&&this.fail(`duplicate attribute: ${ve}.`),_e[ve]=We;this.attribList=[]}openTag(){var ae;this.processAttribs();const{tags:_e}=this,ve=this.tag;ve.isSelfClosing=!1,(ae=this.openTagHandler)===null||ae===void 0||ae.call(this,ve),_e.push(ve),this.state=B,this.name=""}openSelfClosingTag(){var ae,_e,ve;this.processAttribs();const{tags:We}=this,Ye=this.tag;Ye.isSelfClosing=!0,(ae=this.openTagHandler)===null||ae===void 0||ae.call(this,Ye),(_e=this.closeTagHandler)===null||_e===void 0||_e.call(this,Ye),(this.tag=(ve=We[We.length-1])!==null&&ve!==void 0?ve:null)===null&&(this.closedRoot=!0),this.state=B,this.name=""}closeTag(){const{tags:ae,name:_e}=this;if(this.state=B,this.name="",_e===""){this.fail("weird empty close tag."),this.text+="</>";return}const ve=this.closeTagHandler;let We=ae.length;for(;We-- >0;){const Ye=this.tag=ae.pop();if(this.topNS=Ye.ns,ve==null||ve(Ye),Ye.name===_e)break;this.fail("unexpected close tag.")}We===0?this.closedRoot=!0:We<0&&(this.fail(`unmatched closing tag: ${_e}.`),this.text+=`</${_e}>`)}parseEntity(ae){if(ae[0]!=="#"){const ve=this.ENTITIES[ae];return ve!==void 0?ve:(this.fail(this.isName(ae)?"undefined entity.":"disallowed character in entity name."),`&${ae};`)}let _e=NaN;return ae[1]==="x"&&/^#x[0-9a-f]+$/i.test(ae)?_e=parseInt(ae.slice(2),16):/^#[0-9]+$/.test(ae)&&(_e=parseInt(ae.slice(1),10)),this.isChar(_e)?String.fromCodePoint(_e):(this.fail("malformed character entity."),`&${ae};`)}}return io.SaxesParser=xr,io}var $p={},J9;function dre(){if(J9)return $p;J9=1,Object.defineProperty($p,"__esModule",{value:!0}),$p.ParseError=void 0;let u=class extends Error{constructor(o,i){const t=o.saxParser;super(o.trackPosition?`Line ${t.line} column ${t.column+1}: ${i}`:i)}};return $p.ParseError=u,$p}var ao={},o4={},k9;function lre(){return k9||(k9=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.validateIri=u.IriValidationStrategy=void 0;function n(){const a="[!$&'()*+,;=]",c="%[a-fA-F0-9]{2}",s="([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",d=`${s}\\.${s}\\.${s}\\.${s}`,l="[a-fA-F0-9]{1,4}",f=`(${l}:${l}|${d})`,h=`((${l}:){6}${f}|::(${l}:){5}${f}|(${l})?::(${l}:){4}${f}|((${l}:){0,1}${l})?::(${l}:){3}${f}|((${l}:){0,2}${l})?::(${l}:){2}${f}|((${l}:){0,3}${l})?::${l}:${f}|((${l}:){0,4}${l})?::${f}|((${l}:){0,5}${l})?::${l}|((${l}:){0,6}${l})?::)`,p=`v[a-fA-F0-9]+\\.(${a}|${a}|":)+`,y=`\\[(${h}|${p})\\]`,_="[0-9]*",b="[a-zA-Z][a-zA-Z0-9+\\-.]*",g="[---]",A="[a-zA-Z0-9\\-._~-----------------]",I=`(${A}|${c}|${a}|[:@])*`,q=`(${I}|[\\/?])*`,O=`(${I}|${g}|[\\/?])*`,w=`(${I})+`,S=`(${I})*`,E="",R=`${w}(\\/${S})*`,L=`\\/(${w}(\\/${S})*)?`,M=`(\\/${S})*`,B=`(${A}|${c}|${a})*`,X=`(${y}|${d}|${B})`,U=`(\\/\\/${`(${`(${A}|${c}|${a}|:)*`}@)?${X}(:${_})?`}${M}|${L}|${R}|${E})`,fe=`^${b}:${U}(\\?${O})?(#${q})?$`;return new RegExp(fe,"u")}const o=n(),i=/^[A-Za-z][\d+-.A-Za-z]*:[^\u0000-\u0020"<>\\^`{|}]*$/u;var t;(function(r){r.Strict="strict",r.Pragmatic="pragmatic",r.None="none"})(t=u.IriValidationStrategy||(u.IriValidationStrategy={}));function e(r,a=t.Strict){switch(a){case t.Strict:return o.test(r)?void 0:new Error(`Invalid IRI according to RFC 3987: '${r}'`);case t.Pragmatic:return i.test(r)?void 0:new Error(`Invalid IRI according to RDF Turtle: '${r}'`);case t.None:return;default:return new Error(`Not supported validation strategy "${a}"`)}}u.validateIri=e})(o4)),o4}var K9;function fre(){return K9||(K9=1,(function(u){var n=ao&&ao.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ao&&ao.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(lre(),u)})(ao)),ao}var W9;function hre(){if(W9)return no;W9=1,Object.defineProperty(no,"__esModule",{value:!0}),no.ParseType=no.RdfXmlParser=void 0;const u=cr(),n=NX(),o=Dt(),i=dre(),t=hr(),e=fre();let r=class Wt extends o.Transform{constructor(s){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},s&&(Object.assign(this,s),this.options=s),this.dataFactory||(this.dataFactory=new t.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.validateUri!==!1&&(this.validateUri=!0),this.iriValidationStrategy||(this.iriValidationStrategy=this.validateUri?e.IriValidationStrategy.Pragmatic:e.IriValidationStrategy.None),this.saxParser=new n.SaxesParser({xmlns:!0,position:this.trackPosition}),this.attachSaxListeners()}import(s){const d=new o.PassThrough({readableObjectMode:!0});s.on("error",f=>l.emit("error",f)),s.on("data",f=>d.push(f)),s.on("end",()=>d.push(null));const l=d.pipe(new Wt(this.options));return l}_transform(s,d,l){try{this.saxParser.write(s)}catch(f){return l(f)}l()}newParseError(s){return new i.ParseError(this,s)}valueToUri(s,d){return this.uriToNamedNode((0,u.resolve)(s,d.baseIRI))}uriToNamedNode(s){const d=(0,e.validateIri)(s,this.iriValidationStrategy);if(d instanceof Error)throw this.newParseError(d.message);return this.dataFactory.namedNode(s)}validateNcname(s){if(!Wt.NCNAME_MATCHER.test(s))throw this.newParseError(`Not a valid NCName: ${s}`)}attachSaxListeners(){this.saxParser.on("error",s=>this.emit("error",s)),this.saxParser.on("opentag",this.onTag.bind(this)),this.saxParser.on("text",this.onText.bind(this)),this.saxParser.on("cdata",this.onText.bind(this)),this.saxParser.on("closetag",this.onCloseTag.bind(this)),this.saxParser.on("doctype",this.onDoctype.bind(this))}onTag(s){const d=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let l=a.RESOURCE;if(d&&(d.hadChildren=!0,l=d.childrenParseType),d&&d.childrenStringTags){const h=s.name;let p="";for(const m in s.attributes)p+=` ${m}="${s.attributes[m].value}"`;const _=`<${`${h}${p}`}>`;d.childrenStringTags.push(_);const b={childrenStringTags:d.childrenStringTags};b.childrenStringEmitClosingTag=`</${h}>`,this.activeTagStack.push(b);return}const f={};d?(f.language=d.language,f.baseIRI=d.baseIRI):f.baseIRI=this.baseIRI,this.activeTagStack.push(f),l===a.RESOURCE?this.onTagResource(s,f,d,!d):this.onTagProperty(s,f,d)}onTagResource(s,d,l,f){d.childrenParseType=a.PROPERTY;let h=!0;if(s.uri===Wt.RDF){if(!f&&Wt.FORBIDDEN_NODE_ELEMENTS.indexOf(s.local)>=0)throw this.newParseError(`Illegal node element name: ${s.local}`);switch(s.local){case"RDF":d.childrenParseType=a.RESOURCE;case"Description":h=!1}}const p=[],y=[];let _=null,b=!1,m=!1,g=null;for(const T in s.attributes){const v=s.attributes[T];if(l&&v.uri===Wt.RDF)switch(v.local){case"about":if(_)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${v.value} and ${_} where found.`);_=v.value;continue;case"ID":if(_)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${v.value} and ${_} where found.`);this.validateNcname(v.value),_="#"+v.value,b=!0;continue;case"nodeID":if(_)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${v.value} and ${_} where found.`);this.validateNcname(v.value),_=v.value,m=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":g=v.value;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(v.uri===Wt.XML){if(v.local==="lang"){d.language=v.value===""?null:v.value.toLowerCase();continue}else if(v.local==="base"){d.baseIRI=(0,u.resolve)(v.value,d.baseIRI);continue}}v.prefix!=="xml"&&v.prefix!=="xmlns"&&(v.prefix!==""||v.local!=="xmlns")&&v.uri&&(p.push(this.uriToNamedNode(v.uri+v.local)),y.push(v.value))}if(_!==null&&(d.subject=m?this.dataFactory.blankNode(_):this.valueToUri(_,d),b&&this.claimNodeId(d.subject)),d.subject||(d.subject=this.dataFactory.blankNode()),h){const T=this.uriToNamedNode(s.uri+s.local);this.emitTriple(d.subject,this.dataFactory.namedNode(Wt.RDF+"type"),T,l?l.reifiedStatementId:null)}if(l){if(l.predicate)if(l.childrenCollectionSubject){const T=this.dataFactory.blankNode();this.emitTriple(l.childrenCollectionSubject,l.childrenCollectionPredicate,T,l.reifiedStatementId),this.emitTriple(T,this.dataFactory.namedNode(Wt.RDF+"first"),d.subject,d.reifiedStatementId),l.childrenCollectionSubject=T,l.childrenCollectionPredicate=this.dataFactory.namedNode(Wt.RDF+"rest")}else{this.emitTriple(l.subject,l.predicate,d.subject,l.reifiedStatementId);for(let T=0;T<l.predicateSubPredicates.length;T++)this.emitTriple(d.subject,l.predicateSubPredicates[T],l.predicateSubObjects[T],null);l.predicateSubPredicates=[],l.predicateSubObjects=[],l.predicateEmitted=!0}for(let T=0;T<p.length;T++){const v=this.dataFactory.literal(y[T],d.datatype||d.language);this.emitTriple(d.subject,p[T],v,l.reifiedStatementId)}g&&this.emitTriple(d.subject,this.dataFactory.namedNode(Wt.RDF+"type"),this.uriToNamedNode(g),null)}}onTagProperty(s,d,l){if(d.childrenParseType=a.RESOURCE,d.subject=l.subject,s.uri===Wt.RDF&&s.local==="li"?(l.listItemCounter||(l.listItemCounter=1),d.predicate=this.uriToNamedNode(s.uri+"_"+l.listItemCounter++)):d.predicate=this.uriToNamedNode(s.uri+s.local),s.uri===Wt.RDF&&Wt.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(s.local)>=0)throw this.newParseError(`Illegal property element name: ${s.local}`);d.predicateSubPredicates=[],d.predicateSubObjects=[];let f=!1,h=!1,p=null,y=!0;const _=[],b=[];for(const m in s.attributes){const g=s.attributes[m];if(g.uri===Wt.RDF)switch(g.local){case"resource":if(p)throw this.newParseError(`Found both rdf:resource (${g.value}) and rdf:nodeID (${p}).`);if(f)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${g.value})`);d.hadChildren=!0,p=g.value,y=!1;continue;case"datatype":if(h)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${g.value}).`);if(f)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${g.value})`);d.datatype=this.valueToUri(g.value,d);continue;case"nodeID":if(h)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${g.value}).`);if(d.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${g.value}).`);if(f)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${g.value})`);this.validateNcname(g.value),d.hadChildren=!0,p=g.value,y=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(h)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(d.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${d.datatype.value})`);if(p)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${p})`);if(g.value==="Resource"){f=!0,d.childrenParseType=a.PROPERTY;const T=this.dataFactory.blankNode();this.emitTriple(d.subject,d.predicate,T,d.reifiedStatementId),d.subject=T,d.predicate=null}else g.value==="Collection"?(f=!0,d.hadChildren=!0,d.childrenCollectionSubject=d.subject,d.childrenCollectionPredicate=d.predicate,y=!1):g.value==="Literal"&&(f=!0,d.childrenTagsToString=!0,d.childrenStringTags=[]);continue;case"ID":this.validateNcname(g.value),d.reifiedStatementId=this.valueToUri("#"+g.value,d),this.claimNodeId(d.reifiedStatementId);continue}else if(g.uri===Wt.XML&&g.local==="lang"){d.language=g.value===""?null:g.value.toLowerCase();continue}if(g.prefix!=="xml"&&g.prefix!=="xmlns"&&(g.prefix!==""||g.local!=="xmlns")&&g.uri){if(f||d.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${g.value}`);d.hadChildren=!0,h=!0,_.push(this.uriToNamedNode(g.uri+g.local)),b.push(this.dataFactory.literal(g.value,d.datatype||d.language))}}if(p!==null){const m=d.subject;d.subject=y?this.dataFactory.blankNode(p):this.valueToUri(p,d),this.emitTriple(m,d.predicate,d.subject,d.reifiedStatementId);for(let g=0;g<_.length;g++)this.emitTriple(d.subject,_[g],b[g],null);d.predicateEmitted=!0}else y&&(d.predicateSubPredicates=_,d.predicateSubObjects=b,d.predicateEmitted=!1)}emitTriple(s,d,l,f){this.push(this.dataFactory.quad(s,d,l,this.defaultGraph)),f&&(this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(Wt.RDF+"type"),this.dataFactory.namedNode(Wt.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(Wt.RDF+"subject"),s,this.defaultGraph)),this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(Wt.RDF+"predicate"),d,this.defaultGraph)),this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(Wt.RDF+"object"),l,this.defaultGraph)))}claimNodeId(s){if(!this.allowDuplicateRdfIds){if(this.nodeIds[s.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${s.value}'.`);this.nodeIds[s.value]=!0}}onText(s){const d=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;d&&(d.childrenStringTags?d.childrenStringTags.push(s):d.predicate&&(d.text=s))}onCloseTag(){const s=this.activeTagStack.pop();if(s.childrenStringEmitClosingTag&&s.childrenStringTags.push(s.childrenStringEmitClosingTag),s.childrenTagsToString&&(s.datatype=this.dataFactory.namedNode(Wt.RDF+"XMLLiteral"),s.text=s.childrenStringTags.join(""),s.hadChildren=!1),s.childrenCollectionSubject)this.emitTriple(s.childrenCollectionSubject,s.childrenCollectionPredicate,this.dataFactory.namedNode(Wt.RDF+"nil"),s.reifiedStatementId);else if(s.predicate){if(!s.hadChildren&&s.childrenParseType!==a.PROPERTY)this.emitTriple(s.subject,s.predicate,this.dataFactory.literal(s.text||"",s.datatype||s.language),s.reifiedStatementId);else if(!s.predicateEmitted){const d=this.dataFactory.blankNode();this.emitTriple(s.subject,s.predicate,d,s.reifiedStatementId);for(let l=0;l<s.predicateSubPredicates.length;l++)this.emitTriple(d,s.predicateSubPredicates[l],s.predicateSubObjects[l],null)}}}onDoctype(s){s.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(d,l,f)=>(this.saxParser.ENTITIES[l]=f,""))}};no.RdfXmlParser=r,r.MIME_TYPE="application/rdf+xml",r.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",r.XML="http://www.w3.org/XML/1998/namespace",r.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],r.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],r.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u;var a;return(function(c){c[c.RESOURCE=0]="RESOURCE",c[c.PROPERTY=1]="PROPERTY"})(a||(no.ParseType=a={})),no}var Y9;function pre(){return Y9||(Y9=1,(function(u){var n=ro&&ro.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ro&&ro.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(hre(),u)})(ro)),ro}var Z9;function bre(){if(Z9)return Bp;Z9=1,Object.defineProperty(Bp,"__esModule",{value:!0}),Bp.ActorRdfParseRdfXml=void 0;const u=zf(),n=Ce(),o=pre();let i=class extends u.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e){var c;const r=e.context.getSafe(n.KeysInitQuery.dataFactory);e.data.on("error",s=>a.emit("error",s));const a=e.data.pipe(new o.RdfXmlParser({dataFactory:r,baseIRI:(c=e.metadata)==null?void 0:c.baseIRI}));return{data:a,metadata:{triples:!0}}}};return Bp.ActorRdfParseRdfXml=i,Bp}var eN;function yre(){return eN||(eN=1,(function(u){var n=to&&to.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=to&&to.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(bre(),u)})(to)),to}var uo={},Up={},oo={},s4={},tN;function _re(){return tN||(tN=1,Object.defineProperty(s4,"__esModule",{value:!0})),s4}var c4={},rN;function gre(){return rN||(rN=1,Object.defineProperty(c4,"__esModule",{value:!0})),c4}var d4={},nN;function mre(){return nN||(nN=1,Object.defineProperty(d4,"__esModule",{value:!0})),d4}var Vp={},En={},xn={},l4={},In={},mT={},iN;function vre(){return iN||(iN=1,Object.defineProperty(mT,"__esModule",{value:!0}),mT.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(u){return u.charCodeAt(0)}))),mT}var vT={},aN;function Tre(){return aN||(aN=1,Object.defineProperty(vT,"__esModule",{value:!0}),vT.default=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(function(u){return u.charCodeAt(0)}))),vT}var f4={},uN;function oN(){return uN||(uN=1,(function(u){var n;Object.defineProperty(u,"__esModule",{value:!0}),u.replaceCodePoint=u.fromCodePoint=void 0;var o=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);u.fromCodePoint=(n=String.fromCodePoint)!==null&&n!==void 0?n:function(e){var r="";return e>65535&&(e-=65536,r+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),r+=String.fromCharCode(e),r};function i(e){var r;return e>=55296&&e<=57343||e>1114111?65533:(r=o.get(e))!==null&&r!==void 0?r:e}u.replaceCodePoint=i;function t(e){return(0,u.fromCodePoint)(i(e))}u.default=t})(f4)),f4}var sN;function PX(){return sN||(sN=1,(function(u){var n=In&&In.__createBinding||(Object.create?(function(S,E,R,L){L===void 0&&(L=R);var M=Object.getOwnPropertyDescriptor(E,R);(!M||("get"in M?!E.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return E[R]}}),Object.defineProperty(S,L,M)}):(function(S,E,R,L){L===void 0&&(L=R),S[L]=E[R]})),o=In&&In.__setModuleDefault||(Object.create?(function(S,E){Object.defineProperty(S,"default",{enumerable:!0,value:E})}):function(S,E){S.default=E}),i=In&&In.__importStar||function(S){if(S&&S.__esModule)return S;var E={};if(S!=null)for(var R in S)R!=="default"&&Object.prototype.hasOwnProperty.call(S,R)&&n(E,S,R);return o(E,S),E},t=In&&In.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(u,"__esModule",{value:!0}),u.decodeXML=u.decodeHTMLStrict=u.decodeHTMLAttribute=u.decodeHTML=u.determineBranch=u.EntityDecoder=u.DecodingMode=u.BinTrieFlags=u.fromCodePoint=u.replaceCodePoint=u.decodeCodePoint=u.xmlDecodeTree=u.htmlDecodeTree=void 0;var e=t(vre());u.htmlDecodeTree=e.default;var r=t(Tre());u.xmlDecodeTree=r.default;var a=i(oN());u.decodeCodePoint=a.default;var c=oN();Object.defineProperty(u,"replaceCodePoint",{enumerable:!0,get:function(){return c.replaceCodePoint}}),Object.defineProperty(u,"fromCodePoint",{enumerable:!0,get:function(){return c.fromCodePoint}});var s;(function(S){S[S.NUM=35]="NUM",S[S.SEMI=59]="SEMI",S[S.EQUALS=61]="EQUALS",S[S.ZERO=48]="ZERO",S[S.NINE=57]="NINE",S[S.LOWER_A=97]="LOWER_A",S[S.LOWER_F=102]="LOWER_F",S[S.LOWER_X=120]="LOWER_X",S[S.LOWER_Z=122]="LOWER_Z",S[S.UPPER_A=65]="UPPER_A",S[S.UPPER_F=70]="UPPER_F",S[S.UPPER_Z=90]="UPPER_Z"})(s||(s={}));var d=32,l;(function(S){S[S.VALUE_LENGTH=49152]="VALUE_LENGTH",S[S.BRANCH_LENGTH=16256]="BRANCH_LENGTH",S[S.JUMP_TABLE=127]="JUMP_TABLE"})(l=u.BinTrieFlags||(u.BinTrieFlags={}));function f(S){return S>=s.ZERO&&S<=s.NINE}function h(S){return S>=s.UPPER_A&&S<=s.UPPER_F||S>=s.LOWER_A&&S<=s.LOWER_F}function p(S){return S>=s.UPPER_A&&S<=s.UPPER_Z||S>=s.LOWER_A&&S<=s.LOWER_Z||f(S)}function y(S){return S===s.EQUALS||p(S)}var _;(function(S){S[S.EntityStart=0]="EntityStart",S[S.NumericStart=1]="NumericStart",S[S.NumericDecimal=2]="NumericDecimal",S[S.NumericHex=3]="NumericHex",S[S.NamedEntity=4]="NamedEntity"})(_||(_={}));var b;(function(S){S[S.Legacy=0]="Legacy",S[S.Strict=1]="Strict",S[S.Attribute=2]="Attribute"})(b=u.DecodingMode||(u.DecodingMode={}));var m=(function(){function S(E,R,L){this.decodeTree=E,this.emitCodePoint=R,this.errors=L,this.state=_.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=b.Strict}return S.prototype.startEntity=function(E){this.decodeMode=E,this.state=_.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},S.prototype.write=function(E,R){switch(this.state){case _.EntityStart:return E.charCodeAt(R)===s.NUM?(this.state=_.NumericStart,this.consumed+=1,this.stateNumericStart(E,R+1)):(this.state=_.NamedEntity,this.stateNamedEntity(E,R));case _.NumericStart:return this.stateNumericStart(E,R);case _.NumericDecimal:return this.stateNumericDecimal(E,R);case _.NumericHex:return this.stateNumericHex(E,R);case _.NamedEntity:return this.stateNamedEntity(E,R)}},S.prototype.stateNumericStart=function(E,R){return R>=E.length?-1:(E.charCodeAt(R)|d)===s.LOWER_X?(this.state=_.NumericHex,this.consumed+=1,this.stateNumericHex(E,R+1)):(this.state=_.NumericDecimal,this.stateNumericDecimal(E,R))},S.prototype.addToNumericResult=function(E,R,L,M){if(R!==L){var B=L-R;this.result=this.result*Math.pow(M,B)+parseInt(E.substr(R,B),M),this.consumed+=B}},S.prototype.stateNumericHex=function(E,R){for(var L=R;R<E.length;){var M=E.charCodeAt(R);if(f(M)||h(M))R+=1;else return this.addToNumericResult(E,L,R,16),this.emitNumericEntity(M,3)}return this.addToNumericResult(E,L,R,16),-1},S.prototype.stateNumericDecimal=function(E,R){for(var L=R;R<E.length;){var M=E.charCodeAt(R);if(f(M))R+=1;else return this.addToNumericResult(E,L,R,10),this.emitNumericEntity(M,2)}return this.addToNumericResult(E,L,R,10),-1},S.prototype.emitNumericEntity=function(E,R){var L;if(this.consumed<=R)return(L=this.errors)===null||L===void 0||L.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(E===s.SEMI)this.consumed+=1;else if(this.decodeMode===b.Strict)return 0;return this.emitCodePoint((0,a.replaceCodePoint)(this.result),this.consumed),this.errors&&(E!==s.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},S.prototype.stateNamedEntity=function(E,R){for(var L=this.decodeTree,M=L[this.treeIndex],B=(M&l.VALUE_LENGTH)>>14;R<E.length;R++,this.excess++){var X=E.charCodeAt(R);if(this.treeIndex=T(L,M,this.treeIndex+Math.max(1,B),X),this.treeIndex<0)return this.result===0||this.decodeMode===b.Attribute&&(B===0||y(X))?0:this.emitNotTerminatedNamedEntity();if(M=L[this.treeIndex],B=(M&l.VALUE_LENGTH)>>14,B!==0){if(X===s.SEMI)return this.emitNamedEntityData(this.treeIndex,B,this.consumed+this.excess);this.decodeMode!==b.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},S.prototype.emitNotTerminatedNamedEntity=function(){var E,R=this,L=R.result,M=R.decodeTree,B=(M[L]&l.VALUE_LENGTH)>>14;return this.emitNamedEntityData(L,B,this.consumed),(E=this.errors)===null||E===void 0||E.missingSemicolonAfterCharacterReference(),this.consumed},S.prototype.emitNamedEntityData=function(E,R,L){var M=this.decodeTree;return this.emitCodePoint(R===1?M[E]&~l.VALUE_LENGTH:M[E+1],L),R===3&&this.emitCodePoint(M[E+2],L),L},S.prototype.end=function(){var E;switch(this.state){case _.NamedEntity:return this.result!==0&&(this.decodeMode!==b.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case _.NumericDecimal:return this.emitNumericEntity(0,2);case _.NumericHex:return this.emitNumericEntity(0,3);case _.NumericStart:return(E=this.errors)===null||E===void 0||E.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case _.EntityStart:return 0}},S})();u.EntityDecoder=m;function g(S){var E="",R=new m(S,function(L){return E+=(0,a.fromCodePoint)(L)});return function(M,B){for(var X=0,J=0;(J=M.indexOf("&",J))>=0;){E+=M.slice(X,J),R.startEntity(B);var ie=R.write(M,J+1);if(ie<0){X=J+R.end();break}X=J+ie,J=ie===0?X+1:X}var U=E+M.slice(X);return E="",U}}function T(S,E,R,L){var M=(E&l.BRANCH_LENGTH)>>7,B=E&l.JUMP_TABLE;if(M===0)return B!==0&&L===B?R:-1;if(B){var X=L-B;return X<0||X>=M?-1:S[R+X]-1}for(var J=R,ie=J+M-1;J<=ie;){var U=J+ie>>>1,fe=S[U];if(fe<L)J=U+1;else if(fe>L)ie=U-1;else return S[U+M]}return-1}u.determineBranch=T;var v=g(e.default),A=g(r.default);function I(S,E){return E===void 0&&(E=b.Legacy),v(S,E)}u.decodeHTML=I;function q(S){return v(S,b.Attribute)}u.decodeHTMLAttribute=q;function O(S){return v(S,b.Strict)}u.decodeHTMLStrict=O;function w(S){return A(S,b.Strict)}u.decodeXML=w})(In)),In}var cN;function DX(){return cN||(cN=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.QuoteType=void 0;var n=PX(),o;(function(f){f[f.Tab=9]="Tab",f[f.NewLine=10]="NewLine",f[f.FormFeed=12]="FormFeed",f[f.CarriageReturn=13]="CarriageReturn",f[f.Space=32]="Space",f[f.ExclamationMark=33]="ExclamationMark",f[f.Number=35]="Number",f[f.Amp=38]="Amp",f[f.SingleQuote=39]="SingleQuote",f[f.DoubleQuote=34]="DoubleQuote",f[f.Dash=45]="Dash",f[f.Slash=47]="Slash",f[f.Zero=48]="Zero",f[f.Nine=57]="Nine",f[f.Semi=59]="Semi",f[f.Lt=60]="Lt",f[f.Eq=61]="Eq",f[f.Gt=62]="Gt",f[f.Questionmark=63]="Questionmark",f[f.UpperA=65]="UpperA",f[f.LowerA=97]="LowerA",f[f.UpperF=70]="UpperF",f[f.LowerF=102]="LowerF",f[f.UpperZ=90]="UpperZ",f[f.LowerZ=122]="LowerZ",f[f.LowerX=120]="LowerX",f[f.OpeningSquareBracket=91]="OpeningSquareBracket"})(o||(o={}));var i;(function(f){f[f.Text=1]="Text",f[f.BeforeTagName=2]="BeforeTagName",f[f.InTagName=3]="InTagName",f[f.InSelfClosingTag=4]="InSelfClosingTag",f[f.BeforeClosingTagName=5]="BeforeClosingTagName",f[f.InClosingTagName=6]="InClosingTagName",f[f.AfterClosingTagName=7]="AfterClosingTagName",f[f.BeforeAttributeName=8]="BeforeAttributeName",f[f.InAttributeName=9]="InAttributeName",f[f.AfterAttributeName=10]="AfterAttributeName",f[f.BeforeAttributeValue=11]="BeforeAttributeValue",f[f.InAttributeValueDq=12]="InAttributeValueDq",f[f.InAttributeValueSq=13]="InAttributeValueSq",f[f.InAttributeValueNq=14]="InAttributeValueNq",f[f.BeforeDeclaration=15]="BeforeDeclaration",f[f.InDeclaration=16]="InDeclaration",f[f.InProcessingInstruction=17]="InProcessingInstruction",f[f.BeforeComment=18]="BeforeComment",f[f.CDATASequence=19]="CDATASequence",f[f.InSpecialComment=20]="InSpecialComment",f[f.InCommentLike=21]="InCommentLike",f[f.BeforeSpecialS=22]="BeforeSpecialS",f[f.SpecialStartSequence=23]="SpecialStartSequence",f[f.InSpecialTag=24]="InSpecialTag",f[f.BeforeEntity=25]="BeforeEntity",f[f.BeforeNumericEntity=26]="BeforeNumericEntity",f[f.InNamedEntity=27]="InNamedEntity",f[f.InNumericEntity=28]="InNumericEntity",f[f.InHexEntity=29]="InHexEntity"})(i||(i={}));function t(f){return f===o.Space||f===o.NewLine||f===o.Tab||f===o.FormFeed||f===o.CarriageReturn}function e(f){return f===o.Slash||f===o.Gt||t(f)}function r(f){return f>=o.Zero&&f<=o.Nine}function a(f){return f>=o.LowerA&&f<=o.LowerZ||f>=o.UpperA&&f<=o.UpperZ}function c(f){return f>=o.UpperA&&f<=o.UpperF||f>=o.LowerA&&f<=o.LowerF}var s;(function(f){f[f.NoValue=0]="NoValue",f[f.Unquoted=1]="Unquoted",f[f.Single=2]="Single",f[f.Double=3]="Double"})(s=u.QuoteType||(u.QuoteType={}));var d={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},l=(function(){function f(h,p){var y=h.xmlMode,_=y===void 0?!1:y,b=h.decodeEntities,m=b===void 0?!0:b;this.cbs=p,this.state=i.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=i.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=_,this.decodeEntities=m,this.entityTrie=_?n.xmlDecodeTree:n.htmlDecodeTree}return f.prototype.reset=function(){this.state=i.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=i.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},f.prototype.write=function(h){this.offset+=this.buffer.length,this.buffer=h,this.parse()},f.prototype.end=function(){this.running&&this.finish()},f.prototype.pause=function(){this.running=!1},f.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},f.prototype.getIndex=function(){return this.index},f.prototype.getSectionStart=function(){return this.sectionStart},f.prototype.stateText=function(h){h===o.Lt||!this.decodeEntities&&this.fastForwardTo(o.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=i.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&h===o.Amp&&(this.state=i.BeforeEntity)},f.prototype.stateSpecialStartSequence=function(h){var p=this.sequenceIndex===this.currentSequence.length,y=p?e(h):(h|32)===this.currentSequence[this.sequenceIndex];if(!y)this.isSpecial=!1;else if(!p){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=i.InTagName,this.stateInTagName(h)},f.prototype.stateInSpecialTag=function(h){if(this.sequenceIndex===this.currentSequence.length){if(h===o.Gt||t(h)){var p=this.index-this.currentSequence.length;if(this.sectionStart<p){var y=this.index;this.index=p,this.cbs.ontext(this.sectionStart,p),this.index=y}this.isSpecial=!1,this.sectionStart=p+2,this.stateInClosingTagName(h);return}this.sequenceIndex=0}(h|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===d.TitleEnd?this.decodeEntities&&h===o.Amp&&(this.state=i.BeforeEntity):this.fastForwardTo(o.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(h===o.Lt)},f.prototype.stateCDATASequence=function(h){h===d.Cdata[this.sequenceIndex]?++this.sequenceIndex===d.Cdata.length&&(this.state=i.InCommentLike,this.currentSequence=d.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=i.InDeclaration,this.stateInDeclaration(h))},f.prototype.fastForwardTo=function(h){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===h)return!0;return this.index=this.buffer.length+this.offset-1,!1},f.prototype.stateInCommentLike=function(h){h===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=i.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):h!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},f.prototype.isTagStartChar=function(h){return this.xmlMode?!e(h):a(h)},f.prototype.startSpecial=function(h,p){this.isSpecial=!0,this.currentSequence=h,this.sequenceIndex=p,this.state=i.SpecialStartSequence},f.prototype.stateBeforeTagName=function(h){if(h===o.ExclamationMark)this.state=i.BeforeDeclaration,this.sectionStart=this.index+1;else if(h===o.Questionmark)this.state=i.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(h)){var p=h|32;this.sectionStart=this.index,!this.xmlMode&&p===d.TitleEnd[2]?this.startSpecial(d.TitleEnd,3):this.state=!this.xmlMode&&p===d.ScriptEnd[2]?i.BeforeSpecialS:i.InTagName}else h===o.Slash?this.state=i.BeforeClosingTagName:(this.state=i.Text,this.stateText(h))},f.prototype.stateInTagName=function(h){e(h)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(h))},f.prototype.stateBeforeClosingTagName=function(h){t(h)||(h===o.Gt?this.state=i.Text:(this.state=this.isTagStartChar(h)?i.InClosingTagName:i.InSpecialComment,this.sectionStart=this.index))},f.prototype.stateInClosingTagName=function(h){(h===o.Gt||t(h))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.AfterClosingTagName,this.stateAfterClosingTagName(h))},f.prototype.stateAfterClosingTagName=function(h){(h===o.Gt||this.fastForwardTo(o.Gt))&&(this.state=i.Text,this.baseState=i.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeAttributeName=function(h){h===o.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=i.InSpecialTag,this.sequenceIndex=0):this.state=i.Text,this.baseState=this.state,this.sectionStart=this.index+1):h===o.Slash?this.state=i.InSelfClosingTag:t(h)||(this.state=i.InAttributeName,this.sectionStart=this.index)},f.prototype.stateInSelfClosingTag=function(h){h===o.Gt?(this.cbs.onselfclosingtag(this.index),this.state=i.Text,this.baseState=i.Text,this.sectionStart=this.index+1,this.isSpecial=!1):t(h)||(this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(h))},f.prototype.stateInAttributeName=function(h){(h===o.Eq||e(h))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.AfterAttributeName,this.stateAfterAttributeName(h))},f.prototype.stateAfterAttributeName=function(h){h===o.Eq?this.state=i.BeforeAttributeValue:h===o.Slash||h===o.Gt?(this.cbs.onattribend(s.NoValue,this.index),this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(h)):t(h)||(this.cbs.onattribend(s.NoValue,this.index),this.state=i.InAttributeName,this.sectionStart=this.index)},f.prototype.stateBeforeAttributeValue=function(h){h===o.DoubleQuote?(this.state=i.InAttributeValueDq,this.sectionStart=this.index+1):h===o.SingleQuote?(this.state=i.InAttributeValueSq,this.sectionStart=this.index+1):t(h)||(this.sectionStart=this.index,this.state=i.InAttributeValueNq,this.stateInAttributeValueNoQuotes(h))},f.prototype.handleInAttributeValue=function(h,p){h===p||!this.decodeEntities&&this.fastForwardTo(p)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(p===o.DoubleQuote?s.Double:s.Single,this.index),this.state=i.BeforeAttributeName):this.decodeEntities&&h===o.Amp&&(this.baseState=this.state,this.state=i.BeforeEntity)},f.prototype.stateInAttributeValueDoubleQuotes=function(h){this.handleInAttributeValue(h,o.DoubleQuote)},f.prototype.stateInAttributeValueSingleQuotes=function(h){this.handleInAttributeValue(h,o.SingleQuote)},f.prototype.stateInAttributeValueNoQuotes=function(h){t(h)||h===o.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(s.Unquoted,this.index),this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(h)):this.decodeEntities&&h===o.Amp&&(this.baseState=this.state,this.state=i.BeforeEntity)},f.prototype.stateBeforeDeclaration=function(h){h===o.OpeningSquareBracket?(this.state=i.CDATASequence,this.sequenceIndex=0):this.state=h===o.Dash?i.BeforeComment:i.InDeclaration},f.prototype.stateInDeclaration=function(h){(h===o.Gt||this.fastForwardTo(o.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=i.Text,this.sectionStart=this.index+1)},f.prototype.stateInProcessingInstruction=function(h){(h===o.Gt||this.fastForwardTo(o.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=i.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeComment=function(h){h===o.Dash?(this.state=i.InCommentLike,this.currentSequence=d.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=i.InDeclaration},f.prototype.stateInSpecialComment=function(h){(h===o.Gt||this.fastForwardTo(o.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=i.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeSpecialS=function(h){var p=h|32;p===d.ScriptEnd[3]?this.startSpecial(d.ScriptEnd,4):p===d.StyleEnd[3]?this.startSpecial(d.StyleEnd,4):(this.state=i.InTagName,this.stateInTagName(h))},f.prototype.stateBeforeEntity=function(h){this.entityExcess=1,this.entityResult=0,h===o.Number?this.state=i.BeforeNumericEntity:h===o.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=i.InNamedEntity,this.stateInNamedEntity(h))},f.prototype.stateInNamedEntity=function(h){if(this.entityExcess+=1,this.trieIndex=(0,n.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,h),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var p=this.trieCurrent&n.BinTrieFlags.VALUE_LENGTH;if(p){var y=(p>>14)-1;if(!this.allowLegacyEntity()&&h!==o.Semi)this.trieIndex+=y;else{var _=this.index-this.entityExcess+1;_>this.sectionStart&&this.emitPartial(this.sectionStart,_),this.entityResult=this.trieIndex,this.trieIndex+=y,this.entityExcess=0,this.sectionStart=this.index+1,y===0&&this.emitNamedEntity()}}},f.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var h=(this.entityTrie[this.entityResult]&n.BinTrieFlags.VALUE_LENGTH)>>14;switch(h){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~n.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},f.prototype.stateBeforeNumericEntity=function(h){(h|32)===o.LowerX?(this.entityExcess++,this.state=i.InHexEntity):(this.state=i.InNumericEntity,this.stateInNumericEntity(h))},f.prototype.emitNumericEntity=function(h){var p=this.index-this.entityExcess-1,y=p+2+ +(this.state===i.InHexEntity);y!==this.index&&(p>this.sectionStart&&this.emitPartial(this.sectionStart,p),this.sectionStart=this.index+Number(h),this.emitCodePoint((0,n.replaceCodePoint)(this.entityResult))),this.state=this.baseState},f.prototype.stateInNumericEntity=function(h){h===o.Semi?this.emitNumericEntity(!0):r(h)?(this.entityResult=this.entityResult*10+(h-o.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.stateInHexEntity=function(h){h===o.Semi?this.emitNumericEntity(!0):r(h)?(this.entityResult=this.entityResult*16+(h-o.Zero),this.entityExcess++):c(h)?(this.entityResult=this.entityResult*16+((h|32)-o.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===i.Text||this.baseState===i.InSpecialTag)},f.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===i.Text||this.state===i.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===i.InAttributeValueDq||this.state===i.InAttributeValueSq||this.state===i.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},f.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},f.prototype.parse=function(){for(;this.shouldContinue();){var h=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case i.Text:{this.stateText(h);break}case i.SpecialStartSequence:{this.stateSpecialStartSequence(h);break}case i.InSpecialTag:{this.stateInSpecialTag(h);break}case i.CDATASequence:{this.stateCDATASequence(h);break}case i.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(h);break}case i.InAttributeName:{this.stateInAttributeName(h);break}case i.InCommentLike:{this.stateInCommentLike(h);break}case i.InSpecialComment:{this.stateInSpecialComment(h);break}case i.BeforeAttributeName:{this.stateBeforeAttributeName(h);break}case i.InTagName:{this.stateInTagName(h);break}case i.InClosingTagName:{this.stateInClosingTagName(h);break}case i.BeforeTagName:{this.stateBeforeTagName(h);break}case i.AfterAttributeName:{this.stateAfterAttributeName(h);break}case i.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(h);break}case i.BeforeAttributeValue:{this.stateBeforeAttributeValue(h);break}case i.BeforeClosingTagName:{this.stateBeforeClosingTagName(h);break}case i.AfterClosingTagName:{this.stateAfterClosingTagName(h);break}case i.BeforeSpecialS:{this.stateBeforeSpecialS(h);break}case i.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(h);break}case i.InSelfClosingTag:{this.stateInSelfClosingTag(h);break}case i.InDeclaration:{this.stateInDeclaration(h);break}case i.BeforeDeclaration:{this.stateBeforeDeclaration(h);break}case i.BeforeComment:{this.stateBeforeComment(h);break}case i.InProcessingInstruction:{this.stateInProcessingInstruction(h);break}case i.InNamedEntity:{this.stateInNamedEntity(h);break}case i.BeforeEntity:{this.stateBeforeEntity(h);break}case i.InHexEntity:{this.stateInHexEntity(h);break}case i.InNumericEntity:{this.stateInNumericEntity(h);break}default:this.stateBeforeNumericEntity(h)}this.index++}this.cleanup()},f.prototype.finish=function(){this.state===i.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},f.prototype.handleTrailingData=function(){var h=this.buffer.length+this.offset;this.state===i.InCommentLike?this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,h,0):this.cbs.oncomment(this.sectionStart,h,0):this.state===i.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===i.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===i.InTagName||this.state===i.BeforeAttributeName||this.state===i.BeforeAttributeValue||this.state===i.AfterAttributeName||this.state===i.InAttributeName||this.state===i.InAttributeValueSq||this.state===i.InAttributeValueDq||this.state===i.InAttributeValueNq||this.state===i.InClosingTagName||this.cbs.ontext(this.sectionStart,h)},f.prototype.emitPartial=function(h,p){this.baseState!==i.Text&&this.baseState!==i.InSpecialTag?this.cbs.onattribdata(h,p):this.cbs.ontext(h,p)},f.prototype.emitCodePoint=function(h){this.baseState!==i.Text&&this.baseState!==i.InSpecialTag?this.cbs.onattribentity(h):this.cbs.ontextentity(h)},f})();u.default=l})(l4)),l4}var dN;function lN(){if(dN)return xn;dN=1;var u=xn&&xn.__createBinding||(Object.create?(function(_,b,m,g){g===void 0&&(g=m);var T=Object.getOwnPropertyDescriptor(b,m);(!T||("get"in T?!b.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return b[m]}}),Object.defineProperty(_,g,T)}):(function(_,b,m,g){g===void 0&&(g=m),_[g]=b[m]})),n=xn&&xn.__setModuleDefault||(Object.create?(function(_,b){Object.defineProperty(_,"default",{enumerable:!0,value:b})}):function(_,b){_.default=b}),o=xn&&xn.__importStar||function(_){if(_&&_.__esModule)return _;var b={};if(_!=null)for(var m in _)m!=="default"&&Object.prototype.hasOwnProperty.call(_,m)&&u(b,_,m);return n(b,_),b};Object.defineProperty(xn,"__esModule",{value:!0}),xn.Parser=void 0;var i=o(DX()),t=PX(),e=new Set(["input","option","optgroup","select","button","datalist","textarea"]),r=new Set(["p"]),a=new Set(["thead","tbody"]),c=new Set(["dd","dt"]),s=new Set(["rt","rp"]),d=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",r],["h1",r],["h2",r],["h3",r],["h4",r],["h5",r],["h6",r],["select",e],["input",e],["output",e],["button",e],["datalist",e],["textarea",e],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",c],["dt",c],["address",r],["article",r],["aside",r],["blockquote",r],["details",r],["div",r],["dl",r],["fieldset",r],["figcaption",r],["figure",r],["footer",r],["form",r],["header",r],["hr",r],["main",r],["nav",r],["ol",r],["pre",r],["section",r],["table",r],["ul",r],["rt",s],["rp",s],["tbody",a],["tfoot",a]]),l=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),f=new Set(["math","svg"]),h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),p=/\s|\//,y=(function(){function _(b,m){m===void 0&&(m={});var g,T,v,A,I;this.options=m,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=b??{},this.lowerCaseTagNames=(g=m.lowerCaseTags)!==null&&g!==void 0?g:!m.xmlMode,this.lowerCaseAttributeNames=(T=m.lowerCaseAttributeNames)!==null&&T!==void 0?T:!m.xmlMode,this.tokenizer=new((v=m.Tokenizer)!==null&&v!==void 0?v:i.default)(this.options,this),(I=(A=this.cbs).onparserinit)===null||I===void 0||I.call(A,this)}return _.prototype.ontext=function(b,m){var g,T,v=this.getSlice(b,m);this.endIndex=m-1,(T=(g=this.cbs).ontext)===null||T===void 0||T.call(g,v),this.startIndex=m},_.prototype.ontextentity=function(b){var m,g,T=this.tokenizer.getSectionStart();this.endIndex=T-1,(g=(m=this.cbs).ontext)===null||g===void 0||g.call(m,(0,t.fromCodePoint)(b)),this.startIndex=T},_.prototype.isVoidElement=function(b){return!this.options.xmlMode&&l.has(b)},_.prototype.onopentagname=function(b,m){this.endIndex=m;var g=this.getSlice(b,m);this.lowerCaseTagNames&&(g=g.toLowerCase()),this.emitOpenTag(g)},_.prototype.emitOpenTag=function(b){var m,g,T,v;this.openTagStart=this.startIndex,this.tagname=b;var A=!this.options.xmlMode&&d.get(b);if(A)for(;this.stack.length>0&&A.has(this.stack[this.stack.length-1]);){var I=this.stack.pop();(g=(m=this.cbs).onclosetag)===null||g===void 0||g.call(m,I,!0)}this.isVoidElement(b)||(this.stack.push(b),f.has(b)?this.foreignContext.push(!0):h.has(b)&&this.foreignContext.push(!1)),(v=(T=this.cbs).onopentagname)===null||v===void 0||v.call(T,b),this.cbs.onopentag&&(this.attribs={})},_.prototype.endOpenTag=function(b){var m,g;this.startIndex=this.openTagStart,this.attribs&&((g=(m=this.cbs).onopentag)===null||g===void 0||g.call(m,this.tagname,this.attribs,b),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},_.prototype.onopentagend=function(b){this.endIndex=b,this.endOpenTag(!1),this.startIndex=b+1},_.prototype.onclosetag=function(b,m){var g,T,v,A,I,q;this.endIndex=m;var O=this.getSlice(b,m);if(this.lowerCaseTagNames&&(O=O.toLowerCase()),(f.has(O)||h.has(O))&&this.foreignContext.pop(),this.isVoidElement(O))!this.options.xmlMode&&O==="br"&&((T=(g=this.cbs).onopentagname)===null||T===void 0||T.call(g,"br"),(A=(v=this.cbs).onopentag)===null||A===void 0||A.call(v,"br",{},!0),(q=(I=this.cbs).onclosetag)===null||q===void 0||q.call(I,"br",!1));else{var w=this.stack.lastIndexOf(O);if(w!==-1)if(this.cbs.onclosetag)for(var S=this.stack.length-w;S--;)this.cbs.onclosetag(this.stack.pop(),S!==0);else this.stack.length=w;else!this.options.xmlMode&&O==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=m+1},_.prototype.onselfclosingtag=function(b){this.endIndex=b,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=b+1):this.onopentagend(b)},_.prototype.closeCurrentTag=function(b){var m,g,T=this.tagname;this.endOpenTag(b),this.stack[this.stack.length-1]===T&&((g=(m=this.cbs).onclosetag)===null||g===void 0||g.call(m,T,!b),this.stack.pop())},_.prototype.onattribname=function(b,m){this.startIndex=b;var g=this.getSlice(b,m);this.attribname=this.lowerCaseAttributeNames?g.toLowerCase():g},_.prototype.onattribdata=function(b,m){this.attribvalue+=this.getSlice(b,m)},_.prototype.onattribentity=function(b){this.attribvalue+=(0,t.fromCodePoint)(b)},_.prototype.onattribend=function(b,m){var g,T;this.endIndex=m,(T=(g=this.cbs).onattribute)===null||T===void 0||T.call(g,this.attribname,this.attribvalue,b===i.QuoteType.Double?'"':b===i.QuoteType.Single?"'":b===i.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},_.prototype.getInstructionName=function(b){var m=b.search(p),g=m<0?b:b.substr(0,m);return this.lowerCaseTagNames&&(g=g.toLowerCase()),g},_.prototype.ondeclaration=function(b,m){this.endIndex=m;var g=this.getSlice(b,m);if(this.cbs.onprocessinginstruction){var T=this.getInstructionName(g);this.cbs.onprocessinginstruction("!".concat(T),"!".concat(g))}this.startIndex=m+1},_.prototype.onprocessinginstruction=function(b,m){this.endIndex=m;var g=this.getSlice(b,m);if(this.cbs.onprocessinginstruction){var T=this.getInstructionName(g);this.cbs.onprocessinginstruction("?".concat(T),"?".concat(g))}this.startIndex=m+1},_.prototype.oncomment=function(b,m,g){var T,v,A,I;this.endIndex=m,(v=(T=this.cbs).oncomment)===null||v===void 0||v.call(T,this.getSlice(b,m-g)),(I=(A=this.cbs).oncommentend)===null||I===void 0||I.call(A),this.startIndex=m+1},_.prototype.oncdata=function(b,m,g){var T,v,A,I,q,O,w,S,E,R;this.endIndex=m;var L=this.getSlice(b,m-g);this.options.xmlMode||this.options.recognizeCDATA?((v=(T=this.cbs).oncdatastart)===null||v===void 0||v.call(T),(I=(A=this.cbs).ontext)===null||I===void 0||I.call(A,L),(O=(q=this.cbs).oncdataend)===null||O===void 0||O.call(q)):((S=(w=this.cbs).oncomment)===null||S===void 0||S.call(w,"[CDATA[".concat(L,"]]")),(R=(E=this.cbs).oncommentend)===null||R===void 0||R.call(E)),this.startIndex=m+1},_.prototype.onend=function(){var b,m;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var g=this.stack.length;g>0;this.cbs.onclosetag(this.stack[--g],!0));}(m=(b=this.cbs).onend)===null||m===void 0||m.call(b)},_.prototype.reset=function(){var b,m,g,T;(m=(b=this.cbs).onreset)===null||m===void 0||m.call(b),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(T=(g=this.cbs).onparserinit)===null||T===void 0||T.call(g,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},_.prototype.parseComplete=function(b){this.reset(),this.end(b)},_.prototype.getSlice=function(b,m){for(;b-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var g=this.buffers[0].slice(b-this.bufferOffset,m-this.bufferOffset);m-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),g+=this.buffers[0].slice(0,m-this.bufferOffset);return g},_.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},_.prototype.write=function(b){var m,g;if(this.ended){(g=(m=this.cbs).onerror)===null||g===void 0||g.call(m,new Error(".write() after done!"));return}this.buffers.push(b),this.tokenizer.running&&(this.tokenizer.write(b),this.writeIndex++)},_.prototype.end=function(b){var m,g;if(this.ended){(g=(m=this.cbs).onerror)===null||g===void 0||g.call(m,new Error(".end() after done!"));return}b&&this.write(b),this.ended=!0,this.tokenizer.end()},_.prototype.pause=function(){this.tokenizer.pause()},_.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},_.prototype.parseChunk=function(b){this.write(b)},_.prototype.done=function(b){this.end(b)},_})();return xn.Parser=y,xn}var so={},h4={},fN;function Jl(){return fN||(fN=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.Doctype=u.CDATA=u.Tag=u.Style=u.Script=u.Comment=u.Directive=u.Text=u.Root=u.isTag=u.ElementType=void 0;var n;(function(i){i.Root="root",i.Text="text",i.Directive="directive",i.Comment="comment",i.Script="script",i.Style="style",i.Tag="tag",i.CDATA="cdata",i.Doctype="doctype"})(n=u.ElementType||(u.ElementType={}));function o(i){return i.type===n.Tag||i.type===n.Script||i.type===n.Style}u.isTag=o,u.Root=n.Root,u.Text=n.Text,u.Directive=n.Directive,u.Comment=n.Comment,u.Script=n.Script,u.Style=n.Style,u.Tag=n.Tag,u.CDATA=n.CDATA,u.Doctype=n.Doctype})(h4)),h4}var _t={},hN;function pN(){if(hN)return _t;hN=1;var u=_t&&_t.__extends||(function(){var v=function(A,I){return v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,O){q.__proto__=O}||function(q,O){for(var w in O)Object.prototype.hasOwnProperty.call(O,w)&&(q[w]=O[w])},v(A,I)};return function(A,I){if(typeof I!="function"&&I!==null)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");v(A,I);function q(){this.constructor=A}A.prototype=I===null?Object.create(I):(q.prototype=I.prototype,new q)}})(),n=_t&&_t.__assign||function(){return n=Object.assign||function(v){for(var A,I=1,q=arguments.length;I<q;I++){A=arguments[I];for(var O in A)Object.prototype.hasOwnProperty.call(A,O)&&(v[O]=A[O])}return v},n.apply(this,arguments)};Object.defineProperty(_t,"__esModule",{value:!0}),_t.cloneNode=_t.hasChildren=_t.isDocument=_t.isDirective=_t.isComment=_t.isText=_t.isCDATA=_t.isTag=_t.Element=_t.Document=_t.CDATA=_t.NodeWithChildren=_t.ProcessingInstruction=_t.Comment=_t.Text=_t.DataNode=_t.Node=void 0;var o=Jl(),i=(function(){function v(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(v.prototype,"parentNode",{get:function(){return this.parent},set:function(A){this.parent=A},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"previousSibling",{get:function(){return this.prev},set:function(A){this.prev=A},enumerable:!1,configurable:!0}),Object.defineProperty(v.prototype,"nextSibling",{get:function(){return this.next},set:function(A){this.next=A},enumerable:!1,configurable:!0}),v.prototype.cloneNode=function(A){return A===void 0&&(A=!1),g(this,A)},v})();_t.Node=i;var t=(function(v){u(A,v);function A(I){var q=v.call(this)||this;return q.data=I,q}return Object.defineProperty(A.prototype,"nodeValue",{get:function(){return this.data},set:function(I){this.data=I},enumerable:!1,configurable:!0}),A})(i);_t.DataNode=t;var e=(function(v){u(A,v);function A(){var I=v!==null&&v.apply(this,arguments)||this;return I.type=o.ElementType.Text,I}return Object.defineProperty(A.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),A})(t);_t.Text=e;var r=(function(v){u(A,v);function A(){var I=v!==null&&v.apply(this,arguments)||this;return I.type=o.ElementType.Comment,I}return Object.defineProperty(A.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),A})(t);_t.Comment=r;var a=(function(v){u(A,v);function A(I,q){var O=v.call(this,q)||this;return O.name=I,O.type=o.ElementType.Directive,O}return Object.defineProperty(A.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),A})(t);_t.ProcessingInstruction=a;var c=(function(v){u(A,v);function A(I){var q=v.call(this)||this;return q.children=I,q}return Object.defineProperty(A.prototype,"firstChild",{get:function(){var I;return(I=this.children[0])!==null&&I!==void 0?I:null},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"childNodes",{get:function(){return this.children},set:function(I){this.children=I},enumerable:!1,configurable:!0}),A})(i);_t.NodeWithChildren=c;var s=(function(v){u(A,v);function A(){var I=v!==null&&v.apply(this,arguments)||this;return I.type=o.ElementType.CDATA,I}return Object.defineProperty(A.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),A})(c);_t.CDATA=s;var d=(function(v){u(A,v);function A(){var I=v!==null&&v.apply(this,arguments)||this;return I.type=o.ElementType.Root,I}return Object.defineProperty(A.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),A})(c);_t.Document=d;var l=(function(v){u(A,v);function A(I,q,O,w){O===void 0&&(O=[]),w===void 0&&(w=I==="script"?o.ElementType.Script:I==="style"?o.ElementType.Style:o.ElementType.Tag);var S=v.call(this,O)||this;return S.name=I,S.attribs=q,S.type=w,S}return Object.defineProperty(A.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"tagName",{get:function(){return this.name},set:function(I){this.name=I},enumerable:!1,configurable:!0}),Object.defineProperty(A.prototype,"attributes",{get:function(){var I=this;return Object.keys(this.attribs).map(function(q){var O,w;return{name:q,value:I.attribs[q],namespace:(O=I["x-attribsNamespace"])===null||O===void 0?void 0:O[q],prefix:(w=I["x-attribsPrefix"])===null||w===void 0?void 0:w[q]}})},enumerable:!1,configurable:!0}),A})(c);_t.Element=l;function f(v){return(0,o.isTag)(v)}_t.isTag=f;function h(v){return v.type===o.ElementType.CDATA}_t.isCDATA=h;function p(v){return v.type===o.ElementType.Text}_t.isText=p;function y(v){return v.type===o.ElementType.Comment}_t.isComment=y;function _(v){return v.type===o.ElementType.Directive}_t.isDirective=_;function b(v){return v.type===o.ElementType.Root}_t.isDocument=b;function m(v){return Object.prototype.hasOwnProperty.call(v,"children")}_t.hasChildren=m;function g(v,A){A===void 0&&(A=!1);var I;if(p(v))I=new e(v.data);else if(y(v))I=new r(v.data);else if(f(v)){var q=A?T(v.children):[],O=new l(v.name,n({},v.attribs),q);q.forEach(function(R){return R.parent=O}),v.namespace!=null&&(O.namespace=v.namespace),v["x-attribsNamespace"]&&(O["x-attribsNamespace"]=n({},v["x-attribsNamespace"])),v["x-attribsPrefix"]&&(O["x-attribsPrefix"]=n({},v["x-attribsPrefix"])),I=O}else if(h(v)){var q=A?T(v.children):[],w=new s(q);q.forEach(function(L){return L.parent=w}),I=w}else if(b(v)){var q=A?T(v.children):[],S=new d(q);q.forEach(function(L){return L.parent=S}),v["x-mode"]&&(S["x-mode"]=v["x-mode"]),I=S}else if(_(v)){var E=new a(v.name,v.data);v["x-name"]!=null&&(E["x-name"]=v["x-name"],E["x-publicId"]=v["x-publicId"],E["x-systemId"]=v["x-systemId"]),I=E}else throw new Error("Not implemented yet: ".concat(v.type));return I.startIndex=v.startIndex,I.endIndex=v.endIndex,v.sourceCodeLocation!=null&&(I.sourceCodeLocation=v.sourceCodeLocation),I}_t.cloneNode=g;function T(v){for(var A=v.map(function(q){return g(q,!0)}),I=1;I<A.length;I++)A[I].prev=A[I-1],A[I-1].next=A[I];return A}return _t}var bN;function bn(){return bN||(bN=1,(function(u){var n=so&&so.__createBinding||(Object.create?(function(a,c,s,d){d===void 0&&(d=s);var l=Object.getOwnPropertyDescriptor(c,s);(!l||("get"in l?!c.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return c[s]}}),Object.defineProperty(a,d,l)}):(function(a,c,s,d){d===void 0&&(d=s),a[d]=c[s]})),o=so&&so.__exportStar||function(a,c){for(var s in a)s!=="default"&&!Object.prototype.hasOwnProperty.call(c,s)&&n(c,a,s)};Object.defineProperty(u,"__esModule",{value:!0}),u.DomHandler=void 0;var i=Jl(),t=pN();o(pN(),u);var e={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},r=(function(){function a(c,s,d){this.dom=[],this.root=new t.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof s=="function"&&(d=s,s=e),typeof c=="object"&&(s=c,c=void 0),this.callback=c??null,this.options=s??e,this.elementCB=d??null}return a.prototype.onparserinit=function(c){this.parser=c},a.prototype.onreset=function(){this.dom=[],this.root=new t.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},a.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},a.prototype.onerror=function(c){this.handleCallback(c)},a.prototype.onclosetag=function(){this.lastNode=null;var c=this.tagStack.pop();this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(c)},a.prototype.onopentag=function(c,s){var d=this.options.xmlMode?i.ElementType.Tag:void 0,l=new t.Element(c,s,void 0,d);this.addNode(l),this.tagStack.push(l)},a.prototype.ontext=function(c){var s=this.lastNode;if(s&&s.type===i.ElementType.Text)s.data+=c,this.options.withEndIndices&&(s.endIndex=this.parser.endIndex);else{var d=new t.Text(c);this.addNode(d),this.lastNode=d}},a.prototype.oncomment=function(c){if(this.lastNode&&this.lastNode.type===i.ElementType.Comment){this.lastNode.data+=c;return}var s=new t.Comment(c);this.addNode(s),this.lastNode=s},a.prototype.oncommentend=function(){this.lastNode=null},a.prototype.oncdatastart=function(){var c=new t.Text(""),s=new t.CDATA([c]);this.addNode(s),c.parent=s,this.lastNode=c},a.prototype.oncdataend=function(){this.lastNode=null},a.prototype.onprocessinginstruction=function(c,s){var d=new t.ProcessingInstruction(c,s);this.addNode(d)},a.prototype.handleCallback=function(c){if(typeof this.callback=="function")this.callback(c,this.dom);else if(c)throw c},a.prototype.addNode=function(c){var s=this.tagStack[this.tagStack.length-1],d=s.children[s.children.length-1];this.options.withStartIndices&&(c.startIndex=this.parser.startIndex),this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),s.children.push(c),d&&(c.prev=d,d.next=c),c.parent=s,this.lastNode=null},a})();u.DomHandler=r,u.default=r})(so)),so}var co={},kn={},zr={},p4={},Rn={},TT={},yN;function wre(){return yN||(yN=1,Object.defineProperty(TT,"__esModule",{value:!0}),TT.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(u){return u.charCodeAt(0)}))),TT}var wT={},_N;function Sre(){return _N||(_N=1,Object.defineProperty(wT,"__esModule",{value:!0}),wT.default=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(function(u){return u.charCodeAt(0)}))),wT}var b4={},gN;function mN(){return gN||(gN=1,(function(u){var n;Object.defineProperty(u,"__esModule",{value:!0}),u.replaceCodePoint=u.fromCodePoint=void 0;var o=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);u.fromCodePoint=(n=String.fromCodePoint)!==null&&n!==void 0?n:function(e){var r="";return e>65535&&(e-=65536,r+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),r+=String.fromCharCode(e),r};function i(e){var r;return e>=55296&&e<=57343||e>1114111?65533:(r=o.get(e))!==null&&r!==void 0?r:e}u.replaceCodePoint=i;function t(e){return(0,u.fromCodePoint)(i(e))}u.default=t})(b4)),b4}var vN;function TN(){return vN||(vN=1,(function(u){var n=Rn&&Rn.__createBinding||(Object.create?(function(S,E,R,L){L===void 0&&(L=R);var M=Object.getOwnPropertyDescriptor(E,R);(!M||("get"in M?!E.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return E[R]}}),Object.defineProperty(S,L,M)}):(function(S,E,R,L){L===void 0&&(L=R),S[L]=E[R]})),o=Rn&&Rn.__setModuleDefault||(Object.create?(function(S,E){Object.defineProperty(S,"default",{enumerable:!0,value:E})}):function(S,E){S.default=E}),i=Rn&&Rn.__importStar||function(S){if(S&&S.__esModule)return S;var E={};if(S!=null)for(var R in S)R!=="default"&&Object.prototype.hasOwnProperty.call(S,R)&&n(E,S,R);return o(E,S),E},t=Rn&&Rn.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(u,"__esModule",{value:!0}),u.decodeXML=u.decodeHTMLStrict=u.decodeHTMLAttribute=u.decodeHTML=u.determineBranch=u.EntityDecoder=u.DecodingMode=u.BinTrieFlags=u.fromCodePoint=u.replaceCodePoint=u.decodeCodePoint=u.xmlDecodeTree=u.htmlDecodeTree=void 0;var e=t(wre());u.htmlDecodeTree=e.default;var r=t(Sre());u.xmlDecodeTree=r.default;var a=i(mN());u.decodeCodePoint=a.default;var c=mN();Object.defineProperty(u,"replaceCodePoint",{enumerable:!0,get:function(){return c.replaceCodePoint}}),Object.defineProperty(u,"fromCodePoint",{enumerable:!0,get:function(){return c.fromCodePoint}});var s;(function(S){S[S.NUM=35]="NUM",S[S.SEMI=59]="SEMI",S[S.EQUALS=61]="EQUALS",S[S.ZERO=48]="ZERO",S[S.NINE=57]="NINE",S[S.LOWER_A=97]="LOWER_A",S[S.LOWER_F=102]="LOWER_F",S[S.LOWER_X=120]="LOWER_X",S[S.LOWER_Z=122]="LOWER_Z",S[S.UPPER_A=65]="UPPER_A",S[S.UPPER_F=70]="UPPER_F",S[S.UPPER_Z=90]="UPPER_Z"})(s||(s={}));var d=32,l;(function(S){S[S.VALUE_LENGTH=49152]="VALUE_LENGTH",S[S.BRANCH_LENGTH=16256]="BRANCH_LENGTH",S[S.JUMP_TABLE=127]="JUMP_TABLE"})(l=u.BinTrieFlags||(u.BinTrieFlags={}));function f(S){return S>=s.ZERO&&S<=s.NINE}function h(S){return S>=s.UPPER_A&&S<=s.UPPER_F||S>=s.LOWER_A&&S<=s.LOWER_F}function p(S){return S>=s.UPPER_A&&S<=s.UPPER_Z||S>=s.LOWER_A&&S<=s.LOWER_Z||f(S)}function y(S){return S===s.EQUALS||p(S)}var _;(function(S){S[S.EntityStart=0]="EntityStart",S[S.NumericStart=1]="NumericStart",S[S.NumericDecimal=2]="NumericDecimal",S[S.NumericHex=3]="NumericHex",S[S.NamedEntity=4]="NamedEntity"})(_||(_={}));var b;(function(S){S[S.Legacy=0]="Legacy",S[S.Strict=1]="Strict",S[S.Attribute=2]="Attribute"})(b=u.DecodingMode||(u.DecodingMode={}));var m=(function(){function S(E,R,L){this.decodeTree=E,this.emitCodePoint=R,this.errors=L,this.state=_.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=b.Strict}return S.prototype.startEntity=function(E){this.decodeMode=E,this.state=_.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},S.prototype.write=function(E,R){switch(this.state){case _.EntityStart:return E.charCodeAt(R)===s.NUM?(this.state=_.NumericStart,this.consumed+=1,this.stateNumericStart(E,R+1)):(this.state=_.NamedEntity,this.stateNamedEntity(E,R));case _.NumericStart:return this.stateNumericStart(E,R);case _.NumericDecimal:return this.stateNumericDecimal(E,R);case _.NumericHex:return this.stateNumericHex(E,R);case _.NamedEntity:return this.stateNamedEntity(E,R)}},S.prototype.stateNumericStart=function(E,R){return R>=E.length?-1:(E.charCodeAt(R)|d)===s.LOWER_X?(this.state=_.NumericHex,this.consumed+=1,this.stateNumericHex(E,R+1)):(this.state=_.NumericDecimal,this.stateNumericDecimal(E,R))},S.prototype.addToNumericResult=function(E,R,L,M){if(R!==L){var B=L-R;this.result=this.result*Math.pow(M,B)+parseInt(E.substr(R,B),M),this.consumed+=B}},S.prototype.stateNumericHex=function(E,R){for(var L=R;R<E.length;){var M=E.charCodeAt(R);if(f(M)||h(M))R+=1;else return this.addToNumericResult(E,L,R,16),this.emitNumericEntity(M,3)}return this.addToNumericResult(E,L,R,16),-1},S.prototype.stateNumericDecimal=function(E,R){for(var L=R;R<E.length;){var M=E.charCodeAt(R);if(f(M))R+=1;else return this.addToNumericResult(E,L,R,10),this.emitNumericEntity(M,2)}return this.addToNumericResult(E,L,R,10),-1},S.prototype.emitNumericEntity=function(E,R){var L;if(this.consumed<=R)return(L=this.errors)===null||L===void 0||L.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(E===s.SEMI)this.consumed+=1;else if(this.decodeMode===b.Strict)return 0;return this.emitCodePoint((0,a.replaceCodePoint)(this.result),this.consumed),this.errors&&(E!==s.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},S.prototype.stateNamedEntity=function(E,R){for(var L=this.decodeTree,M=L[this.treeIndex],B=(M&l.VALUE_LENGTH)>>14;R<E.length;R++,this.excess++){var X=E.charCodeAt(R);if(this.treeIndex=T(L,M,this.treeIndex+Math.max(1,B),X),this.treeIndex<0)return this.result===0||this.decodeMode===b.Attribute&&(B===0||y(X))?0:this.emitNotTerminatedNamedEntity();if(M=L[this.treeIndex],B=(M&l.VALUE_LENGTH)>>14,B!==0){if(X===s.SEMI)return this.emitNamedEntityData(this.treeIndex,B,this.consumed+this.excess);this.decodeMode!==b.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},S.prototype.emitNotTerminatedNamedEntity=function(){var E,R=this,L=R.result,M=R.decodeTree,B=(M[L]&l.VALUE_LENGTH)>>14;return this.emitNamedEntityData(L,B,this.consumed),(E=this.errors)===null||E===void 0||E.missingSemicolonAfterCharacterReference(),this.consumed},S.prototype.emitNamedEntityData=function(E,R,L){var M=this.decodeTree;return this.emitCodePoint(R===1?M[E]&~l.VALUE_LENGTH:M[E+1],L),R===3&&this.emitCodePoint(M[E+2],L),L},S.prototype.end=function(){var E;switch(this.state){case _.NamedEntity:return this.result!==0&&(this.decodeMode!==b.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case _.NumericDecimal:return this.emitNumericEntity(0,2);case _.NumericHex:return this.emitNumericEntity(0,3);case _.NumericStart:return(E=this.errors)===null||E===void 0||E.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case _.EntityStart:return 0}},S})();u.EntityDecoder=m;function g(S){var E="",R=new m(S,function(L){return E+=(0,a.fromCodePoint)(L)});return function(M,B){for(var X=0,J=0;(J=M.indexOf("&",J))>=0;){E+=M.slice(X,J),R.startEntity(B);var ie=R.write(M,J+1);if(ie<0){X=J+R.end();break}X=J+ie,J=ie===0?X+1:X}var U=E+M.slice(X);return E="",U}}function T(S,E,R,L){var M=(E&l.BRANCH_LENGTH)>>7,B=E&l.JUMP_TABLE;if(M===0)return B!==0&&L===B?R:-1;if(B){var X=L-B;return X<0||X>=M?-1:S[R+X]-1}for(var J=R,ie=J+M-1;J<=ie;){var U=J+ie>>>1,fe=S[U];if(fe<L)J=U+1;else if(fe>L)ie=U-1;else return S[U+M]}return-1}u.determineBranch=T;var v=g(e.default),A=g(r.default);function I(S,E){return E===void 0&&(E=b.Legacy),v(S,E)}u.decodeHTML=I;function q(S){return v(S,b.Attribute)}u.decodeHTMLAttribute=q;function O(S){return v(S,b.Strict)}u.decodeHTMLStrict=O;function w(S){return A(S,b.Strict)}u.decodeXML=w})(Rn)),Rn}var yi={},ST={},wN;function Are(){if(wN)return ST;wN=1,Object.defineProperty(ST,"__esModule",{value:!0});function u(n){for(var o=1;o<n.length;o++)n[o][0]+=n[o-1][0]+1;return n}return ST.default=new Map(u([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(u([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(u([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(u([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]])),ST}var y4={},SN;function LA(){return SN||(SN=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.escapeText=u.escapeAttribute=u.escapeUTF8=u.escape=u.encodeXML=u.getCodePoint=u.xmlReplacer=void 0,u.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var n=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);u.getCodePoint=String.prototype.codePointAt!=null?function(t,e){return t.codePointAt(e)}:function(t,e){return(t.charCodeAt(e)&64512)===55296?(t.charCodeAt(e)-55296)*1024+t.charCodeAt(e+1)-56320+65536:t.charCodeAt(e)};function o(t){for(var e="",r=0,a;(a=u.xmlReplacer.exec(t))!==null;){var c=a.index,s=t.charCodeAt(c),d=n.get(s);d!==void 0?(e+=t.substring(r,c)+d,r=c+1):(e+="".concat(t.substring(r,c),"&#x").concat((0,u.getCodePoint)(t,c).toString(16),";"),r=u.xmlReplacer.lastIndex+=+((s&64512)===55296))}return e+t.substr(r)}u.encodeXML=o,u.escape=o;function i(t,e){return function(a){for(var c,s=0,d="";c=t.exec(a);)s!==c.index&&(d+=a.substring(s,c.index)),d+=e.get(c[0].charCodeAt(0)),s=c.index+1;return d+a.substring(s)}}u.escapeUTF8=i(/[&<>'"]/g,n),u.escapeAttribute=i(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),u.escapeText=i(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))})(y4)),y4}var AN;function ON(){if(AN)return yi;AN=1;var u=yi&&yi.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(yi,"__esModule",{value:!0}),yi.encodeNonAsciiHTML=yi.encodeHTML=void 0;var n=u(Are()),o=LA(),i=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function t(a){return r(i,a)}yi.encodeHTML=t;function e(a){return r(o.xmlReplacer,a)}yi.encodeNonAsciiHTML=e;function r(a,c){for(var s="",d=0,l;(l=a.exec(c))!==null;){var f=l.index;s+=c.substring(d,f);var h=c.charCodeAt(f),p=n.default.get(h);if(typeof p=="object"){if(f+1<c.length){var y=c.charCodeAt(f+1),_=typeof p.n=="number"?p.n===y?p.o:void 0:p.n.get(y);if(_!==void 0){s+=_,d=a.lastIndex+=1;continue}}p=p.v}if(p!==void 0)s+=p,d=f+1;else{var b=(0,o.getCodePoint)(c,f);s+="&#x".concat(b.toString(16),";"),d=a.lastIndex+=+(b!==h)}}return s+c.substr(d)}return yi}var EN;function Ore(){return EN||(EN=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.decodeXMLStrict=u.decodeHTML5Strict=u.decodeHTML4Strict=u.decodeHTML5=u.decodeHTML4=u.decodeHTMLAttribute=u.decodeHTMLStrict=u.decodeHTML=u.decodeXML=u.DecodingMode=u.EntityDecoder=u.encodeHTML5=u.encodeHTML4=u.encodeNonAsciiHTML=u.encodeHTML=u.escapeText=u.escapeAttribute=u.escapeUTF8=u.escape=u.encodeXML=u.encode=u.decodeStrict=u.decode=u.EncodingMode=u.EntityLevel=void 0;var n=TN(),o=ON(),i=LA(),t;(function(f){f[f.XML=0]="XML",f[f.HTML=1]="HTML"})(t=u.EntityLevel||(u.EntityLevel={}));var e;(function(f){f[f.UTF8=0]="UTF8",f[f.ASCII=1]="ASCII",f[f.Extensive=2]="Extensive",f[f.Attribute=3]="Attribute",f[f.Text=4]="Text"})(e=u.EncodingMode||(u.EncodingMode={}));function r(f,h){h===void 0&&(h=t.XML);var p=typeof h=="number"?h:h.level;if(p===t.HTML){var y=typeof h=="object"?h.mode:void 0;return(0,n.decodeHTML)(f,y)}return(0,n.decodeXML)(f)}u.decode=r;function a(f,h){var p;h===void 0&&(h=t.XML);var y=typeof h=="number"?{level:h}:h;return(p=y.mode)!==null&&p!==void 0||(y.mode=n.DecodingMode.Strict),r(f,y)}u.decodeStrict=a;function c(f,h){h===void 0&&(h=t.XML);var p=typeof h=="number"?{level:h}:h;return p.mode===e.UTF8?(0,i.escapeUTF8)(f):p.mode===e.Attribute?(0,i.escapeAttribute)(f):p.mode===e.Text?(0,i.escapeText)(f):p.level===t.HTML?p.mode===e.ASCII?(0,o.encodeNonAsciiHTML)(f):(0,o.encodeHTML)(f):(0,i.encodeXML)(f)}u.encode=c;var s=LA();Object.defineProperty(u,"encodeXML",{enumerable:!0,get:function(){return s.encodeXML}}),Object.defineProperty(u,"escape",{enumerable:!0,get:function(){return s.escape}}),Object.defineProperty(u,"escapeUTF8",{enumerable:!0,get:function(){return s.escapeUTF8}}),Object.defineProperty(u,"escapeAttribute",{enumerable:!0,get:function(){return s.escapeAttribute}}),Object.defineProperty(u,"escapeText",{enumerable:!0,get:function(){return s.escapeText}});var d=ON();Object.defineProperty(u,"encodeHTML",{enumerable:!0,get:function(){return d.encodeHTML}}),Object.defineProperty(u,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return d.encodeNonAsciiHTML}}),Object.defineProperty(u,"encodeHTML4",{enumerable:!0,get:function(){return d.encodeHTML}}),Object.defineProperty(u,"encodeHTML5",{enumerable:!0,get:function(){return d.encodeHTML}});var l=TN();Object.defineProperty(u,"EntityDecoder",{enumerable:!0,get:function(){return l.EntityDecoder}}),Object.defineProperty(u,"DecodingMode",{enumerable:!0,get:function(){return l.DecodingMode}}),Object.defineProperty(u,"decodeXML",{enumerable:!0,get:function(){return l.decodeXML}}),Object.defineProperty(u,"decodeHTML",{enumerable:!0,get:function(){return l.decodeHTML}}),Object.defineProperty(u,"decodeHTMLStrict",{enumerable:!0,get:function(){return l.decodeHTMLStrict}}),Object.defineProperty(u,"decodeHTMLAttribute",{enumerable:!0,get:function(){return l.decodeHTMLAttribute}}),Object.defineProperty(u,"decodeHTML4",{enumerable:!0,get:function(){return l.decodeHTML}}),Object.defineProperty(u,"decodeHTML5",{enumerable:!0,get:function(){return l.decodeHTML}}),Object.defineProperty(u,"decodeHTML4Strict",{enumerable:!0,get:function(){return l.decodeHTMLStrict}}),Object.defineProperty(u,"decodeHTML5Strict",{enumerable:!0,get:function(){return l.decodeHTMLStrict}}),Object.defineProperty(u,"decodeXMLStrict",{enumerable:!0,get:function(){return l.decodeXML}})})(p4)),p4}var lo={},xN;function Ere(){return xN||(xN=1,Object.defineProperty(lo,"__esModule",{value:!0}),lo.attributeNames=lo.elementNames=void 0,lo.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(u){return[u.toLowerCase(),u]})),lo.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(u){return[u.toLowerCase(),u]}))),lo}var IN;function xre(){if(IN)return zr;IN=1;var u=zr&&zr.__assign||function(){return u=Object.assign||function(T){for(var v,A=1,I=arguments.length;A<I;A++){v=arguments[A];for(var q in v)Object.prototype.hasOwnProperty.call(v,q)&&(T[q]=v[q])}return T},u.apply(this,arguments)},n=zr&&zr.__createBinding||(Object.create?(function(T,v,A,I){I===void 0&&(I=A);var q=Object.getOwnPropertyDescriptor(v,A);(!q||("get"in q?!v.__esModule:q.writable||q.configurable))&&(q={enumerable:!0,get:function(){return v[A]}}),Object.defineProperty(T,I,q)}):(function(T,v,A,I){I===void 0&&(I=A),T[I]=v[A]})),o=zr&&zr.__setModuleDefault||(Object.create?(function(T,v){Object.defineProperty(T,"default",{enumerable:!0,value:v})}):function(T,v){T.default=v}),i=zr&&zr.__importStar||function(T){if(T&&T.__esModule)return T;var v={};if(T!=null)for(var A in T)A!=="default"&&Object.prototype.hasOwnProperty.call(T,A)&&n(v,T,A);return o(v,T),v};Object.defineProperty(zr,"__esModule",{value:!0}),zr.render=void 0;var t=i(Jl()),e=Ore(),r=Ere(),a=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function c(T){return T.replace(/"/g,"&quot;")}function s(T,v){var A;if(T){var I=((A=v.encodeEntities)!==null&&A!==void 0?A:v.decodeEntities)===!1?c:v.xmlMode||v.encodeEntities!=="utf8"?e.encodeXML:e.escapeAttribute;return Object.keys(T).map(function(q){var O,w,S=(O=T[q])!==null&&O!==void 0?O:"";return v.xmlMode==="foreign"&&(q=(w=r.attributeNames.get(q))!==null&&w!==void 0?w:q),!v.emptyAttrs&&!v.xmlMode&&S===""?q:"".concat(q,'="').concat(I(S),'"')}).join(" ")}}var d=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function l(T,v){v===void 0&&(v={});for(var A=("length"in T)?T:[T],I="",q=0;q<A.length;q++)I+=f(A[q],v);return I}zr.render=l,zr.default=l;function f(T,v){switch(T.type){case t.Root:return l(T.children,v);case t.Doctype:case t.Directive:return _(T);case t.Comment:return g(T);case t.CDATA:return m(T);case t.Script:case t.Style:case t.Tag:return y(T,v);case t.Text:return b(T,v)}}var h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),p=new Set(["svg","math"]);function y(T,v){var A;v.xmlMode==="foreign"&&(T.name=(A=r.elementNames.get(T.name))!==null&&A!==void 0?A:T.name,T.parent&&h.has(T.parent.name)&&(v=u(u({},v),{xmlMode:!1}))),!v.xmlMode&&p.has(T.name)&&(v=u(u({},v),{xmlMode:"foreign"}));var I="<".concat(T.name),q=s(T.attribs,v);return q&&(I+=" ".concat(q)),T.children.length===0&&(v.xmlMode?v.selfClosingTags!==!1:v.selfClosingTags&&d.has(T.name))?(v.xmlMode||(I+=" "),I+="/>"):(I+=">",T.children.length>0&&(I+=l(T.children,v)),(v.xmlMode||!d.has(T.name))&&(I+="</".concat(T.name,">"))),I}function _(T){return"<".concat(T.data,">")}function b(T,v){var A,I=T.data||"";return((A=v.encodeEntities)!==null&&A!==void 0?A:v.decodeEntities)!==!1&&!(!v.xmlMode&&T.parent&&a.has(T.parent.name))&&(I=v.xmlMode||v.encodeEntities!=="utf8"?(0,e.encodeXML)(I):(0,e.escapeText)(I)),I}function m(T){return"<![CDATA[".concat(T.children[0].data,"]]>")}function g(T){return"<!--".concat(T.data,"-->")}return zr}var RN;function jX(){if(RN)return kn;RN=1;var u=kn&&kn.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(kn,"__esModule",{value:!0}),kn.getOuterHTML=t,kn.getInnerHTML=e,kn.getText=r,kn.textContent=a,kn.innerText=c;var n=bn(),o=u(xre()),i=Jl();function t(s,d){return(0,o.default)(s,d)}function e(s,d){return(0,n.hasChildren)(s)?s.children.map(function(l){return t(l,d)}).join(""):""}function r(s){return Array.isArray(s)?s.map(r).join(""):(0,n.isTag)(s)?s.name==="br"?`
`:r(s.children):(0,n.isCDATA)(s)?r(s.children):(0,n.isText)(s)?s.data:""}function a(s){return Array.isArray(s)?s.map(a).join(""):(0,n.hasChildren)(s)&&!(0,n.isComment)(s)?a(s.children):(0,n.isText)(s)?s.data:""}function c(s){return Array.isArray(s)?s.map(c).join(""):(0,n.hasChildren)(s)&&(s.type===i.ElementType.Tag||(0,n.isCDATA)(s))?c(s.children):(0,n.isText)(s)?s.data:""}return kn}var Fn={},FN;function Ire(){if(FN)return Fn;FN=1,Object.defineProperty(Fn,"__esModule",{value:!0}),Fn.getChildren=n,Fn.getParent=o,Fn.getSiblings=i,Fn.getAttributeValue=t,Fn.hasAttrib=e,Fn.getName=r,Fn.nextElementSibling=a,Fn.prevElementSibling=c;var u=bn();function n(s){return(0,u.hasChildren)(s)?s.children:[]}function o(s){return s.parent||null}function i(s){var d,l,f=o(s);if(f!=null)return n(f);for(var h=[s],p=s.prev,y=s.next;p!=null;)h.unshift(p),d=p,p=d.prev;for(;y!=null;)h.push(y),l=y,y=l.next;return h}function t(s,d){var l;return(l=s.attribs)===null||l===void 0?void 0:l[d]}function e(s,d){return s.attribs!=null&&Object.prototype.hasOwnProperty.call(s.attribs,d)&&s.attribs[d]!=null}function r(s){return s.name}function a(s){for(var d,l=s.next;l!==null&&!(0,u.isTag)(l);)d=l,l=d.next;return l}function c(s){for(var d,l=s.prev;l!==null&&!(0,u.isTag)(l);)d=l,l=d.prev;return l}return Fn}var _i={},NN;function Rre(){if(NN)return _i;NN=1,Object.defineProperty(_i,"__esModule",{value:!0}),_i.removeElement=u,_i.replaceElement=n,_i.appendChild=o,_i.append=i,_i.prependChild=t,_i.prepend=e;function u(r){if(r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),r.parent){var a=r.parent.children,c=a.lastIndexOf(r);c>=0&&a.splice(c,1)}r.next=null,r.prev=null,r.parent=null}function n(r,a){var c=a.prev=r.prev;c&&(c.next=a);var s=a.next=r.next;s&&(s.prev=a);var d=a.parent=r.parent;if(d){var l=d.children;l[l.lastIndexOf(r)]=a,r.parent=null}}function o(r,a){if(u(a),a.next=null,a.parent=r,r.children.push(a)>1){var c=r.children[r.children.length-2];c.next=a,a.prev=c}else a.prev=null}function i(r,a){u(a);var c=r.parent,s=r.next;if(a.next=s,a.prev=r,r.next=a,a.parent=c,s){if(s.prev=a,c){var d=c.children;d.splice(d.lastIndexOf(s),0,a)}}else c&&c.children.push(a)}function t(r,a){if(u(a),a.parent=r,a.prev=null,r.children.unshift(a)!==1){var c=r.children[1];c.prev=a,a.next=c}else a.next=null}function e(r,a){u(a);var c=r.parent;if(c){var s=c.children;s.splice(s.indexOf(r),0,a)}r.prev&&(r.prev.next=a),a.parent=c,a.prev=r.prev,a.next=r,r.prev=a}return _i}var gi={},PN;function LX(){if(PN)return gi;PN=1,Object.defineProperty(gi,"__esModule",{value:!0}),gi.filter=n,gi.find=o,gi.findOneChild=i,gi.findOne=t,gi.existsOne=e,gi.findAll=r;var u=bn();function n(a,c,s,d){return s===void 0&&(s=!0),d===void 0&&(d=1/0),o(a,Array.isArray(c)?c:[c],s,d)}function o(a,c,s,d){for(var l=[],f=[Array.isArray(c)?c:[c]],h=[0];;){if(h[0]>=f[0].length){if(h.length===1)return l;f.shift(),h.shift();continue}var p=f[0][h[0]++];if(a(p)&&(l.push(p),--d<=0))return l;s&&(0,u.hasChildren)(p)&&p.children.length>0&&(h.unshift(0),f.unshift(p.children))}}function i(a,c){return c.find(a)}function t(a,c,s){s===void 0&&(s=!0);for(var d=Array.isArray(c)?c:[c],l=0;l<d.length;l++){var f=d[l];if((0,u.isTag)(f)&&a(f))return f;if(s&&(0,u.hasChildren)(f)&&f.children.length>0){var h=t(a,f.children,!0);if(h)return h}}return null}function e(a,c){return(Array.isArray(c)?c:[c]).some(function(s){return(0,u.isTag)(s)&&a(s)||(0,u.hasChildren)(s)&&e(a,s.children)})}function r(a,c){for(var s=[],d=[Array.isArray(c)?c:[c]],l=[0];;){if(l[0]>=d[0].length){if(d.length===1)return s;d.shift(),l.shift();continue}var f=d[0][l[0]++];(0,u.isTag)(f)&&a(f)&&s.push(f),(0,u.hasChildren)(f)&&f.children.length>0&&(l.unshift(0),d.unshift(f.children))}}return gi}var mi={},DN;function MX(){if(DN)return mi;DN=1,Object.defineProperty(mi,"__esModule",{value:!0}),mi.testElement=r,mi.getElements=a,mi.getElementById=c,mi.getElementsByTagName=s,mi.getElementsByClassName=d,mi.getElementsByTagType=l;var u=bn(),n=LX(),o={tag_name:function(f){return typeof f=="function"?function(h){return(0,u.isTag)(h)&&f(h.name)}:f==="*"?u.isTag:function(h){return(0,u.isTag)(h)&&h.name===f}},tag_type:function(f){return typeof f=="function"?function(h){return f(h.type)}:function(h){return h.type===f}},tag_contains:function(f){return typeof f=="function"?function(h){return(0,u.isText)(h)&&f(h.data)}:function(h){return(0,u.isText)(h)&&h.data===f}}};function i(f,h){return typeof h=="function"?function(p){return(0,u.isTag)(p)&&h(p.attribs[f])}:function(p){return(0,u.isTag)(p)&&p.attribs[f]===h}}function t(f,h){return function(p){return f(p)||h(p)}}function e(f){var h=Object.keys(f).map(function(p){var y=f[p];return Object.prototype.hasOwnProperty.call(o,p)?o[p](y):i(p,y)});return h.length===0?null:h.reduce(t)}function r(f,h){var p=e(f);return p?p(h):!0}function a(f,h,p,y){y===void 0&&(y=1/0);var _=e(f);return _?(0,n.filter)(_,h,p,y):[]}function c(f,h,p){return p===void 0&&(p=!0),Array.isArray(h)||(h=[h]),(0,n.findOne)(i("id",f),h,p)}function s(f,h,p,y){return p===void 0&&(p=!0),y===void 0&&(y=1/0),(0,n.filter)(o.tag_name(f),h,p,y)}function d(f,h,p,y){return p===void 0&&(p=!0),y===void 0&&(y=1/0),(0,n.filter)(i("class",f),h,p,y)}function l(f,h,p,y){return p===void 0&&(p=!0),y===void 0&&(y=1/0),(0,n.filter)(o.tag_type(f),h,p,y)}return mi}var Ci={},jN;function Fre(){if(jN)return Ci;jN=1,Object.defineProperty(Ci,"__esModule",{value:!0}),Ci.DocumentPosition=void 0,Ci.removeSubsets=n,Ci.compareDocumentPosition=i,Ci.uniqueSort=t;var u=bn();function n(e){for(var r=e.length;--r>=0;){var a=e[r];if(r>0&&e.lastIndexOf(a,r-1)>=0){e.splice(r,1);continue}for(var c=a.parent;c;c=c.parent)if(e.includes(c)){e.splice(r,1);break}}return e}var o;(function(e){e[e.DISCONNECTED=1]="DISCONNECTED",e[e.PRECEDING=2]="PRECEDING",e[e.FOLLOWING=4]="FOLLOWING",e[e.CONTAINS=8]="CONTAINS",e[e.CONTAINED_BY=16]="CONTAINED_BY"})(o||(Ci.DocumentPosition=o={}));function i(e,r){var a=[],c=[];if(e===r)return 0;for(var s=(0,u.hasChildren)(e)?e:e.parent;s;)a.unshift(s),s=s.parent;for(s=(0,u.hasChildren)(r)?r:r.parent;s;)c.unshift(s),s=s.parent;for(var d=Math.min(a.length,c.length),l=0;l<d&&a[l]===c[l];)l++;if(l===0)return o.DISCONNECTED;var f=a[l-1],h=f.children,p=a[l],y=c[l];return h.indexOf(p)>h.indexOf(y)?f===r?o.FOLLOWING|o.CONTAINED_BY:o.FOLLOWING:f===e?o.PRECEDING|o.CONTAINS:o.PRECEDING}function t(e){return e=e.filter(function(r,a,c){return!c.includes(r,a+1)}),e.sort(function(r,a){var c=i(r,a);return c&o.PRECEDING?-1:c&o.FOLLOWING?1:0}),e}return Ci}var AT={},LN;function Nre(){if(LN)return AT;LN=1,Object.defineProperty(AT,"__esModule",{value:!0}),AT.getFeed=o;var u=jX(),n=MX();function o(f){var h=c(l,f);return h?h.name==="feed"?i(h):t(h):null}function i(f){var h,p=f.children,y={type:"atom",items:(0,n.getElementsByTagName)("entry",p).map(function(m){var g,T=m.children,v={media:a(T)};d(v,"id","id",T),d(v,"title","title",T);var A=(g=c("link",T))===null||g===void 0?void 0:g.attribs.href;A&&(v.link=A);var I=s("summary",T)||s("content",T);I&&(v.description=I);var q=s("updated",T);return q&&(v.pubDate=new Date(q)),v})};d(y,"id","id",p),d(y,"title","title",p);var _=(h=c("link",p))===null||h===void 0?void 0:h.attribs.href;_&&(y.link=_),d(y,"description","subtitle",p);var b=s("updated",p);return b&&(y.updated=new Date(b)),d(y,"author","email",p,!0),y}function t(f){var h,p,y=(p=(h=c("channel",f.children))===null||h===void 0?void 0:h.children)!==null&&p!==void 0?p:[],_={type:f.name.substr(0,3),id:"",items:(0,n.getElementsByTagName)("item",f.children).map(function(m){var g=m.children,T={media:a(g)};d(T,"id","guid",g),d(T,"title","title",g),d(T,"link","link",g),d(T,"description","description",g);var v=s("pubDate",g)||s("dc:date",g);return v&&(T.pubDate=new Date(v)),T})};d(_,"title","title",y),d(_,"link","link",y),d(_,"description","description",y);var b=s("lastBuildDate",y);return b&&(_.updated=new Date(b)),d(_,"author","managingEditor",y,!0),_}var e=["url","type","lang"],r=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function a(f){return(0,n.getElementsByTagName)("media:content",f).map(function(h){for(var p=h.attribs,y={medium:p.medium,isDefault:!!p.isDefault},_=0,b=e;_<b.length;_++){var m=b[_];p[m]&&(y[m]=p[m])}for(var g=0,T=r;g<T.length;g++){var m=T[g];p[m]&&(y[m]=parseInt(p[m],10))}return p.expression&&(y.expression=p.expression),y})}function c(f,h){return(0,n.getElementsByTagName)(f,h,!0,1)[0]}function s(f,h,p){return p===void 0&&(p=!1),(0,u.textContent)((0,n.getElementsByTagName)(f,h,p,1)).trim()}function d(f,h,p,y,_){_===void 0&&(_=!1);var b=s(p,y,_);b&&(f[h]=b)}function l(f){return f==="rss"||f==="feed"||f==="rdf:RDF"}return AT}var MN;function xi(){return MN||(MN=1,(function(u){var n=co&&co.__createBinding||(Object.create?(function(t,e,r,a){a===void 0&&(a=r);var c=Object.getOwnPropertyDescriptor(e,r);(!c||("get"in c?!e.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return e[r]}}),Object.defineProperty(t,a,c)}):(function(t,e,r,a){a===void 0&&(a=r),t[a]=e[r]})),o=co&&co.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&n(e,t,r)};Object.defineProperty(u,"__esModule",{value:!0}),u.hasChildren=u.isDocument=u.isComment=u.isText=u.isCDATA=u.isTag=void 0,o(jX(),u),o(Ire(),u),o(Rre(),u),o(LX(),u),o(MX(),u),o(Fre(),u),o(Nre(),u);var i=bn();Object.defineProperty(u,"isTag",{enumerable:!0,get:function(){return i.isTag}}),Object.defineProperty(u,"isCDATA",{enumerable:!0,get:function(){return i.isCDATA}}),Object.defineProperty(u,"isText",{enumerable:!0,get:function(){return i.isText}}),Object.defineProperty(u,"isComment",{enumerable:!0,get:function(){return i.isComment}}),Object.defineProperty(u,"isDocument",{enumerable:!0,get:function(){return i.isDocument}}),Object.defineProperty(u,"hasChildren",{enumerable:!0,get:function(){return i.hasChildren}})})(co)),co}var CN;function Pre(){return CN||(CN=1,(function(u){var n=En&&En.__createBinding||(Object.create?(function(b,m,g,T){T===void 0&&(T=g);var v=Object.getOwnPropertyDescriptor(m,g);(!v||("get"in v?!m.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return m[g]}}),Object.defineProperty(b,T,v)}):(function(b,m,g,T){T===void 0&&(T=g),b[T]=m[g]})),o=En&&En.__setModuleDefault||(Object.create?(function(b,m){Object.defineProperty(b,"default",{enumerable:!0,value:m})}):function(b,m){b.default=m}),i=En&&En.__importStar||function(b){if(b&&b.__esModule)return b;var m={};if(b!=null)for(var g in b)g!=="default"&&Object.prototype.hasOwnProperty.call(b,g)&&n(m,b,g);return o(m,b),m},t=En&&En.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(u,"__esModule",{value:!0}),u.DomUtils=u.parseFeed=u.getFeed=u.ElementType=u.Tokenizer=u.createDomStream=u.parseDOM=u.parseDocument=u.DefaultHandler=u.DomHandler=u.Parser=void 0;var e=lN(),r=lN();Object.defineProperty(u,"Parser",{enumerable:!0,get:function(){return r.Parser}});var a=bn(),c=bn();Object.defineProperty(u,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(u,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}});function s(b,m){var g=new a.DomHandler(void 0,m);return new e.Parser(g,m).end(b),g.root}u.parseDocument=s;function d(b,m){return s(b,m).children}u.parseDOM=d;function l(b,m,g){var T=new a.DomHandler(b,m,g);return new e.Parser(T,m)}u.createDomStream=l;var f=DX();Object.defineProperty(u,"Tokenizer",{enumerable:!0,get:function(){return t(f).default}}),u.ElementType=i(Jl());var h=xi(),p=xi();Object.defineProperty(u,"getFeed",{enumerable:!0,get:function(){return p.getFeed}});var y={xmlMode:!0};function _(b,m){return m===void 0&&(m=y),(0,h.getFeed)(d(b,m))}u.parseFeed=_,u.DomUtils=i(xi())})(En)),En}const Dre={"@context":{alternate:"http://www.w3.org/1999/xhtml/vocab#alternate",appendix:"http://www.w3.org/1999/xhtml/vocab#appendix",cite:"http://www.w3.org/1999/xhtml/vocab#cite",bookmark:"http://www.w3.org/1999/xhtml/vocab#bookmark",contents:"http://www.w3.org/1999/xhtml/vocab#contents",chapter:"http://www.w3.org/1999/xhtml/vocab#chapter",copyright:"http://www.w3.org/1999/xhtml/vocab#copyright",first:"http://www.w3.org/1999/xhtml/vocab#first",glossary:"http://www.w3.org/1999/xhtml/vocab#glossary",help:"http://www.w3.org/1999/xhtml/vocab#help",icon:"http://www.w3.org/1999/xhtml/vocab#icon",index:"http://www.w3.org/1999/xhtml/vocab#index",last:"http://www.w3.org/1999/xhtml/vocab#last",license:"http://www.w3.org/1999/xhtml/vocab#license",meta:"http://www.w3.org/1999/xhtml/vocab#meta",next:"http://www.w3.org/1999/xhtml/vocab#next",prev:"http://www.w3.org/1999/xhtml/vocab#prev",previous:"http://www.w3.org/1999/xhtml/vocab#previous",section:"http://www.w3.org/1999/xhtml/vocab#section",start:"http://www.w3.org/1999/xhtml/vocab#start",stylesheet:"http://www.w3.org/1999/xhtml/vocab#stylesheet",subsection:"http://www.w3.org/1999/xhtml/vocab#subsection",top:"http://www.w3.org/1999/xhtml/vocab#top",up:"http://www.w3.org/1999/xhtml/vocab#up",p3pv1:"http://www.w3.org/1999/xhtml/vocab#p3pv1"}},jre={"@context":{as:"https://www.w3.org/ns/activitystreams#",cat:"http://www.w3.org/ns/dcat#",cc:"http://creativecommons.org/ns#",cnt:"http://www.w3.org/2008/content#",csvw:"http://www.w3.org/ns/csvw#",ctag:"http://commontag.org/ns#",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcat:"http://www.w3.org/ns/dcat#",dcterms:"http://purl.org/dc/terms/",dqv:"http://www.w3.org/ns/dqv#",duv:"https://www.w3.org/TR/vocab-duv#",earl:"http://www.w3.org/ns/earl#",foaf:"http://xmlns.com/foaf/0.1/",gldp:"http://www.w3.org/ns/people#",gr:"http://purl.org/goodrelations/v1#",grddl:"http://www.w3.org/2003/g/data-view#",ht:"http://www.w3.org/2006/http#",ical:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",ma:"http://www.w3.org/ns/ma-ont#",oa:"http://www.w3.org/ns/oa#",odrl:"http://www.w3.org/ns/odrl/2/",og:"http://ogp.me/ns#",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",prov:"http://www.w3.org/ns/prov#",ptr:"http://www.w3.org/2009/pointers#",qb:"http://purl.org/linked-data/cube#",rev:"http://purl.org/stuff/rev#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfa:"http://www.w3.org/ns/rdfa#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rif:"http://www.w3.org/2007/rif#",rr:"http://www.w3.org/ns/r2rml#",schema:"http://schema.org/",sd:"http://www.w3.org/ns/sparql-service-description#",sioc:"http://rdfs.org/sioc/ns#",skos:"http://www.w3.org/2004/02/skos/core#",skosxl:"http://www.w3.org/2008/05/skos-xl#",ssn:"http://www.w3.org/ns/ssn/",sosa:"http://www.w3.org/ns/sosa/",time:"http://www.w3.org/2006/time#",v:"http://rdf.data-vocabulary.org/#",vcard:"http://www.w3.org/2006/vcard/ns#",void:"http://rdfs.org/ns/void#",wdr:"http://www.w3.org/2007/05/powder#",wdrs:"http://www.w3.org/2007/05/powder-s#",xhv:"http://www.w3.org/1999/xhtml/vocab#",xml:"http://www.w3.org/XML/1998/namespace",xsd:"http://www.w3.org/2001/XMLSchema#",describedby:"http://www.w3.org/2007/05/powder-s#describedby",license:"http://www.w3.org/1999/xhtml/vocab#license",role:"http://www.w3.org/1999/xhtml/vocab#role"}};var fo={},qN;function HO(){return qN||(qN=1,Object.defineProperty(fo,"__esModule",{value:!0}),fo.RDFA_CONTENTTYPES=fo.RDFA_FEATURES=void 0,fo.RDFA_FEATURES={"":{baseTag:!0,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},core:{baseTag:!1,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!1,datetimeAttribute:!1,timeTag:!1,htmlDatatype:!1,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!1},html:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0},xhtml:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},xml:{baseTag:!1,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!1,inheritSubjectInHeadBody:!1,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!1,copyRdfaPatterns:!1,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0}},fo.RDFA_CONTENTTYPES={"text/html":"html","application/xhtml+xml":"xhtml","application/xml":"xml","text/xml":"xml","image/svg+xml":"xml"}),fo}var Qp={},BN;function CX(){if(BN)return Qp;BN=1,Object.defineProperty(Qp,"__esModule",{value:!0}),Qp.Util=void 0;const u=cr(),n=HO(),o=hr();class i{constructor(e,r){this.dataFactory=e||new o.DataFactory,this.baseIRI=this.dataFactory.namedNode(r||""),this.baseIRIDocument=this.baseIRI}static parsePrefixes(e,r,a){const c={};if(a)for(const s in e)s.startsWith("xmlns")&&(c[s.substr(6)]=e[s]);if(e.prefix||Object.keys(c).length>0){const s=Object.assign(Object.assign({},r),c);if(e.prefix){let d;for(;d=i.PREFIX_REGEX.exec(e.prefix);)s[d[1]]=d[2]}return s}else return r}static expandPrefixedTerm(e,r){const a=e.indexOf(":");let c,s;if(a>=0&&(c=e.substr(0,a),s=e.substr(a+1)),c==="")return"http://www.w3.org/1999/xhtml/vocab#"+s;if(c){const d=r.prefixesAll[c];if(d)return d+s}if(e){const d=r.prefixesAll[e.toLocaleLowerCase()];if(d)return d}return e}static isValidIri(e){return i.IRI_REGEX.test(e)}static contentTypeToProfile(e){return n.RDFA_CONTENTTYPES[e]||""}getBaseIRI(e){let r=e;const a=r.indexOf("#");return a>=0&&(r=r.substr(0,a)),this.dataFactory.namedNode((0,u.resolve)(r,this.baseIRI.value))}getResourceOrBaseIri(e,r){return e===!0?this.getBaseIriTerm(r):e}getBaseIriTerm(e){return e.localBaseIRI||this.baseIRI}createVocabIris(e,r,a,c){return e.split(/\s+/).filter(s=>s&&(a||s.indexOf(":")>=0)).map(s=>this.createIri(s,r,!0,!0,c)).filter(s=>s!=null)}createLiteral(e,r){if(r.interpretObjectAsTime&&!r.datatype){for(const a of i.TIME_REGEXES)if(e.match(a.regex)){r.datatype=this.dataFactory.namedNode(i.XSD+a.type);break}}return this.dataFactory.literal(e,r.datatype||r.language)}createBlankNode(){return this.blankNodeFactory?this.blankNodeFactory():this.dataFactory.blankNode()}createIri(e,r,a,c,s){if(e=e||"",!c)return a||(e=(0,u.resolve)(e,this.getBaseIriTerm(r).value)),i.isValidIri(e)?this.dataFactory.namedNode(e):null;if(e.length>0&&e[0]==="["&&e[e.length-1]==="]"&&(e=e.substr(1,e.length-2),e.indexOf(":")<0))return null;if(e.startsWith("_:"))return s?this.dataFactory.blankNode(e.substr(2)||"b_identity"):null;if(a&&r.vocab&&e.indexOf(":")<0)return this.dataFactory.namedNode(r.vocab+e);let d=i.expandPrefixedTerm(e,r);return a?e!==d&&(d=(0,u.resolve)(d,this.baseIRIDocument.value)):d=(0,u.resolve)(d,this.getBaseIriTerm(r).value),i.isValidIri(d)?this.dataFactory.namedNode(d):null}}return Qp.Util=i,i.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",i.XSD="http://www.w3.org/2001/XMLSchema#",i.RDFA="http://www.w3.org/ns/rdfa#",i.PREFIX_REGEX=/\s*([^:\s]*)*:\s*([^\s]*)*\s*/g,i.TIME_REGEXES=[{regex:/^-?P([0-9]+Y)?([0-9]+M)?([0-9]+D)?(T([0-9]+H)?([0-9]+M)?([0-9]+(\.[0-9])?S)?)?$/,type:"duration"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"dateTime"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,type:"date"},{regex:/^[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"time"},{regex:/^[0-9]+-[0-9][0-9]$/,type:"gYearMonth"},{regex:/^[0-9]+$/,type:"gYear"}],i.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`]*$/,Qp}var $N;function Lre(){if($N)return Vp;$N=1,Object.defineProperty(Vp,"__esModule",{value:!0}),Vp.RdfaParser=void 0;const u=Pre(),n=Dt(),o=Dre,i=jre,t=HO(),e=CX();let r=class qX extends n.Transform{constructor(c){super({readableObjectMode:!0}),this.activeTagStack=[],c=c||{},this.options=c,this.util=new e.Util(c.dataFactory,c.baseIRI),this.defaultGraph=c.defaultGraph||this.util.dataFactory.defaultGraph();const s=c.contentType?e.Util.contentTypeToProfile(c.contentType):c.profile||"";this.features=c.features||t.RDFA_FEATURES[s],this.htmlParseListener=c.htmlParseListener,this.rdfaPatterns=this.features.copyRdfaPatterns?{}:null,this.pendingRdfaPatternCopies=this.features.copyRdfaPatterns?{}:null,this.parser=this.initializeParser(s==="xml"),this.activeTagStack.push({incompleteTriples:[],inlist:!1,language:c.language,listMapping:{},listMappingLocal:{},name:"",prefixesAll:Object.assign(Object.assign({},i["@context"]),this.features.xhtmlInitialContext?o["@context"]:{}),prefixesCustom:{},skipElement:!1,vocab:c.vocab})}import(c){const s=new n.PassThrough({readableObjectMode:!0});c.on("error",l=>d.emit("error",l)),c.on("data",l=>s.push(l)),c.on("end",()=>s.push(null));const d=s.pipe(new qX(this.options));return d}_transform(c,s,d){this.parser.write(c.toString()),d()}_flush(c){this.parser.end(),c()}onTagOpen(c,s){let d=this.activeTagStack.length-1;for(;d>0&&this.activeTagStack[d].skipElement;)d--;let l=this.activeTagStack[d];d!==this.activeTagStack.length-1&&(l=Object.assign(Object.assign({},l),{language:this.activeTagStack[this.activeTagStack.length-1].language,prefixesAll:this.activeTagStack[this.activeTagStack.length-1].prefixesAll,prefixesCustom:this.activeTagStack[this.activeTagStack.length-1].prefixesCustom,vocab:this.activeTagStack[this.activeTagStack.length-1].vocab}));const f={collectChildTags:l.collectChildTags,incompleteTriples:[],inlist:"inlist"in s,listMapping:[],listMappingLocal:l.listMapping,localBaseIRI:l.localBaseIRI,name:c,prefixesAll:null,prefixesCustom:null,skipElement:!1};if(this.activeTagStack.push(f),f.collectChildTags){for(const v of Object.keys(l.prefixesCustom).sort()){const A=l.prefixesCustom[v],I=v===""?"xmlns":"xmlns:"+v;I in s||(s[I]=A)}const T=Object.keys(s).map(v=>`${v}="${s[v]}"`).join(" ");if(f.text=[`<${c}${T?" "+T:""}>`],this.features.skipHandlingXmlLiteralChildren)return}let h=!0,p=!0;if(this.features.onlyAllowUriRelRevIfProperty&&("property"in s&&"rel"in s&&(h=!1,s.rel.indexOf(":")<0&&delete s.rel),"property"in s&&"rev"in s&&(p=!1,s.rev.indexOf(":")<0&&delete s.rev)),this.features.copyRdfaPatterns){if(l.collectedPatternTag){const T={attributes:s,children:[],name:c,referenced:!1,rootPattern:!1,text:[]};l.collectedPatternTag.children.push(T),f.collectedPatternTag=T;return}if(s.typeof==="rdfa:Pattern"){f.collectedPatternTag={attributes:s,children:[],name:c,parentTag:l,referenced:!1,rootPattern:!0,text:[]};return}if(s.property==="rdfa:copy"){const T=s.resource||s.href||s.src;this.rdfaPatterns[T]?this.emitPatternCopy(l,this.rdfaPatterns[T],T):(this.pendingRdfaPatternCopies[T]||(this.pendingRdfaPatternCopies[T]=[]),this.pendingRdfaPatternCopies[T].push(l));return}}this.features.baseTag&&c==="base"&&s.href&&(this.util.baseIRI=this.util.getBaseIRI(s.href)),this.features.xmlBase&&s["xml:base"]&&(f.localBaseIRI=this.util.getBaseIRI(s["xml:base"])),this.features.timeTag&&c==="time"&&!s.datatype&&(f.interpretObjectAsTime=!0);let y,_,b;if("vocab"in s?s.vocab?(f.vocab=s.vocab,this.emitTriple(this.util.getBaseIriTerm(f),this.util.dataFactory.namedNode(e.Util.RDFA+"usesVocabulary"),this.util.dataFactory.namedNode(f.vocab))):f.vocab=this.activeTagStack[0].vocab:f.vocab=l.vocab,f.prefixesCustom=e.Util.parsePrefixes(s,l.prefixesCustom,this.features.xmlnsPrefixMappings),f.prefixesAll=Object.keys(f.prefixesCustom).length>0?Object.assign(Object.assign({},l.prefixesAll),f.prefixesCustom):l.prefixesAll,this.features.roleAttribute&&s.role){const T=s.id?this.util.createIri("#"+s.id,f,!1,!1,!1):this.util.createBlankNode(),v=f.vocab;f.vocab="http://www.w3.org/1999/xhtml/vocab#";for(const A of this.util.createVocabIris(s.role,f,!0,!1))this.emitTriple(T,this.util.dataFactory.namedNode("http://www.w3.org/1999/xhtml/vocab#role"),A);f.vocab=v}"xml:lang"in s||this.features.langAttribute&&"lang"in s?f.language=s["xml:lang"]||s.lang:f.language=l.language;const m=this.activeTagStack.length===2;if(!("rel"in s)&&!("rev"in s)?"property"in s&&!("content"in s)&&!("datatype"in s)?("about"in s?(y=this.util.createIri(s.about,f,!1,!0,!0),f.explicitNewSubject=!!y):m?y=!0:l.object&&(y=l.object),"typeof"in s&&("about"in s&&(b=this.util.createIri(s.about,f,!1,!0,!0)),!b&&m&&(b=!0),!b&&"resource"in s&&(b=this.util.createIri(s.resource,f,!1,!0,!0)),!b&&("href"in s||"src"in s)&&(b=this.util.createIri(s.href||s.src,f,!1,!1,!0)),!b&&this.isInheritSubjectInHeadBody(c)&&(b=y),b||(b=this.util.createBlankNode()),_=b)):(("about"in s||"resource"in s)&&(y=this.util.createIri(s.about||s.resource,f,!1,!0,!0),f.explicitNewSubject=!!y),!y&&("href"in s||"src"in s)&&(y=this.util.createIri(s.href||s.src,f,!1,!1,!0),f.explicitNewSubject=!!y),y||(m?y=!0:this.isInheritSubjectInHeadBody(c)?y=l.object:"typeof"in s?(y=this.util.createBlankNode(),f.explicitNewSubject=!0):l.object&&(y=l.object,"property"in s||(f.skipElement=!0))),"typeof"in s&&(b=y)):("about"in s?(y=this.util.createIri(s.about,f,!1,!0,!0),f.explicitNewSubject=!!y,"typeof"in s&&(b=y)):m?y=!0:l.object&&(y=l.object),"resource"in s&&(_=this.util.createIri(s.resource,f,!1,!0,!0)),_||("href"in s||"src"in s?_=this.util.createIri(s.href||s.src,f,!1,!1,!0):"typeof"in s&&!("about"in s)&&!this.isInheritSubjectInHeadBody(c)&&(_=this.util.createBlankNode())),"typeof"in s&&!("about"in s)&&(this.isInheritSubjectInHeadBody(c)?b=y:b=_)),b)for(const T of this.util.createVocabIris(s.typeof,f,!0,!0))this.emitTriple(this.util.getResourceOrBaseIri(b,f),this.util.dataFactory.namedNode(e.Util.RDF+"type"),T);if(y&&(f.listMapping={}),_){if("rel"in s&&"inlist"in s)for(const T of this.util.createVocabIris(s.rel,f,h,!1))this.addListMapping(f,y,T,_);if(!("rel"in s&&"inlist"in s)){if("rel"in s)for(const T of this.util.createVocabIris(s.rel,f,h,!1))this.emitTriple(this.util.getResourceOrBaseIri(y,f),T,this.util.getResourceOrBaseIri(_,f));if("rev"in s)for(const T of this.util.createVocabIris(s.rev,f,p,!1))this.emitTriple(this.util.getResourceOrBaseIri(_,f),T,this.util.getResourceOrBaseIri(y,f))}}if(!_){if("rel"in s)if("inlist"in s)for(const T of this.util.createVocabIris(s.rel,f,h,!1))this.addListMapping(f,y,T,null),f.incompleteTriples.push({predicate:T,reverse:!1,list:!0});else for(const T of this.util.createVocabIris(s.rel,f,h,!1))f.incompleteTriples.push({predicate:T,reverse:!1});if("rev"in s)for(const T of this.util.createVocabIris(s.rev,f,p,!1))f.incompleteTriples.push({predicate:T,reverse:!0});f.incompleteTriples.length>0&&(_=this.util.createBlankNode())}if("property"in s){f.predicates=this.util.createVocabIris(s.property,f,!0,!1);let T;if("datatype"in s?(f.datatype=this.util.createIri(s.datatype,f,!0,!0,!1),f.datatype&&(f.datatype.value===e.Util.RDF+"XMLLiteral"||this.features.htmlDatatype&&f.datatype.value===e.Util.RDF+"HTML")&&(f.collectChildTags=!0)):(!("rev"in s)&&!("rel"in s)&&!("content"in s)&&("resource"in s&&(T=this.util.createIri(s.resource,f,!1,!0,!0)),!T&&"href"in s&&(T=this.util.createIri(s.href,f,!1,!1,!0)),!T&&"src"in s&&(T=this.util.createIri(s.src,f,!1,!1,!0))),"typeof"in s&&!("about"in s)&&(T=b)),"content"in s){const v=this.util.createLiteral(s.content,f);if("inlist"in s)for(const A of f.predicates)this.addListMapping(f,y,A,v);else{const A=this.util.getResourceOrBaseIri(y,f);for(const I of f.predicates)this.emitTriple(A,I,v)}f.predicates=null}else if(this.features.datetimeAttribute&&"datetime"in s){f.interpretObjectAsTime=!0;const v=this.util.createLiteral(s.datetime,f);if("inlist"in s)for(const A of f.predicates)this.addListMapping(f,y,A,v);else{const A=this.util.getResourceOrBaseIri(y,f);for(const I of f.predicates)this.emitTriple(A,I,v)}f.predicates=null}else if(T){const v=this.util.getResourceOrBaseIri(T,f);if("inlist"in s)for(const A of f.predicates)this.addListMapping(f,y,A,v);else{const A=this.util.getResourceOrBaseIri(y,f);for(const I of f.predicates)this.emitTriple(A,I,v)}f.predicates=null}}let g=!1;if(!f.skipElement&&y&&l.incompleteTriples.length>0){g=!0;const T=this.util.getResourceOrBaseIri(l.subject,f),v=this.util.getResourceOrBaseIri(y,f);for(const A of l.incompleteTriples)if(A.reverse)this.emitTriple(v,A.predicate,T);else if(A.list){let I=null;for(let q=this.activeTagStack.length-1;q>=0;q--)if(this.activeTagStack[q].inlist){I=this.activeTagStack[q];break}this.addListMapping(I,y,A.predicate,v)}else this.emitTriple(T,A.predicate,v)}!g&&l.incompleteTriples.length>0&&(f.incompleteTriples=f.incompleteTriples.concat(l.incompleteTriples)),f.subject=y||l.subject,f.object=_||y}onText(c){const s=this.activeTagStack[this.activeTagStack.length-1];if(this.features.copyRdfaPatterns&&s.collectedPatternTag){s.collectedPatternTag.text.push(c);return}s.text||(s.text=[]),s.text.push(c)}onTagClose(){const c=this.activeTagStack[this.activeTagStack.length-1],s=this.activeTagStack[this.activeTagStack.length-2];if(!(c.collectChildTags&&s.collectChildTags&&this.features.skipHandlingXmlLiteralChildren)){if(this.features.copyRdfaPatterns&&c.collectedPatternTag&&c.collectedPatternTag.rootPattern){const d=c.collectedPatternTag.attributes.resource;if(delete c.collectedPatternTag.attributes.resource,delete c.collectedPatternTag.attributes.typeof,this.rdfaPatterns[d]=c.collectedPatternTag,this.pendingRdfaPatternCopies[d]){for(const l of this.pendingRdfaPatternCopies[d])this.emitPatternCopy(l,c.collectedPatternTag,d);delete this.pendingRdfaPatternCopies[d]}this.activeTagStack.pop();return}if(c.predicates){const d=this.util.getResourceOrBaseIri(c.subject,c);let l=c.text||[];c.collectChildTags&&s.collectChildTags&&(l=l.slice(1));const f=this.util.createLiteral(l.join(""),c);if(c.inlist)for(const h of c.predicates)this.addListMapping(c,d,h,f);else for(const h of c.predicates)this.emitTriple(d,h,f);s.predicates||(c.text=null)}if(c.object&&Object.keys(c.listMapping).length>0){const d=this.util.getResourceOrBaseIri(c.object,c);for(const l in c.listMapping){const f=this.util.dataFactory.namedNode(l),h=c.listMapping[l];if(h.length>0){const p=h.map(()=>this.util.createBlankNode());for(let y=0;y<h.length;y++){const _=this.util.getResourceOrBaseIri(h[y],c);this.emitTriple(p[y],this.util.dataFactory.namedNode(e.Util.RDF+"first"),_),this.emitTriple(p[y],this.util.dataFactory.namedNode(e.Util.RDF+"rest"),y<h.length-1?p[y+1]:this.util.dataFactory.namedNode(e.Util.RDF+"nil"))}this.emitTriple(d,f,p[0])}else this.emitTriple(d,f,this.util.dataFactory.namedNode(e.Util.RDF+"nil"))}}}this.activeTagStack.pop(),c.collectChildTags&&c.text&&c.text.push(`</${c.name}>`),c.text&&s&&(s.text?s.text=s.text.concat(c.text):s.text=c.text)}onEnd(){if(this.features.copyRdfaPatterns){this.features.copyRdfaPatterns=!1;for(const c in this.rdfaPatterns){const s=this.rdfaPatterns[c];s.referenced||(s.attributes.typeof="rdfa:Pattern",s.attributes.resource=c,this.emitPatternCopy(s.parentTag,s,c),s.referenced=!1,delete s.attributes.typeof,delete s.attributes.resource)}for(const c in this.pendingRdfaPatternCopies)for(const s of this.pendingRdfaPatternCopies[c])this.activeTagStack.push(s),this.onTagOpen("link",{property:"rdfa:copy",href:c}),this.onTagClose(),this.activeTagStack.pop();this.features.copyRdfaPatterns=!0}}isInheritSubjectInHeadBody(c){return this.features.inheritSubjectInHeadBody&&(c==="head"||c==="body")}addListMapping(c,s,d,l){if(c.explicitNewSubject){const f=this.util.createBlankNode();this.emitTriple(this.util.getResourceOrBaseIri(s,c),d,f),this.emitTriple(f,this.util.dataFactory.namedNode(e.Util.RDF+"first"),this.util.getResourceOrBaseIri(l,c)),this.emitTriple(f,this.util.dataFactory.namedNode(e.Util.RDF+"rest"),this.util.dataFactory.namedNode(e.Util.RDF+"nil"))}else{let f=c.listMappingLocal[d.value];f||(c.listMappingLocal[d.value]=f=[]),l&&f.push(l)}}emitTriple(c,s,d){c.termType==="NamedNode"&&c.value.indexOf(":")<0||s.termType==="NamedNode"&&s.value.indexOf(":")<0||d.termType==="NamedNode"&&d.value.indexOf(":")<0||this.push(this.util.dataFactory.quad(c,s,d,this.defaultGraph))}emitPatternCopy(c,s,d){if(this.activeTagStack.push(c),s.referenced=!0,!s.constructedBlankNodes)s.constructedBlankNodes=[],this.util.blankNodeFactory=()=>{const l=this.util.dataFactory.blankNode();return s.constructedBlankNodes.push(l),l};else{let l=0;this.util.blankNodeFactory=()=>s.constructedBlankNodes[l++]}this.emitPatternCopyAbsolute(s,!0,d),this.util.blankNodeFactory=null,this.activeTagStack.pop()}emitPatternCopyAbsolute(c,s,d){if(!(!s&&c.attributes.property==="rdfa:copy"&&c.attributes.href===d)){this.onTagOpen(c.name,c.attributes);for(const l of c.text)this.onText(l);for(const l of c.children)this.emitPatternCopyAbsolute(l,!1,d);this.onTagClose()}}initializeParser(c){return new u.Parser({onclosetag:()=>{try{this.onTagClose(),this.htmlParseListener&&this.htmlParseListener.onTagClose()}catch(s){this.emit("error",s)}},onend:()=>{try{this.onEnd(),this.htmlParseListener&&this.htmlParseListener.onEnd()}catch(s){this.emit("error",s)}},onopentag:(s,d)=>{try{this.onTagOpen(s,d),this.htmlParseListener&&this.htmlParseListener.onTagOpen(s,d)}catch(l){this.emit("error",l)}},ontext:s=>{try{this.onText(s),this.htmlParseListener&&this.htmlParseListener.onText(s)}catch(d){this.emit("error",d)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:c})}};return Vp.RdfaParser=r,Vp}var UN;function BX(){return UN||(UN=1,(function(u){var n=oo&&oo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=oo&&oo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(_re(),u),o(gre(),u),o(mre(),u),o(Lre(),u),o(HO(),u),o(CX(),u)})(oo)),oo}var VN;function Mre(){if(VN)return Up;VN=1,Object.defineProperty(Up,"__esModule",{value:!0}),Up.ActorRdfParseXmlRdfa=void 0;const u=zf(),n=Ce(),o=BX();let i=class extends u.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,a){var l;const c=e.context.getSafe(n.KeysInitQuery.dataFactory),s=(e.headers&&e.headers.get("content-language"))??void 0;e.data.on("error",f=>d.emit("error",f));const d=e.data.pipe(new o.RdfaParser({dataFactory:c,baseIRI:(l=e.metadata)==null?void 0:l.baseIRI,profile:"xml",language:s}));return{data:d,metadata:{triples:!0}}}};return Up.ActorRdfParseXmlRdfa=i,Up}var QN;function Cre(){return QN||(QN=1,(function(u){var n=uo&&uo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=uo&&uo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Mre(),u)})(uo)),uo}var ho={},Hp={},df={},Gp={},HN;function $X(){if(HN)return Gp;HN=1,Object.defineProperty(Gp,"__esModule",{value:!0}),Gp.promisifyEventEmitter=void 0;function u(n,o){return new Promise((i,t)=>{n.on("end",()=>i(o)),n.on("error",t)})}return Gp.promisifyEventEmitter=u,Gp}var GN;function Jf(){if(GN)return df;GN=1;var u=df&&df.__awaiter||function(i,t,e,r){function a(c){return c instanceof e?c:new e(function(s){s(c)})}return new(e||(e=Promise))(function(c,s){function d(h){try{f(r.next(h))}catch(p){s(p)}}function l(h){try{f(r.throw(h))}catch(p){s(p)}}function f(h){h.done?c(h.value):a(h.value).then(d,l)}f((r=r.apply(i,t||[])).next())})};Object.defineProperty(df,"__esModule",{value:!0}),df.stringify=o;const n=$X();function o(i){return u(this,void 0,void 0,function*(){let t="";return i.on("data",e=>{t+=e}),yield(0,n.promisifyEventEmitter)(i),t})}return df}var OT={},_4,zN;function qre(){if(zN)return _4;zN=1;var u=(function(){var n=function(ht,He,Je,tt){for(Je=Je||{},tt=ht.length;tt--;Je[ht[tt]]=He);return Je},o=[7,12,13,14,15,16,20,25,115,130],i=[7,13,16,20,25,115,130],t=[7,13,16,115,130],e=[1,25],r=[1,29],a=[1,27],c=[1,28],s=[13,16,115,130],d=[13,16,28,38,40,42,44,46,48,53,56,61,67,85,87,92,93,95,96,102,110,111,115,119,120,126,128,129,130,131,132,133,134,135,136],l=[28,56],f=[1,42],h=[46,48,53,56],p=[1,54],y=[1,60],_=[1,56],b=[1,57],m=[1,58],g=[1,63],T=[1,64],v=[1,65],A=[1,66],I=[1,67],q=[1,68],O=[1,75],w=[28,46,48,53,56],S=[28,42,46,48,53,56],E=[13,16,28,38,40,42,44,46,48,53,56,92,115,119,120,130,131,132,133,134,135,136],R=[13,16,28,38,40,42,44,46,48,53,56,67,85,87,92,95,96,115,119,120,126,128,129,130,131,132,133,134,135,136],L=[13,16,38,40,44,92,115,119,120,130,131,132,133,134,135,136],M=[13,16,28,38,40,42,44,46,48,53,56,67,85,87,92,95,96,115,117,118,119,120,126,128,129,130,131,132,133,134,135,136],B=[13,16,28,56,115,130],X=[13,16,38,58,87,96,109,115,126,130],J=[1,116],ie=[1,112],U=[1,108],fe=[1,114],me=[1,111],he=[7,13,16,20,25,44,48,53,56,67,85,87,95,96,115,128,129,130],te=[48,53],xe=[48,53,87,96,126],Ie=[13,16,44,48,53,56,85,87,95,96,115,128,129,130],Fe=[1,126],pe=[13,16,40,44,48,53,56,85,87,95,96,115,128,129,130],ye=[1,129],Q=[48,53,67,87,96,126],P=[13,16,40,44,48,53,56,67,85,87,95,96,115,128,129,130],D=[1,133],x=[13,16,40,44,48,53,56,67,85,87,95,96,102,115,128,129,130],N=[13,16,40,44,48,53,56,67,85,87,93,95,96,102,110,111,115,128,129,130],$=[1,151],G=[1,153],V=[1,156],k=[1,157],H=[1,158],Y=[1,167],se=[1,175],ce=[13,16,44,48,53,56,67,85,87,95,96,115,128,129,130],Se=[13,16,44,48,53,56,67,85,87,95,96,115,126,128,129,130],Me=[13,16,46,92,115,119,120,130,131,132,133,134,135,136],Ae={trace:function(){},yy:{},symbols_:{error:2,shaclDoc:3,shaclDoc_repetition0:4,shaclDoc_repetition1:5,ttlSection:6,EOF:7,directive:8,baseDecl:9,importsDecl:10,prefixDecl:11,KW_BASE:12,IRIREF:13,KW_IMPORTS:14,KW_PREFIX:15,PNAME_NS:16,nodeShapeIri:17,iri:18,nodeShape:19,KW_SHAPE:20,nodeShape_option0:21,nodeShape_option1:22,nodeShapeBody:23,shapeClass:24,KW_SHAPE_CLASS:25,shapeClass_option0:26,turtleAnnotation:27,";":28,turtleAnnotation2:29,predicate:30,turtleAnnotation2_option0:31,objectList:32,object:33,objectList_repetition0:34,iriOrLiteral:35,blankNodeSection:36,list:37,"(":38,list_repetition0:39,")":40,objectTail:41,",":42,LB:43,"[":44,RB:45,"]":46,LP:47,"%":48,RP:49,pcSection:50,iriHead:51,ttlStatement:52,".":53,ttlSection_repetition0:54,startNodeShape:55,"{":56,endNodeShape:57,"}":58,nodeShapeBody_repetition0:59,targetClass:60,"->":61,targetClass_repetition_plus0:62,constraint:63,constraint_group0:64,constraint_option0:65,orNotComponent:66,"|":67,nodeNot:68,nodeOrEmit:69,nodeOr:70,nodeOr_repetition_plus0:71,nodeValue:72,negation:73,nodeValue_group0:74,"=":75,iriOrLiteralOrArray:76,propertyShape:77,path:78,propertyShape_repetition0:79,propertyOrComponent:80,propertyNot:81,propertyOr:82,propertyOr_repetition_plus0:83,propertyAtom:84,NODEKIND:85,shapeRef:86,PARAM:87,propertyCount:88,propertyMinCount:89,"..":90,propertyMaxCount:91,INTEGER:92,"*":93,shapeRef_group0:94,"@":95,"!":96,pathAlternative:97,additionalAlternative:98,pathSequence:99,pathAlternative_repetition_plus0:100,additionalSequence:101,"/":102,pathEltOrInverse:103,pathSequence_repetition_plus0:104,pathElt:105,pathPrimary:106,pathMod:107,pathInverse:108,"^":109,"?":110,"+":111,iriOrLiteralOrArray_repetition0:112,literal:113,iri_group0:114,a:115,string:116,LANGTAG:117,"^^":118,DECIMAL:119,DOUBLE:120,literal_group0:121,string_group0:122,string_group1:123,shaclDoc_repetition1_group0:124,constraint_group0_repetition_plus0:125,TARGET:126,propertyShape_repetition0_group0:127,ATPNAME_LN:128,ATPNAME_NS:129,PNAME_LN:130,KW_TRUE:131,KW_FALSE:132,STRING_LITERAL1:133,STRING_LITERAL2:134,STRING_LITERAL_LONG1:135,STRING_LITERAL_LONG2:136,$accept:0,$end:1},terminals_:{2:"error",7:"EOF",12:"KW_BASE",13:"IRIREF",14:"KW_IMPORTS",15:"KW_PREFIX",16:"PNAME_NS",20:"KW_SHAPE",25:"KW_SHAPE_CLASS",28:";",38:"(",40:")",42:",",44:"[",46:"]",48:"%",53:".",56:"{",58:"}",61:"->",67:"|",75:"=",85:"NODEKIND",87:"PARAM",90:"..",92:"INTEGER",93:"*",95:"@",96:"!",102:"/",109:"^",110:"?",111:"+",115:"a",117:"LANGTAG",118:"^^",119:"DECIMAL",120:"DOUBLE",126:"TARGET",128:"ATPNAME_LN",129:"ATPNAME_NS",130:"PNAME_LN",131:"KW_TRUE",132:"KW_FALSE",133:"STRING_LITERAL1",134:"STRING_LITERAL2",135:"STRING_LITERAL_LONG1",136:"STRING_LITERAL_LONG2"},productions_:[0,[3,4],[8,1],[8,1],[8,1],[9,2],[10,2],[11,3],[17,1],[19,5],[24,4],[27,2],[29,2],[30,2],[32,2],[33,1],[33,1],[33,1],[37,3],[41,2],[43,1],[45,1],[36,3],[47,1],[49,1],[50,3],[51,1],[52,3],[6,1],[55,1],[57,1],[23,3],[60,2],[63,3],[66,2],[69,1],[70,1],[70,2],[68,1],[68,2],[72,3],[77,2],[80,2],[82,1],[82,2],[81,1],[81,2],[84,1],[84,1],[84,1],[84,3],[84,1],[88,5],[89,1],[91,1],[91,1],[86,1],[86,2],[73,1],[78,1],[98,2],[97,1],[97,2],[101,2],[99,1],[99,2],[105,1],[105,2],[103,1],[103,2],[108,1],[107,1],[107,1],[107,1],[106,1],[106,3],[76,1],[76,3],[35,1],[35,1],[18,1],[18,1],[18,1],[113,1],[113,2],[113,3],[113,1],[113,1],[113,1],[113,1],[116,1],[116,1],[4,0],[4,2],[124,1],[124,1],[5,0],[5,2],[21,0],[21,1],[22,0],[22,1],[26,0],[26,1],[31,0],[31,1],[34,0],[34,2],[39,0],[39,2],[54,0],[54,2],[59,0],[59,2],[62,1],[62,2],[125,1],[125,2],[64,1],[64,1],[65,0],[65,1],[71,1],[71,2],[74,1],[74,1],[127,1],[127,1],[79,0],[79,2],[83,1],[83,2],[94,1],[94,1],[100,1],[100,2],[104,1],[104,2],[112,0],[112,2],[114,1],[114,1],[121,1],[121,1],[122,1],[122,1],[123,1],[123,1]],performAction:function(He,Je,tt,wt,at,Xe,xr){var Ge=Xe.length-1;switch(at){case 1:this.$=ne(Ue.factory.namedNode($e("")),Ue.factory.namedNode(C),Ue.factory.namedNode(Ze+"Ontology"));break;case 5:Ue.base=Ue.factory.namedNode(Xe[Ge].slice(1,-1)),Ue.n3Parser._setBase($e(Ue.base.value));break;case 6:this.$=ne(Ue.base,Ue.factory.namedNode(Ze+"imports"),Ue.factory.namedNode(Xe[Ge].slice(1,-1)));break;case 7:this.$=Ue.prefixes[Xe[Ge-1].substr(0,Xe[Ge-1].length-1)]=$e(Xe[Ge]);break;case 8:Ue.nodeShapeStack=!1,ne(Ue.currentNodeShape=Xe[Ge],Ue.factory.namedNode(C),Ue.factory.namedNode(Be+"NodeShape"));break;case 10:this.$=ne(Ue.currentNodeShape,Ue.factory.namedNode(C),Ue.factory.namedNode(K+"Class"));break;case 11:this.$=Qe();break;case 13:this.$=Xe[Ge].forEach(ve=>ne(Ue.currentNodeShape,Xe[Ge-1],ve));break;case 14:this.$=[Xe[Ge-1],...Xe[Ge]];break;case 18:this.$=Ee(Xe[Ge-1],!0);break;case 19:case 34:case 42:case 60:case 63:this.$=Xe[Ge];break;case 20:Ue.tempCurrentNodeShape=Ue.currentNodeShape,this.$=Ue.currentNodeShape=Ke();break;case 21:Ue.currentNodeShape=Ue.tempCurrentNodeShape;break;case 22:case 31:this.$=Xe[Ge-2];break;case 23:Ue.tempCurrentNodeShape=Ue.currentNodeShape,Ue.currentNodeShape=Ue.currentPropertyNode;break;case 24:Ue.currentNodeShape=Ue.tempCurrentNodeShape;break;case 26:Ue.currentNodeShape=Xe[Ge];break;case 29:Ue.nodeShapeStack?(Ue.nodeShapeStack.push(Ue.currentNodeShape),ne(Ue.currentPropertyNode,Ue.factory.namedNode(Be+"node"),Ue.currentNodeShape=Ke())):Ue.nodeShapeStack=[],this.$=Ue.currentNodeShape;break;case 30:Ue.nodeShapeStack.length>0&&(Ue.currentNodeShape=Ue.nodeShapeStack.pop());break;case 32:this.$=Xe[Ge].forEach(ve=>{ne(Ue.currentNodeShape,Ue.factory.namedNode(Be+"targetClass"),ve)});break;case 35:this.$=ne(Ue.currentNodeShape,Ue.factory.namedNode(Be+Xe[Ge][0]),Xe[Ge][1]);break;case 36:break;case 37:const ae=Ee([Xe[Ge-1],...Xe[Ge]].map(ve=>{const We=Ke();return ne(We,Ue.factory.namedNode(Be+ve[0]),ve[1]),We}));this.$=["or",ae];break;case 39:case 46:this.$=qe("not",...Xe[Ge]);break;case 40:case 50:this.$=[Xe[Ge-2],Xe[Ge]];break;case 43:this.$=Xe[Ge]&&De(...Xe[Ge]);break;case 44:this.$=De("or",Ee([Xe[Ge-1],...Xe[Ge]].map(ve=>{const We=Ke();return ne(We,Ue.factory.namedNode(Be+ve[0]),ve[1]),We})));break;case 47:this.$=[we[Xe[Ge].value]?"datatype":"class",Xe[Ge]];break;case 48:this.$=["nodeKind",Ue.factory.namedNode(Be+Xe[Ge])];break;case 49:this.$=["node",Ue.factory.namedNode(Xe[Ge])];break;case 51:this.$=void 0;break;case 53:this.$=Xe[Ge]>0&&De("minCount",et(Xe[Ge],le));break;case 54:this.$=De("maxCount",et(Xe[Ge],le));break;case 56:this.$=Ne(Xe[Ge].slice(1));break;case 57:this.$=$e(Xe[Ge]);break;case 59:ne(Ue.currentNodeShape,Ue.factory.namedNode(Be+"property"),Ue.currentPropertyNode=Ke()),De("path",Xe[Ge]);break;case 62:const _e=Ke();ne(_e,Ue.factory.namedNode(Be+"alternativePath"),Ee([Xe[Ge-1],...Xe[Ge]])),this.$=_e;break;case 65:this.$=Ee([Xe[Ge-1],...Xe[Ge]]);break;case 67:ne(this.$=Ke(),Ue.factory.namedNode(Be+Xe[Ge]),Xe[Ge-1]);break;case 69:ne(this.$=Ke(),Ue.factory.namedNode(Be+"inversePath"),Xe[Ge]);break;case 71:this.$="zeroOrOnePath";break;case 72:this.$="zeroOrMorePath";break;case 73:this.$="oneOrMorePath";break;case 75:this.$=Xe[Ge-1];break;case 77:this.$=Ee(Xe[Ge-1]);break;case 80:this.$=Ue.factory.namedNode($e(Xe[Ge]));break;case 81:this.$=Ue.factory.namedNode(Ne(Xe[Ge]));break;case 82:this.$=Qe(Ue.factory.namedNode(C));break;case 83:this.$=et(Xe[Ge]);break;case 84:this.$=rt(Xe[Ge-1],Xe[Ge].substr(1).toLowerCase());break;case 85:this.$=et(Xe[Ge-2],Xe[Ge]);break;case 86:this.$=et(Xe[Ge],le);break;case 87:this.$=et(Xe[Ge],ue);break;case 88:this.$=et(Xe[Ge].toLowerCase(),Pe);break;case 89:this.$=et(Xe[Ge].toLowerCase(),Ve);break;case 90:this.$=re(Xe[Ge],1);break;case 91:this.$=re(Xe[Ge],3);break;case 92:case 96:case 106:case 108:case 110:case 112:case 128:case 138:this.$=[];break;case 93:case 97:case 107:case 109:case 111:case 113:case 115:case 117:case 123:case 129:case 131:case 135:case 137:case 139:Xe[Ge-1].push(Xe[Ge]);break;case 114:case 116:case 122:case 130:case 134:case 136:this.$=[Xe[Ge]];break}},table:[n(o,[2,92],{3:1,4:2}),{1:[3]},n(i,[2,96],{5:3,8:4,9:5,10:6,11:7,12:[1,8],14:[1,9],15:[1,10]}),n(t,[2,110],{6:11,124:12,54:13,19:14,24:15,20:[1,16],25:[1,17]}),n(o,[2,93]),n(o,[2,2]),n(o,[2,3]),n(o,[2,4]),{13:[1,18]},{13:[1,19]},{16:[1,20]},{7:[1,21]},n(i,[2,97]),{7:[2,28],13:e,16:r,18:24,51:23,52:22,114:26,115:a,130:c},n(i,[2,94]),n(i,[2,95]),{13:e,16:r,17:30,18:31,114:26,115:a,130:c},{13:e,16:r,17:32,18:31,114:26,115:a,130:c},n(o,[2,5]),n(o,[2,6]),{13:[1,33]},{1:[2,1]},n(t,[2,111]),{13:e,16:r,18:36,29:34,30:35,114:26,115:a,130:c},n(s,[2,26]),n(d,[2,80]),n(d,[2,81]),n(d,[2,82]),n(d,[2,140]),n(d,[2,141]),n(l,[2,98],{21:37,60:38,61:[1,39]}),n([28,56,61],[2,8]),{26:40,27:41,28:f,56:[2,102]},n(o,[2,7]),{53:[1,43]},n(h,[2,104],{31:44,27:45,28:f}),{13:e,16:r,18:51,32:46,33:47,35:48,36:49,37:50,38:p,43:53,44:y,92:_,113:52,114:26,115:a,116:55,119:b,120:m,121:59,122:61,123:62,130:c,131:g,132:T,133:v,134:A,135:I,136:q},{22:69,27:70,28:f,56:[2,100]},n(l,[2,99]),{13:e,16:r,18:72,62:71,114:26,115:a,130:c},{23:73,55:74,56:O},{56:[2,103]},{13:e,16:r,18:36,29:76,30:35,114:26,115:a,130:c},n(t,[2,27]),n(h,[2,12]),n(h,[2,105]),n(w,[2,13]),n(S,[2,106],{34:77}),n(E,[2,15]),n(E,[2,16]),n(E,[2,17]),n(R,[2,78]),n(R,[2,79]),{13:e,16:r,18:36,29:78,30:35,114:26,115:a,130:c},n(L,[2,108],{39:79}),n(R,[2,83],{117:[1,80],118:[1,81]}),n(R,[2,86]),n(R,[2,87]),n(R,[2,88]),n(R,[2,89]),n(s,[2,20]),n(M,[2,90]),n(M,[2,91]),n(R,[2,142]),n(R,[2,143]),n(M,[2,144]),n(M,[2,145]),n(M,[2,146]),n(M,[2,147]),{23:82,55:74,56:O},{56:[2,101]},n(l,[2,32],{114:26,18:83,13:e,16:r,115:a,130:c}),n(B,[2,114]),n(i,[2,10]),n(X,[2,112],{59:84}),n(X,[2,29]),n(h,[2,11]),n(w,[2,14],{41:85,42:[1,86]}),{45:87,46:[1,88]},{13:e,16:r,18:51,33:90,35:48,36:49,37:50,38:p,40:[1,89],43:53,44:y,92:_,113:52,114:26,115:a,116:55,119:b,120:m,121:59,122:61,123:62,130:c,131:g,132:T,133:v,134:A,135:I,136:q},n(R,[2,84]),{13:e,16:r,18:91,114:26,115:a,130:c},n(i,[2,9]),n(B,[2,115]),{13:e,16:r,18:115,38:J,57:92,58:[1,94],63:93,64:95,68:102,69:98,70:100,72:104,73:105,74:107,77:97,78:99,87:ie,96:U,97:101,99:103,103:106,105:109,106:113,108:110,109:fe,114:26,115:a,125:96,126:me,130:c},n(S,[2,107]),{13:e,16:r,18:51,33:117,35:48,36:49,37:50,38:p,43:53,44:y,92:_,113:52,114:26,115:a,116:55,119:b,120:m,121:59,122:61,123:62,130:c,131:g,132:T,133:v,134:A,135:I,136:q},n(E,[2,22]),n(E,[2,21]),n(E,[2,18]),n(L,[2,109]),n(R,[2,85]),n(he,[2,31]),n(X,[2,113]),n(he,[2,30]),{47:120,48:[1,121],50:119,53:[2,120],65:118},n(te,[2,118],{70:100,68:102,72:104,73:105,74:107,69:122,87:ie,96:U,126:me}),n(te,[2,119]),n(xe,[2,116]),n(Ie,[2,128],{79:123}),n(xe,[2,35]),n(Ie,[2,59]),n(xe,[2,36],{71:124,66:125,67:Fe}),n(pe,[2,61],{100:127,98:128,67:ye}),n(Q,[2,38]),{72:130,74:107,87:ie,126:me},n(P,[2,64],{104:131,101:132,102:D}),{75:[1,134]},n([13,16,56,85,87,95,115,126,128,129,130],[2,58]),n(x,[2,68]),{13:e,16:r,18:115,38:J,105:135,106:113,114:26,115:a,130:c},{75:[2,124]},{75:[2,125]},n(x,[2,66],{107:136,93:[1,138],110:[1,137],111:[1,139]}),n([13,16,38,115,130],[2,70]),n(N,[2,74]),{13:e,16:r,18:115,38:J,97:140,99:103,103:106,105:109,106:113,108:110,109:fe,114:26,115:a,130:c},n(S,[2,19]),{53:[1,141]},{53:[2,121]},{13:e,16:r,18:36,29:142,30:35,114:26,115:a,130:c},n(s,[2,23]),n(xe,[2,117]),n(te,[2,41],{114:26,55:74,127:143,88:144,82:145,81:147,84:148,73:149,18:150,86:152,23:154,94:155,13:e,16:r,44:[1,146],56:O,85:$,87:G,95:V,96:U,115:a,128:k,129:H,130:c}),n(xe,[2,37],{66:159,67:Fe}),n(Q,[2,122]),{68:160,72:104,73:105,74:107,87:ie,96:U,126:me},n(pe,[2,62],{98:161,67:ye}),n(P,[2,134]),{13:e,16:r,18:115,38:J,99:162,103:106,105:109,106:113,108:110,109:fe,114:26,115:a,130:c},n(Q,[2,39]),n(P,[2,65],{101:163,102:D}),n(x,[2,136]),{13:e,16:r,18:115,38:J,103:164,105:109,106:113,108:110,109:fe,114:26,115:a,130:c},{13:e,16:r,18:51,35:166,44:Y,76:165,92:_,113:52,114:26,115:a,116:55,119:b,120:m,121:59,122:61,123:62,130:c,131:g,132:T,133:v,134:A,135:I,136:q},n(x,[2,69]),n(x,[2,67]),n(x,[2,71]),n(x,[2,72]),n(x,[2,73]),{40:[1,168]},n(X,[2,33]),{48:[1,170],49:169},n(Ie,[2,129]),n(Ie,[2,126]),n(Ie,[2,127]),{89:171,92:[1,172]},n(Ie,[2,43],{83:173,80:174,67:se}),n(ce,[2,45]),{13:e,16:r,18:150,23:154,55:74,56:O,84:176,85:$,86:152,87:G,94:155,95:V,114:26,115:a,128:k,129:H,130:c},n(ce,[2,47]),n(ce,[2,48]),n(ce,[2,49]),{75:[1,177]},n(ce,[2,51]),n(ce,[2,56]),{13:[1,178]},n(ce,[2,132]),n(ce,[2,133]),n(Q,[2,123]),n(Q,[2,34]),n(P,[2,135]),n(P,[2,60]),n(x,[2,137]),n(x,[2,63]),n(Q,[2,40]),n(Se,[2,76]),n(Me,[2,138],{112:179}),n(N,[2,75]),{53:[2,25]},{53:[2,24]},{90:[1,180]},{90:[2,53]},n(Ie,[2,44],{80:181,67:se}),n(ce,[2,130]),{13:e,16:r,18:150,23:154,55:74,56:O,73:149,81:182,84:148,85:$,86:152,87:G,94:155,95:V,96:U,114:26,115:a,128:k,129:H,130:c},n(ce,[2,46]),{13:e,16:r,18:51,35:166,44:Y,76:183,92:_,113:52,114:26,115:a,116:55,119:b,120:m,121:59,122:61,123:62,130:c,131:g,132:T,133:v,134:A,135:I,136:q},n(ce,[2,57]),{13:e,16:r,18:51,35:185,46:[1,184],92:_,113:52,114:26,115:a,116:55,119:b,120:m,121:59,122:61,123:62,130:c,131:g,132:T,133:v,134:A,135:I,136:q},{91:186,92:[1,187],93:[1,188]},n(ce,[2,131]),n(ce,[2,42]),n(ce,[2,50]),n(Se,[2,77]),n(Me,[2,139]),{46:[1,189]},{46:[2,54]},{46:[2,55]},n(Ie,[2,52])],defaultActions:{21:[2,1],41:[2,103],70:[2,101],111:[2,124],112:[2,125],119:[2,121],169:[2,25],170:[2,24],172:[2,53],187:[2,54],188:[2,55]},parseError:function(He,Je){if(Je.recoverable)this.trace(He);else{var tt=new Error(He);throw tt.hash=Je,tt}},parse:function(He){var Je=this,tt=[0],wt=[null],at=[],Xe=this.table,xr="",Ge=0,ae=0,_e=2,ve=1,We=at.slice.call(arguments,1),Ye=Object.create(this.lexer),mt={yy:{}};for(var kt in this.yy)Object.prototype.hasOwnProperty.call(this.yy,kt)&&(mt.yy[kt]=this.yy[kt]);Ye.setInput(He,mt.yy),mt.yy.lexer=Ye,mt.yy.parser=this,typeof Ye.yylloc>"u"&&(Ye.yylloc={});var qt=Ye.yylloc;at.push(qt);var ui=Ye.options&&Ye.options.ranges;typeof mt.yy.parseError=="function"?this.parseError=mt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var Kr=function(){var Gr;return Gr=Ye.lex()||ve,typeof Gr!="number"&&(Gr=Je.symbols_[Gr]||Gr),Gr},Ut,sn,yr,vn,_r={},ca,Ir,Kl,da;;){if(sn=tt[tt.length-1],this.defaultActions[sn]?yr=this.defaultActions[sn]:((Ut===null||typeof Ut>"u")&&(Ut=Kr()),yr=Xe[sn]&&Xe[sn][Ut]),typeof yr>"u"||!yr.length||!yr[0]){var Wr="";da=[];for(ca in Xe[sn])this.terminals_[ca]&&ca>_e&&da.push("'"+this.terminals_[ca]+"'");Ye.showPosition?Wr="Parse error on line "+(Ge+1)+`:
`+Ye.showPosition()+`
Expecting `+da.join(", ")+", got '"+(this.terminals_[Ut]||Ut)+"'":Wr="Parse error on line "+(Ge+1)+": Unexpected "+(Ut==ve?"end of input":"'"+(this.terminals_[Ut]||Ut)+"'"),this.parseError(Wr,{text:Ye.match,token:this.terminals_[Ut]||Ut,line:Ye.yylineno,loc:qt,expected:da})}if(yr[0]instanceof Array&&yr.length>1)throw new Error("Parse Error: multiple actions possible at state: "+sn+", token: "+Ut);switch(yr[0]){case 1:tt.push(Ut),wt.push(Ye.yytext),at.push(Ye.yylloc),tt.push(yr[1]),Ut=null,ae=Ye.yyleng,xr=Ye.yytext,Ge=Ye.yylineno,qt=Ye.yylloc;break;case 2:if(Ir=this.productions_[yr[1]][1],_r.$=wt[wt.length-Ir],_r._$={first_line:at[at.length-(Ir||1)].first_line,last_line:at[at.length-1].last_line,first_column:at[at.length-(Ir||1)].first_column,last_column:at[at.length-1].last_column},ui&&(_r._$.range=[at[at.length-(Ir||1)].range[0],at[at.length-1].range[1]]),vn=this.performAction.apply(_r,[xr,ae,Ge,mt.yy,yr[1],wt,at].concat(We)),typeof vn<"u")return vn;Ir&&(tt=tt.slice(0,-1*Ir*2),wt=wt.slice(0,-1*Ir),at=at.slice(0,-1*Ir)),tt.push(this.productions_[yr[1]][0]),wt.push(_r.$),at.push(_r._$),Kl=Xe[tt[tt.length-2]][tt[tt.length-1]],tt.push(Kl);break;case 3:return!0}}return!0}};const oe="http://www.w3.org/1999/02/22-rdf-syntax-ns#",C=oe+"type",F=oe+"first",j=oe+"rest",z=oe+"nil",Z="http://www.w3.org/2001/XMLSchema#",le=Z+"integer",ue=Z+"decimal",Pe=Z+"double",Ve=Z+"boolean",Be="http://www.w3.org/ns/shacl#",Ze="http://www.w3.org/2002/07/owl#",K="http://www.w3.org/2000/01/rdf-schema#",we={[le]:!0,[ue]:!0,[Z+"float"]:!0,[Pe]:!0,[Z+"string"]:!0,[Ve]:!0,[Z+"dateTime"]:!0,[Z+"nonPositiveInteger"]:!0,[Z+"negativeInteger"]:!0,[Z+"long"]:!0,[Z+"int"]:!0,[Z+"short"]:!0,[Z+"byte"]:!0,[Z+"nonNegativeInteger"]:!0,[Z+"unsignedLong"]:!0,[Z+"unsignedShort"]:!0,[Z+"unsignedByte"]:!0,[Z+"positiveInteger"]:!0,[oe+"langString"]:!0};function Ee(ht,He=!1){let Je=0,tt=ht.length;if(He&&tt===0)return Ue.factory.namedNode(z);const wt=head=Ke();return tt===0&&ne(head,Ue.factory.namedNode(j),Ue.factory.namedNode(z)),ht.forEach(at=>{if(at===void 0)throw new Error("b");ne(head,Ue.factory.namedNode(F),at),ne(head,Ue.factory.namedNode(j),head=++Je<tt?Ke():Ue.factory.namedNode(z))}),wt}function $e(ht){return Ue.n3Parser._resolveIRI(ht[0]==="<"?ht.substring(1,ht.length-1):ht)}function Ne(ht){const He=ht.indexOf(":"),Je=ht.substr(0,He),tt=Ue.prefixes[Je];if(!tt)throw new Error("Unknown prefix: "+Je);return $e(tt+ht.substr(He+1))}function et(ht,He){return He&&He.termType!=="NamedNode"&&(He=Ue.factory.namedNode(He)),Ue.factory.literal(ht,He)}function rt(ht,He){return Ue.factory.literal(ht,He)}function Ke(ht){return Ue.factory.blankNode("g_"+lt++)}var lt=0;Ue._resetBlanks=function(){lt=0};function re(ht,He){return Ue.n3Parser._lexer._unescape(ht.substring(He,ht.length-He))}function ne(ht,He,Je){if(!ht.termType||!He.termType||He.value.includes(",")||!Je.termType)throw new Error(`boo ${ht.value} ${He.value} ${Je.value}`);Ue.onQuad(Ue.factory.quad(ht,He,Je))}function De(ht,He){ne(Ue.currentPropertyNode,Ue.factory.namedNode(Be+ht),He)}function qe(ht,He,Je){const tt=Ke();return ne(tt,Ue.factory.namedNode(Be+He),Je),[ht,tt]}function Qe(ht){if(!Ue.extended)throw new Error("Encountered extended SHACLC syntax; but extended parsing is disabled");return ht}var Tt=(function(){var ht={EOF:1,parseError:function(Je,tt){if(this.yy.parser)this.yy.parser.parseError(Je,tt);else throw new Error(Je)},setInput:function(He,Je){return this.yy=Je||this.yy||{},this._input=He,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var He=this._input[0];this.yytext+=He,this.yyleng++,this.offset++,this.match+=He,this.matched+=He;var Je=He.match(/(?:\r\n?|\n).*/g);return Je?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),He},unput:function(He){var Je=He.length,tt=He.split(/(?:\r\n?|\n)/g);this._input=He+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-Je),this.offset-=Je;var wt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),tt.length-1&&(this.yylineno-=tt.length-1);var at=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:tt?(tt.length===wt.length?this.yylloc.first_column:0)+wt[wt.length-tt.length].length-tt[0].length:this.yylloc.first_column-Je},this.options.ranges&&(this.yylloc.range=[at[0],at[0]+this.yyleng-Je]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(He){this.unput(this.match.slice(He))},pastInput:function(){var He=this.matched.substr(0,this.matched.length-this.match.length);return(He.length>20?"...":"")+He.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var He=this.match;return He.length<20&&(He+=this._input.substr(0,20-He.length)),(He.substr(0,20)+(He.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var He=this.pastInput(),Je=new Array(He.length+1).join("-");return He+this.upcomingInput()+`
`+Je+"^"},test_match:function(He,Je){var tt,wt,at;if(this.options.backtrack_lexer&&(at={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(at.yylloc.range=this.yylloc.range.slice(0))),wt=He[0].match(/(?:\r\n?|\n).*/g),wt&&(this.yylineno+=wt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:wt?wt[wt.length-1].length-wt[wt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+He[0].length},this.yytext+=He[0],this.match+=He[0],this.matches=He,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(He[0].length),this.matched+=He[0],tt=this.performAction.call(this,this.yy,this,Je,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),tt)return tt;if(this._backtrack){for(var Xe in at)this[Xe]=at[Xe];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var He,Je,tt,wt;this._more||(this.yytext="",this.match="");for(var at=this._currentRules(),Xe=0;Xe<at.length;Xe++)if(tt=this._input.match(this.rules[at[Xe]]),tt&&(!Je||tt[0].length>Je[0].length)){if(Je=tt,wt=Xe,this.options.backtrack_lexer){if(He=this.test_match(tt,at[Xe]),He!==!1)return He;if(this._backtrack){Je=!1;continue}else return!1}else if(!this.options.flex)break}return Je?(He=this.test_match(Je,at[wt]),He!==!1?He:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var Je=this.next();return Je||this.lex()},begin:function(Je){this.conditionStack.push(Je)},popState:function(){var Je=this.conditionStack.length-1;return Je>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(Je){return Je=this.conditionStack.length-1-Math.abs(Je||0),Je>=0?this.conditionStack[Je]:"INITIAL"},pushState:function(Je){this.begin(Je)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(Je,tt,wt,at){switch(wt){case 0:break;case 1:return 12;case 2:return 14;case 3:return 15;case 4:return 25;case 5:return 20;case 6:return 131;case 7:return 132;case 8:return 85;case 9:return 126;case 10:return 87;case 11:return"PASS";case 12:return"COMMENT";case 13:return 13;case 14:return 16;case 15:return 130;case 16:return 129;case 17:return 128;case 18:return 117;case 19:return 92;case 20:return 119;case 21:return 120;case 22:return"EXPONENT";case 23:return 133;case 24:return 134;case 25:return 135;case 26:return 136;case 27:return 61;case 28:return 90;case 29:return 58;case 30:return 56;case 31:return 38;case 32:return 40;case 33:return 44;case 34:return 46;case 35:return 110;case 36:return 93;case 37:return 111;case 38:return 67;case 39:return 118;case 40:return 53;case 41:return 96;case 42:return 102;case 43:return 75;case 44:return 95;case 45:return 109;case 46:return 28;case 47:return 42;case 48:return 48;case 49:return 115;case 50:return 7;case 51:console.log(tt.yytext);break}},rules:[/^(?:\s+|#[^\n\r]*)/i,/^(?:BASE)/i,/^(?:IMPORTS)/i,/^(?:PREFIX)/i,/^(?:shapeClass)/i,/^(?:shape)/i,/^(?:true)/i,/^(?:false)/i,/^(?:(BlankNode|IRI|Literal|BlankNodeOrIRI|BlankNodeOrLiteral|IRIOrLiteral\b))/i,/^(?:(targetNode|targetObjectsOf|targetSubjectsOf\b))/i,/^(?:(deactivated|severity|message|class|datatype|nodeKind|minExclusive|minInclusive|maxExclusive|maxInclusive|minLength|maxLength|pattern|flags|languageIn|uniqueLang|equals|disjoint|lessThan|lessThanOrEquals|qualifiedValueShape|qualifiedMinCount|qualifiedMaxCount|qualifiedValueShapesDisjoint|closed|ignoredProperties|hasValue|in))/i,/^(?:([ \t\r\n]+))/i,/^(?:(#[\r\n]*))/i,/^(?:(<([^=<>\"\{\}\|\^`\\\u0000-\u0020]|(\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])))*>))/i,/^(?:((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:)(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|:|[0-9]|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(@(([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:))/i,/^(?:(@((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:)(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|:|[0-9]|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(@[a-zA-Z]+(-[a-zA-Z0-9]+)*))/i,/^(?:([+-]?[0-9]+))/i,/^(?:([+-]?[0-9]*\.[0-9]+))/i,/^(?:([+-]?([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.?[0-9]+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"\']))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"\']))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"\'])))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"\'])))*"""))/i,/^(?:->)/i,/^(?:\.\.)/i,/^(?:\})/i,/^(?:\{)/i,/^(?:\()/i,/^(?:\))/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\?)/i,/^(?:\*)/i,/^(?:\+)/i,/^(?:\|)/i,/^(?:\^\^)/i,/^(?:\.)/i,/^(?:!)/i,/^(?:\/)/i,/^(?:=)/i,/^(?:@)/i,/^(?:\^)/i,/^(?:;)/i,/^(?:,)/i,/^(?:%)/i,/^(?:a)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],inclusive:!0}}};return ht})();Ae.lexer=Tt;function Ue(){this.yy={}}return Ue.prototype=Ae,Ae.Parser=Ue,new Ue})();return _4=u,_4}var XN;function Bre(){if(XN)return OT;XN=1;const u=qre().Parser,n=ia;class o{constructor(){}parse(t,{extendedSyntax:e,baseIRI:r}={}){this._parser=new u,this._parser.Parser.factory=n.DataFactory,this._parser.Parser.base=n.DataFactory.namedNode(r||"urn:x-base:default"),this._parser.Parser.extended=e===!0,this._parser.Parser.prefixes={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#",owl:"http://www.w3.org/2002/07/owl#"},this._parser.Parser.currentNodeShape=void 0,this._parser.Parser.currentPropertyNode=void 0,this._parser.Parser.nodeShapeStack=[],this._parser.Parser.tempCurrentNodeShape=void 0,this._parser.Parser.n3Parser=new n.Parser({baseIRI:r||"urn:x-base:default"});const a=[];return this._parser.Parser.onQuad=c=>{a.push(c)},this._parser.parse(t),a.prefixes=this._parser.Parser.prefixes,a}}return OT.Parser=o,OT.parse=function(t,e){return new o().parse(t,e)},OT}var zp={},JN;function $re(){if(JN)return zp;JN=1,Object.defineProperty(zp,"__esModule",{value:!0}),zp.PrefixWrappingIterator=void 0;const u=pt();let n=class extends u.WrappingIterator{constructor(i){super(i==null?void 0:i.then(t=>(this.prefixes=t.prefixes,t)))}read(){if(this.prefixes){for(const i of Object.entries(this.prefixes))this.emit("prefix",...i);delete this.prefixes}return super.read()}};return zp.PrefixWrappingIterator=n,zp}var kN;function Ure(){if(kN)return Hp;kN=1,Object.defineProperty(Hp,"__esModule",{value:!0}),Hp.ActorRdfParseShaclc=void 0;const u=zf(),n=Jf(),o=Dt(),i=Bre(),t=$re();let e=class extends u.ActorRdfParseFixedMediaTypes{constructor(a){super(a)}async runHandle(a,c,s){const d=new t.PrefixWrappingIterator((0,n.stringify)(a.data).then(f=>{var h;return(0,i.parse)(f,{extendedSyntax:c==="text/shaclc-ext",baseIRI:(h=a.metadata)==null?void 0:h.baseIRI})})),l=new o.Readable({objectMode:!0});return d.on("prefix",(...f)=>l.emit("prefix",...f)),{data:l.wrap(d),metadata:{triples:!0}}}};return Hp.ActorRdfParseShaclc=e,Hp}var KN;function Vre(){return KN||(KN=1,(function(u){var n=ho&&ho.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ho&&ho.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ure(),u)})(ho)),ho}var po={},Xp={},Nn={},Pn={},lf={},g4={},Jp={},WN;function YN(){return WN||(WN=1,Object.defineProperty(Jp,"__esModule",{value:!0}),Jp.htmlDecodeTree=void 0,Jp.htmlDecodeTree=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(u=>u.charCodeAt(0)))),Jp}var kp={},ZN;function eP(){return ZN||(ZN=1,Object.defineProperty(kp,"__esModule",{value:!0}),kp.xmlDecodeTree=void 0,kp.xmlDecodeTree=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(u=>u.charCodeAt(0)))),kp}var m4={},tP;function rP(){return tP||(tP=1,(function(u){var n;Object.defineProperty(u,"__esModule",{value:!0}),u.fromCodePoint=void 0,u.replaceCodePoint=i,u.decodeCodePoint=t;const o=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);u.fromCodePoint=(n=String.fromCodePoint)!==null&&n!==void 0?n:function(e){let r="";return e>65535&&(e-=65536,r+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),r+=String.fromCharCode(e),r};function i(e){var r;return e>=55296&&e<=57343||e>1114111?65533:(r=o.get(e))!==null&&r!==void 0?r:e}function t(e){return(0,u.fromCodePoint)(i(e))}})(m4)),m4}var nP;function UX(){return nP||(nP=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.fromCodePoint=u.replaceCodePoint=u.decodeCodePoint=u.xmlDecodeTree=u.htmlDecodeTree=u.EntityDecoder=u.DecodingMode=u.BinTrieFlags=void 0,u.determineBranch=y,u.decodeHTML=m,u.decodeHTMLAttribute=g,u.decodeHTMLStrict=T,u.decodeXML=v;const n=YN(),o=eP(),i=rP();var t;(function(O){O[O.NUM=35]="NUM",O[O.SEMI=59]="SEMI",O[O.EQUALS=61]="EQUALS",O[O.ZERO=48]="ZERO",O[O.NINE=57]="NINE",O[O.LOWER_A=97]="LOWER_A",O[O.LOWER_F=102]="LOWER_F",O[O.LOWER_X=120]="LOWER_X",O[O.LOWER_Z=122]="LOWER_Z",O[O.UPPER_A=65]="UPPER_A",O[O.UPPER_F=70]="UPPER_F",O[O.UPPER_Z=90]="UPPER_Z"})(t||(t={}));const e=32;var r;(function(O){O[O.VALUE_LENGTH=49152]="VALUE_LENGTH",O[O.BRANCH_LENGTH=16256]="BRANCH_LENGTH",O[O.JUMP_TABLE=127]="JUMP_TABLE"})(r||(u.BinTrieFlags=r={}));function a(O){return O>=t.ZERO&&O<=t.NINE}function c(O){return O>=t.UPPER_A&&O<=t.UPPER_F||O>=t.LOWER_A&&O<=t.LOWER_F}function s(O){return O>=t.UPPER_A&&O<=t.UPPER_Z||O>=t.LOWER_A&&O<=t.LOWER_Z||a(O)}function d(O){return O===t.EQUALS||s(O)}var l;(function(O){O[O.EntityStart=0]="EntityStart",O[O.NumericStart=1]="NumericStart",O[O.NumericDecimal=2]="NumericDecimal",O[O.NumericHex=3]="NumericHex",O[O.NamedEntity=4]="NamedEntity"})(l||(l={}));var f;(function(O){O[O.Legacy=0]="Legacy",O[O.Strict=1]="Strict",O[O.Attribute=2]="Attribute"})(f||(u.DecodingMode=f={}));class h{constructor(w,S,E){this.decodeTree=w,this.emitCodePoint=S,this.errors=E,this.state=l.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=f.Strict}startEntity(w){this.decodeMode=w,this.state=l.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(w,S){switch(this.state){case l.EntityStart:return w.charCodeAt(S)===t.NUM?(this.state=l.NumericStart,this.consumed+=1,this.stateNumericStart(w,S+1)):(this.state=l.NamedEntity,this.stateNamedEntity(w,S));case l.NumericStart:return this.stateNumericStart(w,S);case l.NumericDecimal:return this.stateNumericDecimal(w,S);case l.NumericHex:return this.stateNumericHex(w,S);case l.NamedEntity:return this.stateNamedEntity(w,S)}}stateNumericStart(w,S){return S>=w.length?-1:(w.charCodeAt(S)|e)===t.LOWER_X?(this.state=l.NumericHex,this.consumed+=1,this.stateNumericHex(w,S+1)):(this.state=l.NumericDecimal,this.stateNumericDecimal(w,S))}addToNumericResult(w,S,E,R){if(S!==E){const L=E-S;this.result=this.result*Math.pow(R,L)+Number.parseInt(w.substr(S,L),R),this.consumed+=L}}stateNumericHex(w,S){const E=S;for(;S<w.length;){const R=w.charCodeAt(S);if(a(R)||c(R))S+=1;else return this.addToNumericResult(w,E,S,16),this.emitNumericEntity(R,3)}return this.addToNumericResult(w,E,S,16),-1}stateNumericDecimal(w,S){const E=S;for(;S<w.length;){const R=w.charCodeAt(S);if(a(R))S+=1;else return this.addToNumericResult(w,E,S,10),this.emitNumericEntity(R,2)}return this.addToNumericResult(w,E,S,10),-1}emitNumericEntity(w,S){var E;if(this.consumed<=S)return(E=this.errors)===null||E===void 0||E.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(w===t.SEMI)this.consumed+=1;else if(this.decodeMode===f.Strict)return 0;return this.emitCodePoint((0,i.replaceCodePoint)(this.result),this.consumed),this.errors&&(w!==t.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(w,S){const{decodeTree:E}=this;let R=E[this.treeIndex],L=(R&r.VALUE_LENGTH)>>14;for(;S<w.length;S++,this.excess++){const M=w.charCodeAt(S);if(this.treeIndex=y(E,R,this.treeIndex+Math.max(1,L),M),this.treeIndex<0)return this.result===0||this.decodeMode===f.Attribute&&(L===0||d(M))?0:this.emitNotTerminatedNamedEntity();if(R=E[this.treeIndex],L=(R&r.VALUE_LENGTH)>>14,L!==0){if(M===t.SEMI)return this.emitNamedEntityData(this.treeIndex,L,this.consumed+this.excess);this.decodeMode!==f.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var w;const{result:S,decodeTree:E}=this,R=(E[S]&r.VALUE_LENGTH)>>14;return this.emitNamedEntityData(S,R,this.consumed),(w=this.errors)===null||w===void 0||w.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(w,S,E){const{decodeTree:R}=this;return this.emitCodePoint(S===1?R[w]&~r.VALUE_LENGTH:R[w+1],E),S===3&&this.emitCodePoint(R[w+2],E),E}end(){var w;switch(this.state){case l.NamedEntity:return this.result!==0&&(this.decodeMode!==f.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case l.NumericDecimal:return this.emitNumericEntity(0,2);case l.NumericHex:return this.emitNumericEntity(0,3);case l.NumericStart:return(w=this.errors)===null||w===void 0||w.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case l.EntityStart:return 0}}}u.EntityDecoder=h;function p(O){let w="";const S=new h(O,E=>w+=(0,i.fromCodePoint)(E));return function(R,L){let M=0,B=0;for(;(B=R.indexOf("&",B))>=0;){w+=R.slice(M,B),S.startEntity(L);const J=S.write(R,B+1);if(J<0){M=B+S.end();break}M=B+J,B=J===0?M+1:M}const X=w+R.slice(M);return w="",X}}function y(O,w,S,E){const R=(w&r.BRANCH_LENGTH)>>7,L=w&r.JUMP_TABLE;if(R===0)return L!==0&&E===L?S:-1;if(L){const X=E-L;return X<0||X>=R?-1:O[S+X]-1}let M=S,B=M+R-1;for(;M<=B;){const X=M+B>>>1,J=O[X];if(J<E)M=X+1;else if(J>E)B=X-1;else return O[X+R]}return-1}const _=p(n.htmlDecodeTree),b=p(o.xmlDecodeTree);function m(O,w=f.Legacy){return _(O,w)}function g(O){return _(O,f.Attribute)}function T(O){return _(O,f.Strict)}function v(O){return b(O,f.Strict)}var A=YN();Object.defineProperty(u,"htmlDecodeTree",{enumerable:!0,get:function(){return A.htmlDecodeTree}});var I=eP();Object.defineProperty(u,"xmlDecodeTree",{enumerable:!0,get:function(){return I.xmlDecodeTree}});var q=rP();Object.defineProperty(u,"decodeCodePoint",{enumerable:!0,get:function(){return q.decodeCodePoint}}),Object.defineProperty(u,"replaceCodePoint",{enumerable:!0,get:function(){return q.replaceCodePoint}}),Object.defineProperty(u,"fromCodePoint",{enumerable:!0,get:function(){return q.fromCodePoint}})})(g4)),g4}var iP;function VX(){if(iP)return lf;iP=1,Object.defineProperty(lf,"__esModule",{value:!0}),lf.QuoteType=void 0;const u=UX();var n;(function(s){s[s.Tab=9]="Tab",s[s.NewLine=10]="NewLine",s[s.FormFeed=12]="FormFeed",s[s.CarriageReturn=13]="CarriageReturn",s[s.Space=32]="Space",s[s.ExclamationMark=33]="ExclamationMark",s[s.Number=35]="Number",s[s.Amp=38]="Amp",s[s.SingleQuote=39]="SingleQuote",s[s.DoubleQuote=34]="DoubleQuote",s[s.Dash=45]="Dash",s[s.Slash=47]="Slash",s[s.Zero=48]="Zero",s[s.Nine=57]="Nine",s[s.Semi=59]="Semi",s[s.Lt=60]="Lt",s[s.Eq=61]="Eq",s[s.Gt=62]="Gt",s[s.Questionmark=63]="Questionmark",s[s.UpperA=65]="UpperA",s[s.LowerA=97]="LowerA",s[s.UpperF=70]="UpperF",s[s.LowerF=102]="LowerF",s[s.UpperZ=90]="UpperZ",s[s.LowerZ=122]="LowerZ",s[s.LowerX=120]="LowerX",s[s.OpeningSquareBracket=91]="OpeningSquareBracket"})(n||(n={}));var o;(function(s){s[s.Text=1]="Text",s[s.BeforeTagName=2]="BeforeTagName",s[s.InTagName=3]="InTagName",s[s.InSelfClosingTag=4]="InSelfClosingTag",s[s.BeforeClosingTagName=5]="BeforeClosingTagName",s[s.InClosingTagName=6]="InClosingTagName",s[s.AfterClosingTagName=7]="AfterClosingTagName",s[s.BeforeAttributeName=8]="BeforeAttributeName",s[s.InAttributeName=9]="InAttributeName",s[s.AfterAttributeName=10]="AfterAttributeName",s[s.BeforeAttributeValue=11]="BeforeAttributeValue",s[s.InAttributeValueDq=12]="InAttributeValueDq",s[s.InAttributeValueSq=13]="InAttributeValueSq",s[s.InAttributeValueNq=14]="InAttributeValueNq",s[s.BeforeDeclaration=15]="BeforeDeclaration",s[s.InDeclaration=16]="InDeclaration",s[s.InProcessingInstruction=17]="InProcessingInstruction",s[s.BeforeComment=18]="BeforeComment",s[s.CDATASequence=19]="CDATASequence",s[s.InSpecialComment=20]="InSpecialComment",s[s.InCommentLike=21]="InCommentLike",s[s.BeforeSpecialS=22]="BeforeSpecialS",s[s.BeforeSpecialT=23]="BeforeSpecialT",s[s.SpecialStartSequence=24]="SpecialStartSequence",s[s.InSpecialTag=25]="InSpecialTag",s[s.InEntity=26]="InEntity"})(o||(o={}));function i(s){return s===n.Space||s===n.NewLine||s===n.Tab||s===n.FormFeed||s===n.CarriageReturn}function t(s){return s===n.Slash||s===n.Gt||i(s)}function e(s){return s>=n.LowerA&&s<=n.LowerZ||s>=n.UpperA&&s<=n.UpperZ}var r;(function(s){s[s.NoValue=0]="NoValue",s[s.Unquoted=1]="Unquoted",s[s.Single=2]="Single",s[s.Double=3]="Double"})(r||(lf.QuoteType=r={}));const a={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97]),XmpEnd:new Uint8Array([60,47,120,109,112])};class c{constructor({xmlMode:d=!1,decodeEntities:l=!0},f){this.cbs=f,this.state=o.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=o.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=d,this.decodeEntities=l,this.entityDecoder=new u.EntityDecoder(d?u.xmlDecodeTree:u.htmlDecodeTree,(h,p)=>this.emitCodePoint(h,p))}reset(){this.state=o.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=o.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(d){this.offset+=this.buffer.length,this.buffer=d,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}stateText(d){d===n.Lt||!this.decodeEntities&&this.fastForwardTo(n.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=o.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&d===n.Amp&&this.startEntity()}stateSpecialStartSequence(d){const l=this.sequenceIndex===this.currentSequence.length;if(!(l?t(d):(d|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!l){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=o.InTagName,this.stateInTagName(d)}stateInSpecialTag(d){if(this.sequenceIndex===this.currentSequence.length){if(d===n.Gt||i(d)){const l=this.index-this.currentSequence.length;if(this.sectionStart<l){const f=this.index;this.index=l,this.cbs.ontext(this.sectionStart,l),this.index=f}this.isSpecial=!1,this.sectionStart=l+2,this.stateInClosingTagName(d);return}this.sequenceIndex=0}(d|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===a.TitleEnd?this.decodeEntities&&d===n.Amp&&this.startEntity():this.fastForwardTo(n.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(d===n.Lt)}stateCDATASequence(d){d===a.Cdata[this.sequenceIndex]?++this.sequenceIndex===a.Cdata.length&&(this.state=o.InCommentLike,this.currentSequence=a.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=o.InDeclaration,this.stateInDeclaration(d))}fastForwardTo(d){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===d)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(d){d===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===a.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=o.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):d!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(d){return this.xmlMode?!t(d):e(d)}startSpecial(d,l){this.isSpecial=!0,this.currentSequence=d,this.sequenceIndex=l,this.state=o.SpecialStartSequence}stateBeforeTagName(d){if(d===n.ExclamationMark)this.state=o.BeforeDeclaration,this.sectionStart=this.index+1;else if(d===n.Questionmark)this.state=o.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(d)){const l=d|32;this.sectionStart=this.index,this.xmlMode?this.state=o.InTagName:l===a.ScriptEnd[2]?this.state=o.BeforeSpecialS:l===a.TitleEnd[2]||l===a.XmpEnd[2]?this.state=o.BeforeSpecialT:this.state=o.InTagName}else d===n.Slash?this.state=o.BeforeClosingTagName:(this.state=o.Text,this.stateText(d))}stateInTagName(d){t(d)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=o.BeforeAttributeName,this.stateBeforeAttributeName(d))}stateBeforeClosingTagName(d){i(d)||(d===n.Gt?this.state=o.Text:(this.state=this.isTagStartChar(d)?o.InClosingTagName:o.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(d){(d===n.Gt||i(d))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=o.AfterClosingTagName,this.stateAfterClosingTagName(d))}stateAfterClosingTagName(d){(d===n.Gt||this.fastForwardTo(n.Gt))&&(this.state=o.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(d){d===n.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=o.InSpecialTag,this.sequenceIndex=0):this.state=o.Text,this.sectionStart=this.index+1):d===n.Slash?this.state=o.InSelfClosingTag:i(d)||(this.state=o.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(d){d===n.Gt?(this.cbs.onselfclosingtag(this.index),this.state=o.Text,this.sectionStart=this.index+1,this.isSpecial=!1):i(d)||(this.state=o.BeforeAttributeName,this.stateBeforeAttributeName(d))}stateInAttributeName(d){(d===n.Eq||t(d))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=o.AfterAttributeName,this.stateAfterAttributeName(d))}stateAfterAttributeName(d){d===n.Eq?this.state=o.BeforeAttributeValue:d===n.Slash||d===n.Gt?(this.cbs.onattribend(r.NoValue,this.sectionStart),this.sectionStart=-1,this.state=o.BeforeAttributeName,this.stateBeforeAttributeName(d)):i(d)||(this.cbs.onattribend(r.NoValue,this.sectionStart),this.state=o.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(d){d===n.DoubleQuote?(this.state=o.InAttributeValueDq,this.sectionStart=this.index+1):d===n.SingleQuote?(this.state=o.InAttributeValueSq,this.sectionStart=this.index+1):i(d)||(this.sectionStart=this.index,this.state=o.InAttributeValueNq,this.stateInAttributeValueNoQuotes(d))}handleInAttributeValue(d,l){d===l||!this.decodeEntities&&this.fastForwardTo(l)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(l===n.DoubleQuote?r.Double:r.Single,this.index+1),this.state=o.BeforeAttributeName):this.decodeEntities&&d===n.Amp&&this.startEntity()}stateInAttributeValueDoubleQuotes(d){this.handleInAttributeValue(d,n.DoubleQuote)}stateInAttributeValueSingleQuotes(d){this.handleInAttributeValue(d,n.SingleQuote)}stateInAttributeValueNoQuotes(d){i(d)||d===n.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(r.Unquoted,this.index),this.state=o.BeforeAttributeName,this.stateBeforeAttributeName(d)):this.decodeEntities&&d===n.Amp&&this.startEntity()}stateBeforeDeclaration(d){d===n.OpeningSquareBracket?(this.state=o.CDATASequence,this.sequenceIndex=0):this.state=d===n.Dash?o.BeforeComment:o.InDeclaration}stateInDeclaration(d){(d===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=o.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(d){(d===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=o.Text,this.sectionStart=this.index+1)}stateBeforeComment(d){d===n.Dash?(this.state=o.InCommentLike,this.currentSequence=a.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=o.InDeclaration}stateInSpecialComment(d){(d===n.Gt||this.fastForwardTo(n.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=o.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(d){const l=d|32;l===a.ScriptEnd[3]?this.startSpecial(a.ScriptEnd,4):l===a.StyleEnd[3]?this.startSpecial(a.StyleEnd,4):(this.state=o.InTagName,this.stateInTagName(d))}stateBeforeSpecialT(d){switch(d|32){case a.TitleEnd[3]:{this.startSpecial(a.TitleEnd,4);break}case a.TextareaEnd[3]:{this.startSpecial(a.TextareaEnd,4);break}case a.XmpEnd[3]:{this.startSpecial(a.XmpEnd,4);break}default:this.state=o.InTagName,this.stateInTagName(d)}}startEntity(){this.baseState=this.state,this.state=o.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?u.DecodingMode.Strict:this.baseState===o.Text||this.baseState===o.InSpecialTag?u.DecodingMode.Legacy:u.DecodingMode.Attribute)}stateInEntity(){const d=this.entityDecoder.write(this.buffer,this.index-this.offset);d>=0?(this.state=this.baseState,d===0&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===o.Text||this.state===o.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===o.InAttributeValueDq||this.state===o.InAttributeValueSq||this.state===o.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const d=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case o.Text:{this.stateText(d);break}case o.SpecialStartSequence:{this.stateSpecialStartSequence(d);break}case o.InSpecialTag:{this.stateInSpecialTag(d);break}case o.CDATASequence:{this.stateCDATASequence(d);break}case o.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(d);break}case o.InAttributeName:{this.stateInAttributeName(d);break}case o.InCommentLike:{this.stateInCommentLike(d);break}case o.InSpecialComment:{this.stateInSpecialComment(d);break}case o.BeforeAttributeName:{this.stateBeforeAttributeName(d);break}case o.InTagName:{this.stateInTagName(d);break}case o.InClosingTagName:{this.stateInClosingTagName(d);break}case o.BeforeTagName:{this.stateBeforeTagName(d);break}case o.AfterAttributeName:{this.stateAfterAttributeName(d);break}case o.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(d);break}case o.BeforeAttributeValue:{this.stateBeforeAttributeValue(d);break}case o.BeforeClosingTagName:{this.stateBeforeClosingTagName(d);break}case o.AfterClosingTagName:{this.stateAfterClosingTagName(d);break}case o.BeforeSpecialS:{this.stateBeforeSpecialS(d);break}case o.BeforeSpecialT:{this.stateBeforeSpecialT(d);break}case o.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(d);break}case o.InSelfClosingTag:{this.stateInSelfClosingTag(d);break}case o.InDeclaration:{this.stateInDeclaration(d);break}case o.BeforeDeclaration:{this.stateBeforeDeclaration(d);break}case o.BeforeComment:{this.stateBeforeComment(d);break}case o.InProcessingInstruction:{this.stateInProcessingInstruction(d);break}case o.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()}finish(){this.state===o.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const d=this.buffer.length+this.offset;this.sectionStart>=d||(this.state===o.InCommentLike?this.currentSequence===a.CdataEnd?this.cbs.oncdata(this.sectionStart,d,0):this.cbs.oncomment(this.sectionStart,d,0):this.state===o.InTagName||this.state===o.BeforeAttributeName||this.state===o.BeforeAttributeValue||this.state===o.AfterAttributeName||this.state===o.InAttributeName||this.state===o.InAttributeValueSq||this.state===o.InAttributeValueDq||this.state===o.InAttributeValueNq||this.state===o.InClosingTagName||this.cbs.ontext(this.sectionStart,d))}emitCodePoint(d,l){this.baseState!==o.Text&&this.baseState!==o.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+l,this.index=this.sectionStart-1,this.cbs.onattribentity(d)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+l,this.index=this.sectionStart-1,this.cbs.ontextentity(d,this.sectionStart))}}return lf.default=c,lf}var aP;function uP(){if(aP)return Pn;aP=1;var u=Pn&&Pn.__createBinding||(Object.create?(function(_,b,m,g){g===void 0&&(g=m);var T=Object.getOwnPropertyDescriptor(b,m);(!T||("get"in T?!b.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return b[m]}}),Object.defineProperty(_,g,T)}):(function(_,b,m,g){g===void 0&&(g=m),_[g]=b[m]})),n=Pn&&Pn.__setModuleDefault||(Object.create?(function(_,b){Object.defineProperty(_,"default",{enumerable:!0,value:b})}):function(_,b){_.default=b}),o=Pn&&Pn.__importStar||(function(){var _=function(b){return _=Object.getOwnPropertyNames||function(m){var g=[];for(var T in m)Object.prototype.hasOwnProperty.call(m,T)&&(g[g.length]=T);return g},_(b)};return function(b){if(b&&b.__esModule)return b;var m={};if(b!=null)for(var g=_(b),T=0;T<g.length;T++)g[T]!=="default"&&u(m,b,g[T]);return n(m,b),m}})();Object.defineProperty(Pn,"__esModule",{value:!0}),Pn.Parser=void 0;const i=o(VX()),t=UX(),e=new Set(["input","option","optgroup","select","button","datalist","textarea"]),r=new Set(["p"]),a=new Set(["thead","tbody"]),c=new Set(["dd","dt"]),s=new Set(["rt","rp"]),d=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",r],["h1",r],["h2",r],["h3",r],["h4",r],["h5",r],["h6",r],["select",e],["input",e],["output",e],["button",e],["datalist",e],["textarea",e],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",c],["dt",c],["address",r],["article",r],["aside",r],["blockquote",r],["details",r],["div",r],["dl",r],["fieldset",r],["figcaption",r],["figure",r],["footer",r],["form",r],["header",r],["hr",r],["main",r],["nav",r],["ol",r],["pre",r],["section",r],["table",r],["ul",r],["rt",s],["rp",s],["tbody",a],["tfoot",a]]),l=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),f=new Set(["math","svg"]),h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),p=/\s|\//;class y{constructor(b,m={}){var g,T,v,A,I,q;this.options=m,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=b??{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=(g=m.lowerCaseTags)!==null&&g!==void 0?g:this.htmlMode,this.lowerCaseAttributeNames=(T=m.lowerCaseAttributeNames)!==null&&T!==void 0?T:this.htmlMode,this.recognizeSelfClosing=(v=m.recognizeSelfClosing)!==null&&v!==void 0?v:!this.htmlMode,this.tokenizer=new((A=m.Tokenizer)!==null&&A!==void 0?A:i.default)(this.options,this),this.foreignContext=[!this.htmlMode],(q=(I=this.cbs).onparserinit)===null||q===void 0||q.call(I,this)}ontext(b,m){var g,T;const v=this.getSlice(b,m);this.endIndex=m-1,(T=(g=this.cbs).ontext)===null||T===void 0||T.call(g,v),this.startIndex=m}ontextentity(b,m){var g,T;this.endIndex=m-1,(T=(g=this.cbs).ontext)===null||T===void 0||T.call(g,(0,t.fromCodePoint)(b)),this.startIndex=m}isVoidElement(b){return this.htmlMode&&l.has(b)}onopentagname(b,m){this.endIndex=m;let g=this.getSlice(b,m);this.lowerCaseTagNames&&(g=g.toLowerCase()),this.emitOpenTag(g)}emitOpenTag(b){var m,g,T,v;this.openTagStart=this.startIndex,this.tagname=b;const A=this.htmlMode&&d.get(b);if(A)for(;this.stack.length>0&&A.has(this.stack[0]);){const I=this.stack.shift();(g=(m=this.cbs).onclosetag)===null||g===void 0||g.call(m,I,!0)}this.isVoidElement(b)||(this.stack.unshift(b),this.htmlMode&&(f.has(b)?this.foreignContext.unshift(!0):h.has(b)&&this.foreignContext.unshift(!1))),(v=(T=this.cbs).onopentagname)===null||v===void 0||v.call(T,b),this.cbs.onopentag&&(this.attribs={})}endOpenTag(b){var m,g;this.startIndex=this.openTagStart,this.attribs&&((g=(m=this.cbs).onopentag)===null||g===void 0||g.call(m,this.tagname,this.attribs,b),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(b){this.endIndex=b,this.endOpenTag(!1),this.startIndex=b+1}onclosetag(b,m){var g,T,v,A,I,q,O,w;this.endIndex=m;let S=this.getSlice(b,m);if(this.lowerCaseTagNames&&(S=S.toLowerCase()),this.htmlMode&&(f.has(S)||h.has(S))&&this.foreignContext.shift(),this.isVoidElement(S))this.htmlMode&&S==="br"&&((A=(v=this.cbs).onopentagname)===null||A===void 0||A.call(v,"br"),(q=(I=this.cbs).onopentag)===null||q===void 0||q.call(I,"br",{},!0),(w=(O=this.cbs).onclosetag)===null||w===void 0||w.call(O,"br",!1));else{const E=this.stack.indexOf(S);if(E!==-1)for(let R=0;R<=E;R++){const L=this.stack.shift();(T=(g=this.cbs).onclosetag)===null||T===void 0||T.call(g,L,R!==E)}else this.htmlMode&&S==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=m+1}onselfclosingtag(b){this.endIndex=b,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=b+1):this.onopentagend(b)}closeCurrentTag(b){var m,g;const T=this.tagname;this.endOpenTag(b),this.stack[0]===T&&((g=(m=this.cbs).onclosetag)===null||g===void 0||g.call(m,T,!b),this.stack.shift())}onattribname(b,m){this.startIndex=b;const g=this.getSlice(b,m);this.attribname=this.lowerCaseAttributeNames?g.toLowerCase():g}onattribdata(b,m){this.attribvalue+=this.getSlice(b,m)}onattribentity(b){this.attribvalue+=(0,t.fromCodePoint)(b)}onattribend(b,m){var g,T;this.endIndex=m,(T=(g=this.cbs).onattribute)===null||T===void 0||T.call(g,this.attribname,this.attribvalue,b===i.QuoteType.Double?'"':b===i.QuoteType.Single?"'":b===i.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(b){const m=b.search(p);let g=m<0?b:b.substr(0,m);return this.lowerCaseTagNames&&(g=g.toLowerCase()),g}ondeclaration(b,m){this.endIndex=m;const g=this.getSlice(b,m);if(this.cbs.onprocessinginstruction){const T=this.getInstructionName(g);this.cbs.onprocessinginstruction(`!${T}`,`!${g}`)}this.startIndex=m+1}onprocessinginstruction(b,m){this.endIndex=m;const g=this.getSlice(b,m);if(this.cbs.onprocessinginstruction){const T=this.getInstructionName(g);this.cbs.onprocessinginstruction(`?${T}`,`?${g}`)}this.startIndex=m+1}oncomment(b,m,g){var T,v,A,I;this.endIndex=m,(v=(T=this.cbs).oncomment)===null||v===void 0||v.call(T,this.getSlice(b,m-g)),(I=(A=this.cbs).oncommentend)===null||I===void 0||I.call(A),this.startIndex=m+1}oncdata(b,m,g){var T,v,A,I,q,O,w,S,E,R;this.endIndex=m;const L=this.getSlice(b,m-g);!this.htmlMode||this.options.recognizeCDATA?((v=(T=this.cbs).oncdatastart)===null||v===void 0||v.call(T),(I=(A=this.cbs).ontext)===null||I===void 0||I.call(A,L),(O=(q=this.cbs).oncdataend)===null||O===void 0||O.call(q)):((S=(w=this.cbs).oncomment)===null||S===void 0||S.call(w,`[CDATA[${L}]]`),(R=(E=this.cbs).oncommentend)===null||R===void 0||R.call(E)),this.startIndex=m+1}onend(){var b,m;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let g=0;g<this.stack.length;g++)this.cbs.onclosetag(this.stack[g],!0)}(m=(b=this.cbs).onend)===null||m===void 0||m.call(b)}reset(){var b,m,g,T;(m=(b=this.cbs).onreset)===null||m===void 0||m.call(b),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(T=(g=this.cbs).onparserinit)===null||T===void 0||T.call(g,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(b){this.reset(),this.end(b)}getSlice(b,m){for(;b-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let g=this.buffers[0].slice(b-this.bufferOffset,m-this.bufferOffset);for(;m-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),g+=this.buffers[0].slice(0,m-this.bufferOffset);return g}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(b){var m,g;if(this.ended){(g=(m=this.cbs).onerror)===null||g===void 0||g.call(m,new Error(".write() after done!"));return}this.buffers.push(b),this.tokenizer.running&&(this.tokenizer.write(b),this.writeIndex++)}end(b){var m,g;if(this.ended){(g=(m=this.cbs).onerror)===null||g===void 0||g.call(m,new Error(".end() after done!"));return}b&&this.write(b),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(b){this.write(b)}done(b){this.end(b)}}return Pn.Parser=y,Pn}var oP;function Qre(){return oP||(oP=1,(function(u){var n=Nn&&Nn.__createBinding||(Object.create?(function(m,g,T,v){v===void 0&&(v=T);var A=Object.getOwnPropertyDescriptor(g,T);(!A||("get"in A?!g.__esModule:A.writable||A.configurable))&&(A={enumerable:!0,get:function(){return g[T]}}),Object.defineProperty(m,v,A)}):(function(m,g,T,v){v===void 0&&(v=T),m[v]=g[T]})),o=Nn&&Nn.__setModuleDefault||(Object.create?(function(m,g){Object.defineProperty(m,"default",{enumerable:!0,value:g})}):function(m,g){m.default=g}),i=Nn&&Nn.__importStar||(function(){var m=function(g){return m=Object.getOwnPropertyNames||function(T){var v=[];for(var A in T)Object.prototype.hasOwnProperty.call(T,A)&&(v[v.length]=A);return v},m(g)};return function(g){if(g&&g.__esModule)return g;var T={};if(g!=null)for(var v=m(g),A=0;A<v.length;A++)v[A]!=="default"&&n(T,g,v[A]);return o(T,g),T}})(),t=Nn&&Nn.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(u,"__esModule",{value:!0}),u.DomUtils=u.getFeed=u.ElementType=u.QuoteType=u.Tokenizer=u.DefaultHandler=u.DomHandler=u.Parser=void 0,u.parseDocument=s,u.parseDOM=d,u.createDocumentStream=l,u.createDomStream=f,u.parseFeed=b;const e=uP();var r=uP();Object.defineProperty(u,"Parser",{enumerable:!0,get:function(){return r.Parser}});const a=bn();var c=bn();Object.defineProperty(u,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(u,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}});function s(m,g){const T=new a.DomHandler(void 0,g);return new e.Parser(T,g).end(m),T.root}function d(m,g){return s(m,g).children}function l(m,g,T){const v=new a.DomHandler(A=>m(A,v.root),g,T);return new e.Parser(v,g)}function f(m,g,T){const v=new a.DomHandler(m,g,T);return new e.Parser(v,g)}var h=VX();Object.defineProperty(u,"Tokenizer",{enumerable:!0,get:function(){return t(h).default}}),Object.defineProperty(u,"QuoteType",{enumerable:!0,get:function(){return h.QuoteType}}),u.ElementType=i(Jl());const p=xi();var y=xi();Object.defineProperty(u,"getFeed",{enumerable:!0,get:function(){return y.getFeed}});const _={xmlMode:!0};function b(m,g=_){return(0,p.getFeed)(d(m,g))}u.DomUtils=i(xi())})(Nn)),Nn}var sP;function Hre(){if(sP)return Xp;sP=1,Object.defineProperty(Xp,"__esModule",{value:!0}),Xp.ActorRdfParseHtml=void 0;const u=zf(),n=Qre(),o=Dt();class i extends u.ActorRdfParseFixedMediaTypes{constructor(e){super(e)}async runHandle(e,r,a){var p;const c=new o.Readable({objectMode:!0});c._read=()=>{};let s=0,d=1;function l(y){c.emit("error",y)}function f(){--d===0&&c.push(null)}const h={baseIRI:((p=e.metadata)==null?void 0:p.baseIRI)??"",context:a,emit:y=>{s--,c.push(y)},end:f,error:l,headers:e.headers};try{const y=await Promise.all(this.busRdfParseHtml.publish(h));d+=y.length;const _=[];for(const g of y){const{htmlParseListener:T}=await g.actor.run(h,void 0);_.push(T)}const b=new n.Parser({onclosetag(){try{for(const g of _)g.onTagClose()}catch(g){l(g)}},onend(){try{for(const g of _)g.onEnd()}catch(g){l(g)}f()},onopentag(g,T){try{for(const v of _)v.onTagOpen(g,T)}catch(v){l(v)}},ontext(g){try{for(const T of _)T.onText(g)}catch(T){l(T)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:!1}),m=c._read=g=>{for(s=Math.max(g,s);s>0;){const T=e.data.read();if(T===null){e.data.once("readable",()=>m(0));return}b.write(T.toString())}};e.data.on("error",l).on("end",()=>b.end())}catch(y){setTimeout(()=>{c.emit("error",y)})}return{data:c}}}return Xp.ActorRdfParseHtml=i,Xp}var cP;function Gre(){return cP||(cP=1,(function(u){var n=po&&po.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=po&&po.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Hre(),u)})(po)),po}var bo={},Kp={},yo={},Wp={},dP;function zre(){if(dP)return Wp;dP=1,Object.defineProperty(Wp,"__esModule",{value:!0}),Wp.ActorRdfParseHtml=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i)}};return Wp.ActorRdfParseHtml=n,Wp}var lP;function GO(){return lP||(lP=1,(function(u){var n=yo&&yo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=yo&&yo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(zre(),u)})(yo)),yo}var _o={},v4={},fP;function Xre(){return fP||(fP=1,Object.defineProperty(v4,"__esModule",{value:!0})),v4}var Yp={},hP;function QX(){if(hP)return Yp;hP=1,Object.defineProperty(Yp,"__esModule",{value:!0}),Yp.ItemPropertyHandlerContent=void 0;let u=class{canHandle(o,i){return"content"in i}getObject(o,i,t){return i.createLiteral(o.content,t)}};return Yp.ItemPropertyHandlerContent=u,Yp}var Zp={},e1={},pP;function Vw(){if(pP)return e1;pP=1,Object.defineProperty(e1,"__esModule",{value:!0}),e1.Util=void 0;const u=hr(),n=cr();class o{constructor(t,e){this.dataFactory=t||new u.DataFactory,this.baseIRI=e||""}static isValidIri(t){return o.IRI_REGEX.test(t)}createVocabIris(t,e,r){return t.split(/\s+/u).filter(a=>!!a).map(a=>{if(!o.isValidIri(a)){if(!r)return;a=`${e.vocab||`${this.baseIRI}#`}${a}`}return this.dataFactory.namedNode(a)}).filter(a=>!!a)}getVocabularyExpansionType(t,e,r){const a=t.split(/\s+/u);if(a.includes("subPropertyOf")||a.includes("equivalentProperty"))return[this.dataFactory.namedNode(`${o.RDF}type`)];if(e.vocab&&e.vocab in r&&r[e.vocab].properties){let c=[];for(const[s,d]of Object.entries(r[e.vocab].properties))a.includes(s)&&(c=[...Object.values(d).map(l=>this.dataFactory.namedNode(l))]);return c}return[]}createSubject(t){if(!o.isValidIri(t))try{t=(0,n.resolve)(t,this.baseIRI)}catch{return}return this.dataFactory.namedNode(t)}createLiteral(t,e){return this.dataFactory.literal(t,e.language)}deriveVocab(t,e){let r;for(const a in e)if(t.startsWith(a)){r=a,r.endsWith("/")||(r+="#");break}if(!r){const a=t.indexOf("#");a>0?r=t.slice(0,a+1):r=(0,n.resolve)(".",t)}return r}}return e1.Util=o,o.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",o.XSD="http://www.w3.org/2001/XMLSchema#",o.RDFA="http://www.w3.org/ns/rdfa#",o.IRI_REGEX=/^([A-Za-z][\d+-.A-Za-z]*|_):[^ "<>[\\\]`{|}]*$/u,e1}var bP;function HX(){if(bP)return Zp;bP=1,Object.defineProperty(Zp,"__esModule",{value:!0}),Zp.ItemPropertyHandlerNumber=void 0;const u=Vw();let n=class{constructor(i,t){this.tagName=i,this.attributeName=t}canHandle(i,t){return this.tagName===i&&this.attributeName in t}getObject(i,t,e){const r=i[this.attributeName];let a;return!Number.isNaN(Number.parseInt(r,10))&&!r.includes(".")?a=`${u.Util.XSD}integer`:Number.isNaN(Number.parseFloat(r))||(a=`${u.Util.XSD}double`),t.dataFactory.literal(r,a&&t.dataFactory.namedNode(a))}};return Zp.ItemPropertyHandlerNumber=n,Zp}var t1={},yP;function zX(){if(yP)return t1;yP=1,Object.defineProperty(t1,"__esModule",{value:!0}),t1.ItemPropertyHandlerTime=void 0;const u=Vw();let n=class GX{canHandle(i,t){return i==="time"&&"datetime"in t}getObject(i,t,e){const r=i.datetime;let a;for(const c of GX.TIME_REGEXES)if(c.regex.test(r)){a=t.dataFactory.namedNode(u.Util.XSD+c.type);break}return t.dataFactory.literal(r,a)}};return t1.ItemPropertyHandlerTime=n,n.TIME_REGEXES=[{regex:/^-?P(\d+Y)?(\d+M)?(\d+D)?(T(\d+H)?(\d+M)?(\d+(\.\d)?S)?)?$/u,type:"duration"},{regex:/^\d+-\d\d-\d\dT\d\d:\d\d:\d\d((Z?)|([+-]\d\d:\d\d))$/u,type:"dateTime"},{regex:/^\d+-\d\d-\d\dZ?$/u,type:"date"},{regex:/^\d\d:\d\d:\d\d((Z?)|([+-]\d\d:\d\d))$/u,type:"time"},{regex:/^\d+-\d\d$/u,type:"gYearMonth"},{regex:/^\d+$/u,type:"gYear"}],t1}var r1={},_P;function XX(){if(_P)return r1;_P=1,Object.defineProperty(r1,"__esModule",{value:!0}),r1.ItemPropertyHandlerUrl=void 0;const u=cr();let n=class{constructor(i,t){this.tagName=i,this.attributeName=t}canHandle(i,t){return this.tagName===i&&this.attributeName in t}getObject(i,t,e){return t.dataFactory.namedNode((0,u.resolve)(i[this.attributeName],t.baseIRI))}};return r1.ItemPropertyHandlerUrl=n,r1}var T4={},gP;function Jre(){return gP||(gP=1,Object.defineProperty(T4,"__esModule",{value:!0})),T4}var w4={},mP;function kre(){return mP||(mP=1,Object.defineProperty(w4,"__esModule",{value:!0})),w4}var S4={},vP;function Kre(){return vP||(vP=1,Object.defineProperty(S4,"__esModule",{value:!0})),S4}var n1={},Dn={},jn={},A4={},Ln={},ET={},TP;function Wre(){return TP||(TP=1,Object.defineProperty(ET,"__esModule",{value:!0}),ET.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(u){return u.charCodeAt(0)}))),ET}var xT={},wP;function Yre(){return wP||(wP=1,Object.defineProperty(xT,"__esModule",{value:!0}),xT.default=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(function(u){return u.charCodeAt(0)}))),xT}var O4={},SP;function AP(){return SP||(SP=1,(function(u){var n;Object.defineProperty(u,"__esModule",{value:!0}),u.replaceCodePoint=u.fromCodePoint=void 0;var o=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);u.fromCodePoint=(n=String.fromCodePoint)!==null&&n!==void 0?n:function(e){var r="";return e>65535&&(e-=65536,r+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),r+=String.fromCharCode(e),r};function i(e){var r;return e>=55296&&e<=57343||e>1114111?65533:(r=o.get(e))!==null&&r!==void 0?r:e}u.replaceCodePoint=i;function t(e){return(0,u.fromCodePoint)(i(e))}u.default=t})(O4)),O4}var OP;function JX(){return OP||(OP=1,(function(u){var n=Ln&&Ln.__createBinding||(Object.create?(function(S,E,R,L){L===void 0&&(L=R);var M=Object.getOwnPropertyDescriptor(E,R);(!M||("get"in M?!E.__esModule:M.writable||M.configurable))&&(M={enumerable:!0,get:function(){return E[R]}}),Object.defineProperty(S,L,M)}):(function(S,E,R,L){L===void 0&&(L=R),S[L]=E[R]})),o=Ln&&Ln.__setModuleDefault||(Object.create?(function(S,E){Object.defineProperty(S,"default",{enumerable:!0,value:E})}):function(S,E){S.default=E}),i=Ln&&Ln.__importStar||function(S){if(S&&S.__esModule)return S;var E={};if(S!=null)for(var R in S)R!=="default"&&Object.prototype.hasOwnProperty.call(S,R)&&n(E,S,R);return o(E,S),E},t=Ln&&Ln.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(u,"__esModule",{value:!0}),u.decodeXML=u.decodeHTMLStrict=u.decodeHTMLAttribute=u.decodeHTML=u.determineBranch=u.EntityDecoder=u.DecodingMode=u.BinTrieFlags=u.fromCodePoint=u.replaceCodePoint=u.decodeCodePoint=u.xmlDecodeTree=u.htmlDecodeTree=void 0;var e=t(Wre());u.htmlDecodeTree=e.default;var r=t(Yre());u.xmlDecodeTree=r.default;var a=i(AP());u.decodeCodePoint=a.default;var c=AP();Object.defineProperty(u,"replaceCodePoint",{enumerable:!0,get:function(){return c.replaceCodePoint}}),Object.defineProperty(u,"fromCodePoint",{enumerable:!0,get:function(){return c.fromCodePoint}});var s;(function(S){S[S.NUM=35]="NUM",S[S.SEMI=59]="SEMI",S[S.EQUALS=61]="EQUALS",S[S.ZERO=48]="ZERO",S[S.NINE=57]="NINE",S[S.LOWER_A=97]="LOWER_A",S[S.LOWER_F=102]="LOWER_F",S[S.LOWER_X=120]="LOWER_X",S[S.LOWER_Z=122]="LOWER_Z",S[S.UPPER_A=65]="UPPER_A",S[S.UPPER_F=70]="UPPER_F",S[S.UPPER_Z=90]="UPPER_Z"})(s||(s={}));var d=32,l;(function(S){S[S.VALUE_LENGTH=49152]="VALUE_LENGTH",S[S.BRANCH_LENGTH=16256]="BRANCH_LENGTH",S[S.JUMP_TABLE=127]="JUMP_TABLE"})(l=u.BinTrieFlags||(u.BinTrieFlags={}));function f(S){return S>=s.ZERO&&S<=s.NINE}function h(S){return S>=s.UPPER_A&&S<=s.UPPER_F||S>=s.LOWER_A&&S<=s.LOWER_F}function p(S){return S>=s.UPPER_A&&S<=s.UPPER_Z||S>=s.LOWER_A&&S<=s.LOWER_Z||f(S)}function y(S){return S===s.EQUALS||p(S)}var _;(function(S){S[S.EntityStart=0]="EntityStart",S[S.NumericStart=1]="NumericStart",S[S.NumericDecimal=2]="NumericDecimal",S[S.NumericHex=3]="NumericHex",S[S.NamedEntity=4]="NamedEntity"})(_||(_={}));var b;(function(S){S[S.Legacy=0]="Legacy",S[S.Strict=1]="Strict",S[S.Attribute=2]="Attribute"})(b=u.DecodingMode||(u.DecodingMode={}));var m=(function(){function S(E,R,L){this.decodeTree=E,this.emitCodePoint=R,this.errors=L,this.state=_.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=b.Strict}return S.prototype.startEntity=function(E){this.decodeMode=E,this.state=_.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},S.prototype.write=function(E,R){switch(this.state){case _.EntityStart:return E.charCodeAt(R)===s.NUM?(this.state=_.NumericStart,this.consumed+=1,this.stateNumericStart(E,R+1)):(this.state=_.NamedEntity,this.stateNamedEntity(E,R));case _.NumericStart:return this.stateNumericStart(E,R);case _.NumericDecimal:return this.stateNumericDecimal(E,R);case _.NumericHex:return this.stateNumericHex(E,R);case _.NamedEntity:return this.stateNamedEntity(E,R)}},S.prototype.stateNumericStart=function(E,R){return R>=E.length?-1:(E.charCodeAt(R)|d)===s.LOWER_X?(this.state=_.NumericHex,this.consumed+=1,this.stateNumericHex(E,R+1)):(this.state=_.NumericDecimal,this.stateNumericDecimal(E,R))},S.prototype.addToNumericResult=function(E,R,L,M){if(R!==L){var B=L-R;this.result=this.result*Math.pow(M,B)+parseInt(E.substr(R,B),M),this.consumed+=B}},S.prototype.stateNumericHex=function(E,R){for(var L=R;R<E.length;){var M=E.charCodeAt(R);if(f(M)||h(M))R+=1;else return this.addToNumericResult(E,L,R,16),this.emitNumericEntity(M,3)}return this.addToNumericResult(E,L,R,16),-1},S.prototype.stateNumericDecimal=function(E,R){for(var L=R;R<E.length;){var M=E.charCodeAt(R);if(f(M))R+=1;else return this.addToNumericResult(E,L,R,10),this.emitNumericEntity(M,2)}return this.addToNumericResult(E,L,R,10),-1},S.prototype.emitNumericEntity=function(E,R){var L;if(this.consumed<=R)return(L=this.errors)===null||L===void 0||L.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(E===s.SEMI)this.consumed+=1;else if(this.decodeMode===b.Strict)return 0;return this.emitCodePoint((0,a.replaceCodePoint)(this.result),this.consumed),this.errors&&(E!==s.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},S.prototype.stateNamedEntity=function(E,R){for(var L=this.decodeTree,M=L[this.treeIndex],B=(M&l.VALUE_LENGTH)>>14;R<E.length;R++,this.excess++){var X=E.charCodeAt(R);if(this.treeIndex=T(L,M,this.treeIndex+Math.max(1,B),X),this.treeIndex<0)return this.result===0||this.decodeMode===b.Attribute&&(B===0||y(X))?0:this.emitNotTerminatedNamedEntity();if(M=L[this.treeIndex],B=(M&l.VALUE_LENGTH)>>14,B!==0){if(X===s.SEMI)return this.emitNamedEntityData(this.treeIndex,B,this.consumed+this.excess);this.decodeMode!==b.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},S.prototype.emitNotTerminatedNamedEntity=function(){var E,R=this,L=R.result,M=R.decodeTree,B=(M[L]&l.VALUE_LENGTH)>>14;return this.emitNamedEntityData(L,B,this.consumed),(E=this.errors)===null||E===void 0||E.missingSemicolonAfterCharacterReference(),this.consumed},S.prototype.emitNamedEntityData=function(E,R,L){var M=this.decodeTree;return this.emitCodePoint(R===1?M[E]&~l.VALUE_LENGTH:M[E+1],L),R===3&&this.emitCodePoint(M[E+2],L),L},S.prototype.end=function(){var E;switch(this.state){case _.NamedEntity:return this.result!==0&&(this.decodeMode!==b.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case _.NumericDecimal:return this.emitNumericEntity(0,2);case _.NumericHex:return this.emitNumericEntity(0,3);case _.NumericStart:return(E=this.errors)===null||E===void 0||E.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case _.EntityStart:return 0}},S})();u.EntityDecoder=m;function g(S){var E="",R=new m(S,function(L){return E+=(0,a.fromCodePoint)(L)});return function(M,B){for(var X=0,J=0;(J=M.indexOf("&",J))>=0;){E+=M.slice(X,J),R.startEntity(B);var ie=R.write(M,J+1);if(ie<0){X=J+R.end();break}X=J+ie,J=ie===0?X+1:X}var U=E+M.slice(X);return E="",U}}function T(S,E,R,L){var M=(E&l.BRANCH_LENGTH)>>7,B=E&l.JUMP_TABLE;if(M===0)return B!==0&&L===B?R:-1;if(B){var X=L-B;return X<0||X>=M?-1:S[R+X]-1}for(var J=R,ie=J+M-1;J<=ie;){var U=J+ie>>>1,fe=S[U];if(fe<L)J=U+1;else if(fe>L)ie=U-1;else return S[U+M]}return-1}u.determineBranch=T;var v=g(e.default),A=g(r.default);function I(S,E){return E===void 0&&(E=b.Legacy),v(S,E)}u.decodeHTML=I;function q(S){return v(S,b.Attribute)}u.decodeHTMLAttribute=q;function O(S){return v(S,b.Strict)}u.decodeHTMLStrict=O;function w(S){return A(S,b.Strict)}u.decodeXML=w})(Ln)),Ln}var EP;function kX(){return EP||(EP=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.QuoteType=void 0;var n=JX(),o;(function(f){f[f.Tab=9]="Tab",f[f.NewLine=10]="NewLine",f[f.FormFeed=12]="FormFeed",f[f.CarriageReturn=13]="CarriageReturn",f[f.Space=32]="Space",f[f.ExclamationMark=33]="ExclamationMark",f[f.Number=35]="Number",f[f.Amp=38]="Amp",f[f.SingleQuote=39]="SingleQuote",f[f.DoubleQuote=34]="DoubleQuote",f[f.Dash=45]="Dash",f[f.Slash=47]="Slash",f[f.Zero=48]="Zero",f[f.Nine=57]="Nine",f[f.Semi=59]="Semi",f[f.Lt=60]="Lt",f[f.Eq=61]="Eq",f[f.Gt=62]="Gt",f[f.Questionmark=63]="Questionmark",f[f.UpperA=65]="UpperA",f[f.LowerA=97]="LowerA",f[f.UpperF=70]="UpperF",f[f.LowerF=102]="LowerF",f[f.UpperZ=90]="UpperZ",f[f.LowerZ=122]="LowerZ",f[f.LowerX=120]="LowerX",f[f.OpeningSquareBracket=91]="OpeningSquareBracket"})(o||(o={}));var i;(function(f){f[f.Text=1]="Text",f[f.BeforeTagName=2]="BeforeTagName",f[f.InTagName=3]="InTagName",f[f.InSelfClosingTag=4]="InSelfClosingTag",f[f.BeforeClosingTagName=5]="BeforeClosingTagName",f[f.InClosingTagName=6]="InClosingTagName",f[f.AfterClosingTagName=7]="AfterClosingTagName",f[f.BeforeAttributeName=8]="BeforeAttributeName",f[f.InAttributeName=9]="InAttributeName",f[f.AfterAttributeName=10]="AfterAttributeName",f[f.BeforeAttributeValue=11]="BeforeAttributeValue",f[f.InAttributeValueDq=12]="InAttributeValueDq",f[f.InAttributeValueSq=13]="InAttributeValueSq",f[f.InAttributeValueNq=14]="InAttributeValueNq",f[f.BeforeDeclaration=15]="BeforeDeclaration",f[f.InDeclaration=16]="InDeclaration",f[f.InProcessingInstruction=17]="InProcessingInstruction",f[f.BeforeComment=18]="BeforeComment",f[f.CDATASequence=19]="CDATASequence",f[f.InSpecialComment=20]="InSpecialComment",f[f.InCommentLike=21]="InCommentLike",f[f.BeforeSpecialS=22]="BeforeSpecialS",f[f.SpecialStartSequence=23]="SpecialStartSequence",f[f.InSpecialTag=24]="InSpecialTag",f[f.BeforeEntity=25]="BeforeEntity",f[f.BeforeNumericEntity=26]="BeforeNumericEntity",f[f.InNamedEntity=27]="InNamedEntity",f[f.InNumericEntity=28]="InNumericEntity",f[f.InHexEntity=29]="InHexEntity"})(i||(i={}));function t(f){return f===o.Space||f===o.NewLine||f===o.Tab||f===o.FormFeed||f===o.CarriageReturn}function e(f){return f===o.Slash||f===o.Gt||t(f)}function r(f){return f>=o.Zero&&f<=o.Nine}function a(f){return f>=o.LowerA&&f<=o.LowerZ||f>=o.UpperA&&f<=o.UpperZ}function c(f){return f>=o.UpperA&&f<=o.UpperF||f>=o.LowerA&&f<=o.LowerF}var s;(function(f){f[f.NoValue=0]="NoValue",f[f.Unquoted=1]="Unquoted",f[f.Single=2]="Single",f[f.Double=3]="Double"})(s=u.QuoteType||(u.QuoteType={}));var d={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},l=(function(){function f(h,p){var y=h.xmlMode,_=y===void 0?!1:y,b=h.decodeEntities,m=b===void 0?!0:b;this.cbs=p,this.state=i.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=i.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=_,this.decodeEntities=m,this.entityTrie=_?n.xmlDecodeTree:n.htmlDecodeTree}return f.prototype.reset=function(){this.state=i.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=i.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},f.prototype.write=function(h){this.offset+=this.buffer.length,this.buffer=h,this.parse()},f.prototype.end=function(){this.running&&this.finish()},f.prototype.pause=function(){this.running=!1},f.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},f.prototype.getIndex=function(){return this.index},f.prototype.getSectionStart=function(){return this.sectionStart},f.prototype.stateText=function(h){h===o.Lt||!this.decodeEntities&&this.fastForwardTo(o.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=i.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&h===o.Amp&&(this.state=i.BeforeEntity)},f.prototype.stateSpecialStartSequence=function(h){var p=this.sequenceIndex===this.currentSequence.length,y=p?e(h):(h|32)===this.currentSequence[this.sequenceIndex];if(!y)this.isSpecial=!1;else if(!p){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=i.InTagName,this.stateInTagName(h)},f.prototype.stateInSpecialTag=function(h){if(this.sequenceIndex===this.currentSequence.length){if(h===o.Gt||t(h)){var p=this.index-this.currentSequence.length;if(this.sectionStart<p){var y=this.index;this.index=p,this.cbs.ontext(this.sectionStart,p),this.index=y}this.isSpecial=!1,this.sectionStart=p+2,this.stateInClosingTagName(h);return}this.sequenceIndex=0}(h|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===d.TitleEnd?this.decodeEntities&&h===o.Amp&&(this.state=i.BeforeEntity):this.fastForwardTo(o.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(h===o.Lt)},f.prototype.stateCDATASequence=function(h){h===d.Cdata[this.sequenceIndex]?++this.sequenceIndex===d.Cdata.length&&(this.state=i.InCommentLike,this.currentSequence=d.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=i.InDeclaration,this.stateInDeclaration(h))},f.prototype.fastForwardTo=function(h){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===h)return!0;return this.index=this.buffer.length+this.offset-1,!1},f.prototype.stateInCommentLike=function(h){h===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=i.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):h!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},f.prototype.isTagStartChar=function(h){return this.xmlMode?!e(h):a(h)},f.prototype.startSpecial=function(h,p){this.isSpecial=!0,this.currentSequence=h,this.sequenceIndex=p,this.state=i.SpecialStartSequence},f.prototype.stateBeforeTagName=function(h){if(h===o.ExclamationMark)this.state=i.BeforeDeclaration,this.sectionStart=this.index+1;else if(h===o.Questionmark)this.state=i.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(h)){var p=h|32;this.sectionStart=this.index,!this.xmlMode&&p===d.TitleEnd[2]?this.startSpecial(d.TitleEnd,3):this.state=!this.xmlMode&&p===d.ScriptEnd[2]?i.BeforeSpecialS:i.InTagName}else h===o.Slash?this.state=i.BeforeClosingTagName:(this.state=i.Text,this.stateText(h))},f.prototype.stateInTagName=function(h){e(h)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(h))},f.prototype.stateBeforeClosingTagName=function(h){t(h)||(h===o.Gt?this.state=i.Text:(this.state=this.isTagStartChar(h)?i.InClosingTagName:i.InSpecialComment,this.sectionStart=this.index))},f.prototype.stateInClosingTagName=function(h){(h===o.Gt||t(h))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.AfterClosingTagName,this.stateAfterClosingTagName(h))},f.prototype.stateAfterClosingTagName=function(h){(h===o.Gt||this.fastForwardTo(o.Gt))&&(this.state=i.Text,this.baseState=i.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeAttributeName=function(h){h===o.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=i.InSpecialTag,this.sequenceIndex=0):this.state=i.Text,this.baseState=this.state,this.sectionStart=this.index+1):h===o.Slash?this.state=i.InSelfClosingTag:t(h)||(this.state=i.InAttributeName,this.sectionStart=this.index)},f.prototype.stateInSelfClosingTag=function(h){h===o.Gt?(this.cbs.onselfclosingtag(this.index),this.state=i.Text,this.baseState=i.Text,this.sectionStart=this.index+1,this.isSpecial=!1):t(h)||(this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(h))},f.prototype.stateInAttributeName=function(h){(h===o.Eq||e(h))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=i.AfterAttributeName,this.stateAfterAttributeName(h))},f.prototype.stateAfterAttributeName=function(h){h===o.Eq?this.state=i.BeforeAttributeValue:h===o.Slash||h===o.Gt?(this.cbs.onattribend(s.NoValue,this.index),this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(h)):t(h)||(this.cbs.onattribend(s.NoValue,this.index),this.state=i.InAttributeName,this.sectionStart=this.index)},f.prototype.stateBeforeAttributeValue=function(h){h===o.DoubleQuote?(this.state=i.InAttributeValueDq,this.sectionStart=this.index+1):h===o.SingleQuote?(this.state=i.InAttributeValueSq,this.sectionStart=this.index+1):t(h)||(this.sectionStart=this.index,this.state=i.InAttributeValueNq,this.stateInAttributeValueNoQuotes(h))},f.prototype.handleInAttributeValue=function(h,p){h===p||!this.decodeEntities&&this.fastForwardTo(p)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(p===o.DoubleQuote?s.Double:s.Single,this.index),this.state=i.BeforeAttributeName):this.decodeEntities&&h===o.Amp&&(this.baseState=this.state,this.state=i.BeforeEntity)},f.prototype.stateInAttributeValueDoubleQuotes=function(h){this.handleInAttributeValue(h,o.DoubleQuote)},f.prototype.stateInAttributeValueSingleQuotes=function(h){this.handleInAttributeValue(h,o.SingleQuote)},f.prototype.stateInAttributeValueNoQuotes=function(h){t(h)||h===o.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(s.Unquoted,this.index),this.state=i.BeforeAttributeName,this.stateBeforeAttributeName(h)):this.decodeEntities&&h===o.Amp&&(this.baseState=this.state,this.state=i.BeforeEntity)},f.prototype.stateBeforeDeclaration=function(h){h===o.OpeningSquareBracket?(this.state=i.CDATASequence,this.sequenceIndex=0):this.state=h===o.Dash?i.BeforeComment:i.InDeclaration},f.prototype.stateInDeclaration=function(h){(h===o.Gt||this.fastForwardTo(o.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=i.Text,this.sectionStart=this.index+1)},f.prototype.stateInProcessingInstruction=function(h){(h===o.Gt||this.fastForwardTo(o.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=i.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeComment=function(h){h===o.Dash?(this.state=i.InCommentLike,this.currentSequence=d.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=i.InDeclaration},f.prototype.stateInSpecialComment=function(h){(h===o.Gt||this.fastForwardTo(o.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=i.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeSpecialS=function(h){var p=h|32;p===d.ScriptEnd[3]?this.startSpecial(d.ScriptEnd,4):p===d.StyleEnd[3]?this.startSpecial(d.StyleEnd,4):(this.state=i.InTagName,this.stateInTagName(h))},f.prototype.stateBeforeEntity=function(h){this.entityExcess=1,this.entityResult=0,h===o.Number?this.state=i.BeforeNumericEntity:h===o.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=i.InNamedEntity,this.stateInNamedEntity(h))},f.prototype.stateInNamedEntity=function(h){if(this.entityExcess+=1,this.trieIndex=(0,n.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,h),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var p=this.trieCurrent&n.BinTrieFlags.VALUE_LENGTH;if(p){var y=(p>>14)-1;if(!this.allowLegacyEntity()&&h!==o.Semi)this.trieIndex+=y;else{var _=this.index-this.entityExcess+1;_>this.sectionStart&&this.emitPartial(this.sectionStart,_),this.entityResult=this.trieIndex,this.trieIndex+=y,this.entityExcess=0,this.sectionStart=this.index+1,y===0&&this.emitNamedEntity()}}},f.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var h=(this.entityTrie[this.entityResult]&n.BinTrieFlags.VALUE_LENGTH)>>14;switch(h){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~n.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},f.prototype.stateBeforeNumericEntity=function(h){(h|32)===o.LowerX?(this.entityExcess++,this.state=i.InHexEntity):(this.state=i.InNumericEntity,this.stateInNumericEntity(h))},f.prototype.emitNumericEntity=function(h){var p=this.index-this.entityExcess-1,y=p+2+ +(this.state===i.InHexEntity);y!==this.index&&(p>this.sectionStart&&this.emitPartial(this.sectionStart,p),this.sectionStart=this.index+Number(h),this.emitCodePoint((0,n.replaceCodePoint)(this.entityResult))),this.state=this.baseState},f.prototype.stateInNumericEntity=function(h){h===o.Semi?this.emitNumericEntity(!0):r(h)?(this.entityResult=this.entityResult*10+(h-o.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.stateInHexEntity=function(h){h===o.Semi?this.emitNumericEntity(!0):r(h)?(this.entityResult=this.entityResult*16+(h-o.Zero),this.entityExcess++):c(h)?(this.entityResult=this.entityResult*16+((h|32)-o.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===i.Text||this.baseState===i.InSpecialTag)},f.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===i.Text||this.state===i.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===i.InAttributeValueDq||this.state===i.InAttributeValueSq||this.state===i.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},f.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},f.prototype.parse=function(){for(;this.shouldContinue();){var h=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case i.Text:{this.stateText(h);break}case i.SpecialStartSequence:{this.stateSpecialStartSequence(h);break}case i.InSpecialTag:{this.stateInSpecialTag(h);break}case i.CDATASequence:{this.stateCDATASequence(h);break}case i.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(h);break}case i.InAttributeName:{this.stateInAttributeName(h);break}case i.InCommentLike:{this.stateInCommentLike(h);break}case i.InSpecialComment:{this.stateInSpecialComment(h);break}case i.BeforeAttributeName:{this.stateBeforeAttributeName(h);break}case i.InTagName:{this.stateInTagName(h);break}case i.InClosingTagName:{this.stateInClosingTagName(h);break}case i.BeforeTagName:{this.stateBeforeTagName(h);break}case i.AfterAttributeName:{this.stateAfterAttributeName(h);break}case i.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(h);break}case i.BeforeAttributeValue:{this.stateBeforeAttributeValue(h);break}case i.BeforeClosingTagName:{this.stateBeforeClosingTagName(h);break}case i.AfterClosingTagName:{this.stateAfterClosingTagName(h);break}case i.BeforeSpecialS:{this.stateBeforeSpecialS(h);break}case i.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(h);break}case i.InSelfClosingTag:{this.stateInSelfClosingTag(h);break}case i.InDeclaration:{this.stateInDeclaration(h);break}case i.BeforeDeclaration:{this.stateBeforeDeclaration(h);break}case i.BeforeComment:{this.stateBeforeComment(h);break}case i.InProcessingInstruction:{this.stateInProcessingInstruction(h);break}case i.InNamedEntity:{this.stateInNamedEntity(h);break}case i.BeforeEntity:{this.stateBeforeEntity(h);break}case i.InHexEntity:{this.stateInHexEntity(h);break}case i.InNumericEntity:{this.stateInNumericEntity(h);break}default:this.stateBeforeNumericEntity(h)}this.index++}this.cleanup()},f.prototype.finish=function(){this.state===i.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},f.prototype.handleTrailingData=function(){var h=this.buffer.length+this.offset;this.state===i.InCommentLike?this.currentSequence===d.CdataEnd?this.cbs.oncdata(this.sectionStart,h,0):this.cbs.oncomment(this.sectionStart,h,0):this.state===i.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===i.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===i.InTagName||this.state===i.BeforeAttributeName||this.state===i.BeforeAttributeValue||this.state===i.AfterAttributeName||this.state===i.InAttributeName||this.state===i.InAttributeValueSq||this.state===i.InAttributeValueDq||this.state===i.InAttributeValueNq||this.state===i.InClosingTagName||this.cbs.ontext(this.sectionStart,h)},f.prototype.emitPartial=function(h,p){this.baseState!==i.Text&&this.baseState!==i.InSpecialTag?this.cbs.onattribdata(h,p):this.cbs.ontext(h,p)},f.prototype.emitCodePoint=function(h){this.baseState!==i.Text&&this.baseState!==i.InSpecialTag?this.cbs.onattribentity(h):this.cbs.ontextentity(h)},f})();u.default=l})(A4)),A4}var xP;function IP(){if(xP)return jn;xP=1;var u=jn&&jn.__createBinding||(Object.create?(function(_,b,m,g){g===void 0&&(g=m);var T=Object.getOwnPropertyDescriptor(b,m);(!T||("get"in T?!b.__esModule:T.writable||T.configurable))&&(T={enumerable:!0,get:function(){return b[m]}}),Object.defineProperty(_,g,T)}):(function(_,b,m,g){g===void 0&&(g=m),_[g]=b[m]})),n=jn&&jn.__setModuleDefault||(Object.create?(function(_,b){Object.defineProperty(_,"default",{enumerable:!0,value:b})}):function(_,b){_.default=b}),o=jn&&jn.__importStar||function(_){if(_&&_.__esModule)return _;var b={};if(_!=null)for(var m in _)m!=="default"&&Object.prototype.hasOwnProperty.call(_,m)&&u(b,_,m);return n(b,_),b};Object.defineProperty(jn,"__esModule",{value:!0}),jn.Parser=void 0;var i=o(kX()),t=JX(),e=new Set(["input","option","optgroup","select","button","datalist","textarea"]),r=new Set(["p"]),a=new Set(["thead","tbody"]),c=new Set(["dd","dt"]),s=new Set(["rt","rp"]),d=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",r],["h1",r],["h2",r],["h3",r],["h4",r],["h5",r],["h6",r],["select",e],["input",e],["output",e],["button",e],["datalist",e],["textarea",e],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",c],["dt",c],["address",r],["article",r],["aside",r],["blockquote",r],["details",r],["div",r],["dl",r],["fieldset",r],["figcaption",r],["figure",r],["footer",r],["form",r],["header",r],["hr",r],["main",r],["nav",r],["ol",r],["pre",r],["section",r],["table",r],["ul",r],["rt",s],["rp",s],["tbody",a],["tfoot",a]]),l=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),f=new Set(["math","svg"]),h=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),p=/\s|\//,y=(function(){function _(b,m){m===void 0&&(m={});var g,T,v,A,I;this.options=m,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=b??{},this.lowerCaseTagNames=(g=m.lowerCaseTags)!==null&&g!==void 0?g:!m.xmlMode,this.lowerCaseAttributeNames=(T=m.lowerCaseAttributeNames)!==null&&T!==void 0?T:!m.xmlMode,this.tokenizer=new((v=m.Tokenizer)!==null&&v!==void 0?v:i.default)(this.options,this),(I=(A=this.cbs).onparserinit)===null||I===void 0||I.call(A,this)}return _.prototype.ontext=function(b,m){var g,T,v=this.getSlice(b,m);this.endIndex=m-1,(T=(g=this.cbs).ontext)===null||T===void 0||T.call(g,v),this.startIndex=m},_.prototype.ontextentity=function(b){var m,g,T=this.tokenizer.getSectionStart();this.endIndex=T-1,(g=(m=this.cbs).ontext)===null||g===void 0||g.call(m,(0,t.fromCodePoint)(b)),this.startIndex=T},_.prototype.isVoidElement=function(b){return!this.options.xmlMode&&l.has(b)},_.prototype.onopentagname=function(b,m){this.endIndex=m;var g=this.getSlice(b,m);this.lowerCaseTagNames&&(g=g.toLowerCase()),this.emitOpenTag(g)},_.prototype.emitOpenTag=function(b){var m,g,T,v;this.openTagStart=this.startIndex,this.tagname=b;var A=!this.options.xmlMode&&d.get(b);if(A)for(;this.stack.length>0&&A.has(this.stack[this.stack.length-1]);){var I=this.stack.pop();(g=(m=this.cbs).onclosetag)===null||g===void 0||g.call(m,I,!0)}this.isVoidElement(b)||(this.stack.push(b),f.has(b)?this.foreignContext.push(!0):h.has(b)&&this.foreignContext.push(!1)),(v=(T=this.cbs).onopentagname)===null||v===void 0||v.call(T,b),this.cbs.onopentag&&(this.attribs={})},_.prototype.endOpenTag=function(b){var m,g;this.startIndex=this.openTagStart,this.attribs&&((g=(m=this.cbs).onopentag)===null||g===void 0||g.call(m,this.tagname,this.attribs,b),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},_.prototype.onopentagend=function(b){this.endIndex=b,this.endOpenTag(!1),this.startIndex=b+1},_.prototype.onclosetag=function(b,m){var g,T,v,A,I,q;this.endIndex=m;var O=this.getSlice(b,m);if(this.lowerCaseTagNames&&(O=O.toLowerCase()),(f.has(O)||h.has(O))&&this.foreignContext.pop(),this.isVoidElement(O))!this.options.xmlMode&&O==="br"&&((T=(g=this.cbs).onopentagname)===null||T===void 0||T.call(g,"br"),(A=(v=this.cbs).onopentag)===null||A===void 0||A.call(v,"br",{},!0),(q=(I=this.cbs).onclosetag)===null||q===void 0||q.call(I,"br",!1));else{var w=this.stack.lastIndexOf(O);if(w!==-1)if(this.cbs.onclosetag)for(var S=this.stack.length-w;S--;)this.cbs.onclosetag(this.stack.pop(),S!==0);else this.stack.length=w;else!this.options.xmlMode&&O==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=m+1},_.prototype.onselfclosingtag=function(b){this.endIndex=b,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=b+1):this.onopentagend(b)},_.prototype.closeCurrentTag=function(b){var m,g,T=this.tagname;this.endOpenTag(b),this.stack[this.stack.length-1]===T&&((g=(m=this.cbs).onclosetag)===null||g===void 0||g.call(m,T,!b),this.stack.pop())},_.prototype.onattribname=function(b,m){this.startIndex=b;var g=this.getSlice(b,m);this.attribname=this.lowerCaseAttributeNames?g.toLowerCase():g},_.prototype.onattribdata=function(b,m){this.attribvalue+=this.getSlice(b,m)},_.prototype.onattribentity=function(b){this.attribvalue+=(0,t.fromCodePoint)(b)},_.prototype.onattribend=function(b,m){var g,T;this.endIndex=m,(T=(g=this.cbs).onattribute)===null||T===void 0||T.call(g,this.attribname,this.attribvalue,b===i.QuoteType.Double?'"':b===i.QuoteType.Single?"'":b===i.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},_.prototype.getInstructionName=function(b){var m=b.search(p),g=m<0?b:b.substr(0,m);return this.lowerCaseTagNames&&(g=g.toLowerCase()),g},_.prototype.ondeclaration=function(b,m){this.endIndex=m;var g=this.getSlice(b,m);if(this.cbs.onprocessinginstruction){var T=this.getInstructionName(g);this.cbs.onprocessinginstruction("!".concat(T),"!".concat(g))}this.startIndex=m+1},_.prototype.onprocessinginstruction=function(b,m){this.endIndex=m;var g=this.getSlice(b,m);if(this.cbs.onprocessinginstruction){var T=this.getInstructionName(g);this.cbs.onprocessinginstruction("?".concat(T),"?".concat(g))}this.startIndex=m+1},_.prototype.oncomment=function(b,m,g){var T,v,A,I;this.endIndex=m,(v=(T=this.cbs).oncomment)===null||v===void 0||v.call(T,this.getSlice(b,m-g)),(I=(A=this.cbs).oncommentend)===null||I===void 0||I.call(A),this.startIndex=m+1},_.prototype.oncdata=function(b,m,g){var T,v,A,I,q,O,w,S,E,R;this.endIndex=m;var L=this.getSlice(b,m-g);this.options.xmlMode||this.options.recognizeCDATA?((v=(T=this.cbs).oncdatastart)===null||v===void 0||v.call(T),(I=(A=this.cbs).ontext)===null||I===void 0||I.call(A,L),(O=(q=this.cbs).oncdataend)===null||O===void 0||O.call(q)):((S=(w=this.cbs).oncomment)===null||S===void 0||S.call(w,"[CDATA[".concat(L,"]]")),(R=(E=this.cbs).oncommentend)===null||R===void 0||R.call(E)),this.startIndex=m+1},_.prototype.onend=function(){var b,m;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var g=this.stack.length;g>0;this.cbs.onclosetag(this.stack[--g],!0));}(m=(b=this.cbs).onend)===null||m===void 0||m.call(b)},_.prototype.reset=function(){var b,m,g,T;(m=(b=this.cbs).onreset)===null||m===void 0||m.call(b),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(T=(g=this.cbs).onparserinit)===null||T===void 0||T.call(g,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},_.prototype.parseComplete=function(b){this.reset(),this.end(b)},_.prototype.getSlice=function(b,m){for(;b-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var g=this.buffers[0].slice(b-this.bufferOffset,m-this.bufferOffset);m-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),g+=this.buffers[0].slice(0,m-this.bufferOffset);return g},_.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},_.prototype.write=function(b){var m,g;if(this.ended){(g=(m=this.cbs).onerror)===null||g===void 0||g.call(m,new Error(".write() after done!"));return}this.buffers.push(b),this.tokenizer.running&&(this.tokenizer.write(b),this.writeIndex++)},_.prototype.end=function(b){var m,g;if(this.ended){(g=(m=this.cbs).onerror)===null||g===void 0||g.call(m,new Error(".end() after done!"));return}b&&this.write(b),this.ended=!0,this.tokenizer.end()},_.prototype.pause=function(){this.tokenizer.pause()},_.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},_.prototype.parseChunk=function(b){this.write(b)},_.prototype.done=function(b){this.end(b)},_})();return jn.Parser=y,jn}var RP;function Zre(){return RP||(RP=1,(function(u){var n=Dn&&Dn.__createBinding||(Object.create?(function(b,m,g,T){T===void 0&&(T=g);var v=Object.getOwnPropertyDescriptor(m,g);(!v||("get"in v?!m.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return m[g]}}),Object.defineProperty(b,T,v)}):(function(b,m,g,T){T===void 0&&(T=g),b[T]=m[g]})),o=Dn&&Dn.__setModuleDefault||(Object.create?(function(b,m){Object.defineProperty(b,"default",{enumerable:!0,value:m})}):function(b,m){b.default=m}),i=Dn&&Dn.__importStar||function(b){if(b&&b.__esModule)return b;var m={};if(b!=null)for(var g in b)g!=="default"&&Object.prototype.hasOwnProperty.call(b,g)&&n(m,b,g);return o(m,b),m},t=Dn&&Dn.__importDefault||function(b){return b&&b.__esModule?b:{default:b}};Object.defineProperty(u,"__esModule",{value:!0}),u.DomUtils=u.parseFeed=u.getFeed=u.ElementType=u.Tokenizer=u.createDomStream=u.parseDOM=u.parseDocument=u.DefaultHandler=u.DomHandler=u.Parser=void 0;var e=IP(),r=IP();Object.defineProperty(u,"Parser",{enumerable:!0,get:function(){return r.Parser}});var a=bn(),c=bn();Object.defineProperty(u,"DomHandler",{enumerable:!0,get:function(){return c.DomHandler}}),Object.defineProperty(u,"DefaultHandler",{enumerable:!0,get:function(){return c.DomHandler}});function s(b,m){var g=new a.DomHandler(void 0,m);return new e.Parser(g,m).end(b),g.root}u.parseDocument=s;function d(b,m){return s(b,m).children}u.parseDOM=d;function l(b,m,g){var T=new a.DomHandler(b,m,g);return new e.Parser(T,m)}u.createDomStream=l;var f=kX();Object.defineProperty(u,"Tokenizer",{enumerable:!0,get:function(){return t(f).default}}),u.ElementType=i(Jl());var h=xi(),p=xi();Object.defineProperty(u,"getFeed",{enumerable:!0,get:function(){return p.getFeed}});var y={xmlMode:!0};function _(b,m){return m===void 0&&(m=y),(0,h.getFeed)(d(b,m))}u.parseFeed=_,u.DomUtils=i(xi())})(Dn)),Dn}const ene={"http://schema.org/":{properties:{additionalType:{subPropertyOf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}}},"http://microformats.org/profile/hcard":{}};var FP;function tne(){if(FP)return n1;FP=1,Object.defineProperty(n1,"__esModule",{value:!0}),n1.MicrodataRdfParser=void 0;const u=Zre(),n=Dt(),o=QX(),i=HX(),t=zX(),e=XX(),r=Vw(),a=ene;let c=class MA extends n.Transform{constructor(d){super({readableObjectMode:!0}),this.itemScopeStack=[],this.textBufferStack=[],this.isEmittingReferences=!1,this.pendingItemRefsDomain={},this.pendingItemRefsRangeFinalized={},this.pendingItemRefsRangeCollecting={},d=d||{},this.options=d,this.util=new r.Util(d.dataFactory,d.baseIRI),this.defaultGraph=d.defaultGraph||this.util.dataFactory.defaultGraph(),this.htmlParseListener=d.htmlParseListener,this.vocabRegistry=d.vocabRegistry||a,this.parser=this.initializeParser(!!d.xmlMode)}import(d){const l=new n.PassThrough({readableObjectMode:!0});d.on("error",h=>f.emit("error",h)),d.on("data",h=>l.push(h)),d.on("end",()=>l.push(null));const f=l.pipe(new MA(this.options));return f}_transform(d,l,f){this.parser.write(d.toString()),f()}_flush(d){this.parser.end(),d()}getItemScope(d){let l=this.itemScopeStack.length-(d?2:1);for(;l>0&&!this.itemScopeStack[l];)l--;return this.itemScopeStack[l]}getDepth(){return this.itemScopeStack.length}onTagOpen(d,l){if(!this.isEmittingReferences){if("id"in l){const h=l.id;this.pendingItemRefsRangeCollecting[h]={events:[],counter:0,ids:[]}}for(const h of Object.values(this.pendingItemRefsRangeCollecting))h.counter++,h.events.push({type:"open",name:d,attributes:l})}this.textBufferStack.push(void 0);let f;if("itemscope"in l){let h;if(this.emittingReferencesItemScopeIdGenerator)h=this.emittingReferencesItemScopeIdGenerator();else{h="itemid"in l&&this.util.createSubject(l.itemid)||this.util.dataFactory.blankNode();for(const y of Object.values(this.pendingItemRefsRangeCollecting))y.ids.push(h)}f={subject:h},this.isEmittingReferences&&(f.blockEmission=!0);const p=this.getItemScope();p&&p.vocab&&(f.vocab=p.vocab),this.itemScopeStack.push(f)}else f=this.getItemScope(),this.itemScopeStack.push(void 0);if(f){if("itemtype"in l)for(const h of this.util.createVocabIris(l.itemtype,f,!1))f.vocab||(f.vocab=this.util.deriveVocab(h.value,this.vocabRegistry)),f.blockEmission||this.emitTriple(f.subject,this.util.dataFactory.namedNode(`${r.Util.RDF}type`),h);if("lang"in l&&(f.language=l.lang),"xml:lang"in l&&(f.language=l["xml:lang"]),"itemscope"in l&&!this.isEmittingReferences&&"itemref"in l)for(const h of l.itemref.split(/\s+/u))h in this.pendingItemRefsDomain||(this.pendingItemRefsDomain[h]=[]),this.pendingItemRefsDomain[h].push(f),this.tryToEmitReferences(h,f)}"itemprop"in l&&this.handleItemProperties(l.itemprop,!1,f,d,l),"itemprop-reverse"in l&&this.handleItemProperties(l["itemprop-reverse"],!0,f,d,l)}onText(d){if(!this.isEmittingReferences)for(const l of Object.values(this.pendingItemRefsRangeCollecting))l.events.push({type:"text",data:d});for(const l of this.textBufferStack)l&&l.push(d)}onTagClose(){if(!this.isEmittingReferences)for(const[l,f]of Object.entries(this.pendingItemRefsRangeCollecting))f.counter--,f.events.push({type:"close"}),f.counter===0&&(this.pendingItemRefsRangeFinalized[l]=f,delete this.pendingItemRefsRangeCollecting[l],this.tryToEmitReferences(l));const d=this.getItemScope(!0);if(d){const l=this.getDepth();if(d.predicates&&l in d.predicates)for(const[f,h]of Object.entries(d.predicates[l])){const p=this.util.createLiteral(this.textBufferStack[l].join(""),d);this.emitPredicateTriples(d,h,p,f==="reverse"),delete d.predicates[l][f]}}this.itemScopeStack.pop(),this.textBufferStack.pop()}onEnd(){}initializeParser(d){return new u.Parser({onclosetag:()=>{try{this.onTagClose(),this.htmlParseListener&&this.htmlParseListener.onTagClose()}catch(l){this.emit("error",l)}},onend:()=>{try{this.onEnd(),this.htmlParseListener&&this.htmlParseListener.onEnd()}catch(l){this.emit("error",l)}},onopentag:(l,f)=>{try{this.onTagOpen(l,f),this.htmlParseListener&&this.htmlParseListener.onTagOpen(l,f)}catch(h){this.emit("error",h)}},ontext:l=>{try{this.onText(l),this.htmlParseListener&&this.htmlParseListener.onText(l)}catch(f){this.emit("error",f)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:d})}handleItemProperties(d,l,f,h,p){const y=this.getItemScope(!0);if(y){const _=this.getDepth(),b=this.util.createVocabIris(d,y,!0);y.predicates||(y.predicates={}),y.predicates[_]||(y.predicates[_]={});const m=l?"reverse":"forward";y.predicates[_][m]=b;for(const g of this.util.getVocabularyExpansionType(d,y,this.vocabRegistry))b.push(g);if(f&&"itemscope"in p)this.emitPredicateTriples(y,b,f.subject,l),delete y.predicates[_][m];else for(const g of MA.ITEM_PROPERTY_HANDLERS)if(g.canHandle(h,p)){const T=g.getObject(p,this.util,y);this.emitPredicateTriples(y,b,T,l),delete y.predicates[_][m]}y.predicates[_][m]&&(this.textBufferStack[_]=[])}}emitPredicateTriples(d,l,f,h){if(!d.blockEmission)for(const p of l)h?f.termType!=="Literal"&&this.emitTriple(f,p,d.subject):this.emitTriple(d.subject,p,f)}emitTriple(d,l,f){this.push(this.util.dataFactory.quad(d,l,f,this.defaultGraph))}tryToEmitReferences(d,l){const f=this.pendingItemRefsRangeFinalized[d];if(f){let h;if(l){h=[l];const p=this.pendingItemRefsDomain[d].indexOf(l);this.pendingItemRefsDomain[d].splice(p,1)}else h=this.pendingItemRefsDomain[d],delete this.pendingItemRefsDomain[d];if(h){const p=this.itemScopeStack,y=this.textBufferStack;this.isEmittingReferences=!0;for(const _ of h){this.itemScopeStack=[_],this.textBufferStack=[void 0];const b=[...f.ids];this.emittingReferencesItemScopeIdGenerator=()=>b.shift();for(const m of f.events)switch(m.type){case"open":this.onTagOpen(m.name,m.attributes);break;case"text":this.onText(m.data);break;case"close":this.onTagClose();break}}this.emittingReferencesItemScopeIdGenerator=void 0,this.itemScopeStack=p,this.textBufferStack=y,this.isEmittingReferences=!1}}}};return n1.MicrodataRdfParser=c,c.ITEM_PROPERTY_HANDLERS=[new o.ItemPropertyHandlerContent,new e.ItemPropertyHandlerUrl("a","href"),new e.ItemPropertyHandlerUrl("area","href"),new e.ItemPropertyHandlerUrl("audio","src"),new e.ItemPropertyHandlerUrl("embed","src"),new e.ItemPropertyHandlerUrl("iframe","src"),new e.ItemPropertyHandlerUrl("img","src"),new e.ItemPropertyHandlerUrl("link","href"),new e.ItemPropertyHandlerUrl("object","data"),new e.ItemPropertyHandlerUrl("source","src"),new e.ItemPropertyHandlerUrl("track","src"),new e.ItemPropertyHandlerUrl("video","src"),new i.ItemPropertyHandlerNumber("data","value"),new i.ItemPropertyHandlerNumber("meter","value"),new t.ItemPropertyHandlerTime],n1}var NP;function rne(){return NP||(NP=1,(function(u){var n=_o&&_o.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=_o&&_o.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Xre(),u),o(QX(),u),o(HX(),u),o(zX(),u),o(XX(),u),o(Jre(),u),o(kre(),u),o(Kre(),u),o(tne(),u),o(Vw(),u)})(_o)),_o}var PP;function nne(){if(PP)return Kp;PP=1,Object.defineProperty(Kp,"__esModule",{value:!0}),Kp.ActorRdfParseHtmlMicrodata=void 0;const u=GO(),n=Ce(),o=be(),i=rne();let t=class extends u.ActorRdfParseHtml{constructor(r){super(r)}async test(r){return(0,o.passTestVoid)()}async run(r){const a=r.context.getSafe(n.KeysInitQuery.dataFactory),c=r.headers?r.headers.get("content-type"):null,s=c==null?void 0:c.includes("xml"),d=new i.MicrodataRdfParser({dataFactory:a,baseIRI:r.baseIRI,xmlMode:s});d.on("error",r.error),d.on("data",r.emit);const l=d.onEnd;return d.onEnd=()=>{l.call(d),r.end()},{htmlParseListener:d}}};return Kp.ActorRdfParseHtmlMicrodata=t,Kp}var DP;function ine(){return DP||(DP=1,(function(u){var n=bo&&bo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=bo&&bo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(nne(),u)})(bo)),bo}var go={},i1={},jP;function ane(){if(jP)return i1;jP=1,Object.defineProperty(i1,"__esModule",{value:!0}),i1.ActorRdfParseHtmlRdfa=void 0;const u=GO(),n=Ce(),o=be(),i=BX();let t=class extends u.ActorRdfParseHtml{constructor(r){super(r)}async test(r){return(0,o.passTestVoid)()}async run(r){const a=r.context.getSafe(n.KeysInitQuery.dataFactory),c=r.headers?r.headers.get("content-type"):null,s=(r.headers&&r.headers.get("content-language"))??void 0,d=c&&c.includes("xml")?"xhtml":"html",l=new i.RdfaParser({dataFactory:a,baseIRI:r.baseIRI,profile:d,language:s});l.on("error",r.error),l.on("data",r.emit);const f=l.onEnd;return l.onEnd=()=>{f.call(l),r.end()},{htmlParseListener:l}}};return i1.ActorRdfParseHtmlRdfa=t,i1}var LP;function une(){return LP||(LP=1,(function(u){var n=go&&go.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=go&&go.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ane(),u)})(go)),go}var mo={},a1={},vo={},u1={},MP;function one(){if(MP)return u1;MP=1,Object.defineProperty(u1,"__esModule",{value:!0}),u1.ActorRdfResolveHypermediaLinks=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i)}};return u1.ActorRdfResolveHypermediaLinks=n,u1}var CP;function sne(){return CP||(CP=1,(function(u){var n=vo&&vo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=vo&&vo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(one(),u)})(vo)),vo}var qP;function cne(){if(qP)return a1;qP=1,Object.defineProperty(a1,"__esModule",{value:!0}),a1.ActorRdfResolveHypermediaLinksNext=void 0;const u=sne(),n=be();let o=class extends u.ActorRdfResolveHypermediaLinks{constructor(t){super(t)}async test(t){return!t.metadata.next||t.metadata.next.length===0?(0,n.failTest)(`Actor ${this.name} requires a 'next' metadata entry.`):(0,n.passTestVoid)()}async run(t){return{links:t.metadata.next.map(e=>({url:e}))}}};return a1.ActorRdfResolveHypermediaLinksNext=o,a1}var BP;function dne(){return BP||(BP=1,(function(u){var n=mo&&mo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=mo&&mo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(cne(),u)})(mo)),mo}var To={},o1={},wo={},s1={},$P;function lne(){if($P)return s1;$P=1,Object.defineProperty(s1,"__esModule",{value:!0}),s1.ActorRdfResolveHypermediaLinksQueue=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i)}};return s1.ActorRdfResolveHypermediaLinksQueue=n,s1}var E4={},UP;function fne(){return UP||(UP=1,Object.defineProperty(E4,"__esModule",{value:!0})),E4}var c1={},VP;function hne(){if(VP)return c1;VP=1,Object.defineProperty(c1,"__esModule",{value:!0}),c1.LinkQueueWrapper=void 0;let u=class{constructor(o){this.linkQueue=o}push(o,i){return this.linkQueue.push(o,i)}getSize(){return this.linkQueue.getSize()}isEmpty(){return this.linkQueue.isEmpty()}pop(){return this.linkQueue.pop()}peek(){return this.linkQueue.peek()}};return c1.LinkQueueWrapper=u,c1}var QP;function pne(){return QP||(QP=1,(function(u){var n=wo&&wo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=wo&&wo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(lne(),u),o(fne(),u),o(hne(),u)})(wo)),wo}var d1={},HP;function KX(){if(HP)return d1;HP=1,Object.defineProperty(d1,"__esModule",{value:!0}),d1.LinkQueueFifo=void 0;let u=class{constructor(){this.links=[]}push(o){return this.links.push(o),!0}getSize(){return this.links.length}isEmpty(){return this.links.length===0}pop(){return this.links.shift()}peek(){return this.links[0]}};return d1.LinkQueueFifo=u,d1}var GP;function bne(){if(GP)return o1;GP=1,Object.defineProperty(o1,"__esModule",{value:!0}),o1.ActorRdfResolveHypermediaLinksQueueFifo=void 0;const u=pne(),n=be(),o=KX();let i=class extends u.ActorRdfResolveHypermediaLinksQueue{constructor(e){super(e)}async test(e){return(0,n.passTestVoid)()}async run(e){return{linkQueue:new o.LinkQueueFifo}}};return o1.ActorRdfResolveHypermediaLinksQueueFifo=i,o1}var zP;function yne(){return zP||(zP=1,(function(u){var n=To&&To.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=To&&To.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(bne(),u),o(KX(),u)})(To)),To}var So={},l1={},Ao={},f1={},XP;function _ne(){if(XP)return f1;XP=1,Object.defineProperty(f1,"__esModule",{value:!0}),f1.ActorRdfSerialize=void 0;const u=Hf();let n=class extends u.ActorAbstractMediaTyped{constructor(i){super(i)}};return f1.ActorRdfSerialize=n,f1}var h1={},JP;function gne(){if(JP)return h1;JP=1,Object.defineProperty(h1,"__esModule",{value:!0}),h1.ActorRdfSerializeFixedMediaTypes=void 0;const u=Hf(),n=be();let o=class extends u.ActorAbstractMediaTypedFixed{constructor(t){super(t)}async testHandleChecked(){return(0,n.passTestVoid)()}};return h1.ActorRdfSerializeFixedMediaTypes=o,h1}var kP;function zO(){return kP||(kP=1,(function(u){var n=Ao&&Ao.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ao&&Ao.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(_ne(),u),o(gne(),u)})(Ao)),Ao}var KP;function mne(){if(KP)return l1;KP=1,Object.defineProperty(l1,"__esModule",{value:!0}),l1.ActorRdfSerializeN3=void 0;const u=zO(),n=ia;let o=class extends u.ActorRdfSerializeFixedMediaTypes{constructor(t){super(t)}async runHandle(t,e){const r=new n.StreamWriter({format:e});let a;return"pipe"in t.quadStream?(t.quadStream.on("error",c=>r.emit("error",c)),a=t.quadStream.pipe(r)):a=r.import(t.quadStream),{data:a,triples:e==="text/turtle"||e==="application/n-triples"||e==="text/n3"}}};return l1.ActorRdfSerializeN3=o,l1}var WP;function vne(){return WP||(WP=1,(function(u){var n=So&&So.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=So&&So.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(mne(),u)})(So)),So}var Oo={},p1={},Eo={},b1={},xo={},y1={},x4={},YP;function Qw(){return YP||(YP=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.ERROR_CODES=u.ErrorCoded=void 0;class n extends Error{constructor(i,t){super(i),this.code=t}}u.ErrorCoded=n,(function(o){o.COLLIDING_KEYWORDS="colliding keywords",o.CONFLICTING_INDEXES="conflicting indexes",o.CYCLIC_IRI_MAPPING="cyclic IRI mapping",o.INVALID_ID_VALUE="invalid @id value",o.INVALID_INDEX_VALUE="invalid @index value",o.INVALID_NEST_VALUE="invalid @nest value",o.INVALID_PREFIX_VALUE="invalid @prefix value",o.INVALID_PROPAGATE_VALUE="invalid @propagate value",o.INVALID_REVERSE_VALUE="invalid @reverse value",o.INVALID_IMPORT_VALUE="invalid @import value",o.INVALID_VERSION_VALUE="invalid @version value",o.INVALID_BASE_IRI="invalid base IRI",o.INVALID_CONTAINER_MAPPING="invalid container mapping",o.INVALID_CONTEXT_ENTRY="invalid context entry",o.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",o.INVALID_DEFAULT_LANGUAGE="invalid default language",o.INVALID_INCLUDED_VALUE="invalid @included value",o.INVALID_IRI_MAPPING="invalid IRI mapping",o.INVALID_JSON_LITERAL="invalid JSON literal",o.INVALID_KEYWORD_ALIAS="invalid keyword alias",o.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",o.INVALID_LANGUAGE_MAPPING="invalid language mapping",o.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",o.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",o.INVALID_LOCAL_CONTEXT="invalid local context",o.INVALID_REMOTE_CONTEXT="invalid remote context",o.INVALID_REVERSE_PROPERTY="invalid reverse property",o.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",o.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",o.INVALID_SCOPED_CONTEXT="invalid scoped context",o.INVALID_SCRIPT_ELEMENT="invalid script element",o.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",o.INVALID_TERM_DEFINITION="invalid term definition",o.INVALID_TYPE_MAPPING="invalid type mapping",o.INVALID_TYPE_VALUE="invalid type value",o.INVALID_TYPED_VALUE="invalid typed value",o.INVALID_VALUE_OBJECT="invalid value object",o.INVALID_VALUE_OBJECT_VALUE="invalid value object value",o.INVALID_VOCAB_MAPPING="invalid vocab mapping",o.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",o.KEYWORD_REDEFINITION="keyword redefinition",o.LOADING_DOCUMENT_FAILED="loading document failed",o.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",o.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",o.PROCESSING_MODE_CONFLICT="processing mode conflict",o.PROTECTED_TERM_REDEFINITION="protected term redefinition",o.CONTEXT_OVERFLOW="context overflow",o.INVALID_BASE_DIRECTION="invalid base direction",o.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",o.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",o.INVALID_EMBEDDED_NODE="invalid embedded node",o.INVALID_ANNOTATION="invalid annotation"})(u.ERROR_CODES||(u.ERROR_CODES={}))})(x4)),x4}var _1={},ZP;function WX(){if(ZP)return _1;ZP=1,Object.defineProperty(_1,"__esModule",{value:!0}),_1.FetchDocumentLoader=void 0;const u=Qw(),n=Dv(),o=cr();class i{constructor(e){this.fetcher=e}async load(e){const r=await(this.fetcher||fetch)(e,{headers:new Headers({accept:"application/ld+json"})});if(r.ok&&r.headers){let a=r.headers.get("Content-Type");if(a){const c=a.indexOf(";");c>0&&(a=a.substr(0,c))}if(a==="application/ld+json")return await r.json();if(r.headers.has("Link")){let c;if(r.headers.forEach((s,d)=>{if(d==="link"){const l=(0,n.parse)(s);for(const f of l.get("type","application/ld+json"))if(f.rel==="alternate"){if(c)throw new Error("Multiple JSON-LD alternate links were found on "+e);c=(0,o.resolve)(f.uri,e)}}}),c)return this.load(c)}throw new u.ErrorCoded(`Unsupported JSON-LD media type ${a}`,u.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(r.statusText||`Status code: ${r.status}`)}}return _1.FetchDocumentLoader=i,_1}var I4={},g1={},eD;function XO(){if(eD)return g1;eD=1,Object.defineProperty(g1,"__esModule",{value:!0}),g1.Util=void 0;class u{static isCompactIri(o){return o.indexOf(":")>0&&!(o&&o[0]==="#")}static getPrefix(o,i){if(o&&o[0]==="#")return null;const t=o.indexOf(":");if(t>=0){if(o.length>t+1&&o.charAt(t+1)==="/"&&o.charAt(t+2)==="/")return null;const e=o.substr(0,t);if(e==="_")return null;if(i[e])return e}return null}static getContextValueId(o){if(o===null||typeof o=="string")return o;const i=o["@id"];return i||null}static isSimpleTermDefinitionPrefix(o,i){return!u.isPotentialKeyword(o)&&(i.allowPrefixNonGenDelims||typeof o=="string"&&(o[0]==="_"||u.isPrefixIriEndingWithGenDelim(o)))}static isPotentialKeyword(o){return typeof o=="string"&&u.KEYWORD_REGEX.test(o)}static isPrefixIriEndingWithGenDelim(o){return u.ENDS_WITH_GEN_DELIM.test(o)}static isPrefixValue(o){return o&&(typeof o=="string"||o&&typeof o=="object")}static isValidIri(o){return!!(o&&u.IRI_REGEX.test(o))}static isValidIriWeak(o){return!!o&&o[0]!==":"&&u.IRI_REGEX_WEAK.test(o)}static isValidKeyword(o){return u.VALID_KEYWORDS[o]}static isTermProtected(o,i){const t=o[i];return typeof t!="string"&&t&&t["@protected"]}static hasProtectedTerms(o){for(const i of Object.keys(o))if(u.isTermProtected(o,i))return!0;return!1}static isReservedInternalKeyword(o){return o.startsWith("@__")}static deepEqual(o,i){const t=Object.keys(o),e=Object.keys(i);return t.length!==e.length?!1:t.every(r=>{const a=o[r],c=i[r];return a===c||a!==null&&c!==null&&typeof a=="object"&&typeof c=="object"&&this.deepEqual(a,c)})}}return u.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,u.IRI_REGEX_WEAK=/(?::[^:])|\//,u.KEYWORD_REGEX=/^@[a-z]+$/i,u.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,u.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,u.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,u.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},u.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],u.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],u.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],u.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],u.CONTAINERS_1_0=["@list","@set","@index"],g1.Util=u,g1}var tD;function YX(){return tD||(tD=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.defaultExpandOptions=u.JsonLdContextNormalized=void 0;const n=cr(),o=Qw(),i=XO();class t{constructor(r){this.contextRaw=r}getContextRaw(){return this.contextRaw}expandTerm(r,a,c=u.defaultExpandOptions){const s=this.contextRaw[r];if(s===null||s&&s["@id"]===null)return null;let d=!0;if(s&&a){const _=i.Util.getContextValueId(s);if(_&&_!==r)if(typeof _!="string"||!i.Util.isValidIri(_)&&!i.Util.isValidKeyword(_))i.Util.isPotentialKeyword(_)||(d=!1);else return _}const l=i.Util.getPrefix(r,this.contextRaw),f=this.contextRaw["@vocab"],h=(!!f||f==="")&&f.indexOf(":")<0,p=this.contextRaw["@base"],y=i.Util.isPotentialKeyword(r);if(l){const _=this.contextRaw[l],b=i.Util.getContextValueId(_);if(b){if(typeof _=="string"||!c.allowPrefixForcing){if(!i.Util.isSimpleTermDefinitionPrefix(b,c))return r}else if(b[0]!=="_"&&!y&&!_["@prefix"]&&!(r in this.contextRaw))return r;return b+r.substr(l.length+1)}}else if(a&&(f||f===""||c.allowVocabRelativeToBase&&p&&h)&&!y&&!i.Util.isCompactIri(r))if(h){if(c.allowVocabRelativeToBase)return(f||p?(0,n.resolve)(f,p):"")+r;throw new o.ErrorCoded(`Relative vocab expansion for term '${r}' with vocab '${f}' is not allowed.`,o.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return f+r;else if(!a&&p&&!y&&!i.Util.isCompactIri(r))return(0,n.resolve)(r,p);if(d)return r;throw new o.ErrorCoded(`Invalid IRI mapping found for context entry '${r}': '${JSON.stringify(s)}'`,o.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(r,a){if(a&&this.contextRaw["@vocab"]&&r.startsWith(this.contextRaw["@vocab"]))return r.substr(this.contextRaw["@vocab"].length);if(!a&&this.contextRaw["@base"]&&r.startsWith(this.contextRaw["@base"]))return r.substr(this.contextRaw["@base"].length);const c={prefix:"",suffix:r};for(const s in this.contextRaw){const d=this.contextRaw[s];if(d&&!i.Util.isPotentialKeyword(s)){const l=i.Util.getContextValueId(d);if(r.startsWith(l)){const f=r.substr(l.length);if(f)f.length<c.suffix.length&&(c.prefix=s,c.suffix=f);else if(a)return s}}}return c.prefix?c.prefix+":"+c.suffix:r}}u.JsonLdContextNormalized=t,u.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}})(I4)),I4}var rD;function Tne(){if(rD)return y1;rD=1,Object.defineProperty(y1,"__esModule",{value:!0}),y1.ContextParser=void 0;const u=cr(),n=Qw(),o=WX(),i=YX(),t=XO();class e{constructor(a){a=a||{},this.documentLoader=a.documentLoader||new o.FetchDocumentLoader,this.documentCache={},this.validateContext=!a.skipValidation,this.expandContentTypeToBase=!!a.expandContentTypeToBase,this.remoteContextsDepthLimit=a.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in a?!!a.redirectSchemaOrgHttps:!0}static validateLanguage(a,c,s){if(typeof a!="string")throw new n.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(a)}'`,s);if(!t.Util.REGEX_LANGUAGE_TAG.test(a)){if(c)throw new n.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(a)}'`,s);return!1}return!0}static validateDirection(a,c){if(typeof a!="string")throw new n.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(a)}'`,n.ERROR_CODES.INVALID_BASE_DIRECTION);if(!t.Util.REGEX_DIRECTION_TAG.test(a)){if(c)throw new n.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(a)}'`,n.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(a){for(const c of Object.keys(a)){let s=a[c];if(s&&typeof s=="object"&&s["@reverse"]&&!s["@id"]){if(typeof s["@reverse"]!="string"||t.Util.isValidKeyword(s["@reverse"]))throw new n.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${s["@reverse"]}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);s=a[c]=Object.assign(Object.assign({},s),{"@id":s["@reverse"]}),s["@id"]=s["@reverse"],t.Util.isPotentialKeyword(s["@reverse"])?delete s["@reverse"]:s["@reverse"]=!0}}return a}expandPrefixedTerms(a,c,s){const d=a.getContextRaw();for(const l of s||Object.keys(d))if(t.Util.EXPAND_KEYS_BLACKLIST.indexOf(l)<0&&!t.Util.isReservedInternalKeyword(l)){const f=d[l];if(t.Util.isPotentialKeyword(l)&&t.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(l)>=0&&(l!=="@type"||typeof d[l]=="object"&&!(d[l]["@protected"]||d[l]["@container"]==="@set")))throw new n.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${l} to ${JSON.stringify(f)}`,n.ERROR_CODES.KEYWORD_REDEFINITION);if(t.Util.ALIAS_RANGE_BLACKLIST.indexOf(t.Util.getContextValueId(f))>=0)throw new n.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${l} to ${JSON.stringify(f)}`,n.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(f&&t.Util.isPotentialKeyword(t.Util.getContextValueId(f))&&f["@prefix"]===!0)throw new n.ErrorCoded(`Tried to use keyword aliases as prefix: '${l}': '${JSON.stringify(f)}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);for(;t.Util.isPrefixValue(d[l]);){const h=d[l];let p=!1;if(typeof h=="string")d[l]=a.expandTerm(h,!0),p=p||h!==d[l];else{const y=h["@id"],_=h["@type"],b=!("@prefix"in h)||t.Util.isValidIri(l);if("@id"in h)y!=null&&typeof y=="string"&&(d[l]=Object.assign(Object.assign({},d[l]),{"@id":a.expandTerm(y,!0)}),p=p||y!==d[l]["@id"]);else if(!t.Util.isPotentialKeyword(l)&&b){const m=a.expandTerm(l,!0);m!==l&&(d[l]=Object.assign(Object.assign({},d[l]),{"@id":m}),p=!0)}if(_&&typeof _=="string"&&_!=="@vocab"&&(!h["@container"]||!h["@container"]["@type"])&&b){let m=a.expandTerm(_,!0);c&&_===m&&(m=a.expandTerm(_,!1)),m!==_&&(p=!0,d[l]=Object.assign(Object.assign({},d[l]),{"@type":m}))}}if(!p)break}}}normalize(a,{processingMode:c,normalizeLanguageTags:s}){if(s||c===1)for(const d of Object.keys(a))if(d==="@language"&&typeof a[d]=="string")a[d]=a[d].toLowerCase();else{const l=a[d];if(l&&typeof l=="object"&&typeof l["@language"]=="string"){const f=l["@language"].toLowerCase();f!==l["@language"]&&(a[d]=Object.assign(Object.assign({},l),{"@language":f}))}}}containersToHash(a){for(const c of Object.keys(a)){const s=a[c];if(s&&typeof s=="object"){if(typeof s["@container"]=="string")a[c]=Object.assign(Object.assign({},s),{"@container":{[s["@container"]]:!0}});else if(Array.isArray(s["@container"])){const d={};for(const l of s["@container"])d[l]=!0;a[c]=Object.assign(Object.assign({},s),{"@container":d})}}}}applyScopedProtected(a,{processingMode:c},s){if(c&&c>=1.1&&a["@protected"]){for(const d of Object.keys(a))if(!t.Util.isReservedInternalKeyword(d)&&!t.Util.isPotentialKeyword(d)&&!t.Util.isTermProtected(a,d)){const l=a[d];l&&typeof l=="object"?"@protected"in a[d]||(a[d]=Object.assign(Object.assign({},a[d]),{"@protected":!0})):(a[d]={"@id":l,"@protected":!0},t.Util.isSimpleTermDefinitionPrefix(l,s)&&(a[d]=Object.assign(Object.assign({},a[d]),{"@prefix":!0})))}delete a["@protected"]}}validateKeywordRedefinitions(a,c,s,d){for(const l of d??Object.keys(c))if(t.Util.isTermProtected(a,l)&&(typeof c[l]=="string"?c[l]={"@id":c[l],"@protected":!0}:c[l]=Object.assign(Object.assign({},c[l]),{"@protected":!0}),!t.Util.deepEqual(a[l],c[l])))throw new n.ErrorCoded(`Attempted to override the protected keyword ${l} from ${JSON.stringify(t.Util.getContextValueId(a[l]))} to ${JSON.stringify(t.Util.getContextValueId(c[l]))}`,n.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(a,{processingMode:c}){for(const s of Object.keys(a)){if(t.Util.isReservedInternalKeyword(s))continue;if(s==="")throw new n.ErrorCoded(`The empty term is not allowed, got: '${s}': '${JSON.stringify(a[s])}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);const d=a[s],l=typeof d;if(t.Util.isPotentialKeyword(s)){switch(s.substr(1)){case"vocab":if(d!==null&&l!=="string")throw new n.ErrorCoded(`Found an invalid @vocab IRI: ${d}`,n.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(d!==null&&l!=="string")throw new n.ErrorCoded(`Found an invalid @base IRI: ${a[s]}`,n.ERROR_CODES.INVALID_BASE_IRI);break;case"language":d!==null&&e.validateLanguage(d,!0,n.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(d!==null&&l!=="number")throw new n.ErrorCoded(`Found an invalid @version number: ${d}`,n.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":d!==null&&e.validateDirection(d,!0);break;case"propagate":if(c===1)throw new n.ErrorCoded(`Found an illegal @propagate keyword: ${d}`,n.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(d!==null&&l!=="boolean")throw new n.ErrorCoded(`Found an invalid @propagate value: ${d}`,n.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(t.Util.isValidKeyword(s)&&t.Util.isValidKeyword(t.Util.getContextValueId(d)))throw new n.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${t.Util.getContextValueId(d)}'`,n.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(d!==null)switch(l){case"string":if(t.Util.getPrefix(d,a)===s)throw new n.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.CYCLIC_IRI_MAPPING);if(t.Util.isValidIriWeak(s)){if(d==="@type")throw new n.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${d}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.isValidIri(d)&&d!==new i.JsonLdContextNormalized(a).expandTerm(s))throw new n.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${d}'`,n.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!t.Util.isCompactIri(s)&&!("@id"in d)&&(d["@type"]==="@id"?!a["@base"]:!a["@vocab"]))throw new n.ErrorCoded(`Missing @id in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);for(const f of Object.keys(d)){const h=d[f];if(h)switch(f){case"@id":if(t.Util.isValidKeyword(h)&&h!=="@type"&&h!=="@id"&&h!=="@graph"&&h!=="@nest")throw new n.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.isValidIriWeak(s)){if(h==="@type")throw new n.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.isValidIri(h)&&h!==new i.JsonLdContextNormalized(a).expandTerm(s))throw new n.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof h!="string")throw new n.ErrorCoded(`Detected non-string @id in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.getPrefix(h,a)===s)throw new n.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(d["@container"]==="@type"&&h!=="@id"&&h!=="@vocab")throw new n.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${s}': '${h}'`,n.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof h!="string")throw new n.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(l)}'`,n.ERROR_CODES.INVALID_TYPE_MAPPING);if(h!=="@id"&&h!=="@vocab"&&(c===1||h!=="@json")&&(c===1||h!=="@none")&&(h[0]==="_"||!t.Util.isValidIri(h)))throw new n.ErrorCoded(`A context @type must be an absolute IRI, found: '${s}': '${h}'`,n.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof h=="string"&&d["@id"]&&d["@id"]!==h)throw new n.ErrorCoded(`Found non-matching @id and @reverse term values in '${s}':'${h}' and '${d["@id"]}'`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in d)throw new n.ErrorCoded(`@nest is not allowed in the reverse property '${s}'`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(c===1&&(Object.keys(h).length>1||t.Util.CONTAINERS_1_0.indexOf(Object.keys(h)[0])<0))throw new n.ErrorCoded(`Invalid term @container for '${s}' ('${Object.keys(h)}') in 1.0, must be only one of ${t.Util.CONTAINERS_1_0.join(", ")}`,n.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const p of Object.keys(h)){if(p==="@list"&&d["@reverse"])throw new n.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${s}'`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(t.Util.CONTAINERS.indexOf(p)<0)throw new n.ErrorCoded(`Invalid term @container for '${s}' ('${p}'), must be one of ${t.Util.CONTAINERS.join(", ")}`,n.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":e.validateLanguage(h,!0,n.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":e.validateDirection(h,!0);break;case"@prefix":if(h!==null&&typeof h!="boolean")throw new n.ErrorCoded(`Found an invalid term @prefix boolean in: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in d)&&!t.Util.isValidIri(s))throw new n.ErrorCoded(`Invalid @prefix definition for '${s}' ('${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(c===1||!d["@container"]||!d["@container"]["@index"])throw new n.ErrorCoded(`Attempt to add illegal key to value object: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(t.Util.isPotentialKeyword(h)&&h!=="@nest")throw new n.ErrorCoded(`Found an invalid term @nest value in: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new n.ErrorCoded(`Found an invalid term value: '${s}': '${d}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(a,c,s){return typeof a=="string"||(s&&!("@base"in a)&&c.parentContext&&typeof c.parentContext=="object"&&"@base"in c.parentContext&&(a["@base"]=c.parentContext["@base"],c.parentContext["@__baseDocument"]&&(a["@__baseDocument"]=!0)),c.baseIRI&&!c.external&&("@base"in a?a["@base"]!==null&&typeof a["@base"]=="string"&&!t.Util.isValidIri(a["@base"])&&(a["@base"]=(0,u.resolve)(a["@base"],c.parentContext&&c.parentContext["@base"]||c.baseIRI)):(a["@base"]=c.baseIRI,a["@__baseDocument"]=!0))),a}normalizeContextIri(a,c){if(!t.Util.isValidIri(a))try{a=(0,u.resolve)(a,c)}catch{throw new Error(`Invalid context IRI: ${a}`)}return this.redirectSchemaOrgHttps&&a.startsWith("http://schema.org")&&(a="https://schema.org/"),a}async parseInnerContexts(a,c,s){for(const d of s??Object.keys(a)){const l=a[d];if(l&&typeof l=="object"&&"@context"in l&&l["@context"]!==null&&!c.ignoreScopedContexts){if(this.validateContext)try{const f=Object.assign(Object.assign({},a),{[d]:Object.assign({},a[d])});delete f[d]["@context"],await this.parse(l["@context"],Object.assign(Object.assign({},c),{external:!1,parentContext:f,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(f){throw new n.ErrorCoded(f.message,n.ERROR_CODES.INVALID_SCOPED_CONTEXT)}a[d]=Object.assign(Object.assign({},l),{"@context":(await this.parse(l["@context"],Object.assign(Object.assign({},c),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:a}))).getContextRaw()})}}return a}async parse(a,c={},s={}){const{baseIRI:d,parentContext:l,external:f,processingMode:h=e.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:p,ignoreProtection:y,minimalProcessing:_}=c,b=c.remoteContexts||{};if(Object.keys(b).length>=this.remoteContextsDepthLimit)throw new n.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(b),n.ERROR_CODES.CONTEXT_OVERFLOW);if(a==null){if(!y&&l&&t.Util.hasProtectedTerms(l))throw new n.ErrorCoded("Illegal context nullification when terms are protected",n.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new i.JsonLdContextNormalized(this.applyBaseEntry({},c,!1))}else if(typeof a=="string"){const m=this.normalizeContextIri(a,d),g=this.getOverriddenLoad(m,c);if(g)return new i.JsonLdContextNormalized(g);const T=await this.parse(await this.load(m),Object.assign(Object.assign({},c),{baseIRI:m,external:!0,remoteContexts:Object.assign(Object.assign({},b),{[m]:!0})}));return this.applyBaseEntry(T.getContextRaw(),c,!0),T}else if(Array.isArray(a)){const m=[],g=await Promise.all(a.map((v,A)=>{if(typeof v=="string"){const I=this.normalizeContextIri(v,d);m[A]=I;const q=this.getOverriddenLoad(I,c);return q||this.load(I)}else return v}));if(_)return new i.JsonLdContextNormalized(g);const T=await g.reduce((v,A,I)=>v.then(q=>this.parse(A,Object.assign(Object.assign({},c),{baseIRI:m[I]||c.baseIRI,external:!!m[I]||c.external,parentContext:q.getContextRaw(),remoteContexts:m[I]?Object.assign(Object.assign({},b),{[m[I]]:!0}):b}),{skipValidation:I<g.length-1})),Promise.resolve(new i.JsonLdContextNormalized(l||{})));return this.applyBaseEntry(T.getContextRaw(),c,!0),T}else if(typeof a=="object"){if("@context"in a)return await this.parse(a["@context"],c);if(a=Object.assign({},a),f&&delete a["@base"],this.applyBaseEntry(a,c,!0),this.containersToHash(a),_)return new i.JsonLdContextNormalized(a);let m={};if("@import"in a)if(h>=1.1){if(typeof a["@import"]!="string")throw new n.ErrorCoded("An @import value must be a string, but got "+typeof a["@import"],n.ERROR_CODES.INVALID_IMPORT_VALUE);m=await this.loadImportContext(this.normalizeContextIri(a["@import"],d)),delete a["@import"]}else throw new n.ErrorCoded("Context importing is not supported in JSON-LD 1.0",n.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(m,{processingMode:h},i.defaultExpandOptions);const g=Object.assign(m,a);this.idifyReverseTerms(g),this.normalize(g,{processingMode:h,normalizeLanguageTags:p}),this.applyScopedProtected(g,{processingMode:h},i.defaultExpandOptions);const T=Object.keys(g),v=[];if(typeof l=="object")for(const I in l)I in g?v.push(I):g[I]=l[I];await this.parseInnerContexts(g,c,T);const A=new i.JsonLdContextNormalized(g);return(g&&g["@version"]||e.DEFAULT_PROCESSING_MODE)>=1.1&&(a["@vocab"]&&typeof a["@vocab"]=="string"||a["@vocab"]==="")&&(l&&"@vocab"in l&&a["@vocab"].indexOf(":")<0?g["@vocab"]=l["@vocab"]+a["@vocab"]:(t.Util.isCompactIri(a["@vocab"])||a["@vocab"]in g)&&(g["@vocab"]=A.expandTerm(a["@vocab"],!0))),this.expandPrefixedTerms(A,this.expandContentTypeToBase,T),!y&&l&&h>=1.1&&this.validateKeywordRedefinitions(l,g,i.defaultExpandOptions,v),this.validateContext&&!s.skipValidation&&this.validate(g,{processingMode:h}),A}else throw new n.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${a}`,n.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(a){const c=this.documentCache[a];if(c)return c;let s;try{s=await this.documentLoader.load(a)}catch(d){throw new n.ErrorCoded(`Failed to load remote context ${a}: ${d.message}`,n.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in s))throw new n.ErrorCoded(`Missing @context in remote context at ${a}`,n.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[a]=s["@context"]}getOverriddenLoad(a,c){if(a in(c.remoteContexts||{})){if(c.ignoreRemoteScopedContexts)return a;throw new n.ErrorCoded("Detected a cyclic context inclusion of "+a,n.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(a){let c=await this.load(a);if(typeof c!="object"||Array.isArray(c))throw new n.ErrorCoded("An imported context must be a single object: "+a,n.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in c)throw new n.ErrorCoded("An imported context can not import another context: "+a,n.ERROR_CODES.INVALID_CONTEXT_ENTRY);return c=Object.assign({},c),this.containersToHash(c),c}}return e.DEFAULT_PROCESSING_MODE=1.1,y1.ContextParser=e,y1}var R4={},nD;function wne(){return nD||(nD=1,Object.defineProperty(R4,"__esModule",{value:!0})),R4}var F4={},iD;function Sne(){return iD||(iD=1,Object.defineProperty(F4,"__esModule",{value:!0})),F4}var aD;function ZX(){return aD||(aD=1,(function(u){var n=xo&&xo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=xo&&xo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Tne(),u),o(Qw(),u),o(WX(),u),o(wne(),u),o(Sne(),u),o(YX(),u),o(XO(),u)})(xo)),xo}var m1={},uD;function Ane(){if(uD)return m1;uD=1,Object.defineProperty(m1,"__esModule",{value:!0}),m1.SeparatorType=void 0;let u=class{constructor(o){this.label=o}};return m1.SeparatorType=u,u.COMMA=new u(","),u.OBJECT_START=new u("{"),u.OBJECT_END=new u("}"),u.OBJECT_END_COMMA=new u("},"),u.ARRAY_START=new u("["),u.ARRAY_END=new u("]"),u.ARRAY_END_COMMA=new u("],"),u.GRAPH_FIELD_NONCOMPACT=new u('"@graph": ['),u.GRAPH_FIELD_COMPACT=new u('"@graph":['),u.CONTEXT_FIELD=new u('"@context":'),m1}var v1={},oD;function eJ(){if(oD)return v1;oD=1,Object.defineProperty(v1,"__esModule",{value:!0}),v1.Util=void 0;const u=ZX();class n{static termToValue(i,t,e={compactIds:!1,useNativeTypes:!1}){switch(i.termType){case"NamedNode":const r=t.compactIri(i.value,e.vocab);return e.compactIds?r:{"@id":r};case"DefaultGraph":return e.compactIds?i.value:{"@id":i.value};case"BlankNode":const a=`_:${i.value}`;return e.compactIds?a:{"@id":a};case"Literal":if(i.datatype.value===n.RDF_JSON){let d;try{d=JSON.parse(i.value)}catch(l){throw new u.ErrorCoded("Invalid JSON literal: "+l.message,u.ERROR_CODES.INVALID_JSON_LITERAL)}return{"@value":d,"@type":"@json"}}if(e.rdfDirection==="i18n-datatype"&&i.datatype.value.startsWith(n.I18N)){const[d,l]=i.datatype.value.substr(n.I18N.length,i.datatype.value.length).split("_");return Object.assign(Object.assign({"@value":i.value},d?{"@language":d}:{}),l?{"@direction":l}:{})}const c=i.datatype.value===n.XSD_STRING,s={"@value":!c&&e.useNativeTypes?n.stringToNativeType(i.value,i.datatype.value):i.value};return i.language?Object.assign(Object.assign({},s),{"@language":i.language}):!c&&typeof s["@value"]=="string"?Object.assign(Object.assign({},s),{"@type":i.datatype.value}):s}}static stringToNativeType(i,t){if(t.startsWith(n.XSD))switch(t.substr(n.XSD.length)){case"boolean":if(i==="true")return!0;if(i==="false")return!1;throw new Error(`Invalid xsd:boolean value '${i}'`);case"integer":case"number":case"int":case"byte":case"long":const r=parseInt(i,10);if(isNaN(r))throw new Error(`Invalid xsd:integer value '${i}'`);return r;case"float":case"double":const a=parseFloat(i);if(isNaN(a))throw new Error(`Invalid xsd:float value '${i}'`);return a}return i}}return v1.Util=n,n.XSD="http://www.w3.org/2001/XMLSchema#",n.XSD_STRING=n.XSD+"string",n.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",n.RDF_TYPE=n.RDF+"type",n.RDF_JSON=n.RDF+"JSON",n.I18N="https://www.w3.org/ns/i18n#",v1}var sD;function One(){if(sD)return b1;sD=1,Object.defineProperty(b1,"__esModule",{value:!0}),b1.JsonLdSerializer=void 0;const u=ZX(),n=Ane(),o=eJ(),i=Dt();let t=class tJ extends i.Transform{constructor(r={}){super({objectMode:!0}),this.indentation=0,this.options=r,this.options.baseIRI&&!this.options.context&&(this.options.context={"@base":this.options.baseIRI}),this.options.context?(this.originalContext=this.options.context,this.context=new u.ContextParser().parse(this.options.context,{baseIRI:this.options.baseIRI})):this.context=Promise.resolve(new u.JsonLdContextNormalized({}))}import(r){const a=new i.PassThrough({objectMode:!0});r.on("error",s=>c.emit("error",s)),r.on("data",s=>a.push(s)),r.on("end",()=>a.push(null));const c=a.pipe(new tJ(this.options));return c}_transform(r,a,c){this.context.then(s=>{this.transformQuad(r,s),c()}).catch(c)}async list(r){const a=await this.context;return{"@list":r.map(c=>o.Util.termToValue(c,a,this.options))}}_flush(r){return this.opened||this.pushDocumentStart(),this.lastPredicate&&this.endPredicate(),this.lastSubject&&this.endSubject(),this.lastGraph&&this.lastGraph.termType!=="DefaultGraph"&&this.endGraph(),this.endDocument(),r(null,null)}transformQuad(r,a){this.opened||this.pushDocumentStart();const c=this.lastGraph&&this.lastGraph.termType!=="DefaultGraph"&&this.lastGraph.equals(r.subject);if(!c&&(!this.lastGraph||!r.graph.equals(this.lastGraph))){let s=r.graph.termType!=="DefaultGraph"&&this.lastSubject&&this.lastSubject.equals(r.graph);this.lastGraph&&(this.lastGraph.termType!=="DefaultGraph"?(this.endPredicate(),this.endSubject(),this.endGraph(!0),s=!1):s?(this.endPredicate(!0),this.lastSubject=null):(this.endPredicate(),this.endSubject(!0))),r.graph.termType!=="DefaultGraph"&&(s||this.pushId(r.graph,!0,a),this.pushSeparator(this.options.space?n.SeparatorType.GRAPH_FIELD_NONCOMPACT:n.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++),this.lastGraph=r.graph}(!this.lastSubject||!r.subject.equals(this.lastSubject))&&(c?(this.endPredicate(),this.endSubject(),this.indentation--,this.pushSeparator(n.SeparatorType.ARRAY_END_COMMA),this.lastGraph=r.graph):(this.lastSubject&&(this.endPredicate(),this.endSubject(!0)),this.pushId(r.subject,!0,a)),this.lastSubject=r.subject),(!this.lastPredicate||!r.predicate.equals(this.lastPredicate))&&(this.lastPredicate&&this.endPredicate(!0),this.pushPredicate(r.predicate,a)),this.pushObject(r.object,a)}pushDocumentStart(){this.opened=!0,this.originalContext&&!this.options.excludeContext?(this.pushSeparator(n.SeparatorType.OBJECT_START),this.indentation++,this.pushSeparator(n.SeparatorType.CONTEXT_FIELD),this.pushIndented(JSON.stringify(this.originalContext,null,this.options.space)+","),this.pushSeparator(this.options.space?n.SeparatorType.GRAPH_FIELD_NONCOMPACT:n.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++):(this.pushSeparator(n.SeparatorType.ARRAY_START),this.indentation++)}pushId(r,a,c){if(r.termType==="Quad")this.pushNestedQuad(r,!0,c);else{const s=r.termType==="BlankNode"?"_:"+r.value:c.compactIri(r.value,!1);a?this.pushSeparator(n.SeparatorType.OBJECT_START):(this.push(n.SeparatorType.OBJECT_START.label),this.options.space&&this.push(`
`)),this.indentation++,this.pushIndented(this.options.space?`"@id": "${s}",`:`"@id":"${s}",`)}}pushPredicate(r,a){let c=r.value;!this.options.useRdfType&&c===o.Util.RDF_TYPE&&(c="@type",this.objectOptions=Object.assign(Object.assign({},this.options),{compactIds:!0,vocab:!0}));const s=a.compactIri(c,!0);this.pushIndented(this.options.space?`"${s}": [`:`"${s}":[`),this.indentation++,this.lastPredicate=r}pushObject(r,a){if(this.hadObjectForPredicate?this.pushSeparator(n.SeparatorType.COMMA):this.hadObjectForPredicate=!0,r.termType==="Quad"){const s=this.lastSubject,d=this.lastPredicate;this.hadObjectForPredicate=!1,this.pushNestedQuad(r,!1,a),this.endSubject(!1),this.hadObjectForPredicate=!0,this.lastPredicate=d,this.lastSubject=s;return}let c;try{r["@list"]?c=r:c=o.Util.termToValue(r,a,this.objectOptions||this.options)}catch(s){return this.emit("error",s)}this.pushIndented(JSON.stringify(c,null,this.options.space))}pushNestedQuad(r,a,c){this.pushSeparator(n.SeparatorType.OBJECT_START),this.indentation++,this.pushIndented(this.options.space?'"@id": ':'"@id":',!1),r.graph.termType!=="DefaultGraph"&&this.emit("error",new Error(`Found a nested quad with the non-default graph: ${r.graph.value}`)),this.pushId(r.subject,!1,c),this.pushPredicate(r.predicate,c),this.pushObject(r.object,c),this.endPredicate(!1),this.endSubject(a)}endDocument(){this.opened=!1,this.originalContext&&!this.options.excludeContext?(this.indentation--,this.pushSeparator(n.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(n.SeparatorType.OBJECT_END)):(this.indentation--,this.pushSeparator(n.SeparatorType.ARRAY_END))}endPredicate(r){this.indentation--,this.pushSeparator(r?n.SeparatorType.ARRAY_END_COMMA:n.SeparatorType.ARRAY_END),this.hadObjectForPredicate=!1,this.objectOptions=null,this.lastPredicate=null}endSubject(r){this.indentation--,this.pushSeparator(r?n.SeparatorType.OBJECT_END_COMMA:n.SeparatorType.OBJECT_END),this.lastSubject=null}endGraph(r){this.indentation--,this.pushSeparator(n.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(r?n.SeparatorType.OBJECT_END_COMMA:n.SeparatorType.OBJECT_END),this.lastGraph=null}pushSeparator(r){this.pushIndented(r.label)}pushIndented(r,a=!0){const c=this.getIndentPrefix(),s=r.split(`
`).map(d=>c+d).join(`
`);this.push(s),this.options.space&&a&&this.push(`
`)}getIndentPrefix(){return this.options.space?this.options.space.repeat(this.indentation):""}};return b1.JsonLdSerializer=t,b1}var cD;function Ene(){return cD||(cD=1,(function(u){var n=Eo&&Eo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Eo&&Eo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(One(),u),o(eJ(),u)})(Eo)),Eo}var dD;function xne(){if(dD)return p1;dD=1,Object.defineProperty(p1,"__esModule",{value:!0}),p1.ActorRdfSerializeJsonLd=void 0;const u=zO(),n=Ene();let o=class extends u.ActorRdfSerializeFixedMediaTypes{constructor(t){super(t)}async runHandle(t,e,r){const a=new n.JsonLdSerializer({space:" ".repeat(this.jsonStringifyIndentSpaces)});let c;return"pipe"in t.quadStream?(t.quadStream.on("error",s=>a.emit("error",s)),c=t.quadStream.pipe(a)):c=a.import(t.quadStream),{data:c}}};return p1.ActorRdfSerializeJsonLd=o,p1}var lD;function Ine(){return lD||(lD=1,(function(u){var n=Oo&&Oo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Oo&&Oo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(xne(),u)})(Oo)),Oo}var Io={},T1={},IT={},fD;function Rne(){if(fD)return IT;fD=1,Object.defineProperty(IT,"__esModule",{value:!0});function u(o,i){return new Promise((t,e)=>{o.on("end",()=>t(i)),o.on("error",e)})}function n(o){const i=[];return u(o.on("data",t=>i.push(t)),i)}return IT.default=n,IT}var vi={},qi={},w1={},S1={},hD;function Fne(){if(hD)return S1;hD=1,Object.defineProperty(S1,"__esModule",{value:!0}),S1.fragment=void 0;function u(i){let t=i;(t.endsWith("/")||t.endsWith("#"))&&(t=t.slice(0,t.length-1));const e=[];t.lastIndexOf("/")>0&&e.push(t.lastIndexOf("/")),t.lastIndexOf("#")>0&&e.push(t.lastIndexOf("#"));const r=Math.max(...e);return t.slice(r+1)}function n(i){var t;const e=(t=i.split(/[^a-z0-9]+/ig).filter(r=>r!=="").map(r=>r[0].toUpperCase()+r.slice(1)).join("").match(/[a-z][a-z0-9]+/ig))===null||t===void 0?void 0:t[0];return typeof e>"u"?void 0:e[0].toLowerCase()+e.slice(1)}function o(i){let t=u(i);return t=t?n(t):void 0,t||"v"}return S1.fragment=o,S1}var Ro={},Fo={},Ti={},RT={exports:{}},pD;function Nne(){return pD||(pD=1,(function(u,n){var o=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof Bl<"u"&&Bl,i=(function(){function e(){this.fetch=!1,this.DOMException=o.DOMException}return e.prototype=o,new e})();(function(e){(function(r){var a=typeof e<"u"&&e||typeof self<"u"&&self||typeof Bl<"u"&&Bl||{},c={searchParams:"URLSearchParams"in a,iterable:"Symbol"in a&&"iterator"in Symbol,blob:"FileReader"in a&&"Blob"in a&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in a,arrayBuffer:"ArrayBuffer"in a};function s(M){return M&&DataView.prototype.isPrototypeOf(M)}if(c.arrayBuffer)var d=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],l=ArrayBuffer.isView||function(M){return M&&d.indexOf(Object.prototype.toString.call(M))>-1};function f(M){if(typeof M!="string"&&(M=String(M)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(M)||M==="")throw new TypeError('Invalid character in header field name: "'+M+'"');return M.toLowerCase()}function h(M){return typeof M!="string"&&(M=String(M)),M}function p(M){var B={next:function(){var X=M.shift();return{done:X===void 0,value:X}}};return c.iterable&&(B[Symbol.iterator]=function(){return B}),B}function y(M){this.map={},M instanceof y?M.forEach(function(B,X){this.append(X,B)},this):Array.isArray(M)?M.forEach(function(B){if(B.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+B.length);this.append(B[0],B[1])},this):M&&Object.getOwnPropertyNames(M).forEach(function(B){this.append(B,M[B])},this)}y.prototype.append=function(M,B){M=f(M),B=h(B);var X=this.map[M];this.map[M]=X?X+", "+B:B},y.prototype.delete=function(M){delete this.map[f(M)]},y.prototype.get=function(M){return M=f(M),this.has(M)?this.map[M]:null},y.prototype.has=function(M){return this.map.hasOwnProperty(f(M))},y.prototype.set=function(M,B){this.map[f(M)]=h(B)},y.prototype.forEach=function(M,B){for(var X in this.map)this.map.hasOwnProperty(X)&&M.call(B,this.map[X],X,this)},y.prototype.keys=function(){var M=[];return this.forEach(function(B,X){M.push(X)}),p(M)},y.prototype.values=function(){var M=[];return this.forEach(function(B){M.push(B)}),p(M)},y.prototype.entries=function(){var M=[];return this.forEach(function(B,X){M.push([X,B])}),p(M)},c.iterable&&(y.prototype[Symbol.iterator]=y.prototype.entries);function _(M){if(!M._noBody){if(M.bodyUsed)return Promise.reject(new TypeError("Already read"));M.bodyUsed=!0}}function b(M){return new Promise(function(B,X){M.onload=function(){B(M.result)},M.onerror=function(){X(M.error)}})}function m(M){var B=new FileReader,X=b(B);return B.readAsArrayBuffer(M),X}function g(M){var B=new FileReader,X=b(B),J=/charset=([A-Za-z0-9_-]+)/.exec(M.type),ie=J?J[1]:"utf-8";return B.readAsText(M,ie),X}function T(M){for(var B=new Uint8Array(M),X=new Array(B.length),J=0;J<B.length;J++)X[J]=String.fromCharCode(B[J]);return X.join("")}function v(M){if(M.slice)return M.slice(0);var B=new Uint8Array(M.byteLength);return B.set(new Uint8Array(M)),B.buffer}function A(){return this.bodyUsed=!1,this._initBody=function(M){this.bodyUsed=this.bodyUsed,this._bodyInit=M,M?typeof M=="string"?this._bodyText=M:c.blob&&Blob.prototype.isPrototypeOf(M)?this._bodyBlob=M:c.formData&&FormData.prototype.isPrototypeOf(M)?this._bodyFormData=M:c.searchParams&&URLSearchParams.prototype.isPrototypeOf(M)?this._bodyText=M.toString():c.arrayBuffer&&c.blob&&s(M)?(this._bodyArrayBuffer=v(M.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):c.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(M)||l(M))?this._bodyArrayBuffer=v(M):this._bodyText=M=Object.prototype.toString.call(M):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof M=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):c.searchParams&&URLSearchParams.prototype.isPrototypeOf(M)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},c.blob&&(this.blob=function(){var M=_(this);if(M)return M;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var M=_(this);return M||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(c.blob)return this.blob().then(m);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var M=_(this);if(M)return M;if(this._bodyBlob)return g(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(T(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},c.formData&&(this.formData=function(){return this.text().then(w)}),this.json=function(){return this.text().then(JSON.parse)},this}var I=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function q(M){var B=M.toUpperCase();return I.indexOf(B)>-1?B:M}function O(M,B){if(!(this instanceof O))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');B=B||{};var X=B.body;if(M instanceof O){if(M.bodyUsed)throw new TypeError("Already read");this.url=M.url,this.credentials=M.credentials,B.headers||(this.headers=new y(M.headers)),this.method=M.method,this.mode=M.mode,this.signal=M.signal,!X&&M._bodyInit!=null&&(X=M._bodyInit,M.bodyUsed=!0)}else this.url=String(M);if(this.credentials=B.credentials||this.credentials||"same-origin",(B.headers||!this.headers)&&(this.headers=new y(B.headers)),this.method=q(B.method||this.method||"GET"),this.mode=B.mode||this.mode||null,this.signal=B.signal||this.signal||(function(){if("AbortController"in a){var U=new AbortController;return U.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&X)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(X),(this.method==="GET"||this.method==="HEAD")&&(B.cache==="no-store"||B.cache==="no-cache")){var J=/([?&])_=[^&]*/;if(J.test(this.url))this.url=this.url.replace(J,"$1_="+new Date().getTime());else{var ie=/\?/;this.url+=(ie.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}O.prototype.clone=function(){return new O(this,{body:this._bodyInit})};function w(M){var B=new FormData;return M.trim().split("&").forEach(function(X){if(X){var J=X.split("="),ie=J.shift().replace(/\+/g," "),U=J.join("=").replace(/\+/g," ");B.append(decodeURIComponent(ie),decodeURIComponent(U))}}),B}function S(M){var B=new y,X=M.replace(/\r?\n[\t ]+/g," ");return X.split("\r").map(function(J){return J.indexOf(`
`)===0?J.substr(1,J.length):J}).forEach(function(J){var ie=J.split(":"),U=ie.shift().trim();if(U){var fe=ie.join(":").trim();try{B.append(U,fe)}catch(me){console.warn("Response "+me.message)}}}),B}A.call(O.prototype);function E(M,B){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(B||(B={}),this.type="default",this.status=B.status===void 0?200:B.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=B.statusText===void 0?"":""+B.statusText,this.headers=new y(B.headers),this.url=B.url||"",this._initBody(M)}A.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},E.error=function(){var M=new E(null,{status:200,statusText:""});return M.ok=!1,M.status=0,M.type="error",M};var R=[301,302,303,307,308];E.redirect=function(M,B){if(R.indexOf(B)===-1)throw new RangeError("Invalid status code");return new E(null,{status:B,headers:{location:M}})},r.DOMException=a.DOMException;try{new r.DOMException}catch{r.DOMException=function(B,X){this.message=B,this.name=X;var J=Error(B);this.stack=J.stack},r.DOMException.prototype=Object.create(Error.prototype),r.DOMException.prototype.constructor=r.DOMException}function L(M,B){return new Promise(function(X,J){var ie=new O(M,B);if(ie.signal&&ie.signal.aborted)return J(new r.DOMException("Aborted","AbortError"));var U=new XMLHttpRequest;function fe(){U.abort()}U.onload=function(){var te={statusText:U.statusText,headers:S(U.getAllResponseHeaders()||"")};ie.url.indexOf("file://")===0&&(U.status<200||U.status>599)?te.status=200:te.status=U.status,te.url="responseURL"in U?U.responseURL:te.headers.get("X-Request-URL");var xe="response"in U?U.response:U.responseText;setTimeout(function(){X(new E(xe,te))},0)},U.onerror=function(){setTimeout(function(){J(new TypeError("Network request failed"))},0)},U.ontimeout=function(){setTimeout(function(){J(new TypeError("Network request timed out"))},0)},U.onabort=function(){setTimeout(function(){J(new r.DOMException("Aborted","AbortError"))},0)};function me(te){try{return te===""&&a.location.href?a.location.href:te}catch{return te}}if(U.open(ie.method,me(ie.url),!0),ie.credentials==="include"?U.withCredentials=!0:ie.credentials==="omit"&&(U.withCredentials=!1),"responseType"in U&&(c.blob?U.responseType="blob":c.arrayBuffer&&(U.responseType="arraybuffer")),B&&typeof B.headers=="object"&&!(B.headers instanceof y||a.Headers&&B.headers instanceof a.Headers)){var he=[];Object.getOwnPropertyNames(B.headers).forEach(function(te){he.push(f(te)),U.setRequestHeader(te,h(B.headers[te]))}),ie.headers.forEach(function(te,xe){he.indexOf(xe)===-1&&U.setRequestHeader(xe,te)})}else ie.headers.forEach(function(te,xe){U.setRequestHeader(xe,te)});ie.signal&&(ie.signal.addEventListener("abort",fe),U.onreadystatechange=function(){U.readyState===4&&ie.signal.removeEventListener("abort",fe)}),U.send(typeof ie._bodyInit>"u"?null:ie._bodyInit)})}return L.polyfill=!0,a.fetch||(a.fetch=L,a.Headers=y,a.Request=O,a.Response=E),r.Headers=y,r.Request=O,r.Response=E,r.fetch=L,Object.defineProperty(r,"__esModule",{value:!0}),r})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var t=o.fetch?o:i;n=t.fetch,n.default=t.fetch,n.fetch=t.fetch,n.Headers=t.Headers,n.Request=t.Request,n.Response=t.Response,u.exports=n})(RT,RT.exports)),RT.exports}var bD;function JO(){if(bD)return Ti;bD=1;var u=Ti&&Ti.__awaiter||function(t,e,r,a){function c(s){return s instanceof r?s:new r(function(d){d(s)})}return new(r||(r=Promise))(function(s,d){function l(p){try{h(a.next(p))}catch(y){d(y)}}function f(p){try{h(a.throw(p))}catch(y){d(y)}}function h(p){p.done?s(p.value):c(p.value).then(l,f)}h((a=a.apply(t,e||[])).next())})};Object.defineProperty(Ti,"__esModule",{value:!0}),Ti.fetchContext=Ti.fetchJson=void 0;const n=Nne();function o(t,e){var r;return u(this,void 0,void 0,function*(){return(yield((r=e==null?void 0:e.fetch)!==null&&r!==void 0?r:n.fetch)(t)).json()})}Ti.fetchJson=o;function i(t,e){return u(this,void 0,void 0,function*(){return(yield o(t,e))["@context"]})}return Ti.fetchContext=i,Ti}var yD;function Pne(){if(yD)return Fo;yD=1;var u=Fo&&Fo.__awaiter||function(i,t,e,r){function a(c){return c instanceof e?c:new e(function(s){s(c)})}return new(e||(e=Promise))(function(c,s){function d(h){try{f(r.next(h))}catch(p){s(p)}}function l(h){try{f(r.throw(h))}catch(p){s(p)}}function f(h){h.done?c(h.value):a(h.value).then(d,l)}f((r=r.apply(i,t||[])).next())})};Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.lookupUri=void 0;const n=JO();function o(i,t){return u(this,void 0,void 0,function*(){const e=(yield(0,n.fetchContext)(`https://prefix.cc/${i}.file.jsonld`,t))[i];if(typeof e!="string")throw new Error(`Expected uri to be a string, received: ${e} of type ${typeof e}`);return e})}return Fo.lookupUri=o,Fo}var No={},_D;function Dne(){if(_D)return No;_D=1;var u=No&&No.__awaiter||function(i,t,e,r){function a(c){return c instanceof e?c:new e(function(s){s(c)})}return new(e||(e=Promise))(function(c,s){function d(h){try{f(r.next(h))}catch(p){s(p)}}function l(h){try{f(r.throw(h))}catch(p){s(p)}}function f(h){h.done?c(h.value):a(h.value).then(d,l)}f((r=r.apply(i,t||[])).next())})};Object.defineProperty(No,"__esModule",{value:!0}),No.lookupPrefix=void 0;const n=JO();function o(i,t){return u(this,void 0,void 0,function*(){const e=new URL("https://prefix.cc/reverse");e.searchParams.append("uri",i),e.searchParams.append("format","jsonld");const r=Object.keys(yield(0,n.fetchContext)(e,t));if(r.length===0)throw new Error("No prefixes returned");return r[0]})}return No.lookupPrefix=o,No}var Po={},gD;function jne(){if(gD)return Po;gD=1;var u=Po&&Po.__awaiter||function(i,t,e,r){function a(c){return c instanceof e?c:new e(function(s){s(c)})}return new(e||(e=Promise))(function(c,s){function d(h){try{f(r.next(h))}catch(p){s(p)}}function l(h){try{f(r.throw(h))}catch(p){s(p)}}function f(h){h.done?c(h.value):a(h.value).then(d,l)}f((r=r.apply(i,t||[])).next())})};Object.defineProperty(Po,"__esModule",{value:!0}),Po.lookupAllPrefixes=void 0;const n=JO();function o(i){return u(this,void 0,void 0,function*(){return(0,n.fetchContext)("https://prefix.cc/context",i)})}return Po.lookupAllPrefixes=o,Po}var mD;function vD(){return mD||(mD=1,(function(u){var n=Ro&&Ro.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ro&&Ro.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Pne(),u),o(Dne(),u),o(jne(),u)})(Ro)),Ro}var TD;function Lne(){return TD||(TD=1,(function(u){var n=w1&&w1.__awaiter||function(a,c,s,d){function l(f){return f instanceof s?f:new s(function(h){h(f)})}return new(s||(s=Promise))(function(f,h){function p(b){try{_(d.next(b))}catch(m){h(m)}}function y(b){try{_(d.throw(b))}catch(m){h(m)}}function _(b){b.done?f(b.value):l(b.value).then(p,y)}_((d=d.apply(a,c||[])).next())})};Object.defineProperty(u,"__esModule",{value:!0}),u.lookupAllPrefixes=u.prefixToUri=u.uriToPrefix=void 0;const o=Fne(),i=vD();function t(a,c){return n(this,void 0,void 0,function*(){let s;try{s=yield(0,i.lookupPrefix)(a,c)}catch{c!=null&&c.mintOnUnknown&&(s=(0,o.fragment)(a).slice(0,4))}if(typeof s<"u"&&typeof(c==null?void 0:c.existingPrefixes)=="object"&&s in c.existingPrefixes){let d=0;for(;`${s}${d}`in c.existingPrefixes;)d+=1;s=`${s}${d}`}return s})}u.uriToPrefix=t;function e(a,c){return n(this,void 0,void 0,function*(){try{return yield(0,i.lookupUri)(a,c)}catch{return}})}u.prefixToUri=e;var r=vD();Object.defineProperty(u,"lookupAllPrefixes",{enumerable:!0,get:function(){return r.lookupAllPrefixes}})})(w1)),w1}var A1={},wD;function Mne(){if(wD)return A1;wD=1,Object.defineProperty(A1,"__esModule",{value:!0}),A1.getShaclName=void 0;function u(n){if(n.termType!=="NamedNode"||!n.value.startsWith("http://www.w3.org/ns/shacl#"))throw new Error(`Term ${n.value} is not part of the SHACL namespace`);return n.value.slice(27)}return A1.getShaclName=u,A1}var FT={},SD;function Cne(){return SD||(SD=1,Object.defineProperty(FT,"__esModule",{value:!0}),FT.default={deactivated:!0,severity:!0,message:!0,class:!0,datatype:!0,nodeKind:!0,minExclusive:!0,minInclusive:!0,maxExclusive:!0,maxInclusive:!0,minLength:!0,maxLength:!0,pattern:!0,flags:!0,languageIn:!0,uniqueLang:!0,equals:!0,disjoint:!0,lessThan:!0,lessThanOrEquals:!0,qualifiedValueShape:!0,qualifiedMinCount:!0,qualifiedMaxCount:!0,qualifiedValueShapesDisjoint:!0,closed:!0,ignoredProperties:!0,hasValue:!0,in:!0,node:!0}),FT}var NT={},AD;function qne(){return AD||(AD=1,Object.defineProperty(NT,"__esModule",{value:!0}),NT.default={owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#"}),NT}var PT={},OD;function Bne(){return OD||(OD=1,Object.defineProperty(PT,"__esModule",{value:!0}),PT.default={targetNode:!0,targetObjectsOf:!0,targetSubjectsOf:!0,deactivated:!0,severity:!0,message:!0,class:!0,datatype:!0,nodeKind:!0,minExclusive:!0,minInclusive:!0,maxExclusive:!0,maxInclusive:!0,minLength:!0,maxLength:!0,pattern:!0,flags:!0,languageIn:!0,equals:!0,disjoint:!0,closed:!0,ignoredProperties:!0,hasValue:!0,in:!0}),PT}var ED;function $ne(){if(ED)return qi;ED=1;var u=qi&&qi.__awaiter||function(h,p,y,_){function b(m){return m instanceof y?m:new y(function(g){g(m)})}return new(y||(y=Promise))(function(m,g){function T(I){try{A(_.next(I))}catch(q){g(q)}}function v(I){try{A(_.throw(I))}catch(q){g(q)}}function A(I){I.done?m(I.value):b(I.value).then(T,v)}A((_=_.apply(h,p||[])).next())})},n=qi&&qi.__importDefault||function(h){return h&&h.__esModule?h:{default:h}};Object.defineProperty(qi,"__esModule",{value:!0});const o=ia,i=Lne(),t=Lv(),e=Mne(),r=n(Cne()),a=n(qne()),c=n(Bne());function s(h){var p;return(p=/^[^]*[#/]/.exec(h))===null||p===void 0?void 0:p[0]}const d={"http://www.w3.org/1999/02/22-rdf-syntax-ns#":"rdf","http://www.w3.org/2000/01/rdf-schema#":"rdfs","http://www.w3.org/ns/shacl#":"sh","http://www.w3.org/2001/XMLSchema#":"xsd"},l={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#"};class f{constructor(p,y,_={},b=void 0,m=!0,g=!1,T,v=!1,A=!0){this.store=p,this.base=b,this.errorOnExtraQuads=m,this.mintUnspecifiedPrefixes=g,this.fetch=T,this.extendedSyntax=v,this.requireBase=A,this.prefixes={},this.prefixRev={};for(const I of Object.keys(_)){const q=_[I],O=typeof q=="string"?q:q.value;!(O in d)&&!(I in l)&&(this.prefixRev[O]=I,this.prefixes[I]=O)}this.writer=y,this.requireBase=A}write(){return u(this,void 0,void 0,function*(){const p=this.store.getQuads(null,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://www.w3.org/2002/07/owl#Ontology",null);if(p.length===1&&p[0].subject.termType==="NamedNode"){const _=p[0].subject;this.store.removeQuads(p),_.equals(new o.NamedNode("urn:x-base:default"))||this.writer.add(`BASE ${(0,t.termToString)(_)}`),yield this.writeImports(_)}else if(this.requireBase)throw new Error("Base expected");if(this.mintUnspecifiedPrefixes){const _=new Set;for(const m of[...this.store.getSubjects(null,null,null),...this.store.getPredicates(null,null,null),...this.store.getObjects(null,null,null)])if(m.termType==="NamedNode"){const g=s(m.value);g&&!(g in this.prefixRev)&&!(g in d)&&_.add(g)}const b=Object.assign(Object.assign({},this.prefixes),l);yield Promise.all([..._].map(m=>(0,i.uriToPrefix)(m,{fetch:this.fetch,mintOnUnknown:!0,existingPrefixes:b}).then(g=>{this.prefixes[g]=m,b[g]=m,this.prefixRev[m]=g})))}const y=new Set([...this.store.getSubjects(null,null,null),...this.store.getPredicates(null,null,null),...this.store.getObjects(null,null,null)].filter(_=>_.termType==="NamedNode").map(_=>s(_.value)).filter(_=>typeof _=="string"));for(const _ in this.prefixRev)y.has(_)||(delete this.prefixes[this.prefixRev[_]],delete this.prefixRev[_]);if(yield this.writePrefixes(),this.prefixes=Object.assign(Object.assign({},this.prefixes),l),this.prefixRev=Object.assign(Object.assign({},this.prefixRev),d),this.writer.newLine(),yield this.writeShapes(),this.extendedSyntax){const _=this.store.getSubjects(null,null,null);_.length>0&&this.writer.newLine(1);for(const b of _)this.writer.add(yield this.termToString(b,!0,!0)),this.writer.add(" "),this.writer.indent(),yield this.writeTurtlePredicates(b),this.writer.deindent();_.length>0&&(this.writer.add(" ."),this.writer.newLine())}if(this.errorOnExtraQuads&&this.store.size>0)throw new Error(`Dataset contains quads that cannot be written in SHACLC [
${new o.Writer({prefixes:this.prefixes}).quadsToString(this.store.getQuads(null,null,null,null))}]`);this.writer.end()})}writeImports(p){return u(this,void 0,void 0,function*(){const y=this.store.getObjectsOnce(p,new o.NamedNode("http://www.w3.org/2002/07/owl#imports"),null);if(y.length>0)for(const _ of y)this.writer.add(`IMPORTS <${_.value}>`,!0)})}writePrefixes(){return u(this,void 0,void 0,function*(){const p=Object.keys(this.prefixes).filter(y=>!(y in a.default)).sort();if(p.length>0)for(const y of p)this.writer.add(`PREFIX ${y}: <${this.prefixes[y]}>`,!0)})}termToString(p,y=!1,_=!1){return u(this,void 0,void 0,function*(){try{if(y)throw new Error("Shacl name disabled");return(0,e.getShaclName)(p)}catch{}if(p.termType==="NamedNode"){const b=s(p.value);return b&&b in this.prefixRev&&b in this.prefixRev?`${this.prefixRev[b]}:${p.value.slice(b.length)}`:(0,t.termToString)(p)}if(p.termType==="Literal")return p.datatypeString==="http://www.w3.org/2001/XMLSchema#integer"||p.datatypeString==="http://www.w3.org/2001/XMLSchema#boolean"?p.value:(0,t.termToString)(p);throw p.termType==="BlankNode"&&_&&(0,t.termToString)(p),new Error(`Invalid term type for extra statement ${p.value} (${p.termType})`)})}writeShapes(){return u(this,void 0,void 0,function*(){for(const p of this.store.getSubjectsOnce(new o.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),new o.NamedNode("http://www.w3.org/ns/shacl#NodeShape"),null)){this.store.getQuadsOnce(p,new o.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),new o.NamedNode("http://www.w3.org/2000/01/rdf-schema#Class"),null).length>0?this.writer.add("shapeClass "):this.writer.add("shape "),this.writer.add(yield this.termToString(p)),this.writer.add(" ");const y=this.store.getObjectsOnce(p,new o.NamedNode("http://www.w3.org/ns/shacl#targetClass"),null);if(y.length>0){this.writer.add("-> ");for(const b of y)b.termType==="NamedNode"?this.writer.add(yield this.termToString(b)):(this.writer.add("!"),this.writer.add(yield this.termToString(this.singleObject(b,new o.NamedNode("http://www.w3.org/ns/shacl#not"),!0)))),this.writer.add(" ")}const _=this.store.getPredicates(p,null,null).filter(b=>[new o.NamedNode("http://www.w3.org/ns/shacl#targetClass"),new o.NamedNode("http://www.w3.org/ns/shacl#property"),new o.NamedNode("http://www.w3.org/ns/shacl#or"),...Object.keys(c.default).map(m=>new o.NamedNode("http://www.w3.org/ns/shacl#"+m))].every(m=>!b.equals(m)));_.length>0&&(this.writer.add(";"),this.writer.indent(),this.writer.newLine(1)),this.extendedSyntax&&(yield this.writeGivenTurtlePredicates(p,_)),_.length>0&&(this.writer.add(" "),this.writer.deindent()),yield this.writeShapeBody(p,!1)}})}getSingleProperty(p,y){let _=[p];try{let b=(0,e.getShaclName)(p.predicate),m="pred";if(b==="not"){const g=this.store.getQuadsOnce(p.object,null,null,null);if(_=_.concat(g),g.length!==1)throw new Error("Can only handle having one predicate of 'not'");[p]=g,b=(0,e.getShaclName)(p.predicate),m="not"}if(!(b in y))throw new Error(`${b} is not allowed`);return{name:b,type:m,object:p.object}}catch{this.store.addQuads(_)}}singleLayerPropertiesList(p,y){const _=[];for(const b of this.store.getQuadsOnce(p,null,null,null)){const m=this.getSingleProperty(b,y);m&&_.push(m)}return _}expectOneProperty(p,y){const _=this.store.getQuadsOnce(p,null,null,null);if(_.length===1){const b=this.getSingleProperty(_[0],y);if(b)return b}this.store.addQuads(_)}orProperties(p,y){const _=[];for(const b of this.store.getQuadsOnce(p,new o.NamedNode("http://www.w3.org/ns/shacl#or"),null,null)){const m=[];for(const g of this.getList(b.object)){const T=this.expectOneProperty(g,y);if(!T)throw this.store.addQuad(b),new Error("Each entry of the 'or' statement must declare exactly one property");m.push(T)}_.push(m)}return _}getList(p){let y=p;const _=[];for(;!y.equals(new o.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"));)_.push(this.singleObject(y,new o.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),!0)),y=this.singleObject(y,new o.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),!0);return _}writeIriLiteralOrArray(p){return u(this,void 0,void 0,function*(){if(p.termType==="BlankNode"){this.writer.add("[");let y=!0;for(const _ of this.getList(p))y?y=!1:this.writer.add(" "),this.writer.add(yield this.termToString(_));this.writer.add("]")}else this.writer.add(yield this.termToString(p))})}singleObject(p,y,_){var b;return(b=this.singleQuad(p,y,_))===null||b===void 0?void 0:b.object}singleQuad(p,y,_=!1){const b=this.store.getQuadsOnce(p,y,null,null);if(_&&b.length!==1)throw this.store.addQuads(b),new Error(`The subject and predicate ${p==null?void 0:p.value} ${y==null?void 0:y.value} must have exactly one object. Instead has ${b.length}`);if(b.length>1)throw this.store.addQuads(b),new Error(`The subject and predicate ${p==null?void 0:p.value} ${y==null?void 0:y.value} can have at most one object. Instead has ${b.length}`);return b.length===1?b[0]:void 0}writeAssigment({name:p,type:y,object:_}){return u(this,void 0,void 0,function*(){y==="not"&&this.writer.add("!"),this.writer.add(p),this.writer.add("="),yield this.writeIriLiteralOrArray(_)})}writeAtom({name:p,type:y,object:_}){return u(this,void 0,void 0,function*(){switch(y==="not"&&this.writer.add("!"),p){case"node":{if(_.termType==="NamedNode")this.writer.add(`@${yield this.termToString(_)}`);else if(_.termType==="BlankNode")yield this.writeShapeBody(_);else throw new Error("Invalid nested shape, must be blank node or IRI");return}case"nodeKind":{this.writer.add((0,e.getShaclName)(_));return}case"class":{this.writer.add(yield this.termToString(_));return}case"datatype":{this.writer.add(yield this.termToString(_));return}default:this.writer.add(p),this.writer.add("="),yield this.writeIriLiteralOrArray(_)}})}writeAssigments(p,y=" ",_=!0,b){return u(this,void 0,void 0,function*(){for(const m of p)_?_=!1:this.writer.add(y),b?yield this.writeAtom(m):yield this.writeAssigment(m)})}writeParams(p,y=!0,_,b=!1,m=!1){return u(this,void 0,void 0,function*(){const g=this.orProperties(p,_),T=this.singleLayerPropertiesList(p,_);m&&(g.length>0||T.length>0)&&this.writer.newLine(1);for(const v of g)y?y=!1:this.writer.add(" "),yield this.writeAssigments(v,"|",!0,b);yield this.writeAssigments(T," ",y,b),m&&(g.length>0||T.length>0)&&this.writer.add(" .")})}writeShapeBody(p,y=!0){return u(this,void 0,void 0,function*(){this.writer.add("{").indent();const _=this.store.getObjectsOnce(p,new o.NamedNode("http://www.w3.org/ns/shacl#property"),null);yield this.writeParams(p,!0,c.default,!1,!0);for(const b of _)this.writer.newLine(1),yield this.writeProperty(b);this.writer.deindent().newLine(1),y?this.writer.add("} ."):this.writer.add("}").newLine(1)})}writeProperty(p){return u(this,void 0,void 0,function*(){yield this.writePath(this.singleObject(p,new o.NamedNode("http://www.w3.org/ns/shacl#path"),!0));const y=this.singleObject(p,new o.NamedNode("http://www.w3.org/ns/shacl#minCount")),_=this.singleObject(p,new o.NamedNode("http://www.w3.org/ns/shacl#maxCount")),b=this.singleObject(p,new o.NamedNode("http://www.w3.org/ns/shacl#nodeKind")),m=this.singleObject(p,new o.NamedNode("http://www.w3.org/ns/shacl#class")),g=this.singleObject(p,new o.NamedNode("http://www.w3.org/ns/shacl#datatype")),T=this.store.getObjectsOnce(p,new o.NamedNode("http://www.w3.org/ns/shacl#node"),null);if(b&&(this.writer.add(" "),this.writer.add((0,e.getShaclName)(b))),m&&(this.writer.add(" "),this.writer.add(yield this.termToString(m))),g&&(this.writer.add(" "),this.writer.add(yield this.termToString(g))),y!==void 0||_!==void 0){if(this.writer.add(" ["),y){if(y.termType!=="Literal"||y.datatypeString!=="http://www.w3.org/2001/XMLSchema#integer")throw new Error("Invalid min value, must me an integer literal");this.writer.add(y.value)}else this.writer.add("0");if(this.writer.add(".."),_){if(_.termType!=="Literal"||_.datatypeString!=="http://www.w3.org/2001/XMLSchema#integer")throw new Error("Invalid max value, must me an integer literal");this.store.removeMatches(p,new o.NamedNode("http://www.w3.org/ns/shacl#maxCount"),void 0,void 0),this.writer.add(_.value)}else this.writer.add("*");this.writer.add("]")}yield this.writeParams(p,!1,r.default,!0);const v=[];for(const A of T)if(A.termType==="NamedNode")this.writer.add(" "),this.writer.add(`@${yield this.termToString(A)}`);else if(A.termType==="BlankNode")v.push(A);else throw new Error("Invalid nested shape, must be blank node or IRI");for(const A of v)this.writer.add(" "),yield this.writeShapeBody(A);this.extendedSyntax&&this.store.getQuads(p,null,null,null).length>0&&(this.writer.add(" %"),this.writer.indent(),this.writer.newLine(1),yield this.writeTurtlePredicates(p),this.writer.deindent(),this.writer.newLine(1),this.writer.add("%")),v.length===0&&this.writer.add(" .")})}writeTurtlePredicates(p){return u(this,void 0,void 0,function*(){return this.writeGivenTurtlePredicates(p,this.store.getPredicates(p,null,null))})}writeGivenTurtlePredicates(p,y){return u(this,void 0,void 0,function*(){let _=!1;if(y.some(b=>b.equals(o.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type")))){const b=this.store.getObjectsOnce(p,o.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),null);b.length>0&&(_=!0,this.writer.add("a "),yield this.writeTurtleObjects(b))}for(const b of y)b.equals(o.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))||(_?(this.writer.add(" ;"),this.writer.newLine(1)):_=!0,this.writer.add(yield this.termToString(b,!0)),this.writer.add(" "),yield this.writeTurtleObjects(this.store.getObjectsOnce(p,b,null)))})}writeTurtleObjects(p){return u(this,void 0,void 0,function*(){const y=[],_=[];for(const m of p)m.termType==="BlankNode"&&[...this.store.match(null,null,m),...this.store.match(null,m,null)].length===0?y.push(m):_.push(m);this.writer.add((yield Promise.all(_.map(m=>this.termToString(m,!0,!0)))).join(", "));let b=_.length>0;if(y.length>0)for(const m of y)b?this.writer.add(", "):b=!0,(yield this.writeList(m))||(this.writer.add("["),this.writer.indent(),this.writer.newLine(1),yield this.writeTurtlePredicates(m),this.writer.deindent(),this.writer.newLine(1),this.writer.add("]"))})}writeList(p){return u(this,void 0,void 0,function*(){let y=p;const _=[],b=[];for(;!y.equals(o.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"));){const g=this.store.getQuadsOnce(y,o.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),null,null),T=this.store.getQuadsOnce(y,o.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),null,null);if(b.push(...g,...T),g.length!==1||T.length!==1||this.store.getQuads(y,null,null,null).length!==0)return this.store.addQuads(b),!1;_.push(g[0].object),y=T[0].object}let m=!1;this.writer.add("(");for(const g of _)m?this.writer.add(" "):m=!0,yield this.writeTurtleObjects([g]);return this.writer.add(")"),!0})}writePath(p,y=!1){return u(this,void 0,void 0,function*(){if(p.termType==="NamedNode")this.writer.add(yield this.termToString(p));else if(p.termType==="BlankNode"){const _=this.store.getQuadsOnce(p,null,null,null);if(_.length===1){const{predicate:b,object:m}=_[0];switch(b.value){case"http://www.w3.org/ns/shacl#inversePath":this.writer.add("^"),yield this.writePath(m,!0);return;case"http://www.w3.org/ns/shacl#alternativePath":{const g=this.getList(m);if(g.length===0)throw new Error("Invalid Alternative Path - no options");if(g.length===1)yield this.writePath(g[0]);else{y&&this.writer.add("(");let T=!0;for(const v of g)T?T=!1:this.writer.add("|"),yield this.writePath(v,!0);y&&this.writer.add(")")}return}case"http://www.w3.org/ns/shacl#zeroOrMorePath":yield this.writePath(m,!0),this.writer.add("*");return;case"http://www.w3.org/ns/shacl#oneOrMorePath":yield this.writePath(m,!0),this.writer.add("+");return;case"http://www.w3.org/ns/shacl#zeroOrOnePath":yield this.writePath(m,!0),this.writer.add("?");return;default:throw new Error(`Invalid path type ${p.value}`)}}else{this.store.addQuads(_);const b=this.getList(p);if(b.length===0)throw new Error("Invalid Path");{y&&this.writer.add("(");let m=!0;for(const g of b)m?m=!1:this.writer.add("/"),yield this.writePath(g,!0);y&&this.writer.add(")")}}}else throw new Error("Path should be named node or blank node")})}}return qi.default=f,qi}var DT={},xD;function Une(){if(xD)return DT;xD=1,Object.defineProperty(DT,"__esModule",{value:!0});class u{constructor(o){this.indents=0,this.write=o.write,this.end=o.end}indent(){return this.indents+=1,this}deindent(){if(this.indents<1)throw new Error(`Trying to deindent when indent is only ${this.indents}`);return this.indents-=1,this}add(o,i=!1){return this.write(i?`
${"	".repeat(this.indents)}${o}`:o,"utf-8"),this}newLine(o=2){return this.write(`
`.repeat(o)+"	".repeat(this.indents),"utf-8"),this}}return DT.default=u,DT}var jT={},ID;function Vne(){if(ID)return jT;ID=1,Object.defineProperty(jT,"__esModule",{value:!0});const u=ia;class n extends u.Store{getQuadsOnce(i,t,e,r){const a=this.getQuads(i,t,e,r);return this.removeQuads(a),a}getSubjectsOnce(i,t,e){return this.getQuadsOnce(null,i,t,e).map(r=>r.subject)}getObjectsOnce(i,t,e){return this.getQuadsOnce(i,t,null,e).map(r=>r.object)}}return jT.default=n,jT}var RD;function Qne(){if(RD)return vi;RD=1;var u=vi&&vi.__awaiter||function(a,c,s,d){function l(f){return f instanceof s?f:new s(function(h){h(f)})}return new(s||(s=Promise))(function(f,h){function p(b){try{_(d.next(b))}catch(m){h(m)}}function y(b){try{_(d.throw(b))}catch(m){h(m)}}function _(b){b.done?f(b.value):l(b.value).then(p,y)}_((d=d.apply(a,c||[])).next())})},n=vi&&vi.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(vi,"__esModule",{value:!0}),vi.write=void 0;const o=ia,i=n($ne()),t=n(Une()),e=n(Vne());function r(a,c){return u(this,void 0,void 0,function*(){return new Promise((s,d)=>u(this,void 0,void 0,function*(){try{let l="";const f=new e.default(a),h=f.getGraphs(null,null,null);if(h.length>1)throw new Error("More than one graph found - can serialize in the default graph");if(h.length===1&&!h[0].equals(o.DataFactory.defaultGraph()))throw new Error(`Expected all triples to be in the default graph, instead triples were in ${h[0].value}`);const p=new t.default({write:_=>{l+=_},end:()=>{let _=f.getQuads(null,null,null,null);_.length===0&&(_=void 0),s({text:l,extraQuads:_})}});yield new i.default(f,p,c==null?void 0:c.prefixes,void 0,(c==null?void 0:c.errorOnUnused)!==!1,c==null?void 0:c.mintPrefixes,c==null?void 0:c.fetch,c==null?void 0:c.extendedSyntax,(c==null?void 0:c.requireBase)!==!1).write()}catch(l){d(l)}}))})}return vi.write=r,vi}var FD;function Hne(){if(FD)return T1;FD=1,Object.defineProperty(T1,"__esModule",{value:!0}),T1.ActorRdfSerializeShaclc=void 0;const u=zO(),n=Rne(),o=Dt(),i=Qne();let t=class extends u.ActorRdfSerializeFixedMediaTypes{constructor(r){super(r)}async runHandle(r,a){const c=new o.Readable;c._read=()=>{};try{const s={};r.quadStream.on("prefix",(l,f)=>{s[l]=f});const{text:d}=await(0,i.write)(await(0,n.default)(r.quadStream),{errorOnUnused:!0,extendedSyntax:a==="text/shaclc-ext",prefixes:s});c.push(d),c.push(null)}catch(s){c._read=()=>{c.emit("error",s)}}return{data:c,triples:!0}}};return T1.ActorRdfSerializeShaclc=t,T1}var ND;function Gne(){return ND||(ND=1,(function(u){var n=Io&&Io.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Io&&Io.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Hne(),u)})(Io)),Io}var Do={},O1={},jo={},E1={},PD;function rJ(){if(PD)return E1;PD=1,Object.defineProperty(E1,"__esModule",{value:!0}),E1.ActorRdfUpdateQuads=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i)}};return E1.ActorRdfUpdateQuads=n,E1}var wi={},DD;function zne(){if(DD)return wi;DD=1,Object.defineProperty(wi,"__esModule",{value:!0}),wi.ActorRdfUpdateQuadsDestination=wi.deskolemize=wi.deskolemizeStream=void 0;const u=xz(),n=Ce(),o=be(),i=rJ();function t(a,c,s){return c==null?void 0:c.map(d=>(0,u.deskolemizeQuad)(a,d,s))}wi.deskolemizeStream=t;function e(a){var l;const c=a.context.getSafe(n.KeysInitQuery.dataFactory),s=a.context.get(n.KeysRdfUpdateQuads.destination),d=(l=a.context.get(n.KeysQuerySourceIdentify.sourceIds))==null?void 0:l.get(s);return d?{...a,quadStreamInsert:t(c,a.quadStreamInsert,d),quadStreamDelete:t(c,a.quadStreamDelete,d)}:a}wi.deskolemize=e;let r=class extends i.ActorRdfUpdateQuads{async test(c){return(0,o.passTestVoid)()}async run(c){const s=await this.getDestination(c.context);return await this.getOutput(s,e(c))}async getOutput(c,s){return{execute:async()=>{await c.update({insert:s.quadStreamInsert,delete:s.quadStreamDelete}),await(s.deleteGraphs?c.deleteGraphs(s.deleteGraphs.graphs,s.deleteGraphs.requireExistence,s.deleteGraphs.dropGraphs):Promise.resolve()),await(s.createGraphs?c.createGraphs(s.createGraphs.graphs,s.createGraphs.requireNonExistence):Promise.resolve())}}}};return wi.ActorRdfUpdateQuadsDestination=r,wi}var N4={},jD;function Xne(){return jD||(jD=1,Object.defineProperty(N4,"__esModule",{value:!0})),N4}var qr={},LD;function Jne(){if(LD)return qr;LD=1,Object.defineProperty(qr,"__esModule",{value:!0}),qr.getContextDestinationUrl=qr.getContextDestination=qr.getDataDestinationContext=qr.getDataDestinationValue=qr.getDataDestinationType=qr.isDataDestinationRawType=void 0;const u=Ce();function n(a){return typeof a=="string"||"remove"in a}qr.isDataDestinationRawType=n;function o(a){return typeof a=="string"?"":"remove"in a?"rdfjsStore":a.type}qr.getDataDestinationType=o;function i(a){return n(a)?a:a.value}qr.getDataDestinationValue=i;function t(a,c){return typeof a=="string"||"remove"in a||!a.context?c:c.merge(a.context)}qr.getDataDestinationContext=t;function e(a){return a.get(u.KeysRdfUpdateQuads.destination)}qr.getContextDestination=e;function r(a){if(a){let c=i(a);if(typeof c=="string"){const s=c.indexOf("#");return s>=0&&(c=c.slice(0,s)),c}}}return qr.getContextDestinationUrl=r,qr}var MD;function kO(){return MD||(MD=1,(function(u){var n=jo&&jo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=jo&&jo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(rJ(),u),o(zne(),u),o(Xne(),u),o(Jne(),u)})(jo)),jo}var x1={},CD;function kne(){if(CD)return x1;CD=1,Object.defineProperty(x1,"__esModule",{value:!0}),x1.RdfJsQuadDestination=void 0;const u=$X(),n=tr();let o=class{constructor(t,e){this.dataFactory=t,this.store=e}async update(t){t.delete&&await(0,u.promisifyEventEmitter)(this.store.remove(t.delete)),t.insert&&await(0,u.promisifyEventEmitter)(this.store.import(t.insert))}async deleteGraphs(t,e,r){switch(t){case"ALL":await(0,u.promisifyEventEmitter)(this.store.deleteGraph(this.dataFactory.defaultGraph()));case"NAMED":const a=this.store.match(),c={};a.on("data",s=>{s.graph.termType!=="DefaultGraph"&&(c[(0,n.termToString)(s.graph)]=!0)}),await(0,u.promisifyEventEmitter)(a),await Promise.all(Object.keys(c).map(s=>(0,u.promisifyEventEmitter)(this.store.deleteGraph((0,n.stringToTerm)(s,this.dataFactory)))));break;default:for(const s of Array.isArray(t)?t:[t])await(0,u.promisifyEventEmitter)(this.store.deleteGraph(s))}}async createGraphs(t,e){if(e)for(const r of t){const a=this.store.match(void 0,void 0,void 0,r);await new Promise((c,s)=>{a.once("data",()=>{s(new Error(`Unable to create graph ${r.value} as it already exists`))}),a.on("end",c),a.on("error",s)})}}};return x1.RdfJsQuadDestination=o,x1}var qD;function Kne(){if(qD)return O1;qD=1,Object.defineProperty(O1,"__esModule",{value:!0}),O1.ActorRdfUpdateQuadsRdfJsStore=void 0;const u=kO(),n=Ce(),o=be(),i=kne();let t=class extends u.ActorRdfUpdateQuadsDestination{constructor(r){super(r)}async test(r){var c;const a=(0,u.getContextDestination)(r.context);return!a||typeof a=="string"||!("remove"in a)&&"value"in a&&!((c=a.value)!=null&&c.remove)?(0,o.failTest)(`${this.name} received an invalid rdfjsStore.`):(0,o.passTestVoid)()}async getDestination(r){const a=(0,u.getContextDestination)(r);return new i.RdfJsQuadDestination(r.getSafe(n.KeysInitQuery.dataFactory),"remove"in a?a:a.value)}};return O1.ActorRdfUpdateQuadsRdfJsStore=t,O1}var BD;function Wne(){return BD||(BD=1,(function(u){var n=Do&&Do.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Do&&Do.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Kne(),u)})(Do)),Do}var Lo={},I1={},R1={},$D;function Yne(){if($D)return R1;$D=1,Object.defineProperty(R1,"__esModule",{value:!0}),R1.ExpressionFunctionBnode=void 0;const u=Te(),n=Ce(),o=OO(),i=ge();let t=class CA extends u.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:i.SparqlOperator.BNODE,apply:async r=>{const{args:a,mapping:c,exprEval:s}=r,d=a.length===1?await s.evaluatorExpressionEvaluation(a[0],c):void 0;let l;if(d){const h=CA.bnodeTree.search([d],s.context.getSafe(n.KeysExpressionEvaluator.superTypeProvider),s.context.getSafe(n.KeysInitQuery.functionArgumentsCache));if(!h)throw new i.InvalidArgumentTypes(a,i.SparqlOperator.BNODE);l=h(s)([d]).str()}const f=new o.BlankNodeBindingsScoped(l??`BNODE_${CA.bnodeCounter++}`);return new i.BlankNode(f)}})}checkArity(r){return r.length===0||r.length===1}};return R1.ExpressionFunctionBnode=t,t.bnodeTree=(0,i.declare)(i.SparqlOperator.BNODE).onString1(()=>e=>e).collect(),t.bnodeCounter=0,R1}var UD;function Zne(){if(UD)return I1;UD=1,Object.defineProperty(I1,"__esModule",{value:!0}),I1.ActorFunctionFactoryExpressionBnode=void 0;const u=Te(),n=ge(),o=Yne();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.BNODE],termFunction:!1})}async run(e){return new o.ExpressionFunctionBnode}};return I1.ActorFunctionFactoryExpressionBnode=i,I1}var VD;function eie(){return VD||(VD=1,(function(u){var n=Lo&&Lo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Lo&&Lo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Zne(),u)})(Lo)),Lo}var Mo={},F1={},N1={},QD;function tie(){if(QD)return N1;QD=1,Object.defineProperty(N1,"__esModule",{value:!0}),N1.ExpressionFunctionBound=void 0;const u=Te(),n=Ce(),o=ra(),i=ge();let t=class extends u.ExpressionFunctionBase{constructor(){super({arity:1,operator:i.SparqlOperator.BOUND,apply:async({args:r,mapping:a,exprEval:c})=>{const s=r[0];if(s.expressionType!==o.ExpressionType.Variable)throw new i.InvalidArgumentTypes(r,i.SparqlOperator.BOUND);const d=a.has((0,i.expressionToVar)(c.context.getSafe(n.KeysInitQuery.dataFactory),s));return(0,i.bool)(d)}})}};return N1.ExpressionFunctionBound=t,N1}var HD;function rie(){if(HD)return F1;HD=1,Object.defineProperty(F1,"__esModule",{value:!0}),F1.ActorFunctionFactoryExpressionBound=void 0;const u=Te(),n=ge(),o=tie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.BOUND],termFunction:!1})}async run(e){return new o.ExpressionFunctionBound}};return F1.ActorFunctionFactoryExpressionBound=i,F1}var GD;function nie(){return GD||(GD=1,(function(u){var n=Mo&&Mo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Mo&&Mo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(rie(),u)})(Mo)),Mo}var Co={},P1={},D1={},zD;function iie(){if(zD)return D1;zD=1,Object.defineProperty(D1,"__esModule",{value:!0}),D1.ExpressionFunctionCoalesce=void 0;const u=Te(),n=ge();let o=class extends u.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:n.SparqlOperator.COALESCE,apply:async({args:t,mapping:e,exprEval:r})=>{const a=[];for(const c of t)try{return await r.evaluatorExpressionEvaluation(c,e)}catch(s){a.push(s)}throw new n.CoalesceError(a)}})}};return D1.ExpressionFunctionCoalesce=o,D1}var XD;function aie(){if(XD)return P1;XD=1,Object.defineProperty(P1,"__esModule",{value:!0}),P1.ActorFunctionFactoryExpressionCoalesce=void 0;const u=Te(),n=ge(),o=iie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.COALESCE],termFunction:!1})}async run(e){return new o.ExpressionFunctionCoalesce}};return P1.ActorFunctionFactoryExpressionCoalesce=i,P1}var JD;function uie(){return JD||(JD=1,(function(u){var n=Co&&Co.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Co&&Co.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(aie(),u)})(Co)),Co}var qo={},j1={},L1={},kD;function oie(){if(kD)return L1;kD=1,Object.defineProperty(L1,"__esModule",{value:!0}),L1.ExpressionFunctionConcat=void 0;const u=Te(),n=Ce(),o=ge();let i=class qA extends u.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:o.SparqlOperator.CONCAT,apply:async e=>{const{args:r,mapping:a,exprEval:c}=e,s=r.map(async p=>c.evaluatorExpressionEvaluation(p,a)).map(async p=>{const y=qA.concatTree.search([await p],c.context.getSafe(n.KeysExpressionEvaluator.superTypeProvider),c.context.getSafe(n.KeysInitQuery.functionArgumentsCache));if(!y)throw new o.InvalidArgumentTypes(r,o.SparqlOperator.CONCAT);return y(c)([await p])}),d=await Promise.all(s),f=d.map(p=>p.typedValue).join(""),h=qA.langAllEqual(d)?d[0].language:void 0;return h?(0,o.langString)(f,h):(0,o.string)(f)}})}static langAllEqual(e){return e.length>0&&e.every(r=>r.language===e[0].language)}};return L1.ExpressionFunctionConcat=i,i.concatTree=(0,o.declare)(o.SparqlOperator.CONCAT).onStringly1(()=>t=>t).collect(),L1}var KD;function sie(){if(KD)return j1;KD=1,Object.defineProperty(j1,"__esModule",{value:!0}),j1.ActorFunctionFactoryExpressionConcat=void 0;const u=Te(),n=ge(),o=oie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.CONCAT],termFunction:!1})}async run(e){return new o.ExpressionFunctionConcat}};return j1.ActorFunctionFactoryExpressionConcat=i,j1}var WD;function cie(){return WD||(WD=1,(function(u){var n=qo&&qo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=qo&&qo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(sie(),u)})(qo)),qo}var Bo={},M1={},C1={},YD;function die(){if(YD)return C1;YD=1,Object.defineProperty(C1,"__esModule",{value:!0}),C1.NamedExtension=void 0;const u=wz(),n=Ce(),o=ge();let i=class extends u.ExpressionFunctionBase{constructor({operator:e,functionDefinition:r}){super({arity:Number.POSITIVE_INFINITY,operator:e,apply:async({args:a,exprEval:c,mapping:s})=>{const d=await Promise.all(a.map(l=>c.evaluatorExpressionEvaluation(l,s)));try{return new o.TermTransformer(c.context.getSafe(n.KeysExpressionEvaluator.superTypeProvider)).transformRDFTermUnsafe(await r(d.map(l=>l.toRDF(c.context.getSafe(n.KeysInitQuery.dataFactory)))))}catch(l){throw new o.ExtensionFunctionError(this.operator,l)}}})}};return C1.NamedExtension=i,C1}var ZD;function lie(){if(ZD)return M1;ZD=1,Object.defineProperty(M1,"__esModule",{value:!0}),M1.ActorFunctionFactoryExpressionExtensions=void 0;const u=Te(),n=Ce(),o=be(),i=hr(),t=die();let e=class extends u.ActorFunctionFactory{constructor(a){super(a)}async test({context:a,functionName:c}){return await a.getSafe(n.KeysExpressionEvaluator.extensionFunctionCreator)(new i.DataFactory().namedNode(c))?(0,o.passTestVoid)():(0,o.failTest)(`Actor ${this.name} can only provide non-termExpression implementations for functions that are provided through config entries like: ${n.KeysInitQuery.extensionFunctionCreator.name} or ${n.KeysInitQuery.extensionFunctions.name}`)}async run({context:a,functionName:c}){const d=await a.getSafe(n.KeysExpressionEvaluator.extensionFunctionCreator)(new i.DataFactory().namedNode(c));return new t.NamedExtension({operator:c,functionDefinition:d})}};return M1.ActorFunctionFactoryExpressionExtensions=e,M1}var e7;function fie(){return e7||(e7=1,(function(u){var n=Bo&&Bo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Bo&&Bo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(lie(),u)})(Bo)),Bo}var $o={},q1={},B1={},t7;function hie(){if(t7)return B1;t7=1,Object.defineProperty(B1,"__esModule",{value:!0}),B1.ExpressionFunctionIf=void 0;const u=Te(),n=ge();let o=class extends u.ExpressionFunctionBase{constructor(){super({arity:3,operator:n.SparqlOperator.IF,apply:async({args:t,mapping:e,exprEval:r})=>(await r.evaluatorExpressionEvaluation(t[0],e)).coerceEBV()?r.evaluatorExpressionEvaluation(t[1],e):r.evaluatorExpressionEvaluation(t[2],e)})}};return B1.ExpressionFunctionIf=o,B1}var r7;function pie(){if(r7)return q1;r7=1,Object.defineProperty(q1,"__esModule",{value:!0}),q1.ActorFunctionFactoryExpressionIf=void 0;const u=Te(),n=ge(),o=hie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.IF],termFunction:!1})}async run(e){return new o.ExpressionFunctionIf}};return q1.ActorFunctionFactoryExpressionIf=i,q1}var n7;function bie(){return n7||(n7=1,(function(u){var n=$o&&$o.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=$o&&$o.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(pie(),u)})($o)),$o}var Uo={},$1={},U1={},i7;function yie(){if(i7)return U1;i7=1,Object.defineProperty(U1,"__esModule",{value:!0}),U1.ExpressionFunctionLogicalAnd=void 0;const u=Te(),n=ge();let o=class extends u.ExpressionFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.LOGICAL_AND,apply:async({args:t,mapping:e,exprEval:r})=>{const[a,c]=t;try{if(!(await r.evaluatorExpressionEvaluation(a,e)).coerceEBV())return(0,n.bool)(!1);const f=(await r.evaluatorExpressionEvaluation(c,e)).coerceEBV();return(0,n.bool)(f)}catch(s){if((await r.evaluatorExpressionEvaluation(c,e)).coerceEBV())throw s;return(0,n.bool)(!1)}}})}};return U1.ExpressionFunctionLogicalAnd=o,U1}var a7;function _ie(){if(a7)return $1;a7=1,Object.defineProperty($1,"__esModule",{value:!0}),$1.ActorFunctionFactoryExpressionLogicalAnd=void 0;const u=Te(),n=ge(),o=yie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.LOGICAL_AND],termFunction:!1})}async run(e){return new o.ExpressionFunctionLogicalAnd}};return $1.ActorFunctionFactoryExpressionLogicalAnd=i,$1}var u7;function gie(){return u7||(u7=1,(function(u){var n=Uo&&Uo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Uo&&Uo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(_ie(),u)})(Uo)),Uo}var Vo={},V1={},Q1={},o7;function mie(){if(o7)return Q1;o7=1,Object.defineProperty(Q1,"__esModule",{value:!0}),Q1.ExpressionFunctionLogicalOr=void 0;const u=Te(),n=ge();let o=class extends u.ExpressionFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.LOGICAL_OR,apply:async({args:t,mapping:e,exprEval:r})=>{const[a,c]=t;try{if((await r.evaluatorExpressionEvaluation(a,e)).coerceEBV())return(0,n.bool)(!0);const f=(await r.evaluatorExpressionEvaluation(c,e)).coerceEBV();return(0,n.bool)(f)}catch(s){if(!(await r.evaluatorExpressionEvaluation(c,e)).coerceEBV())throw s;return(0,n.bool)(!0)}}})}};return Q1.ExpressionFunctionLogicalOr=o,Q1}var s7;function vie(){if(s7)return V1;s7=1,Object.defineProperty(V1,"__esModule",{value:!0}),V1.ActorFunctionFactoryExpressionLogicalOr=void 0;const u=Te(),n=ge(),o=mie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.LOGICAL_OR],termFunction:!1})}async run(e){return new o.ExpressionFunctionLogicalOr}};return V1.ActorFunctionFactoryExpressionLogicalOr=i,V1}var c7;function Tie(){return c7||(c7=1,(function(u){var n=Vo&&Vo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Vo&&Vo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(vie(),u)})(Vo)),Vo}var Qo={},H1={},G1={},d7;function wie(){if(d7)return G1;d7=1,Object.defineProperty(G1,"__esModule",{value:!0}),G1.ExpressionFunctionSameTerm=void 0;const u=Te(),n=Ce(),o=ge();let i=class extends u.ExpressionFunctionBase{constructor(){super({arity:2,operator:o.SparqlOperator.SAME_TERM,apply:async({args:e,mapping:r,exprEval:a})=>{const c=a.context.getSafe(n.KeysInitQuery.dataFactory),[s,d]=e.map(h=>a.evaluatorExpressionEvaluation(h,r)),[l,f]=await Promise.all([s,d]);return(0,o.bool)(l.toRDF(c).equals(f.toRDF(c)))}})}};return G1.ExpressionFunctionSameTerm=i,G1}var l7;function Sie(){if(l7)return H1;l7=1,Object.defineProperty(H1,"__esModule",{value:!0}),H1.ActorFunctionFactoryExpressionSameTerm=void 0;const u=Te(),n=ge(),o=wie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.SAME_TERM],termFunction:!1})}async run(e){return new o.ExpressionFunctionSameTerm}};return H1.ActorFunctionFactoryExpressionSameTerm=i,H1}var f7;function Aie(){return f7||(f7=1,(function(u){var n=Qo&&Qo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Qo&&Qo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Sie(),u)})(Qo)),Qo}var Ho={},z1={},X1={},h7;function Oie(){if(h7)return X1;h7=1,Object.defineProperty(X1,"__esModule",{value:!0}),X1.TermFunctionAbs=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.ABS,overloads:(0,n.declare)(n.SparqlOperator.ABS).numericConverter(()=>t=>Math.abs(t)).collect()})}};return X1.TermFunctionAbs=o,X1}var p7;function Eie(){if(p7)return z1;p7=1,Object.defineProperty(z1,"__esModule",{value:!0}),z1.ActorFunctionFactoryTermAbs=void 0;const u=Te(),n=ge(),o=Oie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.ABS],termFunction:!0})}async run(e){return new o.TermFunctionAbs}};return z1.ActorFunctionFactoryTermAbs=i,z1}var b7;function xie(){return b7||(b7=1,(function(u){var n=Ho&&Ho.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ho&&Ho.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Eie(),u)})(Ho)),Ho}var Go={},J1={},k1={},cw={exports:{}},Iie=cw.exports,y7;function Hw(){return y7||(y7=1,(function(u){(function(n){var o,i=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,t=Math.ceil,e=Math.floor,r="[BigNumber Error] ",a=r+"Number primitive has more than 15 significant digits: ",c=1e14,s=14,d=9007199254740991,l=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,h=1e9;function p(A){var I,q,O,w=te.prototype={constructor:te,toString:null,valueOf:null},S=new te(1),E=20,R=4,L=-7,M=21,B=-1e7,X=1e7,J=!1,ie=1,U=0,fe={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},me="0123456789abcdefghijklmnopqrstuvwxyz",he=!0;function te(Q,P){var D,x,N,$,G,V,k,H,Y=this;if(!(Y instanceof te))return new te(Q,P);if(P==null){if(Q&&Q._isBigNumber===!0){Y.s=Q.s,!Q.c||Q.e>X?Y.c=Y.e=null:Q.e<B?Y.c=[Y.e=0]:(Y.e=Q.e,Y.c=Q.c.slice());return}if((V=typeof Q=="number")&&Q*0==0){if(Y.s=1/Q<0?(Q=-Q,-1):1,Q===~~Q){for($=0,G=Q;G>=10;G/=10,$++);$>X?Y.c=Y.e=null:(Y.e=$,Y.c=[Q]);return}H=String(Q)}else{if(!i.test(H=String(Q)))return O(Y,H,V);Y.s=H.charCodeAt(0)==45?(H=H.slice(1),-1):1}($=H.indexOf("."))>-1&&(H=H.replace(".","")),(G=H.search(/e/i))>0?($<0&&($=G),$+=+H.slice(G+1),H=H.substring(0,G)):$<0&&($=H.length)}else{if(m(P,2,me.length,"Base"),P==10&&he)return Y=new te(Q),pe(Y,E+Y.e+1,R);if(H=String(Q),V=typeof Q=="number"){if(Q*0!=0)return O(Y,H,V,P);if(Y.s=1/Q<0?(H=H.slice(1),-1):1,te.DEBUG&&H.replace(/^0\.0*|\./,"").length>15)throw Error(a+Q)}else Y.s=H.charCodeAt(0)===45?(H=H.slice(1),-1):1;for(D=me.slice(0,P),$=G=0,k=H.length;G<k;G++)if(D.indexOf(x=H.charAt(G))<0){if(x=="."){if(G>$){$=k;continue}}else if(!N&&(H==H.toUpperCase()&&(H=H.toLowerCase())||H==H.toLowerCase()&&(H=H.toUpperCase()))){N=!0,G=-1,$=0;continue}return O(Y,String(Q),V,P)}V=!1,H=q(H,P,10,Y.s),($=H.indexOf("."))>-1?H=H.replace(".",""):$=H.length}for(G=0;H.charCodeAt(G)===48;G++);for(k=H.length;H.charCodeAt(--k)===48;);if(H=H.slice(G,++k)){if(k-=G,V&&te.DEBUG&&k>15&&(Q>d||Q!==e(Q)))throw Error(a+Y.s*Q);if(($=$-G-1)>X)Y.c=Y.e=null;else if($<B)Y.c=[Y.e=0];else{if(Y.e=$,Y.c=[],G=($+1)%s,$<0&&(G+=s),G<k){for(G&&Y.c.push(+H.slice(0,G)),k-=s;G<k;)Y.c.push(+H.slice(G,G+=s));G=s-(H=H.slice(G)).length}else G-=k;for(;G--;H+="0");Y.c.push(+H)}}else Y.c=[Y.e=0]}te.clone=p,te.ROUND_UP=0,te.ROUND_DOWN=1,te.ROUND_CEIL=2,te.ROUND_FLOOR=3,te.ROUND_HALF_UP=4,te.ROUND_HALF_DOWN=5,te.ROUND_HALF_EVEN=6,te.ROUND_HALF_CEIL=7,te.ROUND_HALF_FLOOR=8,te.EUCLID=9,te.config=te.set=function(Q){var P,D;if(Q!=null)if(typeof Q=="object"){if(Q.hasOwnProperty(P="DECIMAL_PLACES")&&(D=Q[P],m(D,0,h,P),E=D),Q.hasOwnProperty(P="ROUNDING_MODE")&&(D=Q[P],m(D,0,8,P),R=D),Q.hasOwnProperty(P="EXPONENTIAL_AT")&&(D=Q[P],D&&D.pop?(m(D[0],-h,0,P),m(D[1],0,h,P),L=D[0],M=D[1]):(m(D,-h,h,P),L=-(M=D<0?-D:D))),Q.hasOwnProperty(P="RANGE"))if(D=Q[P],D&&D.pop)m(D[0],-h,-1,P),m(D[1],1,h,P),B=D[0],X=D[1];else if(m(D,-h,h,P),D)B=-(X=D<0?-D:D);else throw Error(r+P+" cannot be zero: "+D);if(Q.hasOwnProperty(P="CRYPTO"))if(D=Q[P],D===!!D)if(D)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))J=D;else throw J=!D,Error(r+"crypto unavailable");else J=D;else throw Error(r+P+" not true or false: "+D);if(Q.hasOwnProperty(P="MODULO_MODE")&&(D=Q[P],m(D,0,9,P),ie=D),Q.hasOwnProperty(P="POW_PRECISION")&&(D=Q[P],m(D,0,h,P),U=D),Q.hasOwnProperty(P="FORMAT"))if(D=Q[P],typeof D=="object")fe=D;else throw Error(r+P+" not an object: "+D);if(Q.hasOwnProperty(P="ALPHABET"))if(D=Q[P],typeof D=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(D))he=D.slice(0,10)=="0123456789",me=D;else throw Error(r+P+" invalid: "+D)}else throw Error(r+"Object expected: "+Q);return{DECIMAL_PLACES:E,ROUNDING_MODE:R,EXPONENTIAL_AT:[L,M],RANGE:[B,X],CRYPTO:J,MODULO_MODE:ie,POW_PRECISION:U,FORMAT:fe,ALPHABET:me}},te.isBigNumber=function(Q){if(!Q||Q._isBigNumber!==!0)return!1;if(!te.DEBUG)return!0;var P,D,x=Q.c,N=Q.e,$=Q.s;e:if({}.toString.call(x)=="[object Array]"){if(($===1||$===-1)&&N>=-h&&N<=h&&N===e(N)){if(x[0]===0){if(N===0&&x.length===1)return!0;break e}if(P=(N+1)%s,P<1&&(P+=s),String(x[0]).length==P){for(P=0;P<x.length;P++)if(D=x[P],D<0||D>=c||D!==e(D))break e;if(D!==0)return!0}}}else if(x===null&&N===null&&($===null||$===1||$===-1))return!0;throw Error(r+"Invalid BigNumber: "+Q)},te.maximum=te.max=function(){return Ie(arguments,-1)},te.minimum=te.min=function(){return Ie(arguments,1)},te.random=(function(){var Q=9007199254740992,P=Math.random()*Q&2097151?function(){return e(Math.random()*Q)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(D){var x,N,$,G,V,k=0,H=[],Y=new te(S);if(D==null?D=E:m(D,0,h),G=t(D/s),J)if(crypto.getRandomValues){for(x=crypto.getRandomValues(new Uint32Array(G*=2));k<G;)V=x[k]*131072+(x[k+1]>>>11),V>=9e15?(N=crypto.getRandomValues(new Uint32Array(2)),x[k]=N[0],x[k+1]=N[1]):(H.push(V%1e14),k+=2);k=G/2}else if(crypto.randomBytes){for(x=crypto.randomBytes(G*=7);k<G;)V=(x[k]&31)*281474976710656+x[k+1]*1099511627776+x[k+2]*4294967296+x[k+3]*16777216+(x[k+4]<<16)+(x[k+5]<<8)+x[k+6],V>=9e15?crypto.randomBytes(7).copy(x,k):(H.push(V%1e14),k+=7);k=G/7}else throw J=!1,Error(r+"crypto unavailable");if(!J)for(;k<G;)V=P(),V<9e15&&(H[k++]=V%1e14);for(G=H[--k],D%=s,G&&D&&(V=l[s-D],H[k]=e(G/V)*V);H[k]===0;H.pop(),k--);if(k<0)H=[$=0];else{for($=-1;H[0]===0;H.splice(0,1),$-=s);for(k=1,V=H[0];V>=10;V/=10,k++);k<s&&($-=s-k)}return Y.e=$,Y.c=H,Y}})(),te.sum=function(){for(var Q=1,P=arguments,D=new te(P[0]);Q<P.length;)D=D.plus(P[Q++]);return D},q=(function(){var Q="0123456789";function P(D,x,N,$){for(var G,V=[0],k,H=0,Y=D.length;H<Y;){for(k=V.length;k--;V[k]*=x);for(V[0]+=$.indexOf(D.charAt(H++)),G=0;G<V.length;G++)V[G]>N-1&&(V[G+1]==null&&(V[G+1]=0),V[G+1]+=V[G]/N|0,V[G]%=N)}return V.reverse()}return function(D,x,N,$,G){var V,k,H,Y,se,ce,Se,Me,Ae=D.indexOf("."),oe=E,C=R;for(Ae>=0&&(Y=U,U=0,D=D.replace(".",""),Me=new te(x),ce=Me.pow(D.length-Ae),U=Y,Me.c=P(v(_(ce.c),ce.e,"0"),10,N,Q),Me.e=Me.c.length),Se=P(D,x,N,G?(V=me,Q):(V=Q,me)),H=Y=Se.length;Se[--Y]==0;Se.pop());if(!Se[0])return V.charAt(0);if(Ae<0?--H:(ce.c=Se,ce.e=H,ce.s=$,ce=I(ce,Me,oe,C,N),Se=ce.c,se=ce.r,H=ce.e),k=H+oe+1,Ae=Se[k],Y=N/2,se=se||k<0||Se[k+1]!=null,se=C<4?(Ae!=null||se)&&(C==0||C==(ce.s<0?3:2)):Ae>Y||Ae==Y&&(C==4||se||C==6&&Se[k-1]&1||C==(ce.s<0?8:7)),k<1||!Se[0])D=se?v(V.charAt(1),-oe,V.charAt(0)):V.charAt(0);else{if(Se.length=k,se)for(--N;++Se[--k]>N;)Se[k]=0,k||(++H,Se=[1].concat(Se));for(Y=Se.length;!Se[--Y];);for(Ae=0,D="";Ae<=Y;D+=V.charAt(Se[Ae++]));D=v(D,H,V.charAt(0))}return D}})(),I=(function(){function Q(x,N,$){var G,V,k,H,Y=0,se=x.length,ce=N%f,Se=N/f|0;for(x=x.slice();se--;)k=x[se]%f,H=x[se]/f|0,G=Se*k+H*ce,V=ce*k+G%f*f+Y,Y=(V/$|0)+(G/f|0)+Se*H,x[se]=V%$;return Y&&(x=[Y].concat(x)),x}function P(x,N,$,G){var V,k;if($!=G)k=$>G?1:-1;else for(V=k=0;V<$;V++)if(x[V]!=N[V]){k=x[V]>N[V]?1:-1;break}return k}function D(x,N,$,G){for(var V=0;$--;)x[$]-=V,V=x[$]<N[$]?1:0,x[$]=V*G+x[$]-N[$];for(;!x[0]&&x.length>1;x.splice(0,1));}return function(x,N,$,G,V){var k,H,Y,se,ce,Se,Me,Ae,oe,C,F,j,z,Z,le,ue,Pe,Ve=x.s==N.s?1:-1,Be=x.c,Ze=N.c;if(!Be||!Be[0]||!Ze||!Ze[0])return new te(!x.s||!N.s||(Be?Ze&&Be[0]==Ze[0]:!Ze)?NaN:Be&&Be[0]==0||!Ze?Ve*0:Ve/0);for(Ae=new te(Ve),oe=Ae.c=[],H=x.e-N.e,Ve=$+H+1,V||(V=c,H=y(x.e/s)-y(N.e/s),Ve=Ve/s|0),Y=0;Ze[Y]==(Be[Y]||0);Y++);if(Ze[Y]>(Be[Y]||0)&&H--,Ve<0)oe.push(1),se=!0;else{for(Z=Be.length,ue=Ze.length,Y=0,Ve+=2,ce=e(V/(Ze[0]+1)),ce>1&&(Ze=Q(Ze,ce,V),Be=Q(Be,ce,V),ue=Ze.length,Z=Be.length),z=ue,C=Be.slice(0,ue),F=C.length;F<ue;C[F++]=0);Pe=Ze.slice(),Pe=[0].concat(Pe),le=Ze[0],Ze[1]>=V/2&&le++;do{if(ce=0,k=P(Ze,C,ue,F),k<0){if(j=C[0],ue!=F&&(j=j*V+(C[1]||0)),ce=e(j/le),ce>1)for(ce>=V&&(ce=V-1),Se=Q(Ze,ce,V),Me=Se.length,F=C.length;P(Se,C,Me,F)==1;)ce--,D(Se,ue<Me?Pe:Ze,Me,V),Me=Se.length,k=1;else ce==0&&(k=ce=1),Se=Ze.slice(),Me=Se.length;if(Me<F&&(Se=[0].concat(Se)),D(C,Se,F,V),F=C.length,k==-1)for(;P(Ze,C,ue,F)<1;)ce++,D(C,ue<F?Pe:Ze,F,V),F=C.length}else k===0&&(ce++,C=[0]);oe[Y++]=ce,C[0]?C[F++]=Be[z]||0:(C=[Be[z]],F=1)}while((z++<Z||C[0]!=null)&&Ve--);se=C[0]!=null,oe[0]||oe.splice(0,1)}if(V==c){for(Y=1,Ve=oe[0];Ve>=10;Ve/=10,Y++);pe(Ae,$+(Ae.e=Y+H*s-1)+1,G,se)}else Ae.e=H,Ae.r=+se;return Ae}})();function xe(Q,P,D,x){var N,$,G,V,k;if(D==null?D=R:m(D,0,8),!Q.c)return Q.toString();if(N=Q.c[0],G=Q.e,P==null)k=_(Q.c),k=x==1||x==2&&(G<=L||G>=M)?T(k,G):v(k,G,"0");else if(Q=pe(new te(Q),P,D),$=Q.e,k=_(Q.c),V=k.length,x==1||x==2&&(P<=$||$<=L)){for(;V<P;k+="0",V++);k=T(k,$)}else if(P-=G+(x===2&&$>G),k=v(k,$,"0"),$+1>V){if(--P>0)for(k+=".";P--;k+="0");}else if(P+=$-V,P>0)for($+1==V&&(k+=".");P--;k+="0");return Q.s<0&&N?"-"+k:k}function Ie(Q,P){for(var D,x,N=1,$=new te(Q[0]);N<Q.length;N++)x=new te(Q[N]),(!x.s||(D=b($,x))===P||D===0&&$.s===P)&&($=x);return $}function Fe(Q,P,D){for(var x=1,N=P.length;!P[--N];P.pop());for(N=P[0];N>=10;N/=10,x++);return(D=x+D*s-1)>X?Q.c=Q.e=null:D<B?Q.c=[Q.e=0]:(Q.e=D,Q.c=P),Q}O=(function(){var Q=/^(-?)0([xbo])(?=\w[\w.]*$)/i,P=/^([^.]+)\.$/,D=/^\.([^.]+)$/,x=/^-?(Infinity|NaN)$/,N=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function($,G,V,k){var H,Y=V?G:G.replace(N,"");if(x.test(Y))$.s=isNaN(Y)?null:Y<0?-1:1;else{if(!V&&(Y=Y.replace(Q,function(se,ce,Se){return H=(Se=Se.toLowerCase())=="x"?16:Se=="b"?2:8,!k||k==H?ce:se}),k&&(H=k,Y=Y.replace(P,"$1").replace(D,"0.$1")),G!=Y))return new te(Y,H);if(te.DEBUG)throw Error(r+"Not a"+(k?" base "+k:"")+" number: "+G);$.s=null}$.c=$.e=null}})();function pe(Q,P,D,x){var N,$,G,V,k,H,Y,se=Q.c,ce=l;if(se){e:{for(N=1,V=se[0];V>=10;V/=10,N++);if($=P-N,$<0)$+=s,G=P,k=se[H=0],Y=e(k/ce[N-G-1]%10);else if(H=t(($+1)/s),H>=se.length)if(x){for(;se.length<=H;se.push(0));k=Y=0,N=1,$%=s,G=$-s+1}else break e;else{for(k=V=se[H],N=1;V>=10;V/=10,N++);$%=s,G=$-s+N,Y=G<0?0:e(k/ce[N-G-1]%10)}if(x=x||P<0||se[H+1]!=null||(G<0?k:k%ce[N-G-1]),x=D<4?(Y||x)&&(D==0||D==(Q.s<0?3:2)):Y>5||Y==5&&(D==4||x||D==6&&($>0?G>0?k/ce[N-G]:0:se[H-1])%10&1||D==(Q.s<0?8:7)),P<1||!se[0])return se.length=0,x?(P-=Q.e+1,se[0]=ce[(s-P%s)%s],Q.e=-P||0):se[0]=Q.e=0,Q;if($==0?(se.length=H,V=1,H--):(se.length=H+1,V=ce[s-$],se[H]=G>0?e(k/ce[N-G]%ce[G])*V:0),x)for(;;)if(H==0){for($=1,G=se[0];G>=10;G/=10,$++);for(G=se[0]+=V,V=1;G>=10;G/=10,V++);$!=V&&(Q.e++,se[0]==c&&(se[0]=1));break}else{if(se[H]+=V,se[H]!=c)break;se[H--]=0,V=1}for($=se.length;se[--$]===0;se.pop());}Q.e>X?Q.c=Q.e=null:Q.e<B&&(Q.c=[Q.e=0])}return Q}function ye(Q){var P,D=Q.e;return D===null?Q.toString():(P=_(Q.c),P=D<=L||D>=M?T(P,D):v(P,D,"0"),Q.s<0?"-"+P:P)}return w.absoluteValue=w.abs=function(){var Q=new te(this);return Q.s<0&&(Q.s=1),Q},w.comparedTo=function(Q,P){return b(this,new te(Q,P))},w.decimalPlaces=w.dp=function(Q,P){var D,x,N,$=this;if(Q!=null)return m(Q,0,h),P==null?P=R:m(P,0,8),pe(new te($),Q+$.e+1,P);if(!(D=$.c))return null;if(x=((N=D.length-1)-y(this.e/s))*s,N=D[N])for(;N%10==0;N/=10,x--);return x<0&&(x=0),x},w.dividedBy=w.div=function(Q,P){return I(this,new te(Q,P),E,R)},w.dividedToIntegerBy=w.idiv=function(Q,P){return I(this,new te(Q,P),0,1)},w.exponentiatedBy=w.pow=function(Q,P){var D,x,N,$,G,V,k,H,Y,se=this;if(Q=new te(Q),Q.c&&!Q.isInteger())throw Error(r+"Exponent not an integer: "+ye(Q));if(P!=null&&(P=new te(P)),V=Q.e>14,!se.c||!se.c[0]||se.c[0]==1&&!se.e&&se.c.length==1||!Q.c||!Q.c[0])return Y=new te(Math.pow(+ye(se),V?Q.s*(2-g(Q)):+ye(Q))),P?Y.mod(P):Y;if(k=Q.s<0,P){if(P.c?!P.c[0]:!P.s)return new te(NaN);x=!k&&se.isInteger()&&P.isInteger(),x&&(se=se.mod(P))}else{if(Q.e>9&&(se.e>0||se.e<-1||(se.e==0?se.c[0]>1||V&&se.c[1]>=24e7:se.c[0]<8e13||V&&se.c[0]<=9999975e7)))return $=se.s<0&&g(Q)?-0:0,se.e>-1&&($=1/$),new te(k?1/$:$);U&&($=t(U/s+2))}for(V?(D=new te(.5),k&&(Q.s=1),H=g(Q)):(N=Math.abs(+ye(Q)),H=N%2),Y=new te(S);;){if(H){if(Y=Y.times(se),!Y.c)break;$?Y.c.length>$&&(Y.c.length=$):x&&(Y=Y.mod(P))}if(N){if(N=e(N/2),N===0)break;H=N%2}else if(Q=Q.times(D),pe(Q,Q.e+1,1),Q.e>14)H=g(Q);else{if(N=+ye(Q),N===0)break;H=N%2}se=se.times(se),$?se.c&&se.c.length>$&&(se.c.length=$):x&&(se=se.mod(P))}return x?Y:(k&&(Y=S.div(Y)),P?Y.mod(P):$?pe(Y,U,R,G):Y)},w.integerValue=function(Q){var P=new te(this);return Q==null?Q=R:m(Q,0,8),pe(P,P.e+1,Q)},w.isEqualTo=w.eq=function(Q,P){return b(this,new te(Q,P))===0},w.isFinite=function(){return!!this.c},w.isGreaterThan=w.gt=function(Q,P){return b(this,new te(Q,P))>0},w.isGreaterThanOrEqualTo=w.gte=function(Q,P){return(P=b(this,new te(Q,P)))===1||P===0},w.isInteger=function(){return!!this.c&&y(this.e/s)>this.c.length-2},w.isLessThan=w.lt=function(Q,P){return b(this,new te(Q,P))<0},w.isLessThanOrEqualTo=w.lte=function(Q,P){return(P=b(this,new te(Q,P)))===-1||P===0},w.isNaN=function(){return!this.s},w.isNegative=function(){return this.s<0},w.isPositive=function(){return this.s>0},w.isZero=function(){return!!this.c&&this.c[0]==0},w.minus=function(Q,P){var D,x,N,$,G=this,V=G.s;if(Q=new te(Q,P),P=Q.s,!V||!P)return new te(NaN);if(V!=P)return Q.s=-P,G.plus(Q);var k=G.e/s,H=Q.e/s,Y=G.c,se=Q.c;if(!k||!H){if(!Y||!se)return Y?(Q.s=-P,Q):new te(se?G:NaN);if(!Y[0]||!se[0])return se[0]?(Q.s=-P,Q):new te(Y[0]?G:R==3?-0:0)}if(k=y(k),H=y(H),Y=Y.slice(),V=k-H){for(($=V<0)?(V=-V,N=Y):(H=k,N=se),N.reverse(),P=V;P--;N.push(0));N.reverse()}else for(x=($=(V=Y.length)<(P=se.length))?V:P,V=P=0;P<x;P++)if(Y[P]!=se[P]){$=Y[P]<se[P];break}if($&&(N=Y,Y=se,se=N,Q.s=-Q.s),P=(x=se.length)-(D=Y.length),P>0)for(;P--;Y[D++]=0);for(P=c-1;x>V;){if(Y[--x]<se[x]){for(D=x;D&&!Y[--D];Y[D]=P);--Y[D],Y[x]+=c}Y[x]-=se[x]}for(;Y[0]==0;Y.splice(0,1),--H);return Y[0]?Fe(Q,Y,H):(Q.s=R==3?-1:1,Q.c=[Q.e=0],Q)},w.modulo=w.mod=function(Q,P){var D,x,N=this;return Q=new te(Q,P),!N.c||!Q.s||Q.c&&!Q.c[0]?new te(NaN):!Q.c||N.c&&!N.c[0]?new te(N):(ie==9?(x=Q.s,Q.s=1,D=I(N,Q,0,3),Q.s=x,D.s*=x):D=I(N,Q,0,ie),Q=N.minus(D.times(Q)),!Q.c[0]&&ie==1&&(Q.s=N.s),Q)},w.multipliedBy=w.times=function(Q,P){var D,x,N,$,G,V,k,H,Y,se,ce,Se,Me,Ae,oe,C=this,F=C.c,j=(Q=new te(Q,P)).c;if(!F||!j||!F[0]||!j[0])return!C.s||!Q.s||F&&!F[0]&&!j||j&&!j[0]&&!F?Q.c=Q.e=Q.s=null:(Q.s*=C.s,!F||!j?Q.c=Q.e=null:(Q.c=[0],Q.e=0)),Q;for(x=y(C.e/s)+y(Q.e/s),Q.s*=C.s,k=F.length,se=j.length,k<se&&(Me=F,F=j,j=Me,N=k,k=se,se=N),N=k+se,Me=[];N--;Me.push(0));for(Ae=c,oe=f,N=se;--N>=0;){for(D=0,ce=j[N]%oe,Se=j[N]/oe|0,G=k,$=N+G;$>N;)H=F[--G]%oe,Y=F[G]/oe|0,V=Se*H+Y*ce,H=ce*H+V%oe*oe+Me[$]+D,D=(H/Ae|0)+(V/oe|0)+Se*Y,Me[$--]=H%Ae;Me[$]=D}return D?++x:Me.splice(0,1),Fe(Q,Me,x)},w.negated=function(){var Q=new te(this);return Q.s=-Q.s||null,Q},w.plus=function(Q,P){var D,x=this,N=x.s;if(Q=new te(Q,P),P=Q.s,!N||!P)return new te(NaN);if(N!=P)return Q.s=-P,x.minus(Q);var $=x.e/s,G=Q.e/s,V=x.c,k=Q.c;if(!$||!G){if(!V||!k)return new te(N/0);if(!V[0]||!k[0])return k[0]?Q:new te(V[0]?x:N*0)}if($=y($),G=y(G),V=V.slice(),N=$-G){for(N>0?(G=$,D=k):(N=-N,D=V),D.reverse();N--;D.push(0));D.reverse()}for(N=V.length,P=k.length,N-P<0&&(D=k,k=V,V=D,P=N),N=0;P;)N=(V[--P]=V[P]+k[P]+N)/c|0,V[P]=c===V[P]?0:V[P]%c;return N&&(V=[N].concat(V),++G),Fe(Q,V,G)},w.precision=w.sd=function(Q,P){var D,x,N,$=this;if(Q!=null&&Q!==!!Q)return m(Q,1,h),P==null?P=R:m(P,0,8),pe(new te($),Q,P);if(!(D=$.c))return null;if(N=D.length-1,x=N*s+1,N=D[N]){for(;N%10==0;N/=10,x--);for(N=D[0];N>=10;N/=10,x++);}return Q&&$.e+1>x&&(x=$.e+1),x},w.shiftedBy=function(Q){return m(Q,-d,d),this.times("1e"+Q)},w.squareRoot=w.sqrt=function(){var Q,P,D,x,N,$=this,G=$.c,V=$.s,k=$.e,H=E+4,Y=new te("0.5");if(V!==1||!G||!G[0])return new te(!V||V<0&&(!G||G[0])?NaN:G?$:1/0);if(V=Math.sqrt(+ye($)),V==0||V==1/0?(P=_(G),(P.length+k)%2==0&&(P+="0"),V=Math.sqrt(+P),k=y((k+1)/2)-(k<0||k%2),V==1/0?P="5e"+k:(P=V.toExponential(),P=P.slice(0,P.indexOf("e")+1)+k),D=new te(P)):D=new te(V+""),D.c[0]){for(k=D.e,V=k+H,V<3&&(V=0);;)if(N=D,D=Y.times(N.plus(I($,N,H,1))),_(N.c).slice(0,V)===(P=_(D.c)).slice(0,V))if(D.e<k&&--V,P=P.slice(V-3,V+1),P=="9999"||!x&&P=="4999"){if(!x&&(pe(N,N.e+E+2,0),N.times(N).eq($))){D=N;break}H+=4,V+=4,x=1}else{(!+P||!+P.slice(1)&&P.charAt(0)=="5")&&(pe(D,D.e+E+2,1),Q=!D.times(D).eq($));break}}return pe(D,D.e+E+1,R,Q)},w.toExponential=function(Q,P){return Q!=null&&(m(Q,0,h),Q++),xe(this,Q,P,1)},w.toFixed=function(Q,P){return Q!=null&&(m(Q,0,h),Q=Q+this.e+1),xe(this,Q,P)},w.toFormat=function(Q,P,D){var x,N=this;if(D==null)Q!=null&&P&&typeof P=="object"?(D=P,P=null):Q&&typeof Q=="object"?(D=Q,Q=P=null):D=fe;else if(typeof D!="object")throw Error(r+"Argument not an object: "+D);if(x=N.toFixed(Q,P),N.c){var $,G=x.split("."),V=+D.groupSize,k=+D.secondaryGroupSize,H=D.groupSeparator||"",Y=G[0],se=G[1],ce=N.s<0,Se=ce?Y.slice(1):Y,Me=Se.length;if(k&&($=V,V=k,k=$,Me-=$),V>0&&Me>0){for($=Me%V||V,Y=Se.substr(0,$);$<Me;$+=V)Y+=H+Se.substr($,V);k>0&&(Y+=H+Se.slice($)),ce&&(Y="-"+Y)}x=se?Y+(D.decimalSeparator||"")+((k=+D.fractionGroupSize)?se.replace(new RegExp("\\d{"+k+"}\\B","g"),"$&"+(D.fractionGroupSeparator||"")):se):Y}return(D.prefix||"")+x+(D.suffix||"")},w.toFraction=function(Q){var P,D,x,N,$,G,V,k,H,Y,se,ce,Se=this,Me=Se.c;if(Q!=null&&(V=new te(Q),!V.isInteger()&&(V.c||V.s!==1)||V.lt(S)))throw Error(r+"Argument "+(V.isInteger()?"out of range: ":"not an integer: ")+ye(V));if(!Me)return new te(Se);for(P=new te(S),H=D=new te(S),x=k=new te(S),ce=_(Me),$=P.e=ce.length-Se.e-1,P.c[0]=l[(G=$%s)<0?s+G:G],Q=!Q||V.comparedTo(P)>0?$>0?P:H:V,G=X,X=1/0,V=new te(ce),k.c[0]=0;Y=I(V,P,0,1),N=D.plus(Y.times(x)),N.comparedTo(Q)!=1;)D=x,x=N,H=k.plus(Y.times(N=H)),k=N,P=V.minus(Y.times(N=P)),V=N;return N=I(Q.minus(D),x,0,1),k=k.plus(N.times(H)),D=D.plus(N.times(x)),k.s=H.s=Se.s,$=$*2,se=I(H,x,$,R).minus(Se).abs().comparedTo(I(k,D,$,R).minus(Se).abs())<1?[H,x]:[k,D],X=G,se},w.toNumber=function(){return+ye(this)},w.toPrecision=function(Q,P){return Q!=null&&m(Q,1,h),xe(this,Q,P,2)},w.toString=function(Q){var P,D=this,x=D.s,N=D.e;return N===null?x?(P="Infinity",x<0&&(P="-"+P)):P="NaN":(Q==null?P=N<=L||N>=M?T(_(D.c),N):v(_(D.c),N,"0"):Q===10&&he?(D=pe(new te(D),E+N+1,R),P=v(_(D.c),D.e,"0")):(m(Q,2,me.length,"Base"),P=q(v(_(D.c),N,"0"),10,Q,x,!0)),x<0&&D.c[0]&&(P="-"+P)),P},w.valueOf=w.toJSON=function(){return ye(this)},w._isBigNumber=!0,A!=null&&te.set(A),te}function y(A){var I=A|0;return A>0||A===I?I:I-1}function _(A){for(var I,q,O=1,w=A.length,S=A[0]+"";O<w;){for(I=A[O++]+"",q=s-I.length;q--;I="0"+I);S+=I}for(w=S.length;S.charCodeAt(--w)===48;);return S.slice(0,w+1||1)}function b(A,I){var q,O,w=A.c,S=I.c,E=A.s,R=I.s,L=A.e,M=I.e;if(!E||!R)return null;if(q=w&&!w[0],O=S&&!S[0],q||O)return q?O?0:-R:E;if(E!=R)return E;if(q=E<0,O=L==M,!w||!S)return O?0:!w^q?1:-1;if(!O)return L>M^q?1:-1;for(R=(L=w.length)<(M=S.length)?L:M,E=0;E<R;E++)if(w[E]!=S[E])return w[E]>S[E]^q?1:-1;return L==M?0:L>M^q?1:-1}function m(A,I,q,O){if(A<I||A>q||A!==e(A))throw Error(r+(O||"Argument")+(typeof A=="number"?A<I||A>q?" out of range: ":" not an integer: ":" not a primitive number: ")+String(A))}function g(A){var I=A.c.length-1;return y(A.e/s)==I&&A.c[I]%2!=0}function T(A,I){return(A.length>1?A.charAt(0)+"."+A.slice(1):A)+(I<0?"e":"e+")+I}function v(A,I,q){var O,w;if(I<0){for(w=q+".";++I;w+=q);A=w+A}else if(O=A.length,++I>O){for(w=q,I-=O;--I;w+=q);A+=w}else I<O&&(A=A.slice(0,I)+"."+A.slice(I));return A}o=p(),o.default=o.BigNumber=o,u.exports?u.exports=o:(n||(n=typeof self<"u"&&self?self:window),n.BigNumber=o)})(Iie)})(cw)),cw.exports}var _7;function Rie(){if(_7)return k1;_7=1,Object.defineProperty(k1,"__esModule",{value:!0}),k1.TermFunctionAddition=void 0;const u=Te(),n=ge(),o=Hw();let i=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.ADDITION,overloads:(0,n.declare)(n.SparqlOperator.ADDITION).arithmetic(()=>(e,r)=>new o.BigNumber(e).plus(r).toNumber()).set([n.TypeURL.XSD_DATE_TIME,n.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,r])=>new n.DateTimeLiteral((0,n.addDurationToDateTime)(e.typedValue,(0,n.defaultedDurationRepresentation)(r.typedValue)))).copy({from:[n.TypeURL.XSD_DATE_TIME,n.TypeURL.XSD_DAY_TIME_DURATION],to:[n.TypeURL.XSD_DATE_TIME,n.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([n.TypeURL.XSD_DATE,n.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,r])=>new n.DateLiteral((0,n.addDurationToDateTime)((0,n.defaultedDateTimeRepresentation)(e.typedValue),(0,n.defaultedDurationRepresentation)(r.typedValue)))).copy({from:[n.TypeURL.XSD_DATE,n.TypeURL.XSD_DAY_TIME_DURATION],to:[n.TypeURL.XSD_DATE,n.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([n.TypeURL.XSD_TIME,n.TypeURL.XSD_DAY_TIME_DURATION],()=>([e,r])=>new n.TimeLiteral((0,n.addDurationToDateTime)((0,n.defaultedDateTimeRepresentation)(e.typedValue),(0,n.defaultedDurationRepresentation)(r.typedValue)))).copy({from:[n.TypeURL.XSD_TIME,n.TypeURL.XSD_DAY_TIME_DURATION],to:[n.TypeURL.XSD_TIME,n.TypeURL.XSD_YEAR_MONTH_DURATION]}).collect()})}};return k1.TermFunctionAddition=i,k1}var g7;function Fie(){if(g7)return J1;g7=1,Object.defineProperty(J1,"__esModule",{value:!0}),J1.ActorFunctionFactoryTermAddition=void 0;const u=Te(),n=ge(),o=Rie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.ADDITION],termFunction:!0})}async run(e){return new o.TermFunctionAddition}};return J1.ActorFunctionFactoryTermAddition=i,J1}var m7;function Nie(){return m7||(m7=1,(function(u){var n=Go&&Go.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Go&&Go.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Fie(),u)})(Go)),Go}var zo={},K1={},W1={},v7;function Pie(){if(v7)return W1;v7=1,Object.defineProperty(W1,"__esModule",{value:!0}),W1.TermFunctionCeil=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.CEIL,overloads:(0,n.declare)(n.SparqlOperator.CEIL).numericConverter(()=>t=>Math.ceil(t)).collect()})}};return W1.TermFunctionCeil=o,W1}var T7;function Die(){if(T7)return K1;T7=1,Object.defineProperty(K1,"__esModule",{value:!0}),K1.ActorFunctionFactoryTermCeil=void 0;const u=Te(),n=ge(),o=Pie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.CEIL],termFunction:!0})}async run(e){return new o.TermFunctionCeil}};return K1.ActorFunctionFactoryTermCeil=i,K1}var w7;function jie(){return w7||(w7=1,(function(u){var n=zo&&zo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=zo&&zo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Die(),u)})(zo)),zo}var Xo={},Y1={},Z1={},S7;function Lie(){if(S7)return Z1;S7=1,Object.defineProperty(Z1,"__esModule",{value:!0}),Z1.TermFunctionContains=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.CONTAINS,overloads:(0,n.declare)(n.SparqlOperator.CONTAINS).onBinaryTyped([n.TypeAlias.SPARQL_STRINGLY,n.TypeURL.XSD_STRING],()=>(t,e)=>(0,n.bool)(t.includes(e))).onBinary([n.TypeURL.RDF_LANG_STRING,n.TypeURL.RDF_LANG_STRING],()=>(t,e)=>{if(t.language!==e.language)throw new n.IncompatibleLanguageOperation(t,e);return(0,n.bool)(t.typedValue.includes(e.typedValue))}).collect()})}};return Z1.TermFunctionContains=o,Z1}var A7;function Mie(){if(A7)return Y1;A7=1,Object.defineProperty(Y1,"__esModule",{value:!0}),Y1.ActorFunctionFactoryTermContains=void 0;const u=Te(),n=ge(),o=Lie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.CONTAINS],termFunction:!0})}async run(e){return new o.TermFunctionContains}};return Y1.ActorFunctionFactoryTermContains=i,Y1}var O7;function Cie(){return O7||(O7=1,(function(u){var n=Xo&&Xo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Xo&&Xo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Mie(),u)})(Xo)),Xo}var Jo={},eb={},tb={},E7;function qie(){if(E7)return tb;E7=1,Object.defineProperty(tb,"__esModule",{value:!0}),tb.TermFunctionDatatype=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.DATATYPE,overloads:(0,n.declare)(n.SparqlOperator.DATATYPE).onLiteral1(()=>t=>new n.NamedNode(t.dataType)).collect()})}};return tb.TermFunctionDatatype=o,tb}var x7;function Bie(){if(x7)return eb;x7=1,Object.defineProperty(eb,"__esModule",{value:!0}),eb.ActorFunctionFactoryTermDatatype=void 0;const u=Te(),n=ge(),o=qie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.DATATYPE],termFunction:!0})}async run(e){return new o.TermFunctionDatatype}};return eb.ActorFunctionFactoryTermDatatype=i,eb}var I7;function $ie(){return I7||(I7=1,(function(u){var n=Jo&&Jo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Jo&&Jo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Bie(),u)})(Jo)),Jo}var ko={},rb={},nb={},R7;function Uie(){if(R7)return nb;R7=1,Object.defineProperty(nb,"__esModule",{value:!0}),nb.TermFunctionDay=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.DAY,overloads:(0,n.declare)(n.SparqlOperator.DAY).onDateTime1(()=>t=>(0,n.integer)(t.typedValue.day)).set([n.TypeURL.XSD_DATE],()=>([t])=>(0,n.integer)(t.typedValue.day)).collect()})}};return nb.TermFunctionDay=o,nb}var F7;function Vie(){if(F7)return rb;F7=1,Object.defineProperty(rb,"__esModule",{value:!0}),rb.ActorFunctionFactoryTermDay=void 0;const u=Te(),n=ge(),o=Uie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.DAY],termFunction:!0})}async run(e){return new o.TermFunctionDay}};return rb.ActorFunctionFactoryTermDay=i,rb}var N7;function Qie(){return N7||(N7=1,(function(u){var n=ko&&ko.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ko&&ko.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Vie(),u)})(ko)),ko}var Ko={},ib={},ab={},P7;function Hie(){if(P7)return ab;P7=1,Object.defineProperty(ab,"__esModule",{value:!0}),ab.TermFunctionDivision=void 0;const u=Te(),n=ge(),o=Hw();let i=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.DIVISION,overloads:(0,n.declare)(n.SparqlOperator.DIVISION).arithmetic(()=>(e,r)=>new o.BigNumber(e).div(r).toNumber()).onBinaryTyped([n.TypeURL.XSD_INTEGER,n.TypeURL.XSD_INTEGER],()=>(e,r)=>{if(r===0)throw new n.ExpressionError("Integer division by 0");return(0,n.decimal)(new o.BigNumber(e).div(r).toNumber())}).collect()})}};return ab.TermFunctionDivision=i,ab}var D7;function Gie(){if(D7)return ib;D7=1,Object.defineProperty(ib,"__esModule",{value:!0}),ib.ActorFunctionFactoryTermDivision=void 0;const u=Te(),n=ge(),o=Hie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.DIVISION],termFunction:!0})}async run(e){return new o.TermFunctionDivision}};return ib.ActorFunctionFactoryTermDivision=i,ib}var j7;function zie(){return j7||(j7=1,(function(u){var n=Ko&&Ko.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ko&&Ko.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Gie(),u)})(Ko)),Ko}var Wo={},ub={},ob={},L7;function Xie(){if(L7)return ob;L7=1,Object.defineProperty(ob,"__esModule",{value:!0}),ob.TermFunctionEncodeForUri=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.ENCODE_FOR_URI,overloads:(0,n.declare)(n.SparqlOperator.ENCODE_FOR_URI).onStringly1Typed(()=>t=>(0,n.string)(encodeURI(t))).collect()})}};return ob.TermFunctionEncodeForUri=o,ob}var M7;function Jie(){if(M7)return ub;M7=1,Object.defineProperty(ub,"__esModule",{value:!0}),ub.ActorFunctionFactoryTermEncodeForUri=void 0;const u=Te(),n=ge(),o=Xie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.ENCODE_FOR_URI],termFunction:!0})}async run(e){return new o.TermFunctionEncodeForUri}};return ub.ActorFunctionFactoryTermEncodeForUri=i,ub}var C7;function kie(){return C7||(C7=1,(function(u){var n=Wo&&Wo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Wo&&Wo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Jie(),u)})(Wo)),Wo}var Yo={},sb={},cb={},q7;function Kie(){if(q7)return cb;q7=1,Object.defineProperty(cb,"__esModule",{value:!0}),cb.TermFunctionEquality=void 0;const u=Te(),n=Ce(),o=ge();let i=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:o.SparqlOperator.EQUAL,overloads:(0,o.declare)(o.SparqlOperator.EQUAL).numberTest(()=>(e,r)=>e===r).stringTest(()=>(e,r)=>e.localeCompare(r)===0).set([o.TypeURL.RDF_LANG_STRING,o.TypeURL.RDF_LANG_STRING],()=>([e,r])=>(0,o.bool)(e.str()===r.str()&&e.language===r.language)).set([o.TypeAlias.SPARQL_STRINGLY,o.TypeAlias.SPARQL_STRINGLY],()=>()=>(0,o.bool)(!1)).booleanTest(()=>(e,r)=>e===r).dateTimeTest(e=>(r,a)=>(0,o.toUTCDate)(r,e.context.getSafe(n.KeysExpressionEvaluator.defaultTimeZone)).getTime()===(0,o.toUTCDate)(a,e.context.getSafe(n.KeysExpressionEvaluator.defaultTimeZone)).getTime()).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],to:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_DATE]}).set(["quad","quad"],e=>([r,a])=>(0,o.bool)(this.applyOnTerms([r.subject,a.subject],e).coerceEBV()&&this.applyOnTerms([r.predicate,a.predicate],e).coerceEBV()&&this.applyOnTerms([r.object,a.object],e).coerceEBV()&&this.applyOnTerms([r.graph,a.graph],e).coerceEBV()),!1).set(["term","term"],e=>([r,a])=>{const c=r.toRDF(e.context.getSafe(n.KeysInitQuery.dataFactory)),s=a.toRDF(e.context.getSafe(n.KeysInitQuery.dataFactory)),d=c.equals(s);if(!d&&c.termType==="Literal"&&s.termType==="Literal")throw new o.RDFEqualTypeError([r,a]);return(0,o.bool)(d)},!1).set([o.TypeURL.XSD_DURATION,o.TypeURL.XSD_DURATION],()=>([e,r])=>(0,o.bool)((0,o.yearMonthDurationsToMonths)((0,o.defaultedYearMonthDurationRepresentation)(e.typedValue))===(0,o.yearMonthDurationsToMonths)((0,o.defaultedYearMonthDurationRepresentation)(r.typedValue))&&(0,o.dayTimeDurationsToSeconds)((0,o.defaultedDayTimeDurationRepresentation)(e.typedValue))===(0,o.dayTimeDurationsToSeconds)((0,o.defaultedDayTimeDurationRepresentation)(r.typedValue)))).set([o.TypeURL.XSD_TIME,o.TypeURL.XSD_TIME],e=>([r,a])=>(0,o.bool)((0,o.toUTCDate)((0,o.defaultedDateTimeRepresentation)(r.typedValue),e.context.getSafe(n.KeysExpressionEvaluator.defaultTimeZone)).getTime()===(0,o.toUTCDate)((0,o.defaultedDateTimeRepresentation)(a.typedValue),e.context.getSafe(n.KeysExpressionEvaluator.defaultTimeZone)).getTime())).collect()})}};return cb.TermFunctionEquality=i,cb}var B7;function Wie(){if(B7)return sb;B7=1,Object.defineProperty(sb,"__esModule",{value:!0}),sb.ActorFunctionFactoryTermEquality=void 0;const u=Te(),n=ge(),o=Kie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.EQUAL],termFunction:!0})}async run(e){return new o.TermFunctionEquality}};return sb.ActorFunctionFactoryTermEquality=i,sb}var $7;function Yie(){return $7||($7=1,(function(u){var n=Yo&&Yo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Yo&&Yo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Wie(),u)})(Yo)),Yo}var Zo={},db={},lb={},U7;function Zie(){if(U7)return lb;U7=1,Object.defineProperty(lb,"__esModule",{value:!0}),lb.TermFunctionFloor=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.FLOOR,overloads:(0,n.declare)(n.SparqlOperator.FLOOR).numericConverter(()=>t=>Math.floor(t)).collect()})}};return lb.TermFunctionFloor=o,lb}var V7;function eae(){if(V7)return db;V7=1,Object.defineProperty(db,"__esModule",{value:!0}),db.ActorFunctionFactoryTermFloor=void 0;const u=Te(),n=ge(),o=Zie();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.FLOOR],termFunction:!0})}async run(e){return new o.TermFunctionFloor}};return db.ActorFunctionFactoryTermFloor=i,db}var Q7;function tae(){return Q7||(Q7=1,(function(u){var n=Zo&&Zo.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Zo&&Zo.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(eae(),u)})(Zo)),Zo}var es={},fb={},hb={},H7;function rae(){if(H7)return hb;H7=1,Object.defineProperty(hb,"__esModule",{value:!0}),hb.TermFunctionHours=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.HOURS,overloads:(0,n.declare)(n.SparqlOperator.HOURS).onDateTime1(()=>t=>(0,n.integer)(t.typedValue.hours)).set([n.TypeURL.XSD_TIME],()=>([t])=>(0,n.integer)(t.typedValue.hours)).collect()})}};return hb.TermFunctionHours=o,hb}var G7;function nae(){if(G7)return fb;G7=1,Object.defineProperty(fb,"__esModule",{value:!0}),fb.ActorFunctionFactoryTermHours=void 0;const u=Te(),n=ge(),o=rae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.HOURS],termFunction:!0})}async run(e){return new o.TermFunctionHours}};return fb.ActorFunctionFactoryTermHours=i,fb}var z7;function iae(){return z7||(z7=1,(function(u){var n=es&&es.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=es&&es.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(nae(),u)})(es)),es}var ts={},pb={},bb={},X7;function aae(){if(X7)return bb;X7=1,Object.defineProperty(bb,"__esModule",{value:!0}),bb.TermFunctionIri=void 0;const u=Te(),n=Ce(),o=ge(),i=cr();let t=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:o.SparqlOperator.IRI,overloads:(0,o.declare)(o.SparqlOperator.IRI).set(["namedNode"],r=>a=>{const c=a[0],s=(0,i.resolve)(c.str(),r.context.get(n.KeysInitQuery.baseIRI)??"");return new o.NamedNode(s)}).onString1(r=>a=>{const c=(0,i.resolve)(a.str(),r.context.get(n.KeysInitQuery.baseIRI)??"");return new o.NamedNode(c)}).collect()})}};return bb.TermFunctionIri=t,bb}var J7;function uae(){if(J7)return pb;J7=1,Object.defineProperty(pb,"__esModule",{value:!0}),pb.ActorFunctionFactoryTermIri=void 0;const u=Te(),n=ge(),o=aae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.IRI,n.SparqlOperator.URI],termFunction:!0})}async run(e){return new o.TermFunctionIri}};return pb.ActorFunctionFactoryTermIri=i,pb}var k7;function oae(){return k7||(k7=1,(function(u){var n=ts&&ts.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ts&&ts.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(uae(),u)})(ts)),ts}var rs={},yb={},_b={},K7;function sae(){if(K7)return _b;K7=1,Object.defineProperty(_b,"__esModule",{value:!0}),_b.TermFunctionIsBlank=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.IS_BLANK,overloads:(0,n.declare)(n.SparqlOperator.IS_BLANK).onTerm1(()=>t=>(0,n.bool)(t.termType==="blankNode")).collect()})}};return _b.TermFunctionIsBlank=o,_b}var W7;function cae(){if(W7)return yb;W7=1,Object.defineProperty(yb,"__esModule",{value:!0}),yb.ActorFunctionFactoryTermIsBlank=void 0;const u=Te(),n=ge(),o=sae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.IS_BLANK],termFunction:!0})}async run(e){return new o.TermFunctionIsBlank}};return yb.ActorFunctionFactoryTermIsBlank=i,yb}var Y7;function dae(){return Y7||(Y7=1,(function(u){var n=rs&&rs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=rs&&rs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(cae(),u)})(rs)),rs}var ns={},gb={},mb={},Z7;function lae(){if(Z7)return mb;Z7=1,Object.defineProperty(mb,"__esModule",{value:!0}),mb.TermFunctionIsIri=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.IS_IRI,overloads:(0,n.declare)(n.SparqlOperator.IS_IRI).onTerm1(()=>t=>(0,n.bool)(t.termType==="namedNode")).collect()})}};return mb.TermFunctionIsIri=o,mb}var ej;function fae(){if(ej)return gb;ej=1,Object.defineProperty(gb,"__esModule",{value:!0}),gb.ActorFunctionFactoryTermIsIri=void 0;const u=Te(),n=ge(),o=lae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.IS_IRI,n.SparqlOperator.IS_URI],termFunction:!0})}async run(e){return new o.TermFunctionIsIri}};return gb.ActorFunctionFactoryTermIsIri=i,gb}var tj;function hae(){return tj||(tj=1,(function(u){var n=ns&&ns.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ns&&ns.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(fae(),u)})(ns)),ns}var is={},vb={},Tb={},rj;function pae(){if(rj)return Tb;rj=1,Object.defineProperty(Tb,"__esModule",{value:!0}),Tb.TermFunctionIsLiteral=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.IS_LITERAL,overloads:(0,n.declare)(n.SparqlOperator.IS_LITERAL).onTerm1(()=>t=>(0,n.bool)(t.termType==="literal")).collect()})}};return Tb.TermFunctionIsLiteral=o,Tb}var nj;function bae(){if(nj)return vb;nj=1,Object.defineProperty(vb,"__esModule",{value:!0}),vb.ActorFunctionFactoryTermIsLiteral=void 0;const u=Te(),n=ge(),o=pae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.IS_LITERAL],termFunction:!0})}async run(e){return new o.TermFunctionIsLiteral}};return vb.ActorFunctionFactoryTermIsLiteral=i,vb}var ij;function yae(){return ij||(ij=1,(function(u){var n=is&&is.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=is&&is.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(bae(),u)})(is)),is}var as={},wb={},Sb={},aj;function _ae(){if(aj)return Sb;aj=1,Object.defineProperty(Sb,"__esModule",{value:!0}),Sb.TermFunctionIsNumeric=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.IS_NUMERIC,overloads:(0,n.declare)(n.SparqlOperator.IS_NUMERIC).onNumeric1(()=>()=>(0,n.bool)(!0)).onTerm1(()=>()=>(0,n.bool)(!1)).collect()})}};return Sb.TermFunctionIsNumeric=o,Sb}var uj;function gae(){if(uj)return wb;uj=1,Object.defineProperty(wb,"__esModule",{value:!0}),wb.ActorFunctionFactoryTermIsNumeric=void 0;const u=Te(),n=ge(),o=_ae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.IS_NUMERIC],termFunction:!0})}async run(e){return new o.TermFunctionIsNumeric}};return wb.ActorFunctionFactoryTermIsNumeric=i,wb}var oj;function mae(){return oj||(oj=1,(function(u){var n=as&&as.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=as&&as.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(gae(),u)})(as)),as}var us={},Ab={},Ob={},sj;function vae(){if(sj)return Ob;sj=1,Object.defineProperty(Ob,"__esModule",{value:!0}),Ob.TermFunctionIsTriple=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.IS_TRIPLE,overloads:(0,n.declare)(n.SparqlOperator.IS_TRIPLE).onTerm1(()=>t=>(0,n.bool)(t.termType==="quad")).collect()})}};return Ob.TermFunctionIsTriple=o,Ob}var cj;function Tae(){if(cj)return Ab;cj=1,Object.defineProperty(Ab,"__esModule",{value:!0}),Ab.ActorFunctionFactoryTermIsTriple=void 0;const u=Te(),n=ge(),o=vae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.IS_TRIPLE],termFunction:!0})}async run(e){return new o.TermFunctionIsTriple}};return Ab.ActorFunctionFactoryTermIsTriple=i,Ab}var dj;function wae(){return dj||(dj=1,(function(u){var n=us&&us.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=us&&us.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Tae(),u)})(us)),us}var os={},Eb={},xb={},lj;function Sae(){if(lj)return xb;lj=1,Object.defineProperty(xb,"__esModule",{value:!0}),xb.TermFunctionLang=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.LANG,overloads:(0,n.declare)(n.SparqlOperator.LANG).onLiteral1(()=>t=>(0,n.string)(t.language??"")).collect()})}};return xb.TermFunctionLang=o,xb}var fj;function Aae(){if(fj)return Eb;fj=1,Object.defineProperty(Eb,"__esModule",{value:!0}),Eb.ActorFunctionFactoryTermLang=void 0;const u=Te(),n=ge(),o=Sae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.LANG],termFunction:!0})}async run(e){return new o.TermFunctionLang}};return Eb.ActorFunctionFactoryTermLang=i,Eb}var hj;function Oae(){return hj||(hj=1,(function(u){var n=os&&os.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=os&&os.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Aae(),u)})(os)),os}var ss={},Ib={},Rb={},pj;function Eae(){if(pj)return Rb;pj=1,Object.defineProperty(Rb,"__esModule",{value:!0}),Rb.TermFunctionLangmatches=void 0;const u=Te(),n=ge();let o=class _f extends u.TermFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.LANG_MATCHES,overloads:(0,n.declare)(n.SparqlOperator.LANG_MATCHES).onBinaryTyped([n.TypeURL.XSD_STRING,n.TypeURL.XSD_STRING],()=>(t,e)=>(0,n.bool)(_f.langMatches(t,e))).collect()})}static langMatches(t,e){const r=t.split("-"),a=e.split("-");if(!_f.matchLangTag(a[0],r[0])&&!_f.isWildCard(r[0]))return!1;let c=1,s=1;for(;s<a.length;){if(_f.isWildCard(a[s])){s++;continue}if(c===r.length)return!1;if(_f.matchLangTag(a[s],r[c])){c++,s++;continue}if(r[c].length===1)return!1;c++}return!0}static isWildCard(t){return t==="*"}static matchLangTag(t,e){return new RegExp(`/${t}/`,"iu").test(`/${e}/`)}};return Rb.TermFunctionLangmatches=o,Rb}var bj;function xae(){if(bj)return Ib;bj=1,Object.defineProperty(Ib,"__esModule",{value:!0}),Ib.ActorFunctionFactoryTermLangmatches=void 0;const u=Te(),n=ge(),o=Eae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.LANG_MATCHES],termFunction:!0})}async run(e){return new o.TermFunctionLangmatches}};return Ib.ActorFunctionFactoryTermLangmatches=i,Ib}var yj;function Iae(){return yj||(yj=1,(function(u){var n=ss&&ss.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ss&&ss.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(xae(),u)})(ss)),ss}var cs={},Fb={},Nb={},_j;function Rae(){if(_j)return Nb;_j=1,Object.defineProperty(Nb,"__esModule",{value:!0}),Nb.TermFunctionLcase=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.LCASE,overloads:(0,n.declare)(n.SparqlOperator.LCASE).onString1Typed(()=>t=>(0,n.string)(t.toLowerCase())).onLangString1(()=>t=>(0,n.langString)(t.typedValue.toLowerCase(),t.language)).collect()})}};return Nb.TermFunctionLcase=o,Nb}var gj;function Fae(){if(gj)return Fb;gj=1,Object.defineProperty(Fb,"__esModule",{value:!0}),Fb.ActorFunctionFactoryTermLcase=void 0;const u=Te(),n=ge(),o=Rae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.LCASE],termFunction:!0})}async run(e){return new o.TermFunctionLcase}};return Fb.ActorFunctionFactoryTermLcase=i,Fb}var mj;function Nae(){return mj||(mj=1,(function(u){var n=cs&&cs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=cs&&cs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Fae(),u)})(cs)),cs}var ds={},Pb={},Db={},P4={exports:{}},vj;function Pae(){return vj||(vj=1,(function(u,n){(function(o){u.exports=o()})(function(o){var i=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function t(b,m){var g=b[0],T=b[1],v=b[2],A=b[3];g+=(T&v|~T&A)+m[0]-680876936|0,g=(g<<7|g>>>25)+T|0,A+=(g&T|~g&v)+m[1]-389564586|0,A=(A<<12|A>>>20)+g|0,v+=(A&g|~A&T)+m[2]+606105819|0,v=(v<<17|v>>>15)+A|0,T+=(v&A|~v&g)+m[3]-1044525330|0,T=(T<<22|T>>>10)+v|0,g+=(T&v|~T&A)+m[4]-176418897|0,g=(g<<7|g>>>25)+T|0,A+=(g&T|~g&v)+m[5]+1200080426|0,A=(A<<12|A>>>20)+g|0,v+=(A&g|~A&T)+m[6]-1473231341|0,v=(v<<17|v>>>15)+A|0,T+=(v&A|~v&g)+m[7]-45705983|0,T=(T<<22|T>>>10)+v|0,g+=(T&v|~T&A)+m[8]+1770035416|0,g=(g<<7|g>>>25)+T|0,A+=(g&T|~g&v)+m[9]-1958414417|0,A=(A<<12|A>>>20)+g|0,v+=(A&g|~A&T)+m[10]-42063|0,v=(v<<17|v>>>15)+A|0,T+=(v&A|~v&g)+m[11]-1990404162|0,T=(T<<22|T>>>10)+v|0,g+=(T&v|~T&A)+m[12]+1804603682|0,g=(g<<7|g>>>25)+T|0,A+=(g&T|~g&v)+m[13]-40341101|0,A=(A<<12|A>>>20)+g|0,v+=(A&g|~A&T)+m[14]-1502002290|0,v=(v<<17|v>>>15)+A|0,T+=(v&A|~v&g)+m[15]+1236535329|0,T=(T<<22|T>>>10)+v|0,g+=(T&A|v&~A)+m[1]-165796510|0,g=(g<<5|g>>>27)+T|0,A+=(g&v|T&~v)+m[6]-1069501632|0,A=(A<<9|A>>>23)+g|0,v+=(A&T|g&~T)+m[11]+643717713|0,v=(v<<14|v>>>18)+A|0,T+=(v&g|A&~g)+m[0]-373897302|0,T=(T<<20|T>>>12)+v|0,g+=(T&A|v&~A)+m[5]-701558691|0,g=(g<<5|g>>>27)+T|0,A+=(g&v|T&~v)+m[10]+38016083|0,A=(A<<9|A>>>23)+g|0,v+=(A&T|g&~T)+m[15]-660478335|0,v=(v<<14|v>>>18)+A|0,T+=(v&g|A&~g)+m[4]-405537848|0,T=(T<<20|T>>>12)+v|0,g+=(T&A|v&~A)+m[9]+568446438|0,g=(g<<5|g>>>27)+T|0,A+=(g&v|T&~v)+m[14]-1019803690|0,A=(A<<9|A>>>23)+g|0,v+=(A&T|g&~T)+m[3]-187363961|0,v=(v<<14|v>>>18)+A|0,T+=(v&g|A&~g)+m[8]+1163531501|0,T=(T<<20|T>>>12)+v|0,g+=(T&A|v&~A)+m[13]-1444681467|0,g=(g<<5|g>>>27)+T|0,A+=(g&v|T&~v)+m[2]-51403784|0,A=(A<<9|A>>>23)+g|0,v+=(A&T|g&~T)+m[7]+1735328473|0,v=(v<<14|v>>>18)+A|0,T+=(v&g|A&~g)+m[12]-1926607734|0,T=(T<<20|T>>>12)+v|0,g+=(T^v^A)+m[5]-378558|0,g=(g<<4|g>>>28)+T|0,A+=(g^T^v)+m[8]-2022574463|0,A=(A<<11|A>>>21)+g|0,v+=(A^g^T)+m[11]+1839030562|0,v=(v<<16|v>>>16)+A|0,T+=(v^A^g)+m[14]-35309556|0,T=(T<<23|T>>>9)+v|0,g+=(T^v^A)+m[1]-1530992060|0,g=(g<<4|g>>>28)+T|0,A+=(g^T^v)+m[4]+1272893353|0,A=(A<<11|A>>>21)+g|0,v+=(A^g^T)+m[7]-155497632|0,v=(v<<16|v>>>16)+A|0,T+=(v^A^g)+m[10]-1094730640|0,T=(T<<23|T>>>9)+v|0,g+=(T^v^A)+m[13]+681279174|0,g=(g<<4|g>>>28)+T|0,A+=(g^T^v)+m[0]-358537222|0,A=(A<<11|A>>>21)+g|0,v+=(A^g^T)+m[3]-722521979|0,v=(v<<16|v>>>16)+A|0,T+=(v^A^g)+m[6]+76029189|0,T=(T<<23|T>>>9)+v|0,g+=(T^v^A)+m[9]-640364487|0,g=(g<<4|g>>>28)+T|0,A+=(g^T^v)+m[12]-421815835|0,A=(A<<11|A>>>21)+g|0,v+=(A^g^T)+m[15]+530742520|0,v=(v<<16|v>>>16)+A|0,T+=(v^A^g)+m[2]-995338651|0,T=(T<<23|T>>>9)+v|0,g+=(v^(T|~A))+m[0]-198630844|0,g=(g<<6|g>>>26)+T|0,A+=(T^(g|~v))+m[7]+1126891415|0,A=(A<<10|A>>>22)+g|0,v+=(g^(A|~T))+m[14]-1416354905|0,v=(v<<15|v>>>17)+A|0,T+=(A^(v|~g))+m[5]-57434055|0,T=(T<<21|T>>>11)+v|0,g+=(v^(T|~A))+m[12]+1700485571|0,g=(g<<6|g>>>26)+T|0,A+=(T^(g|~v))+m[3]-1894986606|0,A=(A<<10|A>>>22)+g|0,v+=(g^(A|~T))+m[10]-1051523|0,v=(v<<15|v>>>17)+A|0,T+=(A^(v|~g))+m[1]-2054922799|0,T=(T<<21|T>>>11)+v|0,g+=(v^(T|~A))+m[8]+1873313359|0,g=(g<<6|g>>>26)+T|0,A+=(T^(g|~v))+m[15]-30611744|0,A=(A<<10|A>>>22)+g|0,v+=(g^(A|~T))+m[6]-1560198380|0,v=(v<<15|v>>>17)+A|0,T+=(A^(v|~g))+m[13]+1309151649|0,T=(T<<21|T>>>11)+v|0,g+=(v^(T|~A))+m[4]-145523070|0,g=(g<<6|g>>>26)+T|0,A+=(T^(g|~v))+m[11]-1120210379|0,A=(A<<10|A>>>22)+g|0,v+=(g^(A|~T))+m[2]+718787259|0,v=(v<<15|v>>>17)+A|0,T+=(A^(v|~g))+m[9]-343485551|0,T=(T<<21|T>>>11)+v|0,b[0]=g+b[0]|0,b[1]=T+b[1]|0,b[2]=v+b[2]|0,b[3]=A+b[3]|0}function e(b){var m=[],g;for(g=0;g<64;g+=4)m[g>>2]=b.charCodeAt(g)+(b.charCodeAt(g+1)<<8)+(b.charCodeAt(g+2)<<16)+(b.charCodeAt(g+3)<<24);return m}function r(b){var m=[],g;for(g=0;g<64;g+=4)m[g>>2]=b[g]+(b[g+1]<<8)+(b[g+2]<<16)+(b[g+3]<<24);return m}function a(b){var m=b.length,g=[1732584193,-271733879,-1732584194,271733878],T,v,A,I,q,O;for(T=64;T<=m;T+=64)t(g,e(b.substring(T-64,T)));for(b=b.substring(T-64),v=b.length,A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T=0;T<v;T+=1)A[T>>2]|=b.charCodeAt(T)<<(T%4<<3);if(A[T>>2]|=128<<(T%4<<3),T>55)for(t(g,A),T=0;T<16;T+=1)A[T]=0;return I=m*8,I=I.toString(16).match(/(.*?)(.{0,8})$/),q=parseInt(I[2],16),O=parseInt(I[1],16)||0,A[14]=q,A[15]=O,t(g,A),g}function c(b){var m=b.length,g=[1732584193,-271733879,-1732584194,271733878],T,v,A,I,q,O;for(T=64;T<=m;T+=64)t(g,r(b.subarray(T-64,T)));for(b=T-64<m?b.subarray(T-64):new Uint8Array(0),v=b.length,A=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],T=0;T<v;T+=1)A[T>>2]|=b[T]<<(T%4<<3);if(A[T>>2]|=128<<(T%4<<3),T>55)for(t(g,A),T=0;T<16;T+=1)A[T]=0;return I=m*8,I=I.toString(16).match(/(.*?)(.{0,8})$/),q=parseInt(I[2],16),O=parseInt(I[1],16)||0,A[14]=q,A[15]=O,t(g,A),g}function s(b){var m="",g;for(g=0;g<4;g+=1)m+=i[b>>g*8+4&15]+i[b>>g*8&15];return m}function d(b){var m;for(m=0;m<b.length;m+=1)b[m]=s(b[m]);return b.join("")}d(a("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&(function(){function b(m,g){return m=m|0||0,m<0?Math.max(m+g,0):Math.min(m,g)}ArrayBuffer.prototype.slice=function(m,g){var T=this.byteLength,v=b(m,T),A=T,I,q,O,w;return g!==o&&(A=b(g,T)),v>A?new ArrayBuffer(0):(I=A-v,q=new ArrayBuffer(I),O=new Uint8Array(q),w=new Uint8Array(this,v,I),O.set(w),q)}})();function l(b){return/[\u0080-\uFFFF]/.test(b)&&(b=unescape(encodeURIComponent(b))),b}function f(b,m){var g=b.length,T=new ArrayBuffer(g),v=new Uint8Array(T),A;for(A=0;A<g;A+=1)v[A]=b.charCodeAt(A);return m?v:T}function h(b){return String.fromCharCode.apply(null,new Uint8Array(b))}function p(b,m,g){var T=new Uint8Array(b.byteLength+m.byteLength);return T.set(new Uint8Array(b)),T.set(new Uint8Array(m),b.byteLength),T}function y(b){var m=[],g=b.length,T;for(T=0;T<g-1;T+=2)m.push(parseInt(b.substr(T,2),16));return String.fromCharCode.apply(String,m)}function _(){this.reset()}return _.prototype.append=function(b){return this.appendBinary(l(b)),this},_.prototype.appendBinary=function(b){this._buff+=b,this._length+=b.length;var m=this._buff.length,g;for(g=64;g<=m;g+=64)t(this._hash,e(this._buff.substring(g-64,g)));return this._buff=this._buff.substring(g-64),this},_.prototype.end=function(b){var m=this._buff,g=m.length,T,v=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],A;for(T=0;T<g;T+=1)v[T>>2]|=m.charCodeAt(T)<<(T%4<<3);return this._finish(v,g),A=d(this._hash),b&&(A=y(A)),this.reset(),A},_.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},_.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},_.prototype.setState=function(b){return this._buff=b.buff,this._length=b.length,this._hash=b.hash,this},_.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},_.prototype._finish=function(b,m){var g=m,T,v,A;if(b[g>>2]|=128<<(g%4<<3),g>55)for(t(this._hash,b),g=0;g<16;g+=1)b[g]=0;T=this._length*8,T=T.toString(16).match(/(.*?)(.{0,8})$/),v=parseInt(T[2],16),A=parseInt(T[1],16)||0,b[14]=v,b[15]=A,t(this._hash,b)},_.hash=function(b,m){return _.hashBinary(l(b),m)},_.hashBinary=function(b,m){var g=a(b),T=d(g);return m?y(T):T},_.ArrayBuffer=function(){this.reset()},_.ArrayBuffer.prototype.append=function(b){var m=p(this._buff.buffer,b),g=m.length,T;for(this._length+=b.byteLength,T=64;T<=g;T+=64)t(this._hash,r(m.subarray(T-64,T)));return this._buff=T-64<g?new Uint8Array(m.buffer.slice(T-64)):new Uint8Array(0),this},_.ArrayBuffer.prototype.end=function(b){var m=this._buff,g=m.length,T=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],v,A;for(v=0;v<g;v+=1)T[v>>2]|=m[v]<<(v%4<<3);return this._finish(T,g),A=d(this._hash),b&&(A=y(A)),this.reset(),A},_.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},_.ArrayBuffer.prototype.getState=function(){var b=_.prototype.getState.call(this);return b.buff=h(b.buff),b},_.ArrayBuffer.prototype.setState=function(b){return b.buff=f(b.buff,!0),_.prototype.setState.call(this,b)},_.ArrayBuffer.prototype.destroy=_.prototype.destroy,_.ArrayBuffer.prototype._finish=_.prototype._finish,_.ArrayBuffer.hash=function(b,m){var g=c(new Uint8Array(b)),T=d(g);return m?y(T):T},_})})(P4)),P4.exports}var Tj;function Dae(){if(Tj)return Db;Tj=1,Object.defineProperty(Db,"__esModule",{value:!0}),Db.TermFunctionMd5=void 0;const u=Te(),n=ge(),o=Pae();let i=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.MD5,overloads:(0,n.declare)(n.SparqlOperator.MD5).onString1Typed(()=>e=>(0,n.string)((0,o.hash)(e))).collect()})}};return Db.TermFunctionMd5=i,Db}var wj;function jae(){if(wj)return Pb;wj=1,Object.defineProperty(Pb,"__esModule",{value:!0}),Pb.ActorFunctionFactoryTermMd5=void 0;const u=Te(),n=ge(),o=Dae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.MD5],termFunction:!0})}async run(e){return new o.TermFunctionMd5}};return Pb.ActorFunctionFactoryTermMd5=i,Pb}var Sj;function Lae(){return Sj||(Sj=1,(function(u){var n=ds&&ds.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ds&&ds.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(jae(),u)})(ds)),ds}var ls={},jb={},Lb={},Aj;function Mae(){if(Aj)return Lb;Aj=1,Object.defineProperty(Lb,"__esModule",{value:!0}),Lb.TermFunctionMinutes=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.MINUTES,overloads:(0,n.declare)(n.SparqlOperator.MINUTES).onDateTime1(()=>t=>(0,n.integer)(t.typedValue.minutes)).set([n.TypeURL.XSD_TIME],()=>([t])=>(0,n.integer)(t.typedValue.minutes)).collect()})}};return Lb.TermFunctionMinutes=o,Lb}var Oj;function Cae(){if(Oj)return jb;Oj=1,Object.defineProperty(jb,"__esModule",{value:!0}),jb.ActorFunctionFactoryTermMinutes=void 0;const u=Te(),n=ge(),o=Mae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.MINUTES],termFunction:!0})}async run(e){return new o.TermFunctionMinutes}};return jb.ActorFunctionFactoryTermMinutes=i,jb}var Ej;function qae(){return Ej||(Ej=1,(function(u){var n=ls&&ls.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ls&&ls.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Cae(),u)})(ls)),ls}var fs={},Mb={},Cb={},xj;function Bae(){if(xj)return Cb;xj=1,Object.defineProperty(Cb,"__esModule",{value:!0}),Cb.TermFunctionMonth=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.MONTH,overloads:(0,n.declare)(n.SparqlOperator.MONTH).onDateTime1(()=>t=>(0,n.integer)(t.typedValue.month)).set([n.TypeURL.XSD_DATE],()=>([t])=>(0,n.integer)(t.typedValue.month)).collect()})}};return Cb.TermFunctionMonth=o,Cb}var Ij;function $ae(){if(Ij)return Mb;Ij=1,Object.defineProperty(Mb,"__esModule",{value:!0}),Mb.ActorFunctionFactoryTermMonth=void 0;const u=Te(),n=ge(),o=Bae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.MONTH],termFunction:!0})}async run(e){return new o.TermFunctionMonth}};return Mb.ActorFunctionFactoryTermMonth=i,Mb}var Rj;function Uae(){return Rj||(Rj=1,(function(u){var n=fs&&fs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=fs&&fs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o($ae(),u)})(fs)),fs}var hs={},qb={},Bb={},Fj;function Vae(){if(Fj)return Bb;Fj=1,Object.defineProperty(Bb,"__esModule",{value:!0}),Bb.TermFunctionMultiplication=void 0;const u=Te(),n=ge(),o=Hw();let i=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.MULTIPLICATION,overloads:(0,n.declare)(n.SparqlOperator.MULTIPLICATION).arithmetic(()=>(e,r)=>new o.BigNumber(e).times(r).toNumber()).collect()})}};return Bb.TermFunctionMultiplication=i,Bb}var Nj;function Qae(){if(Nj)return qb;Nj=1,Object.defineProperty(qb,"__esModule",{value:!0}),qb.ActorFunctionFactoryTermMultiplication=void 0;const u=Te(),n=ge(),o=Vae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.MULTIPLICATION],termFunction:!0})}async run(e){return new o.TermFunctionMultiplication}};return qb.ActorFunctionFactoryTermMultiplication=i,qb}var Pj;function Hae(){return Pj||(Pj=1,(function(u){var n=hs&&hs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=hs&&hs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Qae(),u)})(hs)),hs}var ps={},$b={},Ub={},Dj;function Gae(){if(Dj)return Ub;Dj=1,Object.defineProperty(Ub,"__esModule",{value:!0}),Ub.TermFunctionNot=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.NOT,overloads:(0,n.declare)(n.SparqlOperator.NOT).onTerm1(()=>t=>(0,n.bool)(!t.coerceEBV())).collect()})}};return Ub.TermFunctionNot=o,Ub}var jj;function zae(){if(jj)return $b;jj=1,Object.defineProperty($b,"__esModule",{value:!0}),$b.ActorFunctionFactoryTermNot=void 0;const u=Te(),n=ge(),o=Gae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.NOT],termFunction:!0})}async run(e){return new o.TermFunctionNot}};return $b.ActorFunctionFactoryTermNot=i,$b}var Lj;function Xae(){return Lj||(Lj=1,(function(u){var n=ps&&ps.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ps&&ps.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(zae(),u)})(ps)),ps}var bs={},Vb={},Qb={},Mj;function Jae(){if(Mj)return Qb;Mj=1,Object.defineProperty(Qb,"__esModule",{value:!0}),Qb.TermFunctionNow=void 0;const u=Te(),n=Ce(),o=ge();let i=class extends u.TermFunctionBase{constructor(){super({arity:0,operator:o.SparqlOperator.NOW,overloads:(0,o.declare)(o.SparqlOperator.NOW).set([],e=>()=>new o.DateTimeLiteral((0,o.toDateTimeRepresentation)({date:e.context.getSafe(n.KeysInitQuery.queryTimestamp),timeZone:e.context.getSafe(n.KeysExpressionEvaluator.defaultTimeZone)}))).collect()})}};return Qb.TermFunctionNow=i,Qb}var Cj;function kae(){if(Cj)return Vb;Cj=1,Object.defineProperty(Vb,"__esModule",{value:!0}),Vb.ActorFunctionFactoryTermNow=void 0;const u=Te(),n=ge(),o=Jae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.NOW],termFunction:!0})}async run(e){return new o.TermFunctionNow}};return Vb.ActorFunctionFactoryTermNow=i,Vb}var qj;function Kae(){return qj||(qj=1,(function(u){var n=bs&&bs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=bs&&bs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(kae(),u)})(bs)),bs}var ys={},Hb={},Gb={},Bj;function Wae(){if(Bj)return Gb;Bj=1,Object.defineProperty(Gb,"__esModule",{value:!0}),Gb.TermFunctionObject=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.OBJECT,overloads:(0,n.declare)(n.SparqlOperator.OBJECT).onQuad1(()=>t=>t.object).collect()})}};return Gb.TermFunctionObject=o,Gb}var $j;function Yae(){if($j)return Hb;$j=1,Object.defineProperty(Hb,"__esModule",{value:!0}),Hb.ActorFunctionFactoryTermObject=void 0;const u=Te(),n=ge(),o=Wae();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.OBJECT],termFunction:!0})}async run(e){return new o.TermFunctionObject}};return Hb.ActorFunctionFactoryTermObject=i,Hb}var Uj;function Zae(){return Uj||(Uj=1,(function(u){var n=ys&&ys.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ys&&ys.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Yae(),u)})(ys)),ys}var _s={},zb={},Xb={},Vj;function eue(){if(Vj)return Xb;Vj=1,Object.defineProperty(Xb,"__esModule",{value:!0}),Xb.TermFunctionPredicate=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.PREDICATE,overloads:(0,n.declare)(n.SparqlOperator.PREDICATE).onQuad1(()=>t=>t.predicate).collect()})}};return Xb.TermFunctionPredicate=o,Xb}var Qj;function tue(){if(Qj)return zb;Qj=1,Object.defineProperty(zb,"__esModule",{value:!0}),zb.ActorFunctionFactoryTermPredicate=void 0;const u=Te(),n=ge(),o=eue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.PREDICATE],termFunction:!0})}async run(e){return new o.TermFunctionPredicate}};return zb.ActorFunctionFactoryTermPredicate=i,zb}var Hj;function rue(){return Hj||(Hj=1,(function(u){var n=_s&&_s.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=_s&&_s.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(tue(),u)})(_s)),_s}var gs={},Jb={},kb={},Gj;function nue(){if(Gj)return kb;Gj=1,Object.defineProperty(kb,"__esModule",{value:!0}),kb.TermFunctionRand=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:0,operator:n.SparqlOperator.RAND,overloads:(0,n.declare)(n.SparqlOperator.RAND).set([],()=>()=>(0,n.double)(Math.random())).collect()})}};return kb.TermFunctionRand=o,kb}var zj;function iue(){if(zj)return Jb;zj=1,Object.defineProperty(Jb,"__esModule",{value:!0}),Jb.ActorFunctionFactoryTermRand=void 0;const u=Te(),n=ge(),o=nue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.RAND],termFunction:!0})}async run(e){return new o.TermFunctionRand}};return Jb.ActorFunctionFactoryTermRand=i,Jb}var Xj;function aue(){return Xj||(Xj=1,(function(u){var n=gs&&gs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=gs&&gs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(iue(),u)})(gs)),gs}var ms={},Kb={},Wb={},Jj;function nJ(){if(Jj)return Wb;Jj=1,Object.defineProperty(Wb,"__esModule",{value:!0}),Wb.TermFunctionRegex=void 0;const u=Te(),n=ge();let o=class Vi extends u.TermFunctionBase{constructor(){super({arity:[2,3],operator:n.SparqlOperator.REGEX,overloads:(0,n.declare)(n.SparqlOperator.REGEX).onBinaryTyped([n.TypeAlias.SPARQL_STRINGLY,n.TypeURL.XSD_STRING],Vi.regex2).onTernaryTyped([n.TypeAlias.SPARQL_STRINGLY,n.TypeURL.XSD_STRING,n.TypeURL.XSD_STRING],Vi.regex3).collect()})}static regex2(){return(t,e)=>(0,n.bool)(Vi.matches(t,e))}static regex3(){return(t,e,r)=>(0,n.bool)(Vi.matches(t,e,r))}static matches(t,e,r=""){return r=Vi.cleanFlags(r),r.includes("x")&&(e=Vi.flagX(e)),r.includes("q")&&(e=Vi.flagQ(e)),new RegExp(e,r.replaceAll(/[qx]/gu,"")).test(t)}static cleanFlags(t){if(!/^[imsxq]*$/u.test(t))throw new Error("Invalid flags");const e=[...t].find((r,a,c)=>c.indexOf(r)!==a);if(e)throw new Error(`Duplicate flag: ${e}`);return t!=null&&t.includes("q")&&(t=t.replaceAll(/[msx]/gu,"")),`${t}u`}static flagX(t){if(!t)return t;let e=t[0];for(;["	",`
`,"\r"," "].includes(e);)t=t.slice(1),e=t[0];let r=e==="[";for(let a=1;a<t.length;a++){const c=t[a];["	",`
`,"\r"," "].includes(c)&&!r?(t=t.slice(0,a)+t.slice(a+1),a--):c==="["&&e!=="\\"?r=!0:c==="]"&&e!=="\\"&&(r=!1),e=c}return t}static flagQ(t){return t.replaceAll(/([?+*.{}()[\]\\|])/gu,"\\$1").replaceAll(/^\^/gu,"\\^").replaceAll(/\$$/gu,"\\$")}};return Wb.TermFunctionRegex=o,Wb}var kj;function uue(){if(kj)return Kb;kj=1,Object.defineProperty(Kb,"__esModule",{value:!0}),Kb.ActorFunctionFactoryTermRegex=void 0;const u=Te(),n=ge(),o=nJ();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.REGEX],termFunction:!0})}async run(e){return new o.TermFunctionRegex}};return Kb.ActorFunctionFactoryTermRegex=i,Kb}var Kj;function iJ(){return Kj||(Kj=1,(function(u){var n=ms&&ms.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ms&&ms.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(uue(),u),o(nJ(),u)})(ms)),ms}var vs={},Yb={},Zb={},Wj;function oue(){if(Wj)return Zb;Wj=1,Object.defineProperty(Zb,"__esModule",{value:!0}),Zb.TermFunctionReplace=void 0;const u=iJ(),n=Te(),o=ge();let i=class G3 extends n.TermFunctionBase{constructor(){super({arity:[3,4],operator:o.SparqlOperator.REPLACE,overloads:(0,o.declare)(o.SparqlOperator.REPLACE).onTernaryTyped([o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING],()=>(e,r,a)=>(0,o.string)(G3.replace(e,r,a))).set([o.TypeURL.RDF_LANG_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING],()=>([e,r,a])=>{const c=G3.replace(e.typedValue,r.typedValue,a.typedValue);return(0,o.langString)(c,e.language)}).onQuaternaryTyped([o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING],()=>(e,r,a,c)=>(0,o.string)(G3.replace(e,r,a,c))).set([o.TypeURL.RDF_LANG_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING,o.TypeURL.XSD_STRING],()=>([e,r,a,c])=>{const s=G3.replace(e.typedValue,r.typedValue,a.typedValue,c.typedValue);return(0,o.langString)(s,e.language)}).collect()})}static replace(e,r,a,c=""){return c=u.TermFunctionRegex.cleanFlags(c),c.includes("x")&&(r=u.TermFunctionRegex.flagX(r)),c.includes("q")?r=u.TermFunctionRegex.flagQ(r):a=a.replaceAll("$0",()=>"$&"),c=`${c.replaceAll(/[qx]/gu,"")}g`,e.replaceAll(new RegExp(r,c),a)}};return Zb.TermFunctionReplace=i,Zb}var Yj;function sue(){if(Yj)return Yb;Yj=1,Object.defineProperty(Yb,"__esModule",{value:!0}),Yb.ActorFunctionFactoryTermReplace=void 0;const u=Te(),n=ge(),o=oue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.REPLACE],termFunction:!0})}async run(e){return new o.TermFunctionReplace}};return Yb.ActorFunctionFactoryTermReplace=i,Yb}var Zj;function cue(){return Zj||(Zj=1,(function(u){var n=vs&&vs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=vs&&vs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(sue(),u)})(vs)),vs}var Ts={},ey={},ty={},eL;function due(){if(eL)return ty;eL=1,Object.defineProperty(ty,"__esModule",{value:!0}),ty.TermFunctionRound=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.ROUND,overloads:(0,n.declare)(n.SparqlOperator.ROUND).numericConverter(()=>t=>Math.round(t)).collect()})}};return ty.TermFunctionRound=o,ty}var tL;function lue(){if(tL)return ey;tL=1,Object.defineProperty(ey,"__esModule",{value:!0}),ey.ActorFunctionFactoryTermRound=void 0;const u=Te(),n=ge(),o=due();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.ROUND],termFunction:!0})}async run(e){return new o.TermFunctionRound}};return ey.ActorFunctionFactoryTermRound=i,ey}var rL;function fue(){return rL||(rL=1,(function(u){var n=Ts&&Ts.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ts&&Ts.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(lue(),u)})(Ts)),Ts}var ws={},ry={},ny={},nL;function hue(){if(nL)return ny;nL=1,Object.defineProperty(ny,"__esModule",{value:!0}),ny.TermFunctionSeconds=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.SECONDS,overloads:(0,n.declare)(n.SparqlOperator.SECONDS).onDateTime1(()=>t=>(0,n.decimal)(t.typedValue.seconds)).set([n.TypeURL.XSD_TIME],()=>([t])=>(0,n.integer)(t.typedValue.seconds)).collect()})}};return ny.TermFunctionSeconds=o,ny}var iL;function pue(){if(iL)return ry;iL=1,Object.defineProperty(ry,"__esModule",{value:!0}),ry.ActorFunctionFactoryTermSeconds=void 0;const u=Te(),n=ge(),o=hue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.SECONDS],termFunction:!0})}async run(e){return new o.TermFunctionSeconds}};return ry.ActorFunctionFactoryTermSeconds=i,ry}var aL;function bue(){return aL||(aL=1,(function(u){var n=ws&&ws.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ws&&ws.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(pue(),u)})(ws)),ws}var Ss={},iy={},ay={},uL;function yue(){if(uL)return ay;uL=1,Object.defineProperty(ay,"__esModule",{value:!0}),ay.TermFunctionSha1=void 0;const u=Te(),n=ge(),o=Rv();let i=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.SHA1,overloads:(0,n.declare)(n.SparqlOperator.SHA1).onString1Typed(()=>e=>(0,n.string)((0,o.sha1)().update(e).digest("hex"))).collect()})}};return ay.TermFunctionSha1=i,ay}var oL;function _ue(){if(oL)return iy;oL=1,Object.defineProperty(iy,"__esModule",{value:!0}),iy.ActorFunctionFactoryTermSha1=void 0;const u=Te(),n=ge(),o=yue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.SHA1],termFunction:!0})}async run(e){return new o.TermFunctionSha1}};return iy.ActorFunctionFactoryTermSha1=i,iy}var sL;function gue(){return sL||(sL=1,(function(u){var n=Ss&&Ss.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ss&&Ss.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(_ue(),u)})(Ss)),Ss}var As={},uy={},oy={},cL;function mue(){if(cL)return oy;cL=1,Object.defineProperty(oy,"__esModule",{value:!0}),oy.TermFunctionSha256=void 0;const u=Te(),n=ge(),o=Rv();let i=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.SHA256,overloads:(0,n.declare)(n.SparqlOperator.SHA256).onString1Typed(()=>e=>(0,n.string)((0,o.sha256)().update(e).digest("hex"))).collect()})}};return oy.TermFunctionSha256=i,oy}var dL;function vue(){if(dL)return uy;dL=1,Object.defineProperty(uy,"__esModule",{value:!0}),uy.ActorFunctionFactoryTermSha256=void 0;const u=Te(),n=ge(),o=mue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.SHA256],termFunction:!0})}async run(e){return new o.TermFunctionSha256}};return uy.ActorFunctionFactoryTermSha256=i,uy}var lL;function Tue(){return lL||(lL=1,(function(u){var n=As&&As.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=As&&As.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(vue(),u)})(As)),As}var Os={},sy={},cy={},fL;function wue(){if(fL)return cy;fL=1,Object.defineProperty(cy,"__esModule",{value:!0}),cy.TermFunctionSha384=void 0;const u=Te(),n=ge(),o=Rv();let i=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.SHA384,overloads:(0,n.declare)(n.SparqlOperator.SHA384).onString1Typed(()=>e=>(0,n.string)((0,o.sha384)().update(e).digest("hex"))).collect()})}};return cy.TermFunctionSha384=i,cy}var hL;function Sue(){if(hL)return sy;hL=1,Object.defineProperty(sy,"__esModule",{value:!0}),sy.ActorFunctionFactoryTermSha384=void 0;const u=Te(),n=ge(),o=wue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.SHA384],termFunction:!0})}async run(e){return new o.TermFunctionSha384}};return sy.ActorFunctionFactoryTermSha384=i,sy}var pL;function Aue(){return pL||(pL=1,(function(u){var n=Os&&Os.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Os&&Os.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Sue(),u)})(Os)),Os}var Es={},dy={},ly={},bL;function Oue(){if(bL)return ly;bL=1,Object.defineProperty(ly,"__esModule",{value:!0}),ly.TermFunctionSha512=void 0;const u=Te(),n=ge(),o=Rv();let i=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.SHA512,overloads:(0,n.declare)(n.SparqlOperator.SHA512).onString1Typed(()=>e=>(0,n.string)((0,o.sha512)().update(e).digest("hex"))).collect()})}};return ly.TermFunctionSha512=i,ly}var yL;function Eue(){if(yL)return dy;yL=1,Object.defineProperty(dy,"__esModule",{value:!0}),dy.ActorFunctionFactoryTermSha512=void 0;const u=Te(),n=ge(),o=Oue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.SHA512],termFunction:!0})}async run(e){return new o.TermFunctionSha512}};return dy.ActorFunctionFactoryTermSha512=i,dy}var _L;function xue(){return _L||(_L=1,(function(u){var n=Es&&Es.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Es&&Es.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Eue(),u)})(Es)),Es}var xs={},fy={},hy={},gL;function Iue(){if(gL)return hy;gL=1,Object.defineProperty(hy,"__esModule",{value:!0}),hy.TermFunctionStrAfter=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.STRAFTER,overloads:(0,n.declare)(n.SparqlOperator.STRAFTER).onBinaryTyped([n.TypeURL.XSD_STRING,n.TypeURL.XSD_STRING],()=>(t,e)=>(0,n.string)(t.slice(t.indexOf(e)).slice(e.length))).onBinary([n.TypeURL.RDF_LANG_STRING,n.TypeURL.XSD_STRING],()=>(t,e)=>{const[r,a]=[t.typedValue,e.typedValue],c=r.slice(r.indexOf(a)).slice(a.length);return c||!a?(0,n.langString)(c,t.language):(0,n.string)(c)}).onBinary([n.TypeURL.RDF_LANG_STRING,n.TypeURL.RDF_LANG_STRING],()=>(t,e)=>{if(t.language!==e.language)throw new n.IncompatibleLanguageOperation(t,e);const[r,a]=[t.typedValue,e.typedValue],c=r.slice(r.indexOf(a)).slice(a.length);return c||!a?(0,n.langString)(c,t.language):(0,n.string)(c)}).collect()})}};return hy.TermFunctionStrAfter=o,hy}var mL;function Rue(){if(mL)return fy;mL=1,Object.defineProperty(fy,"__esModule",{value:!0}),fy.ActorFunctionFactoryTermStrAfter=void 0;const u=Te(),n=ge(),o=Iue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.STRAFTER],termFunction:!0})}async run(e){return new o.TermFunctionStrAfter}};return fy.ActorFunctionFactoryTermStrAfter=i,fy}var vL;function Fue(){return vL||(vL=1,(function(u){var n=xs&&xs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=xs&&xs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Rue(),u)})(xs)),xs}var Is={},py={},by={},TL;function Nue(){if(TL)return by;TL=1,Object.defineProperty(by,"__esModule",{value:!0}),by.TermFunctionStrBefore=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.STRBEFORE,overloads:(0,n.declare)(n.SparqlOperator.STRBEFORE).onBinaryTyped([n.TypeURL.XSD_STRING,n.TypeURL.XSD_STRING],()=>(t,e)=>(0,n.string)(t.slice(0,Math.max(0,t.indexOf(e))))).onBinary([n.TypeURL.RDF_LANG_STRING,n.TypeURL.XSD_STRING],()=>(t,e)=>{const[r,a]=[t.typedValue,e.typedValue],c=t.typedValue.slice(0,Math.max(0,r.indexOf(a)));return c||!a?(0,n.langString)(c,t.language):(0,n.string)(c)}).onBinary([n.TypeURL.RDF_LANG_STRING,n.TypeURL.RDF_LANG_STRING],()=>(t,e)=>{if(t.language!==e.language)throw new n.IncompatibleLanguageOperation(t,e);const[r,a]=[t.typedValue,e.typedValue],c=t.typedValue.slice(0,Math.max(0,r.indexOf(a)));return c||!a?(0,n.langString)(c,t.language):(0,n.string)(c)}).collect()})}};return by.TermFunctionStrBefore=o,by}var wL;function Pue(){if(wL)return py;wL=1,Object.defineProperty(py,"__esModule",{value:!0}),py.ActorFunctionFactoryTermStrBefore=void 0;const u=Te(),n=ge(),o=Nue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.STRBEFORE],termFunction:!0})}async run(e){return new o.TermFunctionStrBefore}};return py.ActorFunctionFactoryTermStrBefore=i,py}var SL;function Due(){return SL||(SL=1,(function(u){var n=Is&&Is.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Is&&Is.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Pue(),u)})(Is)),Is}var Rs={},yy={},_y={},AL;function jue(){if(AL)return _y;AL=1,Object.defineProperty(_y,"__esModule",{value:!0}),_y.TermFunctionStrDt=void 0;const u=Te(),n=Ce(),o=ge();let i=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:o.SparqlOperator.STRDT,overloads:(0,o.declare)(o.SparqlOperator.STRDT).set([o.TypeURL.XSD_STRING,"namedNode"],e=>([r,a])=>{const c=e.context.getSafe(n.KeysInitQuery.dataFactory),s=c.literal(r.typedValue,c.namedNode(a.value));return new o.TermTransformer(e.context.getSafe(n.KeysExpressionEvaluator.superTypeProvider)).transformLiteral(s)}).collect()})}};return _y.TermFunctionStrDt=i,_y}var OL;function Lue(){if(OL)return yy;OL=1,Object.defineProperty(yy,"__esModule",{value:!0}),yy.ActorFunctionFactoryTermStrDt=void 0;const u=Te(),n=ge(),o=jue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.STRDT],termFunction:!0})}async run(e){return new o.TermFunctionStrDt}};return yy.ActorFunctionFactoryTermStrDt=i,yy}var EL;function Mue(){return EL||(EL=1,(function(u){var n=Rs&&Rs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Rs&&Rs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Lue(),u)})(Rs)),Rs}var Fs={},gy={},my={},xL;function Cue(){if(xL)return my;xL=1,Object.defineProperty(my,"__esModule",{value:!0}),my.TermFunctionStrEnds=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.STRENDS,overloads:(0,n.declare)(n.SparqlOperator.STRENDS).onBinaryTyped([n.TypeAlias.SPARQL_STRINGLY,n.TypeURL.XSD_STRING],()=>(t,e)=>(0,n.bool)(t.endsWith(e))).onBinary([n.TypeURL.RDF_LANG_STRING,n.TypeURL.RDF_LANG_STRING],()=>(t,e)=>{if(t.language!==e.language)throw new n.IncompatibleLanguageOperation(t,e);return(0,n.bool)(t.typedValue.endsWith(e.typedValue))}).collect()})}};return my.TermFunctionStrEnds=o,my}var IL;function que(){if(IL)return gy;IL=1,Object.defineProperty(gy,"__esModule",{value:!0}),gy.ActorFunctionFactoryTermStrEnds=void 0;const u=Te(),n=ge(),o=Cue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.STRENDS],termFunction:!0})}async run(e){return new o.TermFunctionStrEnds}};return gy.ActorFunctionFactoryTermStrEnds=i,gy}var RL;function Bue(){return RL||(RL=1,(function(u){var n=Fs&&Fs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Fs&&Fs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(que(),u)})(Fs)),Fs}var Ns={},vy={},Ty={},FL;function $ue(){if(FL)return Ty;FL=1,Object.defineProperty(Ty,"__esModule",{value:!0}),Ty.TermFunctionStrLang=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.STRLANG,overloads:(0,n.declare)(n.SparqlOperator.STRLANG).onBinaryTyped([n.TypeURL.XSD_STRING,n.TypeURL.XSD_STRING],()=>(t,e)=>new n.LangStringLiteral(t,e.toLowerCase())).collect()})}};return Ty.TermFunctionStrLang=o,Ty}var NL;function Uue(){if(NL)return vy;NL=1,Object.defineProperty(vy,"__esModule",{value:!0}),vy.ActorFunctionFactoryTermStrLang=void 0;const u=Te(),n=ge(),o=$ue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.STRLANG],termFunction:!0})}async run(e){return new o.TermFunctionStrLang}};return vy.ActorFunctionFactoryTermStrLang=i,vy}var PL;function Vue(){return PL||(PL=1,(function(u){var n=Ns&&Ns.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ns&&Ns.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Uue(),u)})(Ns)),Ns}var Ps={},wy={},Sy={},DL;function Que(){if(DL)return Sy;DL=1,Object.defineProperty(Sy,"__esModule",{value:!0}),Sy.TermFunctionStrLen=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.STRLEN,overloads:(0,n.declare)(n.SparqlOperator.STRLEN).onStringly1(()=>t=>(0,n.integer)([...t.typedValue].length)).collect()})}};return Sy.TermFunctionStrLen=o,Sy}var jL;function Hue(){if(jL)return wy;jL=1,Object.defineProperty(wy,"__esModule",{value:!0}),wy.ActorFunctionFactoryTermStrLen=void 0;const u=Te(),n=ge(),o=Que();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.STRLEN],termFunction:!0})}async run(e){return new o.TermFunctionStrLen}};return wy.ActorFunctionFactoryTermStrLen=i,wy}var LL;function Gue(){return LL||(LL=1,(function(u){var n=Ps&&Ps.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ps&&Ps.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Hue(),u)})(Ps)),Ps}var Ds={},Ay={},Oy={},ML;function zue(){if(ML)return Oy;ML=1,Object.defineProperty(Oy,"__esModule",{value:!0}),Oy.TermFunctionStrStarts=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:n.SparqlOperator.STRSTARTS,overloads:(0,n.declare)(n.SparqlOperator.STRSTARTS).onBinaryTyped([n.TypeAlias.SPARQL_STRINGLY,n.TypeURL.XSD_STRING],()=>(t,e)=>(0,n.bool)(t.startsWith(e))).onBinary([n.TypeURL.RDF_LANG_STRING,n.TypeURL.RDF_LANG_STRING],()=>(t,e)=>{if(t.language!==e.language)throw new n.IncompatibleLanguageOperation(t,e);return(0,n.bool)(t.typedValue.startsWith(e.typedValue))}).collect()})}};return Oy.TermFunctionStrStarts=o,Oy}var CL;function Xue(){if(CL)return Ay;CL=1,Object.defineProperty(Ay,"__esModule",{value:!0}),Ay.ActorFunctionFactoryTermStrStarts=void 0;const u=Te(),n=ge(),o=zue();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.STRSTARTS],termFunction:!0})}async run(e){return new o.TermFunctionStrStarts}};return Ay.ActorFunctionFactoryTermStrStarts=i,Ay}var qL;function Jue(){return qL||(qL=1,(function(u){var n=Ds&&Ds.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ds&&Ds.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Xue(),u)})(Ds)),Ds}var js={},Ey={},xy={},D4={},LT={},BL;function kue(){return BL||(BL=1,Object.defineProperty(LT,"__esModule",{value:!0}),LT.default="ffffffff-ffff-ffff-ffff-ffffffffffff"),LT}var MT={},$L;function Kue(){return $L||($L=1,Object.defineProperty(MT,"__esModule",{value:!0}),MT.default="00000000-0000-0000-0000-000000000000"),MT}var CT={},qT={},BT={},UL;function Wue(){return UL||(UL=1,Object.defineProperty(BT,"__esModule",{value:!0}),BT.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i),BT}var VL;function Gw(){if(VL)return qT;VL=1,Object.defineProperty(qT,"__esModule",{value:!0});const u=Wue();function n(o){return typeof o=="string"&&u.default.test(o)}return qT.default=n,qT}var QL;function zw(){if(QL)return CT;QL=1,Object.defineProperty(CT,"__esModule",{value:!0});const u=Gw();function n(o){if(!(0,u.default)(o))throw TypeError("Invalid UUID");let i;return Uint8Array.of((i=parseInt(o.slice(0,8),16))>>>24,i>>>16&255,i>>>8&255,i&255,(i=parseInt(o.slice(9,13),16))>>>8,i&255,(i=parseInt(o.slice(14,18),16))>>>8,i&255,(i=parseInt(o.slice(19,23),16))>>>8,i&255,(i=parseInt(o.slice(24,36),16))/1099511627776&255,i/4294967296&255,i>>>24&255,i>>>16&255,i>>>8&255,i&255)}return CT.default=n,CT}var ff={},HL;function aa(){if(HL)return ff;HL=1,Object.defineProperty(ff,"__esModule",{value:!0}),ff.unsafeStringify=void 0;const u=Gw(),n=[];for(let t=0;t<256;++t)n.push((t+256).toString(16).slice(1));function o(t,e=0){return(n[t[e+0]]+n[t[e+1]]+n[t[e+2]]+n[t[e+3]]+"-"+n[t[e+4]]+n[t[e+5]]+"-"+n[t[e+6]]+n[t[e+7]]+"-"+n[t[e+8]]+n[t[e+9]]+"-"+n[t[e+10]]+n[t[e+11]]+n[t[e+12]]+n[t[e+13]]+n[t[e+14]]+n[t[e+15]]).toLowerCase()}ff.unsafeStringify=o;function i(t,e=0){const r=o(t,e);if(!(0,u.default)(r))throw TypeError("Stringified UUID is invalid");return r}return ff.default=i,ff}var hf={},$T={},GL;function KO(){if(GL)return $T;GL=1,Object.defineProperty($T,"__esModule",{value:!0});let u;const n=new Uint8Array(16);function o(){if(!u){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");u=crypto.getRandomValues.bind(crypto)}return u(n)}return $T.default=o,$T}var zL;function aJ(){if(zL)return hf;zL=1,Object.defineProperty(hf,"__esModule",{value:!0}),hf.updateV1State=void 0;const u=KO(),n=aa(),o={};function i(r,a,c){var l;let s;const d=(r==null?void 0:r._v6)??!1;if(r){const f=Object.keys(r);f.length===1&&f[0]==="_v6"&&(r=void 0)}if(r)s=e(r.random??((l=r.rng)==null?void 0:l.call(r))??(0,u.default)(),r.msecs,r.nsecs,r.clockseq,r.node,a,c);else{const f=Date.now(),h=(0,u.default)();t(o,f,h),s=e(h,o.msecs,o.nsecs,d?void 0:o.clockseq,d?void 0:o.node,a,c)}return a??(0,n.unsafeStringify)(s)}function t(r,a,c){return r.msecs??(r.msecs=-1/0),r.nsecs??(r.nsecs=0),a===r.msecs?(r.nsecs++,r.nsecs>=1e4&&(r.node=void 0,r.nsecs=0)):a>r.msecs?r.nsecs=0:a<r.msecs&&(r.node=void 0),r.node||(r.node=c.slice(10,16),r.node[0]|=1,r.clockseq=(c[8]<<8|c[9])&16383),r.msecs=a,r}hf.updateV1State=t;function e(r,a,c,s,d,l,f=0){if(r.length<16)throw new Error("Random bytes length must be >= 16");if(!l)l=new Uint8Array(16),f=0;else if(f<0||f+16>l.length)throw new RangeError(`UUID byte range ${f}:${f+15} is out of buffer bounds`);a??(a=Date.now()),c??(c=0),s??(s=(r[8]<<8|r[9])&16383),d??(d=r.slice(10,16)),a+=122192928e5;const h=((a&268435455)*1e4+c)%4294967296;l[f++]=h>>>24&255,l[f++]=h>>>16&255,l[f++]=h>>>8&255,l[f++]=h&255;const p=a/4294967296*1e4&268435455;l[f++]=p>>>8&255,l[f++]=p&255,l[f++]=p>>>24&15|16,l[f++]=p>>>16&255,l[f++]=s>>>8|128,l[f++]=s&255;for(let y=0;y<6;++y)l[f++]=d[y];return l}return hf.default=i,hf}var UT={},XL;function uJ(){if(XL)return UT;XL=1,Object.defineProperty(UT,"__esModule",{value:!0});const u=zw(),n=aa();function o(t){const e=typeof t=="string"?(0,u.default)(t):t,r=i(e);return typeof t=="string"?(0,n.unsafeStringify)(r):r}UT.default=o;function i(t){return Uint8Array.of((t[6]&15)<<4|t[7]>>4&15,(t[7]&15)<<4|(t[4]&240)>>4,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,(t[1]&15)<<4|(t[2]&240)>>4,96|t[2]&15,t[3],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}return UT}var j4={},VT={},JL;function Yue(){if(JL)return VT;JL=1,Object.defineProperty(VT,"__esModule",{value:!0});function u(f){const h=t(f),p=i(h,f.length*8);return n(p)}function n(f){const h=new Uint8Array(f.length*4);for(let p=0;p<f.length*4;p++)h[p]=f[p>>2]>>>p%4*8&255;return h}function o(f){return(f+64>>>9<<4)+14+1}function i(f,h){const p=new Uint32Array(o(h)).fill(0);p.set(f),p[h>>5]|=128<<h%32,p[p.length-1]=h,f=p;let y=1732584193,_=-271733879,b=-1732584194,m=271733878;for(let g=0;g<f.length;g+=16){const T=y,v=_,A=b,I=m;y=c(y,_,b,m,f[g],7,-680876936),m=c(m,y,_,b,f[g+1],12,-389564586),b=c(b,m,y,_,f[g+2],17,606105819),_=c(_,b,m,y,f[g+3],22,-1044525330),y=c(y,_,b,m,f[g+4],7,-176418897),m=c(m,y,_,b,f[g+5],12,1200080426),b=c(b,m,y,_,f[g+6],17,-1473231341),_=c(_,b,m,y,f[g+7],22,-45705983),y=c(y,_,b,m,f[g+8],7,1770035416),m=c(m,y,_,b,f[g+9],12,-1958414417),b=c(b,m,y,_,f[g+10],17,-42063),_=c(_,b,m,y,f[g+11],22,-1990404162),y=c(y,_,b,m,f[g+12],7,1804603682),m=c(m,y,_,b,f[g+13],12,-40341101),b=c(b,m,y,_,f[g+14],17,-1502002290),_=c(_,b,m,y,f[g+15],22,1236535329),y=s(y,_,b,m,f[g+1],5,-165796510),m=s(m,y,_,b,f[g+6],9,-1069501632),b=s(b,m,y,_,f[g+11],14,643717713),_=s(_,b,m,y,f[g],20,-373897302),y=s(y,_,b,m,f[g+5],5,-701558691),m=s(m,y,_,b,f[g+10],9,38016083),b=s(b,m,y,_,f[g+15],14,-660478335),_=s(_,b,m,y,f[g+4],20,-405537848),y=s(y,_,b,m,f[g+9],5,568446438),m=s(m,y,_,b,f[g+14],9,-1019803690),b=s(b,m,y,_,f[g+3],14,-187363961),_=s(_,b,m,y,f[g+8],20,1163531501),y=s(y,_,b,m,f[g+13],5,-1444681467),m=s(m,y,_,b,f[g+2],9,-51403784),b=s(b,m,y,_,f[g+7],14,1735328473),_=s(_,b,m,y,f[g+12],20,-1926607734),y=d(y,_,b,m,f[g+5],4,-378558),m=d(m,y,_,b,f[g+8],11,-2022574463),b=d(b,m,y,_,f[g+11],16,1839030562),_=d(_,b,m,y,f[g+14],23,-35309556),y=d(y,_,b,m,f[g+1],4,-1530992060),m=d(m,y,_,b,f[g+4],11,1272893353),b=d(b,m,y,_,f[g+7],16,-155497632),_=d(_,b,m,y,f[g+10],23,-1094730640),y=d(y,_,b,m,f[g+13],4,681279174),m=d(m,y,_,b,f[g],11,-358537222),b=d(b,m,y,_,f[g+3],16,-722521979),_=d(_,b,m,y,f[g+6],23,76029189),y=d(y,_,b,m,f[g+9],4,-640364487),m=d(m,y,_,b,f[g+12],11,-421815835),b=d(b,m,y,_,f[g+15],16,530742520),_=d(_,b,m,y,f[g+2],23,-995338651),y=l(y,_,b,m,f[g],6,-198630844),m=l(m,y,_,b,f[g+7],10,1126891415),b=l(b,m,y,_,f[g+14],15,-1416354905),_=l(_,b,m,y,f[g+5],21,-57434055),y=l(y,_,b,m,f[g+12],6,1700485571),m=l(m,y,_,b,f[g+3],10,-1894986606),b=l(b,m,y,_,f[g+10],15,-1051523),_=l(_,b,m,y,f[g+1],21,-2054922799),y=l(y,_,b,m,f[g+8],6,1873313359),m=l(m,y,_,b,f[g+15],10,-30611744),b=l(b,m,y,_,f[g+6],15,-1560198380),_=l(_,b,m,y,f[g+13],21,1309151649),y=l(y,_,b,m,f[g+4],6,-145523070),m=l(m,y,_,b,f[g+11],10,-1120210379),b=l(b,m,y,_,f[g+2],15,718787259),_=l(_,b,m,y,f[g+9],21,-343485551),y=e(y,T),_=e(_,v),b=e(b,A),m=e(m,I)}return Uint32Array.of(y,_,b,m)}function t(f){if(f.length===0)return new Uint32Array;const h=new Uint32Array(o(f.length*8)).fill(0);for(let p=0;p<f.length;p++)h[p>>2]|=(f[p]&255)<<p%4*8;return h}function e(f,h){const p=(f&65535)+(h&65535);return(f>>16)+(h>>16)+(p>>16)<<16|p&65535}function r(f,h){return f<<h|f>>>32-h}function a(f,h,p,y,_,b){return e(r(e(e(h,f),e(y,b)),_),p)}function c(f,h,p,y,_,b,m){return a(h&p|~h&y,f,h,_,b,m)}function s(f,h,p,y,_,b,m){return a(h&y|p&~y,f,h,_,b,m)}function d(f,h,p,y,_,b,m){return a(h^p^y,f,h,_,b,m)}function l(f,h,p,y,_,b,m){return a(p^(h|~y),f,h,_,b,m)}return VT.default=u,VT}var Kn={},kL;function gw(){if(kL)return Kn;kL=1,Object.defineProperty(Kn,"__esModule",{value:!0}),Kn.URL=Kn.DNS=Kn.stringToBytes=void 0;const u=zw(),n=aa();function o(t){t=unescape(encodeURIComponent(t));const e=new Uint8Array(t.length);for(let r=0;r<t.length;++r)e[r]=t.charCodeAt(r);return e}Kn.stringToBytes=o,Kn.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Kn.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function i(t,e,r,a,c,s){const d=typeof r=="string"?o(r):r,l=typeof a=="string"?(0,u.default)(a):a;if(typeof a=="string"&&(a=(0,u.default)(a)),(a==null?void 0:a.length)!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+d.length);if(f.set(l),f.set(d,l.length),f=e(f),f[6]=f[6]&15|t,f[8]=f[8]&63|128,c){s=s||0;for(let h=0;h<16;++h)c[s+h]=f[h];return c}return(0,n.unsafeStringify)(f)}return Kn.default=i,Kn}var KL;function Zue(){return KL||(KL=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.URL=u.DNS=void 0;const n=Yue(),o=gw();var i=gw();Object.defineProperty(u,"DNS",{enumerable:!0,get:function(){return i.DNS}}),Object.defineProperty(u,"URL",{enumerable:!0,get:function(){return i.URL}});function t(e,r,a,c){return(0,o.default)(48,n.default,e,r,a,c)}t.DNS=o.DNS,t.URL=o.URL,u.default=t})(j4)),j4}var QT={},HT={},WL;function eoe(){if(WL)return HT;WL=1,Object.defineProperty(HT,"__esModule",{value:!0});const u=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);return HT.default={randomUUID:u},HT}var YL;function toe(){if(YL)return QT;YL=1,Object.defineProperty(QT,"__esModule",{value:!0});const u=eoe(),n=KO(),o=aa();function i(t,e,r){var c;if(u.default.randomUUID&&!e&&!t)return u.default.randomUUID();t=t||{};const a=t.random??((c=t.rng)==null?void 0:c.call(t))??(0,n.default)();if(a.length<16)throw new Error("Random bytes length must be >= 16");if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,e){if(r=r||0,r<0||r+16>e.length)throw new RangeError(`UUID byte range ${r}:${r+15} is out of buffer bounds`);for(let s=0;s<16;++s)e[r+s]=a[s];return e}return(0,o.unsafeStringify)(a)}return QT.default=i,QT}var L4={},GT={},ZL;function roe(){if(ZL)return GT;ZL=1,Object.defineProperty(GT,"__esModule",{value:!0});function u(i,t,e,r){switch(i){case 0:return t&e^~t&r;case 1:return t^e^r;case 2:return t&e^t&r^e&r;case 3:return t^e^r}}function n(i,t){return i<<t|i>>>32-t}function o(i){const t=[1518500249,1859775393,2400959708,3395469782],e=[1732584193,4023233417,2562383102,271733878,3285377520],r=new Uint8Array(i.length+1);r.set(i),r[i.length]=128,i=r;const a=i.length/4+2,c=Math.ceil(a/16),s=new Array(c);for(let d=0;d<c;++d){const l=new Uint32Array(16);for(let f=0;f<16;++f)l[f]=i[d*64+f*4]<<24|i[d*64+f*4+1]<<16|i[d*64+f*4+2]<<8|i[d*64+f*4+3];s[d]=l}s[c-1][14]=(i.length-1)*8/Math.pow(2,32),s[c-1][14]=Math.floor(s[c-1][14]),s[c-1][15]=(i.length-1)*8&4294967295;for(let d=0;d<c;++d){const l=new Uint32Array(80);for(let b=0;b<16;++b)l[b]=s[d][b];for(let b=16;b<80;++b)l[b]=n(l[b-3]^l[b-8]^l[b-14]^l[b-16],1);let f=e[0],h=e[1],p=e[2],y=e[3],_=e[4];for(let b=0;b<80;++b){const m=Math.floor(b/20),g=n(f,5)+u(m,h,p,y)+_+t[m]+l[b]>>>0;_=y,y=p,p=n(h,30)>>>0,h=f,f=g}e[0]=e[0]+f>>>0,e[1]=e[1]+h>>>0,e[2]=e[2]+p>>>0,e[3]=e[3]+y>>>0,e[4]=e[4]+_>>>0}return Uint8Array.of(e[0]>>24,e[0]>>16,e[0]>>8,e[0],e[1]>>24,e[1]>>16,e[1]>>8,e[1],e[2]>>24,e[2]>>16,e[2]>>8,e[2],e[3]>>24,e[3]>>16,e[3]>>8,e[3],e[4]>>24,e[4]>>16,e[4]>>8,e[4])}return GT.default=o,GT}var eM;function noe(){return eM||(eM=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.URL=u.DNS=void 0;const n=roe(),o=gw();var i=gw();Object.defineProperty(u,"DNS",{enumerable:!0,get:function(){return i.DNS}}),Object.defineProperty(u,"URL",{enumerable:!0,get:function(){return i.URL}});function t(e,r,a,c){return(0,o.default)(80,n.default,e,r,a,c)}t.DNS=o.DNS,t.URL=o.URL,u.default=t})(L4)),L4}var zT={},tM;function ioe(){if(tM)return zT;tM=1,Object.defineProperty(zT,"__esModule",{value:!0});const u=aa(),n=aJ(),o=uJ();function i(t,e,r){t??(t={}),r??(r=0);let a=(0,n.default)({...t,_v6:!0},new Uint8Array(16));if(a=(0,o.default)(a),e){for(let c=0;c<16;c++)e[r+c]=a[c];return e}return(0,u.unsafeStringify)(a)}return zT.default=i,zT}var XT={},rM;function aoe(){if(rM)return XT;rM=1,Object.defineProperty(XT,"__esModule",{value:!0});const u=zw(),n=aa();function o(t){const e=typeof t=="string"?(0,u.default)(t):t,r=i(e);return typeof t=="string"?(0,n.unsafeStringify)(r):r}XT.default=o;function i(t){return Uint8Array.of((t[3]&15)<<4|t[4]>>4&15,(t[4]&15)<<4|(t[5]&240)>>4,(t[5]&15)<<4|t[6]&15,t[7],(t[1]&15)<<4|(t[2]&240)>>4,(t[2]&15)<<4|(t[3]&240)>>4,16|(t[0]&240)>>4,(t[0]&15)<<4|(t[1]&240)>>4,t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])}return XT}var pf={},nM;function uoe(){if(nM)return pf;nM=1,Object.defineProperty(pf,"__esModule",{value:!0}),pf.updateV7State=void 0;const u=KO(),n=aa(),o={};function i(r,a,c){var d;let s;if(r)s=e(r.random??((d=r.rng)==null?void 0:d.call(r))??(0,u.default)(),r.msecs,r.seq,a,c);else{const l=Date.now(),f=(0,u.default)();t(o,l,f),s=e(f,o.msecs,o.seq,a,c)}return a??(0,n.unsafeStringify)(s)}function t(r,a,c){return r.msecs??(r.msecs=-1/0),r.seq??(r.seq=0),a>r.msecs?(r.seq=c[6]<<23|c[7]<<16|c[8]<<8|c[9],r.msecs=a):(r.seq=r.seq+1|0,r.seq===0&&r.msecs++),r}pf.updateV7State=t;function e(r,a,c,s,d=0){if(r.length<16)throw new Error("Random bytes length must be >= 16");if(!s)s=new Uint8Array(16),d=0;else if(d<0||d+16>s.length)throw new RangeError(`UUID byte range ${d}:${d+15} is out of buffer bounds`);return a??(a=Date.now()),c??(c=r[6]*127<<24|r[7]<<16|r[8]<<8|r[9]),s[d++]=a/1099511627776&255,s[d++]=a/4294967296&255,s[d++]=a/16777216&255,s[d++]=a/65536&255,s[d++]=a/256&255,s[d++]=a&255,s[d++]=112|c>>>28&15,s[d++]=c>>>20&255,s[d++]=128|c>>>14&63,s[d++]=c>>>6&255,s[d++]=c<<2&255|r[10]&3,s[d++]=r[11],s[d++]=r[12],s[d++]=r[13],s[d++]=r[14],s[d++]=r[15],s}return pf.default=i,pf}var JT={},iM;function ooe(){if(iM)return JT;iM=1,Object.defineProperty(JT,"__esModule",{value:!0});const u=Gw();function n(o){if(!(0,u.default)(o))throw TypeError("Invalid UUID");return parseInt(o.slice(14,15),16)}return JT.default=n,JT}var aM;function oJ(){return aM||(aM=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.version=u.validate=u.v7=u.v6ToV1=u.v6=u.v5=u.v4=u.v3=u.v1ToV6=u.v1=u.stringify=u.parse=u.NIL=u.MAX=void 0;var n=kue();Object.defineProperty(u,"MAX",{enumerable:!0,get:function(){return n.default}});var o=Kue();Object.defineProperty(u,"NIL",{enumerable:!0,get:function(){return o.default}});var i=zw();Object.defineProperty(u,"parse",{enumerable:!0,get:function(){return i.default}});var t=aa();Object.defineProperty(u,"stringify",{enumerable:!0,get:function(){return t.default}});var e=aJ();Object.defineProperty(u,"v1",{enumerable:!0,get:function(){return e.default}});var r=uJ();Object.defineProperty(u,"v1ToV6",{enumerable:!0,get:function(){return r.default}});var a=Zue();Object.defineProperty(u,"v3",{enumerable:!0,get:function(){return a.default}});var c=toe();Object.defineProperty(u,"v4",{enumerable:!0,get:function(){return c.default}});var s=noe();Object.defineProperty(u,"v5",{enumerable:!0,get:function(){return s.default}});var d=ioe();Object.defineProperty(u,"v6",{enumerable:!0,get:function(){return d.default}});var l=aoe();Object.defineProperty(u,"v6ToV1",{enumerable:!0,get:function(){return l.default}});var f=uoe();Object.defineProperty(u,"v7",{enumerable:!0,get:function(){return f.default}});var h=Gw();Object.defineProperty(u,"validate",{enumerable:!0,get:function(){return h.default}});var p=ooe();Object.defineProperty(u,"version",{enumerable:!0,get:function(){return p.default}})})(D4)),D4}var uM;function soe(){if(uM)return xy;uM=1,Object.defineProperty(xy,"__esModule",{value:!0}),xy.TermFunctionStrUuid=void 0;const u=Te(),n=ge(),o=oJ();let i=class extends u.TermFunctionBase{constructor(){super({arity:0,operator:n.SparqlOperator.STRUUID,overloads:(0,n.declare)(n.SparqlOperator.STRUUID).set([],()=>()=>(0,n.string)(o.v4())).collect()})}};return xy.TermFunctionStrUuid=i,xy}var oM;function coe(){if(oM)return Ey;oM=1,Object.defineProperty(Ey,"__esModule",{value:!0}),Ey.ActorFunctionFactoryTermStrUuid=void 0;const u=Te(),n=ge(),o=soe();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.STRUUID],termFunction:!0})}async run(e){return new o.TermFunctionStrUuid}};return Ey.ActorFunctionFactoryTermStrUuid=i,Ey}var sM;function doe(){return sM||(sM=1,(function(u){var n=js&&js.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=js&&js.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(coe(),u)})(js)),js}var Ls={},Iy={},Ry={},cM;function loe(){if(cM)return Ry;cM=1,Object.defineProperty(Ry,"__esModule",{value:!0}),Ry.TermFunctionStr=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.STR,overloads:(0,n.declare)(n.SparqlOperator.STR).onTerm1(()=>t=>(0,n.string)(t.str())).collect()})}};return Ry.TermFunctionStr=o,Ry}var dM;function foe(){if(dM)return Iy;dM=1,Object.defineProperty(Iy,"__esModule",{value:!0}),Iy.ActorFunctionFactoryTermStr=void 0;const u=Te(),n=ge(),o=loe();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.STR],termFunction:!0})}async run(e){return new o.TermFunctionStr}};return Iy.ActorFunctionFactoryTermStr=i,Iy}var lM;function hoe(){return lM||(lM=1,(function(u){var n=Ls&&Ls.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ls&&Ls.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(foe(),u)})(Ls)),Ls}var Ms={},Fy={},Ny={},fM;function poe(){if(fM)return Ny;fM=1,Object.defineProperty(Ny,"__esModule",{value:!0}),Ny.TermFunctionSubStr=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:[2,3],operator:n.SparqlOperator.SUBSTR,overloads:(0,n.declare)(n.SparqlOperator.SUBSTR).onBinaryTyped([n.TypeURL.XSD_STRING,n.TypeURL.XSD_INTEGER],()=>(t,e)=>(0,n.string)([...t].slice(e-1).join(""))).onBinary([n.TypeURL.RDF_LANG_STRING,n.TypeURL.XSD_INTEGER],()=>(t,e)=>{const r=[...t.typedValue].slice(e.typedValue-1).join("");return(0,n.langString)(r,t.language)}).onTernaryTyped([n.TypeURL.XSD_STRING,n.TypeURL.XSD_INTEGER,n.TypeURL.XSD_INTEGER],()=>(t,e,r)=>(0,n.string)([...t].slice(e-1,r+e-1).join(""))).onTernary([n.TypeURL.RDF_LANG_STRING,n.TypeURL.XSD_INTEGER,n.TypeURL.XSD_INTEGER],()=>(t,e,r)=>{const a=[...t.typedValue].slice(e.typedValue-1,r.typedValue+e.typedValue-1).join("");return(0,n.langString)(a,t.language)}).collect()})}};return Ny.TermFunctionSubStr=o,Ny}var hM;function boe(){if(hM)return Fy;hM=1,Object.defineProperty(Fy,"__esModule",{value:!0}),Fy.ActorFunctionFactoryTermSubStr=void 0;const u=Te(),n=ge(),o=poe();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.SUBSTR],termFunction:!0})}async run(e){return new o.TermFunctionSubStr}};return Fy.ActorFunctionFactoryTermSubStr=i,Fy}var pM;function yoe(){return pM||(pM=1,(function(u){var n=Ms&&Ms.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ms&&Ms.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(boe(),u)})(Ms)),Ms}var Cs={},Py={},Dy={},bM;function _oe(){if(bM)return Dy;bM=1,Object.defineProperty(Dy,"__esModule",{value:!0}),Dy.TermFunctionSubject=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.SUBJECT,overloads:(0,n.declare)(n.SparqlOperator.SUBJECT).onQuad1(()=>t=>t.subject).collect()})}};return Dy.TermFunctionSubject=o,Dy}var yM;function goe(){if(yM)return Py;yM=1,Object.defineProperty(Py,"__esModule",{value:!0}),Py.ActorFunctionFactoryTermSubject=void 0;const u=Te(),n=ge(),o=_oe();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.SUBJECT],termFunction:!0})}async run(e){return new o.TermFunctionSubject}};return Py.ActorFunctionFactoryTermSubject=i,Py}var _M;function moe(){return _M||(_M=1,(function(u){var n=Cs&&Cs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Cs&&Cs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(goe(),u)})(Cs)),Cs}var qs={},jy={},Ly={},gM;function voe(){if(gM)return Ly;gM=1,Object.defineProperty(Ly,"__esModule",{value:!0}),Ly.TermFunctionSubtraction=void 0;const u=Te(),n=Ce(),o=ge(),i=Hw();let t=class extends u.TermFunctionBase{constructor(){super({arity:2,operator:o.SparqlOperator.SUBTRACTION,overloads:(0,o.declare)(o.SparqlOperator.SUBTRACTION).arithmetic(()=>(r,a)=>new i.BigNumber(r).minus(a).toNumber()).set([o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],r=>([a,c])=>new o.DayTimeDurationLiteral((0,o.elapsedDuration)(a.typedValue,c.typedValue,r.context.getSafe(n.KeysExpressionEvaluator.defaultTimeZone)))).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],to:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_DATE]}).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],to:[o.TypeURL.XSD_TIME,o.TypeURL.XSD_TIME]}).set([o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DAY_TIME_DURATION],()=>([r,a])=>new o.DateTimeLiteral((0,o.addDurationToDateTime)(r.typedValue,(0,o.defaultedDurationRepresentation)((0,o.negateDuration)(a.typedValue))))).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DAY_TIME_DURATION],to:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([o.TypeURL.XSD_DATE,o.TypeURL.XSD_DAY_TIME_DURATION],()=>([r,a])=>new o.DateLiteral((0,o.addDurationToDateTime)((0,o.defaultedDateTimeRepresentation)(r.typedValue),(0,o.defaultedDurationRepresentation)((0,o.negateDuration)(a.typedValue))))).copy({from:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_DAY_TIME_DURATION],to:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([o.TypeURL.XSD_TIME,o.TypeURL.XSD_DAY_TIME_DURATION],()=>([r,a])=>new o.TimeLiteral((0,o.addDurationToDateTime)((0,o.defaultedDateTimeRepresentation)(r.typedValue),(0,o.defaultedDurationRepresentation)((0,o.negateDuration)(a.typedValue))))).collect()})}};return Ly.TermFunctionSubtraction=t,Ly}var mM;function Toe(){if(mM)return jy;mM=1,Object.defineProperty(jy,"__esModule",{value:!0}),jy.ActorFunctionFactoryTermSubtraction=void 0;const u=Te(),n=ge(),o=voe();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.SUBTRACTION],termFunction:!0})}async run(e){return new o.TermFunctionSubtraction}};return jy.ActorFunctionFactoryTermSubtraction=i,jy}var vM;function woe(){return vM||(vM=1,(function(u){var n=qs&&qs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=qs&&qs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Toe(),u)})(qs)),qs}var Bs={},My={},Cy={},TM;function Soe(){if(TM)return Cy;TM=1,Object.defineProperty(Cy,"__esModule",{value:!0}),Cy.TermFunctionTimezone=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.TIMEZONE,overloads:(0,n.declare)(n.SparqlOperator.TIMEZONE).onDateTime1(()=>t=>{const e={hours:t.typedValue.zoneHours,minutes:t.typedValue.zoneMinutes};if(e.hours===void 0&&e.minutes===void 0)throw new n.InvalidTimezoneCall(t.str());return new n.DayTimeDurationLiteral(e)}).copy({from:[n.TypeURL.XSD_DATE_TIME],to:[n.TypeURL.XSD_DATE]}).copy({from:[n.TypeURL.XSD_DATE_TIME],to:[n.TypeURL.XSD_TIME]}).collect()})}};return Cy.TermFunctionTimezone=o,Cy}var wM;function Aoe(){if(wM)return My;wM=1,Object.defineProperty(My,"__esModule",{value:!0}),My.ActorFunctionFactoryTermTimezone=void 0;const u=Te(),n=ge(),o=Soe();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.TIMEZONE],termFunction:!0})}async run(e){return new o.TermFunctionTimezone}};return My.ActorFunctionFactoryTermTimezone=i,My}var SM;function Ooe(){return SM||(SM=1,(function(u){var n=Bs&&Bs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Bs&&Bs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Aoe(),u)})(Bs)),Bs}var $s={},qy={},By={},AM;function Eoe(){if(AM)return By;AM=1,Object.defineProperty(By,"__esModule",{value:!0}),By.TermFunctionTriple=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:3,operator:n.SparqlOperator.TRIPLE,overloads:(0,n.declare)(n.SparqlOperator.TRIPLE).onTerm3(t=>(...e)=>new n.Quad(e[0],e[1],e[2],new n.DefaultGraph)).collect()})}};return By.TermFunctionTriple=o,By}var OM;function xoe(){if(OM)return qy;OM=1,Object.defineProperty(qy,"__esModule",{value:!0}),qy.ActorFunctionFactoryTermTriple=void 0;const u=Te(),n=ge(),o=Eoe();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.TRIPLE],termFunction:!0})}async run(e){return new o.TermFunctionTriple}};return qy.ActorFunctionFactoryTermTriple=i,qy}var EM;function Ioe(){return EM||(EM=1,(function(u){var n=$s&&$s.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=$s&&$s.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(xoe(),u)})($s)),$s}var Us={},$y={},Uy={},xM;function Roe(){if(xM)return Uy;xM=1,Object.defineProperty(Uy,"__esModule",{value:!0}),Uy.TermFunctionTz=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.TZ,overloads:(0,n.declare)(n.SparqlOperator.TZ).onDateTime1(()=>t=>(0,n.string)((0,n.extractRawTimeZone)(t.str()))).copy({from:[n.TypeURL.XSD_DATE_TIME],to:[n.TypeURL.XSD_DATE]}).copy({from:[n.TypeURL.XSD_DATE_TIME],to:[n.TypeURL.XSD_TIME]}).collect()})}};return Uy.TermFunctionTz=o,Uy}var IM;function Foe(){if(IM)return $y;IM=1,Object.defineProperty($y,"__esModule",{value:!0}),$y.ActorFunctionFactoryTermTz=void 0;const u=Te(),n=ge(),o=Roe();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.TZ],termFunction:!0})}async run(e){return new o.TermFunctionTz}};return $y.ActorFunctionFactoryTermTz=i,$y}var RM;function Noe(){return RM||(RM=1,(function(u){var n=Us&&Us.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Us&&Us.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Foe(),u)})(Us)),Us}var Vs={},Vy={},Qy={},FM;function Poe(){if(FM)return Qy;FM=1,Object.defineProperty(Qy,"__esModule",{value:!0}),Qy.TermFunctionUcase=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.UCASE,overloads:(0,n.declare)(n.SparqlOperator.UCASE).onString1Typed(()=>t=>(0,n.string)(t.toUpperCase())).onLangString1(()=>t=>(0,n.langString)(t.typedValue.toUpperCase(),t.language)).collect()})}};return Qy.TermFunctionUcase=o,Qy}var NM;function Doe(){if(NM)return Vy;NM=1,Object.defineProperty(Vy,"__esModule",{value:!0}),Vy.ActorFunctionFactoryTermUcase=void 0;const u=Te(),n=ge(),o=Poe();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.UCASE],termFunction:!0})}async run(e){return new o.TermFunctionUcase}};return Vy.ActorFunctionFactoryTermUcase=i,Vy}var PM;function joe(){return PM||(PM=1,(function(u){var n=Vs&&Vs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Vs&&Vs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Doe(),u)})(Vs)),Vs}var Qs={},Hy={},Gy={},DM;function Loe(){if(DM)return Gy;DM=1,Object.defineProperty(Gy,"__esModule",{value:!0}),Gy.TermFunctionUnaryMinus=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.UMINUS,overloads:(0,n.declare)(n.SparqlOperator.UMINUS).numericConverter(()=>t=>-t).collect()})}};return Gy.TermFunctionUnaryMinus=o,Gy}var jM;function Moe(){if(jM)return Hy;jM=1,Object.defineProperty(Hy,"__esModule",{value:!0}),Hy.ActorFunctionFactoryTermUnaryMinus=void 0;const u=Te(),n=ge(),o=Loe();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.UMINUS],termFunction:!0})}async run(e){return new o.TermFunctionUnaryMinus}};return Hy.ActorFunctionFactoryTermUnaryMinus=i,Hy}var LM;function Coe(){return LM||(LM=1,(function(u){var n=Qs&&Qs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Qs&&Qs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Moe(),u)})(Qs)),Qs}var Hs={},zy={},Xy={},MM;function qoe(){if(MM)return Xy;MM=1,Object.defineProperty(Xy,"__esModule",{value:!0}),Xy.TermFunctionUnaryPlus=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.UPLUS,overloads:(0,n.declare)(n.SparqlOperator.UPLUS).numericConverter(()=>t=>t).collect()})}};return Xy.TermFunctionUnaryPlus=o,Xy}var CM;function Boe(){if(CM)return zy;CM=1,Object.defineProperty(zy,"__esModule",{value:!0}),zy.ActorFunctionFactoryTermUnaryPlus=void 0;const u=Te(),n=ge(),o=qoe();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.UPLUS],termFunction:!0})}async run(e){return new o.TermFunctionUnaryPlus}};return zy.ActorFunctionFactoryTermUnaryPlus=i,zy}var qM;function $oe(){return qM||(qM=1,(function(u){var n=Hs&&Hs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Hs&&Hs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Boe(),u)})(Hs)),Hs}var Gs={},Jy={},ky={},BM;function Uoe(){if(BM)return ky;BM=1,Object.defineProperty(ky,"__esModule",{value:!0}),ky.TermFunctionUuid=void 0;const u=Te(),n=ge(),o=oJ();let i=class extends u.TermFunctionBase{constructor(){super({arity:0,operator:n.SparqlOperator.UUID,overloads:(0,n.declare)(n.SparqlOperator.UUID).set([],()=>()=>new n.NamedNode(`urn:uuid:${o.v4()}`)).collect()})}};return ky.TermFunctionUuid=i,ky}var $M;function Voe(){if($M)return Jy;$M=1,Object.defineProperty(Jy,"__esModule",{value:!0}),Jy.ActorFunctionFactoryTermUuid=void 0;const u=Te(),n=ge(),o=Uoe();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.UUID],termFunction:!0})}async run(e){return new o.TermFunctionUuid}};return Jy.ActorFunctionFactoryTermUuid=i,Jy}var UM;function Qoe(){return UM||(UM=1,(function(u){var n=Gs&&Gs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Gs&&Gs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Voe(),u)})(Gs)),Gs}var zs={},Ky={},Wy={},VM;function Hoe(){if(VM)return Wy;VM=1,Object.defineProperty(Wy,"__esModule",{value:!0}),Wy.TermFunctionXsdToBoolean=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_BOOLEAN,overloads:(0,n.declare)(n.TypeURL.XSD_BOOLEAN).onNumeric1(()=>t=>(0,n.bool)(t.coerceEBV()),!0).onUnary(n.TypeURL.XSD_BOOLEAN,()=>t=>(0,n.bool)(t.coerceEBV()),!0).onUnary(n.TypeURL.XSD_STRING,()=>t=>{switch(t.str()){case"true":return(0,n.bool)(!0);case"false":return(0,n.bool)(!1);case"1":return(0,n.bool)(!0);case"0":return(0,n.bool)(!1);default:throw new n.CastError(t,n.TypeURL.XSD_BOOLEAN)}},!1).collect()})}};return Wy.TermFunctionXsdToBoolean=o,Wy}var QM;function Goe(){if(QM)return Ky;QM=1,Object.defineProperty(Ky,"__esModule",{value:!0}),Ky.ActorFunctionFactoryTermXsdToBoolean=void 0;const u=Te(),n=ge(),o=Hoe();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_BOOLEAN],termFunction:!0})}async run(e){return new o.TermFunctionXsdToBoolean}};return Ky.ActorFunctionFactoryTermXsdToBoolean=i,Ky}var HM;function zoe(){return HM||(HM=1,(function(u){var n=zs&&zs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=zs&&zs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Goe(),u)})(zs)),zs}var Xs={},Yy={},Zy={},GM;function Xoe(){if(GM)return Zy;GM=1,Object.defineProperty(Zy,"__esModule",{value:!0}),Zy.TermFunctionXsdToDate=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_DATE,overloads:(0,n.declare)(n.TypeURL.XSD_DATE).onUnary(n.TypeURL.XSD_DATE,()=>t=>new n.DateLiteral(t.typedValue,t.strValue)).onUnary(n.TypeURL.XSD_DATE_TIME,()=>t=>new n.DateLiteral(t.typedValue)).onStringly1(()=>t=>new n.DateLiteral((0,n.parseDate)(t.str()))).collect()})}};return Zy.TermFunctionXsdToDate=o,Zy}var zM;function Joe(){if(zM)return Yy;zM=1,Object.defineProperty(Yy,"__esModule",{value:!0}),Yy.ActorFunctionFactoryTermXsdToDate=void 0;const u=Te(),n=ge(),o=Xoe();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_DATE],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDate}};return Yy.ActorFunctionFactoryTermXsdToDate=i,Yy}var XM;function koe(){return XM||(XM=1,(function(u){var n=Xs&&Xs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Xs&&Xs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Joe(),u)})(Xs)),Xs}var Js={},e_={},t_={},JM;function Koe(){if(JM)return t_;JM=1,Object.defineProperty(t_,"__esModule",{value:!0}),t_.TermFunctionXsdToDatetime=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_DATE_TIME,overloads:(0,n.declare)(n.TypeURL.XSD_DATE_TIME).onUnary(n.TypeURL.XSD_DATE_TIME,()=>t=>t).onUnary(n.TypeURL.XSD_STRING,()=>t=>(0,n.dateTime)((0,n.parseDateTime)(t.str()),t.str()),!1).onUnary(n.TypeURL.XSD_DATE,()=>t=>new n.DateTimeLiteral({...t.typedValue,hours:0,minutes:0,seconds:0})).collect()})}};return t_.TermFunctionXsdToDatetime=o,t_}var kM;function Woe(){if(kM)return e_;kM=1,Object.defineProperty(e_,"__esModule",{value:!0}),e_.ActorFunctionFactoryTermXsdToDatetime=void 0;const u=Te(),n=ge(),o=Koe();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_DATE_TIME],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDatetime}};return e_.ActorFunctionFactoryTermXsdToDatetime=i,e_}var KM;function Yoe(){return KM||(KM=1,(function(u){var n=Js&&Js.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Js&&Js.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Woe(),u)})(Js)),Js}var ks={},r_={},n_={},WM;function Zoe(){if(WM)return n_;WM=1,Object.defineProperty(n_,"__esModule",{value:!0}),n_.TermFunctionXsdToDayTimeDuration=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_DAY_TIME_DURATION,overloads:(0,n.declare)(n.TypeURL.XSD_DAY_TIME_DURATION).onUnary(n.TypeURL.XSD_DURATION,()=>t=>new n.DayTimeDurationLiteral((0,n.trimToDayTimeDuration)(t.typedValue))).onStringly1(()=>t=>new n.DayTimeDurationLiteral((0,n.parseDayTimeDuration)(t.str()))).collect()})}};return n_.TermFunctionXsdToDayTimeDuration=o,n_}var YM;function ese(){if(YM)return r_;YM=1,Object.defineProperty(r_,"__esModule",{value:!0}),r_.ActorFunctionFactoryTermXsdToDayTimeDuration=void 0;const u=Te(),n=ge(),o=Zoe();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_DAY_TIME_DURATION],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDayTimeDuration}};return r_.ActorFunctionFactoryTermXsdToDayTimeDuration=i,r_}var ZM;function tse(){return ZM||(ZM=1,(function(u){var n=ks&&ks.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ks&&ks.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ese(),u)})(ks)),ks}var Ks={},i_={},a_={},eC;function rse(){if(eC)return a_;eC=1,Object.defineProperty(a_,"__esModule",{value:!0}),a_.TermFunctionXsdToDecimal=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_DECIMAL,overloads:(0,n.declare)(n.TypeURL.XSD_DECIMAL).onNumeric1(()=>t=>{const e=(0,n.parseXSDDecimal)(t.str());if(e===void 0)throw new n.CastError(t,n.TypeURL.XSD_DECIMAL);return(0,n.decimal)(e)}).onString1(()=>t=>{const e=t.str(),r=/^([+-])?(\d+(\.\d+)?)$/u.test(e)?(0,n.parseXSDDecimal)(e):void 0;if(r===void 0)throw new n.CastError(t,n.TypeURL.XSD_DECIMAL);return(0,n.decimal)(r)},!1).onBoolean1Typed(()=>t=>(0,n.decimal)(t?1:0)).collect()})}};return a_.TermFunctionXsdToDecimal=o,a_}var tC;function nse(){if(tC)return i_;tC=1,Object.defineProperty(i_,"__esModule",{value:!0}),i_.ActorFunctionFactoryTermXsdToDecimal=void 0;const u=Te(),n=ge(),o=rse();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_DECIMAL],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDecimal}};return i_.ActorFunctionFactoryTermXsdToDecimal=i,i_}var rC;function ise(){return rC||(rC=1,(function(u){var n=Ks&&Ks.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ks&&Ks.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(nse(),u)})(Ks)),Ks}var Ws={},u_={},o_={},nC;function ase(){if(nC)return o_;nC=1,Object.defineProperty(o_,"__esModule",{value:!0}),o_.TermFunctionXsdToDouble=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_DOUBLE,overloads:(0,n.declare)(n.TypeURL.XSD_DOUBLE).onNumeric1(()=>t=>(0,n.double)(t.typedValue)).onBoolean1Typed(()=>t=>(0,n.double)(t?1:0)).onUnary(n.TypeURL.XSD_STRING,()=>t=>{const e=(0,n.parseXSDFloat)(t.str());if(e===void 0)throw new n.CastError(t,n.TypeURL.XSD_DOUBLE);return(0,n.double)(e)},!1).collect()})}};return o_.TermFunctionXsdToDouble=o,o_}var iC;function use(){if(iC)return u_;iC=1,Object.defineProperty(u_,"__esModule",{value:!0}),u_.ActorFunctionFactoryTermXsdToDouble=void 0;const u=Te(),n=ge(),o=ase();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_DOUBLE],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDouble}};return u_.ActorFunctionFactoryTermXsdToDouble=i,u_}var aC;function ose(){return aC||(aC=1,(function(u){var n=Ws&&Ws.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ws&&Ws.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(use(),u)})(Ws)),Ws}var Ys={},s_={},c_={},uC;function sse(){if(uC)return c_;uC=1,Object.defineProperty(c_,"__esModule",{value:!0}),c_.TermFunctionXsdToDuration=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_DAY_TIME_DURATION,overloads:(0,n.declare)(n.TypeURL.XSD_DURATION).onUnary(n.TypeURL.XSD_DURATION,()=>t=>new n.DurationLiteral(t.typedValue,t.strValue)).onStringly1(()=>t=>new n.DurationLiteral((0,n.parseDuration)(t.str()))).collect()})}};return c_.TermFunctionXsdToDuration=o,c_}var oC;function cse(){if(oC)return s_;oC=1,Object.defineProperty(s_,"__esModule",{value:!0}),s_.ActorFunctionFactoryTermXsdToDuration=void 0;const u=Te(),n=ge(),o=sse();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_DURATION],termFunction:!0})}async run(e){return new o.TermFunctionXsdToDuration}};return s_.ActorFunctionFactoryTermXsdToDuration=i,s_}var sC;function dse(){return sC||(sC=1,(function(u){var n=Ys&&Ys.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ys&&Ys.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(cse(),u)})(Ys)),Ys}var Zs={},d_={},l_={},cC;function lse(){if(cC)return l_;cC=1,Object.defineProperty(l_,"__esModule",{value:!0}),l_.TermFunctionXsdToFloat=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_FLOAT,overloads:(0,n.declare)(n.TypeURL.XSD_FLOAT).onNumeric1(()=>t=>(0,n.float)(t.typedValue)).onBoolean1Typed(()=>t=>(0,n.float)(t?1:0)).onUnary(n.TypeURL.XSD_STRING,()=>t=>{const e=(0,n.parseXSDFloat)(t.str());if(e===void 0)throw new n.CastError(t,n.TypeURL.XSD_FLOAT);return(0,n.float)(e)},!1).collect()})}};return l_.TermFunctionXsdToFloat=o,l_}var dC;function fse(){if(dC)return d_;dC=1,Object.defineProperty(d_,"__esModule",{value:!0}),d_.ActorFunctionFactoryTermXsdToFloat=void 0;const u=Te(),n=ge(),o=lse();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_FLOAT],termFunction:!0})}async run(e){return new o.TermFunctionXsdToFloat}};return d_.ActorFunctionFactoryTermXsdToFloat=i,d_}var lC;function hse(){return lC||(lC=1,(function(u){var n=Zs&&Zs.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Zs&&Zs.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(fse(),u)})(Zs)),Zs}var ec={},f_={},h_={},fC;function pse(){if(fC)return h_;fC=1,Object.defineProperty(h_,"__esModule",{value:!0}),h_.TermFunctionXsdToInteger=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_INTEGER,overloads:(0,n.declare)(n.TypeURL.XSD_INTEGER).onBoolean1Typed(()=>t=>(0,n.integer)(t?1:0)).onNumeric1(()=>t=>{if(!Number.isFinite(t.typedValue))throw new n.CastError(t,n.TypeURL.XSD_INTEGER);return(0,n.integer)(Math.trunc(t.typedValue))}).onString1(()=>t=>{const e=t.str(),r=/^\d+$/u.test(e)?Number.parseInt(e,10):void 0;if(r===void 0)throw new n.CastError(t,n.TypeURL.XSD_INTEGER);return(0,n.integer)(r)}).collect()})}};return h_.TermFunctionXsdToInteger=o,h_}var hC;function bse(){if(hC)return f_;hC=1,Object.defineProperty(f_,"__esModule",{value:!0}),f_.ActorFunctionFactoryTermXsdToInteger=void 0;const u=Te(),n=ge(),o=pse();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_INTEGER],termFunction:!0})}async run(e){return new o.TermFunctionXsdToInteger}};return f_.ActorFunctionFactoryTermXsdToInteger=i,f_}var pC;function yse(){return pC||(pC=1,(function(u){var n=ec&&ec.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ec&&ec.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(bse(),u)})(ec)),ec}var tc={},p_={},b_={},bC;function _se(){if(bC)return b_;bC=1,Object.defineProperty(b_,"__esModule",{value:!0}),b_.TermFunctionXsdToString=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_STRING,overloads:(0,n.declare)(n.TypeURL.XSD_STRING).onNumeric1(()=>t=>(0,n.string)((0,n.float)(t.typedValue).str())).onBoolean1Typed(()=>t=>(0,n.string)((0,n.bool)(t).str())).onTerm1(()=>t=>(0,n.string)(t.str())).collect()})}};return b_.TermFunctionXsdToString=o,b_}var yC;function gse(){if(yC)return p_;yC=1,Object.defineProperty(p_,"__esModule",{value:!0}),p_.ActorFunctionFactoryTermXsdToString=void 0;const u=Te(),n=ge(),o=_se();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_STRING],termFunction:!0})}async run(e){return new o.TermFunctionXsdToString}};return p_.ActorFunctionFactoryTermXsdToString=i,p_}var _C;function mse(){return _C||(_C=1,(function(u){var n=tc&&tc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=tc&&tc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(gse(),u)})(tc)),tc}var rc={},y_={},__={},gC;function vse(){if(gC)return __;gC=1,Object.defineProperty(__,"__esModule",{value:!0}),__.TermFunctionXsdToTime=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_TIME,overloads:(0,n.declare)(n.TypeURL.XSD_TIME).onUnary(n.TypeURL.XSD_TIME,()=>t=>new n.TimeLiteral(t.typedValue,t.strValue)).onUnary(n.TypeURL.XSD_DATE_TIME,()=>t=>new n.TimeLiteral(t.typedValue)).onStringly1(()=>t=>new n.TimeLiteral((0,n.parseTime)(t.str()))).collect()})}};return __.TermFunctionXsdToTime=o,__}var mC;function Tse(){if(mC)return y_;mC=1,Object.defineProperty(y_,"__esModule",{value:!0}),y_.ActorFunctionFactoryTermXsdToTime=void 0;const u=Te(),n=ge(),o=vse();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_TIME],termFunction:!0})}async run(e){return new o.TermFunctionXsdToTime}};return y_.ActorFunctionFactoryTermXsdToTime=i,y_}var vC;function wse(){return vC||(vC=1,(function(u){var n=rc&&rc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=rc&&rc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Tse(),u)})(rc)),rc}var nc={},g_={},m_={},TC;function Sse(){if(TC)return m_;TC=1,Object.defineProperty(m_,"__esModule",{value:!0}),m_.TermFunctionXsdToYearMonthDuration=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.TypeURL.XSD_YEAR_MONTH_DURATION,overloads:(0,n.declare)(n.TypeURL.XSD_YEAR_MONTH_DURATION).onUnary(n.TypeURL.XSD_DURATION,()=>t=>new n.YearMonthDurationLiteral((0,n.trimToYearMonthDuration)(t.typedValue))).onStringly1(()=>t=>new n.YearMonthDurationLiteral((0,n.parseYearMonthDuration)(t.str()))).collect()})}};return m_.TermFunctionXsdToYearMonthDuration=o,m_}var wC;function Ase(){if(wC)return g_;wC=1,Object.defineProperty(g_,"__esModule",{value:!0}),g_.ActorFunctionFactoryTermXsdToYearMonthDuration=void 0;const u=Te(),n=ge(),o=Sse();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.TypeURL.XSD_YEAR_MONTH_DURATION],termFunction:!0})}async run(e){return new o.TermFunctionXsdToYearMonthDuration}};return g_.ActorFunctionFactoryTermXsdToYearMonthDuration=i,g_}var SC;function Ose(){return SC||(SC=1,(function(u){var n=nc&&nc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=nc&&nc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ase(),u)})(nc)),nc}var ic={},v_={},T_={},AC;function Ese(){if(AC)return T_;AC=1,Object.defineProperty(T_,"__esModule",{value:!0}),T_.TermFunctionYear=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.YEAR,overloads:(0,n.declare)(n.SparqlOperator.YEAR).onDateTime1(()=>t=>(0,n.integer)(t.typedValue.year)).set([n.TypeURL.XSD_DATE],()=>([t])=>(0,n.integer)(t.typedValue.year)).collect()})}};return T_.TermFunctionYear=o,T_}var OC;function xse(){if(OC)return v_;OC=1,Object.defineProperty(v_,"__esModule",{value:!0}),v_.ActorFunctionFactoryTermYear=void 0;const u=Te(),n=ge(),o=Ese();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.YEAR],termFunction:!0})}async run(e){return new o.TermFunctionYear}};return v_.ActorFunctionFactoryTermYear=i,v_}var EC;function Ise(){return EC||(EC=1,(function(u){var n=ic&&ic.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ic&&ic.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(xse(),u)})(ic)),ic}var ac={},w_={},uc={},S_={},M4={},oc={},xC;function Rse(){if(xC)return oc;xC=1,Object.defineProperty(oc,"__esModule",{value:!0}),oc.readableFromWeb=oc.ReadableFromWeb=void 0;const u=Dt();let n=class extends u.Readable{constructor(t,e){super(e),this.reader=t.getReader(),this.readerClosed=!1,this.reader.closed.then(()=>{this.readerClosed=!0}).catch(r=>{this.readerClosed=!0,this.destroy(r)})}_read(){this.reader.read().then(t=>this.push(t.done?null:t.value)).catch(t=>this.destroy(t))}destroy(t){return this.readerClosed||this.reader.cancel(t).then().catch(()=>{}),super.destroy(t)}};oc.ReadableFromWeb=n;function o(i,t){return new n(i,t)}return oc.readableFromWeb=o,oc}var IC;function sJ(){return IC||(IC=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.readableFromWeb=void 0;var n=Rse();Object.defineProperty(u,"readableFromWeb",{enumerable:!0,get:function(){return n.readableFromWeb}})})(M4)),M4}var C4,RC;function cJ(){if(RC)return C4;RC=1;const u=n=>n!==null&&typeof n=="object"&&typeof n.pipe=="function";return u.writable=n=>u(n)&&n.writable!==!1&&typeof n._write=="function"&&typeof n._writableState=="object",u.readable=n=>u(n)&&n.readable!==!1&&typeof n._read=="function"&&typeof n._readableState=="object",u.duplex=n=>u.writable(n)&&u.readable(n),u.transform=n=>u.duplex(n)&&typeof n._transform=="function",C4=u,C4}var q4={exports:{}},FC;function Fse(){return FC||(FC=1,(function(u){u.exports=n,u.exports.WEBSTREAM_SUPPORT=typeof ReadableStream<"u";function n(o){if(!u.exports.WEBSTREAM_SUPPORT)throw new Error("No web ReadableStream support");var i=!1,t={};function e(c){t.data=d,t.end=d,t.end=l,t.close=l,t.error=l;for(var s in t)o.on(s,t[s]);o.pause();function d(f){i||(c.enqueue(f),o.pause())}function l(f){if(!i){i=!0;for(var h in t)o.removeListener(h,t[h]);f?c.error(f):c.close()}}}function r(){i||o.resume()}function a(){i=!0;for(var c in t)o.removeListener(c,t[c]);o.push(null),o.pause(),o.destroy?o.destroy():o.close&&o.close()}return new ReadableStream({start:e,pull:r,cancel:a})}})(q4)),q4.exports}var NC;function lJ(){if(NC)return S_;NC=1,Object.defineProperty(S_,"__esModule",{value:!0}),S_.ActorHttp=void 0;const u=be(),n=sJ(),o=cJ(),i=Fse();let t=class dJ extends u.Actor{constructor(r){super(r)}static toNodeReadable(r){return o(r)||r===null?r:(0,n.readableFromWeb)(r)}static toWebReadableStream(r){return i(r)}static headersToHash(r){const a={};return r.forEach((c,s)=>{a[s]=c}),a}static getInputUrl(r){return new URL(r instanceof Request?r.url:r)}static createUserAgent(r,a){if(!dJ.isBrowser()){const c=[`Comunica/${a.split(".")[0]}.0`,`${r}/${a}`];return typeof globalThis.navigator=="object"&&typeof globalThis.navigator.userAgent=="string"?c.push(globalThis.navigator.userAgent):typeof globalThis.process=="object"&&typeof globalThis.process.versions=="object"&&typeof globalThis.process.versions.node=="string"&&c.push(`Node.js/${globalThis.process.versions.node.split(".")[0]}`),typeof globalThis.process=="object"&&typeof globalThis.process.platform=="string"&&typeof globalThis.process.arch=="string"&&c.splice(1,0,`(${globalThis.process.platform}; ${globalThis.process.arch})`),c.join(" ")}}static isBrowser(){return typeof globalThis.window=="object"&&typeof globalThis.window.document=="object"||typeof globalThis.importScripts=="function"}};return S_.ActorHttp=t,S_}var A_={},PC;function Nse(){if(PC)return A_;PC=1,Object.defineProperty(A_,"__esModule",{value:!0}),A_.validateAndCloseHttpResponse=void 0;const u=Jf(),n=lJ();async function o(i,t){var e;if(t.status>=400){let r="empty response";if(t.body){const a=n.ActorHttp.toNodeReadable(t.body);r=await(0,u.stringify)(a)}throw new Error(`Could not update ${i} (HTTP status ${t.status}):
${r}`)}await((e=t.body)==null?void 0:e.cancel())}return A_.validateAndCloseHttpResponse=o,A_}var DC;function Pi(){return DC||(DC=1,(function(u){var n=uc&&uc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=uc&&uc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(lJ(),u),o(Nse(),u)})(uc)),uc}const Pse="4.2.0",Dse={version:Pse};var O_={},jC;function jse(){if(jC)return O_;jC=1,Object.defineProperty(O_,"__esModule",{value:!0}),O_.FetchInitPreprocessor=void 0;class u{async handle(o){if(o.body&&typeof o.body!="string"&&"getReader"in o.body){const i=o.body.getReader(),t=[];for(;;){const{done:e,value:r}=await i.read();if(e)break;t.push(r)}o.body=t.join("")}return{...o,keepalive:!o.body}}}return O_.FetchInitPreprocessor=u,O_}var LC;function Lse(){if(LC)return w_;LC=1,Object.defineProperty(w_,"__esModule",{value:!0}),w_.ActorHttpFetch=void 0;const u=Pi(),n=Ce(),o=be(),i=Dse,t=jse();let e=class BA extends u.ActorHttp{constructor(a){super(a),this.fetchInitPreprocessor=new t.FetchInitPreprocessor(a.agentOptions)}async test(a){return(0,o.passTest)({time:Number.POSITIVE_INFINITY})}async run(a){const c=this.prepareRequestHeaders(a),s={method:"GET",...a.init,headers:c};this.logInfo(a.context,`Requesting ${u.ActorHttp.getInputUrl(a.input).href}`,()=>({headers:u.ActorHttp.headersToHash(c),method:s.method})),a.context.has(n.KeysHttp.fetch)&&(s.headers=u.ActorHttp.headersToHash(c)),a.context.get(n.KeysHttp.includeCredentials)&&(s.credentials="include");const d=a.context.get(n.KeysHttp.httpTimeout),l=a.context.get(n.KeysHttp.httpBodyTimeout),f=a.context.get(n.KeysHttp.fetch)??fetch,h=await this.fetchInitPreprocessor.handle(s);let p,y;if(d){const b=new AbortController;h.signal=b.signal,p=()=>b.abort(new Error(`Fetch timed out for ${u.ActorHttp.getInputUrl(a.input).href} after ${d} ms`)),y=setTimeout(()=>p(),d)}const _=await f(a.input,h);return d&&(!l||!_.body)&&clearTimeout(y),_}prepareRequestHeaders(a){var d;const c=new Headers((d=a.init)==null?void 0:d.headers);u.ActorHttp.isBrowser()?c.delete("user-agent"):c.has("user-agent")||c.set("user-agent",BA.userAgent);const s=a.context.get(n.KeysHttp.auth);return s&&c.set("Authorization",`Basic ${BA.stringToBase64(s)}`),c}static stringToBase64(a){const c=new TextEncoder().encode(a),s=Array.from(c,d=>String.fromCodePoint(d)).join("");return btoa(s)}};return w_.ActorHttpFetch=e,e.userAgent=u.ActorHttp.createUserAgent("ActorHttpFetch",i.version),w_}var MC;function Mse(){return MC||(MC=1,(function(u){var n=ac&&ac.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ac&&ac.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Lse(),u)})(ac)),ac}var sc={},E_={},CC;function Cse(){if(CC)return E_;CC=1,Object.defineProperty(E_,"__esModule",{value:!0}),E_.ActorQueryOperationSource=void 0;const u=Lt(),n=Ce(),o=be(),i=br(),t=gt(),e=dt();let r=class extends u.ActorQueryOperation{constructor(c){super(c)}async test(c){return(0,t.getOperationSource)(c.operation)?(0,o.passTest)({httpRequests:1}):(0,o.failTest)(`Actor ${this.name} requires an operation with source annotation.`)}async run(c){const s=c.context.get(n.KeysInitQuery.physicalQueryPlanLogger);s&&(s.logOperation(c.operation.type,void 0,c.operation,c.context.get(n.KeysInitQuery.physicalQueryPlanNode),this.name,{}),c.context=c.context.set(n.KeysInitQuery.physicalQueryPlanNode,c.operation));const d=(0,t.getOperationSource)(c.operation),l=d.context?c.context.merge(d.context):c.context;let f=!1;if(e.Util.recurseOperation(c.operation,{construct(){return f=!0,!1}}),f){const y=d.source.queryQuads(c.operation,l),_=(0,i.getMetadataQuads)(y);return{type:"quads",quadStream:y,metadata:_}}switch(c.operation.type){case e.Algebra.types.ASK:return{type:"boolean",execute:()=>d.source.queryBoolean(c.operation,l)};case e.Algebra.types.COMPOSITE_UPDATE:case e.Algebra.types.DELETE_INSERT:case e.Algebra.types.LOAD:case e.Algebra.types.CLEAR:case e.Algebra.types.CREATE:case e.Algebra.types.DROP:case e.Algebra.types.ADD:case e.Algebra.types.MOVE:case e.Algebra.types.COPY:return{type:"void",execute:()=>d.source.queryVoid(c.operation,l)}}const h=d.source.queryBindings(c.operation,l),p=(0,i.getMetadataBindings)(h);return{type:"bindings",bindingsStream:h,metadata:p}}};return E_.ActorQueryOperationSource=r,E_}var qC;function qse(){return qC||(qC=1,(function(u){var n=sc&&sc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=sc&&sc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Cse(),u)})(sc)),sc}var cc={},x_={},BC;function Bse(){if(BC)return x_;BC=1,Object.defineProperty(x_,"__esModule",{value:!0}),x_.MediatorJoinCoefficientsFixed=void 0;const u=Ce(),n=be();let o=class extends n.Mediator{constructor(t){super(t)}async mediateWith(t,e){var y;const r=[],a=e.map(({reply:_})=>_),c=(await Promise.all(a)).map(_=>{if(_.isFailed()){r.push(_.getFailMessage());return}return{value:_.get(),sideData:_.getSideData()}});let s=c.map(_=>{if(_)return _.value.iterations*this.cpuWeight+_.value.persistedItems*this.memoryWeight+_.value.blockingItems*this.timeWeight+_.value.requestTime*this.ioWeight});const d=Math.max(...s.filter(_=>_!==void 0)),l=t.context.get(u.KeysQueryOperation.limitIndicator);l&&(s=s.map((_,b)=>{var m,g;return _!==void 0&&((m=c[b])==null?void 0:m.value).blockingItems>0&&((g=c[b])==null?void 0:g.value).iterations>l?_+d:_}));let f=-1,h=Number.POSITIVE_INFINITY;for(const[_,b]of s.entries())b!==void 0&&(f===-1||b<h)&&(f=_,h=b);if(f<0)return(0,n.failTest)(this.constructFailureMessage(t,r));const p=e[f].actor;return p.includeInLogs&&((y=n.Actor.getContextLogger(t.context))==null||y.debug(`Determined physical join operator '${p.logicalType}-${p.physicalName}'`,{entries:t.entries.length,variables:await Promise.all(t.entries.map(async _=>(await _.output.metadata()).variables.map(b=>b.variable.value))),costs:Object.fromEntries(s.map((_,b)=>[`${e[b].actor.logicalType}-${e[b].actor.physicalName}`,_]).filter(_=>_[1]!==void 0)),coefficients:Object.fromEntries(c.map((_,b)=>[`${e[b].actor.logicalType}-${e[b].actor.physicalName}`,_==null?void 0:_.value]).filter(_=>_[1]!==void 0))})),(0,n.passTestWithSideData)(p,c[f].sideData)}};return x_.MediatorJoinCoefficientsFixed=o,x_}var $C;function $se(){return $C||($C=1,(function(u){var n=cc&&cc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=cc&&cc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Bse(),u)})(cc)),cc}var dc={},I_={},UC;function fJ(){if(UC)return I_;UC=1,Object.defineProperty(I_,"__esModule",{value:!0}),I_.ActorHttpInvalidate=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i)}};return I_.ActorHttpInvalidate=n,I_}var R_={},VC;function Use(){if(VC)return R_;VC=1,Object.defineProperty(R_,"__esModule",{value:!0}),R_.ActorHttpInvalidateListenable=void 0;const u=be(),n=fJ();let o=class extends n.ActorHttpInvalidate{constructor(t){super(t),this.invalidateListeners=[],this.invalidateListeners=[]}addInvalidateListener(t){this.invalidateListeners.push(t)}async test(t){return(0,u.passTestVoid)()}async run(t){for(const e of this.invalidateListeners)e(t);return{}}};return R_.ActorHttpInvalidateListenable=o,R_}var QC;function bf(){return QC||(QC=1,(function(u){var n=dc&&dc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=dc&&dc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(fJ(),u),o(Use(),u)})(dc)),dc}var lc={},F_={},HC;function Vse(){if(HC)return F_;HC=1,Object.defineProperty(F_,"__esModule",{value:!0}),F_.MediatorAll=void 0;const u=be();let n=class extends u.Mediator{constructor(i){super(i)}async mediate(i){const t=[];let e;try{e=this.publish(i)}catch{e=[]}for(const a of e){const c=await a.reply;c.isPassed()&&t.push({actor:a.actor,sideData:c.getSideData()})}return(await Promise.all(t.map(a=>a.actor.runObservable(i,a.sideData))))[0]}async mediateWith(){throw new Error("Unsupported operation: MediatorAll#mediateWith")}};return F_.MediatorAll=n,F_}var GC;function Qse(){return GC||(GC=1,(function(u){var n=lc&&lc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=lc&&lc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Vse(),u)})(lc)),lc}var fc={},N_={},zC;function Hse(){if(zC)return N_;zC=1,Object.defineProperty(N_,"__esModule",{value:!0}),N_.ActorRdfJoinEntriesSortSelectivity=void 0;const u=fX(),n=be();let o=class extends u.ActorRdfJoinEntriesSort{constructor(t){super(t)}async test(t){return(0,n.passTest)({accuracy:.501})}async run(t){const e=[...t.entries],r=[];for(;e.length>0;){let a=Number.MAX_VALUE,c=-1;for(const[s,d]of e.entries()){const{selectivity:l}=await this.mediatorJoinSelectivity.mediate({entries:[d,...r],context:t.context});l<a&&(a=l,c=s)}r.push(e[c]),e.splice(c,1)}return{entries:r}}};return N_.ActorRdfJoinEntriesSortSelectivity=o,N_}var XC;function Gse(){return XC||(XC=1,(function(u){var n=fc&&fc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=fc&&fc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Hse(),u)})(fc)),fc}var hc={},P_={},pc={},D_={},bc={},j_={},JC;function zse(){if(JC)return j_;JC=1,Object.defineProperty(j_,"__esModule",{value:!0}),j_.ChunkedIterator=void 0;const u=pt();let n=class extends u.TransformIterator{constructor(i,t,e){super(i,e),this.chunk=[],this.blockSize=t}consumeChunkAsIterator(){const i=new u.ArrayIterator(this.chunk,{autoStart:!1});return this.chunk=[],i}_transform(i,t,e){this.chunk.push(i),this.chunk.length>=this.blockSize&&e(this.consumeChunkAsIterator()),t()}_flush(i){this.chunk.length>0&&this._push(this.consumeChunkAsIterator()),super._flush(i)}};return j_.ChunkedIterator=n,j_}var L_={},kC;function Xse(){if(kC)return L_;kC=1,Object.defineProperty(L_,"__esModule",{value:!0}),L_.ClosableIterator=void 0;const u=pt();let n=class extends u.AsyncIterator{constructor(r,a){super(),this.onClose=a.onClose,this._source=r,this._source[u.DESTINATION]=this,this._source.on("end",t),this._source.on("error",i),this._source.on("readable",o),this.readable=this._source.readable}read(){const r=this._source.read();return r||(this.readable=!1,this._source.done&&this.close()),r}_end(r){this.onClose(),this._source.removeListener("end",t),this._source.removeListener("error",i),this._source.removeListener("readable",o),delete this._source[u.DESTINATION],this._source.destroy(),super._end(r)}};L_.ClosableIterator=n;function o(){this[u.DESTINATION].readable=!0}function i(e){this[u.DESTINATION].emit("error",e)}function t(){this[u.DESTINATION].close()}return L_}var M_={},KC;function Jse(){if(KC)return M_;KC=1,Object.defineProperty(M_,"__esModule",{value:!0}),M_.ClosableTransformIterator=void 0;const u=pt();let n=class extends u.TransformIterator{constructor(i,t){super(i,t),this.onClose=t.onClose}_end(i){this.onClose(),super._end(i)}};return M_.ClosableTransformIterator=n,M_}var C_={},WC;function kse(){if(WC)return C_;WC=1,Object.defineProperty(C_,"__esModule",{value:!0}),C_.instrumentIterator=void 0;function u(o){const i={count:0,timeSelf:0,timeLife:0};return n(o,i,!0),new Promise(t=>{o.on("end",()=>{t(i)})})}C_.instrumentIterator=u;function n(o,i,t){if(!("_profileInstrumented"in o)){if(o._profileInstrumented=!0,"_read"in o){const e=o._read;o._read=(r,a)=>{const c=performance.now();e.call(o,r,()=>{i.timeSelf+=performance.now()-c,a()})}}if("read"in o){const e=o.read;o.read=()=>{const r=performance.now(),a=e.call(o);return t&&a&&i.count++,i.timeSelf+=performance.now()-r,a}}if(t){const e=performance.now();o.on("end",()=>{i.timeLife=performance.now()-e})}"_source"in o&&n(o._source,i,!1)}}return C_}var YC;function ua(){return YC||(YC=1,(function(u){var n=bc&&bc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=bc&&bc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(zse(),u),o(Xse(),u),o(Jse(),u),o(kse(),u)})(bc)),bc}var ZC;function Kse(){if(ZC)return D_;ZC=1,Object.defineProperty(D_,"__esModule",{value:!0}),D_.ActorRdfJoin=void 0;const u=Ce(),n=be(),o=ua(),i=br();let t=class Qi extends n.Actor{constructor(r,a){super(r),this.includeInLogs=!0,this.logicalType=a.logicalType,this.physicalName=a.physicalName,this.limitEntries=a.limitEntries??Number.POSITIVE_INFINITY,this.limitEntriesMin=a.limitEntriesMin??!1,this.canHandleUndefs=a.canHandleUndefs??!1,this.isLeaf=a.isLeaf??!0,this.requiresVariableOverlap=a.requiresVariableOverlap??!1}static overlappingVariables(r){const a={};for(const c of r)for(const s of c.variables){a[s.variable.value]||(a[s.variable.value]={variable:s.variable,canBeUndef:s.canBeUndef,occurrences:0});const d=a[s.variable.value];d.canBeUndef=d.canBeUndef||s.canBeUndef,d.occurrences++}return Object.values(a).filter(c=>c.occurrences===r.length).map(c=>({variable:c.variable,canBeUndef:c.canBeUndef}))}static joinVariables(r,a,c=!1){const s={};let d=!0;for(const l of a){for(const f of l.variables)s[f.variable.value]=s[f.variable.value]||f.canBeUndef||!d&&c&&!(f.variable.value in s);d=!1}return Object.entries(s).map(([l,f])=>({variable:r.variable(l),canBeUndef:f}))}static joinBindings(...r){if(r.length===0)return null;if(r.length===1)return r[0];let a=r[0];for(const c of r.slice(1)){const s=a.merge(c);if(!s)return null;a=s}return a}static getCardinality(r){return r.cardinality}static async getMetadatas(r){return await Promise.all(r.map(a=>a.output.metadata()))}static async getEntriesWithMetadatas(r){const a=await Qi.getMetadatas(r);return r.map((c,s)=>({...c,metadata:a[s]}))}static getRequestInitialTimes(r){return r.map(a=>a.pageSize?0:a.requestTime??0)}static getRequestItemTimes(r){return r.map(a=>a.pageSize?(a.requestTime??0)/a.pageSize:0)}constructState(r){const a=new i.MetadataValidationState,c=()=>a.invalidate();for(const s of r)s.state.addInvalidateListener(c);return a}async constructResultMetadata(r,a,c,s={},d=!1){let l;if(s.cardinality)l=s.cardinality;else{let f=!1;l=a.reduce((h,p)=>{const y=Qi.getCardinality(p);return y.value===0&&(f=!0),{type:y.type==="estimate"?"estimate":h.type,value:h.value*(d?Math.max(1,y.value):y.value)}},{type:"exact",value:1}),(!f||d)&&(l.value*=(await this.mediatorJoinSelectivity.mediate({entries:r,context:c})).selectivity,l.value===0&&(l.value=Number.MIN_VALUE))}return{state:this.constructState(a),...s,cardinality:{type:l.type,value:l.value},variables:Qi.joinVariables(c.getSafe(u.KeysInitQuery.dataFactory),a,d)}}static async sortJoinEntries(r,a,c){if(a.some(f=>f.metadata.variables.some(h=>h.canBeUndef)))return(0,n.passTest)(a);const d={};for(const f of a)for(const h of f.metadata.variables){let p=d[h.variable.value];p||(p=0),d[h.variable.value]=++p}const l=[];for(const[f,h]of Object.entries(d))h>=2&&l.push(f);return l.length===0?(0,n.failTest)("Bind join can only join entries with at least one common variable"):(0,n.passTest)((await r.mediate({entries:a,context:c})).entries)}async test(r){if(r.type!==this.logicalType)return(0,n.failTest)(`${this.name} can only handle logical joins of type '${this.logicalType}', while '${r.type}' was given.`);if(r.entries.length<=1)return(0,n.failTest)(`${this.name} requires at least two join entries.`);if(this.limitEntriesMin?r.entries.length<this.limitEntries:r.entries.length>this.limitEntries)return(0,n.failTest)(`${this.name} requires ${this.limitEntries} join entries at ${this.limitEntriesMin?"least":"most"}. The input contained ${r.entries.length}.`);for(const s of r.entries)if(s.output.type!=="bindings")return(0,n.failTest)(`Invalid type of a join entry: Expected 'bindings' but got '${s.output.type}'`);const a=await Qi.getMetadatas(r.entries);let c;return!this.canHandleUndefs&&(c=Qi.overlappingVariables(a),c.some(s=>s.canBeUndef))?(0,n.failTest)(`Actor ${this.name} can not join streams containing undefs`):this.requiresVariableOverlap&&(c??Qi.overlappingVariables(a)).length===0?(0,n.failTest)(`Actor ${this.name} can only join entries with at least one common variable`):await this.getJoinCoefficients(r,{metadatas:a})}async run(r,a){let c;r.context.has(u.KeysInitQuery.physicalQueryPlanLogger)&&(c=r.context.get(u.KeysInitQuery.physicalQueryPlanNode),r.context=r.context.set(u.KeysInitQuery.physicalQueryPlanNode,r));const s=r.context.get(u.KeysInitQuery.physicalQueryPlanLogger);let d;this.includeInLogs&&s&&(d={},s.stashChildren(c,h=>h.logicalOperator.startsWith("join")),s.logOperation(`join-${this.logicalType}`,this.physicalName,r,c,this.name,d));const{result:l,physicalPlanMetadata:f}=await this.getOutput(r,a);if(d){(0,o.instrumentIterator)(l.bindingsStream).then(p=>{s.appendMetadata(r,{cardinalityReal:p.count,timeSelf:p.timeSelf,timeLife:p.timeLife})}),Object.assign(d,f);const h=a.metadatas.map(Qi.getCardinality);if(d.cardinalities=h,d.joinCoefficients=(await this.getJoinCoefficients(r,a)).getOrThrow(),this.isLeaf)for(let p=0;p<r.entries.length;p++){const y=r.entries[p];s.unstashChild(y.operation,r),s.appendMetadata(y.operation,{cardinality:h[p]})}}return l.metadata=(0,i.cachifyMetadata)(l.metadata),l}};return D_.ActorRdfJoin=t,D_}var eq;function Hr(){return eq||(eq=1,(function(u){var n=pc&&pc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=pc&&pc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Kse(),u)})(pc)),pc}var tq;function Wse(){if(tq)return P_;tq=1,Object.defineProperty(P_,"__esModule",{value:!0}),P_.ActorRdfJoinSingle=void 0;const u=Hr(),n=be();let o=class extends u.ActorRdfJoin{constructor(t){super(t,{logicalType:"inner",physicalName:"single",limitEntries:1}),this.includeInLogs=!1}async test(t){return t.entries.length!==1?(0,n.failTest)(`Actor ${this.name} can only join a single entry`):await this.getJoinCoefficients(t,void 0)}async getOutput(t){return{result:t.entries[0].output}}async getJoinCoefficients(t,e){return(0,n.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},e)}};return P_.ActorRdfJoinSingle=o,P_}var rq;function Yse(){return rq||(rq=1,(function(u){var n=hc&&hc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=hc&&hc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Wse(),u)})(hc)),hc}var yc={},q_={},nq;function Zse(){if(nq)return q_;nq=1,Object.defineProperty(q_,"__esModule",{value:!0}),q_.ActorRdfJoinMultiEmpty=void 0;const u=Hr(),n=Ce(),o=be(),i=br(),t=pt();let e=class extends u.ActorRdfJoin{constructor(a){super(a,{logicalType:"inner",physicalName:"multi-empty",canHandleUndefs:!0})}async test(a){return(await u.ActorRdfJoin.getMetadatas(a.entries)).every(c=>u.ActorRdfJoin.getCardinality(c).value>0)?(0,o.failTest)(`Actor ${this.name} can only join entries where at least one is empty`):super.test(a)}async getOutput(a){for(const s of a.entries)s.output.bindingsStream.close();const c=a.context.getSafe(n.KeysInitQuery.dataFactory);return{result:{bindingsStream:new t.ArrayIterator([],{autoStart:!1}),metadata:async()=>({state:new i.MetadataValidationState,cardinality:{type:"exact",value:0},variables:u.ActorRdfJoin.joinVariables(c,await u.ActorRdfJoin.getMetadatas(a.entries))}),type:"bindings"}}}async getJoinCoefficients(a,c){return(0,o.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},c)}};return q_.ActorRdfJoinMultiEmpty=e,q_}var iq;function ece(){return iq||(iq=1,(function(u){var n=yc&&yc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=yc&&yc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Zse(),u)})(yc)),yc}var _c={},B_={},gc={},$_={},aq;function tce(){if(aq)return $_;aq=1,Object.defineProperty($_,"__esModule",{value:!0}),$_.BindingsIndexDef=void 0;let u=class{constructor(o,i){this.keys=o.map(t=>t.variable),this.hashFn=i,this.index={}}put(o,i){return this.index[this.hashFn(o,this.keys)]=i}get(o){const i=this.getFirst(o);return i?[i]:[]}getFirst(o){return this.index[this.hashFn(o,this.keys)]}values(){return Object.values(this.index)}};return $_.BindingsIndexDef=u,$_}var U_={},uq;function rce(){if(uq)return U_;uq=1,Object.defineProperty(U_,"__esModule",{value:!0}),U_.BindingsIndexUndef=void 0;let u=class{constructor(o,i,t){this.data={},this.keys=o.map(e=>e.variable),this.hashFn=i,this.allowDisjointDomains=t&&this.keys.length>0}put(o,i){if(this.allowDisjointDomains||this.isBindingsValid(o)){let t=this.data;for(let e=0;e<this.keys.length;e++){const r=this.keys[e],a=this.hashFn(o.get(r));let c=t[a];c||(c=t[a]=e===this.keys.length-1?i:{}),t=c}}return i}isBindingsValid(o){let i=!1;for(const t of this.keys)if(o.has(t)){i=!0;break}return i}get(o){return this.allowDisjointDomains||this.isBindingsValid(o)?this.getRecursive(o,this.keys,[this.data]):[]}getRecursive(o,i,t){if(i.length===0)return t;let e;[e,...i]=i;const r=[];for(const a of t){const c=this.hashFn(o==null?void 0:o.get(e));if(c){const s=[a[c],a[""]].filter(Boolean);if(s.length===0)continue;r.push(this.getRecursive(o,i,s))}else{const s=Object.values(a);if(s.length===0)continue;r.push(this.getRecursive(o,i,s))}}return r.flat()}getFirst(o,i=!0){if(this.allowDisjointDomains||this.isBindingsValid(o))return this.getRecursiveFirst(o,this.keys,[this.data],i)}getRecursiveFirst(o,i,t,e){if(i.length===0)return t[0];let r;[r,...i]=i;for(const a of t){const c=this.hashFn(o.get(r));if(c||!e){const s=[a[c],a[""]].filter(Boolean);if(s.length===0)continue;const d=this.getRecursiveFirst(o,i,s,e);if(d)return d}else{const s=Object.values(a);if(s.length===0)continue;const d=this.getRecursiveFirst(o,i,s,e);if(d)return d}}}values(){return this.keys.length===0?[]:this.getRecursive(void 0,this.keys,[this.data])}};return U_.BindingsIndexUndef=u,U_}var B4={},oq;function nce(){return oq||(oq=1,Object.defineProperty(B4,"__esModule",{value:!0})),B4}var sq;function WO(){return sq||(sq=1,(function(u){var n=gc&&gc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=gc&&gc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(tce(),u),o(rce(),u),o(nce(),u)})(gc)),gc}var $4,cq;function ice(){if(cq)return $4;cq=1;let u=pt(),n=u.MultiTransformIterator,o=u.SimpleTransformIterator;class i extends n{constructor(e,r,a,c){super(e,c),this.funRight=r,this.funJoin=a}_createTransformer(e){return new o(this.funRight(e),{transform:(r,a,c)=>{let s=this.funJoin(e,r);s!==null&&c(s),a()}})}}return $4=i,$4}var U4,dq;function ace(){if(dq)return U4;dq=1;let u=pt().AsyncIterator;class n extends u{constructor(i,t,e,r){super(),this.addedDataListener=!1,this.left=i,this.right=t,this.funHash=e,this.funJoin=r,this.leftMap=new Map,this.match=null,this.matches=[],this.matchIdx=0,this.left.on("error",c=>this.destroy(c)),this.right.on("error",c=>this.destroy(c)),this.readable=!1,this.left.on("end",a.bind(this));function a(){this.readable=!0,this.right.on("readable",()=>this.readable=!0),this.right.on("end",()=>{this.hasResults()||this._end()})}this.on("newListener",c=>{c==="data"&&this._addDataListenerIfNeeded()}),this.left.readable&&this._addDataListenerIfNeeded(),this.left.on("readable",()=>this._addDataListenerIfNeeded())}hasResults(){return!this.right.ended||this.matchIdx<this.matches.length}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(this._addDataListenerIfNeeded();;){if(this.ended||!this.readable)return null;for(;this.matchIdx<this.matches.length;){let t=this.matches[this.matchIdx++],e=this.funJoin(t,this.match);if(e!==null)return e}if(this.hasResults()||this._end(),this.match=this.right.read(),this.match===null)return this.readable=!1,null;let i=this.funHash(this.match);this.matches=this.leftMap.get(i)||[],this.matchIdx=0}}_addDataListenerIfNeeded(){this.addedDataListener||(this.addedDataListener=!0,this._addDataListener())}_addDataListener(){this.left.on("data",i.bind(this));function i(t){let e=this.funHash(t),r=this.leftMap.get(e);r||(r=[],this.leftMap.set(e,r)),r.push(t)}}}return U4=n,U4}var V4,lq;function uce(){if(lq)return V4;lq=1;const{MultiTransformIterator:u,SimpleTransformIterator:n,scheduleTask:o}=pt();class i extends u{constructor(e,r,a,c){super(e,c),this.right=r,this.funJoin=a,this.on("end",()=>this.right.close())}_end(){super._end(),o(()=>this.right.destroy())}_createTransformer(e){return new n(this.right.clone(),{transform:(r,a,c)=>{let s=this.funJoin(e,r);s!==null&&c(s),a()}})}}return V4=i,V4}var Q4,fq;function oce(){if(fq)return Q4;fq=1;let u=pt().AsyncIterator;class n extends u{constructor(i,t,e,r){super(),this.left=i,this.right=t,this.funHash=e,this.funJoin=r,this.usedLeft=!1,this.leftMap=new Map,this.rightMap=new Map,this.on("end",()=>this._cleanup()),this.match=null,this.matches=[],this.matchIdx=0,(this.left.readable||this.right.readable)&&(this.readable=!0),this.left.on("error",a=>this.destroy(a)),this.right.on("error",a=>this.destroy(a)),this.left.on("readable",()=>this.readable=!0),this.right.on("readable",()=>this.readable=!0),this.left.on("end",()=>{this.hasResults()||this._end()}),this.right.on("end",()=>{this.hasResults()||this._end()})}hasResults(){return!this.left.ended||!this.right.ended||!!this.matches&&this.matchIdx<this.matches.length}_cleanup(){this.leftMap=null,this.rightMap=null,this.matches=null}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(;;){if(this.ended)return null;for(;this.matchIdx<this.matches.length;){let e=this.matches[this.matchIdx++],r=this.usedLeft?this.funJoin(this.match,e):this.funJoin(e,this.match);if(r!==null)return r}this.hasResults()||this._end();let i=null;for(let e=0;e<2&&(i=this.usedLeft?this.right.read():this.left.read(),this.usedLeft=!this.usedLeft,i===null);++e);if(this.done||i===null)return this.readable=!1,null;let t=this.funHash(i);if(this.usedLeft&&this.right.done)this.leftMap=null;else if(this.left.done)this.rightMap=null;else{let e=this.usedLeft?this.leftMap:this.rightMap;e.has(t)||e.set(t,[]);let r=e.get(t);r||(r=[],e.set(t,r)),r.push(i)}this.match=i,this.matches=(this.usedLeft?this.rightMap:this.leftMap).get(t)||[],this.matchIdx=0}}}return Q4=n,Q4}var H4,hq;function sce(){if(hq)return H4;hq=1;let u=pt().AsyncIterator;class n extends u{constructor(i){super(),Array.isArray(i)||(i=Array.prototype.slice.call(arguments)),this.streams=i;for(let t of i)t.on("readable",()=>this.emit("readable")),t.on("end",()=>this._removeStream(t));this.streams.length===0&&this.close(),this.idx=this.streams.length-1}_removeStream(i){let t=this.streams.indexOf(i);t<0||(this.streams.splice(t,1),this.idx>=this.streams.length&&--this.idx,this.streams.length===0&&this._end())}close(){super.close();for(let i of this.streams)i.close()}read(){for(let i=0;i<this.streams.length;++i){this.idx=(this.idx+1)%this.streams.length;let t=this.streams[this.idx].read();if(t!==null)return t}return null}}return H4=n,H4}var G4,pq;function Xw(){if(pq)return G4;pq=1;const u=ice(),n=ace(),o=uce(),i=oce(),t=sce();return G4={DynamicNestedLoopJoin:u,HashJoin:n,NestedLoopJoin:o,SymmetricHashJoin:i,MergeStream:t},G4}var bq;function cce(){if(bq)return B_;bq=1,Object.defineProperty(B_,"__esModule",{value:!0}),B_.ActorRdfJoinHash=void 0;const u=Hr(),n=be(),o=WO(),i=ua(),t=pt(),e=Xw(),r=tr();let a=class extends u.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:`hash-${s.canHandleUndefs?"undef":"def"}`,limitEntries:2,requiresVariableOverlap:!0,canHandleUndefs:s.canHandleUndefs})}async getOutput(s,d){const l=d.metadatas;let f;const h=u.ActorRdfJoin.overlappingVariables(l);if(this.canHandleUndefs){const p=d.entriesSorted[0].output,y=d.entriesSorted[1].output;f=new i.ClosableTransformIterator(async()=>{const _=new o.BindingsIndexUndef(h,b=>b&&b.termType!=="Variable"?(0,r.termToString)(b):"",!0);return await new Promise(b=>{p.bindingsStream.on("data",m=>{(_.getFirst(m,!1)??_.put(m,[])).push(m)}),p.bindingsStream.on("end",b),p.bindingsStream.on("error",m=>{f.emit("error",m)})}),new t.MultiTransformIterator(y.bindingsStream,{multiTransform:b=>new t.ArrayIterator(_.get(b).flat().map(m=>u.ActorRdfJoin.joinBindings(b,m)).filter(m=>m!==null),{autoStart:!1}),autoStart:!1})},{autoStart:!1,onClose(){p.bindingsStream.destroy(),y.bindingsStream.destroy()}})}else{const{hashFunction:p}=await this.mediatorHashBindings.mediate({context:s.context}),y=h.map(_=>_.variable);f=new e.HashJoin(d.entriesSorted[0].output.bindingsStream,d.entriesSorted[1].output.bindingsStream,_=>p(_,y),u.ActorRdfJoin.joinBindings)}return{result:{type:"bindings",bindingsStream:f,metadata:async()=>await this.constructResultMetadata(d.entriesSorted,l,s.context)}}}async getJoinCoefficients(s,d){let l=s.entries;d.metadatas[1].cardinality.value<d.metadatas[0].cardinality.value&&(d.metadatas=[d.metadatas[1],d.metadatas[0]],l=[s.entries[1],s.entries[0]]);const{metadatas:f}=d,h=u.ActorRdfJoin.getRequestInitialTimes(f),p=u.ActorRdfJoin.getRequestItemTimes(f);let y=f[0].cardinality.value+f[1].cardinality.value;return this.canHandleUndefs||(y*=.8),(0,n.passTestWithSideData)({iterations:y,persistedItems:f[0].cardinality.value,blockingItems:f[0].cardinality.value,requestTime:h[0]+f[0].cardinality.value*p[0]+h[1]+f[1].cardinality.value*p[1]},{...d,entriesSorted:l})}};return B_.ActorRdfJoinHash=a,B_}var yq;function _q(){return yq||(yq=1,(function(u){var n=_c&&_c.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=_c&&_c.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(cce(),u)})(_c)),_c}var mc={},V_={},gq;function dce(){if(gq)return V_;gq=1,Object.defineProperty(V_,"__esModule",{value:!0}),V_.ActorRdfJoinSymmetricHash=void 0;const u=Hr(),n=be(),o=Xw();let i=class extends u.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"symmetric-hash",limitEntries:2,requiresVariableOverlap:!0})}async getOutput(e){const r=await u.ActorRdfJoin.getMetadatas(e.entries),a=u.ActorRdfJoin.overlappingVariables(r),{hashFunction:c}=await this.mediatorHashBindings.mediate({context:e.context}),s=a.map(l=>l.variable);return{result:{type:"bindings",bindingsStream:new o.SymmetricHashJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,l=>c(l,s),u.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(e.entries,r,e.context)}}}async getJoinCoefficients(e,r){const{metadatas:a}=r,c=u.ActorRdfJoin.getRequestInitialTimes(a),s=u.ActorRdfJoin.getRequestItemTimes(a);return(0,n.passTestWithSideData)({iterations:a[0].cardinality.value+a[1].cardinality.value,persistedItems:a[0].cardinality.value+a[1].cardinality.value,blockingItems:0,requestTime:c[0]+a[0].cardinality.value*s[0]+c[1]+a[1].cardinality.value*s[1]},r)}};return V_.ActorRdfJoinSymmetricHash=i,V_}var mq;function lce(){return mq||(mq=1,(function(u){var n=mc&&mc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=mc&&mc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(dce(),u)})(mc)),mc}var vc={},Q_={},vq;function fce(){if(vq)return Q_;vq=1,Object.defineProperty(Q_,"__esModule",{value:!0}),Q_.ActorRdfJoinNestedLoop=void 0;const u=Hr(),n=be(),o=Xw();let i=class extends u.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){return{result:{type:"bindings",bindingsStream:new o.NestedLoopJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,u.ActorRdfJoin.joinBindings,{autoStart:!1}),metadata:async()=>await this.constructResultMetadata(e.entries,await u.ActorRdfJoin.getMetadatas(e.entries),e.context)}}}async getJoinCoefficients(e,r){const{metadatas:a}=r,c=u.ActorRdfJoin.getRequestInitialTimes(a),s=u.ActorRdfJoin.getRequestItemTimes(a);return(0,n.passTestWithSideData)({iterations:a[0].cardinality.value*a[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:c[0]+a[0].cardinality.value*s[0]+c[1]+a[1].cardinality.value*s[1]},r)}};return Q_.ActorRdfJoinNestedLoop=i,Q_}var Tq;function hce(){return Tq||(Tq=1,(function(u){var n=vc&&vc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=vc&&vc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(fce(),u)})(vc)),vc}var Tc={},H_={},wc={},G_={},Sc={},wq;function hJ(){if(wq)return Sc;wq=1,Object.defineProperty(Sc,"__esModule",{value:!0}),Sc.bindingsToCompactString=Sc.bindingsToString=void 0;const u=tr();function n(i){const t={};for(const e of i.keys())t[e.value]=(0,u.termToString)(i.get(e));return JSON.stringify(t,null,"  ")}Sc.bindingsToString=n;function o(i,t){return t.map(e=>{const r=i.get(e);return r?(0,u.termToString)(r):""}).join("")}return Sc.bindingsToCompactString=o,Sc}var Sq;function pJ(){if(Sq)return G_;Sq=1,Object.defineProperty(G_,"__esModule",{value:!0}),G_.Bindings=void 0;const u=be(),n=wO,o=hJ();let i=class Rr{constructor(e,r,a){this.type="bindings",this.dataFactory=e,this.entries=r,this.contextHolder=a}has(e){return this.entries.has(typeof e=="string"?e:e.value)}get(e){return this.entries.get(typeof e=="string"?e:e.value)}set(e,r){return new Rr(this.dataFactory,this.entries.set(typeof e=="string"?e:e.value,r),this.contextHolder)}delete(e){return new Rr(this.dataFactory,this.entries.delete(typeof e=="string"?e:e.value),this.contextHolder)}keys(){return this.mapIterable(this.iteratorToIterable(this.entries.keys()),e=>this.dataFactory.variable(e))}values(){return this.iteratorToIterable(this.entries.values())}forEach(e){for(const[r,a]of this.entries.entries())e(a,this.dataFactory.variable(r))}get size(){return this.entries.size}[Symbol.iterator](){return this.mapIterable(this.iteratorToIterable(this.entries.entries()),([e,r])=>[this.dataFactory.variable(e),r])[Symbol.iterator]()}equals(e){var r;if(!e)return!1;if(this===e)return!0;if(this.size!==e.size)return!1;for(const a of this.keys())if(!((r=this.get(a))!=null&&r.equals(e.get(a))))return!1;return!0}filter(e){return new Rr(this.dataFactory,(0,n.Map)(this.entries.filter((r,a)=>e(r,this.dataFactory.variable(a)))),this.contextHolder)}map(e){return new Rr(this.dataFactory,(0,n.Map)(this.entries.map((r,a)=>e(r,this.dataFactory.variable(a)))),this.contextHolder)}merge(e){if(this.size<e.size&&e instanceof Rr)return e.merge(this);let r=this.entries;if(e instanceof Rr)for(const[a,c]of e.entries){const s=this.entries.get(a);if(s&&!s.equals(c))return;r=r.set(a,c)}else for(const[a,c]of e){const s=this.entries.get(a.value);if(s&&!s.equals(c))return;r=r.set(a.value,c)}return this.createBindingsWithContexts(r,e)}mergeWith(e,r){if(this.size<r.size&&r instanceof Rr)return r.mergeWith(e,this);let a=this.entries;if(r instanceof Rr)for(const[c,s]of r.entries){const d=this.entries.get(c);let l;d&&!d.equals(s)?l=e(d,s,this.dataFactory.variable(c)):l=s,a=a.set(c,l)}else for(const[c,s]of r){const d=this.entries.get(c.value);let l;d&&!d.equals(s)?l=e(d,s,c):l=s,a=a.set(c.value,l)}return this.createBindingsWithContexts(a,r)}createBindingsWithContexts(e,r){if(this.contextHolder&&this.contextHolder.context){let a=this.contextHolder.context;return"contextHolder"in r&&r.contextHolder&&r.contextHolder.context&&(a=Rr.mergeContext(this.contextHolder.contextMergeHandlers,a,r.contextHolder.context)),new Rr(this.dataFactory,e,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:a})}return new Rr(this.dataFactory,e,r.contextHolder)}static mergeContext(e,r,a){const c=[...r.keys(),...a.keys()],s={},d={},l=new Set(a.keys().map(h=>h.name)),f=r.keys().filter(h=>l.has(h.name));for(const h of c){if(d[h.name]===1)continue;d[h.name]=1;const p=f.some(y=>y.name===h.name);if(e[h.name]&&p){s[h.name]=e[h.name].run(r.get(h),a.get(h));continue}if(!(!e[h.name]&&p)){if(!r.get(h)){s[h.name]=a.get(h);continue}a.get(h)||(s[h.name]=r.get(h))}}return new u.ActionContext(s)}setContextEntry(e,r){return this.setContextEntryRaw(e,r)}setContextEntryRaw(e,r){var a;return this.contextHolder&&this.contextHolder.context?new Rr(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:this.contextHolder.context.set(e,r)}):new Rr(this.dataFactory,this.entries,{contextMergeHandlers:((a=this.contextHolder)==null?void 0:a.contextMergeHandlers)??{},context:new u.ActionContext().set(e,r)})}deleteContextEntry(e){return this.deleteContextEntryRaw(e)}deleteContextEntryRaw(e){var r;return this.contextHolder?new Rr(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:(r=this.contextHolder.context)==null?void 0:r.delete(e)}):new Rr(this.dataFactory,this.entries)}getContext(){var e;return(e=this.contextHolder)==null?void 0:e.context}getContextEntry(e){var r;return(r=this.getContext())==null?void 0:r.get(e)}toString(){return(0,o.bindingsToString)(this)}*mapIterable(e,r){for(const a of e)yield r(a)}iteratorToIterable(e){return{[Symbol.iterator]:()=>e}}};return G_.Bindings=i,G_}var z_={},Aq;function pce(){if(Aq)return z_;Aq=1,Object.defineProperty(z_,"__esModule",{value:!0}),z_.BindingsFactory=void 0;const u=wO,n=pJ();let o=class bJ{constructor(t,e){this.dataFactory=t,this.contextMergeHandlers=e}static async create(t,e,r){return new bJ(r,(await t.mediate({context:e})).mergeHandlers)}bindings(t=[]){return new n.Bindings(this.dataFactory,(0,u.Map)(t.map(([e,r])=>[e.value,r])),this.contextMergeHandlers?{contextMergeHandlers:this.contextMergeHandlers}:void 0)}fromBindings(t){return this.bindings([...t])}fromRecord(t){return this.bindings(Object.entries(t).map(([e,r])=>[this.dataFactory.variable(e),r]))}};return z_.BindingsFactory=o,z_}var Oq;function $t(){return Oq||(Oq=1,(function(u){var n=wc&&wc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=wc&&wc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(pJ(),u),o(pce(),u),o(hJ(),u)})(wc)),wc}var Eq;function bce(){if(Eq)return H_;Eq=1,Object.defineProperty(H_,"__esModule",{value:!0}),H_.ActorRdfJoinOptionalHash=void 0;const u=Hr(),n=be(),o=$t(),i=WO(),t=ua(),e=pt(),r=tr();let a=class $A extends u.ActorRdfJoin{constructor(s){super(s,{logicalType:"optional",physicalName:`hash-${s.canHandleUndefs?"undef":"def"}-${s.blocking?"blocking":"nonblocking"}`,limitEntries:2,canHandleUndefs:s.canHandleUndefs,requiresVariableOverlap:!0})}static constructIndex(s,d){return s?new i.BindingsIndexUndef(d,l=>l&&l.termType!=="Variable"?(0,r.termToString)(l):"",!0):new i.BindingsIndexDef(d,o.bindingsToCompactString)}async getOutput(s){const d=s.entries[1].output,l=s.entries[0].output,f=await u.ActorRdfJoin.getMetadatas(s.entries),h=u.ActorRdfJoin.overlappingVariables(f);let p;return this.blocking?p=new t.ClosableTransformIterator(async()=>{const y=$A.constructIndex(this.canHandleUndefs,h);return await new Promise(_=>{d.bindingsStream.on("data",b=>{(y.getFirst(b,!0)??y.put(b,[])).push(b)}),d.bindingsStream.on("end",_),d.bindingsStream.on("error",b=>{p.emit("error",b)})}),new e.MultiTransformIterator(l.bindingsStream,{multiTransform:_=>new e.ArrayIterator(y.get(_).flat().map(b=>u.ActorRdfJoin.joinBindings(_,b)).filter(b=>b!==null),{autoStart:!1}),optional:!0,autoStart:!1})},{autoStart:!1,onClose(){d.bindingsStream.destroy(),l.bindingsStream.destroy()}}):p=new t.ClosableTransformIterator(async()=>{const y=$A.constructIndex(this.canHandleUndefs,h);let _=!0;return d.bindingsStream.on("data",b=>{(y.getFirst(b,!0)??y.put(b,new e.BufferedIterator({autoStart:!1})))._push(b)}),d.bindingsStream.on("end",()=>{for(const b of y.values())b.close();_=!1}),d.bindingsStream.on("error",b=>{p.emit("error",b)}),new e.MultiTransformIterator(l.bindingsStream,{multiTransform:b=>{let m=y.get(b);return m.length===0&&(_?m=[y.put(b,new e.BufferedIterator({autoStart:!1}))]:m=[]),new e.UnionIterator(m.map(T=>T.clone()),{autoStart:!1}).map(T=>u.ActorRdfJoin.joinBindings(b,T))},optional:!0,autoStart:!1})},{autoStart:!1,onClose(){d.bindingsStream.destroy(),l.bindingsStream.destroy()}}),{result:{type:"bindings",bindingsStream:p,metadata:async()=>await this.constructResultMetadata(s.entries,f,s.context,{},!0)}}}async getJoinCoefficients(s,d){const{metadatas:l}=d,f=u.ActorRdfJoin.getRequestInitialTimes(l),h=u.ActorRdfJoin.getRequestItemTimes(l);let p=l[0].cardinality.value+l[1].cardinality.value;return this.canHandleUndefs||(p*=.8),this.blocking&&(p*=.9),(0,n.passTestWithSideData)({iterations:p,persistedItems:l[0].cardinality.value,blockingItems:this.blocking?l[0].cardinality.value:0,requestTime:f[0]+l[0].cardinality.value*h[0]+f[1]+l[1].cardinality.value*h[1]},d)}};return H_.ActorRdfJoinOptionalHash=a,H_}var xq;function kT(){return xq||(xq=1,(function(u){var n=Tc&&Tc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Tc&&Tc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(bce(),u)})(Tc)),Tc}var Ac={},X_={},Iq;function yce(){if(Iq)return X_;Iq=1,Object.defineProperty(X_,"__esModule",{value:!0}),X_.ActorRdfJoinOptionalNestedLoop=void 0;const u=Hr(),n=be(),o=Xw();let i=class extends u.ActorRdfJoin{constructor(e){super(e,{logicalType:"optional",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){return{result:{type:"bindings",bindingsStream:new o.NestedLoopJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,u.ActorRdfJoin.joinBindings,{optional:!0,autoStart:!1}),metadata:async()=>await this.constructResultMetadata(e.entries,await u.ActorRdfJoin.getMetadatas(e.entries),e.context,{},!0)}}}async getJoinCoefficients(e,r){const{metadatas:a}=r,c=u.ActorRdfJoin.getRequestInitialTimes(a),s=u.ActorRdfJoin.getRequestItemTimes(a);return(0,n.passTestWithSideData)({iterations:a[0].cardinality.value*a[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:c[0]+a[0].cardinality.value*s[0]+c[1]+a[1].cardinality.value*s[1]},r)}};return X_.ActorRdfJoinOptionalNestedLoop=i,X_}var Rq;function _ce(){return Rq||(Rq=1,(function(u){var n=Ac&&Ac.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ac&&Ac.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(yce(),u)})(Ac)),Ac}var Oc={},J_={},Fq;function gce(){if(Fq)return J_;Fq=1,Object.defineProperty(J_,"__esModule",{value:!0}),J_.ActorRdfJoinMinusHash=void 0;const u=Hr(),n=be(),o=$t(),i=WO(),t=ua(),e=tr();let r=class yJ extends u.ActorRdfJoin{constructor(c){super(c,{logicalType:"minus",physicalName:`hash-${c.canHandleUndefs?"undef":"def"}`,limitEntries:2,canHandleUndefs:c.canHandleUndefs})}static constructIndex(c,s){return c?new i.BindingsIndexUndef(s,d=>d&&d.termType!=="Variable"?(0,e.termToString)(d):"",!1):new i.BindingsIndexDef(s,o.bindingsToCompactString)}async getOutput(c){const s=c.entries[1].output,d=c.entries[0].output,l=await u.ActorRdfJoin.getMetadatas(c.entries),f=u.ActorRdfJoin.overlappingVariables(l);if(f.length===0)return s.bindingsStream.destroy(),{result:d};const h=new t.ClosableTransformIterator(async()=>{const p=yJ.constructIndex(this.canHandleUndefs,f);return await new Promise(y=>{s.bindingsStream.on("data",_=>p.put(_,!0)),s.bindingsStream.on("end",y),s.bindingsStream.on("error",_=>h.emit("error",_))}),d.bindingsStream.filter(y=>!p.getFirst(y,!0))},{autoStart:!1,onClose(){s.bindingsStream.destroy(),d.bindingsStream.destroy()}});return{result:{type:"bindings",bindingsStream:h,metadata:d.metadata}}}async getJoinCoefficients(c,s){const{metadatas:d}=s,l=u.ActorRdfJoin.getRequestInitialTimes(d),f=u.ActorRdfJoin.getRequestItemTimes(d);let h=d[0].cardinality.value+d[1].cardinality.value;return this.canHandleUndefs||(h*=.8),(0,n.passTestWithSideData)({iterations:h,persistedItems:d[0].cardinality.value,blockingItems:d[0].cardinality.value,requestTime:l[0]+d[0].cardinality.value*f[0]+l[1]+d[1].cardinality.value*f[1]},s)}};return J_.ActorRdfJoinMinusHash=r,J_}var Nq;function Pq(){return Nq||(Nq=1,(function(u){var n=Oc&&Oc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Oc&&Oc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(gce(),u)})(Oc)),Oc}var Ec={},k_={},xc={},K_={},Dq;function mce(){if(Dq)return K_;Dq=1,Object.defineProperty(K_,"__esModule",{value:!0}),K_.ActorDereferenceRdf=void 0;const u=CO();let n=class extends u.ActorDereferenceParse{constructor(i){super(i)}};return K_.ActorDereferenceRdf=n,K_}var jq;function vce(){return jq||(jq=1,(function(u){var n=xc&&xc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=xc&&xc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(mce(),u)})(xc)),xc}var Lq;function Tce(){if(Lq)return k_;Lq=1,Object.defineProperty(k_,"__esModule",{value:!0}),k_.ActorDereferenceRdfParse=void 0;const u=vce();let n=class extends u.ActorDereferenceRdf{constructor(i){super(i)}async getMetadata(i){return{baseIRI:i.url}}};return k_.ActorDereferenceRdfParse=n,k_}var Mq;function wce(){return Mq||(Mq=1,(function(u){var n=Ec&&Ec.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ec&&Ec.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Tce(),u)})(Ec)),Ec}var Ic={},W_={},Y_={},Cq;function Sce(){if(Cq)return Y_;Cq=1,Object.defineProperty(Y_,"__esModule",{value:!0}),Y_.HtmlScriptListener=void 0;const u=Ce(),n=Dt(),o=cr();let i=class z3{constructor(e,r,a,c,s,d,l,f){this.textChunksJsonLd=[],this.endBarrier=1,this.passedScripts=0,this.isFinalJsonLdProcessing=!1,this.mediatorRdfParseHandle=e,this.cbQuad=r,this.cbError=a,this.cbEnd=c,this.supportedTypes=s,this.context=d.set(u.KeysRdfParseHtmlScript.processingHtmlScript,!0),this.baseIRI=l,this.headers=f,this.onlyFirstScript=d.get(u.KeysRdfParseHtmlScript.extractAllScripts)===!1;const h=this.baseIRI.indexOf("#");this.targetScriptId=h>0?this.baseIRI.slice(h+1,this.baseIRI.length):null}static newErrorCoded(e,r){const a=new Error(e);return a.code=r,a}onEnd(){--this.endBarrier===0&&(this.textChunksJsonLd.length>0?(this.handleMediaType="application/ld+json",this.textChunks=this.textChunksJsonLd,this.textChunks.push("]"),this.textChunksJsonLd=[],this.isFinalJsonLdProcessing=!0,this.endBarrier++,this.onTagClose()):(this.passedScripts===0&&this.targetScriptId&&this.cbError(z3.newErrorCoded(`Failed to find targeted script id "${this.targetScriptId}"`,"loading document failed")),this.cbEnd()),this.isFinalJsonLdProcessing=!1)}onTagClose(){if(this.handleMediaType)if(this.requiresCustomJsonLdHandling(this.handleMediaType)&&!this.isFinalJsonLdProcessing)this.handleMediaType=void 0,this.textChunks=void 0,this.onEnd();else{const e=new n.Readable({objectMode:!0});e._read=()=>{};const r=this.textChunks,a={context:this.context,handle:{metadata:{baseIRI:this.baseIRI},data:e,headers:this.headers,context:this.context},handleMediaType:this.handleMediaType};this.mediatorRdfParseHandle.mediate(a).then(({handle:c})=>{c.data.on("error",s=>this.cbError(z3.newErrorCoded(s.message,"invalid script element"))).on("data",this.cbQuad).on("end",()=>this.onEnd());for(const s of r)e.push(s);e.push(null)}).catch(c=>{this.targetScriptId?this.cbError(z3.newErrorCoded(c.message,"loading document failed")):this.onEnd()}),this.handleMediaType=void 0,this.textChunks=void 0}}onTagOpen(e,r){e==="base"&&r.href&&(this.baseIRI=(0,o.resolve)(r.href,this.baseIRI)),e==="script"&&(!this.targetScriptId||r.id===this.targetScriptId)?this.supportedTypes[r.type]?this.onlyFirstScript&&this.passedScripts>0?this.handleMediaType=void 0:(this.passedScripts++,this.handleMediaType=r.type,this.endBarrier++,this.requiresCustomJsonLdHandling(this.handleMediaType)?(this.textChunks=this.textChunksJsonLd,this.textChunks.push(this.textChunks.length===0?"[":",")):this.textChunks=[]):this.targetScriptId&&this.cbError(z3.newErrorCoded(`Targeted script "${this.targetScriptId}" does not have a supported type`,"loading document failed")):this.handleMediaType=void 0}onText(e){this.handleMediaType&&this.textChunks.push(e)}requiresCustomJsonLdHandling(e){return!this.onlyFirstScript&&!this.targetScriptId&&e==="application/ld+json"}};return Y_.HtmlScriptListener=i,Y_}var qq;function Ace(){if(qq)return W_;qq=1,Object.defineProperty(W_,"__esModule",{value:!0}),W_.ActorRdfParseHtmlScript=void 0;const u=GO(),n=be(),o=Sce();let i=class extends u.ActorRdfParseHtml{constructor(e){super(e)}async test(e){return(0,n.passTestVoid)()}async run(e){const r=(await this.mediatorRdfParseMediatypes.mediate({context:e.context,mediaTypes:!0})).mediaTypes;return{htmlParseListener:new o.HtmlScriptListener(this.mediatorRdfParseHandle,e.emit,e.error,e.end,r,e.context,e.baseIRI,e.headers)}}};return W_.ActorRdfParseHtmlScript=i,W_}var Bq;function Oce(){return Bq||(Bq=1,(function(u){var n=Ic&&Ic.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ic&&Ic.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ace(),u)})(Ic)),Ic}var Rc={},Z_={},$q;function Ece(){if($q)return Z_;$q=1,Object.defineProperty(Z_,"__esModule",{value:!0}),Z_.ActorQueryResultSerializeRdf=void 0;const u=ri(),n=be();let o=class extends u.ActorQueryResultSerialize{constructor(t){super(t)}async testHandle(t,e,r){if(t.type!=="quads")return(0,n.failTest)(`Actor ${this.name} can only handle quad streams`);const{mediaTypes:a}=await this.mediatorMediaTypeCombiner.mediate({context:r,mediaTypes:!0});return e in a?(0,n.passTestVoid)():(0,n.failTest)(`Actor ${this.name} can not handle media type ${e}. All available types: ${Object.keys(a)}`)}async runHandle(t,e,r){return(await this.mediatorRdfSerialize.mediate({context:r,handle:{context:r,quadStream:t.quadStream},handleMediaType:e})).handle}async testMediaType(t){return(0,n.passTestVoid)()}async getMediaTypes(t){return(await this.mediatorMediaTypeCombiner.mediate({context:t,mediaTypes:!0})).mediaTypes}async testMediaTypeFormats(t){return(0,n.passTestVoid)()}async getMediaTypeFormats(t){return(await this.mediatorMediaTypeFormatCombiner.mediate({context:t,mediaTypeFormats:!0})).mediaTypeFormats}};return Z_.ActorQueryResultSerializeRdf=o,Z_}var Uq;function xce(){return Uq||(Uq=1,(function(u){var n=Rc&&Rc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Rc&&Rc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ece(),u)})(Rc)),Rc}var Fc={},eg={},Nc={},tg={},Vq;function Ice(){if(Vq)return tg;Vq=1,Object.defineProperty(tg,"__esModule",{value:!0}),tg.ActorBindingsAggregatorFactory=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i),this.mediatorExpressionEvaluatorFactory=i.mediatorExpressionEvaluatorFactory}};return tg.ActorBindingsAggregatorFactory=n,tg}var rg={},Qq;function Rce(){if(Qq)return rg;Qq=1,Object.defineProperty(rg,"__esModule",{value:!0}),rg.AggregateEvaluator=void 0;const u=Ce(),n=ge(),o=tr();let i=class{constructor(e,r,a=!1){this.evaluator=e,this.distinct=r,this.throwError=a,this.errorOccurred=!1,this.errorOccurred=!1,this.superTypeProvider=e.context.getSafe(u.KeysExpressionEvaluator.superTypeProvider),this.termTransformer=new n.TermTransformer(this.superTypeProvider),this.variableValues=new Set}emptyValueTerm(){}emptyValue(){const e=this.emptyValueTerm();if(e===void 0&&this.throwError)throw new n.EmptyAggregateError;return e}async putBindings(e){if(!this.errorOccurred)try{const r=await this.evaluator.evaluate(e);if(!r||this.errorOccurred)return;(!this.distinct||!this.variableValues.has(o.termToString(r)))&&(this.putTerm(r),this.distinct&&this.variableValues.add(o.termToString(r)))}catch(r){this.safeThrow(r)}}async result(){if(!this.errorOccurred)return this.termResult()}safeThrow(e){if(this.throwError)throw e;this.errorOccurred=!0}termToNumericOrError(e){if(e.termType!=="Literal")throw new Error(`Term with value ${e.value} has type ${e.termType} and is not a numeric literal`);if(!n.isSubTypeOf(e.datatype.value,n.TypeAlias.SPARQL_NUMERIC,this.superTypeProvider))throw new Error(`Term datatype ${e.datatype.value} with value ${e.value} has type ${e.termType} and is not a numeric literal`);return this.termTransformer.transformLiteral(e)}};return rg.AggregateEvaluator=i,rg}var Hq;function jr(){return Hq||(Hq=1,(function(u){var n=Nc&&Nc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Nc&&Nc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ice(),u),o(Rce(),u)})(Nc)),Nc}var ng={},Gq;function _J(){if(Gq)return ng;Gq=1,Object.defineProperty(ng,"__esModule",{value:!0}),ng.GroupConcatAggregator=void 0;const u=jr(),n=ge();let o=class extends u.AggregateEvaluator{constructor(t,e,r,a,c){super(t,e,c),this.dataFactory=r,this.state=void 0,this.lastLanguageValid=!0,this.lastLanguage=void 0,this.separator=a??" "}emptyValueTerm(){return n.typedLiteral("",n.TypeURL.XSD_STRING)}putTerm(t){this.state===void 0?(this.state=t.value,t.termType==="Literal"&&(this.lastLanguage=t.language)):(this.state+=this.separator+t.value,this.lastLanguageValid&&t.termType==="Literal"&&this.lastLanguage!==t.language&&(this.lastLanguageValid=!1,this.lastLanguage=void 0))}termResult(){return this.state===void 0?this.emptyValue():this.lastLanguageValid&&this.lastLanguage?n.langString(this.state,this.lastLanguage).toRDF(this.dataFactory):n.typedLiteral(this.state,n.TypeURL.XSD_STRING)}};return ng.GroupConcatAggregator=o,ng}var zq;function Fce(){if(zq)return eg;zq=1,Object.defineProperty(eg,"__esModule",{value:!0}),eg.ActorBindingsAggregatorFactoryGroupConcat=void 0;const u=jr(),n=Ce(),o=be(),i=_J();let t=class extends u.ActorBindingsAggregatorFactory{constructor(r){super(r)}async test(r){return r.expr.aggregator!=="group_concat"?(0,o.failTest)("This actor only supports the 'group_concat' aggregator."):(0,o.passTestVoid)()}async run({context:r,expr:a}){return new i.GroupConcatAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:a.expression,context:r}),a.distinct,r.getSafe(n.KeysInitQuery.dataFactory),a.separator)}};return eg.ActorBindingsAggregatorFactoryGroupConcat=t,eg}var Xq;function Nce(){return Xq||(Xq=1,(function(u){var n=Fc&&Fc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Fc&&Fc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Fce(),u),o(_J(),u)})(Fc)),Fc}var Pc={},ig={},ag={},Jq;function gJ(){if(Jq)return ag;Jq=1,Object.defineProperty(ag,"__esModule",{value:!0}),ag.CountAggregator=void 0;const u=jr(),n=ge();let o=class extends u.AggregateEvaluator{constructor(t,e,r){super(t,e,r),this.state=void 0}emptyValueTerm(){return(0,n.typedLiteral)("0",n.TypeURL.XSD_INTEGER)}putTerm(t){this.state===void 0&&(this.state=0),this.state++}termResult(){return this.state===void 0?this.emptyValue():(0,n.typedLiteral)(String(this.state),n.TypeURL.XSD_INTEGER)}};return ag.CountAggregator=o,ag}var kq;function Pce(){if(kq)return ig;kq=1,Object.defineProperty(ig,"__esModule",{value:!0}),ig.ActorBindingsAggregatorFactoryCount=void 0;const u=jr(),n=be(),o=dt(),i=gJ();let t=class extends u.ActorBindingsAggregatorFactory{constructor(r){super(r)}async test(r){return r.expr.aggregator!=="count"||r.expr.expression.expressionType===o.Algebra.expressionTypes.WILDCARD?(0,n.failTest)("This actor only supports the 'count' aggregator without wildcard."):(0,n.passTestVoid)()}async run({context:r,expr:a}){return new i.CountAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:a.expression,context:r}),a.distinct)}};return ig.ActorBindingsAggregatorFactoryCount=t,ig}var Kq;function Dce(){return Kq||(Kq=1,(function(u){var n=Pc&&Pc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Pc&&Pc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Pce(),u),o(gJ(),u)})(Pc)),Pc}var Dc={},ug={},og={},Wq;function mJ(){if(Wq)return og;Wq=1,Object.defineProperty(og,"__esModule",{value:!0}),og.SampleAggregator=void 0;const u=jr();let n=class extends u.AggregateEvaluator{constructor(i,t,e){super(i,t,e),this.state=void 0}putTerm(i){this.state===void 0&&(this.state=i)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return og.SampleAggregator=n,og}var Yq;function jce(){if(Yq)return ug;Yq=1,Object.defineProperty(ug,"__esModule",{value:!0}),ug.ActorBindingsAggregatorFactorySample=void 0;const u=jr(),n=be(),o=mJ();let i=class extends u.ActorBindingsAggregatorFactory{constructor(e){super(e)}async test(e){return e.expr.aggregator!=="sample"?(0,n.failTest)("This actor only supports the 'sample' aggregator."):(0,n.passTestVoid)()}async run({context:e,expr:r}){return new o.SampleAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:r.expression,context:e}),r.distinct)}};return ug.ActorBindingsAggregatorFactorySample=i,ug}var Zq;function Lce(){return Zq||(Zq=1,(function(u){var n=Dc&&Dc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Dc&&Dc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(jce(),u),o(mJ(),u)})(Dc)),Dc}var jc={},sg={},cg={},eB;function vJ(){if(eB)return cg;eB=1,Object.defineProperty(cg,"__esModule",{value:!0}),cg.WildcardCountAggregator=void 0;const u=jr(),n=ge(),o=tr();let i=class extends u.AggregateEvaluator{constructor(e,r,a){super(e,r,a),this.bindingValues=new Map,this.state=void 0}putTerm(e){}async putBindings(e){this.handleDistinct(e)||(this.state===void 0&&(this.state=0),this.state+=1)}emptyValueTerm(){return(0,n.typedLiteral)("0",n.TypeURL.XSD_INTEGER)}termResult(){return this.state===void 0?this.emptyValue():(0,n.typedLiteral)(String(this.state),n.TypeURL.XSD_INTEGER)}handleDistinct(e){if(this.distinct){const r=[...e];r.sort((l,f)=>l[0].value.localeCompare(f[0].value));const a=r.map(([l])=>l.value).join(","),c=r.map(([,l])=>o.termToString(l)).join(","),s=this.bindingValues.get(a),d=s!==void 0&&s.has(c);return s||this.bindingValues.set(a,new Set),this.bindingValues.get(a).add(c),d}return!1}};return cg.WildcardCountAggregator=i,cg}var tB;function Mce(){if(tB)return sg;tB=1,Object.defineProperty(sg,"__esModule",{value:!0}),sg.ActorBindingsAggregatorFactoryWildcardCount=void 0;const u=jr(),n=be(),o=vJ();let i=class extends u.ActorBindingsAggregatorFactory{constructor(e){super(e)}async test(e){return e.expr.aggregator!=="count"||e.expr.expression.expressionType!=="wildcard"?(0,n.failTest)("This actor only supports the 'count' aggregator with wildcard."):(0,n.passTestVoid)()}async run({context:e,expr:r}){return new o.WildcardCountAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:r.expression,context:e}),r.distinct)}};return sg.ActorBindingsAggregatorFactoryWildcardCount=i,sg}var rB;function Cce(){return rB||(rB=1,(function(u){var n=jc&&jc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=jc&&jc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Mce(),u),o(vJ(),u)})(jc)),jc}var Lc={},dg={},lg={},nB;function TJ(){if(nB)return lg;nB=1,Object.defineProperty(lg,"__esModule",{value:!0}),lg.AverageAggregator=void 0;const u=jr(),n=ge();let o=class extends u.AggregateEvaluator{constructor(t,e,r,a,c,s){super(t,e,s),this.dataFactory=r,this.additionFunction=a,this.divisionFunction=c,this.state=void 0}emptyValueTerm(){return n.typedLiteral("0",n.TypeURL.XSD_INTEGER)}putTerm(t){if(this.state===void 0){const e=this.termToNumericOrError(t);this.state={sum:e,count:1}}else{const e=this.termToNumericOrError(t);this.state.sum=this.additionFunction.applyOnTerms([this.state.sum,e],this.evaluator),this.state.count++}}termResult(){if(this.state===void 0)return this.emptyValue();const t=new n.IntegerLiteral(this.state.count);return this.divisionFunction.applyOnTerms([this.state.sum,t],this.evaluator).toRDF(this.dataFactory)}};return lg.AverageAggregator=o,lg}var iB;function qce(){if(iB)return dg;iB=1,Object.defineProperty(dg,"__esModule",{value:!0}),dg.ActorBindingsAggregatorFactoryAverage=void 0;const u=jr(),n=Ce(),o=be(),i=ge(),t=TJ();let e=class extends u.ActorBindingsAggregatorFactory{constructor(a){super(a),this.mediatorFunctionFactory=a.mediatorFunctionFactory}async test(a){return a.expr.aggregator!=="avg"?(0,o.failTest)("This actor only supports the 'avg' aggregator."):(0,o.passTestVoid)()}async run({context:a,expr:c}){return new t.AverageAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:c.expression,context:a}),c.distinct,a.getSafe(n.KeysInitQuery.dataFactory),await this.mediatorFunctionFactory.mediate({functionName:i.SparqlOperator.ADDITION,context:a,requireTermExpression:!0}),await this.mediatorFunctionFactory.mediate({functionName:i.SparqlOperator.DIVISION,context:a,requireTermExpression:!0}))}};return dg.ActorBindingsAggregatorFactoryAverage=e,dg}var aB;function Bce(){return aB||(aB=1,(function(u){var n=Lc&&Lc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Lc&&Lc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(qce(),u),o(TJ(),u)})(Lc)),Lc}var Mc={},fg={},hg={},uB;function wJ(){if(uB)return hg;uB=1,Object.defineProperty(hg,"__esModule",{value:!0}),hg.SumAggregator=void 0;const u=jr(),n=ge();let o=class extends u.AggregateEvaluator{constructor(t,e,r,a,c){super(t,e,c),this.dataFactory=r,this.additionFunction=a,this.state=void 0}emptyValueTerm(){return(0,n.typedLiteral)("0",n.TypeURL.XSD_INTEGER)}putTerm(t){if(this.state===void 0)this.state=this.termToNumericOrError(t);else{const e=this.termToNumericOrError(t);this.state=this.additionFunction.applyOnTerms([this.state,e],this.evaluator)}}termResult(){return this.state===void 0?this.emptyValue():this.state.toRDF(this.dataFactory)}};return hg.SumAggregator=o,hg}var oB;function $ce(){if(oB)return fg;oB=1,Object.defineProperty(fg,"__esModule",{value:!0}),fg.ActorBindingsAggregatorFactorySum=void 0;const u=jr(),n=Ce(),o=be(),i=ge(),t=wJ();let e=class extends u.ActorBindingsAggregatorFactory{constructor(a){super(a),this.mediatorFunctionFactory=a.mediatorFunctionFactory}async test(a){return a.expr.aggregator!=="sum"?(0,o.failTest)("This actor only supports the 'sum' aggregator."):(0,o.passTestVoid)()}async run({expr:a,context:c}){return new t.SumAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:a.expression,context:c}),a.distinct,c.getSafe(n.KeysInitQuery.dataFactory),await this.mediatorFunctionFactory.mediate({functionName:i.SparqlOperator.ADDITION,context:c,requireTermExpression:!0}))}};return fg.ActorBindingsAggregatorFactorySum=e,fg}var sB;function Uce(){return sB||(sB=1,(function(u){var n=Mc&&Mc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Mc&&Mc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o($ce(),u),o(wJ(),u)})(Mc)),Mc}var Cc={},pg={},bg={},cB;function Vce(){if(cB)return bg;cB=1,Object.defineProperty(bg,"__esModule",{value:!0}),bg.ExpressionFunctionIn=void 0;const u=Te(),n=ge();let o=class extends u.ExpressionFunctionBase{constructor(t){super({arity:Number.POSITIVE_INFINITY,operator:n.SparqlOperator.IN,apply:async e=>{const{args:r,mapping:a,exprEval:c}=e,[s,...d]=r,l=await c.evaluatorExpressionEvaluation(s,a);return await this.inRecursive(l,{...e,args:d},[])}}),this.equalityFunction=t}checkArity(t){return t.length>0}async inRecursive(t,e,r){const{args:a,mapping:c,exprEval:s}=e;if(a.length===0)return r.every(l=>!l)?(0,n.bool)(!1):Promise.reject(new n.InError(r));try{const d=a.shift(),l=await s.evaluatorExpressionEvaluation(d,c);return this.equalityFunction.applyOnTerms([t,l],s).typedValue?(0,n.bool)(!0):this.inRecursive(t,e,[...r,!1])}catch(d){return this.inRecursive(t,e,[...r,d])}}};return bg.ExpressionFunctionIn=o,bg}var dB;function Qce(){if(dB)return pg;dB=1,Object.defineProperty(pg,"__esModule",{value:!0}),pg.ActorFunctionFactoryExpressionIn=void 0;const u=Te(),n=ge(),o=Vce();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.IN],termFunction:!1}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const r=await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.ExpressionFunctionIn(r)}};return pg.ActorFunctionFactoryExpressionIn=i,pg}var lB;function Hce(){return lB||(lB=1,(function(u){var n=Cc&&Cc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Cc&&Cc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Qce(),u)})(Cc)),Cc}var qc={},yg={},_g={},fB;function Gce(){if(fB)return _g;fB=1,Object.defineProperty(_g,"__esModule",{value:!0}),_g.ExpressionFunctionNotIn=void 0;const u=Te(),n=ge();let o=class extends u.ExpressionFunctionBase{constructor(t){super({arity:Number.POSITIVE_INFINITY,operator:n.SparqlOperator.NOT_IN,apply:async e=>{const r=await this.inFunction.apply(e);return(0,n.bool)(!r.typedValue)}}),this.inFunction=t}checkArity(t){return t.length>0}};return _g.ExpressionFunctionNotIn=o,_g}var hB;function zce(){if(hB)return yg;hB=1,Object.defineProperty(yg,"__esModule",{value:!0}),yg.ActorFunctionFactoryExpressionNotIn=void 0;const u=Te(),n=ge(),o=Gce();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.NOT_IN],termFunction:!1}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const r=await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.IN,context:e.context,arguments:e.arguments});return new o.ExpressionFunctionNotIn(r)}};return yg.ActorFunctionFactoryExpressionNotIn=i,yg}var pB;function Xce(){return pB||(pB=1,(function(u){var n=qc&&qc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=qc&&qc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(zce(),u)})(qc)),qc}var Bc={},gg={},mg={},bB;function Jce(){if(bB)return mg;bB=1,Object.defineProperty(mg,"__esModule",{value:!0}),mg.TermFunctionGreaterThanEqual=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(t){super({arity:2,operator:n.SparqlOperator.GTE,overloads:(0,n.declare)(n.SparqlOperator.GTE).set(["term","term"],e=>([r,a])=>this.lessThanEqualFunction.applyOnTerms([a,r],e)).collect()}),this.lessThanEqualFunction=t}};return mg.TermFunctionGreaterThanEqual=o,mg}var yB;function kce(){if(yB)return gg;yB=1,Object.defineProperty(gg,"__esModule",{value:!0}),gg.ActorFunctionFactoryTermGreaterThanEqual=void 0;const u=Te(),n=ge(),o=Jce();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.GTE],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const r=await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.LTE,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionGreaterThanEqual(r)}};return gg.ActorFunctionFactoryTermGreaterThanEqual=i,gg}var _B;function Kce(){return _B||(_B=1,(function(u){var n=Bc&&Bc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Bc&&Bc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(kce(),u)})(Bc)),Bc}var $c={},vg={},Tg={},gB;function Wce(){if(gB)return Tg;gB=1,Object.defineProperty(Tg,"__esModule",{value:!0}),Tg.TermFunctionGreaterThan=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(t){super({arity:2,operator:n.SparqlOperator.GT,overloads:(0,n.declare)(n.SparqlOperator.GT).set(["term","term"],e=>([r,a])=>this.lessThanFunction.applyOnTerms([a,r],e)).collect()}),this.lessThanFunction=t}};return Tg.TermFunctionGreaterThan=o,Tg}var mB;function Yce(){if(mB)return vg;mB=1,Object.defineProperty(vg,"__esModule",{value:!0}),vg.ActorFunctionFactoryTermGreaterThan=void 0;const u=Te(),n=ge(),o=Wce();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.GT],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const r=await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.LT,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionGreaterThan(r)}};return vg.ActorFunctionFactoryTermGreaterThan=i,vg}var vB;function Zce(){return vB||(vB=1,(function(u){var n=$c&&$c.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=$c&&$c.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Yce(),u)})($c)),$c}var Uc={},wg={},Sg={},TB;function ede(){if(TB)return Sg;TB=1,Object.defineProperty(Sg,"__esModule",{value:!0}),Sg.TermFunctionInequality=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(t){super({arity:2,operator:n.SparqlOperator.NOT_EQUAL,overloads:(0,n.declare)(n.SparqlOperator.NOT_EQUAL).set(["term","term"],e=>([r,a])=>(0,n.bool)(!this.equalityFunction.applyOnTerms([r,a],e).typedValue)).collect()}),this.equalityFunction=t}};return Sg.TermFunctionInequality=o,Sg}var wB;function tde(){if(wB)return wg;wB=1,Object.defineProperty(wg,"__esModule",{value:!0}),wg.ActorFunctionFactoryTermInequality=void 0;const u=Te(),n=ge(),o=ede();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.NOT_EQUAL],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const r=await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionInequality(r)}};return wg.ActorFunctionFactoryTermInequality=i,wg}var SB;function rde(){return SB||(SB=1,(function(u){var n=Uc&&Uc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Uc&&Uc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(tde(),u)})(Uc)),Uc}var Vc={},Ag={},Og={},AB;function nde(){if(AB)return Og;AB=1,Object.defineProperty(Og,"__esModule",{value:!0}),Og.TermFunctionLesserThanEqual=void 0;const u=Te(),n=ge();let o=class extends u.TermFunctionBase{constructor(t,e){super({arity:2,operator:n.SparqlOperator.LTE,overloads:(0,n.declare)(n.SparqlOperator.LTE).set(["term","term"],r=>([a,c])=>(0,n.bool)(this.lessThanFunction.applyOnTerms([a,c],r).typedValue||this.equalityFunction.applyOnTerms([a,c],r).typedValue)).collect()}),this.equalityFunction=t,this.lessThanFunction=e}};return Og.TermFunctionLesserThanEqual=o,Og}var OB;function ide(){if(OB)return Ag;OB=1,Object.defineProperty(Ag,"__esModule",{value:!0}),Ag.ActorFunctionFactoryTermLesserThanEqual=void 0;const u=Te(),n=ge(),o=nde();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.LTE],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const r=await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments}),a=await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.LT,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionLesserThanEqual(r,a)}};return Ag.ActorFunctionFactoryTermLesserThanEqual=i,Ag}var EB;function ade(){return EB||(EB=1,(function(u){var n=Vc&&Vc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Vc&&Vc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ide(),u)})(Vc)),Vc}var Qc={},Eg={},xg={},xB;function ude(){if(xB)return xg;xB=1,Object.defineProperty(xg,"__esModule",{value:!0}),xg.TermFunctionLesserThan=void 0;const u=Te(),n=Ce(),o=ge();let i=class extends u.TermFunctionBase{constructor(e){super({arity:2,operator:o.SparqlOperator.LT,overloads:(0,o.declare)(o.SparqlOperator.LT).numberTest(()=>(r,a)=>r<a).stringTest(()=>(r,a)=>r.localeCompare(a)===-1).booleanTest(()=>(r,a)=>r<a).dateTimeTest(r=>(a,c)=>(0,o.toUTCDate)(a,r.context.getSafe(n.KeysExpressionEvaluator.defaultTimeZone)).getTime()<(0,o.toUTCDate)(c,r.context.getSafe(n.KeysExpressionEvaluator.defaultTimeZone)).getTime()).copy({from:[o.TypeURL.XSD_DATE_TIME,o.TypeURL.XSD_DATE_TIME],to:[o.TypeURL.XSD_DATE,o.TypeURL.XSD_DATE]}).set([o.TypeURL.XSD_YEAR_MONTH_DURATION,o.TypeURL.XSD_YEAR_MONTH_DURATION],()=>([r,a])=>(0,o.bool)((0,o.yearMonthDurationsToMonths)((0,o.defaultedYearMonthDurationRepresentation)(r.typedValue))<(0,o.yearMonthDurationsToMonths)((0,o.defaultedYearMonthDurationRepresentation)(a.typedValue)))).set([o.TypeURL.XSD_DAY_TIME_DURATION,o.TypeURL.XSD_DAY_TIME_DURATION],()=>([r,a])=>(0,o.bool)((0,o.dayTimeDurationsToSeconds)((0,o.defaultedDayTimeDurationRepresentation)(r.typedValue))<(0,o.dayTimeDurationsToSeconds)((0,o.defaultedDayTimeDurationRepresentation)(a.typedValue)))).set([o.TypeURL.XSD_TIME,o.TypeURL.XSD_TIME],r=>([a,c])=>(0,o.bool)((0,o.toUTCDate)((0,o.defaultedDateTimeRepresentation)(a.typedValue),r.context.getSafe(n.KeysExpressionEvaluator.defaultTimeZone)).getTime()<(0,o.toUTCDate)((0,o.defaultedDateTimeRepresentation)(c.typedValue),r.context.getSafe(n.KeysExpressionEvaluator.defaultTimeZone)).getTime())).set(["quad","quad"],r=>([a,c])=>{const s=this.quadComponentTest(a.subject,c.subject,r);if(s!==void 0)return(0,o.bool)(s);const d=this.quadComponentTest(a.predicate,c.predicate,r);if(d!==void 0)return(0,o.bool)(d);const l=this.quadComponentTest(a.object,c.object,r);return l!==void 0?(0,o.bool)(l):(0,o.bool)(this.quadComponentTest(a.graph,c.graph,r)??!1)},!1).collect()}),this.equalityFunction=e}quadComponentTest(e,r,a){return this.equalityFunction.applyOnTerms([e,r],a).typedValue?void 0:this.applyOnTerms([e,r],a).typedValue}};return xg.TermFunctionLesserThan=i,xg}var IB;function ode(){if(IB)return Eg;IB=1,Object.defineProperty(Eg,"__esModule",{value:!0}),Eg.ActorFunctionFactoryTermLesserThan=void 0;const u=Te(),n=ge(),o=ude();let i=class extends u.ActorFunctionFactoryDedicated{constructor(e){super({...e,functionNames:[n.SparqlOperator.LT],termFunction:!0}),this.mediatorFunctionFactory=e.mediatorFunctionFactory}async run(e){const r=await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.EQUAL,requireTermExpression:!0,context:e.context,arguments:e.arguments});return new o.TermFunctionLesserThan(r)}};return Eg.ActorFunctionFactoryTermLesserThan=i,Eg}var RB;function sde(){return RB||(RB=1,(function(u){var n=Qc&&Qc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Qc&&Qc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ode(),u)})(Qc)),Qc}var Hc={},Ig={},FB;function cde(){if(FB)return Ig;FB=1,Object.defineProperty(Ig,"__esModule",{value:!0}),Ig.ActorHttpWayback=void 0;const u=Pi(),n=Ce(),o=be(),i=Jf(),t="http://wayback.archive-it.org/";function e(c){const s=new Request(c.input,c.init);return{input:new Request(new URL(`/${s.url}`,t),s)}}function r(c){const s=c.get(n.KeysHttpProxy.httpProxyHandler);return s?d=>s.getProxy(e(d)):d=>Promise.resolve(e(d))}let a=class extends u.ActorHttp{constructor(s){super(s)}async test(s){return(0,o.passTestVoid)()}async run(s){let d=await this.mediatorHttp.mediate(s);if(d.status===404&&s.context.get(n.KeysHttpWayback.recoverBrokenLinks)){let l=await this.mediatorHttp.mediate({...s,context:s.context.set(n.KeysHttpWayback.recoverBrokenLinks,!1).set(n.KeysHttpProxy.httpProxyHandler,{getProxy:r(s.context)})});l.status===200&&([d,l]=[l,d]);const{body:f}=l;f&&("cancel"in f&&typeof f.cancel=="function"?await f.cancel():"destroy"in f&&typeof f.destroy=="function"?f.destroy():await(0,i.stringify)(u.ActorHttp.toNodeReadable(f)))}return d}};return Ig.ActorHttpWayback=a,Ig}var NB;function dde(){return NB||(NB=1,(function(u){var n=Hc&&Hc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Hc&&Hc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(cde(),u)})(Hc)),Hc}var Gc={},Rg={},zc={},Fg={},Xc={},Ng={},z4={},PB;function qv(){return PB||(PB=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.ERROR_CODES=u.ErrorCoded=void 0;class n extends Error{constructor(i,t){super(i),this.code=t}}u.ErrorCoded=n,(function(o){o.COLLIDING_KEYWORDS="colliding keywords",o.CONFLICTING_INDEXES="conflicting indexes",o.CYCLIC_IRI_MAPPING="cyclic IRI mapping",o.INVALID_ID_VALUE="invalid @id value",o.INVALID_INDEX_VALUE="invalid @index value",o.INVALID_NEST_VALUE="invalid @nest value",o.INVALID_PREFIX_VALUE="invalid @prefix value",o.INVALID_PROPAGATE_VALUE="invalid @propagate value",o.INVALID_REVERSE_VALUE="invalid @reverse value",o.INVALID_IMPORT_VALUE="invalid @import value",o.INVALID_VERSION_VALUE="invalid @version value",o.INVALID_BASE_IRI="invalid base IRI",o.INVALID_CONTAINER_MAPPING="invalid container mapping",o.INVALID_CONTEXT_ENTRY="invalid context entry",o.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",o.INVALID_DEFAULT_LANGUAGE="invalid default language",o.INVALID_INCLUDED_VALUE="invalid @included value",o.INVALID_IRI_MAPPING="invalid IRI mapping",o.INVALID_JSON_LITERAL="invalid JSON literal",o.INVALID_KEYWORD_ALIAS="invalid keyword alias",o.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",o.INVALID_LANGUAGE_MAPPING="invalid language mapping",o.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",o.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",o.INVALID_LOCAL_CONTEXT="invalid local context",o.INVALID_REMOTE_CONTEXT="invalid remote context",o.INVALID_REVERSE_PROPERTY="invalid reverse property",o.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",o.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",o.INVALID_SCOPED_CONTEXT="invalid scoped context",o.INVALID_SCRIPT_ELEMENT="invalid script element",o.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",o.INVALID_TERM_DEFINITION="invalid term definition",o.INVALID_TYPE_MAPPING="invalid type mapping",o.INVALID_TYPE_VALUE="invalid type value",o.INVALID_TYPED_VALUE="invalid typed value",o.INVALID_VALUE_OBJECT="invalid value object",o.INVALID_VALUE_OBJECT_VALUE="invalid value object value",o.INVALID_VOCAB_MAPPING="invalid vocab mapping",o.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",o.KEYWORD_REDEFINITION="keyword redefinition",o.LOADING_DOCUMENT_FAILED="loading document failed",o.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",o.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",o.PROCESSING_MODE_CONFLICT="processing mode conflict",o.PROTECTED_TERM_REDEFINITION="protected term redefinition",o.CONTEXT_OVERFLOW="context overflow",o.INVALID_BASE_DIRECTION="invalid base direction",o.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",o.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",o.INVALID_EMBEDDED_NODE="invalid embedded node",o.INVALID_ANNOTATION="invalid annotation"})(u.ERROR_CODES||(u.ERROR_CODES={}))})(z4)),z4}var Pg={},DB;function SJ(){if(DB)return Pg;DB=1,Object.defineProperty(Pg,"__esModule",{value:!0}),Pg.FetchDocumentLoader=void 0;const u=qv(),n=Dv(),o=cr();class i{constructor(e){this.fetcher=e}async load(e){const r=await(this.fetcher||fetch)(e,{headers:new Headers({accept:"application/ld+json"})});if(r.ok&&r.headers){let a=r.headers.get("Content-Type");if(a){const c=a.indexOf(";");c>0&&(a=a.substr(0,c))}if(a==="application/ld+json")return await r.json();if(r.headers.has("Link")){let c;if(r.headers.forEach((s,d)=>{if(d==="link"){const l=(0,n.parse)(s);for(const f of l.get("type","application/ld+json"))if(f.rel==="alternate"){if(c)throw new Error("Multiple JSON-LD alternate links were found on "+e);c=(0,o.resolve)(f.uri,e)}}}),c)return this.load(c)}throw new u.ErrorCoded(`Unsupported JSON-LD media type ${a}`,u.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(r.statusText||`Status code: ${r.status}`)}}return Pg.FetchDocumentLoader=i,Pg}var X4={},Dg={},jB;function YO(){if(jB)return Dg;jB=1,Object.defineProperty(Dg,"__esModule",{value:!0}),Dg.Util=void 0;class u{static isCompactIri(o){return o.indexOf(":")>0&&!(o&&o[0]==="#")}static getPrefix(o,i){if(o&&o[0]==="#")return null;const t=o.indexOf(":");if(t>=0){if(o.length>t+1&&o.charAt(t+1)==="/"&&o.charAt(t+2)==="/")return null;const e=o.substr(0,t);if(e==="_")return null;if(i[e])return e}return null}static getContextValueId(o){if(o===null||typeof o=="string")return o;const i=o["@id"];return i||null}static isSimpleTermDefinitionPrefix(o,i){return!u.isPotentialKeyword(o)&&(i.allowPrefixNonGenDelims||typeof o=="string"&&(o[0]==="_"||u.isPrefixIriEndingWithGenDelim(o)))}static isPotentialKeyword(o){return typeof o=="string"&&u.KEYWORD_REGEX.test(o)}static isPrefixIriEndingWithGenDelim(o){return u.ENDS_WITH_GEN_DELIM.test(o)}static isPrefixValue(o){return o&&(typeof o=="string"||o&&typeof o=="object")}static isValidIri(o){return!!(o&&u.IRI_REGEX.test(o))}static isValidIriWeak(o){return!!o&&o[0]!==":"&&u.IRI_REGEX_WEAK.test(o)}static isValidKeyword(o){return u.VALID_KEYWORDS[o]}static isTermProtected(o,i){const t=o[i];return typeof t!="string"&&t&&t["@protected"]}static hasProtectedTerms(o){for(const i of Object.keys(o))if(u.isTermProtected(o,i))return!0;return!1}static isReservedInternalKeyword(o){return o.startsWith("@__")}static deepEqual(o,i){const t=Object.keys(o),e=Object.keys(i);return t.length!==e.length?!1:t.every(r=>{const a=o[r],c=i[r];return a===c||a!==null&&c!==null&&typeof a=="object"&&typeof c=="object"&&this.deepEqual(a,c)})}}return u.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,u.IRI_REGEX_WEAK=/(?::[^:])|\//,u.KEYWORD_REGEX=/^@[a-z]+$/i,u.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,u.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,u.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,u.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},u.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],u.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],u.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],u.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],u.CONTAINERS_1_0=["@list","@set","@index"],Dg.Util=u,Dg}var LB;function AJ(){return LB||(LB=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.defaultExpandOptions=u.JsonLdContextNormalized=void 0;const n=cr(),o=qv(),i=YO();class t{constructor(r){this.contextRaw=r}getContextRaw(){return this.contextRaw}expandTerm(r,a,c=u.defaultExpandOptions){const s=this.contextRaw[r];if(s===null||s&&s["@id"]===null)return null;let d=!0;if(s&&a){const _=i.Util.getContextValueId(s);if(_&&_!==r)if(typeof _!="string"||!i.Util.isValidIri(_)&&!i.Util.isValidKeyword(_))i.Util.isPotentialKeyword(_)||(d=!1);else return _}const l=i.Util.getPrefix(r,this.contextRaw),f=this.contextRaw["@vocab"],h=(!!f||f==="")&&f.indexOf(":")<0,p=this.contextRaw["@base"],y=i.Util.isPotentialKeyword(r);if(l){const _=this.contextRaw[l],b=i.Util.getContextValueId(_);if(b){if(typeof _=="string"||!c.allowPrefixForcing){if(!i.Util.isSimpleTermDefinitionPrefix(b,c))return r}else if(b[0]!=="_"&&!y&&!_["@prefix"]&&!(r in this.contextRaw))return r;return b+r.substr(l.length+1)}}else if(a&&(f||f===""||c.allowVocabRelativeToBase&&p&&h)&&!y&&!i.Util.isCompactIri(r))if(h){if(c.allowVocabRelativeToBase)return(f||p?(0,n.resolve)(f,p):"")+r;throw new o.ErrorCoded(`Relative vocab expansion for term '${r}' with vocab '${f}' is not allowed.`,o.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return f+r;else if(!a&&p&&!y&&!i.Util.isCompactIri(r))return(0,n.resolve)(r,p);if(d)return r;throw new o.ErrorCoded(`Invalid IRI mapping found for context entry '${r}': '${JSON.stringify(s)}'`,o.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(r,a){if(a&&this.contextRaw["@vocab"]&&r.startsWith(this.contextRaw["@vocab"]))return r.substr(this.contextRaw["@vocab"].length);if(!a&&this.contextRaw["@base"]&&r.startsWith(this.contextRaw["@base"]))return r.substr(this.contextRaw["@base"].length);const c={prefix:"",suffix:r};for(const s in this.contextRaw){const d=this.contextRaw[s];if(d&&!i.Util.isPotentialKeyword(s)){const l=i.Util.getContextValueId(d);if(r.startsWith(l)){const f=r.substr(l.length);if(f)f.length<c.suffix.length&&(c.prefix=s,c.suffix=f);else if(a)return s}}}return c.prefix?c.prefix+":"+c.suffix:r}}u.JsonLdContextNormalized=t,u.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}})(X4)),X4}var MB;function lde(){if(MB)return Ng;MB=1,Object.defineProperty(Ng,"__esModule",{value:!0}),Ng.ContextParser=void 0;const u=cr(),n=qv(),o=SJ(),i=AJ(),t=YO();class e{constructor(a){a=a||{},this.documentLoader=a.documentLoader||new o.FetchDocumentLoader,this.documentCache={},this.validateContext=!a.skipValidation,this.expandContentTypeToBase=!!a.expandContentTypeToBase,this.remoteContextsDepthLimit=a.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in a?!!a.redirectSchemaOrgHttps:!0}static validateLanguage(a,c,s){if(typeof a!="string")throw new n.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(a)}'`,s);if(!t.Util.REGEX_LANGUAGE_TAG.test(a)){if(c)throw new n.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(a)}'`,s);return!1}return!0}static validateDirection(a,c){if(typeof a!="string")throw new n.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(a)}'`,n.ERROR_CODES.INVALID_BASE_DIRECTION);if(!t.Util.REGEX_DIRECTION_TAG.test(a)){if(c)throw new n.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(a)}'`,n.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(a){for(const c of Object.keys(a)){let s=a[c];if(s&&typeof s=="object"&&s["@reverse"]&&!s["@id"]){if(typeof s["@reverse"]!="string"||t.Util.isValidKeyword(s["@reverse"]))throw new n.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${s["@reverse"]}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);s=a[c]=Object.assign(Object.assign({},s),{"@id":s["@reverse"]}),s["@id"]=s["@reverse"],t.Util.isPotentialKeyword(s["@reverse"])?delete s["@reverse"]:s["@reverse"]=!0}}return a}expandPrefixedTerms(a,c,s){const d=a.getContextRaw();for(const l of s||Object.keys(d))if(t.Util.EXPAND_KEYS_BLACKLIST.indexOf(l)<0&&!t.Util.isReservedInternalKeyword(l)){const f=d[l];if(t.Util.isPotentialKeyword(l)&&t.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(l)>=0&&(l!=="@type"||typeof d[l]=="object"&&!(d[l]["@protected"]||d[l]["@container"]==="@set")))throw new n.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${l} to ${JSON.stringify(f)}`,n.ERROR_CODES.KEYWORD_REDEFINITION);if(t.Util.ALIAS_RANGE_BLACKLIST.indexOf(t.Util.getContextValueId(f))>=0)throw new n.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${l} to ${JSON.stringify(f)}`,n.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(f&&t.Util.isPotentialKeyword(t.Util.getContextValueId(f))&&f["@prefix"]===!0)throw new n.ErrorCoded(`Tried to use keyword aliases as prefix: '${l}': '${JSON.stringify(f)}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);for(;t.Util.isPrefixValue(d[l]);){const h=d[l];let p=!1;if(typeof h=="string")d[l]=a.expandTerm(h,!0),p=p||h!==d[l];else{const y=h["@id"],_=h["@type"],b=!("@prefix"in h)||t.Util.isValidIri(l);if("@id"in h)y!=null&&typeof y=="string"&&(d[l]=Object.assign(Object.assign({},d[l]),{"@id":a.expandTerm(y,!0)}),p=p||y!==d[l]["@id"]);else if(!t.Util.isPotentialKeyword(l)&&b){const m=a.expandTerm(l,!0);m!==l&&(d[l]=Object.assign(Object.assign({},d[l]),{"@id":m}),p=!0)}if(_&&typeof _=="string"&&_!=="@vocab"&&(!h["@container"]||!h["@container"]["@type"])&&b){let m=a.expandTerm(_,!0);c&&_===m&&(m=a.expandTerm(_,!1)),m!==_&&(p=!0,d[l]=Object.assign(Object.assign({},d[l]),{"@type":m}))}}if(!p)break}}}normalize(a,{processingMode:c,normalizeLanguageTags:s}){if(s||c===1)for(const d of Object.keys(a))if(d==="@language"&&typeof a[d]=="string")a[d]=a[d].toLowerCase();else{const l=a[d];if(l&&typeof l=="object"&&typeof l["@language"]=="string"){const f=l["@language"].toLowerCase();f!==l["@language"]&&(a[d]=Object.assign(Object.assign({},l),{"@language":f}))}}}containersToHash(a){for(const c of Object.keys(a)){const s=a[c];if(s&&typeof s=="object"){if(typeof s["@container"]=="string")a[c]=Object.assign(Object.assign({},s),{"@container":{[s["@container"]]:!0}});else if(Array.isArray(s["@container"])){const d={};for(const l of s["@container"])d[l]=!0;a[c]=Object.assign(Object.assign({},s),{"@container":d})}}}}applyScopedProtected(a,{processingMode:c},s){if(c&&c>=1.1&&a["@protected"]){for(const d of Object.keys(a))if(!t.Util.isReservedInternalKeyword(d)&&!t.Util.isPotentialKeyword(d)&&!t.Util.isTermProtected(a,d)){const l=a[d];l&&typeof l=="object"?"@protected"in a[d]||(a[d]=Object.assign(Object.assign({},a[d]),{"@protected":!0})):(a[d]={"@id":l,"@protected":!0},t.Util.isSimpleTermDefinitionPrefix(l,s)&&(a[d]=Object.assign(Object.assign({},a[d]),{"@prefix":!0})))}delete a["@protected"]}}validateKeywordRedefinitions(a,c,s,d){for(const l of d??Object.keys(c))if(t.Util.isTermProtected(a,l)&&(typeof c[l]=="string"?c[l]={"@id":c[l],"@protected":!0}:c[l]=Object.assign(Object.assign({},c[l]),{"@protected":!0}),!t.Util.deepEqual(a[l],c[l])))throw new n.ErrorCoded(`Attempted to override the protected keyword ${l} from ${JSON.stringify(t.Util.getContextValueId(a[l]))} to ${JSON.stringify(t.Util.getContextValueId(c[l]))}`,n.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(a,{processingMode:c}){for(const s of Object.keys(a)){if(t.Util.isReservedInternalKeyword(s))continue;if(s==="")throw new n.ErrorCoded(`The empty term is not allowed, got: '${s}': '${JSON.stringify(a[s])}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);const d=a[s],l=typeof d;if(t.Util.isPotentialKeyword(s)){switch(s.substr(1)){case"vocab":if(d!==null&&l!=="string")throw new n.ErrorCoded(`Found an invalid @vocab IRI: ${d}`,n.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(d!==null&&l!=="string")throw new n.ErrorCoded(`Found an invalid @base IRI: ${a[s]}`,n.ERROR_CODES.INVALID_BASE_IRI);break;case"language":d!==null&&e.validateLanguage(d,!0,n.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(d!==null&&l!=="number")throw new n.ErrorCoded(`Found an invalid @version number: ${d}`,n.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":d!==null&&e.validateDirection(d,!0);break;case"propagate":if(c===1)throw new n.ErrorCoded(`Found an illegal @propagate keyword: ${d}`,n.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(d!==null&&l!=="boolean")throw new n.ErrorCoded(`Found an invalid @propagate value: ${d}`,n.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(t.Util.isValidKeyword(s)&&t.Util.isValidKeyword(t.Util.getContextValueId(d)))throw new n.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${t.Util.getContextValueId(d)}'`,n.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(d!==null)switch(l){case"string":if(t.Util.getPrefix(d,a)===s)throw new n.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.CYCLIC_IRI_MAPPING);if(t.Util.isValidIriWeak(s)){if(d==="@type")throw new n.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${d}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.isValidIri(d)&&d!==new i.JsonLdContextNormalized(a).expandTerm(s))throw new n.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${d}'`,n.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!t.Util.isCompactIri(s)&&!("@id"in d)&&(d["@type"]==="@id"?!a["@base"]:!a["@vocab"]))throw new n.ErrorCoded(`Missing @id in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);for(const f of Object.keys(d)){const h=d[f];if(h)switch(f){case"@id":if(t.Util.isValidKeyword(h)&&h!=="@type"&&h!=="@id"&&h!=="@graph"&&h!=="@nest")throw new n.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.isValidIriWeak(s)){if(h==="@type")throw new n.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.isValidIri(h)&&h!==new i.JsonLdContextNormalized(a).expandTerm(s))throw new n.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof h!="string")throw new n.ErrorCoded(`Detected non-string @id in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.getPrefix(h,a)===s)throw new n.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(d["@container"]==="@type"&&h!=="@id"&&h!=="@vocab")throw new n.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${s}': '${h}'`,n.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof h!="string")throw new n.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(l)}'`,n.ERROR_CODES.INVALID_TYPE_MAPPING);if(h!=="@id"&&h!=="@vocab"&&(c===1||h!=="@json")&&(c===1||h!=="@none")&&(h[0]==="_"||!t.Util.isValidIri(h)))throw new n.ErrorCoded(`A context @type must be an absolute IRI, found: '${s}': '${h}'`,n.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof h=="string"&&d["@id"]&&d["@id"]!==h)throw new n.ErrorCoded(`Found non-matching @id and @reverse term values in '${s}':'${h}' and '${d["@id"]}'`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in d)throw new n.ErrorCoded(`@nest is not allowed in the reverse property '${s}'`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(c===1&&(Object.keys(h).length>1||t.Util.CONTAINERS_1_0.indexOf(Object.keys(h)[0])<0))throw new n.ErrorCoded(`Invalid term @container for '${s}' ('${Object.keys(h)}') in 1.0, must be only one of ${t.Util.CONTAINERS_1_0.join(", ")}`,n.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const p of Object.keys(h)){if(p==="@list"&&d["@reverse"])throw new n.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${s}'`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(t.Util.CONTAINERS.indexOf(p)<0)throw new n.ErrorCoded(`Invalid term @container for '${s}' ('${p}'), must be one of ${t.Util.CONTAINERS.join(", ")}`,n.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":e.validateLanguage(h,!0,n.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":e.validateDirection(h,!0);break;case"@prefix":if(h!==null&&typeof h!="boolean")throw new n.ErrorCoded(`Found an invalid term @prefix boolean in: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in d)&&!t.Util.isValidIri(s))throw new n.ErrorCoded(`Invalid @prefix definition for '${s}' ('${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(c===1||!d["@container"]||!d["@container"]["@index"])throw new n.ErrorCoded(`Attempt to add illegal key to value object: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(t.Util.isPotentialKeyword(h)&&h!=="@nest")throw new n.ErrorCoded(`Found an invalid term @nest value in: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new n.ErrorCoded(`Found an invalid term value: '${s}': '${d}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(a,c,s){return typeof a=="string"||(s&&!("@base"in a)&&c.parentContext&&typeof c.parentContext=="object"&&"@base"in c.parentContext&&(a["@base"]=c.parentContext["@base"],c.parentContext["@__baseDocument"]&&(a["@__baseDocument"]=!0)),c.baseIRI&&!c.external&&("@base"in a?a["@base"]!==null&&typeof a["@base"]=="string"&&!t.Util.isValidIri(a["@base"])&&(a["@base"]=(0,u.resolve)(a["@base"],c.parentContext&&c.parentContext["@base"]||c.baseIRI)):(a["@base"]=c.baseIRI,a["@__baseDocument"]=!0))),a}normalizeContextIri(a,c){if(!t.Util.isValidIri(a))try{a=(0,u.resolve)(a,c)}catch{throw new Error(`Invalid context IRI: ${a}`)}return this.redirectSchemaOrgHttps&&a.startsWith("http://schema.org")&&(a="https://schema.org/"),a}async parseInnerContexts(a,c,s){for(const d of s??Object.keys(a)){const l=a[d];if(l&&typeof l=="object"&&"@context"in l&&l["@context"]!==null&&!c.ignoreScopedContexts){if(this.validateContext)try{const f=Object.assign(Object.assign({},a),{[d]:Object.assign({},a[d])});delete f[d]["@context"],await this.parse(l["@context"],Object.assign(Object.assign({},c),{external:!1,parentContext:f,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(f){throw new n.ErrorCoded(f.message,n.ERROR_CODES.INVALID_SCOPED_CONTEXT)}a[d]=Object.assign(Object.assign({},l),{"@context":(await this.parse(l["@context"],Object.assign(Object.assign({},c),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:a}))).getContextRaw()})}}return a}async parse(a,c={},s={}){const{baseIRI:d,parentContext:l,external:f,processingMode:h=e.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:p,ignoreProtection:y,minimalProcessing:_}=c,b=c.remoteContexts||{};if(Object.keys(b).length>=this.remoteContextsDepthLimit)throw new n.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(b),n.ERROR_CODES.CONTEXT_OVERFLOW);if(a==null){if(!y&&l&&t.Util.hasProtectedTerms(l))throw new n.ErrorCoded("Illegal context nullification when terms are protected",n.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new i.JsonLdContextNormalized(this.applyBaseEntry({},c,!1))}else if(typeof a=="string"){const m=this.normalizeContextIri(a,d),g=this.getOverriddenLoad(m,c);if(g)return new i.JsonLdContextNormalized(g);const T=await this.parse(await this.load(m),Object.assign(Object.assign({},c),{baseIRI:m,external:!0,remoteContexts:Object.assign(Object.assign({},b),{[m]:!0})}));return this.applyBaseEntry(T.getContextRaw(),c,!0),T}else if(Array.isArray(a)){const m=[],g=await Promise.all(a.map((v,A)=>{if(typeof v=="string"){const I=this.normalizeContextIri(v,d);m[A]=I;const q=this.getOverriddenLoad(I,c);return q||this.load(I)}else return v}));if(_)return new i.JsonLdContextNormalized(g);const T=await g.reduce((v,A,I)=>v.then(q=>this.parse(A,Object.assign(Object.assign({},c),{baseIRI:m[I]||c.baseIRI,external:!!m[I]||c.external,parentContext:q.getContextRaw(),remoteContexts:m[I]?Object.assign(Object.assign({},b),{[m[I]]:!0}):b}),{skipValidation:I<g.length-1})),Promise.resolve(new i.JsonLdContextNormalized(l||{})));return this.applyBaseEntry(T.getContextRaw(),c,!0),T}else if(typeof a=="object"){if("@context"in a)return await this.parse(a["@context"],c);if(a=Object.assign({},a),f&&delete a["@base"],this.applyBaseEntry(a,c,!0),this.containersToHash(a),_)return new i.JsonLdContextNormalized(a);let m={};if("@import"in a)if(h>=1.1){if(typeof a["@import"]!="string")throw new n.ErrorCoded("An @import value must be a string, but got "+typeof a["@import"],n.ERROR_CODES.INVALID_IMPORT_VALUE);m=await this.loadImportContext(this.normalizeContextIri(a["@import"],d)),delete a["@import"]}else throw new n.ErrorCoded("Context importing is not supported in JSON-LD 1.0",n.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(m,{processingMode:h},i.defaultExpandOptions);const g=Object.assign(m,a);this.idifyReverseTerms(g),this.normalize(g,{processingMode:h,normalizeLanguageTags:p}),this.applyScopedProtected(g,{processingMode:h},i.defaultExpandOptions);const T=Object.keys(g),v=[];if(typeof l=="object")for(const I in l)I in g?v.push(I):g[I]=l[I];await this.parseInnerContexts(g,c,T);const A=new i.JsonLdContextNormalized(g);return(g&&g["@version"]||e.DEFAULT_PROCESSING_MODE)>=1.1&&(a["@vocab"]&&typeof a["@vocab"]=="string"||a["@vocab"]==="")&&(l&&"@vocab"in l&&a["@vocab"].indexOf(":")<0?g["@vocab"]=l["@vocab"]+a["@vocab"]:(t.Util.isCompactIri(a["@vocab"])||a["@vocab"]in g)&&(g["@vocab"]=A.expandTerm(a["@vocab"],!0))),this.expandPrefixedTerms(A,this.expandContentTypeToBase,T),!y&&l&&h>=1.1&&this.validateKeywordRedefinitions(l,g,i.defaultExpandOptions,v),this.validateContext&&!s.skipValidation&&this.validate(g,{processingMode:h}),A}else throw new n.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${a}`,n.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(a){const c=this.documentCache[a];if(c)return c;let s;try{s=await this.documentLoader.load(a)}catch(d){throw new n.ErrorCoded(`Failed to load remote context ${a}: ${d.message}`,n.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in s))throw new n.ErrorCoded(`Missing @context in remote context at ${a}`,n.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[a]=s["@context"]}getOverriddenLoad(a,c){if(a in(c.remoteContexts||{})){if(c.ignoreRemoteScopedContexts)return a;throw new n.ErrorCoded("Detected a cyclic context inclusion of "+a,n.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(a){let c=await this.load(a);if(typeof c!="object"||Array.isArray(c))throw new n.ErrorCoded("An imported context must be a single object: "+a,n.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in c)throw new n.ErrorCoded("An imported context can not import another context: "+a,n.ERROR_CODES.INVALID_CONTEXT_ENTRY);return c=Object.assign({},c),this.containersToHash(c),c}}return e.DEFAULT_PROCESSING_MODE=1.1,Ng.ContextParser=e,Ng}var J4={},CB;function fde(){return CB||(CB=1,Object.defineProperty(J4,"__esModule",{value:!0})),J4}var k4={},qB;function hde(){return qB||(qB=1,Object.defineProperty(k4,"__esModule",{value:!0})),k4}var BB;function kr(){return BB||(BB=1,(function(u){var n=Xc&&Xc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Xc&&Xc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(lde(),u),o(qv(),u),o(SJ(),u),o(fde(),u),o(hde(),u),o(AJ(),u),o(YO(),u)})(Xc)),Xc}var jg={},Lg={},Mg={},Cg={},$B;function pde(){if($B)return Cg;$B=1,Object.defineProperty(Cg,"__esModule",{value:!0}),Cg.ContainerHandlerIdentifier=void 0;let u=class{canCombineWithGraph(){return!0}async handle(o,i,t,e,r,a){let c;if(i.emittedStack[a+1]&&i.idStack[a+1])c=i.idStack[a+1][0];else{const l=await t.getContainerKey(e[a],e,a)!==null?await t.resourceToTerm(await i.getContext(e),e[a]):t.dataFactory.blankNode();if(!l){i.emittedStack[a]=!1;return}c=l,i.idStack[a+1]=[c]}let s=i.idStack[a];s||(s=i.idStack[a]=[]),s.some(d=>d.equals(c))||s.push(c),await i.handlePendingContainerFlushBuffers()||(i.emittedStack[a]=!1)}};return Cg.ContainerHandlerIdentifier=u,Cg}var qg={},Bg={},UB;function Jw(){if(UB)return Bg;UB=1,Object.defineProperty(Bg,"__esModule",{value:!0}),Bg.EntryHandlerPredicate=void 0;const u=kr(),n=kl();let o=class OJ{static async handlePredicateObject(t,e,r,a,c,s,d,l,f){const h=await e.getPropertiesDepth(r,a),p=await e.getDepthOffsetGraph(a,r),y=a-p,_=t.idStack[h];if(_&&!f)for(const b of _)if(p>=0){const g=t.idStack[y-1];if(g)for(const T of g)e.emitQuadChecked(a,b,c,s,T,d,l);else d?(e.validateReverseSubject(s),t.getUnidentifiedGraphBufferSafe(y-1).push({subject:s,predicate:c,object:b,isEmbedded:l})):t.getUnidentifiedGraphBufferSafe(y-1).push({subject:b,predicate:c,object:s,isEmbedded:l})}else{const g=await e.getGraphContainerValue(r,h);e.emitQuadChecked(a,b,c,s,g,d,l)}else if(d&&e.validateReverseSubject(s),f){if(t.rdfstar){t.idStack[a]&&t.emitError(new u.ErrorCoded(`Found an illegal @id inside an annotation: ${t.idStack[a][0].value}`,u.ERROR_CODES.INVALID_ANNOTATION));for(let g=0;g<a;g++)await e.unaliasKeyword(r[g],r,g)==="@id"&&t.emitError(new u.ErrorCoded("Found an illegal annotation inside an embedded node",u.ERROR_CODES.INVALID_ANNOTATION));const b=t.getAnnotationsBufferSafe(h),m={predicate:c,object:s,reverse:d,nestedAnnotations:[],depth:h};b.push(m);for(let g=b.length-2;g>=0;g--){const T=b[g];T.depth>h&&(m.nestedAnnotations.push(T),b.splice(g,1))}}}else t.getUnidentifiedValueBufferSafe(h).push({predicate:c,object:s,reverse:d,isEmbedded:l})}isPropertyHandler(){return!0}isStackProcessor(){return!0}async validate(t,e,r,a,c){const s=r[a];if(s){const d=await t.getContext(r);if(!t.jsonLiteralStack[a]&&await e.predicateToTerm(d,r[a]))return n.Util.getContextValueType(d,s)==="@json"&&(t.jsonLiteralStack[a+1]=!0),!0}return!1}async test(t,e,r,a,c){return a[c]}async handle(t,e,r,a,c,s,d){const l=a[s],f=await t.getContext(a),h=await e.predicateToTerm(f,r);if(h){const p=await e.valueToTerm(f,r,c,s,a);if(p.length)for(let y of p){let _=await e.unaliasKeywordParent(a,s);const b=n.Util.isPropertyReverse(f,l,_);let m=0;for(;_==="@reverse"||typeof _=="number";)typeof _=="number"?m++:s--,_=await e.unaliasKeywordParent(a,s-m);const g=n.Util.isPropertyInEmbeddedNode(_);e.validateReverseInEmbeddedNode(r,b,g);const T=n.Util.isPropertyInAnnotationObject(_);if(c){const v="@list"in n.Util.getContextValueContainer(f,r);if(v||c["@list"]){if((v&&!Array.isArray(c)&&!c["@list"]||c["@list"]&&!Array.isArray(c["@list"]))&&y!==e.rdfNil){const A=e.dataFactory.blankNode();t.emitQuad(s,e.dataFactory.quad(A,e.rdfRest,e.rdfNil,e.getDefaultGraph())),t.emitQuad(s,e.dataFactory.quad(A,e.rdfFirst,y,e.getDefaultGraph())),y=A}if(b&&!t.allowSubjectList)throw new u.ErrorCoded(`Found illegal list value in subject position at ${r}`,u.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}}await OJ.handlePredicateObject(t,e,a,s,h,y,b,g,T)}}}};return Bg.EntryHandlerPredicate=o,Bg}var VB;function bde(){if(VB)return qg;VB=1,Object.defineProperty(qg,"__esModule",{value:!0}),qg.ContainerHandlerIndex=void 0;const u=kr(),n=Jw(),o=kl();let i=class{canCombineWithGraph(){return!0}async handle(e,r,a,c,s,d){if(!Array.isArray(s)){const l="@graph"in e,f=await r.getContext(c),h=c[d-1],p=o.Util.getContextValueIndex(f,h);if(p){if(u.Util.isPotentialKeyword(p))throw new u.ErrorCoded(`Keywords can not be used as @index value, got: ${p}`,u.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof p!="string")throw new u.ErrorCoded(`@index values must be strings, got: ${p}`,u.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof s!="object"){if(o.Util.getContextValueType(f,h)!=="@id")throw new u.ErrorCoded(`Property-based index containers require nodes as values or strings with @type: @id, but got: ${s}`,u.ERROR_CODES.INVALID_VALUE_OBJECT);const b=a.resourceToTerm(f,s);b&&(r.idStack[d+1]=[b])}const _=a.createVocabOrBaseTerm(f,p);if(_){const b=await a.valueToTerm(f,p,await a.getContainerKey(c[d],c,d),d,c);if(l){const m=await a.getGraphContainerValue(c,d+1);for(const g of b)r.emitQuad(d,a.dataFactory.quad(m,_,g,a.getDefaultGraph()))}else for(const m of b)await n.EntryHandlerPredicate.handlePredicateObject(r,a,c,d+1,_,m,!1,!1,!1)}}const y=l?2:1;await r.newOnValueJob(c.slice(0,c.length-y),s,d-y,!0),await r.handlePendingContainerFlushBuffers()}r.emittedStack[d]=!1}};return qg.ContainerHandlerIndex=i,qg}var $g={},QB;function yde(){if(QB)return $g;QB=1,Object.defineProperty($g,"__esModule",{value:!0}),$g.ContainerHandlerLanguage=void 0;const u=kr();let n=class{canCombineWithGraph(){return!1}async handle(i,t,e,r,a,c){const s=await e.getContainerKey(r[c],r,c);if(Array.isArray(a))a=a.map(d=>({"@value":d,"@language":s}));else{if(typeof a!="string")throw new u.ErrorCoded(`Got invalid language map value, got '${JSON.stringify(a)}', but expected string`,u.ERROR_CODES.INVALID_LANGUAGE_MAP_VALUE);a={"@value":a,"@language":s}}await t.newOnValueJob(r.slice(0,r.length-1),a,c-1,!0),t.emittedStack[c]=!1}};return $g.ContainerHandlerLanguage=n,$g}var Ug={},HB;function _de(){if(HB)return Ug;HB=1,Object.defineProperty(Ug,"__esModule",{value:!0}),Ug.ContainerHandlerType=void 0;const u=Jw(),n=kl();let o=class{canCombineWithGraph(){return!1}async handle(t,e,r,a,c,s){if(!Array.isArray(c)){if(typeof c=="string"){const f=await e.getContext(a),p=n.Util.getContextValueType(f,a[s-1])==="@vocab"?await r.createVocabOrBaseTerm(f,c):await r.resourceToTerm(f,c);if(p){const y={"@id":p.termType==="NamedNode"?p.value:c};await e.newOnValueJob(a.slice(0,a.length-1),y,s-1,!0),e.idStack[s+1]=[p]}}else{const f=!!e.idStack[s+1];f||delete e.idStack[s],await e.newOnValueJob(a.slice(0,a.length-1),c,s-1,!0),f||(e.idStack[s+1]=e.idStack[s])}const d=await r.getContainerKey(a[s],a,s),l=d!==null?r.createVocabOrBaseTerm(await e.getContext(a),d):null;l&&await u.EntryHandlerPredicate.handlePredicateObject(e,r,a,s+1,r.rdfType,l,!1,!1,!1),await e.handlePendingContainerFlushBuffers()}e.emittedStack[s]=!1}};return Ug.ContainerHandlerType=o,Ug}var GB;function EJ(){if(GB)return Mg;GB=1,Object.defineProperty(Mg,"__esModule",{value:!0}),Mg.EntryHandlerContainer=void 0;const u=pde(),n=bde(),o=yde(),i=_de(),t=kl();let e=class Hi{static isSimpleGraphContainer(a){return"@graph"in a&&("@set"in a&&Object.keys(a).length===2||Object.keys(a).length===1)}static isComplexGraphContainer(a){return"@graph"in a&&("@set"in a&&Object.keys(a).length>2||!("@set"in a)&&Object.keys(a).length>1)}static getContainerGraphIndex(a,c,s){let d=Hi.isSimpleGraphContainer(a),l="";for(let f=c;f<s.length;f++)(!d||typeof s[f]=="number")&&(l+=":"+s[f]),!d&&typeof s[f]!="number"&&(d=!0);return l}static async getContainerHandler(a,c,s){const d={containers:{"@set":!0},depth:s,fallback:!0};let l=!1;const f=await a.getContext(c,2);for(let h=s-1;h>=0;h--)if(typeof c[h]!="number"){const p=t.Util.getContextValue(f,"@container",c[h],!1);if(p&&Hi.isSimpleGraphContainer(p))return{containers:p,depth:h+1,fallback:!1};const y=t.Util.getContextValue(f,"@container",c[h-1],!1);if(y){const _="@graph"in y;for(const b in Hi.CONTAINER_HANDLERS)if(y[b])return _?Hi.CONTAINER_HANDLERS[b].canCombineWithGraph()?{containers:y,depth:h,fallback:!1}:d:l?d:{containers:y,depth:h,fallback:!1};return d}else{if(l)return d;l=!0}}return d}static async isBufferableContainerHandler(a,c,s){const d=await Hi.getContainerHandler(a,c,s);return!d.fallback&&!("@graph"in d.containers)}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(a,c,s,d,l){return!!await this.test(a,c,null,s,d)}async test(a,c,s,d,l){const f=t.Util.getContextValueContainer(await a.getContext(d,2),d[l-1]);for(const h in Hi.CONTAINER_HANDLERS)if(f[h])return{containers:f,handler:Hi.CONTAINER_HANDLERS[h]};return null}async handle(a,c,s,d,l,f,h){return h.handler.handle(h.containers,a,c,d,l,f)}};return e.CONTAINER_HANDLERS={"@id":new u.ContainerHandlerIdentifier,"@index":new n.ContainerHandlerIndex,"@language":new o.ContainerHandlerLanguage,"@type":new i.ContainerHandlerType},Mg.EntryHandlerContainer=e,Mg}var K4,zB;function gde(){return zB||(zB=1,K4=function u(n){return n===null||typeof n!="object"||n.toJSON!=null?JSON.stringify(n):Array.isArray(n)?"["+n.reduce((o,i,t)=>{const e=t===0?"":",",r=i===void 0||typeof i=="symbol"?null:i;return o+e+u(r)},"")+"]":"{"+Object.keys(n).sort().reduce((o,i,t)=>{if(n[i]===void 0||typeof n[i]=="symbol")return o;const e=o.length===0?"":",";return o+e+u(i)+":"+u(n[i])},"")+"}"}),K4}var XB;function kl(){if(XB)return Lg;XB=1,Object.defineProperty(Lg,"__esModule",{value:!0}),Lg.Util=void 0;const u=kr(),n=hr(),o=EJ(),i=gde();class t{constructor(r){this.parsingContext=r.parsingContext,this.dataFactory=r.dataFactory||new n.DataFactory,this.rdfFirst=this.dataFactory.namedNode(t.RDF+"first"),this.rdfRest=this.dataFactory.namedNode(t.RDF+"rest"),this.rdfNil=this.dataFactory.namedNode(t.RDF+"nil"),this.rdfType=this.dataFactory.namedNode(t.RDF+"type"),this.rdfJson=this.dataFactory.namedNode(t.RDF+"JSON")}static getContextValue(r,a,c,s){const d=r.getContextRaw()[c];if(!d)return s;const l=d[a];return l===void 0?s:l}static getContextValueContainer(r,a){return t.getContextValue(r,"@container",a,{"@set":!0})}static getContextValueType(r,a){const c=t.getContextValue(r,"@type",a,null);return c==="@none"?null:c}static getContextValueLanguage(r,a){return t.getContextValue(r,"@language",a,r.getContextRaw()["@language"]||null)}static getContextValueDirection(r,a){return t.getContextValue(r,"@direction",a,r.getContextRaw()["@direction"]||null)}static isContextValueReverse(r,a){return!!t.getContextValue(r,"@reverse",a,null)}static getContextValueIndex(r,a){return t.getContextValue(r,"@index",a,r.getContextRaw()["@index"]||null)}static isPropertyReverse(r,a,c){return c==="@reverse"!==t.isContextValueReverse(r,a)}static isPropertyInEmbeddedNode(r){return r==="@id"}static isPropertyInAnnotationObject(r){return r==="@annotation"}static isValidIri(r){return r!==null&&u.Util.isValidIri(r)}static isPrefixArray(r,a){if(r.length>a.length)return!1;for(let c=0;c<r.length;c++)if(r[c]!==a[c])return!1;return!0}async validateValueIndexes(r){if(this.parsingContext.validateValueIndexes){const a={};for(const c of r)if(c&&typeof c=="object"){const s=c["@id"],d=c["@index"];if(s&&d){const l=a[s];if(l&&l!==d)throw new u.ErrorCoded(`Conflicting @index value for ${s}`,u.ERROR_CODES.CONFLICTING_INDEXES);a[s]=d}}}}async valueToTerm(r,a,c,s,d){if(t.getContextValueType(r,a)==="@json")return[this.dataFactory.literal(this.valueToJsonString(c),this.rdfJson)];const l=typeof c;switch(l){case"object":if(c==null)return[];if(Array.isArray(c))return"@list"in t.getContextValueContainer(r,a)?c.length===0?[this.rdfNil]:this.parsingContext.idStack[s+1]||[]:(await this.validateValueIndexes(c),[]);if(r=await this.getContextSelfOrPropertyScoped(r,a),"@context"in c&&(r=await this.parsingContext.parseContext(c["@context"],(await this.parsingContext.getContext(d,0)).getContextRaw())),c=await this.unaliasKeywords(c,d,s,r),"@value"in c){let f,h,p,y,_;for(a in c){const b=c[a];switch(a){case"@value":f=b;break;case"@language":h=b;break;case"@direction":p=b;break;case"@type":y=b;break;case"@index":_=b;break;case"@annotation":break;default:throw new u.ErrorCoded(`Unknown value entry '${a}' in @value: ${JSON.stringify(c)}`,u.ERROR_CODES.INVALID_VALUE_OBJECT)}}if(await this.unaliasKeyword(y,d,s,!0,r)==="@json")return[this.dataFactory.literal(this.valueToJsonString(f),this.rdfJson)];if(f===null)return[];if(typeof f=="object")throw new u.ErrorCoded(`The value of an '@value' can not be an object, got '${JSON.stringify(f)}'`,u.ERROR_CODES.INVALID_VALUE_OBJECT_VALUE);if(this.parsingContext.validateValueIndexes&&_&&typeof _!="string")throw new u.ErrorCoded(`The value of an '@index' must be a string, got '${JSON.stringify(_)}'`,u.ERROR_CODES.INVALID_INDEX_VALUE);if(h){if(typeof f!="string")throw new u.ErrorCoded(`When an '@language' is set, the value of '@value' must be a string, got '${JSON.stringify(f)}'`,u.ERROR_CODES.INVALID_LANGUAGE_TAGGED_VALUE);if(!u.ContextParser.validateLanguage(h,this.parsingContext.strictValues,u.ERROR_CODES.INVALID_LANGUAGE_TAGGED_STRING))return[];(this.parsingContext.normalizeLanguageTags||this.parsingContext.activeProcessingMode===1)&&(h=h.toLowerCase())}if(p){if(typeof f!="string")throw new Error(`When an '@direction' is set, the value of '@value' must be a string, got '${JSON.stringify(f)}'`);if(!u.ContextParser.validateDirection(p,this.parsingContext.strictValues))return[]}if(h&&p&&this.parsingContext.rdfDirection){if(y)throw new u.ErrorCoded(`Can not have '@language', '@direction' and '@type' in a value: '${JSON.stringify(c)}'`,u.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(s,f,h,p))}else if(h){if(y)throw new u.ErrorCoded(`Can not have both '@language' and '@type' in a value: '${JSON.stringify(c)}'`,u.ERROR_CODES.INVALID_VALUE_OBJECT);return[this.dataFactory.literal(f,h)]}else if(p&&this.parsingContext.rdfDirection){if(y)throw new u.ErrorCoded(`Can not have both '@direction' and '@type' in a value: '${JSON.stringify(c)}'`,u.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(s,f,h,p))}else if(y){if(typeof y!="string")throw new u.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(y)}'`,u.ERROR_CODES.INVALID_TYPED_VALUE);const b=this.createVocabOrBaseTerm(r,y);if(!b)throw new u.ErrorCoded(`Invalid '@type' value, got '${JSON.stringify(y)}'`,u.ERROR_CODES.INVALID_TYPED_VALUE);if(b.termType!=="NamedNode")throw new u.ErrorCoded(`Illegal value type (${b.termType}): ${y}`,u.ERROR_CODES.INVALID_TYPED_VALUE);return[this.dataFactory.literal(f,b)]}return await this.valueToTerm(new u.JsonLdContextNormalized({}),a,f,s,d)}else if("@set"in c){if(Object.keys(c).length>1)throw new u.ErrorCoded(`Found illegal neighbouring entries next to @set for key: '${a}'`,u.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);return[]}else if("@list"in c){if(Object.keys(c).length>1)throw new u.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${a}'`,u.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);const f=c["@list"];return Array.isArray(f)?f.length===0?[this.rdfNil]:this.parsingContext.idStack[s+1]||[]:await this.valueToTerm(await this.parsingContext.getContext(d),a,f,s-1,d.slice(0,-1))}else{if("@reverse"in c&&typeof c["@reverse"]=="boolean")return[];if("@graph"in t.getContextValueContainer(await this.parsingContext.getContext(d),a)){const f=this.parsingContext.graphContainerTermStack[s+1];return f?Object.values(f):[this.dataFactory.blankNode()]}else if("@id"in c){if(Object.keys(c).length>1&&(r=await this.parsingContext.getContext(d,0)),"@context"in c&&(r=await this.parsingContext.parseContext(c["@context"],r.getContextRaw())),c["@type"]==="@vocab")return this.nullableTermToArray(this.createVocabOrBaseTerm(r,c["@id"]));{const f=c["@id"];let h;if(typeof f=="object")if(this.parsingContext.rdfstar)h=this.parsingContext.idStack[s+1][0];else throw new u.ErrorCoded(`Found illegal @id '${c}'`,u.ERROR_CODES.INVALID_ID_VALUE);else h=this.resourceToTerm(r,f);return this.nullableTermToArray(h)}}else return this.parsingContext.emittedStack[s+1]||c&&typeof c=="object"&&Object.keys(c).length===0?this.parsingContext.idStack[s+1]||(this.parsingContext.idStack[s+1]=[this.dataFactory.blankNode()]):[]}case"string":return this.nullableTermToArray(this.stringValueToTerm(s,await this.getContextSelfOrPropertyScoped(r,a),a,c,null));case"boolean":return this.nullableTermToArray(this.stringValueToTerm(s,await this.getContextSelfOrPropertyScoped(r,a),a,(!!c).toString(),this.dataFactory.namedNode(t.XSD_BOOLEAN)));case"number":return this.nullableTermToArray(this.stringValueToTerm(s,await this.getContextSelfOrPropertyScoped(r,a),a,c,this.dataFactory.namedNode(c%1===0&&c<1e21?t.XSD_INTEGER:t.XSD_DOUBLE)));default:return this.parsingContext.emitError(new Error(`Could not determine the RDF type of a ${l}`)),[]}}async getContextSelfOrPropertyScoped(r,a){const c=r.getContextRaw()[a];return c&&typeof c=="object"&&"@context"in c&&(r=await this.parsingContext.parseContext(c,r.getContextRaw(),!0)),r}nullableTermToArray(r){return r?[r]:[]}predicateToTerm(r,a){const c=r.expandTerm(a,!0,this.parsingContext.getExpandOptions());if(!c)return null;if(c[0]==="_"&&c[1]===":")return this.parsingContext.produceGeneralizedRdf?this.dataFactory.blankNode(c.substr(2)):null;if(t.isValidIri(c))return this.dataFactory.namedNode(c);if(c&&this.parsingContext.strictValues)this.parsingContext.emitError(new u.ErrorCoded(`Invalid predicate IRI: ${c}`,u.ERROR_CODES.INVALID_IRI_MAPPING));else return null;return null}resourceToTerm(r,a){if(a.startsWith("_:"))return this.dataFactory.blankNode(a.substr(2));const c=r.expandTerm(a,!1,this.parsingContext.getExpandOptions());if(!t.isValidIri(c))if(c&&this.parsingContext.strictValues)this.parsingContext.emitError(new Error(`Invalid resource IRI: ${c}`));else return null;return this.dataFactory.namedNode(c)}createVocabOrBaseTerm(r,a){if(a.startsWith("_:"))return this.dataFactory.blankNode(a.substr(2));const c=this.parsingContext.getExpandOptions();let s=r.expandTerm(a,!0,c);if(s===a&&(s=r.expandTerm(a,!1,c)),!t.isValidIri(s))if(s&&this.parsingContext.strictValues&&!s.startsWith("@"))this.parsingContext.emitError(new Error(`Invalid term IRI: ${s}`));else return null;return this.dataFactory.namedNode(s)}intToString(r,a){return typeof r=="number"?Number.isFinite(r)?r%1===0&&(!a||a.value!==t.XSD_DOUBLE)?Number(r).toString():r.toExponential(15).replace(/(\d)0*e\+?/,"$1E"):r>0?"INF":"-INF":r}stringValueToTerm(r,a,c,s,d){const l=t.getContextValueType(a,c);if(l)if(l==="@id"){if(!d)return this.resourceToTerm(a,this.intToString(s,d))}else if(l==="@vocab"){if(!d)return this.createVocabOrBaseTerm(a,this.intToString(s,d))}else d=this.dataFactory.namedNode(l);if(!d){const f=t.getContextValueLanguage(a,c),h=t.getContextValueDirection(a,c);return h&&this.parsingContext.rdfDirection?this.createLanguageDirectionLiteral(r,this.intToString(s,d),f,h):this.dataFactory.literal(this.intToString(s,d),f)}return this.dataFactory.literal(this.intToString(s,d),d)}createLanguageDirectionLiteral(r,a,c,s){if(this.parsingContext.rdfDirection==="i18n-datatype")return c||(c=""),this.dataFactory.literal(a,this.dataFactory.namedNode(`https://www.w3.org/ns/i18n#${c}_${s}`));{const d=this.dataFactory.blankNode(),l=this.getDefaultGraph();return this.parsingContext.emitQuad(r,this.dataFactory.quad(d,this.dataFactory.namedNode(t.RDF+"value"),this.dataFactory.literal(a),l)),c&&this.parsingContext.emitQuad(r,this.dataFactory.quad(d,this.dataFactory.namedNode(t.RDF+"language"),this.dataFactory.literal(c),l)),this.parsingContext.emitQuad(r,this.dataFactory.quad(d,this.dataFactory.namedNode(t.RDF+"direction"),this.dataFactory.literal(s),l)),d}}valueToJsonString(r){return i(r)}async unaliasKeyword(r,a,c,s,d){if(Number.isInteger(r))return r;if(!s){const l=this.parsingContext.unaliasedKeywordCacheStack[c];if(l)return l}if(!u.Util.isPotentialKeyword(r)){d=d||await this.parsingContext.getContext(a);let l=d.getContextRaw()[r];l&&typeof l=="object"&&(l=l["@id"]),u.Util.isValidKeyword(l)&&(r=l)}return s?r:this.parsingContext.unaliasedKeywordCacheStack[c]=r}async unaliasKeywordParent(r,a){return await this.unaliasKeyword(a>0&&r[a-1],r,a-1)}async unaliasKeywords(r,a,c,s){const d={};for(const l in r)d[await this.unaliasKeyword(l,a,c+1,!0,s)]=r[l];return d}async isLiteral(r,a){for(let c=a;c>=0;c--){if(await this.unaliasKeyword(r[c],r,c)==="@annotation")return!1;if(this.parsingContext.literalStack[c]||this.parsingContext.jsonLiteralStack[c])return!0}return!1}async getDepthOffsetGraph(r,a){for(let c=r-1;c>0;c--)if(await this.unaliasKeyword(a[c],a,c)==="@graph"){const s=(await o.EntryHandlerContainer.getContainerHandler(this.parsingContext,a,c)).containers;return o.EntryHandlerContainer.isComplexGraphContainer(s)?-1:r-c-1}return-1}validateReverseSubject(r){if(r.termType==="Literal")throw new u.ErrorCoded(`Found illegal literal in subject position: ${r.value}`,u.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}getDefaultGraph(){return this.parsingContext.defaultGraph||this.dataFactory.defaultGraph()}async getGraphContainerValue(r,a){let c=this.getDefaultGraph();const{containers:s,depth:d}=await o.EntryHandlerContainer.getContainerHandler(this.parsingContext,r,a);if("@graph"in s){const l=o.EntryHandlerContainer.getContainerGraphIndex(s,d,r),f=this.parsingContext.graphContainerTermStack[d];if(c=f?f[l]:null,!c){let h=null;if("@id"in s){const p=await this.getContainerKey(r[d],r,d);p!==null&&(h=await this.resourceToTerm(await this.parsingContext.getContext(r),p))}h||(h=this.dataFactory.blankNode()),this.parsingContext.graphContainerTermStack[d]||(this.parsingContext.graphContainerTermStack[d]={}),c=this.parsingContext.graphContainerTermStack[d][l]=h}}return c}async getPropertiesDepth(r,a){let c=a;for(let s=a-1;s>0;s--)if(typeof r[s]!="number"){const d=await this.unaliasKeyword(r[s],r,s);if(d==="@reverse")return s;if(d==="@nest")c=s;else return c}return c}async getContainerKey(r,a,c){const s=await this.unaliasKeyword(r,a,c);return s==="@none"?null:s}validateReverseInEmbeddedNode(r,a,c){if(c&&a&&!this.parsingContext.rdfstarReverseInEmbedded)throw new u.ErrorCoded(`Illegal reverse property in embedded node in ${r}`,u.ERROR_CODES.INVALID_EMBEDDED_NODE)}emitQuadChecked(r,a,c,s,d,l,f){let h;if(l?(this.validateReverseSubject(s),h=this.dataFactory.quad(s,c,a,d)):h=this.dataFactory.quad(a,c,s,d),f){if(h.graph.termType!=="DefaultGraph"&&(h=this.dataFactory.quad(h.subject,h.predicate,h.object)),this.parsingContext.idStack[r-1])throw new u.ErrorCoded("Illegal multiple properties in an embedded node",u.ERROR_CODES.INVALID_EMBEDDED_NODE);this.parsingContext.idStack[r-1]=[h]}else this.parsingContext.emitQuad(r,h);const p=this.parsingContext.annotationsBuffer[r];if(p){for(const y of p)this.emitAnnotation(r,h,y);delete this.parsingContext.annotationsBuffer[r]}}emitAnnotation(r,a,c){let s;c.reverse?(this.validateReverseSubject(c.object),s=this.dataFactory.quad(c.object,c.predicate,a)):s=this.dataFactory.quad(a,c.predicate,c.object),this.parsingContext.emitQuad(r,s);for(const d of c.nestedAnnotations)this.emitAnnotation(r,s,d)}}return t.XSD="http://www.w3.org/2001/XMLSchema#",t.XSD_BOOLEAN=t.XSD+"boolean",t.XSD_INTEGER=t.XSD+"integer",t.XSD_DOUBLE=t.XSD+"double",t.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",Lg.Util=t,Lg}var JB;function mde(){if(JB)return jg;JB=1,Object.defineProperty(jg,"__esModule",{value:!0}),jg.EntryHandlerArrayValue=void 0;const u=kl(),n=kr();let o=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(t,e,r,a,c){return this.test(t,e,null,r,a)}async test(t,e,r,a,c){return typeof a[c]=="number"}async handle(t,e,r,a,c,s){let d=await e.unaliasKeywordParent(a,s);if(d==="@list"){let l=null,f=0;for(let h=s-2;h>0;h--){const p=a[h];if(typeof p=="string"||typeof p=="number"){f=h,l=p;break}}if(l!==null){const h=await e.valueToTerm(await t.getContext(a),l,c,s,a);for(const p of h)await this.handleListElement(t,e,p,c,s,a.slice(0,f),f);h.length===0&&await this.handleListElement(t,e,null,c,s,a.slice(0,f),f)}}else if(d==="@set")await t.newOnValueJob(a.slice(0,-2),c,s-2,!1);else if(d!==void 0&&d!=="@type"){for(let f=s-1;f>0;f--)if(typeof a[f]!="number"){d=await e.unaliasKeyword(a[f],a,f);break}const l=await t.getContext(a.slice(0,-1));if("@list"in u.Util.getContextValueContainer(l,d)){t.emittedStack[s+1]=!0;const f=await e.valueToTerm(await t.getContext(a),d,c,s,a);for(const h of f)await this.handleListElement(t,e,h,c,s,a.slice(0,-1),s-1);f.length===0&&await this.handleListElement(t,e,null,c,s,a.slice(0,-1),s-1)}else t.shiftStack(s,1),await t.newOnValueJob(a.slice(0,-1),c,s-1,!1),t.contextTree.removeContext(a.slice(0,-1))}}async handleListElement(t,e,r,a,c,s,d){let l=t.listPointerStack[c];if(a!==null&&(await e.unaliasKeywords(a,s,c))["@value"]!==null){if(!l||!l.value){const f=e.dataFactory.blankNode();l={value:f,listRootDepth:d,listId:f}}else{const f=e.dataFactory.blankNode();t.emitQuad(c,e.dataFactory.quad(l.value,e.rdfRest,f,e.getDefaultGraph())),l.value=f}r&&t.emitQuad(c,e.dataFactory.quad(l.value,e.rdfFirst,r,e.getDefaultGraph()))}else l||(l={listRootDepth:d,listId:e.rdfNil});t.listPointerStack[c]=l,t.rdfstar&&t.annotationsBuffer[c]&&t.emitError(new n.ErrorCoded("Found an illegal annotation inside a list",n.ERROR_CODES.INVALID_ANNOTATION))}};return jg.EntryHandlerArrayValue=o,jg}var Vg={},kB;function vde(){if(kB)return Vg;kB=1,Object.defineProperty(Vg,"__esModule",{value:!0}),Vg.EntryHandlerInvalidFallback=void 0;let u=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(o,i,t,e,r){return!1}async test(o,i,t,e,r){return!0}async handle(o,i,t,e,r,a){o.emittedStack[a]=!1}};return Vg.EntryHandlerInvalidFallback=u,Vg}var Qg={},Hg={},KB;function oa(){if(KB)return Hg;KB=1,Object.defineProperty(Hg,"__esModule",{value:!0}),Hg.EntryHandlerKeyword=void 0;let u=class{constructor(o){this.keyword=o}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(o,i,t,e,r){return!1}async test(o,i,t,e,r){return t===this.keyword}};return Hg.EntryHandlerKeyword=u,Hg}var WB;function Tde(){if(WB)return Qg;WB=1,Object.defineProperty(Qg,"__esModule",{value:!0}),Qg.EntryHandlerKeywordContext=void 0;const u=kr(),n=oa();let o=class extends n.EntryHandlerKeyword{constructor(){super("@context")}isStackProcessor(){return!1}async handle(t,e,r,a,c,s){t.streamingProfile&&(t.processingStack[s]||t.processingType[s]||t.idStack[s]!==void 0)&&t.emitError(new u.ErrorCoded("Found an out-of-order context, while streaming is enabled.(disable `streamingProfile`)",u.ERROR_CODES.INVALID_STREAMING_KEY_ORDER));const d=t.getContext(a),l=t.parseContext(c,(await d).getContextRaw());t.contextTree.setContext(a.slice(0,-1),l),t.emitContext(c),await t.validateContext(await l)}};return Qg.EntryHandlerKeywordContext=o,Qg}var Gg={},YB;function wde(){if(YB)return Gg;YB=1,Object.defineProperty(Gg,"__esModule",{value:!0}),Gg.EntryHandlerKeywordGraph=void 0;const u=oa();let n=class extends u.EntryHandlerKeyword{constructor(){super("@graph")}async handle(i,t,e,r,a,c){i.graphStack[c+1]=!0}};return Gg.EntryHandlerKeywordGraph=n,Gg}var zg={},ZB;function Sde(){if(ZB)return zg;ZB=1,Object.defineProperty(zg,"__esModule",{value:!0}),zg.EntryHandlerKeywordId=void 0;const u=kr(),n=oa();let o=class extends n.EntryHandlerKeyword{constructor(){super("@id")}isStackProcessor(){return!1}async handle(t,e,r,a,c,s){if(typeof c!="string"){if(t.rdfstar&&typeof c=="object"){const l=Object.keys(c);l.length===1&&l[0]==="@id"&&t.emitError(new u.ErrorCoded(`Invalid embedded node without property with @id ${c["@id"]}`,u.ERROR_CODES.INVALID_EMBEDDED_NODE))}else t.emitError(new u.ErrorCoded(`Found illegal @id '${c}'`,u.ERROR_CODES.INVALID_ID_VALUE));return}const d=await e.getPropertiesDepth(a,s);if(t.idStack[d]!==void 0&&(t.idStack[d][0].listHead?t.emitError(new u.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${a[s-1]}'`,u.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT)):t.emitError(new u.ErrorCoded(`Found duplicate @ids '${t.idStack[d][0].value}' and '${c}'`,u.ERROR_CODES.COLLIDING_KEYWORDS))),t.rdfstar&&t.annotationsBuffer[s])for(const l of t.annotationsBuffer[s])l.depth===s&&t.emitError(new u.ErrorCoded(`Found an illegal @id inside an annotation: ${c}`,u.ERROR_CODES.INVALID_ANNOTATION));t.idStack[d]=e.nullableTermToArray(await e.resourceToTerm(await t.getContext(a),c))}};return zg.EntryHandlerKeywordId=o,zg}var Xg={},e$;function Ade(){if(e$)return Xg;e$=1,Object.defineProperty(Xg,"__esModule",{value:!0}),Xg.EntryHandlerKeywordIncluded=void 0;const u=kr(),n=oa();let o=class extends n.EntryHandlerKeyword{constructor(){super("@included")}async handle(t,e,r,a,c,s){typeof c!="object"&&t.emitError(new u.ErrorCoded(`Found illegal @included '${c}'`,u.ERROR_CODES.INVALID_INCLUDED_VALUE));const d=await e.unaliasKeywords(c,a,s,await t.getContext(a));"@value"in d&&t.emitError(new u.ErrorCoded(`Found an illegal @included @value node '${JSON.stringify(c)}'`,u.ERROR_CODES.INVALID_INCLUDED_VALUE)),"@list"in d&&t.emitError(new u.ErrorCoded(`Found an illegal @included @list node '${JSON.stringify(c)}'`,u.ERROR_CODES.INVALID_INCLUDED_VALUE)),t.emittedStack[s]=!1}};return Xg.EntryHandlerKeywordIncluded=o,Xg}var Jg={},t$;function Ode(){if(t$)return Jg;t$=1,Object.defineProperty(Jg,"__esModule",{value:!0}),Jg.EntryHandlerKeywordNest=void 0;const u=kr(),n=oa();let o=class extends n.EntryHandlerKeyword{constructor(){super("@nest")}async handle(t,e,r,a,c,s){typeof c!="object"&&t.emitError(new u.ErrorCoded(`Found invalid @nest entry for '${r}': '${c}'`,u.ERROR_CODES.INVALID_NEST_VALUE)),"@value"in await e.unaliasKeywords(c,a,s,await t.getContext(a))&&t.emitError(new u.ErrorCoded(`Found an invalid @value node for '${r}'`,u.ERROR_CODES.INVALID_NEST_VALUE)),t.emittedStack[s]=!1}};return Jg.EntryHandlerKeywordNest=o,Jg}var kg={},r$;function Ede(){if(r$)return kg;r$=1,Object.defineProperty(kg,"__esModule",{value:!0}),kg.EntryHandlerKeywordType=void 0;const u=kr(),n=kl(),o=Jw(),i=oa();let t=class extends i.EntryHandlerKeyword{constructor(){super("@type")}isStackProcessor(){return!1}async handle(r,a,c,s,d,l){const f=s[l],h=await r.getContext(s),p=a.rdfType,y=await a.unaliasKeywordParent(s,l),_=n.Util.isPropertyReverse(h,f,y),b=n.Util.isPropertyInEmbeddedNode(y);a.validateReverseInEmbeddedNode(c,_,b);const m=n.Util.isPropertyInAnnotationObject(y),g=Array.isArray(d)?d:[d];for(const A of g){typeof A!="string"&&r.emitError(new u.ErrorCoded(`Found illegal @type '${A}'`,u.ERROR_CODES.INVALID_TYPE_VALUE));const I=a.createVocabOrBaseTerm(h,A);I&&await o.EntryHandlerPredicate.handlePredicateObject(r,a,s,l,p,I,_,b,m)}let T=Promise.resolve(h),v=!1;for(const A of g.sort()){const I=n.Util.getContextValue(h,"@context",A,null);I&&(v=!0,T=T.then(q=>r.parseContext(I,q.getContextRaw())))}r.streamingProfile&&(v||!r.streamingProfileAllowOutOfOrderPlainType)&&(r.processingStack[l]||r.idStack[l])&&r.emitError(new u.ErrorCoded("Found an out-of-order type-scoped context, while streaming is enabled.(disable `streamingProfile`)",u.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),v&&(T=T.then(A=>A.getContextRaw()["@propagate"]!==!0?new u.JsonLdContextNormalized(Object.assign(Object.assign({},A.getContextRaw()),{"@propagate":!1,"@__propagateFallback":h.getContextRaw()})):A),r.contextTree.setContext(s.slice(0,s.length-1),T)),r.processingType[l]=!0}};return kg.EntryHandlerKeywordType=t,kg}var Kg={},n$;function xde(){if(n$)return Kg;n$=1,Object.defineProperty(Kg,"__esModule",{value:!0}),Kg.EntryHandlerKeywordUnknownFallback=void 0;const u=kr();let n=class xJ{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(i,t,e,r,a){const c=await t.unaliasKeyword(e[r],e,r);return u.Util.isPotentialKeyword(c)?!(!a&&c==="@list"):!1}async test(i,t,e,r,a){return u.Util.isPotentialKeyword(e)}async handle(i,t,e,r,a,c){const s=xJ.VALID_KEYWORDS_TYPES[e];s!==void 0?s&&typeof a!==s.type&&i.emitError(new u.ErrorCoded(`Invalid value type for '${e}' with value '${a}'`,s.errorCode)):i.strictValues&&i.emitError(new Error(`Unknown keyword '${e}' with value '${a}'`)),i.emittedStack[c]=!1}};return n.VALID_KEYWORDS_TYPES={"@index":{type:"string",errorCode:u.ERROR_CODES.INVALID_INDEX_VALUE},"@list":null,"@reverse":{type:"object",errorCode:u.ERROR_CODES.INVALID_REVERSE_VALUE},"@set":null,"@value":null},Kg.EntryHandlerKeywordUnknownFallback=n,Kg}var Wg={},i$;function Ide(){if(i$)return Wg;i$=1,Object.defineProperty(Wg,"__esModule",{value:!0}),Wg.EntryHandlerKeywordValue=void 0;const u=oa();let n=class extends u.EntryHandlerKeyword{constructor(){super("@value")}async validate(i,t,e,r,a){const c=e[r];return c&&!i.literalStack[r]&&await this.test(i,t,c,e,r)&&(i.literalStack[r]=!0),super.validate(i,t,e,r,a)}async test(i,t,e,r,a){return await t.unaliasKeyword(r[a],r.slice(0,r.length-1),a-1,!0)==="@value"}async handle(i,t,e,r,a,c){i.literalStack[c]=!0,delete i.unidentifiedValuesBuffer[c],delete i.unidentifiedGraphsBuffer[c],i.emittedStack[c]=!1}};return Wg.EntryHandlerKeywordValue=n,Wg}var Yg={},Zg={},a$;function Rde(){if(a$)return Zg;a$=1,Object.defineProperty(Zg,"__esModule",{value:!0}),Zg.ContextTree=void 0;let u=class IJ{constructor(){this.subTrees={}}getContext(o){if(o.length>0){const[i,...t]=o,e=this.subTrees[i];if(e){const r=e.getContext(t);if(r)return r.then(({context:a,depth:c})=>({context:a,depth:c+1}))}}return this.context?this.context.then(i=>({context:i,depth:0})):null}setContext(o,i){if(o.length===0)this.context=i;else{const[t,...e]=o;let r=this.subTrees[t];r||(r=this.subTrees[t]=new IJ),r.setContext(e,i)}}removeContext(o){this.setContext(o,null)}};return Zg.ContextTree=u,Zg}var u$;function Fde(){if(u$)return Yg;u$=1,Object.defineProperty(Yg,"__esModule",{value:!0}),Yg.ParsingContext=void 0;const u=kr(),n=qv(),o=Rde(),i=FJ();let t=class RJ{constructor(r){this.contextParser=new u.ContextParser({documentLoader:r.documentLoader,skipValidation:r.skipContextValidation}),this.streamingProfile=!!r.streamingProfile,this.baseIRI=r.baseIRI,this.produceGeneralizedRdf=!!r.produceGeneralizedRdf,this.allowSubjectList=!!r.allowSubjectList,this.processingMode=r.processingMode||i.JsonLdParser.DEFAULT_PROCESSING_MODE,this.strictValues=!!r.strictValues,this.validateValueIndexes=!!r.validateValueIndexes,this.defaultGraph=r.defaultGraph,this.rdfDirection=r.rdfDirection,this.normalizeLanguageTags=r.normalizeLanguageTags,this.streamingProfileAllowOutOfOrderPlainType=r.streamingProfileAllowOutOfOrderPlainType,this.rdfstar=r.rdfstar!==!1,this.rdfstarReverseInEmbedded=r.rdfstarReverseInEmbedded,this.topLevelProperties=!1,this.activeProcessingMode=parseFloat(this.processingMode),this.processingStack=[],this.processingType=[],this.emittedStack=[],this.idStack=[],this.graphStack=[],this.graphContainerTermStack=[],this.listPointerStack=[],this.contextTree=new o.ContextTree,this.literalStack=[],this.validationStack=[],this.unaliasedKeywordCacheStack=[],this.jsonLiteralStack=[],this.unidentifiedValuesBuffer=[],this.unidentifiedGraphsBuffer=[],this.annotationsBuffer=[],this.pendingContainerFlushBuffers=[],this.parser=r.parser,r.context?(this.rootContext=this.parseContext(r.context),this.rootContext.then(a=>this.validateContext(a))):this.rootContext=Promise.resolve(new u.JsonLdContextNormalized(this.baseIRI?{"@base":this.baseIRI,"@__baseDocument":!0}:{}))}async parseContext(r,a,c){return this.contextParser.parse(r,{baseIRI:this.baseIRI,ignoreProtection:c,normalizeLanguageTags:this.normalizeLanguageTags,parentContext:a,processingMode:this.activeProcessingMode})}validateContext(r){const a=r.getContextRaw()["@version"];if(a){if(this.activeProcessingMode&&a>this.activeProcessingMode)throw new n.ErrorCoded(`Unsupported JSON-LD version '${a}' under active processing mode ${this.activeProcessingMode}.`,n.ERROR_CODES.PROCESSING_MODE_CONFLICT);if(this.activeProcessingMode&&a<this.activeProcessingMode)throw new n.ErrorCoded(`Invalid JSON-LD version ${a} under active processing mode ${this.activeProcessingMode}.`,n.ERROR_CODES.INVALID_VERSION_VALUE);this.activeProcessingMode=a}}async getContext(r,a=1){const c=r;for(;typeof r[r.length-1]=="number";)r=r.slice(0,r.length-1);a&&(r=r.slice(0,-a));const s=await this.getContextPropagationAware(r);let l=s.context.getContextRaw();for(let f=s.depth;f<c.length-a;f++){const h=c[f],p=l[h];if(p&&typeof p=="object"&&"@context"in p){const y=(await this.parseContext(p,l,!0)).getContextRaw(),_=!(h in y)||y[h]["@context"]["@propagate"];(_!==!1||f===c.length-1-a)&&(l=Object.assign({},y),delete l["@propagate"],l[h]=Object.assign({},l[h]),"@id"in p&&(l[h]["@id"]=p["@id"]),delete l[h]["@context"],_!==!1&&this.contextTree.setContext(c.slice(0,f+a),Promise.resolve(new u.JsonLdContextNormalized(l))))}}return new u.JsonLdContextNormalized(l)}async getContextPropagationAware(r){const a=r.length;let c=null,s;do{s=!1,c&&"@__propagateFallback"in c.context.getContextRaw()?c.context=new u.JsonLdContextNormalized(c.context.getContextRaw()["@__propagateFallback"]):(c&&(r=r.slice(0,c.depth-1)),c=await this.contextTree.getContext(r)||{context:await this.rootContext,depth:0});const d=r[r.length-1];if(d in c.context.getContextRaw()){const l=c.context.getContextRaw()[d];l&&typeof l=="object"&&"@context"in l&&(s=!0)}}while(c.depth>0&&c.context.getContextRaw()["@propagate"]===!1&&c.depth!==a&&!s);return c.depth===0&&c.context.getContextRaw()["@propagate"]===!1&&c.depth!==a&&(c.context=new u.JsonLdContextNormalized({})),c}async newOnValueJob(r,a,c,s){await this.parser.newOnValueJob(r,a,c,s)}async handlePendingContainerFlushBuffers(){if(this.pendingContainerFlushBuffers.length>0){for(const r of this.pendingContainerFlushBuffers)await this.parser.flushBuffer(r.depth,r.keys),this.parser.flushStacks(r.depth);return this.pendingContainerFlushBuffers.splice(0,this.pendingContainerFlushBuffers.length),!0}else return!1}emitQuad(r,a){r===1&&(this.topLevelProperties=!0),this.parser.push(a)}emitError(r){this.parser.emit("error",r)}emitContext(r){this.parser.emit("context",r)}getUnidentifiedValueBufferSafe(r){let a=this.unidentifiedValuesBuffer[r];return a||(a=[],this.unidentifiedValuesBuffer[r]=a),a}getUnidentifiedGraphBufferSafe(r){let a=this.unidentifiedGraphsBuffer[r];return a||(a=[],this.unidentifiedGraphsBuffer[r]=a),a}getAnnotationsBufferSafe(r){let a=this.annotationsBuffer[r];return a||(a=[],this.annotationsBuffer[r]=a),a}getExpandOptions(){return RJ.EXPAND_OPTIONS[this.activeProcessingMode]}shiftStack(r,a){const c=this.idStack[r+a];if(c&&(this.idStack[r]=c,this.emittedStack[r]=!0,delete this.idStack[r+a]),this.pendingContainerFlushBuffers.length)for(const s of this.pendingContainerFlushBuffers)s.depth>=r+a&&(s.depth-=a,s.keys.splice(r,a));this.unidentifiedValuesBuffer[r+a]&&(this.unidentifiedValuesBuffer[r]=this.unidentifiedValuesBuffer[r+a],delete this.unidentifiedValuesBuffer[r+a]),this.annotationsBuffer[r+a-1]&&(this.annotationsBuffer[r-1]||(this.annotationsBuffer[r-1]=[]),this.annotationsBuffer[r-1]=[...this.annotationsBuffer[r-1],...this.annotationsBuffer[r+a-1]],delete this.annotationsBuffer[r+a-1])}};return t.EXPAND_OPTIONS={1:{allowPrefixForcing:!1,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!1},1.1:{allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}},Yg.ParsingContext=t,Yg}var em={},o$;function Nde(){if(o$)return em;o$=1,Object.defineProperty(em,"__esModule",{value:!0}),em.EntryHandlerKeywordAnnotation=void 0;const u=oa(),n=kr();let o=class extends u.EntryHandlerKeyword{constructor(){super("@annotation")}async handle(t,e,r,a,c,s){(typeof c=="string"||typeof c=="object"&&c["@value"])&&t.emitError(new n.ErrorCoded(`Found illegal annotation value: ${JSON.stringify(c)}`,n.ERROR_CODES.INVALID_ANNOTATION))}};return em.EntryHandlerKeywordAnnotation=o,em}var s$;function FJ(){if(s$)return Fg;s$=1,Object.defineProperty(Fg,"__esModule",{value:!0}),Fg.JsonLdParser=void 0;const u=cX(),n=kr(),o=Dt(),i=mde(),t=EJ(),e=vde(),r=Jw(),a=Tde(),c=wde(),s=Sde(),d=Ade(),l=Ode(),f=Ede(),h=xde(),p=Ide(),y=Fde(),_=kl(),b=Dv(),m=Nde();let g=class gf extends o.Transform{constructor(v){super({readableObjectMode:!0}),v=v||{},this.options=v,this.parsingContext=new y.ParsingContext(Object.assign({parser:this},v)),this.util=new _.Util({dataFactory:v.dataFactory,parsingContext:this.parsingContext}),this.jsonParser=new u,this.contextJobs=[],this.typeJobs=[],this.contextAwaitingJobs=[],this.lastDepth=0,this.lastKeys=[],this.lastOnValueJob=Promise.resolve(),this.attachJsonParserListeners(),this.on("end",()=>{typeof this.jsonParser.mode<"u"&&this.emit("error",new Error("Unclosed document"))})}static fromHttpResponse(v,A,I,q){let O,w=["application/activity+json"];if(q&&q.wellKnownMediaTypes&&(w=q.wellKnownMediaTypes),A!=="application/ld+json"&&!w.includes(A)){if(A!=="application/json"&&!A.endsWith("+json"))throw new n.ErrorCoded(`Unsupported JSON-LD media type ${A}`,n.ERROR_CODES.LOADING_DOCUMENT_FAILED);if(I&&I.has("Link")&&I.forEach((E,R)=>{if(R==="link"){const L=(0,b.parse)(E);for(const M of L.get("rel","http://www.w3.org/ns/json-ld#context")){if(O)throw new n.ErrorCoded("Multiple JSON-LD context link headers were found on "+v,n.ERROR_CODES.MULTIPLE_CONTEXT_LINK_HEADERS);O=M.uri}}}),!O&&!(q!=null&&q.ignoreMissingContextLinkHeader))throw new n.ErrorCoded(`Missing context link header for media type ${A} on ${v}`,n.ERROR_CODES.LOADING_DOCUMENT_FAILED)}let S;if(I&&I.has("Content-Type")){const E=I.get("Content-Type"),R=/; *profile=([^"]*)/.exec(E);R&&R[1]==="http://www.w3.org/ns/json-ld#streaming"&&(S=!0)}return new gf(Object.assign({baseIRI:v,context:O,streamingProfile:S},q||{}))}import(v){if("pipe"in v){v.on("error",I=>A.emit("error",I));const A=v.pipe(new gf(this.options));return A}else{const A=new o.PassThrough({readableObjectMode:!0});v.on("error",q=>I.emit("error",q)),v.on("data",q=>A.push(q)),v.on("end",()=>A.push(null));const I=A.pipe(new gf(this.options));return I}}_transform(v,A,I){this.jsonParser.write(v),this.lastOnValueJob.then(()=>I(),q=>I(q))}async newOnValueJob(v,A,I,q){let O=!0;if(q&&I<this.lastDepth){const L=this.parsingContext.listPointerStack[this.lastDepth];L&&(L.value&&this.push(this.util.dataFactory.quad(L.value,this.util.rdfRest,this.util.rdfNil,this.util.getDefaultGraph())),L.listId.listHead=!0,this.parsingContext.idStack[L.listRootDepth+1]=[L.listId],this.parsingContext.listPointerStack.splice(this.lastDepth,1)),await t.EntryHandlerContainer.isBufferableContainerHandler(this.parsingContext,this.lastKeys,this.lastDepth)?(this.parsingContext.pendingContainerFlushBuffers.push({depth:this.lastDepth,keys:this.lastKeys.slice(0,this.lastKeys.length)}),O=!1):await this.flushBuffer(this.lastDepth,this.lastKeys)}const w=await this.util.unaliasKeyword(v[I],v,I),S=await this.util.unaliasKeywordParent(v,I);this.parsingContext.emittedStack[I]=!0;let E=!0;n.Util.isValidKeyword(w)&&S==="@reverse"&&w!=="@context"&&this.emit("error",new n.ErrorCoded(`Found the @id '${A}' inside an @reverse property`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY_MAP));let R=!1;this.parsingContext.validationStack.length>1&&(R=this.parsingContext.validationStack[this.parsingContext.validationStack.length-1].property);for(let L=Math.max(1,this.parsingContext.validationStack.length-1);L<v.length-1;L++){const M=this.parsingContext.validationStack[L]||(this.parsingContext.validationStack[L]=await this.validateKey(v.slice(0,L+1),L,R));if(M.valid)!R&&M.property&&(R=!0);else{this.parsingContext.emittedStack[I]=!1,E=!1;break}}if(await this.util.isLiteral(v,I)&&(E=!1),E)for(const L of gf.ENTRY_HANDLERS){const M=await L.test(this.parsingContext,this.util,w,v,I);if(M){await L.handle(this.parsingContext,this.util,w,v,A,I,M),L.isStackProcessor()&&(this.parsingContext.processingStack[I]=!0);break}}I===0&&Array.isArray(A)&&await this.util.validateValueIndexes(A),O&&I<this.lastDepth&&this.flushStacks(this.lastDepth),this.lastDepth=I,this.lastKeys=v,this.parsingContext.unaliasedKeywordCacheStack.splice(I-1)}flushStacks(v){this.parsingContext.processingStack.splice(v,1),this.parsingContext.processingType.splice(v,1),this.parsingContext.emittedStack.splice(v,1),this.parsingContext.idStack.splice(v,1),this.parsingContext.graphStack.splice(v+1,1),this.parsingContext.graphContainerTermStack.splice(v,1),this.parsingContext.jsonLiteralStack.splice(v,1),this.parsingContext.validationStack.splice(v-1,2),this.parsingContext.literalStack.splice(v,this.parsingContext.literalStack.length-v),this.parsingContext.annotationsBuffer.splice(v,1)}async flushBuffer(v,A){let I=this.parsingContext.idStack[v];!!I||(I=this.parsingContext.idStack[v]=[this.util.dataFactory.blankNode()]);const O=this.parsingContext.unidentifiedValuesBuffer[v];if(O){for(const E of I){const R=await this.util.getDepthOffsetGraph(v,A),L=this.parsingContext.graphStack[v]||R>=0?this.parsingContext.idStack[v-R-1]:[await this.util.getGraphContainerValue(A,v)];if(L)for(const M of L){this.parsingContext.emittedStack[v]=!0;for(const B of O)this.util.emitQuadChecked(v,E,B.predicate,B.object,M,B.reverse,B.isEmbedded)}else{const M=this.parsingContext.getUnidentifiedGraphBufferSafe(v-await this.util.getDepthOffsetGraph(v,A)-1);for(const B of O)B.reverse?M.push({object:E,predicate:B.predicate,subject:B.object,isEmbedded:B.isEmbedded}):M.push({object:B.object,predicate:B.predicate,subject:E,isEmbedded:B.isEmbedded})}}this.parsingContext.unidentifiedValuesBuffer.splice(v,1),this.parsingContext.literalStack.splice(v,1),this.parsingContext.jsonLiteralStack.splice(v,1)}const w=this.parsingContext.unidentifiedGraphsBuffer[v];if(w){for(const E of I){const R=v===1&&E.termType==="BlankNode"&&!this.parsingContext.topLevelProperties?this.util.getDefaultGraph():E;this.parsingContext.emittedStack[v]=!0;for(const L of w)this.parsingContext.emitQuad(v,this.util.dataFactory.quad(L.subject,L.predicate,L.object,R))}this.parsingContext.unidentifiedGraphsBuffer.splice(v,1)}const S=this.parsingContext.annotationsBuffer[v];if(S){S.length>0&&v===1&&this.parsingContext.emitError(new n.ErrorCoded("Annotations can not be made on top-level nodes",n.ERROR_CODES.INVALID_ANNOTATION));const E=this.parsingContext.getAnnotationsBufferSafe(v-1);for(const R of S)E.push(R);delete this.parsingContext.annotationsBuffer[v]}}async validateKey(v,A,I){for(const q of gf.ENTRY_HANDLERS)if(await q.validate(this.parsingContext,this.util,v,A,I))return{valid:!0,property:I||q.isPropertyHandler()};return{valid:!1,property:!1}}attachJsonParserListeners(){this.jsonParser.onValue=v=>{const A=this.jsonParser.stack.length,I=new Array(A+1).fill(0).map((q,O)=>O===A?this.jsonParser.key:this.jsonParser.stack[O].key);if(!this.isParsingContextInner(A)){const q=()=>this.newOnValueJob(I,v,A,!0);if(!this.parsingContext.streamingProfile&&!this.parsingContext.contextTree.getContext(I.slice(0,-1)))if(I[A]==="@context"){let O=this.contextJobs[A];O||(O=this.contextJobs[A]=[]),O.push(q)}else this.contextAwaitingJobs.push({job:q,keys:I,depth:A});else this.lastOnValueJob=this.lastOnValueJob.then(q);!this.parsingContext.streamingProfile&&A===0&&(this.lastOnValueJob=this.lastOnValueJob.then(()=>this.executeBufferedJobs()))}},this.jsonParser.onError=v=>{this.emit("error",v)}}isParsingContextInner(v){for(let A=v;A>0;A--)if(this.jsonParser.stack[A-1].key==="@context")return!0;return!1}async executeBufferedJobs(){for(const A of this.contextJobs)if(A)for(const I of A)await I();this.parsingContext.unaliasedKeywordCacheStack.splice(0);const v=[];for(const A of this.contextAwaitingJobs)await this.util.unaliasKeyword(A.keys[A.depth],A.keys,A.depth,!0)==="@type"||typeof A.keys[A.depth]=="number"&&await this.util.unaliasKeyword(A.keys[A.depth-1],A.keys,A.depth-1,!0)==="@type"?this.typeJobs.push({job:A.job,keys:A.keys.slice(0,A.keys.length-1)}):v.push(A);for(const A of v){if(this.typeJobs.length>0){const I=[],q=[];for(let S=0;S<this.typeJobs.length;S++){const E=this.typeJobs[S];_.Util.isPrefixArray(E.keys,A.keys)&&(I.push(E),q.push(S))}const O=I.sort((S,E)=>S.keys.length-E.keys.length);for(const S of O)await S.job();const w=q.sort().reverse();for(const S of w)this.typeJobs.splice(S,1)}await A.job()}}};return g.DEFAULT_PROCESSING_MODE="1.1",g.ENTRY_HANDLERS=[new i.EntryHandlerArrayValue,new a.EntryHandlerKeywordContext,new s.EntryHandlerKeywordId,new d.EntryHandlerKeywordIncluded,new c.EntryHandlerKeywordGraph,new l.EntryHandlerKeywordNest,new f.EntryHandlerKeywordType,new p.EntryHandlerKeywordValue,new m.EntryHandlerKeywordAnnotation,new t.EntryHandlerContainer,new h.EntryHandlerKeywordUnknownFallback,new r.EntryHandlerPredicate,new e.EntryHandlerInvalidFallback],Fg.JsonLdParser=g,Fg}var c$;function Pde(){return c$||(c$=1,(function(u){var n=zc&&zc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=zc&&zc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(FJ(),u)})(zc)),zc}var tm={},Jc={},rm={},W4={},d$;function NJ(){return d$||(d$=1,(function(){(function(u){(function(n){var o=typeof globalThis<"u"&&globalThis||typeof u<"u"&&u||typeof Bl<"u"&&Bl||{},i={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function t(w){return w&&DataView.prototype.isPrototypeOf(w)}if(i.arrayBuffer)var e=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],r=ArrayBuffer.isView||function(w){return w&&e.indexOf(Object.prototype.toString.call(w))>-1};function a(w){if(typeof w!="string"&&(w=String(w)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(w)||w==="")throw new TypeError('Invalid character in header field name: "'+w+'"');return w.toLowerCase()}function c(w){return typeof w!="string"&&(w=String(w)),w}function s(w){var S={next:function(){var E=w.shift();return{done:E===void 0,value:E}}};return i.iterable&&(S[Symbol.iterator]=function(){return S}),S}function d(w){this.map={},w instanceof d?w.forEach(function(S,E){this.append(E,S)},this):Array.isArray(w)?w.forEach(function(S){if(S.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+S.length);this.append(S[0],S[1])},this):w&&Object.getOwnPropertyNames(w).forEach(function(S){this.append(S,w[S])},this)}d.prototype.append=function(w,S){w=a(w),S=c(S);var E=this.map[w];this.map[w]=E?E+", "+S:S},d.prototype.delete=function(w){delete this.map[a(w)]},d.prototype.get=function(w){return w=a(w),this.has(w)?this.map[w]:null},d.prototype.has=function(w){return this.map.hasOwnProperty(a(w))},d.prototype.set=function(w,S){this.map[a(w)]=c(S)},d.prototype.forEach=function(w,S){for(var E in this.map)this.map.hasOwnProperty(E)&&w.call(S,this.map[E],E,this)},d.prototype.keys=function(){var w=[];return this.forEach(function(S,E){w.push(E)}),s(w)},d.prototype.values=function(){var w=[];return this.forEach(function(S){w.push(S)}),s(w)},d.prototype.entries=function(){var w=[];return this.forEach(function(S,E){w.push([E,S])}),s(w)},i.iterable&&(d.prototype[Symbol.iterator]=d.prototype.entries);function l(w){if(!w._noBody){if(w.bodyUsed)return Promise.reject(new TypeError("Already read"));w.bodyUsed=!0}}function f(w){return new Promise(function(S,E){w.onload=function(){S(w.result)},w.onerror=function(){E(w.error)}})}function h(w){var S=new FileReader,E=f(S);return S.readAsArrayBuffer(w),E}function p(w){var S=new FileReader,E=f(S),R=/charset=([A-Za-z0-9_-]+)/.exec(w.type),L=R?R[1]:"utf-8";return S.readAsText(w,L),E}function y(w){for(var S=new Uint8Array(w),E=new Array(S.length),R=0;R<S.length;R++)E[R]=String.fromCharCode(S[R]);return E.join("")}function _(w){if(w.slice)return w.slice(0);var S=new Uint8Array(w.byteLength);return S.set(new Uint8Array(w)),S.buffer}function b(){return this.bodyUsed=!1,this._initBody=function(w){this.bodyUsed=this.bodyUsed,this._bodyInit=w,w?typeof w=="string"?this._bodyText=w:i.blob&&Blob.prototype.isPrototypeOf(w)?this._bodyBlob=w:i.formData&&FormData.prototype.isPrototypeOf(w)?this._bodyFormData=w:i.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)?this._bodyText=w.toString():i.arrayBuffer&&i.blob&&t(w)?(this._bodyArrayBuffer=_(w.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):i.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(w)||r(w))?this._bodyArrayBuffer=_(w):this._bodyText=w=Object.prototype.toString.call(w):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof w=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):i.searchParams&&URLSearchParams.prototype.isPrototypeOf(w)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},i.blob&&(this.blob=function(){var w=l(this);if(w)return w;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var w=l(this);return w||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(i.blob)return this.blob().then(h);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var w=l(this);if(w)return w;if(this._bodyBlob)return p(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(y(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i.formData&&(this.formData=function(){return this.text().then(v)}),this.json=function(){return this.text().then(JSON.parse)},this}var m=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function g(w){var S=w.toUpperCase();return m.indexOf(S)>-1?S:w}function T(w,S){if(!(this instanceof T))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');S=S||{};var E=S.body;if(w instanceof T){if(w.bodyUsed)throw new TypeError("Already read");this.url=w.url,this.credentials=w.credentials,S.headers||(this.headers=new d(w.headers)),this.method=w.method,this.mode=w.mode,this.signal=w.signal,!E&&w._bodyInit!=null&&(E=w._bodyInit,w.bodyUsed=!0)}else this.url=String(w);if(this.credentials=S.credentials||this.credentials||"same-origin",(S.headers||!this.headers)&&(this.headers=new d(S.headers)),this.method=g(S.method||this.method||"GET"),this.mode=S.mode||this.mode||null,this.signal=S.signal||this.signal||(function(){if("AbortController"in o){var M=new AbortController;return M.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&E)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(E),(this.method==="GET"||this.method==="HEAD")&&(S.cache==="no-store"||S.cache==="no-cache")){var R=/([?&])_=[^&]*/;if(R.test(this.url))this.url=this.url.replace(R,"$1_="+new Date().getTime());else{var L=/\?/;this.url+=(L.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}T.prototype.clone=function(){return new T(this,{body:this._bodyInit})};function v(w){var S=new FormData;return w.trim().split("&").forEach(function(E){if(E){var R=E.split("="),L=R.shift().replace(/\+/g," "),M=R.join("=").replace(/\+/g," ");S.append(decodeURIComponent(L),decodeURIComponent(M))}}),S}function A(w){var S=new d,E=w.replace(/\r?\n[\t ]+/g," ");return E.split("\r").map(function(R){return R.indexOf(`
`)===0?R.substr(1,R.length):R}).forEach(function(R){var L=R.split(":"),M=L.shift().trim();if(M){var B=L.join(":").trim();try{S.append(M,B)}catch(X){console.warn("Response "+X.message)}}}),S}b.call(T.prototype);function I(w,S){if(!(this instanceof I))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(S||(S={}),this.type="default",this.status=S.status===void 0?200:S.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=S.statusText===void 0?"":""+S.statusText,this.headers=new d(S.headers),this.url=S.url||"",this._initBody(w)}b.call(I.prototype),I.prototype.clone=function(){return new I(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new d(this.headers),url:this.url})},I.error=function(){var w=new I(null,{status:200,statusText:""});return w.ok=!1,w.status=0,w.type="error",w};var q=[301,302,303,307,308];I.redirect=function(w,S){if(q.indexOf(S)===-1)throw new RangeError("Invalid status code");return new I(null,{status:S,headers:{location:w}})},n.DOMException=o.DOMException;try{new n.DOMException}catch{n.DOMException=function(S,E){this.message=S,this.name=E;var R=Error(S);this.stack=R.stack},n.DOMException.prototype=Object.create(Error.prototype),n.DOMException.prototype.constructor=n.DOMException}function O(w,S){return new Promise(function(E,R){var L=new T(w,S);if(L.signal&&L.signal.aborted)return R(new n.DOMException("Aborted","AbortError"));var M=new XMLHttpRequest;function B(){M.abort()}M.onload=function(){var ie={statusText:M.statusText,headers:A(M.getAllResponseHeaders()||"")};L.url.indexOf("file://")===0&&(M.status<200||M.status>599)?ie.status=200:ie.status=M.status,ie.url="responseURL"in M?M.responseURL:ie.headers.get("X-Request-URL");var U="response"in M?M.response:M.responseText;setTimeout(function(){E(new I(U,ie))},0)},M.onerror=function(){setTimeout(function(){R(new TypeError("Network request failed"))},0)},M.ontimeout=function(){setTimeout(function(){R(new TypeError("Network request timed out"))},0)},M.onabort=function(){setTimeout(function(){R(new n.DOMException("Aborted","AbortError"))},0)};function X(ie){try{return ie===""&&o.location.href?o.location.href:ie}catch{return ie}}if(M.open(L.method,X(L.url),!0),L.credentials==="include"?M.withCredentials=!0:L.credentials==="omit"&&(M.withCredentials=!1),"responseType"in M&&(i.blob?M.responseType="blob":i.arrayBuffer&&(M.responseType="arraybuffer")),S&&typeof S.headers=="object"&&!(S.headers instanceof d||o.Headers&&S.headers instanceof o.Headers)){var J=[];Object.getOwnPropertyNames(S.headers).forEach(function(ie){J.push(a(ie)),M.setRequestHeader(ie,c(S.headers[ie]))}),L.headers.forEach(function(ie,U){J.indexOf(U)===-1&&M.setRequestHeader(U,ie)})}else L.headers.forEach(function(ie,U){M.setRequestHeader(U,ie)});L.signal&&(L.signal.addEventListener("abort",B),M.onreadystatechange=function(){M.readyState===4&&L.signal.removeEventListener("abort",B)}),M.send(typeof L._bodyInit>"u"?null:L._bodyInit)})}return O.polyfill=!0,o.fetch||(o.fetch=O,o.Headers=d,o.Request=T,o.Response=I),n.Headers=d,n.Request=T,n.Response=I,n.fetch=O,Object.defineProperty(n,"__esModule",{value:!0}),n})({})})(typeof self<"u"?self:W4)})()),W4}var Y4={},l$;function kw(){return l$||(l$=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.ERROR_CODES=u.ErrorCoded=void 0;class n extends Error{constructor(i,t){super(i),this.code=t}}u.ErrorCoded=n,(function(o){o.COLLIDING_KEYWORDS="colliding keywords",o.CONFLICTING_INDEXES="conflicting indexes",o.CYCLIC_IRI_MAPPING="cyclic IRI mapping",o.INVALID_ID_VALUE="invalid @id value",o.INVALID_INDEX_VALUE="invalid @index value",o.INVALID_NEST_VALUE="invalid @nest value",o.INVALID_PREFIX_VALUE="invalid @prefix value",o.INVALID_PROPAGATE_VALUE="invalid @propagate value",o.INVALID_REVERSE_VALUE="invalid @reverse value",o.INVALID_IMPORT_VALUE="invalid @import value",o.INVALID_VERSION_VALUE="invalid @version value",o.INVALID_BASE_IRI="invalid base IRI",o.INVALID_CONTAINER_MAPPING="invalid container mapping",o.INVALID_CONTEXT_ENTRY="invalid context entry",o.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",o.INVALID_DEFAULT_LANGUAGE="invalid default language",o.INVALID_INCLUDED_VALUE="invalid @included value",o.INVALID_IRI_MAPPING="invalid IRI mapping",o.INVALID_JSON_LITERAL="invalid JSON literal",o.INVALID_KEYWORD_ALIAS="invalid keyword alias",o.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",o.INVALID_LANGUAGE_MAPPING="invalid language mapping",o.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",o.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",o.INVALID_LOCAL_CONTEXT="invalid local context",o.INVALID_REMOTE_CONTEXT="invalid remote context",o.INVALID_REVERSE_PROPERTY="invalid reverse property",o.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",o.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",o.INVALID_SCOPED_CONTEXT="invalid scoped context",o.INVALID_SCRIPT_ELEMENT="invalid script element",o.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",o.INVALID_TERM_DEFINITION="invalid term definition",o.INVALID_TYPE_MAPPING="invalid type mapping",o.INVALID_TYPE_VALUE="invalid type value",o.INVALID_TYPED_VALUE="invalid typed value",o.INVALID_VALUE_OBJECT="invalid value object",o.INVALID_VALUE_OBJECT_VALUE="invalid value object value",o.INVALID_VOCAB_MAPPING="invalid vocab mapping",o.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",o.KEYWORD_REDEFINITION="keyword redefinition",o.LOADING_DOCUMENT_FAILED="loading document failed",o.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",o.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",o.PROCESSING_MODE_CONFLICT="processing mode conflict",o.PROTECTED_TERM_REDEFINITION="protected term redefinition",o.CONTEXT_OVERFLOW="context overflow",o.INVALID_BASE_DIRECTION="invalid base direction",o.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",o.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",o.INVALID_EMBEDDED_NODE="invalid embedded node",o.INVALID_ANNOTATION="invalid annotation"})(u.ERROR_CODES||(u.ERROR_CODES={}))})(Y4)),Y4}var nm={},f$;function PJ(){if(f$)return nm;f$=1,Object.defineProperty(nm,"__esModule",{value:!0}),nm.FetchDocumentLoader=void 0,NJ();const u=kw(),n=Dv(),o=cr();let i=class{constructor(e){this.fetcher=e}async load(e){const r=await(this.fetcher||fetch)(e,{headers:new Headers({accept:"application/ld+json"})});if(r.ok&&r.headers){let a=r.headers.get("Content-Type");if(a){const c=a.indexOf(";");c>0&&(a=a.substr(0,c))}if(a==="application/ld+json")return await r.json();if(r.headers.has("Link")){let c;if(r.headers.forEach((s,d)=>{if(d==="link"){const l=(0,n.parse)(s);for(const f of l.get("type","application/ld+json"))if(f.rel==="alternate"){if(c)throw new Error("Multiple JSON-LD alternate links were found on "+e);c=(0,o.resolve)(f.uri,e)}}}),c)return this.load(c)}throw new u.ErrorCoded(`Unsupported JSON-LD media type ${a}`,u.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(r.statusText||`Status code: ${r.status}`)}};return nm.FetchDocumentLoader=i,nm}var Z4={},im={},h$;function ZO(){if(h$)return im;h$=1,Object.defineProperty(im,"__esModule",{value:!0}),im.Util=void 0;let u=class Ai{static isCompactIri(o){return o.indexOf(":")>0&&!(o&&o[0]==="#")}static getPrefix(o,i){if(o&&o[0]==="#")return null;const t=o.indexOf(":");if(t>=0){if(o.length>t+1&&o.charAt(t+1)==="/"&&o.charAt(t+2)==="/")return null;const e=o.substr(0,t);if(e==="_")return null;if(i[e])return e}return null}static getContextValueId(o){if(o===null||typeof o=="string")return o;const i=o["@id"];return i||null}static isSimpleTermDefinitionPrefix(o,i){return!Ai.isPotentialKeyword(o)&&(i.allowPrefixNonGenDelims||typeof o=="string"&&(o[0]==="_"||Ai.isPrefixIriEndingWithGenDelim(o)))}static isPotentialKeyword(o){return typeof o=="string"&&Ai.KEYWORD_REGEX.test(o)}static isPrefixIriEndingWithGenDelim(o){return Ai.ENDS_WITH_GEN_DELIM.test(o)}static isPrefixValue(o){return o&&(typeof o=="string"||o&&typeof o=="object")}static isValidIri(o){return!!(o&&Ai.IRI_REGEX.test(o))}static isValidIriWeak(o){return!!o&&o[0]!==":"&&Ai.IRI_REGEX_WEAK.test(o)}static isValidKeyword(o){return Ai.VALID_KEYWORDS[o]}static isTermProtected(o,i){const t=o[i];return typeof t!="string"&&t&&t["@protected"]}static hasProtectedTerms(o){for(const i of Object.keys(o))if(Ai.isTermProtected(o,i))return!0;return!1}static isReservedInternalKeyword(o){return o.startsWith("@__")}static deepEqual(o,i){const t=Object.keys(o),e=Object.keys(i);return t.length!==e.length?!1:t.every(r=>{const a=o[r],c=i[r];return a===c||a!==null&&c!==null&&typeof a=="object"&&typeof c=="object"&&this.deepEqual(a,c)})}};return u.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,u.IRI_REGEX_WEAK=/(?::[^:])|\//,u.KEYWORD_REGEX=/^@[a-z]+$/i,u.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,u.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,u.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,u.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},u.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],u.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],u.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],u.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],u.CONTAINERS_1_0=["@list","@set","@index"],im.Util=u,im}var p$;function DJ(){return p$||(p$=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.defaultExpandOptions=u.JsonLdContextNormalized=void 0;const n=cr(),o=kw(),i=ZO();class t{constructor(r){this.contextRaw=r}getContextRaw(){return this.contextRaw}expandTerm(r,a,c=u.defaultExpandOptions){const s=this.contextRaw[r];if(s===null||s&&s["@id"]===null)return null;let d=!0;if(s&&a){const _=i.Util.getContextValueId(s);if(_&&_!==r)if(typeof _!="string"||!i.Util.isValidIri(_)&&!i.Util.isValidKeyword(_))i.Util.isPotentialKeyword(_)||(d=!1);else return _}const l=i.Util.getPrefix(r,this.contextRaw),f=this.contextRaw["@vocab"],h=(!!f||f==="")&&f.indexOf(":")<0,p=this.contextRaw["@base"],y=i.Util.isPotentialKeyword(r);if(l){const _=this.contextRaw[l],b=i.Util.getContextValueId(_);if(b){if(typeof _=="string"||!c.allowPrefixForcing){if(!i.Util.isSimpleTermDefinitionPrefix(b,c))return r}else if(b[0]!=="_"&&!y&&!_["@prefix"]&&!(r in this.contextRaw))return r;return b+r.substr(l.length+1)}}else if(a&&(f||f===""||c.allowVocabRelativeToBase&&p&&h)&&!y&&!i.Util.isCompactIri(r))if(h){if(c.allowVocabRelativeToBase)return(f||p?(0,n.resolve)(f,p):"")+r;throw new o.ErrorCoded(`Relative vocab expansion for term '${r}' with vocab '${f}' is not allowed.`,o.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return f+r;else if(!a&&p&&!y&&!i.Util.isCompactIri(r))return(0,n.resolve)(r,p);if(d)return r;throw new o.ErrorCoded(`Invalid IRI mapping found for context entry '${r}': '${JSON.stringify(s)}'`,o.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(r,a){if(a&&this.contextRaw["@vocab"]&&r.startsWith(this.contextRaw["@vocab"]))return r.substr(this.contextRaw["@vocab"].length);if(!a&&this.contextRaw["@base"]&&r.startsWith(this.contextRaw["@base"]))return r.substr(this.contextRaw["@base"].length);const c={prefix:"",suffix:r};for(const s in this.contextRaw){const d=this.contextRaw[s];if(d&&!i.Util.isPotentialKeyword(s)){const l=i.Util.getContextValueId(d);if(r.startsWith(l)){const f=r.substr(l.length);if(f)f.length<c.suffix.length&&(c.prefix=s,c.suffix=f);else if(a)return s}}}return c.prefix?c.prefix+":"+c.suffix:r}}u.JsonLdContextNormalized=t,u.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}})(Z4)),Z4}var b$;function Dde(){if(b$)return rm;b$=1,Object.defineProperty(rm,"__esModule",{value:!0}),rm.ContextParser=void 0,NJ();const u=cr(),n=kw(),o=PJ(),i=DJ(),t=ZO();let e=class Dl{constructor(a){a=a||{},this.documentLoader=a.documentLoader||new o.FetchDocumentLoader,this.documentCache={},this.validateContext=!a.skipValidation,this.expandContentTypeToBase=!!a.expandContentTypeToBase,this.remoteContextsDepthLimit=a.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in a?!!a.redirectSchemaOrgHttps:!0}static validateLanguage(a,c,s){if(typeof a!="string")throw new n.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(a)}'`,s);if(!t.Util.REGEX_LANGUAGE_TAG.test(a)){if(c)throw new n.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(a)}'`,s);return!1}return!0}static validateDirection(a,c){if(typeof a!="string")throw new n.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(a)}'`,n.ERROR_CODES.INVALID_BASE_DIRECTION);if(!t.Util.REGEX_DIRECTION_TAG.test(a)){if(c)throw new n.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(a)}'`,n.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(a){for(const c of Object.keys(a)){let s=a[c];if(s&&typeof s=="object"&&s["@reverse"]&&!s["@id"]){if(typeof s["@reverse"]!="string"||t.Util.isValidKeyword(s["@reverse"]))throw new n.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${s["@reverse"]}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);s=a[c]=Object.assign(Object.assign({},s),{"@id":s["@reverse"]}),s["@id"]=s["@reverse"],t.Util.isPotentialKeyword(s["@reverse"])?delete s["@reverse"]:s["@reverse"]=!0}}return a}expandPrefixedTerms(a,c,s){const d=a.getContextRaw();for(const l of s||Object.keys(d))if(t.Util.EXPAND_KEYS_BLACKLIST.indexOf(l)<0&&!t.Util.isReservedInternalKeyword(l)){const f=d[l];if(t.Util.isPotentialKeyword(l)&&t.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(l)>=0&&(l!=="@type"||typeof d[l]=="object"&&!(d[l]["@protected"]||d[l]["@container"]==="@set")))throw new n.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${l} to ${JSON.stringify(f)}`,n.ERROR_CODES.KEYWORD_REDEFINITION);if(t.Util.ALIAS_RANGE_BLACKLIST.indexOf(t.Util.getContextValueId(f))>=0)throw new n.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${l} to ${JSON.stringify(f)}`,n.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(f&&t.Util.isPotentialKeyword(t.Util.getContextValueId(f))&&f["@prefix"]===!0)throw new n.ErrorCoded(`Tried to use keyword aliases as prefix: '${l}': '${JSON.stringify(f)}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);for(;t.Util.isPrefixValue(d[l]);){const h=d[l];let p=!1;if(typeof h=="string")d[l]=a.expandTerm(h,!0),p=p||h!==d[l];else{const y=h["@id"],_=h["@type"],b=!("@prefix"in h)||t.Util.isValidIri(l);if("@id"in h)y!=null&&typeof y=="string"&&(d[l]=Object.assign(Object.assign({},d[l]),{"@id":a.expandTerm(y,!0)}),p=p||y!==d[l]["@id"]);else if(!t.Util.isPotentialKeyword(l)&&b){const m=a.expandTerm(l,!0);m!==l&&(d[l]=Object.assign(Object.assign({},d[l]),{"@id":m}),p=!0)}if(_&&typeof _=="string"&&_!=="@vocab"&&(!h["@container"]||!h["@container"]["@type"])&&b){let m=a.expandTerm(_,!0);c&&_===m&&(m=a.expandTerm(_,!1)),m!==_&&(p=!0,d[l]=Object.assign(Object.assign({},d[l]),{"@type":m}))}}if(!p)break}}}normalize(a,{processingMode:c,normalizeLanguageTags:s}){if(s||c===1)for(const d of Object.keys(a))if(d==="@language"&&typeof a[d]=="string")a[d]=a[d].toLowerCase();else{const l=a[d];if(l&&typeof l=="object"&&typeof l["@language"]=="string"){const f=l["@language"].toLowerCase();f!==l["@language"]&&(a[d]=Object.assign(Object.assign({},l),{"@language":f}))}}}containersToHash(a){for(const c of Object.keys(a)){const s=a[c];if(s&&typeof s=="object"){if(typeof s["@container"]=="string")a[c]=Object.assign(Object.assign({},s),{"@container":{[s["@container"]]:!0}});else if(Array.isArray(s["@container"])){const d={};for(const l of s["@container"])d[l]=!0;a[c]=Object.assign(Object.assign({},s),{"@container":d})}}}}applyScopedProtected(a,{processingMode:c},s){if(c&&c>=1.1&&a["@protected"]){for(const d of Object.keys(a))if(!t.Util.isReservedInternalKeyword(d)&&!t.Util.isPotentialKeyword(d)&&!t.Util.isTermProtected(a,d)){const l=a[d];l&&typeof l=="object"?"@protected"in a[d]||(a[d]=Object.assign(Object.assign({},a[d]),{"@protected":!0})):(a[d]={"@id":l,"@protected":!0},t.Util.isSimpleTermDefinitionPrefix(l,s)&&(a[d]=Object.assign(Object.assign({},a[d]),{"@prefix":!0})))}delete a["@protected"]}}validateKeywordRedefinitions(a,c,s,d){for(const l of d??Object.keys(c))if(t.Util.isTermProtected(a,l)&&(typeof c[l]=="string"?c[l]={"@id":c[l],"@protected":!0}:c[l]=Object.assign(Object.assign({},c[l]),{"@protected":!0}),!t.Util.deepEqual(a[l],c[l])))throw new n.ErrorCoded(`Attempted to override the protected keyword ${l} from ${JSON.stringify(t.Util.getContextValueId(a[l]))} to ${JSON.stringify(t.Util.getContextValueId(c[l]))}`,n.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(a,{processingMode:c}){for(const s of Object.keys(a)){if(t.Util.isReservedInternalKeyword(s))continue;if(s==="")throw new n.ErrorCoded(`The empty term is not allowed, got: '${s}': '${JSON.stringify(a[s])}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);const d=a[s],l=typeof d;if(t.Util.isPotentialKeyword(s)){switch(s.substr(1)){case"vocab":if(d!==null&&l!=="string")throw new n.ErrorCoded(`Found an invalid @vocab IRI: ${d}`,n.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(d!==null&&l!=="string")throw new n.ErrorCoded(`Found an invalid @base IRI: ${a[s]}`,n.ERROR_CODES.INVALID_BASE_IRI);break;case"language":d!==null&&Dl.validateLanguage(d,!0,n.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(d!==null&&l!=="number")throw new n.ErrorCoded(`Found an invalid @version number: ${d}`,n.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":d!==null&&Dl.validateDirection(d,!0);break;case"propagate":if(c===1)throw new n.ErrorCoded(`Found an illegal @propagate keyword: ${d}`,n.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(d!==null&&l!=="boolean")throw new n.ErrorCoded(`Found an invalid @propagate value: ${d}`,n.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(t.Util.isValidKeyword(s)&&t.Util.isValidKeyword(t.Util.getContextValueId(d)))throw new n.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${t.Util.getContextValueId(d)}'`,n.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(d!==null)switch(l){case"string":if(t.Util.getPrefix(d,a)===s)throw new n.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.CYCLIC_IRI_MAPPING);if(t.Util.isValidIriWeak(s)){if(d==="@type")throw new n.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${d}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.isValidIri(d)&&d!==new i.JsonLdContextNormalized(a).expandTerm(s))throw new n.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${d}'`,n.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!t.Util.isCompactIri(s)&&!("@id"in d)&&(d["@type"]==="@id"?!a["@base"]:!a["@vocab"]))throw new n.ErrorCoded(`Missing @id in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);for(const f of Object.keys(d)){const h=d[f];if(h)switch(f){case"@id":if(t.Util.isValidKeyword(h)&&h!=="@type"&&h!=="@id"&&h!=="@graph"&&h!=="@nest")throw new n.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.isValidIriWeak(s)){if(h==="@type")throw new n.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.isValidIri(h)&&h!==new i.JsonLdContextNormalized(a).expandTerm(s))throw new n.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof h!="string")throw new n.ErrorCoded(`Detected non-string @id in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_IRI_MAPPING);if(t.Util.getPrefix(h,a)===s)throw new n.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(d["@container"]==="@type"&&h!=="@id"&&h!=="@vocab")throw new n.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${s}': '${h}'`,n.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof h!="string")throw new n.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(l)}'`,n.ERROR_CODES.INVALID_TYPE_MAPPING);if(h!=="@id"&&h!=="@vocab"&&(c===1||h!=="@json")&&(c===1||h!=="@none")&&(h[0]==="_"||!t.Util.isValidIri(h)))throw new n.ErrorCoded(`A context @type must be an absolute IRI, found: '${s}': '${h}'`,n.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof h=="string"&&d["@id"]&&d["@id"]!==h)throw new n.ErrorCoded(`Found non-matching @id and @reverse term values in '${s}':'${h}' and '${d["@id"]}'`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in d)throw new n.ErrorCoded(`@nest is not allowed in the reverse property '${s}'`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(c===1&&(Object.keys(h).length>1||t.Util.CONTAINERS_1_0.indexOf(Object.keys(h)[0])<0))throw new n.ErrorCoded(`Invalid term @container for '${s}' ('${Object.keys(h)}') in 1.0, must be only one of ${t.Util.CONTAINERS_1_0.join(", ")}`,n.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const p of Object.keys(h)){if(p==="@list"&&d["@reverse"])throw new n.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${s}'`,n.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(t.Util.CONTAINERS.indexOf(p)<0)throw new n.ErrorCoded(`Invalid term @container for '${s}' ('${p}'), must be one of ${t.Util.CONTAINERS.join(", ")}`,n.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":Dl.validateLanguage(h,!0,n.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":Dl.validateDirection(h,!0);break;case"@prefix":if(h!==null&&typeof h!="boolean")throw new n.ErrorCoded(`Found an invalid term @prefix boolean in: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in d)&&!t.Util.isValidIri(s))throw new n.ErrorCoded(`Invalid @prefix definition for '${s}' ('${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(c===1||!d["@container"]||!d["@container"]["@index"])throw new n.ErrorCoded(`Attempt to add illegal key to value object: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(t.Util.isPotentialKeyword(h)&&h!=="@nest")throw new n.ErrorCoded(`Found an invalid term @nest value in: '${s}': '${JSON.stringify(d)}'`,n.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new n.ErrorCoded(`Found an invalid term value: '${s}': '${d}'`,n.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(a,c,s){return typeof a=="string"||(s&&!("@base"in a)&&c.parentContext&&typeof c.parentContext=="object"&&"@base"in c.parentContext&&(a["@base"]=c.parentContext["@base"],c.parentContext["@__baseDocument"]&&(a["@__baseDocument"]=!0)),c.baseIRI&&!c.external&&("@base"in a?a["@base"]!==null&&typeof a["@base"]=="string"&&!t.Util.isValidIri(a["@base"])&&(a["@base"]=(0,u.resolve)(a["@base"],c.parentContext&&c.parentContext["@base"]||c.baseIRI)):(a["@base"]=c.baseIRI,a["@__baseDocument"]=!0))),a}normalizeContextIri(a,c){if(!t.Util.isValidIri(a))try{a=(0,u.resolve)(a,c)}catch{throw new Error(`Invalid context IRI: ${a}`)}return this.redirectSchemaOrgHttps&&a.startsWith("http://schema.org")&&(a="https://schema.org/"),a}async parseInnerContexts(a,c,s){for(const d of s??Object.keys(a)){const l=a[d];if(l&&typeof l=="object"&&"@context"in l&&l["@context"]!==null&&!c.ignoreScopedContexts){if(this.validateContext)try{const f=Object.assign(Object.assign({},a),{[d]:Object.assign({},a[d])});delete f[d]["@context"],await this.parse(l["@context"],Object.assign(Object.assign({},c),{external:!1,parentContext:f,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(f){throw new n.ErrorCoded(f.message,n.ERROR_CODES.INVALID_SCOPED_CONTEXT)}a[d]=Object.assign(Object.assign({},l),{"@context":(await this.parse(l["@context"],Object.assign(Object.assign({},c),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:a}))).getContextRaw()})}}return a}async parse(a,c={},s={}){const{baseIRI:d,parentContext:l,external:f,processingMode:h=Dl.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:p,ignoreProtection:y,minimalProcessing:_}=c,b=c.remoteContexts||{};if(Object.keys(b).length>=this.remoteContextsDepthLimit)throw new n.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(b),n.ERROR_CODES.CONTEXT_OVERFLOW);if(a==null){if(!y&&l&&t.Util.hasProtectedTerms(l))throw new n.ErrorCoded("Illegal context nullification when terms are protected",n.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new i.JsonLdContextNormalized(this.applyBaseEntry({},c,!1))}else if(typeof a=="string"){const m=this.normalizeContextIri(a,d),g=this.getOverriddenLoad(m,c);if(g)return new i.JsonLdContextNormalized(g);const T=await this.parse(await this.load(m),Object.assign(Object.assign({},c),{baseIRI:m,external:!0,remoteContexts:Object.assign(Object.assign({},b),{[m]:!0})}));return this.applyBaseEntry(T.getContextRaw(),c,!0),T}else if(Array.isArray(a)){const m=[],g=await Promise.all(a.map((v,A)=>{if(typeof v=="string"){const I=this.normalizeContextIri(v,d);m[A]=I;const q=this.getOverriddenLoad(I,c);return q||this.load(I)}else return v}));if(_)return new i.JsonLdContextNormalized(g);const T=await g.reduce((v,A,I)=>v.then(q=>this.parse(A,Object.assign(Object.assign({},c),{baseIRI:m[I]||c.baseIRI,external:!!m[I]||c.external,parentContext:q.getContextRaw(),remoteContexts:m[I]?Object.assign(Object.assign({},b),{[m[I]]:!0}):b}),{skipValidation:I<g.length-1})),Promise.resolve(new i.JsonLdContextNormalized(l||{})));return this.applyBaseEntry(T.getContextRaw(),c,!0),T}else if(typeof a=="object"){if("@context"in a)return await this.parse(a["@context"],c);if(a=Object.assign({},a),f&&delete a["@base"],this.applyBaseEntry(a,c,!0),this.containersToHash(a),_)return new i.JsonLdContextNormalized(a);let m={};if("@import"in a)if(h>=1.1){if(typeof a["@import"]!="string")throw new n.ErrorCoded("An @import value must be a string, but got "+typeof a["@import"],n.ERROR_CODES.INVALID_IMPORT_VALUE);m=await this.loadImportContext(this.normalizeContextIri(a["@import"],d)),delete a["@import"]}else throw new n.ErrorCoded("Context importing is not supported in JSON-LD 1.0",n.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(m,{processingMode:h},i.defaultExpandOptions);const g=Object.assign(m,a);this.idifyReverseTerms(g),this.normalize(g,{processingMode:h,normalizeLanguageTags:p}),this.applyScopedProtected(g,{processingMode:h},i.defaultExpandOptions);const T=Object.keys(g),v=[];if(typeof l=="object")for(const I in l)I in g?v.push(I):g[I]=l[I];await this.parseInnerContexts(g,c,T);const A=new i.JsonLdContextNormalized(g);return(g&&g["@version"]||Dl.DEFAULT_PROCESSING_MODE)>=1.1&&(a["@vocab"]&&typeof a["@vocab"]=="string"||a["@vocab"]==="")&&(l&&"@vocab"in l&&a["@vocab"].indexOf(":")<0?g["@vocab"]=l["@vocab"]+a["@vocab"]:(t.Util.isCompactIri(a["@vocab"])||a["@vocab"]in g)&&(g["@vocab"]=A.expandTerm(a["@vocab"],!0))),this.expandPrefixedTerms(A,this.expandContentTypeToBase,T),!y&&l&&h>=1.1&&this.validateKeywordRedefinitions(l,g,i.defaultExpandOptions,v),this.validateContext&&!s.skipValidation&&this.validate(g,{processingMode:h}),A}else throw new n.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${a}`,n.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(a){const c=this.documentCache[a];if(c)return c;let s;try{s=await this.documentLoader.load(a)}catch(d){throw new n.ErrorCoded(`Failed to load remote context ${a}: ${d.message}`,n.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in s))throw new n.ErrorCoded(`Missing @context in remote context at ${a}`,n.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[a]=s["@context"]}getOverriddenLoad(a,c){if(a in(c.remoteContexts||{})){if(c.ignoreRemoteScopedContexts)return a;throw new n.ErrorCoded("Detected a cyclic context inclusion of "+a,n.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(a){let c=await this.load(a);if(typeof c!="object"||Array.isArray(c))throw new n.ErrorCoded("An imported context must be a single object: "+a,n.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in c)throw new n.ErrorCoded("An imported context can not import another context: "+a,n.ERROR_CODES.INVALID_CONTEXT_ENTRY);return c=Object.assign({},c),this.containersToHash(c),c}};return e.DEFAULT_PROCESSING_MODE=1.1,rm.ContextParser=e,rm}var eA={},y$;function jde(){return y$||(y$=1,Object.defineProperty(eA,"__esModule",{value:!0})),eA}var tA={},_$;function Lde(){return _$||(_$=1,Object.defineProperty(tA,"__esModule",{value:!0})),tA}var g$;function Mde(){return g$||(g$=1,(function(u){var n=Jc&&Jc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Jc&&Jc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Dde(),u),o(kw(),u),o(PJ(),u),o(jde(),u),o(Lde(),u),o(DJ(),u),o(ZO(),u)})(Jc)),Jc}var m$;function LJ(){if(m$)return tm;m$=1,Object.defineProperty(tm,"__esModule",{value:!0}),tm.DocumentLoaderMediated=void 0;const u=Pi(),n=Jf(),o=Mde();let i=class jJ extends o.FetchDocumentLoader{constructor(e,r){super(jJ.createFetcher(e,r)),this.mediatorHttp=e,this.context=r}static createFetcher(e,r){return async(a,c)=>{const s=await e.mediate({input:a,init:c,context:r});return s.json=async()=>JSON.parse(await(0,n.stringify)(u.ActorHttp.toNodeReadable(s.body))),s}}};return tm.DocumentLoaderMediated=i,tm}var v$;function Cde(){if(v$)return Rg;v$=1,Object.defineProperty(Rg,"__esModule",{value:!0}),Rg.ActorRdfParseJsonLd=void 0;const u=zf(),n=Ce(),o=be(),i=Pde(),t=LJ();let e=class extends u.ActorRdfParseFixedMediaTypes{constructor(a){super(a)}async testHandle(a,c,s){return s.has(n.KeysRdfParseHtmlScript.processingHtmlScript)&&c!=="application/ld+json"?(0,o.failTest)("JSON-LD in script tags can only have media type 'application/ld+json'"):!c||!(c in this.mediaTypePriorities||c.endsWith("+json"))?(0,o.failTest)(`Unrecognized media type: ${c}`):await this.testHandleChecked(a)}async runHandle(a,c,s){var h;const d=a.context.getSafe(n.KeysInitQuery.dataFactory);return{data:i.JsonLdParser.fromHttpResponse(((h=a.metadata)==null?void 0:h.baseIRI)??"",c,a.headers,{dataFactory:d,documentLoader:s.get(n.KeysRdfParseJsonLd.documentLoader)??new t.DocumentLoaderMediated(this.mediatorHttp,s),strictValues:s.get(n.KeysRdfParseJsonLd.strictValues),...s.get(n.KeysRdfParseJsonLd.parserOptions)}).import(a.data)}}};return Rg.ActorRdfParseJsonLd=e,Rg}var T$;function qde(){return T$||(T$=1,(function(u){var n=Gc&&Gc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Gc&&Gc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Cde(),u),o(LJ(),u)})(Gc)),Gc}var kc={},am={},Kc={},um={},w$;function Bde(){if(w$)return um;w$=1,Object.defineProperty(um,"__esModule",{value:!0}),um.ActorRdfUpdateHypermedia=void 0;const u=be();let n=class extends u.Actor{constructor(i,t){super(i),this.destinationType=t}async test(i){return i.forceDestinationType&&this.destinationType!==i.forceDestinationType?(0,u.failTest)(`Actor ${this.name} is not able to handle destination type ${i.forceDestinationType}.`):this.testMetadata(i)}};return um.ActorRdfUpdateHypermedia=n,um}var S$;function eE(){return S$||(S$=1,(function(u){var n=Kc&&Kc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Kc&&Kc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Bde(),u)})(Kc)),Kc}var om={},A$;function MJ(){if(A$)return om;A$=1,Object.defineProperty(om,"__esModule",{value:!0}),om.QuadDestinationPatchSparqlUpdate=void 0;const u=Pi(),n=pt(),o=Lv(),i=Dt();let t=class{constructor(r,a,c){this.url=r,this.context=a,this.mediatorHttp=c}async update(r){const a=this.createCombinedQuadsQuery(r.insert,r.delete);await this.wrapSparqlUpdateRequest(a)}createCombinedQuadsQuery(r,a){return new n.ArrayIterator([],{autoStart:!1}).append(this.createQuadsQuery("DELETE",a)).append(a&&r?[` ;
`]:[]).append(this.createQuadsQuery("INSERT",r))}createQuadsQuery(r,a){return a?a.map(c=>{let s=`${(0,o.termToString)(c.subject)} ${(0,o.termToString)(c.predicate)} ${(0,o.termToString)(c.object)} .`;return c.graph.termType==="DefaultGraph"?s=`  ${s}
`:s=`  GRAPH ${(0,o.termToString)(c.graph)} { ${s} }
`,s}).prepend([`${r} DATA {
`]).append(["}"]):new n.ArrayIterator([],{autoStart:!1})}async wrapSparqlUpdateRequest(r){const a=new i.Readable;a.wrap(r);const c=new Headers({"content-type":"application/sparql-update"}),s=await this.mediatorHttp.mediate({context:this.context,init:{headers:c,method:"PATCH",body:u.ActorHttp.toWebReadableStream(a)},input:this.url});await(0,u.validateAndCloseHttpResponse)(this.url,s)}async deleteGraphs(r,a,c){throw new Error("Patch-based SPARQL Update destinations don't support named graphs")}async createGraphs(r,a){throw new Error("Patch-based SPARQL Update destinations don't support named graphs")}};return om.QuadDestinationPatchSparqlUpdate=t,om}var O$;function $de(){if(O$)return am;O$=1,Object.defineProperty(am,"__esModule",{value:!0}),am.ActorRdfUpdateHypermediaPatchSparqlUpdate=void 0;const u=eE(),n=be(),o=MJ();let i=class extends u.ActorRdfUpdateHypermedia{constructor(e){super(e,"patchSparqlUpdate")}async testMetadata(e){return!e.forceDestinationType&&!e.metadata.patchSparqlUpdate?(0,n.failTest)(`Actor ${this.name} could not detect a destination with 'application/sparql-update' as 'Accept-Patch' header.`):!e.forceDestinationType&&!e.exists?(0,n.failTest)(`Actor ${this.name} can only patch a destination that already exists.`):(0,n.passTestVoid)()}async run(e){return this.logInfo(e.context,`Identified as patchSparqlUpdate destination: ${e.url}`),{destination:new o.QuadDestinationPatchSparqlUpdate(e.url,e.context,this.mediatorHttp)}}};return am.ActorRdfUpdateHypermediaPatchSparqlUpdate=i,am}var E$;function Ude(){return E$||(E$=1,(function(u){var n=kc&&kc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=kc&&kc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o($de(),u),o(MJ(),u)})(kc)),kc}var Wc={},sm={},cm={},x$;function CJ(){if(x$)return cm;x$=1,Object.defineProperty(cm,"__esModule",{value:!0}),cm.QuadDestinationPutLdp=void 0;const u=Pi();let n=class{constructor(i,t,e,r,a,c){this.url=i,this.context=t,this.mediaTypes=e,this.mediatorHttp=r,this.mediatorRdfSerializeMediatypes=a,this.mediatorRdfSerialize=c}async update(i){if(i.delete)throw new Error("Put-based LDP destinations don't support deletions");i.insert&&await this.wrapRdfUpdateRequest("INSERT",i.insert)}async wrapRdfUpdateRequest(i,t){const{mediaTypes:e}=await this.mediatorRdfSerializeMediatypes.mediate({context:this.context,mediaTypes:!0}),r=this.mediaTypes.filter(l=>l in e),a=r.length>0?r[0]:Object.keys(e).sort((l,f)=>e[f]-e[l])[0],{handle:{data:c}}=await this.mediatorRdfSerialize.mediate({context:this.context,handle:{quadStream:t,context:this.context},handleMediaType:a}),s=new Headers({"content-type":a}),d=await this.mediatorHttp.mediate({context:this.context,init:{headers:s,method:"PUT",body:u.ActorHttp.toWebReadableStream(c)},input:this.url});await(0,u.validateAndCloseHttpResponse)(this.url,d)}async deleteGraphs(i,t,e){throw new Error("Put-based LDP destinations don't support named graphs")}async createGraphs(i,t){throw new Error("Put-based LDP destinations don't support named graphs")}};return cm.QuadDestinationPutLdp=n,cm}var I$;function Vde(){if(I$)return sm;I$=1,Object.defineProperty(sm,"__esModule",{value:!0}),sm.ActorRdfUpdateHypermediaPutLdp=void 0;const u=eE(),n=be(),o=CJ();let i=class extends u.ActorRdfUpdateHypermedia{constructor(e){super(e,"putLdp")}async testMetadata(e){if(!e.forceDestinationType){if(!e.metadata.allowHttpMethods||!e.metadata.allowHttpMethods.includes("PUT"))return(0,n.failTest)(`Actor ${this.name} could not detect a destination with 'Allow: PUT' header.`);if(e.exists)return(0,n.failTest)(`Actor ${this.name} can only put on a destination that does not already exists.`)}return(0,n.passTestVoid)()}async run(e){return this.logInfo(e.context,`Identified as putLdp destination: ${e.url}`),{destination:new o.QuadDestinationPutLdp(e.url,e.context,e.metadata.putAccepted||[],this.mediatorHttp,this.mediatorRdfSerializeMediatypes,this.mediatorRdfSerialize)}}};return sm.ActorRdfUpdateHypermediaPutLdp=i,sm}var R$;function Qde(){return R$||(R$=1,(function(u){var n=Wc&&Wc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Wc&&Wc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Vde(),u),o(CJ(),u)})(Wc)),Wc}var Yc={},dm={},lm={},Zc={},ed={},td={},fm={},F$;function Hde(){if(F$)return fm;F$=1,Object.defineProperty(fm,"__esModule",{value:!0}),fm.SparqlXmlParser=void 0;const u=hr(),n=NX(),o=Dt();let i=class{constructor(e){e=e||{},this.dataFactory=e.dataFactory||new u.DataFactory,this.prefixVariableQuestionMark=!!e.prefixVariableQuestionMark}parseXmlResultsStream(e){const r=g=>m.emit("error",g);e.on("error",r);const a=new n.SaxesParser,c=[];let s=!1,d=!1;const l=[];let f={},h="",p="",y,_="",b=[];a.on("error",r),a.on("opentag",g=>{g.name==="variable"&&this.stackEquals(c,["sparql","head"])?l.push(this.dataFactory.variable(g.attributes.name)):g.name==="results"&&this.stackEquals(c,["sparql"])?d=!0:g.name==="result"&&this.stackEquals(c,["sparql","results"])?f={}:g.name==="binding"&&this.stackEquals(c,["sparql","results","result"])?(h=g.attributes.name||"",p="",y="",_="",b=[]):g.name==="triple"&&this.stackBeginsWith(c,["sparql","results","result"])?b.push({components:{}}):c[c.length-1]==="triple"&&this.stackBeginsWith(c,["sparql","results","result","binding"])?(p="",y="",_="",["subject","predicate","object"].includes(g.name)?b[b.length-1].currentComponent=g.name:r(new Error(`Illegal quoted triple component '${g.name}' found on line ${a.line+1}`))):this.stackBeginsWith(c,["sparql","results","result","binding"])&&(p=g.name,"xml:lang"in g.attributes?y=g.attributes["xml:lang"]:"datatype"in g.attributes?y=this.dataFactory.namedNode(g.attributes.datatype):y=void 0),c.push(g.name)}),a.on("closetag",g=>{if(this.stackEquals(c,["sparql","head"])&&(m.emit("variables",l),s=!0),this.stackEquals(c,["sparql","results","result"])&&m.push(f),this.stackBeginsWith(c,["sparql","results","result","binding"])){let T;if(!h&&p)r(new Error(`Terms should have a name on line ${a.line+1}`));else if(p==="uri")T=this.dataFactory.namedNode(_);else if(p==="bnode")T=this.dataFactory.blankNode(_);else if(p==="literal")T=this.dataFactory.literal(_,y);else if(c[c.length-1]==="triple"){const v=b.pop();v&&v.components.subject&&v.components.predicate&&v.components.object?T=this.dataFactory.quad(v.components.subject,v.components.predicate,v.components.object):r(new Error(`Incomplete quoted triple on line ${a.line+1}`))}else p&&r(new Error(`Invalid term type '${p}' on line ${a.line+1}`));if(T)if(b.length>0){const v=b[b.length-1];v.components[v.currentComponent]&&r(new Error(`The ${v.currentComponent} in a quoted triple on line ${a.line+1} was already defined before`)),v.components[v.currentComponent]=T}else{const v=this.prefixVariableQuestionMark?"?"+h:h;f[v]=T}p=void 0}c.pop()}),a.on("text",g=>{this.stackBeginsWith(c,["sparql","results","result","binding"])&&c[c.length-1]===p&&(_=g)});const m=e.on("end",g=>{d?s||m.emit("variables",[]):m.emit("error",new Error("No valid SPARQL query results were found."))}).pipe(new o.Transform({objectMode:!0,transform(g,T,v){a.write(g),v()}}));return m}parseXmlBooleanStream(e){return new Promise((r,a)=>{const c=new n.SaxesParser,s=[];c.on("error",a),c.on("opentag",d=>{s.push(d.name)}),c.on("closetag",d=>{s.pop()}),c.on("text",d=>{this.stackEquals(s,["sparql","boolean"])&&r(d==="true")}),e.on("error",a).on("data",d=>c.write(d)).on("end",()=>a(new Error("No valid ASK response was found.")))})}stackEquals(e,r){return e.length===r.length&&e.every((a,c)=>r[c]===a)}stackBeginsWith(e,r){return e.length>=r.length&&r.every((a,c)=>e[c]===a)}};return fm.SparqlXmlParser=i,fm}var N$;function Gde(){return N$||(N$=1,(function(u){var n=td&&td.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=td&&td.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Hde(),u)})(td)),td}var rA={exports:{}},P$;function zde(){return P$||(P$=1,(function(u){(function(){var n;typeof window=="object"&&window?n=window:n=Bl,u.exports?u.exports=n.Promise?n.Promise:e:n.Promise||(n.Promise=e);var o=n.setImmediate||function(f){setTimeout(f,1)};function i(f,h){return function(){f.apply(h,arguments)}}var t=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function e(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof f!="function")throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(f,i(a,this),i(c,this))}function r(f){var h=this;if(this._state===null){this._deferreds.push(f);return}o(function(){var p=h._state?f.onFulfilled:f.onRejected;if(p===null){(h._state?f.resolve:f.reject)(h._value);return}var y;try{y=p(h._value)}catch(_){f.reject(_);return}f.resolve(y)})}function a(f){try{if(f===this)throw new TypeError("A promise cannot be resolved with itself.");if(f&&(typeof f=="object"||typeof f=="function")){var h=f.then;if(typeof h=="function"){l(i(h,f),i(a,this),i(c,this));return}}this._state=!0,this._value=f,s.call(this)}catch(p){c.call(this,p)}}function c(f){this._state=!1,this._value=f,s.call(this)}function s(){for(var f=0,h=this._deferreds.length;f<h;f++)r.call(this,this._deferreds[f]);this._deferreds=null}function d(f,h,p,y){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof h=="function"?h:null,this.resolve=p,this.reject=y}function l(f,h,p){var y=!1;try{f(function(_){y||(y=!0,h(_))},function(_){y||(y=!0,p(_))})}catch(_){if(y)return;y=!0,p(_)}}e.prototype.catch=function(f){return this.then(null,f)},e.prototype.then=function(f,h){var p=this;return new e(function(y,_){r.call(p,new d(f,h,y,_))})},e.all=function(){var f=Array.prototype.slice.call(arguments.length===1&&t(arguments[0])?arguments[0]:arguments);return new e(function(h,p){if(f.length===0)return h([]);var y=f.length;function _(m,g){try{if(g&&(typeof g=="object"||typeof g=="function")){var T=g.then;if(typeof T=="function"){T.call(g,function(v){_(m,v)},p);return}}f[m]=g,--y===0&&h(f)}catch(v){p(v)}}for(var b=0;b<f.length;b++)_(b,f[b])})},e.resolve=function(f){return f&&typeof f=="object"&&f.constructor===e?f:new e(function(h){h(f)})},e.reject=function(f){return new e(function(h,p){p(f)})},e.race=function(f){return new e(function(h,p){for(var y=0,_=f.length;y<_;y++)f[y].then(h,p)})}})()})(rA)),rA.exports}var nA,D$;function Xde(){if(D$)return nA;D$=1;var u=zde();return nA=function(n,o,i){typeof o=="function"&&(i=o,o=null);var t="",e=new u(function(r,a){n.on("data",function(c){t+=typeof o=="string"?c.toString(o):c.toString()}),n.on("end",function(){r(t)}),n.on("error",a)});return i&&e.then(function(r){i(null,r)},i),e},nA}var j$;function Jde(){if(j$)return ed;j$=1;var u=ed&&ed.__awaiter||function(s,d,l,f){function h(p){return p instanceof l?p:new l(function(y){y(p)})}return new(l||(l=Promise))(function(p,y){function _(g){try{m(f.next(g))}catch(T){y(T)}}function b(g){try{m(f.throw(g))}catch(T){y(T)}}function m(g){g.done?p(g.value):h(g.value).then(_,b)}m((f=f.apply(s,d||[])).next())})};Object.defineProperty(ed,"__esModule",{value:!0}),ed.SparqlEndpointFetcher=void 0;const n=cJ(),o=ia,i=sJ(),t=Ev(),e=dX(),r=Gde(),a=Xde();let c=class mf{constructor(d){var l,f,h;this.method=(l=d==null?void 0:d.method)!==null&&l!==void 0?l:"POST",this.timeout=d==null?void 0:d.timeout,this.additionalUrlParams=(f=d==null?void 0:d.additionalUrlParams)!==null&&f!==void 0?f:new URLSearchParams,this.defaultHeaders=(h=d==null?void 0:d.defaultHeaders)!==null&&h!==void 0?h:new Headers,this.fetchCb=d==null?void 0:d.fetch,this.sparqlJsonParser=new e.SparqlJsonParser(d),this.sparqlXmlParser=new r.SparqlXmlParser(d),this.sparqlParsers={[mf.CONTENTTYPE_SPARQL_JSON]:{parseBooleanStream:p=>this.sparqlJsonParser.parseJsonBooleanStream(p),parseResultsStream:p=>this.sparqlJsonParser.parseJsonResultsStream(p)},[mf.CONTENTTYPE_SPARQL_XML]:{parseBooleanStream:p=>this.sparqlXmlParser.parseXmlBooleanStream(p),parseResultsStream:p=>this.sparqlXmlParser.parseXmlResultsStream(p)}}}getQueryType(d){const l=new t.Parser({sparqlStar:!0}).parse(d);return l.type==="query"?l.queryType==="DESCRIBE"?"CONSTRUCT":l.queryType:"UNKNOWN"}getUpdateTypes(d){const l=new t.Parser({sparqlStar:!0}).parse(d);if(l.type==="update"){const f={};for(const h of l.updates)"type"in h?f[h.type]=!0:f[h.updateType]=!0;return f}return"UNKNOWN"}fetchBindings(d,l){return u(this,void 0,void 0,function*(){const[f,h]=yield this.fetchRawStream(d,l,mf.CONTENTTYPE_SPARQL),p=this.sparqlParsers[f];if(!p)throw new Error(`Unknown SPARQL results content type: ${f}`);return p.parseResultsStream(h)})}fetchAsk(d,l){return u(this,void 0,void 0,function*(){const[f,h]=yield this.fetchRawStream(d,l,mf.CONTENTTYPE_SPARQL),p=this.sparqlParsers[f];if(!p)throw new Error(`Unknown SPARQL results content type: ${f}`);return p.parseBooleanStream(h)})}fetchTriples(d,l){return u(this,void 0,void 0,function*(){const[f,h]=yield this.fetchRawStream(d,l,mf.CONTENTTYPE_TURTLE);return h.pipe(new o.StreamParser({format:f}))})}fetchUpdate(d,l){return u(this,void 0,void 0,function*(){const f=new AbortController,h={};this.defaultHeaders.forEach((y,_)=>{h[_]=y});const p={method:"POST",headers:Object.assign(Object.assign({},h),{"content-type":"application/sparql-update"}),body:l,signal:f.signal};yield this.handleFetchCall(d,p,{ignoreBody:!0}),f.abort()})}fetchRawStream(d,l,f){return u(this,void 0,void 0,function*(){let h=this.method==="POST"?d:`${d}?query=${encodeURIComponent(l)}`,p;const y=new Headers(this.defaultHeaders);if(y.append("Accept",f),this.method==="POST"){y.append("Content-Type","application/x-www-form-urlencoded"),p=new URLSearchParams,p.set("query",l);for(const[_,b]of this.additionalUrlParams.entries())p.set(_,b);y.append("Content-Length",p.toString().length.toString())}else this.additionalUrlParams.toString().length>0&&(h+=`&${this.additionalUrlParams.toString()}`);return this.handleFetchCall(h,{headers:y,method:this.method,body:p})})}handleFetchCall(d,l,f){return u(this,void 0,void 0,function*(){var h,p,y;let _,b;if(this.timeout){const T=new AbortController;l.signal=T.signal,_=setTimeout(()=>T.abort(),this.timeout)}const m=yield((h=this.fetchCb)!==null&&h!==void 0?h:fetch)(d,l);if(clearTimeout(_),!(f!=null&&f.ignoreBody)&&m.body&&(b=n(m.body)?m.body:(0,i.readableFromWeb)(m.body)),!m.ok||!b&&!(f!=null&&f.ignoreBody)){const T=d.split("?").at(0),v=b?yield a(b):"empty response";throw new Error(`Invalid SPARQL endpoint response from ${T} (HTTP status ${m.status}):
${v}`)}return[(y=(p=m.headers.get("Content-Type"))===null||p===void 0?void 0:p.split(";").at(0))!==null&&y!==void 0?y:"",b]})}};return ed.SparqlEndpointFetcher=c,c.CONTENTTYPE_SPARQL_JSON="application/sparql-results+json",c.CONTENTTYPE_SPARQL_XML="application/sparql-results+xml",c.CONTENTTYPE_TURTLE="text/turtle",c.CONTENTTYPE_SPARQL=`${c.CONTENTTYPE_SPARQL_JSON};q=1.0,${c.CONTENTTYPE_SPARQL_XML};q=0.7`,ed}var L$;function qJ(){return L$||(L$=1,(function(u){var n=Zc&&Zc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Zc&&Zc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Jde(),u)})(Zc)),Zc}var M$;function BJ(){if(M$)return lm;M$=1,Object.defineProperty(lm,"__esModule",{value:!0}),lm.QuadDestinationSparql=void 0;const u=Jf(),n=pt(),o=qJ(),i=Lv();let t=class{constructor(r,a,c,s){this.url=r,this.context=a,this.mediatorHttp=c,this.endpointFetcher=new o.SparqlEndpointFetcher({fetch:(d,l)=>this.mediatorHttp.mediate({input:d,init:l,context:this.context}),prefixVariableQuestionMark:!0,dataFactory:s})}async update(r){const a=this.createCombinedQuadsQuery(r.insert,r.delete);await this.wrapSparqlUpdateRequest(a)}createCombinedQuadsQuery(r,a){return new n.ArrayIterator([],{autoStart:!1}).append(this.createQuadsQuery("DELETE",a)).append(a&&r?[` ;
`]:[]).append(this.createQuadsQuery("INSERT",r))}createQuadsQuery(r,a){return a?a.map(c=>{let s=`${(0,i.termToString)(c.subject)} ${(0,i.termToString)(c.predicate)} ${(0,i.termToString)(c.object)} .`;return c.graph.termType==="DefaultGraph"?s=`  ${s}
`:s=`  GRAPH ${(0,i.termToString)(c.graph)} { ${s} }
`,s}).prepend([`${r} DATA {
`]).append(["}"]):new n.ArrayIterator([],{autoStart:!1})}async wrapSparqlUpdateRequest(r){const a=await(0,u.stringify)(r);await this.endpointFetcher.fetchUpdate(this.url,a)}async deleteGraphs(r,a,c){const s=Array.isArray(r)?r:[r],d=[];for(const l of s){let f;typeof l=="string"?f=l:l.termType==="DefaultGraph"?f="DEFAULT":f=`GRAPH <${l.value}>`,d.push(`${c?"DROP":"CLEAR"} ${a?"":"SILENT "}${f}`)}await this.endpointFetcher.fetchUpdate(this.url,d.join("; "))}async createGraphs(r,a){const c=[];for(const s of r)c.push(`CREATE${a?"":" SILENT"} GRAPH <${s.value}>`);await this.endpointFetcher.fetchUpdate(this.url,c.join("; "))}};return lm.QuadDestinationSparql=t,lm}var C$;function kde(){if(C$)return dm;C$=1,Object.defineProperty(dm,"__esModule",{value:!0}),dm.ActorRdfUpdateHypermediaSparql=void 0;const u=eE(),n=Ce(),o=be(),i=BJ();let t=class extends u.ActorRdfUpdateHypermedia{constructor(r){super(r,"sparql")}async testMetadata(r){return!r.forceDestinationType&&!r.metadata.sparqlService&&!(this.checkUrlSuffixSparql&&(r.url.endsWith("/sparql")||r.url.endsWith("/sparql/")))&&!(this.checkUrlSuffixUpdate&&(r.url.endsWith("/update")||r.url.endsWith("/update/")))?(0,o.failTest)(`Actor ${this.name} could not detect a SPARQL service description or URL ending on /sparql or /update.`):(0,o.passTestVoid)()}async run(r){this.logInfo(r.context,`Identified as sparql destination: ${r.url}`);const a=r.context.getSafe(n.KeysInitQuery.dataFactory);return{destination:new i.QuadDestinationSparql(r.metadata.sparqlService||r.url,r.context,this.mediatorHttp,a)}}};return dm.ActorRdfUpdateHypermediaSparql=t,dm}var q$;function Kde(){return q$||(q$=1,(function(u){var n=Yc&&Yc.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Yc&&Yc.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(kde(),u),o(BJ(),u)})(Yc)),Yc}var rd={},hm={},B$;function Wde(){if(B$)return hm;B$=1,Object.defineProperty(hm,"__esModule",{value:!0}),hm.ActorQueryOperationAsk=void 0;const u=Lt(),n=be(),o=gt();let i=class extends u.ActorQueryOperationTypedMediated{constructor(e){super(e,"ask")}async testOperation(e,r){return(0,n.passTestVoid)()}async runOperation(e,r){const a=await this.mediatorQueryOperation.mediate({operation:e.input,context:r}),{bindingsStream:c}=(0,o.getSafeBindings)(a);return{type:"boolean",execute:async()=>(await c.take(1).toArray()).length===1}}};return hm.ActorQueryOperationAsk=i,hm}var $$;function Yde(){return $$||($$=1,(function(u){var n=rd&&rd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=rd&&rd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Wde(),u)})(rd)),rd}var nd={},pm={},U$;function Zde(){if(U$)return pm;U$=1,Object.defineProperty(pm,"__esModule",{value:!0}),pm.ActorQueryOperationBgpJoin=void 0;const u=Lt(),n=Ce(),o=be(),i=dt();let t=class extends u.ActorQueryOperationTypedMediated{constructor(r){super(r,"bgp")}async testOperation(r,a){return(0,o.passTestVoid)()}async runOperation(r,a){const c=a.getSafe(n.KeysInitQuery.dataFactory),s=new i.Factory(c);return this.mediatorQueryOperation.mediate({operation:s.createJoin(r.patterns),context:a})}};return pm.ActorQueryOperationBgpJoin=t,pm}var V$;function ele(){return V$||(V$=1,(function(u){var n=nd&&nd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=nd&&nd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Zde(),u)})(nd)),nd}var id={},bm={},ym={},Q$;function $J(){if(Q$)return ym;Q$=1,Object.defineProperty(ym,"__esModule",{value:!0}),ym.BindingsToQuadsIterator=void 0;const u=pt(),n=gn();let o=class X3 extends u.MultiTransformIterator{constructor(t,e,r){super(r,{autoStart:!1}),this.dataFactory=t,this.template=e,this.blankNodeCounter=0}static bindTerm(t,e){return e.termType==="Variable"?t.get(e):e}static bindQuad(t,e){try{return(0,n.mapTermsNested)(e,r=>{const a=X3.bindTerm(t,r);if(!a)throw new Error("Unbound term");return a})}catch{}}static localizeBlankNode(t,e,r){return r.termType==="BlankNode"?t.blankNode(`${r.value}${e}`):r}static localizeQuad(t,e,r){return(0,n.mapTermsNested)(r,a=>X3.localizeBlankNode(t,e,a))}bindTemplate(t,e,r){return e.map(X3.localizeQuad.bind(null,this.dataFactory,r)).map(c=>X3.bindQuad.bind(null,t)(c)).filter(Boolean)}_createTransformer(t){return new u.ArrayIterator(this.bindTemplate(t,this.template,this.blankNodeCounter++),{autoStart:!1})}};return ym.BindingsToQuadsIterator=o,ym}var H$;function tle(){if(H$)return bm;H$=1,Object.defineProperty(bm,"__esModule",{value:!0}),bm.ActorQueryOperationConstruct=void 0;const u=Lt(),n=Ce(),o=be(),i=gt(),t=gn(),e=dt(),r=$J();let a=class UJ extends u.ActorQueryOperationTypedMediated{constructor(s){super(s,"construct")}static getVariables(s){return(0,t.uniqTerms)([].concat.apply([],s.map(d=>(0,t.getVariables)((0,t.getTermsNested)(d)))))}async testOperation(s,d){return(0,o.passTestVoid)()}async runOperation(s,d){const l=d.getSafe(n.KeysInitQuery.dataFactory),f=UJ.getVariables(s.template),h={type:e.Algebra.types.PROJECT,input:s.input,variables:f},p=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:h,context:d})),y=new r.BindingsToQuadsIterator(l,s.template,p.bindingsStream);return{metadata:()=>p.metadata().then(b=>({...b,order:void 0,cardinality:{type:b.cardinality.type,value:b.cardinality.value*s.template.length},availableOrders:void 0})),quadStream:y,type:"quads"}}};return bm.ActorQueryOperationConstruct=a,bm}var G$;function VJ(){return G$||(G$=1,(function(u){var n=id&&id.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=id&&id.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(tle(),u),o($J(),u)})(id)),id}var ad={},_m={},iA={},Mn={},ud={},gm={},z$;function QJ(){if(z$)return gm;z$=1,Object.defineProperty(gm,"__esModule",{value:!0}),gm.BlankNode=void 0;class u{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return gm.BlankNode=u,gm}var mm={},vm={},X$;function HJ(){if(X$)return vm;X$=1,Object.defineProperty(vm,"__esModule",{value:!0}),vm.DefaultGraph=void 0;class u{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return vm.DefaultGraph=u,u.INSTANCE=new u,vm}var Tm={},wm={},J$;function tE(){if(J$)return wm;J$=1,Object.defineProperty(wm,"__esModule",{value:!0}),wm.NamedNode=void 0;class u{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return wm.NamedNode=u,wm}var k$;function GJ(){if(k$)return Tm;k$=1,Object.defineProperty(Tm,"__esModule",{value:!0}),Tm.Literal=void 0;const u=tE();class n{constructor(i,t){this.termType="Literal",this.value=i,typeof t=="string"?(this.language=t,this.datatype=n.RDF_LANGUAGE_STRING,this.direction=""):t?"termType"in t?(this.language="",this.datatype=t,this.direction=""):(this.language=t.language,this.datatype=t.direction?n.RDF_DIRECTIONAL_LANGUAGE_STRING:n.RDF_LANGUAGE_STRING,this.direction=t.direction||""):(this.language="",this.datatype=n.XSD_STRING,this.direction="")}equals(i){return!!i&&i.termType==="Literal"&&i.value===this.value&&i.language===this.language&&(i.direction===this.direction||!i.direction&&this.direction==="")&&this.datatype.equals(i.datatype)}}return Tm.Literal=n,n.RDF_LANGUAGE_STRING=new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),n.RDF_DIRECTIONAL_LANGUAGE_STRING=new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),n.XSD_STRING=new u.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Tm}var Sm={},K$;function zJ(){if(K$)return Sm;K$=1,Object.defineProperty(Sm,"__esModule",{value:!0}),Sm.Quad=void 0;class u{constructor(o,i,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=i,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return Sm.Quad=u,Sm}var Am={},W$;function XJ(){if(W$)return Am;W$=1,Object.defineProperty(Am,"__esModule",{value:!0}),Am.Variable=void 0;class u{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return Am.Variable=u,Am}var Y$;function rle(){if(Y$)return mm;Y$=1,Object.defineProperty(mm,"__esModule",{value:!0}),mm.DataFactory=void 0;const u=QJ(),n=HJ(),o=GJ(),i=tE(),t=zJ(),e=XJ();let r=0;class a{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${r++}_`}namedNode(s){return new i.NamedNode(s)}blankNode(s){return new u.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,d){return new o.Literal(s,d)}variable(s){return new e.Variable(s)}defaultGraph(){return n.DefaultGraph.INSTANCE}quad(s,d,l,f){return new t.Quad(s,d,l,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return mm.DataFactory=a,mm}var Z$;function nle(){return Z$||(Z$=1,(function(u){var n=ud&&ud.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ud&&ud.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(QJ(),u),o(rle(),u),o(HJ(),u),o(GJ(),u),o(tE(),u),o(zJ(),u),o(XJ(),u)})(ud)),ud}var eU;function ile(){if(eU)return Mn;eU=1,Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.termToString=o,Mn.getLiteralValue=i,Mn.getLiteralType=t,Mn.getLiteralLanguage=e,Mn.getLiteralDirection=r,Mn.stringToTerm=a,Mn.quadToStringQuad=c,Mn.stringQuadToQuad=s;const u=nle(),n=new u.DataFactory;function o(d){if(d)switch(d.termType){case"NamedNode":return d.value;case"BlankNode":return"_:"+d.value;case"Literal":const l=d;return'"'+l.value+'"'+(l.datatype&&l.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&l.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&l.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+l.datatype.value:"")+(l.language?"@"+l.language:"")+(l.direction?"--"+l.direction:"");case"Quad":return`<<${o(d.subject)} ${o(d.predicate)} ${o(d.object)}${d.graph.termType==="DefaultGraph"?"":" "+o(d.graph)}>>`;case"Variable":return"?"+d.value;case"DefaultGraph":return d.value}}function i(d){const l=/^"([^]*)"/.exec(d);if(!l)throw new Error(d+" is not a literal");return l[1]}function t(d){const l=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(d);if(!l)throw new Error(d+" is not a literal");return l[1]||(l[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function e(d){const l=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(d);if(!l)throw new Error(d+" is not a literal");if(l[1]){let f=l[1].toLowerCase();const h=f.indexOf("--");return h>=0&&(f=f.slice(0,h)),f}return""}function r(d){const l=d.indexOf("--",d.lastIndexOf('"'));if(l>=0){const f=d.slice(l+2,d.length);if(f==="ltr"||f==="rtl")return f;throw new Error(d+" is not a literal with a valid direction")}return""}function a(d,l){if(l=l||n,!d||!d.length)return l.defaultGraph();switch(d[0]){case"_":return l.blankNode(d.substr(2));case"?":if(!l.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return l.variable(d.substr(1));case'"':const f=e(d),h=r(d),p=l.namedNode(t(d));return l.literal(i(d),f?{language:f,direction:h}:p);case"<":default:if(d[0]==="<"&&d.length>4&&d[1]==="<"&&d[d.length-1]===">"&&d[d.length-2]===">"){const y=d.slice(2,-2).trim();let _=[],b=0,m=0,g=!1;for(let T=0;T<y.length;T++){const v=y[T];if(v==="<"&&b++,v===">"){if(b===0)throw new Error("Found closing tag without opening tag in "+d);b--}if(v==='"'){let A=!1,I=T;for(;I-- >0&&y[I]==="\\";)A=!A;A||(g=!g)}if(v===" "&&!g&&b===0){for(_.push(y.slice(m,T));y[T+1]===" ";)T+=1;m=T+1}}if(b!==0)throw new Error("Found opening tag without closing tag in "+d);if(_.push(y.slice(m,y.length)),_.length!==3&&_.length!==4)throw new Error("Nested quad syntax error "+d);return _=_.map(T=>T.startsWith("<")&&!T.includes(" ")?T.slice(1,-1):T),l.quad(a(_[0]),a(_[1]),a(_[2]),_[3]?a(_[3]):void 0)}return l.namedNode(d)}}function c(d){return{subject:o(d.subject),predicate:o(d.predicate),object:o(d.object),graph:o(d.graph)}}function s(d,l){return l=l||n,l.quad(a(d.subject,l),a(d.predicate,l),a(d.object,l),a(d.graph,l))}return Mn}var tU;function ale(){return tU||(tU=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.termToString=u.stringToTerm=u.stringQuadToQuad=u.quadToStringQuad=u.getLiteralValue=u.getLiteralType=u.getLiteralDirection=u.getLiteralLanguage=void 0;const n=ile();Object.defineProperty(u,"getLiteralLanguage",{enumerable:!0,get:function(){return n.getLiteralLanguage}}),Object.defineProperty(u,"getLiteralDirection",{enumerable:!0,get:function(){return n.getLiteralDirection}}),Object.defineProperty(u,"getLiteralType",{enumerable:!0,get:function(){return n.getLiteralType}}),Object.defineProperty(u,"getLiteralValue",{enumerable:!0,get:function(){return n.getLiteralValue}}),Object.defineProperty(u,"quadToStringQuad",{enumerable:!0,get:function(){return n.quadToStringQuad}}),Object.defineProperty(u,"stringQuadToQuad",{enumerable:!0,get:function(){return n.stringQuadToQuad}}),Object.defineProperty(u,"stringToTerm",{enumerable:!0,get:function(){return n.stringToTerm}}),Object.defineProperty(u,"termToString",{enumerable:!0,get:function(){return n.termToString}})})(iA)),iA}var rU;function ule(){if(rU)return _m;rU=1,Object.defineProperty(_m,"__esModule",{value:!0}),_m.ActorQueryOperationDistinctIdentity=void 0;const u=Lt(),n=be(),o=gt(),i=ale();let t=class extends u.ActorQueryOperationTypedMediated{constructor(r){super(r,"distinct")}async testOperation(r,a){return(0,n.passTestVoid)()}async runOperation(r,a){const c=await this.mediatorQueryOperation.mediate({operation:r.input,context:a});if(c.type==="quads"){const f=(0,o.getSafeQuads)(c);return{type:"quads",quadStream:f.quadStream.filter(await this.newIdentityFilterQuads()),metadata:f.metadata}}const s=(0,o.getSafeBindings)(c),d=(await s.metadata()).variables.map(f=>f.variable);return{type:"bindings",bindingsStream:s.bindingsStream.filter(await this.newIdentityFilter(d)),metadata:s.metadata}}async newIdentityFilter(r){const a={};return c=>{const s=r.map(d=>i.termToString(c.get(d))).join("-");return!(s in a)&&(a[s]=!0)}}async newIdentityFilterQuads(){const r={};return a=>{const c=Object.values(i.quadToStringQuad(a)).join(" ");return!(c in r)&&(r[c]=!0)}}};return _m.ActorQueryOperationDistinctIdentity=t,_m}var nU;function ole(){return nU||(nU=1,(function(u){var n=ad&&ad.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ad&&ad.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ule(),u)})(ad)),ad}var od={},Om={},iU;function sle(){if(iU)return Om;iU=1,Object.defineProperty(Om,"__esModule",{value:!0}),Om.ActorQueryOperationExtend=void 0;const u=Lt(),n=be(),o=$t(),i=ge(),t=gt();let e=class extends u.ActorQueryOperationTypedMediated{constructor(a){super(a,"extend"),this.mediatorExpressionEvaluatorFactory=a.mediatorExpressionEvaluatorFactory}async testOperation(){return(0,n.passTestVoid)()}async runOperation(a,c){const{expression:s,input:d,variable:l}=a,f=(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:d,context:c}));if((await f.metadata()).variables.some(_=>_.variable.equals(l)))throw new Error(`Illegal binding to variable '${l.value}' that has already been bound`);const h=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:s,context:c}),p=async(_,b,m)=>{try{const g=await h.evaluate(_),T=_.set(l,g);m(T)}catch(g){(0,i.isExpressionError)(g)?(m(_),this.logWarn(c,`Expression error for extend operation (${g.message})with bindings '${(0,o.bindingsToString)(_)}'`)):y.emit("error",g)}b()},y=f.bindingsStream.transform({autoStart:!1,transform:p});return{type:"bindings",bindingsStream:y,async metadata(){const _=await f.metadata();return{..._,variables:[..._.variables,{variable:l,canBeUndef:!1}]}}}}};return Om.ActorQueryOperationExtend=e,Om}var aU;function cle(){return aU||(aU=1,(function(u){var n=od&&od.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=od&&od.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(sle(),u)})(od)),od}var sd={},Em={},uU;function dle(){if(uU)return Em;uU=1,Object.defineProperty(Em,"__esModule",{value:!0}),Em.ActorQueryOperationFilter=void 0;const u=Lt(),n=be(),o=$t(),i=ge(),t=gt();let e=class extends u.ActorQueryOperationTypedMediated{constructor(a){super(a,"filter"),this.mediatorExpressionEvaluatorFactory=a.mediatorExpressionEvaluatorFactory}async testOperation(){return(0,n.passTestVoid)()}async runOperation(a,c){const s=await this.mediatorQueryOperation.mediate({operation:a.input,context:c}),d=(0,t.getSafeBindings)(s);(0,t.validateQueryOutput)(d,"bindings");const l=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:a.expression,context:c}),f=async(p,y,_)=>{try{await l.evaluateAsEBV(p)&&_(p)}catch(b){(0,i.isExpressionError)(b)?this.logWarn(c,"Error occurred while filtering.",()=>({error:b,bindings:(0,o.bindingsToString)(p)})):h.emit("error",b)}y()},h=d.bindingsStream.transform({transform:f,autoStart:!1});return{type:"bindings",bindingsStream:h,metadata:d.metadata}}};return Em.ActorQueryOperationFilter=e,Em}var oU;function lle(){return oU||(oU=1,(function(u){var n=sd&&sd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=sd&&sd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(dle(),u)})(sd)),sd}var cd={},xm={},sU;function fle(){if(sU)return xm;sU=1,Object.defineProperty(xm,"__esModule",{value:!0}),xm.ActorQueryOperationFromQuad=void 0;const u=Lt(),n=Ce(),o=be(),i=dt();let t=class dn extends u.ActorQueryOperationTypedMediated{constructor(r){super(r,"from")}static copyOperation(r,a){const c={};for(const s of Object.keys(r))Array.isArray(r[s])&&s!=="template"?s==="variables"?c[s]=r[s]:c[s]=r[s].map(a):dn.ALGEBRA_TYPES.includes(r[s].type)?c[s]=a(r[s]):c[s]=r[s];return c}static applyOperationDefaultGraph(r,a,c){if(a.type==="bgp"&&a.patterns.length>0||a.type==="path"||a.type==="pattern"){if(a.type==="bgp")return dn.joinOperations(r,a.patterns.map(d=>{if(d.graph.termType!=="DefaultGraph")return r.createBgp([d]);const l=c.map(f=>r.createBgp([Object.assign(r.createPattern(d.subject,d.predicate,d.object,f),{metadata:d.metadata})]));return dn.unionOperations(r,l)}));if(a.graph.termType!=="DefaultGraph")return a;const s=c.map(d=>a.type==="path"?r.createPath(a.subject,a.predicate,a.object,d):Object.assign(r.createPattern(a.subject,a.predicate,a.object,d),{metadata:a.metadata}));return dn.unionOperations(r,s)}return dn.copyOperation(a,s=>this.applyOperationDefaultGraph(r,s,c))}static applyOperationNamedGraph(r,a,c,s){if(a.type==="bgp"&&a.patterns.length>0||a.type==="path"||a.type==="pattern"){const d=a.type==="bgp"?a.patterns[0].graph:a.graph;if(d.termType==="DefaultGraph")return{type:i.Algebra.types.BGP,patterns:[]};if(d.termType==="Variable"){if(c.length===1){const f=c[0],h={};h[`?${d.value}`]=f;const p=r.createValues([d],[h]);let y;return a.type==="bgp"?y=r.createBgp(a.patterns.map(_=>r.createPattern(_.subject,_.predicate,_.object,f))):a.type==="path"?y=r.createPath(a.subject,a.predicate,a.object,f):y=r.createPattern(a.subject,a.predicate,a.object,f),r.createJoin([p,y])}return dn.unionOperations(r,c.map(f=>dn.applyOperationNamedGraph(r,a,[f],s)))}return[...c,...s].some(f=>f.equals(d))?a:{type:i.Algebra.types.BGP,patterns:[]}}return dn.copyOperation(a,d=>this.applyOperationNamedGraph(r,d,c,s))}static joinOperations(r,a){if(a.length===1)return a[0];if(a.length>1)return r.createJoin(a);throw new Error("A join can only be applied on at least one operation")}static unionOperations(r,a){if(a.length===1)return a[0];if(a.length>1)return r.createUnion(a);throw new Error("A union can only be applied on at least one operation")}static createOperation(r,a){let c=a.input;return a.default.length>0&&(c=dn.applyOperationDefaultGraph(r,c,a.default)),(a.named.length>0||a.default.length>0)&&(c=dn.applyOperationNamedGraph(r,c,a.named,a.default)),c}async testOperation(r,a){return(0,o.passTestVoid)()}async runOperation(r,a){const c=a.getSafe(n.KeysInitQuery.dataFactory),s=new i.Factory(c),d=dn.createOperation(s,r);return this.mediatorQueryOperation.mediate({operation:d,context:a})}};return xm.ActorQueryOperationFromQuad=t,t.ALGEBRA_TYPES=Object.keys(i.Algebra.types).map(e=>i.Algebra.types[e]),xm}var cU;function hle(){return cU||(cU=1,(function(u){var n=cd&&cd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=cd&&cd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(fle(),u)})(cd)),cd}var dd={},Im={},dU;function ple(){if(dU)return Im;dU=1,Object.defineProperty(Im,"__esModule",{value:!0}),Im.ActorQueryOperationProject=void 0;const u=Lt(),n=Ce(),o=be(),i=OO(),t=gt();let e=class extends u.ActorQueryOperationTypedMediated{constructor(a){super(a,"project")}async testOperation(a,c){return(0,o.passTestVoid)()}async runOperation(a,c){const s=c.getSafe(n.KeysInitQuery.dataFactory),d=(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:a.input,context:c})),l=await d.metadata(),f=Object.fromEntries(l.variables.map(g=>[g.variable.value,g])),h=a.variables.map(g=>({variable:g,canBeUndef:!1})),p=Object.fromEntries(h.map(g=>[g.variable.value,g])),y=l.variables.filter(g=>!(g.variable.value in p)),_=h.map(g=>({variable:g.variable,canBeUndef:!(g.variable.value in f)||f[g.variable.value].canBeUndef}));let b=y.length===0?d.bindingsStream:d.bindingsStream.map(g=>{for(const T of y)g=g.delete(T.variable);return g}),m=0;return b=b.map(g=>{m++;const T=new Map;return g.map(v=>{if(v instanceof i.BlankNodeBindingsScoped){let A=T.get(v.value);return A||(A=s.blankNode(`${v.value}${m}`),T.set(v.value,A)),A}return v})}),{type:"bindings",bindingsStream:b,metadata:async()=>({...l,variables:_})}}};return Im.ActorQueryOperationProject=e,Im}var lU;function ble(){return lU||(lU=1,(function(u){var n=dd&&dd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=dd&&dd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ple(),u)})(dd)),dd}var ld={},Rm={},fU;function yle(){if(fU)return Rm;fU=1,Object.defineProperty(Rm,"__esModule",{value:!0}),Rm.ActorQueryOperationReducedHash=void 0;const u=Lt(),n=be(),o=gt(),i=Vf();let t=class extends u.ActorQueryOperationTypedMediated{constructor(r){super(r,"reduced")}async testOperation(r,a){return(0,n.passTestVoid)()}async runOperation(r,a){const c=(0,o.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:r.input,context:a})),s=(await c.metadata()).variables.map(l=>l.variable);return{type:"bindings",bindingsStream:c.bindingsStream.filter(await this.newHashFilter(a,s)),metadata:c.metadata}}async newHashFilter(r,a){const{hashFunction:c}=await this.mediatorHashBindings.mediate({context:r}),s=new i.LRUCache({max:this.cacheSize});return d=>{const l=c(d,a);return s.has(l)?!1:(s.set(l,!0),!0)}}};return Rm.ActorQueryOperationReducedHash=t,Rm}var hU;function _le(){return hU||(hU=1,(function(u){var n=ld&&ld.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ld&&ld.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(yle(),u)})(ld)),ld}var fd={},Fm={},pU;function gle(){if(pU)return Fm;pU=1,Object.defineProperty(Fm,"__esModule",{value:!0}),Fm.ActorQueryOperationSlice=void 0;const u=Lt(),n=Ce(),o=be();let i=class extends u.ActorQueryOperationTypedMediated{constructor(e){super(e,"slice")}async testOperation(e,r){return(0,o.passTestVoid)()}async runOperation(e,r){e.length&&(r=r.set(n.KeysQueryOperation.limitIndicator,e.length));const a=await this.mediatorQueryOperation.mediate({operation:e.input,context:r});return a.type==="bindings"?{type:"bindings",bindingsStream:this.sliceStream(a.bindingsStream,e),metadata:this.sliceMetadata(a,e)}:a.type==="quads"?{type:"quads",quadStream:this.sliceStream(a.quadStream,e),metadata:this.sliceMetadata(a,e)}:a}sliceStream(e,r){const a=!!r.length||r.length===0,{start:c}=r,s=a?r.start+r.length-1:Number.POSITIVE_INFINITY;return e.transform({offset:c,limit:Math.max(s-c+1,0),autoStart:!1})}sliceMetadata(e,r){const a=!!r.length||r.length===0;return()=>e.metadata().then(c=>{const s={...c.cardinality};return Number.isFinite(s.value)&&(s.value=Math.max(0,s.value-r.start),a&&(s.value=Math.min(s.value,r.length))),{...c,cardinality:s}})}};return Fm.ActorQueryOperationSlice=i,Fm}var bU;function mle(){return bU||(bU=1,(function(u){var n=fd&&fd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=fd&&fd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(gle(),u)})(fd)),fd}var hd={},Nm={},yU;function vle(){if(yU)return Nm;yU=1,Object.defineProperty(Nm,"__esModule",{value:!0}),Nm.ActorQueryOperationUnion=void 0;const u=Lt(),n=be(),o=br(),i=gt(),t=pt();let e=class dw extends u.ActorQueryOperationTypedMediated{constructor(a){super(a,"union")}static unionVariables(a){const c={};for(const s of a)for(const d of s){c[d.variable.value]||(c[d.variable.value]={variable:d.variable,canBeUndef:d.canBeUndef,occurrences:0});const l=c[d.variable.value];l.canBeUndef=l.canBeUndef||d.canBeUndef,l.occurrences++}return Object.values(c).map(s=>s.occurrences===a.length?{variable:s.variable,canBeUndef:s.canBeUndef}:{variable:s.variable,canBeUndef:!0})}static async unionMetadata(a,c,s,d){let l=(await d.mediate({mode:"initialize",context:s})).metadata;for(const h of a)l={...h,...(await d.mediate({mode:"append",accumulatedMetadata:l,appendingMetadata:h,context:s})).metadata};l.state=new o.MetadataValidationState;const f=()=>l.state.invalidate();for(const h of a)h.state.addInvalidateListener(f);if(c){const h=a.map(p=>p.variables);l.variables=dw.unionVariables(h)}return l}async testOperation(a,c){return(0,n.passTestVoid)()}async runOperation(a,c){const s=await Promise.all(a.input.map(l=>this.mediatorQueryOperation.mediate({operation:l,context:c})));let d;for(const l of s)if(d===void 0)d=l.type;else if(d!==l.type)throw new Error(`Unable to union ${d} and ${l.type}`);if(d==="bindings"||a.input.length===0){const l=s.map(i.getSafeBindings);return{type:"bindings",bindingsStream:new t.UnionIterator(l.map(p=>p.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(l.map(p=>p.metadata())).then(p=>dw.unionMetadata(p,!0,c,this.mediatorRdfMetadataAccumulate))}}if(d==="quads"){const l=s.map(i.getSafeQuads);return{type:"quads",quadStream:new t.UnionIterator(l.map(p=>p.quadStream),{autoStart:!1}),metadata:()=>Promise.all(l.map(p=>p.metadata())).then(p=>dw.unionMetadata(p,!1,c,this.mediatorRdfMetadataAccumulate))}}throw new Error(`Unable to union ${d}`)}};return Nm.ActorQueryOperationUnion=e,Nm}var _U;function JJ(){return _U||(_U=1,(function(u){var n=hd&&hd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=hd&&hd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(vle(),u)})(hd)),hd}var pd={},Pm={},bd={},Dm={},jm={},gU;function kJ(){if(gU)return jm;gU=1,Object.defineProperty(jm,"__esModule",{value:!0}),jm.PathVariableObjectIterator=void 0;const u=gt(),n=pt(),o=tr();let i=class extends n.BufferedIterator{constructor(e,r,a,c,s,d,l,f=16){super({autoStart:!1}),this.algebraFactory=e,this.subject=r,this.predicate=a,this.graph=c,this.context=s,this.mediatorQueryOperation=d,this.maxRunningOperations=f,this.termHashes=new Map,this.runningOperations=[],this.pendingOperations=[],this.started=!1,this._push(this.subject,l)}getProperty(e,r){return!this.started&&e==="metadata"&&this.startNextOperation(!1).catch(a=>this.emit("error",a)),super.getProperty(e,r)}_end(e){for(const r of this.runningOperations)r.destroy();super._end(e)}_push(e,r=!0){let a;if(r&&(a=(0,o.termToString)(e),this.termHashes.has(a)))return!1;const c=this.algebraFactory.dataFactory.variable("b");return this.pendingOperations.push({variable:c,operation:this.algebraFactory.createPath(e,this.predicate,c,this.graph)}),a&&(this.termHashes.set(a,e),super._push(e)),!0}async startNextOperation(e){this.started=!0;const r=this.pendingOperations.pop(),a=(0,u.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:r.operation,context:this.context})),c=a.bindingsStream.map(s=>s.get(r.variable));c.done||(this.runningOperations.push(c),c.on("error",s=>this.destroy(s)),c.on("readable",()=>{e&&this._fillBufferAsync(),this.readable=!0}),c.on("end",()=>{this.runningOperations.splice(this.runningOperations.indexOf(c),1),e&&this._fillBufferAsync(),this.readable=!0})),this.getProperty("metadata")||this.setProperty("metadata",a.metadata)}_read(e,r){const a=this;(async function(){for(;a.runningOperations.length<a.maxRunningOperations&&a.pendingOperations.length!==0;)await a.startNextOperation(!0);let c=0,s,d=!0;for(;!d||c!==(c=e);){d=!0;for(let l=0;l<a.runningOperations.length&&e>0;l++)(s=a.runningOperations[l].read())!==null&&(a._push(s)?e--:d=!1)}a.closeIfNeeded()})().then(()=>{r()},c=>this.destroy(c))}closeIfNeeded(){this.runningOperations.length===0&&this.pendingOperations.length===0&&this.close()}};return jm.PathVariableObjectIterator=i,jm}var mU;function Tle(){if(mU)return Dm;mU=1,Object.defineProperty(Dm,"__esModule",{value:!0}),Dm.ActorAbstractPath=void 0;const u=Lt(),n=Ce(),o=be(),i=gt(),t=pt(),e=tr(),r=dt(),a=kJ();let c=class extends u.ActorQueryOperationTypedMediated{constructor(d,l){super(d,"path"),this.predicateType=l}async testOperation(d,l){return d.predicate.type!==this.predicateType?(0,o.failTest)(`This Actor only supports ${this.predicateType} Path operations.`):(0,o.passTestVoid)()}generateVariable(d,l,f){return f?l&&(l.subject.value===f||l.object.value===f)?this.generateVariable(d,l,`${f}b`):d.variable(f):this.generateVariable(d,l,"b")}async isPathArbitraryLengthDistinct(d,l,f){return l.get(n.KeysQueryOperation.isPathArbitraryLengthDistinctKey)?(l=l.set(n.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!1),{context:l,operation:void 0}):(l=l.set(n.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!0),{context:l,operation:(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:d.createDistinct(f),context:l}))})}async predicateStarGraphVariable(d,l,f,h,p,y,_){const b=this.getPathSources(f),m=this.generateVariable(y.dataFactory,y.createPath(d,f,l,h)),g=y.createUnion([this.assignPatternSources(y,y.createPattern(d,m,l,h),b),this.assignPatternSources(y,y.createPattern(l,m,d,h),b)]),T=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:p,operation:g})),v=new Set;return{bindingsStream:new t.MultiTransformIterator(T.bindingsStream,{multiTransform:I=>{const q=I.get(h);return v.has(q.value)?new t.EmptyIterator:(v.add(q.value),new t.TransformIterator(async()=>{const O=new t.BufferedIterator;return await this.getObjectsPredicateStar(y,d,f,q,p,{},O,{count:0}),O.map(w=>_.bindings([[l,w],[h,q]]))},{maxBufferSize:128}))},autoStart:!1}),metadata:T.metadata}}async getObjectsPredicateStarEval(d,l,f,h,p,y,_,b){if(h.termType==="Variable")return this.predicateStarGraphVariable(d,f,l,h,p,_,b);const m=new a.PathVariableObjectIterator(_,d,l,h,p,this.mediatorQueryOperation,y);return{bindingsStream:m.map(T=>b.bindings([[f,T]])),async metadata(){const T=await new Promise(v=>{m.getProperty("metadata",A=>v(A()))});return T.cardinality.value++,T}}}async getObjectsPredicateStar(d,l,f,h,p,y,_,b){const m=(0,e.termToString)(l);if(y[m])return;_._push(l),y[m]=l,b.count++;const g=this.generateVariable(d.dataFactory),T=d.createPath(l,f,g,h),v=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:T,context:p}));return v.bindingsStream.on("data",async A=>{const I=A.get(g);await this.getObjectsPredicateStar(d,I,f,h,p,y,_,b)}),v.bindingsStream.on("end",()=>{--b.count===0&&_.close()}),v.metadata}async getSubjectAndObjectBindingsPredicateStar(d,l,f,h,p,y,_,b,m,g,T,v,A){const I=(0,e.termToString)(h)+(0,e.termToString)(y);if(m[I])return;if(T.count++,m[I]=!0,g._push(A.bindings([[d,f],[l,h]])),I in b){const O=await b[I];for(const w of O)await this.getSubjectAndObjectBindingsPredicateStar(d,l,f,w,p,y,_,b,m,g,T,v,A);--T.count===0&&g.close();return}const q=new Promise(async(O,w)=>{const S=[],E=this.generateVariable(v.dataFactory),R=v.createPath(h,p,E,y),L=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:R,context:_}));L.bindingsStream.on("data",async M=>{const B=M.get(E);S.push(B),await this.getSubjectAndObjectBindingsPredicateStar(d,l,f,B,p,y,_,b,m,g,T,v,A)}),L.bindingsStream.on("error",w),L.bindingsStream.on("end",()=>{--T.count===0&&g.close(),O(S)})});b[I]=q}getPathSources(d){switch(d.type){case r.Algebra.types.ALT:case r.Algebra.types.SEQ:return d.input.flatMap(l=>this.getPathSources(l));case r.Algebra.types.INV:case r.Algebra.types.ONE_OR_MORE_PATH:case r.Algebra.types.ZERO_OR_MORE_PATH:case r.Algebra.types.ZERO_OR_ONE_PATH:return this.getPathSources(d.path);case r.Algebra.types.LINK:case r.Algebra.types.NPS:{const l=(0,i.getOperationSource)(d);if(!l)throw new Error("Could not find a required source on a link path operation");return[l]}}}assignPatternSources(d,l,f){if(f.length===0)throw new Error("Attempted to assign zero sources to a pattern during property path handling");return f.length===1?(0,i.assignOperationSource)(l,f[0]):d.createUnion(f.map(h=>(0,i.assignOperationSource)(l,h)),!0)}};return Dm.ActorAbstractPath=c,Dm}var vU;function sa(){return vU||(vU=1,(function(u){var n=bd&&bd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=bd&&bd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Tle(),u),o(kJ(),u)})(bd)),bd}var TU;function wle(){if(TU)return Pm;TU=1,Object.defineProperty(Pm,"__esModule",{value:!0}),Pm.ActorQueryOperationPathAlt=void 0;const u=sa(),n=JJ(),o=Ce(),i=gt(),t=pt(),e=dt();let r=class extends u.ActorAbstractPath{constructor(c){super(c,e.Algebra.types.ALT)}async runOperation(c,s){const d=s.getSafe(o.KeysInitQuery.dataFactory),l=new e.Factory(d),f=c.predicate,h=(await Promise.all(f.input.map(_=>this.mediatorQueryOperation.mediate({context:s,operation:l.createPath(c.subject,_,c.object,c.graph)})))).map(i.getSafeBindings);return{type:"bindings",bindingsStream:new t.UnionIterator(h.map(_=>_.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(h.map(_=>_.metadata())).then(_=>n.ActorQueryOperationUnion.unionMetadata(_,!0,s,this.mediatorRdfMetadataAccumulate))}}};return Pm.ActorQueryOperationPathAlt=r,Pm}var wU;function Sle(){return wU||(wU=1,(function(u){var n=pd&&pd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=pd&&pd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(wle(),u)})(pd)),pd}var yd={},Lm={},SU;function Ale(){if(SU)return Lm;SU=1,Object.defineProperty(Lm,"__esModule",{value:!0}),Lm.ActorQueryOperationPathInv=void 0;const u=sa(),n=Ce(),o=dt();let i=class extends u.ActorAbstractPath{constructor(e){super(e,o.Algebra.types.INV)}async runOperation(e,r){const a=r.getSafe(n.KeysInitQuery.dataFactory),c=new o.Factory(a),s=e.predicate,d=c.createPath(e.object,s.path,e.subject,e.graph);return this.mediatorQueryOperation.mediate({operation:d,context:r})}};return Lm.ActorQueryOperationPathInv=i,Lm}var AU;function Ole(){return AU||(AU=1,(function(u){var n=yd&&yd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=yd&&yd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ale(),u)})(yd)),yd}var _d={},Mm={},OU;function Ele(){if(OU)return Mm;OU=1,Object.defineProperty(Mm,"__esModule",{value:!0}),Mm.ActorQueryOperationPathLink=void 0;const u=sa(),n=Ce(),o=dt();let i=class extends u.ActorAbstractPath{constructor(e){super(e,o.Algebra.types.LINK)}async runOperation(e,r){const a=r.getSafe(n.KeysInitQuery.dataFactory),c=new o.Factory(a),s=e.predicate,d=Object.assign(c.createPattern(e.subject,s.iri,e.object,e.graph),{metadata:s.metadata});return this.mediatorQueryOperation.mediate({operation:d,context:r})}};return Mm.ActorQueryOperationPathLink=i,Mm}var EU;function xle(){return EU||(EU=1,(function(u){var n=_d&&_d.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=_d&&_d.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ele(),u)})(_d)),_d}var gd={},Cm={},xU;function Ile(){if(xU)return Cm;xU=1,Object.defineProperty(Cm,"__esModule",{value:!0}),Cm.ActorQueryOperationPathNps=void 0;const u=sa(),n=Ce(),o=gt(),i=dt();let t=class extends u.ActorAbstractPath{constructor(r){super(r,i.Algebra.types.NPS)}async runOperation(r,a){const c=a.getSafe(n.KeysInitQuery.dataFactory),s=new i.Factory(c),d=r.predicate,l=this.generateVariable(c,r),f=Object.assign(s.createPattern(r.subject,l,r.object,r.graph),{metadata:d.metadata}),h=(0,o.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:f,context:a}));return{type:"bindings",bindingsStream:h.bindingsStream.map(y=>d.iris.some(_=>_.equals(y.get(l)))?null:y.delete(l)),metadata:h.metadata}}};return Cm.ActorQueryOperationPathNps=t,Cm}var IU;function Rle(){return IU||(IU=1,(function(u){var n=gd&&gd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=gd&&gd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ile(),u)})(gd)),gd}var md={},qm={},RU;function Fle(){if(RU)return qm;RU=1,Object.defineProperty(qm,"__esModule",{value:!0}),qm.ActorQueryOperationClear=void 0;const u=Lt(),n=Ce(),o=gt();let i=class extends u.ActorQueryOperationTypedMediated{constructor(e){super(e,"clear")}async testOperation(e,r){return(0,o.testReadOnly)(r)}async runOperation(e,r){const a=r.getSafe(n.KeysInitQuery.dataFactory);let c;e.source==="DEFAULT"?c=a.defaultGraph():typeof e.source=="string"?c=e.source:c=[e.source];const{execute:s}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:c,requireExistence:!e.silent,dropGraphs:!1},context:r});return{type:"void",execute:s}}};return qm.ActorQueryOperationClear=i,qm}var FU;function Nle(){return FU||(FU=1,(function(u){var n=md&&md.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=md&&md.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Fle(),u)})(md)),md}var vd={},Bm={},NU;function Ple(){if(NU)return Bm;NU=1,Object.defineProperty(Bm,"__esModule",{value:!0}),Bm.ActorQueryOperationUpdateCompositeUpdate=void 0;const u=Lt(),n=gt();let o=class extends u.ActorQueryOperationTypedMediated{constructor(t){super(t,"compositeupdate")}async testOperation(t,e){return(0,n.testReadOnly)(e)}async runOperation(t,e){return{type:"void",execute:()=>(async()=>{for(const a of t.updates)await(0,n.getSafeVoid)(await this.mediatorQueryOperation.mediate({operation:a,context:e})).execute()})()}}};return Bm.ActorQueryOperationUpdateCompositeUpdate=o,Bm}var PU;function Dle(){return PU||(PU=1,(function(u){var n=vd&&vd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=vd&&vd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ple(),u)})(vd)),vd}var Td={},$m={},DU;function jle(){if(DU)return $m;DU=1,Object.defineProperty($m,"__esModule",{value:!0}),$m.ActorQueryOperationCreate=void 0;const u=Lt(),n=gt();let o=class extends u.ActorQueryOperationTypedMediated{constructor(t){super(t,"create")}async testOperation(t,e){return(0,n.testReadOnly)(e)}async runOperation(t,e){const{execute:r}=await this.mediatorUpdateQuads.mediate({createGraphs:{graphs:[t.source],requireNonExistence:!t.silent},context:e});return{type:"void",execute:r}}};return $m.ActorQueryOperationCreate=o,$m}var jU;function Lle(){return jU||(jU=1,(function(u){var n=Td&&Td.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Td&&Td.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(jle(),u)})(Td)),Td}var wd={},Um={},LU;function Mle(){if(LU)return Um;LU=1,Object.defineProperty(Um,"__esModule",{value:!0}),Um.ActorQueryOperationDrop=void 0;const u=Lt(),n=Ce(),o=gt();let i=class extends u.ActorQueryOperationTypedMediated{constructor(e){super(e,"drop")}async testOperation(e,r){return(0,o.testReadOnly)(r)}async runOperation(e,r){const a=r.getSafe(n.KeysInitQuery.dataFactory);let c;e.source==="DEFAULT"?c=a.defaultGraph():typeof e.source=="string"?c=e.source:c=[e.source];const{execute:s}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:c,requireExistence:!e.silent,dropGraphs:!0},context:r});return{type:"void",execute:s}}};return Um.ActorQueryOperationDrop=i,Um}var MU;function Cle(){return MU||(MU=1,(function(u){var n=wd&&wd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=wd&&wd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Mle(),u)})(wd)),wd}var Sd={},Vm={},CU;function qle(){if(CU)return Vm;CU=1,Object.defineProperty(Vm,"__esModule",{value:!0}),Vm.ActorQueryOperationLoad=void 0;const u=Lt(),n=Ce(),o=gt(),i=dt();let t=class extends u.ActorQueryOperationTypedMediated{constructor(r){super(r,"load")}async testOperation(r,a){return(0,o.testReadOnly)(a)}async runOperation(r,a){const c=a.getSafe(n.KeysInitQuery.dataFactory),s=new i.Factory(c);let d=a;r.silent&&(d=d.set(n.KeysInitQuery.lenient,!0));const{querySource:l}=await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{value:r.source.value},context:d});let h=(0,o.getSafeQuads)(await this.mediatorQueryOperation.mediate({operation:s.createConstruct((0,o.assignOperationSource)(s.createPattern(c.variable("s"),c.variable("p"),c.variable("o")),l),[s.createPattern(c.variable("s"),c.variable("p"),c.variable("o"))]),context:d})).quadStream;r.destination&&(h=h.map(y=>c.quad(y.subject,y.predicate,y.object,r.destination)));const{execute:p}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:h,context:a});return{type:"void",execute:p}}};return Vm.ActorQueryOperationLoad=t,Vm}var qU;function Ble(){return qU||(qU=1,(function(u){var n=Sd&&Sd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Sd&&Sd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(qle(),u)})(Sd)),Sd}var Ad={},Qm={},BU;function $le(){if(BU)return Qm;BU=1,Object.defineProperty(Qm,"__esModule",{value:!0}),Qm.ActorQueryOperationJoin=void 0;const u=Lt(),n=Hr(),o=be(),i=br(),t=gt(),e=pt(),r=hr();let a=class extends u.ActorQueryOperationTypedMediated{constructor(s){super(s,"join")}async testOperation(s,d){return(0,o.passTestVoid)()}async runOperation(s,d){const l=(await Promise.all(s.input.map(async f=>({output:await this.mediatorQueryOperation.mediate({operation:f,context:d}),operation:f})))).map(({output:f,operation:h})=>({output:(0,t.getSafeBindings)(f),operation:h}));if((await Promise.all(l.map(f=>f.output.metadata()))).some(f=>f.cardinality.value===0&&f.cardinality.type==="exact")){for(const f of l)f.output.bindingsStream.close();return{bindingsStream:new e.ArrayIterator([],{autoStart:!1}),metadata:async()=>({state:new i.MetadataValidationState,cardinality:{type:"exact",value:0},variables:n.ActorRdfJoin.joinVariables(new r.DataFactory,await n.ActorRdfJoin.getMetadatas(l))}),type:"bindings"}}return this.mediatorJoin.mediate({type:"inner",entries:l,context:d})}};return Qm.ActorQueryOperationJoin=a,Qm}var $U;function Ule(){return $U||($U=1,(function(u){var n=Ad&&Ad.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ad&&Ad.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o($le(),u)})(Ad)),Ad}var Od={},Hm={},UU;function Vle(){if(UU)return Hm;UU=1,Object.defineProperty(Hm,"__esModule",{value:!0}),Hm.ActorQueryOperationLeftJoin=void 0;const u=Lt(),n=be(),o=$t(),i=ge(),t=gt();let e=class extends u.ActorQueryOperationTypedMediated{constructor(a){super(a,"leftjoin"),this.mediatorExpressionEvaluatorFactory=a.mediatorExpressionEvaluatorFactory}async testOperation(a,c){return(0,n.passTestVoid)()}async runOperation(a,c){const s=(await Promise.all(a.input.map(async l=>({output:await this.mediatorQueryOperation.mediate({operation:l,context:c}),operation:l})))).map(({output:l,operation:f})=>({output:(0,t.getSafeBindings)(l),operation:f})),d=await this.mediatorJoin.mediate({type:"optional",entries:s,context:c});if(a.expression){const f=(await s[1].output.metadata()).variables,h=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:a.expression,context:c}),p=d.bindingsStream.transform({autoStart:!1,transform:async(y,_,b)=>{if(!f.every(m=>y.has(m.variable.value)))return b(y),_();try{await h.evaluateAsEBV(y)&&b(y)}catch(m){(0,i.isExpressionError)(m)?this.logWarn(c,"Error occurred while filtering.",()=>({error:m,bindings:(0,o.bindingsToString)(y)})):p.emit("error",m)}_()}});d.bindingsStream=p}return d}};return Hm.ActorQueryOperationLeftJoin=e,Hm}var VU;function Qle(){return VU||(VU=1,(function(u){var n=Od&&Od.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Od&&Od.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Vle(),u)})(Od)),Od}var Ed={},Gm={},QU;function Hle(){if(QU)return Gm;QU=1,Object.defineProperty(Gm,"__esModule",{value:!0}),Gm.ActorQueryOperationMinus=void 0;const u=Lt(),n=be(),o=gt();let i=class extends u.ActorQueryOperationTypedMediated{constructor(e){super(e,"minus")}async testOperation(e,r){return(0,n.passTestVoid)()}async runOperation(e,r){const a=(await Promise.all(e.input.map(async c=>({output:await this.mediatorQueryOperation.mediate({operation:c,context:r}),operation:c})))).map(({output:c,operation:s})=>({output:(0,o.getSafeBindings)(c),operation:s}));return this.mediatorJoin.mediate({type:"minus",entries:a,context:r})}};return Gm.ActorQueryOperationMinus=i,Gm}var HU;function Gle(){return HU||(HU=1,(function(u){var n=Ed&&Ed.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ed&&Ed.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Hle(),u)})(Ed)),Ed}var xd={},zm={},GU;function zle(){if(GU)return zm;GU=1,Object.defineProperty(zm,"__esModule",{value:!0}),zm.ActorQueryOperationPathSeq=void 0;const u=sa(),n=Ce(),o=gt(),i=dt();let t=class extends u.ActorAbstractPath{constructor(r){super(r,i.Algebra.types.SEQ)}async runOperation(r,a){const c=a.getSafe(n.KeysInitQuery.dataFactory),s=new i.Factory(c),d=r.predicate;let l=r.subject;const f=[],h=await Promise.all(d.input.map((_,b)=>{const m=b===d.input.length-1?r.object:this.generateVariable(c,r,`b${b}`),g=s.createPath(l,_,m,r.graph),T=this.mediatorQueryOperation.mediate({context:a,operation:g});return l=m,b<d.input.length-1&&f.push(m),{output:T,operation:g}}).map(async({output:_,operation:b})=>({output:(0,o.getSafeBindings)(await _),operation:b}))),p=(0,o.getSafeBindings)(await this.mediatorJoin.mediate({type:"inner",entries:h,context:a}));return{type:"bindings",bindingsStream:p.bindingsStream.transform({transform(_,b,m){for(const g of f)_=_.delete(g);m(_),b()}}),async metadata(){const _=await p.metadata(),b=_.variables.filter(m=>!f.some(g=>g.value===m.variable.value));return{..._,variables:b}}}}};return zm.ActorQueryOperationPathSeq=t,zm}var zU;function Xle(){return zU||(zU=1,(function(u){var n=xd&&xd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=xd&&xd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(zle(),u)})(xd)),xd}var Id={},Xm={},XU;function Jle(){if(XU)return Xm;XU=1,Object.defineProperty(Xm,"__esModule",{value:!0}),Xm.ActorRdfJoinMultiSmallest=void 0;const u=Hr(),n=Ce(),o=be(),i=gt(),t=dt();let e=class extends u.ActorRdfJoin{constructor(a){super(a,{logicalType:"inner",physicalName:"multi-smallest",limitEntries:3,limitEntriesMin:!0,canHandleUndefs:!0,isLeaf:!1})}async sortJoinEntries(a,c){return(await this.mediatorJoinEntriesSort.mediate({entries:a,context:c})).entries}async getOutput(a,c){const s=a.context.getSafe(n.KeysInitQuery.dataFactory),d=new t.Factory(s),l=c.sortedEntries,f=l[0],h=l[1];l.splice(0,2);const p={output:(0,i.getSafeBindings)(await this.mediatorJoin.mediate({type:a.type,entries:[f,h],context:a.context})),operation:d.createJoin([f.operation,h.operation],!1)};return l.push(p),{result:await this.mediatorJoin.mediate({type:a.type,entries:l,context:a.context})}}async getJoinCoefficients(a,c){let{metadatas:s}=c;s=[...s];const d=await this.sortJoinEntries(a.entries.map((h,p)=>({...h,metadata:s[p]})),a.context);s=d.map(h=>h.metadata);const l=u.ActorRdfJoin.getRequestInitialTimes(s),f=u.ActorRdfJoin.getRequestItemTimes(s);return(0,o.passTestWithSideData)({iterations:s[0].cardinality.value*s[1].cardinality.value*s.slice(2).reduce((h,p)=>h*p.cardinality.value,1),persistedItems:0,blockingItems:0,requestTime:l[0]+s[0].cardinality.value*f[0]+l[1]+s[1].cardinality.value*f[1]+s.slice(2).reduce((h,p,y)=>h+l.slice(2)[y]+p.cardinality.value*f.slice(2)[y],0)},{...c,sortedEntries:d})}};return Xm.ActorRdfJoinMultiSmallest=e,Xm}var JU;function kle(){return JU||(JU=1,(function(u){var n=Id&&Id.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Id&&Id.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Jle(),u)})(Id)),Id}var Rd={},Jm={},km={},kU;function KJ(){if(kU)return km;kU=1,Object.defineProperty(km,"__esModule",{value:!0}),km.MaxAggregator=void 0;const u=jr();let n=class extends u.AggregateEvaluator{constructor(i,t,e,r){super(i,t,r),this.orderByEvaluator=e,this.state=void 0}putTerm(i){if(i.termType!=="Literal")throw new Error(`Term with value ${i.value} has type ${i.termType} and is not a literal`);this.state===void 0?this.state=i:this.orderByEvaluator.orderTypes(this.state,i)===-1&&(this.state=i)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return km.MaxAggregator=n,km}var KU;function Kle(){if(KU)return Jm;KU=1,Object.defineProperty(Jm,"__esModule",{value:!0}),Jm.ActorBindingsAggregatorFactoryMax=void 0;const u=jr(),n=be(),o=KJ();let i=class extends u.ActorBindingsAggregatorFactory{constructor(e){super(e),this.mediatorTermComparatorFactory=e.mediatorTermComparatorFactory}async test(e){return e.expr.aggregator!=="max"?(0,n.failTest)("This actor only supports the 'max' aggregator."):(0,n.passTestVoid)()}async run({expr:e,context:r}){return new o.MaxAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:e.expression,context:r}),e.distinct,await this.mediatorTermComparatorFactory.mediate({context:r}))}};return Jm.ActorBindingsAggregatorFactoryMax=i,Jm}var WU;function Wle(){return WU||(WU=1,(function(u){var n=Rd&&Rd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Rd&&Rd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Kle(),u),o(KJ(),u)})(Rd)),Rd}var Fd={},Km={},Wm={},YU;function WJ(){if(YU)return Wm;YU=1,Object.defineProperty(Wm,"__esModule",{value:!0}),Wm.MinAggregator=void 0;const u=jr();let n=class extends u.AggregateEvaluator{constructor(i,t,e,r){super(i,t,r),this.orderByEvaluator=e,this.state=void 0}putTerm(i){if(i.termType!=="Literal")throw new Error(`Term with value ${i.value} has type ${i.termType} and is not a literal`);this.state===void 0?this.state=i:this.orderByEvaluator.orderTypes(this.state,i)===1&&(this.state=i)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return Wm.MinAggregator=n,Wm}var ZU;function Yle(){if(ZU)return Km;ZU=1,Object.defineProperty(Km,"__esModule",{value:!0}),Km.ActorBindingsAggregatorFactoryMin=void 0;const u=jr(),n=be(),o=WJ();let i=class extends u.ActorBindingsAggregatorFactory{constructor(e){super(e),this.mediatorTermComparatorFactory=e.mediatorTermComparatorFactory}async test(e){return e.expr.aggregator!=="min"?(0,n.failTest)("This actor only supports the 'min' aggregator."):(0,n.passTestVoid)()}async run({context:e,expr:r}){return new o.MinAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:r.expression,context:e}),r.distinct,await this.mediatorTermComparatorFactory.mediate({context:e}))}};return Km.ActorBindingsAggregatorFactoryMin=i,Km}var eV;function Zle(){return eV||(eV=1,(function(u){var n=Fd&&Fd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Fd&&Fd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Yle(),u),o(WJ(),u)})(Fd)),Fd}var Nd={},Ym={},Zm={},tV;function efe(){if(tV)return Zm;tV=1,Object.defineProperty(Zm,"__esModule",{value:!0}),Zm.SortIterator=void 0;const u=pt();let n=class extends u.TransformIterator{constructor(i,t,e){super(i,e);const r=e&&e.window;this.windowLength=Number.isFinite(r)&&r>0?r:Number.POSITIVE_INFINITY,this.sort=t,this.sorted=[]}_read(i,t){let e,{length:r}=this.sorted;for(;r!==this.windowLength&&(e=this.source.read(),e!==null);){let a=0,c=r-1,s,d;for(;a<=c;)s=Math.trunc((a+c)/2),d=this.sort(e,this.sorted[s]),d<0?a=s+1:d>0?c=s-1:(a=s,c=-1);this.sorted.splice(a,0,e),r++}r===this.windowLength&&this._push(this.sorted.pop()),t()}_flush(i){let{length:t}=this.sorted;for(;t--;)this._push(this.sorted.pop());i()}};return Zm.SortIterator=n,Zm}var rV;function tfe(){if(rV)return Ym;rV=1,Object.defineProperty(Ym,"__esModule",{value:!0}),Ym.ActorQueryOperationOrderBy=void 0;const u=Lt(),n=be(),o=ge(),i=gt(),t=dt(),e=efe();let r=class extends u.ActorQueryOperationTypedMediated{constructor(c){super(c,"orderby"),this.window=c.window??Number.POSITIVE_INFINITY,this.mediatorExpressionEvaluatorFactory=c.mediatorExpressionEvaluatorFactory,this.mediatorTermComparatorFactory=c.mediatorTermComparatorFactory}async testOperation(){return(0,n.passTestVoid)()}async runOperation(c,s){const d=await this.mediatorQueryOperation.mediate({operation:c.input,context:s}),l=(0,i.getSafeBindings)(d),f={window:this.window};let{bindingsStream:h}=l;const p=await this.mediatorTermComparatorFactory.mediate({context:s});for(let y=c.expressions.length-1;y>=0;y--){let _=c.expressions[y];const b=this.isAscending(_);_=this.extractSortExpression(_);const m=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:_,context:s}),g=async(A,I,q)=>{try{const O=await m.evaluate(A);q({bindings:A,result:O})}catch(O){(0,o.isExpressionError)(O)||h.emit("error",O),q({bindings:A,result:void 0})}I()},T=h.transform({transform:g});h=new e.SortIterator(T,(A,I)=>{let q=p.orderTypes(A.result,I.result);return b||(q*=-1),q},f).map(({bindings:A})=>A)}return{type:"bindings",bindingsStream:h,metadata:l.metadata}}extractSortExpression(c){const{expressionType:s,operator:d}=c;return s!==t.Algebra.expressionTypes.OPERATOR?c:d==="desc"?c.args[0]:c}isAscending(c){const{expressionType:s,operator:d}=c;return s!==t.Algebra.expressionTypes.OPERATOR?!0:d!=="desc"}};return Ym.ActorQueryOperationOrderBy=r,Ym}var nV;function rfe(){return nV||(nV=1,(function(u){var n=Nd&&Nd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Nd&&Nd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(tfe(),u)})(Nd)),Nd}var Pd={},e2={},iV;function nfe(){if(iV)return e2;iV=1,Object.defineProperty(e2,"__esModule",{value:!0}),e2.ActorOptimizeQueryOperationFilterPushdown=void 0;const u=mn(),n=Ce(),o=be(),i=gt(),t=gn(),e=dt();let r=class extends u.ActorOptimizeQueryOperation{constructor(c){super(c)}async test(c){return(0,o.passTestVoid)()}async run(c){const s=c.context.getSafe(n.KeysInitQuery.dataFactory),d=new e.Factory(s);let l=c.operation;const f=this;this.splitConjunctive&&(l=e.Util.mapOperation(l,{filter(b,m){return b.expression.expressionType===e.Algebra.expressionTypes.OPERATOR&&b.expression.operator==="&&"?(f.logDebug(c.context,`Split conjunctive filter into ${b.expression.args.length} nested filters`),{recurse:!0,result:b.expression.args.reduce((g,T)=>m.createFilter(g,T),b.input)}):{recurse:!0,result:b}}},d));const h=this.getSources(l),p=new Map(await Promise.all(h.map(async b=>[b,await b.source.getSelectorShape(c.context)])));let y=!0,_=0;for(;y&&_<this.maxIterations;)y=!1,l=e.Util.mapOperation(l,{filter(b,m){if(!f.shouldAttemptPushDown(b,h,p))return{recurse:!0,result:b};const g=f.getExpressionVariables(b.expression),[T,v]=f.filterPushdown(b.expression,g,b.input,m,c.context);return T&&(y=!0),{recurse:!0,result:v}}}),_++;return _>1&&f.logDebug(c.context,`Pushed down filters in ${_} iterations`),this.mergeConjunctive&&(l=e.Util.mapOperation(l,{filter(b,m){if(b.input.type===e.Algebra.types.FILTER){const{nestedExpressions:g,input:T}=f.getNestedFilterExpressions(b);return f.logDebug(c.context,`Merge ${g.length} nested filters into conjunctive filter`),{recurse:!0,result:m.createFilter(T,g.slice(1).reduce((v,A)=>m.createOperatorExpression("&&",[v,A]),g[0]))}}return{recurse:!0,result:b}}})),{operation:l,context:c.context}}shouldAttemptPushDown(c,s,d){if(this.aggressivePushdown)return!0;const l=c.expression;return!!(l.expressionType===e.Algebra.expressionTypes.OPERATOR&&l.operator==="="&&(l.args[0].expressionType==="term"&&l.args[0].term.termType!=="Variable"&&l.args[1].expressionType==="term"&&l.args[1].term.termType==="Variable"||l.args[0].expressionType==="term"&&l.args[0].term.termType==="Variable"&&l.args[1].expressionType==="term"&&l.args[1].term.termType!=="Variable")||s.some(f=>(0,i.doesShapeAcceptOperation)(d.get(f),c)))}getSources(c){const s=new Set,d=l=>{const f=(0,i.getOperationSource)(l);return f&&s.add(f),!1};return e.Util.recurseOperation(c,{[e.Algebra.types.PATTERN]:d,[e.Algebra.types.LINK]:d,[e.Algebra.types.NPS]:d,[e.Algebra.types.SERVICE]:d}),[...s]}getExpressionVariables(c){switch(c.expressionType){case e.Algebra.expressionTypes.AGGREGATE:case e.Algebra.expressionTypes.WILDCARD:throw new Error(`Getting expression variables is not supported for ${c.expressionType}`);case e.Algebra.expressionTypes.EXISTENCE:return e.Util.inScopeVariables(c.input);case e.Algebra.expressionTypes.NAMED:return[];case e.Algebra.expressionTypes.OPERATOR:return(0,t.uniqTerms)(c.args.flatMap(s=>this.getExpressionVariables(s)));case e.Algebra.expressionTypes.TERM:return c.term.termType==="Variable"?[c.term]:[]}}getOverlappingOperations(c,s){const d=[],l=[],f=[];for(const h of c.input){const p=e.Util.inScopeVariables(h);this.variablesSubSetOf(s,p)?d.push(h):this.variablesIntersect(s,p)?l.push(h):f.push(h)}return{fullyOverlapping:d,partiallyOverlapping:l,notOverlapping:f}}filterPushdown(c,s,d,l,f){if(this.isExpressionFalse(c))return[!0,l.createUnion([])];if(c.type===e.Algebra.types.EXPRESSION&&c.expressionType===e.Algebra.expressionTypes.EXISTENCE)return[!1,l.createFilter(d,c)];switch(d.type){case e.Algebra.types.EXTEND:return this.variablesIntersect([d.variable],s)?[!1,l.createFilter(d,c)]:[!0,l.createExtend(this.filterPushdown(c,s,d.input,l,f)[1],d.variable,d.expression)];case e.Algebra.types.FILTER:{const[h,p]=this.filterPushdown(c,s,d.input,l,f);return[h,l.createFilter(p,d.expression)]}case e.Algebra.types.JOIN:{if(d.input.length===0)return[!1,l.createFilter(d,c)];const{fullyOverlapping:h,partiallyOverlapping:p,notOverlapping:y}=this.getOverlappingOperations(d,s),_=[];let b=!1;return h.length>0&&(b=!0,_.push(l.createJoin(h.map(m=>this.filterPushdown(c,s,m,l,f)[1])))),p.length>0&&_.push(l.createFilter(l.createJoin(p,!1),c)),y.length>0&&_.push(...y),_.length>1&&(b=!0),b&&this.logDebug(f,`Push down filter across join entries with ${h.length} fully overlapping, ${p.length} partially overlapping, and ${y.length} not overlapping`),[b,_.length===1?_[0]:l.createJoin(_)]}case e.Algebra.types.NOP:return[!0,d];case e.Algebra.types.PROJECT:return this.variablesIntersect(d.variables,s)?[!0,l.createProject(this.filterPushdown(c,s,d.input,l,f)[1],d.variables)]:[!0,d];case e.Algebra.types.UNION:{const{fullyOverlapping:h,partiallyOverlapping:p,notOverlapping:y}=this.getOverlappingOperations(d,s),_=[];let b=!1;return h.length>0&&(b=!0,_.push(l.createUnion(h.map(m=>this.filterPushdown(c,s,m,l,f)[1])))),p.length>0&&_.push(l.createFilter(l.createUnion(p,!1),c)),y.length>0&&_.push(...y),_.length>1&&(b=!0),b&&this.logDebug(f,`Push down filter across union entries with ${h.length} fully overlapping, ${p.length} partially overlapping, and ${y.length} not overlapping`),[b,_.length===1?_[0]:l.createUnion(_)]}case e.Algebra.types.VALUES:return this.variablesIntersect(d.variables,s)?[!1,l.createFilter(d,c)]:[!0,d];case e.Algebra.types.LEFT_JOIN:{if(this.pushIntoLeftJoins){const h=e.Util.inScopeVariables(d.input[1]);if(!this.variablesIntersect(s,h))return this.logDebug(f,"Push down filter into left join"),[!0,l.createLeftJoin(this.filterPushdown(c,s,d.input[0],l,f)[1],d.input[1],d.expression)]}return[!1,l.createFilter(d,c)]}case e.Algebra.types.PATTERN:{if(this.pushEqualityIntoPatterns){const h=this.getEqualityExpressionPushableIntoPattern(c);if(h){let p=!1;const y=d.metadata;if(d=(0,t.mapTermsNested)(d,_=>_.equals(h.variable)?(p=!0,h.term):_),d.type=e.Algebra.types.PATTERN,d.metadata=y,p)return this.logDebug(f,`Push down filter into pattern for ?${h.variable.value}`),[!0,l.createJoin([d,l.createValues([h.variable],[{[`?${h.variable.value}`]:h.term}])])]}}return[!1,l.createFilter(d,c)]}case e.Algebra.types.PATH:{if(this.pushEqualityIntoPatterns){const h=this.getEqualityExpressionPushableIntoPattern(c);if(h&&(d.subject.equals(h.variable)||d.object.equals(h.variable))){this.logDebug(f,`Push down filter into path for ?${h.variable.value}`);const p=d.metadata;return d=l.createPath(d.subject.equals(h.variable)?h.term:d.subject,d.predicate,d.object.equals(h.variable)?h.term:d.object),d.metadata=p,[!0,l.createJoin([d,l.createValues([h.variable],[{[`?${h.variable.value}`]:h.term}])])]}}return[!1,l.createFilter(d,c)]}case e.Algebra.types.MINUS:case e.Algebra.types.ALT:case e.Algebra.types.ASK:case e.Algebra.types.BGP:case e.Algebra.types.CONSTRUCT:case e.Algebra.types.DESCRIBE:case e.Algebra.types.DISTINCT:case e.Algebra.types.EXPRESSION:case e.Algebra.types.FROM:case e.Algebra.types.GRAPH:case e.Algebra.types.GROUP:case e.Algebra.types.INV:case e.Algebra.types.LINK:case e.Algebra.types.NPS:case e.Algebra.types.ONE_OR_MORE_PATH:case e.Algebra.types.ORDER_BY:case e.Algebra.types.REDUCED:case e.Algebra.types.SEQ:case e.Algebra.types.SERVICE:case e.Algebra.types.SLICE:case e.Algebra.types.ZERO_OR_MORE_PATH:case e.Algebra.types.ZERO_OR_ONE_PATH:case e.Algebra.types.COMPOSITE_UPDATE:case e.Algebra.types.DELETE_INSERT:case e.Algebra.types.LOAD:case e.Algebra.types.CLEAR:case e.Algebra.types.CREATE:case e.Algebra.types.DROP:case e.Algebra.types.ADD:case e.Algebra.types.MOVE:case e.Algebra.types.COPY:return[!1,l.createFilter(d,c)]}}getEqualityExpressionPushableIntoPattern(c){if(c.expressionType===e.Algebra.expressionTypes.OPERATOR&&c.operator==="="){if(c.args[0].expressionType==="term"&&c.args[0].term.termType!=="Variable"&&(c.args[0].term.termType!=="Literal"||this.isLiteralWithCanonicalLexicalForm(c.args[0].term))&&c.args[1].expressionType==="term"&&c.args[1].term.termType==="Variable")return{variable:c.args[1].term,term:c.args[0].term};if(c.args[0].expressionType==="term"&&c.args[0].term.termType==="Variable"&&c.args[1].expressionType==="term"&&c.args[1].term.termType!=="Variable"&&(c.args[1].term.termType!=="Literal"||this.isLiteralWithCanonicalLexicalForm(c.args[1].term)))return{variable:c.args[0].term,term:c.args[1].term}}}isLiteralWithCanonicalLexicalForm(c){if(c.termType==="Literal")switch(c.datatype.value){case"http://www.w3.org/2001/XMLSchema#string":case"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":case"http://www.w3.org/2001/XMLSchema#normalizedString":case"http://www.w3.org/2001/XMLSchema#anyURI":case"http://www.w3.org/2001/XMLSchema#base64Binary":case"http://www.w3.org/2001/XMLSchema#language":case"http://www.w3.org/2001/XMLSchema#Name":case"http://www.w3.org/2001/XMLSchema#NCName":case"http://www.w3.org/2001/XMLSchema#NMTOKEN":case"http://www.w3.org/2001/XMLSchema#token":case"http://www.w3.org/2001/XMLSchema#hexBinary":return!0}return!1}variablesIntersect(c,s){return c.some(d=>s.some(l=>d.equals(l)))}variablesSubSetOf(c,s){return c.length<=s.length&&c.every(d=>s.some(l=>d.equals(l)))}isExpressionFalse(c){return c.term&&c.term.termType==="Literal"&&c.term.value==="false"}getNestedFilterExpressions(c){if(c.input.type===e.Algebra.types.FILTER){const s=this.getNestedFilterExpressions(c.input);return{nestedExpressions:[c.expression,...s.nestedExpressions],input:s.input}}return{nestedExpressions:[c.expression],input:c.input}}};return e2.ActorOptimizeQueryOperationFilterPushdown=r,e2}var aV;function ife(){return aV||(aV=1,(function(u){var n=Pd&&Pd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Pd&&Pd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(nfe(),u)})(Pd)),Pd}var Dd={},t2={},jd={},uV;function YJ(){if(uV)return jd;uV=1,Object.defineProperty(jd,"__esModule",{value:!0}),jd.ActorDereferenceHttpBase=jd.mediaTypesToAcceptString=void 0;const u=CO(),n=Pi(),o=be(),i=Jf(),t=cr(),e=/^[^ ;]*/u;function r(c,s){const d="*/*;q=0.1",l=[],f=Object.entries(c).map(([p,y])=>({mediaType:p,priority:y})).sort((p,y)=>y.priority===p.priority?p.mediaType.localeCompare(y.mediaType):y.priority-p.priority);let h=f.length-1;for(const{mediaType:p,priority:y}of f){const _=p+(y===1?"":`;q=${y.toFixed(3).replace(/0*$/u,"")}`);if(h+_.length>s){for(;h+d.length>s;){const b=l.pop()??"";h-=b.length+1}l.push(d);break}l.push(_),h+=_.length}return l.length===0?"*/*":l.join(",")}jd.mediaTypesToAcceptString=r;let a=class extends u.ActorDereference{constructor(s){super(s)}async test({url:s}){return/^https?:/u.test(s)?(0,o.passTestVoid)():(0,o.failTest)(`Cannot retrieve ${s} because it is not an HTTP(S) URL.`)}async run(s){var b,m;let d=!0;const l=new Headers(s.headers);l.append("Accept",r(await((b=s.mediaTypes)==null?void 0:b.call(s))??{},this.getMaxAcceptHeaderLength()));let f;const h=Date.now();try{f=await this.mediatorHttp.mediate({context:s.context,init:{headers:l,method:s.method},input:s.url})}catch(g){return this.handleDereferenceErrors(s,g)}const p=(0,t.resolve)(f.url,s.url),y=Date.now()-h;if(f.status!==200){d=!1;const g=f.body?await(0,i.stringify)(n.ActorHttp.toNodeReadable(f.body)):"empty response";if(!s.acceptErrors){const T=new Error(`Could not retrieve ${s.url} (HTTP status ${f.status}):
${g}`);return this.handleDereferenceErrors(s,T,f.headers,y)}}const _=(m=e.exec(f.headers.get("content-type")??""))==null?void 0:m[0];return{url:p,data:d?n.ActorHttp.toNodeReadable(f.body):(0,u.emptyReadable)(),exists:d,requestTime:y,headers:f.headers,mediaType:_==="text/plain"?void 0:_}}};return jd.ActorDereferenceHttpBase=a,jd}var oV;function afe(){if(oV)return t2;oV=1,Object.defineProperty(t2,"__esModule",{value:!0}),t2.ActorDereferenceHttp=void 0;const u=YJ();class n extends u.ActorDereferenceHttpBase{getMaxAcceptHeaderLength(){return this.maxAcceptHeaderLengthBrowser}}return t2.ActorDereferenceHttp=n,t2}var sV;function ufe(){return sV||(sV=1,(function(u){var n=Dd&&Dd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Dd&&Dd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(afe(),u),o(YJ(),u)})(Dd)),Dd}var Ld={},r2={},cV;function ofe(){if(cV)return r2;cV=1,Object.defineProperty(r2,"__esModule",{value:!0}),r2.ActorHttpProxy=void 0;const u=Pi(),n=Ce(),o=be();let i=class extends u.ActorHttp{constructor(e){super(e)}async test(e){const r=e.context.get(n.KeysHttpProxy.httpProxyHandler);return r?await r.getProxy(e)?(0,o.passTest)({time:Number.POSITIVE_INFINITY}):(0,o.failTest)(`Actor ${this.name} could not determine a proxy for the given request.`):(0,o.failTest)(`Actor ${this.name} could not find a proxy handler in the context.`)}async run(e){const r=typeof e.input=="string"?e.input:e.input.url,a=e.context.get(n.KeysHttpProxy.httpProxyHandler),c=await this.mediatorHttp.mediate({...await a.getProxy(e),context:e.context.delete(n.KeysHttpProxy.httpProxyHandler)});return Object.defineProperty(c,"url",{configurable:!0,enumerable:!0,get:()=>c.headers.get("x-final-url")??r}),c}};return r2.ActorHttpProxy=i,r2}var n2={},dV;function sfe(){if(dV)return n2;dV=1,Object.defineProperty(n2,"__esModule",{value:!0}),n2.ProxyHandlerStatic=void 0;let u=class{constructor(o){this.prefixUrl=o}async getProxy(o){return{init:o.init,input:this.modifyInput(o.input)}}modifyInput(o){return typeof o=="string"?this.prefixUrl+o:new Request(this.prefixUrl+o.url,o)}};return n2.ProxyHandlerStatic=u,n2}var lV;function cfe(){return lV||(lV=1,(function(u){var n=Ld&&Ld.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ld&&Ld.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ofe(),u),o(sfe(),u)})(Ld)),Ld}var Md={},i2={},fV;function dfe(){if(fV)return i2;fV=1,Object.defineProperty(i2,"__esModule",{value:!0}),i2.ActorContextPreprocessQuerySourceIdentify=void 0;const u=Fv(),n=Ce(),o=be(),i=Vf();let t=class extends u.ActorContextPreprocess{constructor(r){super(r),this.cache=this.cacheSize?new i.LRUCache({max:this.cacheSize}):void 0;const a=this.cache;a&&this.httpInvalidator.addInvalidateListener(({url:c})=>c?a.delete(c):a.clear())}async test(r){return(0,o.passTestVoid)()}async run(r){let a=r.context;if(a.has(n.KeysInitQuery.querySourcesUnidentified)){const c=r.context.get(n.KeysInitQuery.querySourcesUnidentified),s=await Promise.all(c.map(f=>this.expandSource(f))),d=await Promise.all(s.map(async f=>this.identifySource(f,r.context))),l=r.context.get(n.KeysStatistics.dereferencedLinks);if(l)for(const f of d)l.updateStatistic({url:f.source.referenceValue,metadata:{seed:!0}},f.source);a=r.context.delete(n.KeysInitQuery.querySourcesUnidentified).set(n.KeysQueryOperation.querySources,d)}return{context:a}}async expandSource(r){return typeof r=="string"||"match"in r?{value:r}:{...r,context:(await this.mediatorContextPreprocess.mediate({context:o.ActionContext.ensureActionContext(r.context??{})})).context}}identifySource(r,a){let c;return typeof r.value=="string"&&this.cache&&(c=this.cache.get(r.value)),c||(c=this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:r,context:a}).then(({querySource:s})=>s),typeof r.value=="string"&&this.cache&&this.cache.set(r.value,c)),c}};return i2.ActorContextPreprocessQuerySourceIdentify=t,i2}var hV;function lfe(){return hV||(hV=1,(function(u){var n=Md&&Md.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Md&&Md.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(dfe(),u)})(Md)),Md}var Cd={},a2={},pV;function ffe(){if(pV)return a2;pV=1,Object.defineProperty(a2,"__esModule",{value:!0}),a2.ActorRdfUpdateQuadsHypermedia=void 0;const u=kO(),n=be(),o=Vf();let i=class extends u.ActorRdfUpdateQuadsDestination{constructor(e){super(e),this.cache=this.cacheSize?new o.LRUCache({max:this.cacheSize}):void 0;const r=this.cache;r&&this.httpInvalidator.addInvalidateListener(({url:a})=>a?r.delete(a):r.clear())}async test(e){return(0,u.getContextDestinationUrl)((0,u.getContextDestination)(e.context))?(0,n.passTestVoid)():(0,n.failTest)(`Actor ${this.name} can only update quads against a single destination URL.`)}getDestination(e){const r=(0,u.getContextDestination)(e);let a=(0,u.getContextDestinationUrl)(r);if(this.cache&&this.cache.has(a))return this.cache.get(a);const c=(async()=>{var f;let s,d;try{const h=await this.mediatorDereferenceRdf.mediate({context:e,url:a,acceptErrors:!0});d=h.exists,a=h.url;const p=await this.mediatorMetadata.mediate({context:e,url:a,quads:h.data,triples:(f=h.metadata)==null?void 0:f.triples});s=(await this.mediatorMetadataExtract.mediate({context:e,url:a,metadata:p.metadata,headers:h.headers,requestTime:h.requestTime})).metadata}catch{s={},d=!1}const{destination:l}=await this.mediatorRdfUpdateHypermedia.mediate({context:e,url:a,metadata:s,exists:d,forceDestinationType:(0,u.getDataDestinationType)(r)});return l})();return this.cache&&this.cache.set(a,c),c}};return a2.ActorRdfUpdateQuadsHypermedia=i,a2}var bV;function hfe(){return bV||(bV=1,(function(u){var n=Cd&&Cd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Cd&&Cd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ffe(),u)})(Cd)),Cd}var qd={},u2={},yV;function pfe(){if(yV)return u2;yV=1,Object.defineProperty(u2,"__esModule",{value:!0}),u2.ActionObserverHttp=void 0;const u=be();class n extends u.ActionObserver{constructor(i){super(i),this.requests=0,this.bus.subscribeObserver(this),this.httpInvalidator.addInvalidateListener(()=>{this.requests=0})}onRun(i,t,e){this.observedActors.includes(i.name)&&this.requests++}}return u2.ActionObserverHttp=n,u2}var o2={},_V;function bfe(){if(_V)return o2;_V=1,Object.defineProperty(o2,"__esModule",{value:!0}),o2.ActorQueryResultSerializeSparqlJson=void 0;const u=ri(),n=be(),o=pt(),i=Dt();let t=class J3 extends u.ActorQueryResultSerializeFixedMediaTypes{constructor(r){super(r)}static bindingToJsonBindings(r){if(r.termType==="Literal"){const a=r,c={value:a.value,type:"literal"},{language:s,datatype:d}=a;return s?c["xml:lang"]=s:d&&d.value!=="http://www.w3.org/2001/XMLSchema#string"&&(c.datatype=d.value),c}return r.termType==="BlankNode"?{value:r.value,type:"bnode"}:r.termType==="Quad"?{value:{subject:J3.bindingToJsonBindings(r.subject),predicate:J3.bindingToJsonBindings(r.predicate),object:J3.bindingToJsonBindings(r.object)},type:"triple"}:{value:r.value,type:"uri"}}async testHandleChecked(r,a){return["bindings","boolean"].includes(r.type)?(0,n.passTestVoid)():(0,n.failTest)("This actor can only handle bindings streams or booleans.")}async runHandle(r,a,c){const s=new i.Readable,d={};if(r.type==="bindings"){const l=await r.metadata();l.variables.length>0&&(d.vars=l.variables.map(f=>f.variable.value))}if(s.push(`{"head": ${JSON.stringify(d)},
`),r.type==="bindings"){const l=r.bindingsStream;s.push(`"results": { "bindings": [
`);let f=!0;function*h(p){yield p()}s.wrap((0,o.wrap)(l).map(p=>{const y=`${f?"":`,
`}${JSON.stringify(Object.fromEntries([...p].map(([_,b])=>[_.value,J3.bindingToJsonBindings(b)])))}`;return f=!1,y}).append((0,o.wrap)(h(()=>`
]}${this.emitMetadata?`,
"metadata": { "httpRequests": ${this.httpObserver.requests} }`:""}}
`))))}else s.wrap((0,o.wrap)(r.execute().then(l=>[`"boolean":${l}
}
`])));return{data:s}}};return o2.ActorQueryResultSerializeSparqlJson=t,o2}var gV;function mV(){return gV||(gV=1,(function(u){var n=qd&&qd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=qd&&qd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(pfe(),u),o(bfe(),u)})(qd)),qd}var Bd={},s2={},vV;function yfe(){if(vV)return s2;vV=1,Object.defineProperty(s2,"__esModule",{value:!0}),s2.ActionObserverHttp=void 0;const u=be();let n=class extends u.ActionObserver{constructor(i){super(i),this.requests=0,this.bus.subscribeObserver(this),this.httpInvalidator.addInvalidateListener(()=>{this.requests=0})}onRun(i,t,e){this.observedActors.includes(i.name)&&this.requests++}};return s2.ActionObserverHttp=n,s2}var c2={},TV;function _fe(){if(TV)return c2;TV=1,Object.defineProperty(c2,"__esModule",{value:!0}),c2.ActorQueryResultSerializeStats=void 0;const u=ri(),n=Ce(),o=be(),i=pt(),t=Dt();let e=class extends u.ActorQueryResultSerializeFixedMediaTypes{constructor(a){super(a)}async testHandleChecked(a,c){return["bindings","quads"].includes(a.type)?(0,o.passTestVoid)():(0,o.failTest)("This actor can only handle bindings streams or quad streams.")}pushHeader(a){const c=["Result","Delay (ms)","HTTP requests"].join(",");a.push(`${c}
`)}createStat(a,c){return`${[c,this.delay(a),this.httpObserver.requests].join(",")}
`}createSpecialLine(a,c){return`${[a,this.delay(c),this.httpObserver.requests].join(",")}
`}async runHandle(a,c,s){const d=new t.Readable,l=a.type==="bindings"?a.bindingsStream:a.quadStream,f=a.context.getSafe(n.KeysInitQuery.queryTimestampHighResolution);let h=1;function*p(_){yield _()}const y=(0,i.wrap)(l).map(()=>this.createStat(f,h++)).prepend([this.createSpecialLine("PLANNING",f)]).append((0,i.wrap)(p(()=>this.createSpecialLine("TOTAL",f))));return this.pushHeader(d),d.wrap(y),{data:d}}now(){return performance.now()}delay(a){return this.now()-a}};return c2.ActorQueryResultSerializeStats=e,c2}var wV;function SV(){return wV||(wV=1,(function(u){var n=Bd&&Bd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Bd&&Bd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(yfe(),u),o(_fe(),u)})(Bd)),Bd}var $d={},d2={},Ud={},l2={},AV;function gfe(){if(AV)return l2;AV=1,Object.defineProperty(l2,"__esModule",{value:!0}),l2.ActorQuerySourceIdentifyHypermedia=void 0;const u=be();class n extends u.Actor{constructor(i,t){super(i),this.sourceType=t}async test(i){return i.forceSourceType&&this.sourceType!==i.forceSourceType?(0,u.failTest)(`Actor ${this.name} is not able to handle source type ${i.forceSourceType}.`):this.testMetadata(i)}}return l2.ActorQuerySourceIdentifyHypermedia=n,l2}var OV;function rE(){return OV||(OV=1,(function(u){var n=Ud&&Ud.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ud&&Ud.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(gfe(),u)})(Ud)),Ud}var f2={},Vd={},h2={},EV;function mfe(){if(EV)return h2;EV=1,Object.defineProperty(h2,"__esModule",{value:!0}),h2.ActorQuerySourceIdentify=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i)}};return h2.ActorQuerySourceIdentify=n,h2}var lr={},xV;function vfe(){if(xV)return lr;xV=1,Object.defineProperty(lr,"__esModule",{value:!0}),lr.filterMatchingQuotedQuads=lr.quadsOrderToBindingsOrder=lr.quadsMetadataToBindingsMetadata=lr.setMetadata=lr.getDuplicateElementLinks=lr.getVariables=lr.isTermVariable=lr.quadsToBindings=void 0;const u=ua(),n=br(),o=tr(),i=gn(),t=pz();function e(h,p,y,_,b){const m=a(p),g=p.graph.termType==="Variable"&&!b,T=c(p),v=(0,i.reduceTermsNested)(p,(q,O,w)=>(O.termType==="Variable"&&(q[w.join("_")]=O.value),q),{});let A=h;g&&(A=A.filter(q=>q.graph.termType!=="DefaultGraph")),T&&(A=A.filter(q=>{for(const O in T){const w=O.split("_"),S=(0,i.getValueNestedPath)(q,w);for(const E of T[O])if(!S.equals((0,i.getValueNestedPath)(q,E)))return!1}return!0}));const I=new u.ClosableIterator(A.map(q=>_.bindings(Object.keys(v).map(O=>{const w=O.split("_"),S=v[O],E=(0,i.getValueNestedPath)(q,w);return[y.variable(S),E]}))),{onClose:()=>h.destroy()});return s(y,I,h,v,m,g||!!T),I}lr.quadsToBindings=e;function r(h){return h.termType==="Variable"}lr.isTermVariable=r;function a(h){return(0,i.uniqTerms)((0,i.getTermsNested)(h).filter(r))}lr.getVariables=a;function c(h){const p={};let y=!1;if((0,i.forEachTermsNested)(h,(b,m)=>{if(b.termType==="Variable"){const g=(0,o.termToString)(b),T=(p[g]||(p[g]=[])).push(m);y=y||T>1}}),!y)return;const _={};for(const b in p){const m=p[b],g=m.slice(1);g.length>0&&(_[m[0].join("_")]=g)}return _}lr.getDuplicateElementLinks=c;function s(h,p,y,_,b,m){const g=v=>{m&&(v.cardinality.type="estimate"),p.setProperty("metadata",d(h,(0,n.validateMetadataQuads)(v),_,b)),v.state&&v.state.addInvalidateListener(()=>{s(h,p,y,_,b,m)})},T=y.getProperty("metadata");T?g(T):y.getProperty("metadata",g)}lr.setMetadata=s;function d(h,p,y,_){return{...p,order:p.order?l(h,p.order,y):void 0,availableOrders:p.availableOrders?p.availableOrders.map(b=>({cost:b.cost,terms:l(h,b.terms,y)})):void 0,variables:_.map(b=>({variable:b,canBeUndef:!1}))}}lr.quadsMetadataToBindingsMetadata=d;function l(h,p,y){const _={};return p.map(b=>{const m=y[b.term];if(m&&!_[m])return _[m]=!0,{term:h.variable(m),direction:b.direction}}).filter(Boolean)}lr.quadsOrderToBindingsOrder=l;function f(h,p){return(0,i.someTerms)(h,y=>y.termType==="Quad")&&(p=p.filter(y=>(0,t.matchPatternMappings)(y,h))),p}return lr.filterMatchingQuotedQuads=f,lr}var IV;function Bv(){return IV||(IV=1,(function(u){var n=Vd&&Vd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Vd&&Vd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(mfe(),u),o(vfe(),u)})(Vd)),Vd}var RV;function ZJ(){if(RV)return f2;RV=1,Object.defineProperty(f2,"__esModule",{value:!0}),f2.QuerySourceQpf=void 0;const u=Bv(),n=Ce(),o=br(),i=pt(),t=tr(),e=Lv(),r=gn();let a=class{constructor(d,l,f,h,p,y,_,b,m,g,T,v,A,I){if(this.referenceValue=T,this.mediatorMetadata=d,this.mediatorMetadataExtract=l,this.mediatorDereferenceRdf=f,this.dataFactory=h,this.algebraFactory=p,this.bindingsFactory=y,this.subjectUri=_,this.predicateUri=b,this.objectUri=m,this.graphUri=g,this.url=T,this.bindingsRestricted=A,this.cachedQuads={},this.searchForm=this.getSearchForm(v),this.defaultGraph=v.defaultGraph?this.dataFactory.namedNode(v.defaultGraph):void 0,I){let q=(0,i.wrap)(I);this.defaultGraph&&(q=this.reverseMapQuadsToDefaultGraph(q)),v={...v,state:new o.MetadataValidationState},q.setProperty("metadata",v),this.cacheQuads(q,this.dataFactory.variable(""),this.dataFactory.variable(""),this.dataFactory.variable(""),this.dataFactory.variable(""))}this.selectorShape=this.bindingsRestricted?{type:"operation",operation:{operationType:"pattern",pattern:this.algebraFactory.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g"))},variablesOptional:[this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g")],filterBindings:!0}:{type:"operation",operation:{operationType:"pattern",pattern:this.algebraFactory.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g"))},variablesOptional:[this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g")]}}async getSelectorShape(){return this.selectorShape}queryBindings(d,l,f){if(d.type!=="pattern")throw new Error(`Attempted to pass non-pattern operation '${d.type}' to QuerySourceQpf`);const h=!!l.get(n.KeysQueryOperation.unionDefaultGraph);let p=this.match(d.subject,d.predicate,d.object,d.graph,h,l,f);return p=(0,u.filterMatchingQuotedQuads)(d,p),(0,u.quadsToBindings)(p,d,this.dataFactory,this.bindingsFactory,h)}getSearchForm(d){if(!d.searchForms||!d.searchForms.values)return;const{searchForms:l}=d;for(const f of l.values)if(this.graphUri&&this.subjectUri in f.mappings&&this.predicateUri in f.mappings&&this.objectUri in f.mappings&&this.graphUri in f.mappings&&Object.keys(f.mappings).length===4||this.subjectUri in f.mappings&&this.predicateUri in f.mappings&&this.objectUri in f.mappings&&Object.keys(f.mappings).length===3)return f}createFragmentUri(d,l,f,h,p){const y={},_=[{uri:this.subjectUri,term:l},{uri:this.predicateUri,term:f},{uri:this.objectUri,term:h},{uri:this.graphUri,term:p}];for(const b of _)b.uri&&(this.bindingsRestricted||b.term.termType!=="Variable"&&(b.term.termType!=="Quad"||(0,r.everyTermsNested)(b.term,m=>m.termType!=="Variable")))&&(y[b.uri]=(0,t.termToString)(b.term));return d.getUri(y)}match(d,l,f,h,p,y,_){let b=!1;if(h.termType==="DefaultGraph")if(this.defaultGraph)b=!0,h=this.defaultGraph;else if(Object.keys(this.searchForm.mappings).length===4&&!this.defaultGraph)if(p)h=this.dataFactory.variable("g");else{const v=new i.ArrayIterator([],{autoStart:!1});return v.setProperty("metadata",{state:new o.MetadataValidationState,requestTime:0,cardinality:{type:"exact",value:0},first:null,next:null,last:null}),v}else Object.keys(this.searchForm.mappings).length===3&&(h=this.dataFactory.variable("g"));if(!(_!=null&&_.filterBindings)){const v=this.getCachedQuads(d,l,f,h);if(v)return v}const m=this;let g;const T=(async function(){var O;let v=m.createFragmentUri(m.searchForm,d,l,f,h);_!=null&&_.filterBindings&&(v=await m.getBindingsRestrictedLink(d,l,f,h,v,_.filterBindings));const A=await m.mediatorDereferenceRdf.mediate({context:y,url:v});v=A.url;const I=await m.mediatorMetadata.mediate({context:y,url:v,quads:A.data,triples:(O=A.metadata)==null?void 0:O.triples}),{metadata:q}=await m.mediatorMetadataExtract.mediate({context:y,url:v,metadata:I.metadata,requestTime:A.requestTime});return g.setProperty("metadata",{...q,state:new o.MetadataValidationState,subsetOf:m.url}),I.data})();return g=new i.TransformIterator(async()=>{const v=await T,A=this.dataFactory.defaultGraph();let I=(0,i.wrap)(v).transform({filter(q){return(0,r.matchPattern)(q,d,l,f,h)?!0:b&&(0,r.matchPattern)(q,d,l,f,A)}});return(b||h.termType==="Variable")&&(I=this.reverseMapQuadsToDefaultGraph(I)),I},{autoStart:!1}),_!=null&&_.filterBindings?g:(this.cacheQuads(g,d,l,f,h),this.getCachedQuads(d,l,f,h))}async getBindingsRestrictedLink(d,l,f,h,p,y){const _=[];for(const m of await y.bindings.toArray()){const g=["("];for(const T of y.metadata.variables){const v=m.get(T.variable);g.push(v?(0,e.termToString)(v):"UNDEF"),g.push(" ")}g.push(")"),_.push(g.join(""))}_.length===0&&_.push("(<ex:comunica:unknown>)");const b=encodeURIComponent(`(${y.metadata.variables.map(m=>`?${m.variable.value}`).join(" ")}) { ${_.join(" ")} }`);return`${p}&values=${b}`}reverseMapQuadsToDefaultGraph(d){const l=this.dataFactory.defaultGraph();return d.map(f=>(0,r.mapTerms)(f,(h,p)=>p==="graph"&&h.equals(this.defaultGraph)?l:h))}getPatternId(d,l,f,h){return JSON.stringify({s:d.termType==="Variable"?"":c(d),p:l.termType==="Variable"?"":c(l),o:f.termType==="Variable"?"":c(f),g:h.termType==="Variable"?"":c(h)})}cacheQuads(d,l,f,h,p){const y=this.getPatternId(l,f,h,p);this.cachedQuads[y]=d.clone()}getCachedQuads(d,l,f,h){const p=this.getPatternId(d,l,f,h),y=this.cachedQuads[p];if(y)return y.clone()}queryQuads(d,l){throw new Error("queryQuads is not implemented in QuerySourceQpf")}queryBoolean(d,l){throw new Error("queryBoolean is not implemented in QuerySourceQpf")}queryVoid(d,l){throw new Error("queryVoid is not implemented in QuerySourceQpf")}};f2.QuerySourceQpf=a;function c(s){return s.termType==="DefaultGraph"?"|":(0,t.termToString)(s)}return f2}var FV;function Tfe(){if(FV)return d2;FV=1,Object.defineProperty(d2,"__esModule",{value:!0}),d2.ActorQuerySourceIdentifyHypermediaQpf=void 0;const u=rE(),n=Ce(),o=be(),i=$t(),t=dt(),e=ZJ();let r=class extends u.ActorQuerySourceIdentifyHypermedia{constructor(c){super(c,"qpf")}async test(c){return c.forceSourceType&&c.forceSourceType!=="qpf"&&c.forceSourceType!=="brtpf"?(0,o.failTest)(`Actor ${this.name} is not able to handle source type ${c.forceSourceType}.`):this.testMetadata(c)}async testMetadata(c){const{searchForm:s}=await this.createSource(c.url,c.metadata,c.context,c.forceSourceType==="brtpf");return s?c.handledDatasets&&c.handledDatasets[s.dataset]?(0,o.failTest)(`Actor ${this.name} can only be applied for the first page of a QPF dataset.`):(0,o.passTest)({filterFactor:1}):(0,o.failTest)("Illegal state: found no TPF/QPF search form anymore in metadata.")}async run(c){this.logInfo(c.context,`Identified as qpf source: ${c.url}`);const s=await this.createSource(c.url,c.metadata,c.context,c.forceSourceType==="brtpf",c.quads);return{source:s,dataset:s.searchForm.dataset}}async createSource(c,s,d,l,f){const h=d.getSafe(n.KeysInitQuery.dataFactory),p=new t.Factory(h);return new e.QuerySourceQpf(this.mediatorMetadata,this.mediatorMetadataExtract,this.mediatorDereferenceRdf,h,p,await i.BindingsFactory.create(this.mediatorMergeBindingsContext,d,h),this.subjectUri,this.predicateUri,this.objectUri,this.graphUri,c,s,l,f)}};return d2.ActorQuerySourceIdentifyHypermediaQpf=r,d2}var NV;function wfe(){return NV||(NV=1,(function(u){var n=$d&&$d.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=$d&&$d.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Tfe(),u),o(ZJ(),u)})($d)),$d}var Qd={},p2={},b2={},PV;function ek(){if(PV)return b2;PV=1,Object.defineProperty(b2,"__esModule",{value:!0}),b2.QuerySourceSparql=void 0;const u=Ce(),n=be(),o=br(),i=gt(),t=pt(),e=qJ(),r=Vf(),a=gn(),c=dt();let s=class ln{constructor(l,f,h,p,y,_,b,m,g,T,v,A,I,q,O){this.referenceValue=l,this.url=l,this.context=f,this.mediatorHttp=h,this.bindMethod=p,this.dataFactory=y,this.algebraFactory=_,this.bindingsFactory=b,this.endpointFetcher=new e.SparqlEndpointFetcher({method:m?"GET":"POST",fetch:(w,S)=>this.mediatorHttp.mediate({input:w,init:S,context:this.lastSourceContext}),prefixVariableQuestionMark:!0,dataFactory:y}),this.cache=g>0?new r.LRUCache({max:g}):void 0,this.countTimeout=T,this.cardinalityCountQueries=v,this.cardinalityEstimateConstruction=A,this.defaultGraph=I,this.unionDefaultGraph=q??!1,this.datasets=O}async getSelectorShape(){return ln.SELECTOR_SHAPE}queryBindings(l,f,h){let p;h!=null&&h.joinBindings?p=ln.addBindingsToOperation(this.algebraFactory,this.bindMethod,l,h.joinBindings):p=Promise.resolve(l);const y=new t.TransformIterator(async()=>{const _=await p,b=c.Util.inScopeVariables(_),m=f.get(u.KeysInitQuery.queryString),g=f.getSafe(u.KeysInitQuery.queryFormat),T=!(h!=null&&h.joinBindings)&&m&&g.language==="sparql"?m:ln.operationToSelectQuery(this.algebraFactory,_,b),v=ln.getOperationUndefs(_);return this.queryBindingsRemote(this.url,T,b,f,v)},{autoStart:!1});return this.attachMetadata(y,f,p),y}queryQuads(l,f){this.lastSourceContext=this.context.merge(f);const h=this.endpointFetcher.fetchTriples(this.url,f.get(u.KeysInitQuery.queryString)??ln.operationToQuery(l));this.lastSourceContext=void 0;const p=(0,t.wrap)(h,{autoStart:!1,maxBufferSize:Number.POSITIVE_INFINITY});return this.attachMetadata(p,f,Promise.resolve(l.input)),p}queryBoolean(l,f){this.lastSourceContext=this.context.merge(f);const h=this.endpointFetcher.fetchAsk(this.url,f.get(u.KeysInitQuery.queryString)??ln.operationToQuery(l));return this.lastSourceContext=void 0,h}queryVoid(l,f){this.lastSourceContext=this.context.merge(f);const h=this.endpointFetcher.fetchUpdate(this.url,f.get(u.KeysInitQuery.queryString)??ln.operationToQuery(l));return this.lastSourceContext=void 0,h}attachMetadata(l,f,h){let p=[];new Promise(async(y,_)=>{var b,m;try{const g=await h,T=c.Util.inScopeVariables(g),v=this.operationToNormalizedCountQuery(g),A=ln.getOperationUndefs(g);p=T.map(S=>({variable:S,canBeUndef:A.some(E=>E.equals(S))}));const I=(b=this.cache)==null?void 0:b.get(v);if(I)return y(I);if(this.cardinalityEstimateConstruction){const S=await this.estimateOperationCardinality(g);if(Number.isFinite(S.value))return(m=this.cache)==null||m.set(v,S),y(S)}if(!this.cardinalityCountQueries)return y({type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url});const q=setTimeout(()=>y({type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url}),this.countTimeout),O=this.dataFactory.variable("count"),w=await this.queryBindingsRemote(this.url,v,[O],f,[]);w.on("data",S=>{var L;clearTimeout(q);const E=S.get(O),R={type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url};if(E){const M=Number.parseInt(E.value,10);Number.isNaN(M)||(R.type="exact",R.value=M,(L=this.cache)==null||L.set(v,R))}return y(R)}),w.on("error",()=>{clearTimeout(q),y({type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url})}),w.on("end",()=>{clearTimeout(q),y({type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url})})}catch(g){return _(g)}}).then(y=>{l.setProperty("metadata",{state:new o.MetadataValidationState,cardinality:y,variables:p})}).catch(()=>l.setProperty("metadata",{state:new o.MetadataValidationState,cardinality:{type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url},variables:p}))}operationToNormalizedCountQuery(l){const f=l.type===c.Algebra.types.PATTERN?this.algebraFactory.createPattern(l.subject.termType==="Variable"?this.dataFactory.variable("s"):l.subject,l.predicate.termType==="Variable"?this.dataFactory.variable("p"):l.predicate,l.object.termType==="Variable"?this.dataFactory.variable("o"):l.object):l;return ln.operationToCountQuery(this.dataFactory,this.algebraFactory,f)}async estimateOperationCardinality(l){const f={getCardinality:h=>{var _;const p=this.operationToNormalizedCountQuery(h),y=(_=this.cache)==null?void 0:_.get(p);if(y)return y;if(this.datasets){const b=this.datasets.filter(g=>this.unionDefaultGraph||this.defaultGraph&&g.uri.endsWith(this.defaultGraph)).map(g=>(0,i.estimateCardinality)(h,g));return{type:b.some(g=>g.type==="estimate")?"estimate":"exact",value:b.length>0?b.reduce((g,T)=>g+T.value,0):0,dataset:this.url}}},source:this.url,uri:this.url};return(0,i.estimateCardinality)(l,f)}static async addBindingsToOperation(l,f,h,p){const y=await p.bindings.toArray();switch(f){case"values":return l.createJoin([l.createValues(p.metadata.variables.map(_=>_.variable),y.map(_=>Object.fromEntries([..._].map(([b,m])=>[`?${b.value}`,m])))),h],!1);case"union":throw new Error('Not implemented yet: "union" case');case"filter":throw new Error('Not implemented yet: "filter" case')}}static operationToSelectQuery(l,f,h){return ln.operationToQuery(l.createProject(f,h))}static operationToCountQuery(l,f,h){return ln.operationToQuery(f.createProject(f.createExtend(f.createGroup(h,[],[f.createBoundAggregate(l.variable("var0"),"count",f.createWildcardExpression(),!1)]),l.variable("count"),f.createTermExpression(l.variable("var0"))),[l.variable("count")]))}static operationToQuery(l){return(0,c.toSparql)(l,{sparqlStar:!0})}static getOperationUndefs(l){const f=[];return c.Util.recurseOperation(l,{leftjoin(h){const p=c.Util.inScopeVariables(h.input[0]),y=c.Util.inScopeVariables(h.input[1]);for(const _ of y)p.some(b=>b.equals(_))||f.push(_);return!1},values(h){for(const p of h.variables)h.bindings.some(y=>!(`?${p.value}`in y))&&f.push(p);return!1},union(h){const p=h.input.map(c.Util.inScopeVariables);for(const y of(0,a.uniqTerms)(p.flat()))p.every(_=>_.some(b=>b.equals(y)))||f.push(y);return!0}}),(0,a.uniqTerms)(f)}async queryBindingsRemote(l,f,h,p,y){const _=new Set;for(const m of y)_.add(m.value);this.lastSourceContext=this.context.merge(p);const b=await this.endpointFetcher.fetchBindings(l,f);return this.lastSourceContext=void 0,(0,t.wrap)(b,{autoStart:!1,maxBufferSize:Number.POSITIVE_INFINITY}).map(m=>this.bindingsFactory.bindings(h.map(g=>{var v;const T=m[`?${g.value}`];return!_.has(g.value)&&!T&&((v=n.Actor.getContextLogger(this.context))==null||v.warn(`The endpoint ${l} failed to provide a binding for ${g.value}.`)),[g,T]}).filter(([g,T])=>!!T)))}toString(){return`QuerySourceSparql(${this.url})`}};return b2.QuerySourceSparql=s,s.SELECTOR_SHAPE={type:"disjunction",children:[{type:"operation",operation:{operationType:"wildcard"},joinBindings:!0}]},b2}var DV;function Sfe(){if(DV)return p2;DV=1,Object.defineProperty(p2,"__esModule",{value:!0}),p2.ActorQuerySourceIdentifyHypermediaSparql=void 0;const u=rE(),n=Ce(),o=be(),i=$t(),t=dt(),e=ek();let r=class extends u.ActorQuerySourceIdentifyHypermedia{constructor(c){super(c,"sparql")}async testMetadata(c){return!c.forceSourceType&&!this.forceSourceType&&!c.metadata.sparqlService&&!(this.checkUrlSuffix&&(c.url.endsWith("/sparql")||c.url.endsWith("/sparql/")))?(0,o.failTest)(`Actor ${this.name} could not detect a SPARQL service description or URL ending on /sparql.`):(0,o.passTest)({filterFactor:1})}async run(c){var h;this.logInfo(c.context,`Identified ${c.url} as sparql source with service URL: ${c.metadata.sparqlService||c.url}`);const s=c.context.getSafe(n.KeysInitQuery.dataFactory),d=new t.Factory(s),l=((h=c.context.get(n.KeysQueryOperation.querySources))==null?void 0:h.length)===1;return{source:new e.QuerySourceSparql(c.forceSourceType??this.forceSourceType?c.url:c.metadata.sparqlService||c.url,c.context,this.mediatorHttp,this.bindMethod,s,d,await i.BindingsFactory.create(this.mediatorMergeBindingsContext,c.context,s),this.forceHttpGet,this.cacheSize,this.countTimeout,this.cardinalityCountQueries&&!l,this.cardinalityEstimateConstruction,c.metadata.defaultGraph,c.metadata.unionDefaultGraph,c.metadata.datasets)}}};return p2.ActorQuerySourceIdentifyHypermediaSparql=r,p2}var jV;function Afe(){return jV||(jV=1,(function(u){var n=Qd&&Qd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Qd&&Qd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Sfe(),u),o(ek(),u)})(Qd)),Qd}var Hd={},y2={},Gd={},_2={},g2={},LV;function tk(){if(LV)return g2;LV=1,Object.defineProperty(g2,"__esModule",{value:!0}),g2.QuerySourceRdfJs=void 0;const u=Bv(),n=Ce(),o=br(),i=pt(),t=gn(),e=dt();let r=class Xr{constructor(c,s,d){this.source=c,this.referenceValue=c,this.dataFactory=s,this.bindingsFactory=d;const l=new e.Factory(this.dataFactory);this.selectorShape={type:"operation",operation:{operationType:"pattern",pattern:l.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"))},variablesOptional:[this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o")]},this.dummyDefaultGraph=this.dataFactory.variable("__comunica:defaultGraph")}static nullifyVariables(c,s){return!c||c.termType==="Variable"||!s&&c.termType==="Quad"&&(0,t.someTermsNested)(c,d=>d.termType==="Variable")?void 0:c}static hasDuplicateVariables(c){const s=(0,t.filterTermsNested)(c,d=>d.termType==="Variable");return s.length>1&&(0,t.uniqTerms)(s).length<s.length}async getSelectorShape(){return this.selectorShape}queryBindings(c,s){var p;if(c.type!=="pattern")throw new Error(`Attempted to pass non-pattern operation '${c.type}' to QuerySourceRdfJs`);const d=!!s.get(n.KeysQueryOperation.unionDefaultGraph);if(c.graph.termType==="DefaultGraph"&&d&&(c.graph=this.dummyDefaultGraph),this.source.matchBindings){const y=this.source.matchBindings(this.bindingsFactory,c.subject,c.predicate,c.object,c.graph);let _=y instanceof i.AsyncIterator?y:(0,i.wrap)(y,{autoStart:!1}),b=!1;if(c.graph.termType==="Variable"&&!d){b=!0;const m=c.graph;_=_.filter(g=>g.get(m).termType!=="DefaultGraph")}if(c.graph.equals(this.dummyDefaultGraph)&&(_=_.map(m=>m.delete(this.dummyDefaultGraph)),c.graph=this.dataFactory.defaultGraph()),!_.getProperty("metadata")){const m=(0,u.getVariables)(c).map(g=>({variable:g,canBeUndef:!1}));this.setMetadata(_,c,s,b,{variables:m}).catch(g=>_.destroy(g))}return _}const l=!!((p=this.source.features)!=null&&p.quotedTripleFiltering),f=this.source.match(Xr.nullifyVariables(c.subject,l),Xr.nullifyVariables(c.predicate,l),Xr.nullifyVariables(c.object,l),Xr.nullifyVariables(c.graph,l));let h=f instanceof i.AsyncIterator?f:(0,i.wrap)(f,{autoStart:!1});return l||(h=(0,u.filterMatchingQuotedQuads)(c,h)),h.getProperty("metadata")||this.setMetadata(h,c,s).catch(y=>h.destroy(y)),c.graph.equals(this.dummyDefaultGraph)&&(c.graph=this.dataFactory.defaultGraph()),(0,u.quadsToBindings)(h,c,this.dataFactory,this.bindingsFactory,!!s.get(n.KeysQueryOperation.unionDefaultGraph))}async setMetadata(c,s,d,l=!1,f={}){var b;const h=!!((b=this.source.features)!=null&&b.quotedTripleFiltering),p=!!d.get(n.KeysQueryOperation.unionDefaultGraph);s.graph.termType==="DefaultGraph"&&p&&(s.graph=this.dummyDefaultGraph);let y;if(this.source.countQuads)y=await this.source.countQuads(Xr.nullifyVariables(s.subject,h),Xr.nullifyVariables(s.predicate,h),Xr.nullifyVariables(s.object,h),Xr.nullifyVariables(s.graph,h));else{let m=0;y=await new Promise((g,T)=>{const v=this.source.match(Xr.nullifyVariables(s.subject,h),Xr.nullifyVariables(s.predicate,h),Xr.nullifyVariables(s.object,h),Xr.nullifyVariables(s.graph,h));v.on("error",T),v.on("end",()=>g(m)),v.on("data",()=>m++)})}const _=!h&&(0,t.someTerms)(s,m=>m.termType==="Quad")||Xr.hasDuplicateVariables(s);c.setProperty("metadata",{state:new o.MetadataValidationState,cardinality:{type:_||l?"estimate":"exact",value:y},requestTime:0,...f})}queryQuads(c,s){throw new Error("queryQuads is not implemented in QuerySourceRdfJs")}queryBoolean(c,s){throw new Error("queryBoolean is not implemented in QuerySourceRdfJs")}queryVoid(c,s){throw new Error("queryVoid is not implemented in QuerySourceRdfJs")}toString(){return`QuerySourceRdfJs(${this.source.constructor.name})`}};return g2.QuerySourceRdfJs=r,g2}var MV;function Ofe(){if(MV)return _2;MV=1,Object.defineProperty(_2,"__esModule",{value:!0}),_2.ActorQuerySourceIdentifyRdfJs=void 0;const u=Bv(),n=Ce(),o=be(),i=$t(),t=tk();let e=class extends u.ActorQuerySourceIdentify{constructor(a){super(a)}async test(a){const c=a.querySourceUnidentified;return c.type!==void 0&&c.type!=="rdfjs"?(0,o.failTest)(`${this.name} requires a single query source with rdfjs type to be present in the context.`):typeof c.value=="string"||!("match"in c.value)?(0,o.failTest)(`${this.name} received an invalid rdfjs query source.`):(0,o.passTestVoid)()}async run(a){const c=a.context.getSafe(n.KeysInitQuery.dataFactory);return{querySource:{source:new t.QuerySourceRdfJs(a.querySourceUnidentified.value,c,await i.BindingsFactory.create(this.mediatorMergeBindingsContext,a.context,c)),context:a.querySourceUnidentified.context??new o.ActionContext}}}};return _2.ActorQuerySourceIdentifyRdfJs=e,_2}var aA={},CV;function Efe(){return CV||(CV=1,Object.defineProperty(aA,"__esModule",{value:!0})),aA}var qV;function nE(){return qV||(qV=1,(function(u){var n=Gd&&Gd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Gd&&Gd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ofe(),u),o(Efe(),u),o(tk(),u)})(Gd)),Gd}var KT={},zd={},m2={},v2={},Xd={},T2={},BV;function rk(){if(BV)return T2;BV=1,Object.defineProperty(T2,"__esModule",{value:!0}),T2.BlankNode=void 0;class u{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}}return T2.BlankNode=u,T2}var w2={},S2={},$V;function nk(){if($V)return S2;$V=1,Object.defineProperty(S2,"__esModule",{value:!0}),S2.DefaultGraph=void 0;class u{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}}return S2.DefaultGraph=u,u.INSTANCE=new u,S2}var A2={},O2={},UV;function iE(){if(UV)return O2;UV=1,Object.defineProperty(O2,"__esModule",{value:!0}),O2.NamedNode=void 0;class u{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}}return O2.NamedNode=u,O2}var VV;function ik(){if(VV)return A2;VV=1,Object.defineProperty(A2,"__esModule",{value:!0}),A2.Literal=void 0;const u=iE();class n{constructor(i,t){this.termType="Literal",this.value=i,typeof t=="string"?(this.language=t,this.datatype=n.RDF_LANGUAGE_STRING,this.direction=""):t?"termType"in t?(this.language="",this.datatype=t,this.direction=""):(this.language=t.language,this.datatype=t.direction?n.RDF_DIRECTIONAL_LANGUAGE_STRING:n.RDF_LANGUAGE_STRING,this.direction=t.direction||""):(this.language="",this.datatype=n.XSD_STRING,this.direction="")}equals(i){return!!i&&i.termType==="Literal"&&i.value===this.value&&i.language===this.language&&(i.direction===this.direction||!i.direction&&this.direction==="")&&this.datatype.equals(i.datatype)}}return A2.Literal=n,n.RDF_LANGUAGE_STRING=new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),n.RDF_DIRECTIONAL_LANGUAGE_STRING=new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),n.XSD_STRING=new u.NamedNode("http://www.w3.org/2001/XMLSchema#string"),A2}var E2={},QV;function ak(){if(QV)return E2;QV=1,Object.defineProperty(E2,"__esModule",{value:!0}),E2.Quad=void 0;class u{constructor(o,i,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=i,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}}return E2.Quad=u,E2}var x2={},HV;function uk(){if(HV)return x2;HV=1,Object.defineProperty(x2,"__esModule",{value:!0}),x2.Variable=void 0;class u{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}}return x2.Variable=u,x2}var GV;function xfe(){if(GV)return w2;GV=1,Object.defineProperty(w2,"__esModule",{value:!0}),w2.DataFactory=void 0;const u=rk(),n=nk(),o=ik(),i=iE(),t=ak(),e=uk();let r=0;class a{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${r++}_`}namedNode(s){return new i.NamedNode(s)}blankNode(s){return new u.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,d){return new o.Literal(s,d)}variable(s){return new e.Variable(s)}defaultGraph(){return n.DefaultGraph.INSTANCE}quad(s,d,l,f){return new t.Quad(s,d,l,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return w2.DataFactory=a,w2}var zV;function ii(){return zV||(zV=1,(function(u){var n=Xd&&Xd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Xd&&Xd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(rk(),u),o(xfe(),u),o(nk(),u),o(ik(),u),o(iE(),u),o(ak(),u),o(uk(),u)})(Xd)),Xd}var Jd={},Nt={},XV;function Ife(){if(XV)return Nt;XV=1,Object.defineProperty(Nt,"__esModule",{value:!0}),Nt.TRIPLE_TERM_NAMES=Nt.QUAD_TERM_NAMES=void 0,Nt.getTerms=o,Nt.getTermsNested=i,Nt.getNamedTerms=t,Nt.collectNamedTerms=e,Nt.forEachTerms=r,Nt.forEachTermsNested=a,Nt.filterTerms=c,Nt.filterTermsNested=s,Nt.filterQuadTermNames=d,Nt.filterQuadTermNamesNested=l,Nt.mapTerms=f,Nt.mapTermsNested=h,Nt.reduceTerms=p,Nt.reduceTermsNested=y,Nt.everyTerms=_,Nt.everyTermsNested=b,Nt.someTerms=m,Nt.someTermsNested=g,Nt.getValueNestedPath=T,Nt.matchTerm=v,Nt.matchPattern=A,Nt.matchPatternComplete=I,Nt.matchPatternMappings=q;const u=ii(),n=new u.DataFactory;Nt.QUAD_TERM_NAMES=["subject","predicate","object","graph"],Nt.TRIPLE_TERM_NAMES=["subject","predicate","object"];function o(O,w){return w&&O.graph.termType==="DefaultGraph"?[O.subject,O.predicate,O.object]:[O.subject,O.predicate,O.object,O.graph]}function i(O,w){const S=[];for(const E of o(O,w))E.termType==="Quad"?i(E,w).forEach(R=>S.push(R)):S.push(E);return S}function t(O){return[{key:"subject",value:O.subject},{key:"predicate",value:O.predicate},{key:"object",value:O.object},{key:"graph",value:O.graph}]}function e(O,w,S){const E={};return O.forEach(R=>E[R.key]=R.value),w&&(E.subject=E.subject||w("subject"),E.predicate=E.predicate||w("predicate"),E.object=E.object||w("object"),E.graph=E.graph||w("graph")),(S||n).quad(E.subject,E.predicate,E.object,E.graph)}function r(O,w){w(O.subject,"subject"),w(O.predicate,"predicate"),w(O.object,"object"),w(O.graph,"graph")}function a(O,w,S=[]){O.subject.termType==="Quad"?a(O.subject,w,[...S,"subject"]):w(O.subject,[...S,"subject"]),O.predicate.termType==="Quad"?a(O.predicate,w,[...S,"predicate"]):w(O.predicate,[...S,"predicate"]),O.object.termType==="Quad"?a(O.object,w,[...S,"object"]):w(O.object,[...S,"object"]),O.graph.termType==="Quad"?a(O.graph,w,[...S,"graph"]):w(O.graph,[...S,"graph"])}function c(O,w){const S=[];return w(O.subject,"subject")&&S.push(O.subject),w(O.predicate,"predicate")&&S.push(O.predicate),w(O.object,"object")&&S.push(O.object),w(O.graph,"graph")&&S.push(O.graph),S}function s(O,w,S=[]){let E=[];return O.subject.termType==="Quad"?E=[...E,...s(O.subject,w,[...S,"subject"])]:w(O.subject,[...S,"subject"])&&E.push(O.subject),O.predicate.termType==="Quad"?E=[...E,...s(O.predicate,w,[...S,"predicate"])]:w(O.predicate,[...S,"predicate"])&&E.push(O.predicate),O.object.termType==="Quad"?E=[...E,...s(O.object,w,[...S,"object"])]:w(O.object,[...S,"object"])&&E.push(O.object),O.graph.termType==="Quad"?E=[...E,...s(O.graph,w,[...S,"graph"])]:w(O.graph,[...S,"graph"])&&E.push(O.graph),E}function d(O,w){const S=[];return w(O.subject,"subject")&&S.push("subject"),w(O.predicate,"predicate")&&S.push("predicate"),w(O.object,"object")&&S.push("object"),w(O.graph,"graph")&&S.push("graph"),S}function l(O,w,S=[]){let E=[];const R=[...S,"subject"];O.subject.termType==="Quad"?E=[...E,...l(O.subject,w,R)]:w(O.subject,R)&&E.push(R);const L=[...S,"predicate"];O.predicate.termType==="Quad"?E=[...E,...l(O.predicate,w,L)]:w(O.predicate,L)&&E.push(L);const M=[...S,"object"];O.object.termType==="Quad"?E=[...E,...l(O.object,w,M)]:w(O.object,M)&&E.push(M);const B=[...S,"graph"];return O.graph.termType==="Quad"?E=[...E,...l(O.graph,w,B)]:w(O.graph,B)&&E.push(B),E}function f(O,w,S){return(S||n).quad(w(O.subject,"subject"),w(O.predicate,"predicate"),w(O.object,"object"),w(O.graph,"graph"))}function h(O,w,S,E=[]){return(S||n).quad(O.subject.termType==="Quad"?h(O.subject,w,S,[...E,"subject"]):w(O.subject,[...E,"subject"]),O.predicate.termType==="Quad"?h(O.predicate,w,S,[...E,"predicate"]):w(O.predicate,[...E,"predicate"]),O.object.termType==="Quad"?h(O.object,w,S,[...E,"object"]):w(O.object,[...E,"object"]),O.graph.termType==="Quad"?h(O.graph,w,S,[...E,"graph"]):w(O.graph,[...E,"graph"]))}function p(O,w,S){let E=S;return E=w(E,O.subject,"subject"),E=w(E,O.predicate,"predicate"),E=w(E,O.object,"object"),w(E,O.graph,"graph")}function y(O,w,S,E=[]){let R=S;return O.subject.termType==="Quad"?R=y(O.subject,w,R,[...E,"subject"]):R=w(R,O.subject,[...E,"subject"]),O.predicate.termType==="Quad"?R=y(O.predicate,w,R,[...E,"predicate"]):R=w(R,O.predicate,[...E,"predicate"]),O.object.termType==="Quad"?R=y(O.object,w,R,[...E,"object"]):R=w(R,O.object,[...E,"object"]),O.graph.termType==="Quad"?R=y(O.graph,w,R,[...E,"graph"]):R=w(R,O.graph,[...E,"graph"]),R}function _(O,w){return w(O.subject,"subject")&&w(O.predicate,"predicate")&&w(O.object,"object")&&w(O.graph,"graph")}function b(O,w,S=[]){return(O.subject.termType==="Quad"?b(O.subject,w,[...S,"subject"]):w(O.subject,[...S,"subject"]))&&(O.predicate.termType==="Quad"?b(O.predicate,w,[...S,"predicate"]):w(O.predicate,[...S,"predicate"]))&&(O.object.termType==="Quad"?b(O.object,w,[...S,"object"]):w(O.object,[...S,"object"]))&&(O.graph.termType==="Quad"?b(O.graph,w,[...S,"graph"]):w(O.graph,[...S,"graph"]))}function m(O,w){return w(O.subject,"subject")||w(O.predicate,"predicate")||w(O.object,"object")||w(O.graph,"graph")}function g(O,w,S=[]){return(O.subject.termType==="Quad"?g(O.subject,w,[...S,"subject"]):w(O.subject,[...S,"subject"]))||(O.predicate.termType==="Quad"?g(O.predicate,w,[...S,"predicate"]):w(O.predicate,[...S,"predicate"]))||(O.object.termType==="Quad"?g(O.object,w,[...S,"object"]):w(O.object,[...S,"object"]))||(O.graph.termType==="Quad"?g(O.graph,w,[...S,"graph"]):w(O.graph,[...S,"graph"]))}function T(O,w){if(w.length===0)return O;if(O.termType==="Quad")return T(O[w[0]],w.slice(1));throw new Error(`Tried to get ${w[0]} from term of type ${O.termType}`)}function v(O,w){return!w||w.termType==="Variable"||w.termType==="Quad"&&O.termType==="Quad"&&I(O,w)||w.equals(O)}function A(O,w,S,E,R){return v(O.subject,w)&&v(O.predicate,S)&&v(O.object,E)&&v(O.graph,R)}function I(O,w){return A(O,w.subject,w.predicate,w.object,w.graph)}function q(O,w,S={}){const E={};function R(L,M){return _(L,(B,X)=>{var J,ie;const U=M[X];switch(B.termType){case"Variable":return S.skipVarMapping&&U.termType==="Variable"||((ie=(J=E[B.value])===null||J===void 0?void 0:J.equals(U))!==null&&ie!==void 0?ie:(E[B.value]=U,!0));case"Quad":return U.termType==="Quad"&&R(B,U);default:return B.equals(U)}})}return R(w,O)&&(S.returnMappings?E:!0)}return Nt}var en={},uA={},Cn={},JV;function Rfe(){if(JV)return Cn;JV=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.termToString=o,Cn.getLiteralValue=i,Cn.getLiteralType=t,Cn.getLiteralLanguage=e,Cn.getLiteralDirection=r,Cn.stringToTerm=a,Cn.quadToStringQuad=c,Cn.stringQuadToQuad=s;const u=ii(),n=new u.DataFactory;function o(d){if(d)switch(d.termType){case"NamedNode":return d.value;case"BlankNode":return"_:"+d.value;case"Literal":const l=d;return'"'+l.value+'"'+(l.datatype&&l.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&l.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&l.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+l.datatype.value:"")+(l.language?"@"+l.language:"")+(l.direction?"--"+l.direction:"");case"Quad":return`<<${o(d.subject)} ${o(d.predicate)} ${o(d.object)}${d.graph.termType==="DefaultGraph"?"":" "+o(d.graph)}>>`;case"Variable":return"?"+d.value;case"DefaultGraph":return d.value}}function i(d){const l=/^"([^]*)"/.exec(d);if(!l)throw new Error(d+" is not a literal");return l[1]}function t(d){const l=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(d);if(!l)throw new Error(d+" is not a literal");return l[1]||(l[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function e(d){const l=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(d);if(!l)throw new Error(d+" is not a literal");if(l[1]){let f=l[1].toLowerCase();const h=f.indexOf("--");return h>=0&&(f=f.slice(0,h)),f}return""}function r(d){const l=d.indexOf("--",d.lastIndexOf('"'));if(l>=0){const f=d.slice(l+2,d.length);if(f==="ltr"||f==="rtl")return f;throw new Error(d+" is not a literal with a valid direction")}return""}function a(d,l){if(l=l||n,!d||!d.length)return l.defaultGraph();switch(d[0]){case"_":return l.blankNode(d.substr(2));case"?":if(!l.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return l.variable(d.substr(1));case'"':const f=e(d),h=r(d),p=l.namedNode(t(d));return l.literal(i(d),f?{language:f,direction:h}:p);case"<":default:if(d[0]==="<"&&d.length>4&&d[1]==="<"&&d[d.length-1]===">"&&d[d.length-2]===">"){const y=d.slice(2,-2).trim();let _=[],b=0,m=0,g=!1;for(let T=0;T<y.length;T++){const v=y[T];if(v==="<"&&b++,v===">"){if(b===0)throw new Error("Found closing tag without opening tag in "+d);b--}if(v==='"'){let A=!1,I=T;for(;I-- >0&&y[I]==="\\";)A=!A;A||(g=!g)}if(v===" "&&!g&&b===0){for(_.push(y.slice(m,T));y[T+1]===" ";)T+=1;m=T+1}}if(b!==0)throw new Error("Found opening tag without closing tag in "+d);if(_.push(y.slice(m,y.length)),_.length!==3&&_.length!==4)throw new Error("Nested quad syntax error "+d);return _=_.map(T=>T.startsWith("<")&&!T.includes(" ")?T.slice(1,-1):T),l.quad(a(_[0]),a(_[1]),a(_[2]),_[3]?a(_[3]):void 0)}return l.namedNode(d)}}function c(d){return{subject:o(d.subject),predicate:o(d.predicate),object:o(d.object),graph:o(d.graph)}}function s(d,l){return l=l||n,l.quad(a(d.subject,l),a(d.predicate,l),a(d.object,l),a(d.graph,l))}return Cn}var kV;function $v(){return kV||(kV=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.termToString=u.stringToTerm=u.stringQuadToQuad=u.quadToStringQuad=u.getLiteralValue=u.getLiteralType=u.getLiteralDirection=u.getLiteralLanguage=void 0;const n=Rfe();Object.defineProperty(u,"getLiteralLanguage",{enumerable:!0,get:function(){return n.getLiteralLanguage}}),Object.defineProperty(u,"getLiteralDirection",{enumerable:!0,get:function(){return n.getLiteralDirection}}),Object.defineProperty(u,"getLiteralType",{enumerable:!0,get:function(){return n.getLiteralType}}),Object.defineProperty(u,"getLiteralValue",{enumerable:!0,get:function(){return n.getLiteralValue}}),Object.defineProperty(u,"quadToStringQuad",{enumerable:!0,get:function(){return n.quadToStringQuad}}),Object.defineProperty(u,"stringQuadToQuad",{enumerable:!0,get:function(){return n.stringQuadToQuad}}),Object.defineProperty(u,"stringToTerm",{enumerable:!0,get:function(){return n.stringToTerm}}),Object.defineProperty(u,"termToString",{enumerable:!0,get:function(){return n.termToString}})})(uA)),uA}var KV;function Ffe(){if(KV)return en;KV=1,Object.defineProperty(en,"__esModule",{value:!0}),en.TERM_TYPES=void 0,en.uniqTerms=n,en.getTermsOfType=o,en.getNamedNodes=i,en.getBlankNodes=t,en.getLiterals=e,en.getVariables=r,en.getDefaultGraphs=a,en.getQuads=c;const u=$v();en.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function n(s){const d={};return s.filter(l=>{const f=(0,u.termToString)(l);return!(f in d)&&(d[f]=!0)})}function o(s,d){return s.filter(l=>l.termType===d)}function i(s){return o(s,"NamedNode")}function t(s){return o(s,"BlankNode")}function e(s){return o(s,"Literal")}function r(s){return o(s,"Variable")}function a(s){return o(s,"DefaultGraph")}function c(s){return o(s,"Quad")}return en}var WV;function Kw(){return WV||(WV=1,(function(u){var n=Jd&&Jd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Jd&&Jd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ife(),u),o(Ffe(),u)})(Jd)),Jd}var I2={},YV;function ok(){if(YV)return I2;YV=1,Object.defineProperty(I2,"__esModule",{value:!0}),I2.TermDictionaryNumberRecordFullTerms=void 0;const u=ii(),n=$v();let o=class{constructor(t=new u.DataFactory){this.lastId=0,this.dictionary={},this.reverseDictionary={},this.features={quotedTriples:!1},this.dataFactory=t}encode(t){const e=(0,n.termToString)(t);let r=this.dictionary[e];return r===void 0&&(r=this.lastId++,this.dictionary[e]=r,this.reverseDictionary[r]=t),r}encodeOptional(t){const e=(0,n.termToString)(t);return this.dictionary[e]}decode(t){const e=this.reverseDictionary[t];if(e===void 0)throw new Error(`The value ${t} is not present in this dictionary`);return e}*encodings(){for(const t of Object.keys(this.reverseDictionary))yield Number.parseInt(t,10)}findQuotedTriples(t){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(t){throw new Error("findQuotedTriplesEncoded is not supported")}};return I2.TermDictionaryNumberRecordFullTerms=o,I2}var R2={},F2={},oA={},ZV;function ai(){return ZV||(ZV=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.QUAD_TERM_NAMES_INVERSE=void 0,u.getBestIndex=o,u.getComponentOrderScore=i,u.orderQuadComponents=t,u.encodeOptionalTerms=e,u.quadToPattern=r,u.quadHasVariables=a,u.arePatternsQuoted=c;const n=Kw();u.QUAD_TERM_NAMES_INVERSE=Object.fromEntries(n.QUAD_TERM_NAMES.map((s,d)=>[s,d]));function o(s,d){if(s.length===1||d.every(h=>h!==void 0))return 0;const l=[];for(let h=0;h<n.QUAD_TERM_NAMES.length;h++)d[h]&&l.push(n.QUAD_TERM_NAMES[h]);return s.map((h,p)=>({score:i(h,l),index:p})).sort((h,p)=>p.score-h.score)[0].index}function i(s,d){return s.map((l,f)=>d.includes(l)?s.length-f:0).reduce((l,f)=>l+f,0)}function t(s,d){return s.map(l=>{const f=u.QUAD_TERM_NAMES_INVERSE[l];return d[f]})}function e(s,d){const l=s.map(f=>{if(f){if(f.termType==="Quad"&&a(f))return;const h=d.encodeOptional(f);return h===void 0?"none":h}return f});if(!l.includes("none"))return l}function r(s,d,l,f,h){let p=!1;return[[s||void 0,d||void 0,l||void 0,f||void 0].map(_=>{if(_){if(_.termType==="Variable")return;if(_.termType==="Quad"){if(h)return _;p=!0;return}}return _}),p]}function a(s){for(const d of n.QUAD_TERM_NAMES){const l=s[d];if(l.termType==="Variable"||l.termType==="Quad"&&a(l))return!0}return!1}function c(s){return s.map(d=>(d==null?void 0:d.termType)==="Quad"&&a(d))}})(oA)),oA}var eQ;function aE(){if(eQ)return F2;eQ=1,Object.defineProperty(F2,"__esModule",{value:!0}),F2.RdfStoreIndexNestedMap=void 0;const u=ai();let n=class{constructor(i){this.features={quotedTripleFiltering:!1},this.dictionary=i.dictionary,this.nestedMap=new Map}set(i,t){const e=this.nestedMap;let r=e.get(i[0]);r||(r=new Map,e.set(i[0],r));let a=r.get(i[1]);a||(a=new Map,r.set(i[1],a));let c=a.get(i[2]);c||(c=new Map,a.set(i[2],c));const s=c.has(i[3]);return s||c.set(i[3],t),!s}remove(i){const t=this.nestedMap,e=t.get(i[0]);if(!e)return!1;const r=e.get(i[1]);if(!r)return!1;const a=r.get(i[2]);if(!a)return!1;const c=a.delete(i[3]);return c&&a.size===0&&(r.delete(i[2]),r.size===0&&(e.delete(i[1]),e.size===0&&t.delete(i[0]))),c}get(i){const t=(0,u.encodeOptionalTerms)(i,this.dictionary);if(!(!t||t.includes(void 0)))return this.getEncoded(t)}getEncoded(i){const t=this.nestedMap.get(i[0]);if(!t)return;const e=t.get(i[1]);if(!e)return;const r=e.get(i[2]);if(r)return r.get(i[3])}*find(i){const t=(0,u.encodeOptionalTerms)(i,this.dictionary);if(!t)return;const[e,r,a,c]=t,[s,d,l,f]=i;let h,p,y,_,b,m,g;const T=this.nestedMap,v=e!==void 0?T.has(e)?[e]:[]:T.keys();for(const A of v){b=T.get(A),h=s||this.dictionary.decode(A);const I=r!==void 0?b.has(r)?[r]:[]:b.keys();for(const q of I){m=b.get(q),p=d||this.dictionary.decode(q);const O=a!==void 0?m.has(a)?[a]:[]:m.keys();for(const w of O){g=m.get(w),y=l||this.dictionary.decode(w);const S=c!==void 0?g.has(c)?[c]:[]:g.keys();for(const E of S)_=f||this.dictionary.decode(E),yield[h,p,y,_]}}}}*findEncoded(i,t){const[e,r,a,c]=i;let s,d,l;const f=this.nestedMap,h=e!==void 0?f.has(e)?[e]:[]:f.keys();for(const p of h){s=f.get(p);const y=r!==void 0?s.has(r)?[r]:[]:s.keys();for(const _ of y){d=s.get(_);const b=a!==void 0?d.has(a)?[a]:[]:d.keys();for(const m of b){l=d.get(m);const g=c!==void 0?l.has(c)?[c]:[]:l.keys();for(const T of g)yield[p,_,m,T]}}}}count(i){let t=0;const e=(0,u.encodeOptionalTerms)(i,this.dictionary);if(!e)return 0;const r=e[0],a=e[1],c=e[2],s=e[3];let d,l,f;const h=this.nestedMap,p=r!==void 0?h.has(r)?[r]:[]:h.keys();for(const y of p){d=h.get(y);const _=a!==void 0?d.has(a)?[a]:[]:d.keys();for(const b of _){l=d.get(b);const m=c!==void 0?l.has(c)?[c]:[]:l.keys();for(const g of m)f=l.get(g),s!==void 0?f.has(s)&&t++:t+=f.size}}return t}};return F2.RdfStoreIndexNestedMap=n,F2}var tQ;function sk(){if(tQ)return R2;tQ=1,Object.defineProperty(R2,"__esModule",{value:!0}),R2.TermDictionaryQuotedIndexed=void 0;const u=ii(),n=aE(),o=ai();let i=class Oi{constructor(e,r=new u.DataFactory){this.quotedTriplesDictionary=[],this.features={quotedTriples:!0},this.plainTermDictionary=e;const a={indexCombinations:[],indexConstructor:void 0,dictionary:this,dataFactory:r};this.quotedTriplesReverseDictionaries=[new n.RdfStoreIndexNestedMap(a),new n.RdfStoreIndexNestedMap(a),new n.RdfStoreIndexNestedMap(a)],this.dataFactory=r}encode(e){return e.termType==="Quad"?this.encodeQuotedTriple(e,!1):this.plainTermDictionary.encode(e)}encodeQuotedTriple(e,r){if(e.graph.termType!=="DefaultGraph")throw new Error("Encoding of quoted quads outside of the default graph is not allowed");const a=(0,o.encodeOptionalTerms)([e.subject,e.predicate,e.object,e.graph],this),c=a&&a.every(f=>f!==void 0)?this.quotedTriplesReverseDictionaries[0].getEncoded(a):void 0;if(c!==void 0||r)return c===void 0?void 0:Oi.BITMASK|c;const s=[this.encode(e.subject),this.encode(e.predicate),this.encode(e.object)],d=this.quotedTriplesDictionary.length+1;this.quotedTriplesDictionary.push(s);const l=this.encode(this.dataFactory.defaultGraph());return this.quotedTriplesReverseDictionaries[0].set([s[0],s[1],s[2],l],d),this.quotedTriplesReverseDictionaries[1].set([s[1],s[2],s[0],l],d),this.quotedTriplesReverseDictionaries[2].set([s[2],s[0],s[1],l],d),Oi.BITMASK|d}encodeOptional(e){return e.termType==="Quad"?this.encodeQuotedTriple(e,!0):this.plainTermDictionary.encodeOptional(e)}decode(e){if(Oi.BITMASK&e){const r=(~Oi.BITMASK&e)-1;if(r>=this.quotedTriplesDictionary.length)throw new Error(`The value ${e} is not present in the quoted triples range of the dictionary`);const a=this.quotedTriplesDictionary[r];return this.dataFactory.quad(this.decode(a[0]),this.decode(a[1]),this.decode(a[2]))}return this.plainTermDictionary.decode(e)}*encodings(){for(const e of this.plainTermDictionary.encodings())yield e;for(const e of this.quotedTriplesDictionary.keys())yield Oi.BITMASK|1+e}*findQuotedTriples(e){for(const r of this.findQuotedTriplesEncoded(e))yield this.decode(r)}*findQuotedTriplesEncoded(e){const[r,a]=(0,o.quadToPattern)(e.subject,e.predicate,e.object,e.graph,!0);for(const c of this.patternToIterable(r[0]))for(const s of this.patternToIterable(r[1]))for(const d of this.patternToIterable(r[2]))for(const l of this.patternToIterable(r[3]))if(c&&s||!s&&!d){const f=[c,s,d,l];for(const h of this.quotedTriplesReverseDictionaries[0].findEncoded(f,r))yield Oi.BITMASK|this.quotedTriplesReverseDictionaries[0].getEncoded(h)}else if(!c&&s){const f=[s,d,c,l];for(const h of this.quotedTriplesReverseDictionaries[1].findEncoded(f,r))yield Oi.BITMASK|this.quotedTriplesReverseDictionaries[1].getEncoded(h)}else{const f=[d,c,s,l];for(const h of this.quotedTriplesReverseDictionaries[2].findEncoded(f,r))yield Oi.BITMASK|this.quotedTriplesReverseDictionaries[2].getEncoded(h)}}*patternToIterable(e){if((e==null?void 0:e.termType)==="Quad"){yield*this.findQuotedTriplesEncoded(e);return}if(e===void 0){yield void 0;return}const r=this.encodeOptional(e);r!==void 0&&(yield r)}};return R2.TermDictionaryQuotedIndexed=i,i.BITMASK=1<<31,R2}var N2={},rQ;function ck(){if(rQ)return N2;rQ=1,Object.defineProperty(N2,"__esModule",{value:!0}),N2.RdfStoreIndexNestedMapQuoted=void 0;const u=ai(),n=aE();let o=class extends n.RdfStoreIndexNestedMap{constructor(t){super(t),this.features={quotedTripleFiltering:!0}}*getQuotedPatternKeys(t,e){for(const r of this.dictionary.findQuotedTriplesEncoded(e))t.has(r)&&(yield r)}*find(t){const e=(0,u.encodeOptionalTerms)(t,this.dictionary);if(!e)return;const[r,a,c,s]=e,[d,l,f,h]=t,[p,y,_,b]=(0,u.arePatternsQuoted)(t);let m,g,T,v,A,I,q;const O=this.nestedMap,w=d!==void 0?p?this.getQuotedPatternKeys(O,d):O.has(r)?[r]:[]:O.keys();for(const S of w){A=O.get(S),m=!p&&d?d:this.dictionary.decode(S);const E=l!==void 0?y?this.getQuotedPatternKeys(A,l):A.has(a)?[a]:[]:A.keys();for(const R of E){I=A.get(R),g=!y&&l?l:this.dictionary.decode(R);const L=f!==void 0?_?this.getQuotedPatternKeys(I,f):I.has(c)?[c]:[]:I.keys();for(const M of L){q=I.get(M),T=!_&&f?f:this.dictionary.decode(M);const B=h!==void 0?b?this.getQuotedPatternKeys(q,h):q.has(s)?[s]:[]:q.keys();for(const X of B)v=!b&&h?h:this.dictionary.decode(X),yield[m,g,T,v]}}}}*findEncoded(t,e){const[r,a,c,s]=t,[d,l,f,h]=e,[p,y,_,b]=(0,u.arePatternsQuoted)(e);let m,g,T;const v=this.nestedMap,A=d!==void 0?p?this.getQuotedPatternKeys(v,d):v.has(r)?[r]:[]:v.keys();for(const I of A){m=v.get(I);const q=l!==void 0?y?this.getQuotedPatternKeys(m,l):m.has(a)?[a]:[]:m.keys();for(const O of q){g=m.get(O);const w=f!==void 0?_?this.getQuotedPatternKeys(g,f):g.has(c)?[c]:[]:g.keys();for(const S of w){T=g.get(S);const E=h!==void 0?b?this.getQuotedPatternKeys(T,h):T.has(s)?[s]:[]:T.keys();for(const R of E)yield[Number.parseInt(I,10),Number.parseInt(O,10),Number.parseInt(S,10),Number.parseInt(R,10)]}}}}count(t){let e=0;const r=(0,u.encodeOptionalTerms)(t,this.dictionary);if(!r)return 0;const[a,c,s,d]=r,[l,f,h,p]=t,[y,_,b,m]=(0,u.arePatternsQuoted)(t);let g,T,v;const A=this.nestedMap,I=l!==void 0?y?this.getQuotedPatternKeys(A,l):A.has(a)?[a]:[]:A.keys();for(const q of I){g=A.get(q);const O=f!==void 0?_?this.getQuotedPatternKeys(g,f):g.has(c)?[c]:[]:g.keys();for(const w of O){T=g.get(w);const S=h!==void 0?b?this.getQuotedPatternKeys(T,h):T.has(s)?[s]:[]:T.keys();for(const E of S)v=T.get(E),p!==void 0?m?e+=[...this.getQuotedPatternKeys(v,p)].length:v.has(d)&&e++:e+=v.size}}return e}};return N2.RdfStoreIndexNestedMapQuoted=o,N2}var nQ;function dk(){if(nQ)return v2;nQ=1,Object.defineProperty(v2,"__esModule",{value:!0}),v2.RdfStore=void 0;const u=pt(),n=ii(),o=Kw(),i=fk(),t=ok(),e=sk(),r=ck(),a=ai();let c=class k3{constructor(d){this.features={quotedTripleFiltering:!0},this._size=0,this.options=d,this.dataFactory=d.dataFactory,this.dictionary=d.dictionary,this.indexesWrapped=k3.constructIndexesWrapped(d),this.indexesWrappedComponentOrders=this.indexesWrapped.map(l=>l.componentOrder)}static createDefault(){return new k3({indexCombinations:k3.DEFAULT_INDEX_COMBINATIONS,indexConstructor:d=>new r.RdfStoreIndexNestedMapQuoted(d),dictionary:new e.TermDictionaryQuotedIndexed(new t.TermDictionaryNumberRecordFullTerms),dataFactory:new n.DataFactory})}static constructIndexesWrapped(d){const l=[];if(d.indexCombinations.length===0)throw new Error("At least one index combination is required");for(const f of d.indexCombinations){if(!k3.isCombinationValid(f))throw new Error(`Invalid index combination: ${f}`);l.push({index:d.indexConstructor(d),componentOrder:f,componentOrderInverse:Object.fromEntries(f.map((h,p)=>[h,p]))})}return l}static isCombinationValid(d){for(const l of o.QUAD_TERM_NAMES)if(!d.includes(l))return!1;return d.length===4}get size(){return this._size}addQuad(d){const l=[this.dictionary.encode(d.subject),this.dictionary.encode(d.predicate),this.dictionary.encode(d.object),this.dictionary.encode(d.graph)];let f=!1;for(const h of this.indexesWrapped)f=h.index.set((0,a.orderQuadComponents)(h.componentOrder,l),!0);return f?(this._size++,!0):!1}removeQuad(d){const l=[this.dictionary.encodeOptional(d.subject),this.dictionary.encodeOptional(d.predicate),this.dictionary.encodeOptional(d.object),this.dictionary.encodeOptional(d.graph)];if(l.includes(void 0))return!1;let f=!1;for(const h of this.indexesWrapped)if(f=h.index.remove((0,a.orderQuadComponents)(h.componentOrder,l)),!f)break;return f?(this._size--,!0):!1}remove(d){return d.on("data",l=>this.removeQuad(l)),d}removeMatches(d,l,f,h){return this.remove(this.match(d,l,f,h))}deleteGraph(d){return typeof d=="string"&&(d=this.dataFactory.namedNode(d)),this.removeMatches(void 0,void 0,void 0,d)}import(d){return d.on("data",l=>this.addQuad(l)),d}*readQuads(d,l,f,h){const p=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(g=>g.index.features.quotedTripleFiltering),[y,_]=(0,a.quadToPattern)(d,l,f,h,p),b=this.indexesWrapped[(0,a.getBestIndex)(this.indexesWrappedComponentOrders,y)],m=(0,a.orderQuadComponents)(b.componentOrder,y);for(const g of b.index.find(m)){const T=this.dataFactory.quad(g[b.componentOrderInverse.subject],g[b.componentOrderInverse.predicate],g[b.componentOrderInverse.object],g[b.componentOrderInverse.graph]);_?(0,o.matchPattern)(T,d,l,f,h)&&(yield T):yield T}}getQuads(d,l,f,h){return[...this.readQuads(d,l,f,h)]}match(d,l,f,h){return(0,u.wrap)(this.readQuads(d,l,f,h))}*readBindings(d,l,f,h,p){const y=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(O=>O.index.features.quotedTripleFiltering),[_,b]=(0,a.quadToPattern)(l,f,h,p,y),m=this.indexesWrapped[(0,a.getBestIndex)(this.indexesWrappedComponentOrders,_)],g=(0,a.orderQuadComponents)(m.componentOrder,_),T=(0,a.encodeOptionalTerms)(g,this.dictionary);if(!T)return;const v=(0,a.orderQuadComponents)(m.componentOrder,[l,f,h,p]),A=[];for(let O=0;O<v.length;O++)(v[O].termType==="Variable"||v[O].termType==="Quad")&&A.push(O);let I=!1;const q=v.map((O,w)=>{const S=[];for(let E=w+1;E<v.length;E++)O.equals(v[E])&&(S.push(E),I=!0);return S});for(const O of m.index.findEncoded(T,g)){let w=!1,S=!1;const E=[];for(const R of A){if(I){const M=q[R];if(M){for(const B of M)if(O[R]!==O[B]){w=!0;break}}if(w)break}const L=this.dictionary.decode(O[R]);if(v[R].termType==="Quad"){if(L.termType==="Quad"){const M=(0,o.matchPatternMappings)(L,v[R],{returnMappings:!0});if(M){S=!0;for(const[B,X]of Object.entries(M)){const J=this.dataFactory.variable(B);if(E.some(ie=>ie[0].equals(J)&&!ie[1].equals(X))){w=!0;break}E.push([J,X])}continue}}w=!0;break}if(S&&E.some(M=>M[0].equals(v[R])&&!M[1].equals(L))){w=!0;break}E.push([v[R],L])}w||(yield d.bindings(E))}}getBindings(d,l,f,h,p){return[...this.readBindings(d,l,f,h,p)]}matchBindings(d,l,f,h,p){return(0,u.wrap)(this.readBindings(d,l,f,h,p))}countQuads(d,l,f,h){const p=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(m=>m.index.features.quotedTripleFiltering),[y]=(0,a.quadToPattern)(d,l,f,h,p);if(y.every(m=>m===void 0))return this.size;const _=this.indexesWrapped[(0,a.getBestIndex)(this.indexesWrappedComponentOrders,y)],b=(0,a.orderQuadComponents)(_.componentOrder,y);return _.index.count(b)}asDataset(){return new i.DatasetCoreWrapper(this)}};return v2.RdfStore=c,c.DEFAULT_INDEX_COMBINATIONS=[["graph","subject","predicate","object"],["graph","predicate","object","subject"],["graph","object","subject","predicate"]],v2}var iQ;function fk(){if(iQ)return m2;iQ=1,Object.defineProperty(m2,"__esModule",{value:!0}),m2.DatasetCoreWrapper=void 0;const u=dk();let n=class lk{constructor(i){this.store=i}get size(){return this.store.size}add(i){return this.store.addQuad(i),this}delete(i){return this.store.removeQuad(i),this}has(i){for(const t of this.store.readQuads(i.subject,i.predicate,i.object,i.graph))return!0;return!1}match(i,t,e,r){const a=new u.RdfStore(this.store.options);for(const c of this.store.readQuads(i,t,e,r))a.addQuad(c);return new lk(a)}[Symbol.iterator](){return this.store.readQuads()}};return m2.DatasetCoreWrapper=n,m2}var sA={},aQ;function Nfe(){return aQ||(aQ=1,Object.defineProperty(sA,"__esModule",{value:!0})),sA}var P2={},uQ;function Pfe(){if(uQ)return P2;uQ=1,Object.defineProperty(P2,"__esModule",{value:!0}),P2.TermDictionaryNumberMap=void 0;const u=ii(),n=$v();let o=class{constructor(t=new u.DataFactory){this.lastId=0,this.dictionary=new Map,this.reverseDictionary=new Map,this.features={quotedTriples:!1},this.dataFactory=t}encode(t){const e=(0,n.termToString)(t);let r=this.dictionary.get(e);return r===void 0&&(r=this.lastId++,this.dictionary.set(e,r),this.reverseDictionary.set(r,e)),r}encodeOptional(t){const e=(0,n.termToString)(t);return this.dictionary.get(e)}decode(t){const e=this.reverseDictionary.get(t);if(e===void 0)throw new Error(`The value ${t} is not present in this dictionary`);return(0,n.stringToTerm)(e,this.dataFactory)}encodings(){return this.reverseDictionary.keys()}findQuotedTriples(t){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(t){throw new Error("findQuotedTriplesEncoded is not supported")}};return P2.TermDictionaryNumberMap=o,P2}var D2={},oQ;function Dfe(){if(oQ)return D2;oQ=1,Object.defineProperty(D2,"__esModule",{value:!0}),D2.TermDictionaryNumberRecord=void 0;const u=ii(),n=$v();let o=class{constructor(t=new u.DataFactory){this.lastId=0,this.dictionary={},this.reverseDictionary={},this.features={quotedTriples:!1},this.dataFactory=t}encode(t){const e=(0,n.termToString)(t);let r=this.dictionary[e];return r===void 0&&(r=this.lastId++,this.dictionary[e]=r,this.reverseDictionary[r]=e),r}encodeOptional(t){const e=(0,n.termToString)(t);return this.dictionary[e]}decode(t){const e=this.reverseDictionary[t];if(e===void 0)throw new Error(`The value ${t} is not present in this dictionary`);return(0,n.stringToTerm)(e,this.dataFactory)}*encodings(){for(const t of Object.keys(this.reverseDictionary))yield Number.parseInt(t,10)}findQuotedTriples(t){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(t){throw new Error("findQuotedTriplesEncoded is not supported")}};return D2.TermDictionaryNumberRecord=o,D2}var j2={},sQ;function jfe(){if(sQ)return j2;sQ=1,Object.defineProperty(j2,"__esModule",{value:!0}),j2.TermDictionaryQuoted=void 0;const u=ii(),n=Kw();let o=class jl{constructor(t,e,r=new u.DataFactory){this.features={quotedTriples:!0},this.plainTermDictionary=t,this.quotedTriplesDictionary=e,this.dataFactory=r}encode(t){return t.termType==="Quad"?jl.BITMASK|1+this.quotedTriplesDictionary.encode(t):this.plainTermDictionary.encode(t)}encodeOptional(t){if(t.termType==="Quad"){const e=this.quotedTriplesDictionary.encodeOptional(t);return e===void 0?e:jl.BITMASK|1+e}return this.plainTermDictionary.encodeOptional(t)}decode(t){if(jl.BITMASK&t){const e=(~jl.BITMASK&t)-1;return this.quotedTriplesDictionary.decode(e)}return this.plainTermDictionary.decode(t)}*encodings(){for(const t of this.plainTermDictionary.encodings())yield t;for(const t of this.quotedTriplesDictionary.encodings())yield jl.BITMASK|1+t}*findQuotedTriples(t){for(const e of this.findQuotedTriplesEncoded(t))yield this.decode(e)}*findQuotedTriplesEncoded(t){for(let e of this.quotedTriplesDictionary.encodings()){e=jl.BITMASK|1+e;const r=this.decode(e);(0,n.matchPattern)(r,t.subject,t.predicate,t.object,t.graph)&&(yield e)}}};return j2.TermDictionaryQuoted=o,o.BITMASK=1<<31,j2}var L2={},cQ;function Lfe(){if(cQ)return L2;cQ=1,Object.defineProperty(L2,"__esModule",{value:!0}),L2.TermDictionaryQuotedReferential=void 0;const u=ii(),n=Kw(),o=ai();let i=class Ei{constructor(e,r=new u.DataFactory){this.quotedTriplesDictionary=[],this.quotedTriplesReverseDictionary={},this.features={quotedTriples:!0},this.plainTermDictionary=e,this.dataFactory=r}encode(e){return e.termType==="Quad"?this.encodeQuotedTriple(e,!1):this.plainTermDictionary.encode(e)}encodeQuotedTriple(e,r){var l;if(e.graph.termType!=="DefaultGraph")throw new Error("Encoding of quoted quads outside of the default graph is not allowed");const a=(l=(0,o.encodeOptionalTerms)([e.subject,e.predicate,e.object,void 0],this))==null?void 0:l.slice(0,3),c=a&&a.every(f=>f!==void 0)?this.quotedTriplesReverseDictionary[a.join(Ei.SEPARATOR)]:void 0;if(c!==void 0||r)return c===void 0?void 0:Ei.BITMASK|c;const s=[this.encode(e.subject),this.encode(e.predicate),this.encode(e.object)],d=this.quotedTriplesDictionary.length+1;return this.quotedTriplesDictionary.push(s),this.quotedTriplesReverseDictionary[s.join(Ei.SEPARATOR)]=d,Ei.BITMASK|d}encodeOptional(e){return e.termType==="Quad"?this.encodeQuotedTriple(e,!0):this.plainTermDictionary.encodeOptional(e)}decode(e){if(Ei.BITMASK&e){const r=(~Ei.BITMASK&e)-1;if(r>=this.quotedTriplesDictionary.length)throw new Error(`The value ${e} is not present in the quoted triples range of the dictionary`);const a=this.quotedTriplesDictionary[r];return this.dataFactory.quad(this.decode(a[0]),this.decode(a[1]),this.decode(a[2]))}return this.plainTermDictionary.decode(e)}*encodings(){for(const e of this.plainTermDictionary.encodings())yield e;for(const e of this.quotedTriplesDictionary.keys())yield Ei.BITMASK|1+e}*findQuotedTriples(e){for(const r of this.findQuotedTriplesEncoded(e))yield this.decode(r)}*findQuotedTriplesEncoded(e){for(let r of this.quotedTriplesDictionary.keys()){r=Ei.BITMASK|1+r;const a=this.decode(r);(0,n.matchPattern)(a,e.subject,e.predicate,e.object,e.graph)&&(yield r)}}};return L2.TermDictionaryQuotedReferential=i,i.BITMASK=1<<31,i.SEPARATOR="_",L2}var M2={},dQ;function Mfe(){if(dQ)return M2;dQ=1,Object.defineProperty(M2,"__esModule",{value:!0}),M2.TermDictionarySymbol=void 0;const u=ii(),n=$v();let o=class{constructor(t=new u.DataFactory){this.features={quotedTriples:!1},this.dataFactory=t}encode(t){return Symbol.for(`rdf::${(0,n.termToString)(t)}`)}encodeOptional(t){return this.encode(t)}decode(t){const e=Symbol.keyFor(t);if(e===void 0)throw new Error(`The value ${String(t)} is not present in this dictionary`);return(0,n.stringToTerm)(e.slice(5),this.dataFactory)}encodings(){throw new Error("encodings is not supported")}findQuotedTriples(t){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(t){throw new Error("findQuotedTriplesEncoded is not supported")}};return M2.TermDictionarySymbol=o,M2}var cA={},lQ;function Cfe(){return lQ||(lQ=1,Object.defineProperty(cA,"__esModule",{value:!0})),cA}var C2={},fQ;function hk(){if(fQ)return C2;fQ=1,Object.defineProperty(C2,"__esModule",{value:!0}),C2.RdfStoreIndexNestedMapRecursive=void 0;const u=ai();let n=class{constructor(i){this.features={quotedTripleFiltering:!1},this.dictionary=i.dictionary,this.nestedMap=new Map}set(i,t){let e=this.nestedMap,r=!1;for(const[a,c]of i.entries()){const s=e;let d=s.get(c);d?a===i.length-1&&(r=!0):(d=a===i.length-1?t:new Map,s.set(c,d)),e=d}return!r}remove(i){const t=this.nestedMap,e=t.get(i[0]);if(!e)return!1;const r=e.get(i[1]);if(!r)return!1;const a=r.get(i[2]);if(!a)return!1;const c=a.delete(i[3]);return c&&a.size===0&&(r.delete(i[2]),r.size===0&&(e.delete(i[1]),e.size===0&&t.delete(i[0]))),c}get(i){const t=(0,u.encodeOptionalTerms)(i,this.dictionary);if(!(!t||t.includes(void 0)))return this.getEncoded(t)}getEncoded(i){const t=this.nestedMap.get(i[0]);if(!t)return;const e=t.get(i[1]);if(!e)return;const r=e.get(i[2]);if(r)return r.get(i[3])}*find(i){const t=(0,u.encodeOptionalTerms)(i,this.dictionary);if(t)for(const e of this.findEncoded(t,i))yield[t[0]!==void 0?i[0]:this.dictionary.decode(e[0]),t[1]!==void 0?i[1]:this.dictionary.decode(e[1]),t[2]!==void 0?i[2]:this.dictionary.decode(e[2]),t[3]!==void 0?i[3]:this.dictionary.decode(e[3])]}*findEncoded(i,t){return yield*this.findEncodedInner(0,i,t,this.nestedMap,[])}*findEncodedInner(i,t,e,r,a){if(i===t.length)yield[...a];else{const c=t[i];if(e[i]){const d=c;if(d!==void 0){const l=r.get(d);l&&(a[i]=c,yield*this.findEncodedInner(i+1,t,e,l,a))}}else for(const[d,l]of r.entries())a[i]=d,yield*this.findEncodedInner(i+1,t,e,l,a)}}count(i){return this.countInner(0,i,this.nestedMap)}countInner(i,t,e){const r=t[i];let a=0;if(r){const c=this.dictionary.encodeOptional(r);if(c!==void 0){if(i===t.length-1)return e.has(c)?1:0;const s=e.get(c);s&&(a+=this.countInner(i+1,t,s))}}else{if(i===t.length-1)return e.size;for(const c of e.values())a+=this.countInner(i+1,t,c)}return a}};return C2.RdfStoreIndexNestedMapRecursive=n,C2}var q2={},hQ;function qfe(){if(hQ)return q2;hQ=1,Object.defineProperty(q2,"__esModule",{value:!0}),q2.RdfStoreIndexNestedMapRecursiveQuoted=void 0;const u=ai(),n=hk();let o=class extends n.RdfStoreIndexNestedMapRecursive{constructor(t){super(t),this.features={quotedTripleFiltering:!0}}*findEncoded(t,e){return yield*this.findEncodedInnerQuoted(0,t,e,(0,u.arePatternsQuoted)(e),this.nestedMap,[])}*findEncodedInnerQuoted(t,e,r,a,c,s){if(t===e.length)yield[...s];else{const d=e[t],l=r[t];if(l)if(a[t]){const f=this.dictionary.findQuotedTriplesEncoded(l);for(const h of f){const p=c.get(h);p&&(s[t]=h,yield*this.findEncodedInnerQuoted(t+1,e,r,a,p,s))}}else{const f=d;if(f!==void 0){const h=c.get(f);h&&(s[t]=d,yield*this.findEncodedInnerQuoted(t+1,e,r,a,h,s))}}else for(const[f,h]of c.entries())s[t]=f,yield*this.findEncodedInnerQuoted(t+1,e,r,a,h,s)}}countInner(t,e,r){const a=e[t];let c=0;if(a)if(a.termType==="Quad"&&(0,u.quadHasVariables)(a)){const s=this.dictionary.findQuotedTriplesEncoded(a);for(const d of s)if(t===e.length-1)r.has(d)&&c++;else{const l=r.get(d);l&&(c+=this.countInner(t+1,e,l))}}else{const s=this.dictionary.encodeOptional(a);if(s!==void 0){if(t===e.length-1)return r.has(s)?1:0;const d=r.get(s);d&&(c+=this.countInner(t+1,e,d))}}else{if(t===e.length-1)return r.size;for(const s of r.values())c+=this.countInner(t+1,e,s)}return c}};return q2.RdfStoreIndexNestedMapRecursiveQuoted=o,q2}var B2={},pQ;function pk(){if(pQ)return B2;pQ=1,Object.defineProperty(B2,"__esModule",{value:!0}),B2.RdfStoreIndexNestedRecord=void 0;const u=ai();let n=class{constructor(i){this.features={quotedTripleFiltering:!1},this.dictionary=i.dictionary,this.nestedRecords={}}set(i,t){const e=this.nestedRecords,r=e[i[0]]||(e[i[0]]={}),a=r[i[1]]||(r[i[1]]={}),c=a[i[2]]||(a[i[2]]={});return c[i[3]]?!1:(c[i[3]]=t,!0)}remove(i){const t=this.nestedRecords,e=t[i[0]];if(!e)return!1;const r=e[i[1]];if(!r)return!1;const a=r[i[2]];return!a||!a[i[3]]?!1:(delete a[i[3]],Object.keys(a).length===0&&(delete r[i[2]],Object.keys(r).length===0&&(delete e[i[1]],Object.keys(e).length===0&&delete t[i[0]])),!0)}get(i){const t=(0,u.encodeOptionalTerms)(i,this.dictionary);if(!(!t||t.includes(void 0)))return this.getEncoded(t)}getEncoded(i){var t,e,r;return(r=(e=(t=this.nestedRecords[i[0]])==null?void 0:t[i[1]])==null?void 0:e[i[2]])==null?void 0:r[i[3]]}*find(i){const t=(0,u.encodeOptionalTerms)(i,this.dictionary);if(!t)return;const[e,r,a,c]=t,[s,d,l,f]=i;let h,p,y,_,b,m,g;const T=this.nestedRecords,v=e!==void 0?e in T?[e]:[]:Object.keys(T);for(const A of v){b=T[A],h=s||this.dictionary.decode(Number.parseInt(A,10));const I=r!==void 0?r in b?[r]:[]:Object.keys(b);for(const q of I){m=b[q],p=d||this.dictionary.decode(Number.parseInt(q,10));const O=a!==void 0?a in m?[a]:[]:Object.keys(m);for(const w of O){g=m[w],y=l||this.dictionary.decode(Number.parseInt(w,10));const S=c!==void 0?c in g?[c]:[]:Object.keys(g);for(const E of S)_=f||this.dictionary.decode(Number.parseInt(E,10)),yield[h,p,y,_]}}}}*findEncoded(i,t){const[e,r,a,c]=i;let s,d,l;const f=this.nestedRecords,h=e!==void 0?e in f?[e]:[]:Object.keys(f);for(const p of h){s=f[p];const y=r!==void 0?r in s?[r]:[]:Object.keys(s);for(const _ of y){d=s[_];const b=a!==void 0?a in d?[a]:[]:Object.keys(d);for(const m of b){l=d[m];const g=c!==void 0?c in l?[c]:[]:Object.keys(l);for(const T of g)yield[Number.parseInt(p,10),Number.parseInt(_,10),Number.parseInt(m,10),Number.parseInt(T,10)]}}}}count(i){let t=0;const e=(0,u.encodeOptionalTerms)(i,this.dictionary);if(!e)return 0;const r=e[0],a=e[1],c=e[2],s=e[3];let d,l,f;const h=this.nestedRecords,p=r!==void 0?r in h?[r]:[]:Object.keys(h);for(const y of p){d=h[y];const _=a!==void 0?a in d?[a]:[]:Object.keys(d);for(const b of _){l=d[b];const m=c!==void 0?c in l?[c]:[]:Object.keys(l);for(const g of m)f=l[g],s!==void 0?s in f&&t++:t+=Object.keys(f).length}}return t}};return B2.RdfStoreIndexNestedRecord=n,B2}var $2={},bQ;function Bfe(){if(bQ)return $2;bQ=1,Object.defineProperty($2,"__esModule",{value:!0}),$2.RdfStoreIndexNestedRecordQuoted=void 0;const u=ai(),n=pk();let o=class extends n.RdfStoreIndexNestedRecord{constructor(t){super(t),this.features={quotedTripleFiltering:!0}}*getQuotedPatternKeys(t,e){for(const r of this.dictionary.findQuotedTriplesEncoded(e))r in t&&(yield r)}*find(t){const e=(0,u.encodeOptionalTerms)(t,this.dictionary);if(!e)return;const[r,a,c,s]=e,[d,l,f,h]=t,[p,y,_,b]=(0,u.arePatternsQuoted)(t);let m,g,T,v,A,I,q;const O=this.nestedRecords,w=d!==void 0?p?this.getQuotedPatternKeys(O,d):r in O?[r]:[]:Object.keys(O);for(const S of w){A=O[S],m=!p&&d?d:this.dictionary.decode(Number.parseInt(S,10));const E=l!==void 0?y?this.getQuotedPatternKeys(A,l):a in A?[a]:[]:Object.keys(A);for(const R of E){I=A[R],g=!y&&l?l:this.dictionary.decode(Number.parseInt(R,10));const L=f!==void 0?_?this.getQuotedPatternKeys(I,f):c in I?[c]:[]:Object.keys(I);for(const M of L){q=I[M],T=!_&&f?f:this.dictionary.decode(Number.parseInt(M,10));const B=h!==void 0?b?this.getQuotedPatternKeys(q,h):s in q?[s]:[]:Object.keys(q);for(const X of B)v=!b&&h?h:this.dictionary.decode(Number.parseInt(X,10)),yield[m,g,T,v]}}}}*findEncoded(t,e){const[r,a,c,s]=t,[d,l,f,h]=e,[p,y,_,b]=(0,u.arePatternsQuoted)(e);let m,g,T;const v=this.nestedRecords,A=d!==void 0?p?this.getQuotedPatternKeys(v,d):r in v?[r]:[]:Object.keys(v);for(const I of A){m=v[I];const q=l!==void 0?y?this.getQuotedPatternKeys(m,l):a in m?[a]:[]:Object.keys(m);for(const O of q){g=m[O];const w=f!==void 0?_?this.getQuotedPatternKeys(g,f):c in g?[c]:[]:Object.keys(g);for(const S of w){T=g[S];const E=h!==void 0?b?this.getQuotedPatternKeys(T,h):s in T?[s]:[]:Object.keys(T);for(const R of E)yield[Number.parseInt(I,10),Number.parseInt(O,10),Number.parseInt(S,10),Number.parseInt(R,10)]}}}}count(t){let e=0;const r=(0,u.encodeOptionalTerms)(t,this.dictionary);if(!r)return 0;const[a,c,s,d]=r,[l,f,h,p]=t,[y,_,b,m]=(0,u.arePatternsQuoted)(t);let g,T,v;const A=this.nestedRecords,I=l!==void 0?y?this.getQuotedPatternKeys(A,l):a in A?[a]:[]:Object.keys(A);for(const q of I){g=A[q];const O=f!==void 0?_?this.getQuotedPatternKeys(g,f):c in g?[c]:[]:Object.keys(g);for(const w of O){T=g[w];const S=h!==void 0?b?this.getQuotedPatternKeys(T,h):s in T?[s]:[]:Object.keys(T);for(const E of S)v=T[E],p!==void 0?m?e+=[...this.getQuotedPatternKeys(v,p)].length:d in v&&e++:e+=Object.keys(v).length}}return e}};return $2.RdfStoreIndexNestedRecordQuoted=o,$2}var dA={},yQ;function $fe(){return yQ||(yQ=1,Object.defineProperty(dA,"__esModule",{value:!0})),dA}var lA={},_Q;function Ufe(){return _Q||(_Q=1,Object.defineProperty(lA,"__esModule",{value:!0})),lA}var gQ;function Vfe(){return gQ||(gQ=1,(function(u){var n=zd&&zd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=zd&&zd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(fk(),u),o(Nfe(),u),o(Pfe(),u),o(Dfe(),u),o(ok(),u),o(jfe(),u),o(sk(),u),o(Lfe(),u),o(Mfe(),u),o(Cfe(),u),o(aE(),u),o(ck(),u),o(hk(),u),o(qfe(),u),o(pk(),u),o(Bfe(),u),o($fe(),u),o(ai(),u),o(Ufe(),u),o(dk(),u)})(zd)),zd}var mQ;function bk(){if(mQ)return KT;mQ=1,Object.defineProperty(KT,"__esModule",{value:!0}),KT.storeStream=n;const u=Vfe();function n(o){const i=u.RdfStore.createDefault();return new Promise((t,e)=>i.import(o).on("error",e).once("end",()=>t(i)))}return KT}var vQ;function Qfe(){if(vQ)return y2;vQ=1,Object.defineProperty(y2,"__esModule",{value:!0}),y2.ActorQuerySourceIdentifyHypermediaNone=void 0;const u=nE(),n=rE(),o=Ce(),i=be(),t=$t(),e=bk();let r=class extends n.ActorQuerySourceIdentifyHypermedia{constructor(c){super(c,"file")}async testMetadata(c){return(0,i.passTest)({filterFactor:0})}async run(c){this.logInfo(c.context,`Identified as file source: ${c.url}`);const s=c.context.getSafe(o.KeysInitQuery.dataFactory),d=new u.QuerySourceRdfJs(await(0,e.storeStream)(c.quads),s,await t.BindingsFactory.create(this.mediatorMergeBindingsContext,c.context,s));return d.toString=()=>`QuerySourceRdfJs(${c.url})`,d.referenceValue=c.url,{source:d}}};return y2.ActorQuerySourceIdentifyHypermediaNone=r,y2}var TQ;function Hfe(){return TQ||(TQ=1,(function(u){var n=Hd&&Hd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Hd&&Hd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Qfe(),u)})(Hd)),Hd}var kd={},U2={},Kd={},V2={},wQ;function Gfe(){if(wQ)return V2;wQ=1,Object.defineProperty(V2,"__esModule",{value:!0}),V2.ActorExpressionEvaluatorFactory=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i),this.mediatorQueryOperation=i.mediatorQueryOperation,this.mediatorFunctionFactory=i.mediatorFunctionFactory,this.mediatorMergeBindingsContext=i.mediatorMergeBindingsContext}};return V2.ActorExpressionEvaluatorFactory=n,V2}var SQ;function zfe(){return SQ||(SQ=1,(function(u){var n=Kd&&Kd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Kd&&Kd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Gfe(),u)})(Kd)),Kd}var Q2={},AQ;function yk(){if(AQ)return Q2;AQ=1,Object.defineProperty(Q2,"__esModule",{value:!0}),Q2.AlgebraTransformer=void 0;const u=Ce(),n=ge(),o=dt();let i=class lw extends n.TermTransformer{constructor(e,r){super(e.getSafe(u.KeysExpressionEvaluator.superTypeProvider)),this.context=e,this.mediatorFunctionFactory=r}async transformAlgebra(e){const r=o.Algebra.expressionTypes;switch(e.expressionType){case r.TERM:return this.transformTerm(e);case r.OPERATOR:return await this.transformOperator(e);case r.NAMED:return await this.transformNamed(e);case r.EXISTENCE:return lw.transformExistence(e);case r.AGGREGATE:return lw.transformAggregate(e);case r.WILDCARD:return lw.transformWildcard(e)}}static transformWildcard(e){return new n.NamedNode(e.wildcard.value)}async getOperator(e,r){const a=await this.mediatorFunctionFactory.mediate({functionName:e,arguments:r.args,context:this.context}),c=await Promise.all(r.args.map(s=>this.transformAlgebra(s)));if(!a.checkArity(c))throw new n.InvalidArity(c,e);return new n.Operator(e,c,a.apply)}async transformOperator(e){return this.getOperator(e.operator.toLowerCase(),e)}async transformNamed(e){return this.getOperator(e.name.value,e)}static transformAggregate(e){const r=e.aggregator;return new n.Aggregate(r,e)}static transformExistence(e){return new n.Existence(e)}};return Q2.AlgebraTransformer=i,Q2}var H2={},G2={},OQ;function _k(){if(OQ)return G2;OQ=1,Object.defineProperty(G2,"__esModule",{value:!0}),G2.InternalEvaluator=void 0;const u=Ce(),n=ra(),o=ge(),i=gt(),t=dt(),e=yk();let r=class{constructor(c,s,d,l){this.context=c,this.mediatorQueryOperation=d,this.bindingsFactory=l,this.subEvaluators={[n.ExpressionType.Term]:(f,h)=>this.term(f),[n.ExpressionType.Variable]:(f,h)=>this.variable(f,h),[n.ExpressionType.Operator]:(f,h)=>this.evalFunction(f,h),[n.ExpressionType.Existence]:(f,h)=>this.evalExistence(f,h),[n.ExpressionType.Aggregate]:(f,h)=>this.evalAggregate()},this.transformer=new e.AlgebraTransformer(c,s)}async evaluatorExpressionEvaluation(c,s){return this.subEvaluators[c.expressionType].bind(this)(c,s)}term(c){return c}variable(c,s){const d=s.get(o.expressionToVar(this.context.getSafe(u.KeysInitQuery.dataFactory),c));if(!d)throw new o.UnboundVariableError(c.name,s);return this.transformer.transformRDFTermUnsafe(d)}async evalFunction(c,s){return c.apply({args:c.args,mapping:s,exprEval:this})}async evalExistence(c,s){const d=this.context.getSafe(u.KeysInitQuery.dataFactory),l=new t.Factory(d),f=(0,i.materializeOperation)(c.expression.input,s,l,this.bindingsFactory),h=await this.mediatorQueryOperation.mediate({operation:f,context:this.context}),p=(0,i.getSafeBindings)(h);return await new Promise((y,_)=>{p.bindingsStream.on("end",()=>{y(!1)}),p.bindingsStream.on("error",_),p.bindingsStream.on("data",()=>{p.bindingsStream.close(),y(!0)})}).then(y=>c.expression.not?!y:y).then(y=>new o.BooleanLiteral(y))}evalAggregate(){throw new o.NoAggregator}};return G2.InternalEvaluator=r,G2}var EQ;function Xfe(){if(EQ)return H2;EQ=1,Object.defineProperty(H2,"__esModule",{value:!0}),H2.ExpressionEvaluator=void 0;const u=Ce(),n=_k();let o=class{constructor(t,e,r,a,c){this.context=t,this.expr=e,this.mediatorFunctionFactory=r,this.mediatorQueryOperation=a,this.bindingsFactory=c,this.internalEvaluator=new n.InternalEvaluator(t,r,a,c)}async evaluate(t){return(await this.internalEvaluator.evaluatorExpressionEvaluation(this.expr,t)).toRDF(this.context.getSafe(u.KeysInitQuery.dataFactory))}async evaluateAsEBV(t){return(await this.internalEvaluator.evaluatorExpressionEvaluation(this.expr,t)).coerceEBV()}evaluateAsEvaluatorExpression(t){return this.evaluatorExpressionEvaluation(this.expr,t)}evaluatorExpressionEvaluation(t,e){return this.internalEvaluator.evaluatorExpressionEvaluation(t,e)}};return H2.ExpressionEvaluator=o,H2}var xQ;function Jfe(){if(xQ)return U2;xQ=1,Object.defineProperty(U2,"__esModule",{value:!0}),U2.ActorExpressionEvaluatorFactoryDefault=void 0;const u=zfe(),n=Ce(),o=be(),i=$t(),t=ge(),e=yk(),r=Xfe();let a=class extends u.ActorExpressionEvaluatorFactory{constructor(s){super(s)}async test(s){return(0,o.passTestVoid)()}async run(s){const d=(0,t.prepareEvaluatorActionContext)(s.context);return new r.ExpressionEvaluator(d,await new e.AlgebraTransformer(d,this.mediatorFunctionFactory).transformAlgebra(s.algExpr),this.mediatorFunctionFactory,this.mediatorQueryOperation,await i.BindingsFactory.create(this.mediatorMergeBindingsContext,s.context,s.context.getSafe(n.KeysInitQuery.dataFactory)))}};return U2.ActorExpressionEvaluatorFactoryDefault=a,U2}var IQ;function kfe(){return IQ||(IQ=1,(function(u){var n=kd&&kd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=kd&&kd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Jfe(),u)})(kd)),kd}var Wd={},z2={},X2={},RQ;function Kfe(){if(RQ)return X2;RQ=1,Object.defineProperty(X2,"__esModule",{value:!0}),X2.GroupsState=void 0;const u=Ce(),n=$t();let o=class{constructor(t,e,r,a,c){this.pattern=t,this.mediatorBindingsAggregatorFactory=e,this.context=r,this.bindingsFactory=a,this.variables=c,this.groups=new Map,this.groupsInitializer=new Map,this.groupVariables=new Set(this.pattern.variables.map(s=>s.value)),this.waitCounter=1,this.resultHasBeenCalled=!1}consumeBindings(t){const e=this.resultCheck();if(e)return e;this.waitCounter++;const r=t.filter((d,l)=>this.groupVariables.has(l.value)),a=this.hashBindings(r);let c=this.groupsInitializer.get(a),s;if(c){const d=c;s=(async()=>{const l=await d;await Promise.all(this.pattern.aggregates.map(async f=>{const h=f.variable.value;await l.aggregators[h].putBindings(t)}))})().then(async()=>{await this.subtractWaitCounterAndCollect()})}else c=(async()=>{const d={};await Promise.all(this.pattern.aggregates.map(async f=>{const h=f.variable.value;d[h]=await this.mediatorBindingsAggregatorFactory.mediate({expr:f,context:this.context}),await d[h].putBindings(t)}));const l={aggregators:d,bindings:r};return this.groups.set(a,l),await this.subtractWaitCounterAndCollect(),l})(),this.groupsInitializer.set(a,c),s=c;return s}async subtractWaitCounterAndCollect(){--this.waitCounter===0&&await this.handleResultCollection()}async handleResultCollection(){const t=this.context.getSafe(u.KeysInitQuery.dataFactory);let e=await Promise.all([...this.groups].map(async([r,a])=>{const{bindings:c,aggregators:s}=a;let d=c;for(const l in s){const f=await s[l].result();f&&(d=d.set(t.variable(l),f))}return d}));if(e.length===0&&this.groupVariables.size===0){const r=[];await Promise.all(this.pattern.aggregates.map(async a=>{const c=a.variable,d=await(await this.mediatorBindingsAggregatorFactory.mediate({expr:a,context:this.context})).result();d!==void 0&&r.push([c,d])})),e=[this.bindingsFactory.bindings(r)]}this.waitResolver(e)}resultCheck(){if(this.resultHasBeenCalled)return Promise.reject(new Error("Calling any function after calling collectResult is invalid."))}async collectResults(){const t=this.resultCheck();if(t)return t;this.resultHasBeenCalled=!0;const e=new Promise(r=>{this.waitResolver=r});return await this.subtractWaitCounterAndCollect(),e}hashBindings(t){return(0,n.bindingsToCompactString)(t,this.variables)}};return X2.GroupsState=o,X2}var FQ;function Wfe(){if(FQ)return z2;FQ=1,Object.defineProperty(z2,"__esModule",{value:!0}),z2.ActorQueryOperationGroup=void 0;const u=Lt(),n=Ce(),o=be(),i=$t(),t=gt(),e=pt(),r=Kfe();let a=class extends u.ActorQueryOperationTypedMediated{constructor(s){super(s,"group"),this.mediatorBindingsAggregatorFactory=s.mediatorBindingsAggregatorFactory}async testOperation(){return(0,o.passTestVoid)()}async runOperation(s,d){const l=d.getSafe(n.KeysInitQuery.dataFactory),f=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,d,l),{input:h,aggregates:p}=s,y=await this.mediatorQueryOperation.mediate({operation:h,context:d}),_=(0,t.getSafeBindings)(y),b=[...s.variables,...p.map(T=>T.variable)].map(T=>({variable:T,canBeUndef:!1})),m=(await _.metadata()).variables.map(T=>T.variable);return{type:"bindings",bindingsStream:new e.TransformIterator(()=>new Promise((T,v)=>{const A=new r.GroupsState(s,this.mediatorBindingsAggregatorFactory,d,f,m);_.bindingsStream.on("end",async()=>{try{const I=new e.ArrayIterator(await A.collectResults(),{autoStart:!1});T(I)}catch(I){v(I)}}),_.bindingsStream.on("error",v),_.bindingsStream.on("data",I=>{A.consumeBindings(I).catch(v)})}),{autoStart:!1}),metadata:async()=>({...await _.metadata(),variables:b})}}};return z2.ActorQueryOperationGroup=a,z2}var NQ;function Yfe(){return NQ||(NQ=1,(function(u){var n=Wd&&Wd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Wd&&Wd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Wfe(),u)})(Wd)),Wd}var Yd={},J2={},PQ;function Zfe(){if(PQ)return J2;PQ=1,Object.defineProperty(J2,"__esModule",{value:!0}),J2.ActorQueryOperationNop=void 0;const u=Lt(),n=Ce(),o=be(),i=$t(),t=br(),e=pt();let r=class extends u.ActorQueryOperationTypedMediated{constructor(c){super(c,"nop")}async testOperation(c,s){return(0,o.passTestVoid)()}async runOperation(c,s){const d=s.getSafe(n.KeysInitQuery.dataFactory),l=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,s,d);return{bindingsStream:new e.SingletonIterator(l.bindings()),metadata:()=>Promise.resolve({state:new t.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]}),type:"bindings"}}};return J2.ActorQueryOperationNop=r,J2}var DQ;function e0e(){return DQ||(DQ=1,(function(u){var n=Yd&&Yd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Yd&&Yd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Zfe(),u)})(Yd)),Yd}var Zd={},k2={},jQ;function t0e(){if(jQ)return k2;jQ=1,Object.defineProperty(k2,"__esModule",{value:!0}),k2.ActorQueryOperationService=void 0;const u=Lt(),n=Ce(),o=be(),i=$t(),t=br(),e=gt(),r=pt();let a=class extends u.ActorQueryOperationTypedMediated{constructor(s){super(s,"service")}async testOperation(s,d){return s.name.termType!=="NamedNode"?(0,o.failTest)(`${this.name} can only query services by IRI, while a ${s.name.termType} was given.`):(0,o.passTestVoid)()}async runOperation(s,d){const{querySource:l}=await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{value:s.name.value,type:this.forceSparqlEndpoint?"sparql":void 0},context:d});let f;try{f=(0,e.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:(0,e.assignOperationSource)(s.input,l),context:d}))}catch(h){if(s.silent){const p=d.getSafe(n.KeysInitQuery.dataFactory),y=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,d,p);f={bindingsStream:new r.SingletonIterator(y.bindings()),type:"bindings",metadata:async()=>({state:new t.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]})},this.logWarn(d,`An error occurred when executing a SERVICE clause: ${h.message}`)}else throw h}return f}};return k2.ActorQueryOperationService=a,k2}var LQ;function r0e(){return LQ||(LQ=1,(function(u){var n=Zd&&Zd.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Zd&&Zd.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(t0e(),u)})(Zd)),Zd}var el={},K2={},MQ;function n0e(){if(MQ)return K2;MQ=1,Object.defineProperty(K2,"__esModule",{value:!0}),K2.ActorQueryOperationValues=void 0;const u=Lt(),n=Ce(),o=be(),i=$t(),t=br(),e=pt();let r=class extends u.ActorQueryOperationTyped{constructor(c){super(c,"values")}async testOperation(c,s){return(0,o.passTestVoid)()}async runOperation(c,s){const d=s.getSafe(n.KeysInitQuery.dataFactory),l=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,s,d);return{type:"bindings",bindingsStream:new e.ArrayIterator(c.bindings.map(p=>l.bindings(Object.entries(p).map(([y,_])=>[d.variable(y.slice(1)),_])))),metadata:()=>Promise.resolve({state:new t.MetadataValidationState,cardinality:{type:"exact",value:c.bindings.length},variables:c.variables.map(p=>({variable:p,canBeUndef:c.bindings.some(y=>!(`?${p.value}`in y))}))})}}};return K2.ActorQueryOperationValues=r,K2}var CQ;function i0e(){return CQ||(CQ=1,(function(u){var n=el&&el.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=el&&el.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(n0e(),u)})(el)),el}var tl={},W2={},qQ;function a0e(){if(qQ)return W2;qQ=1,Object.defineProperty(W2,"__esModule",{value:!0}),W2.ActorQueryOperationPathOneOrMore=void 0;const u=sa(),n=Ce(),o=$t(),i=gt(),t=pt(),e=dt();let r=class extends u.ActorAbstractPath{constructor(c){super(c,e.Algebra.types.ONE_OR_MORE_PATH)}async runOperation(c,s){const d=s.getSafe(n.KeysInitQuery.dataFactory),l=new e.Factory(d),f=await o.BindingsFactory.create(this.mediatorMergeBindingsContext,s,d),h=await this.isPathArbitraryLengthDistinct(l,s,c);if(h.operation)return h.operation;s=h.context;const p=c.predicate;if(c.subject.termType!=="Variable"&&c.object.termType==="Variable"){const m=c.object,g=await this.getObjectsPredicateStarEval(c.subject,p.path,m,c.graph,s,!1,l,f),T=(c.graph.termType==="Variable"?[m,c.graph]:[m]).map(v=>({variable:v,canBeUndef:!1}));return{type:"bindings",bindingsStream:g.bindingsStream,metadata:async()=>({...await g.metadata(),variables:T})}}if(c.subject.termType==="Variable"&&c.object.termType==="Variable"){const m=l.createDistinct(l.createPath(c.subject,c.predicate.path,c.object,c.graph)),g=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:s,operation:m})),T=c.subject,v=c.object,A={},I=new t.MultiTransformIterator(g.bindingsStream,{multiTransform:O=>{const w=O.get(T),S=O.get(v),E=c.graph.termType==="Variable"?O.get(c.graph):c.graph;return new t.TransformIterator(async()=>{const R=new t.BufferedIterator;return await this.getSubjectAndObjectBindingsPredicateStar(T,v,w,S,p.path,E,s,A,{},R,{count:0},l,f),R.map(L=>(c.graph.termType==="Variable"&&(L=L.set(c.graph,E)),L))},{autoStart:!1,maxBufferSize:128})},autoStart:!1}),q=(c.graph.termType==="Variable"?[T,v,c.graph]:[T,v]).map(O=>({variable:O,canBeUndef:!1}));return{type:"bindings",bindingsStream:I,metadata:async()=>({...await g.metadata(),variables:q})}}if(c.subject.termType==="Variable"&&c.object.termType!=="Variable")return this.mediatorQueryOperation.mediate({context:s,operation:l.createPath(c.object,l.createOneOrMorePath(l.createInv(p.path)),c.subject,c.graph)});const y=this.generateVariable(d),_=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:s,operation:l.createPath(c.subject,p,y,c.graph)}));return{type:"bindings",bindingsStream:_.bindingsStream.map(m=>c.object.equals(m.get(y))?c.graph.termType==="Variable"?f.bindings([[c.graph,m.get(c.graph)]]):f.bindings():null),metadata:async()=>({...await _.metadata(),variables:(c.graph.termType==="Variable"?[c.graph]:[]).map(m=>({variable:m,canBeUndef:!1}))})}}};return W2.ActorQueryOperationPathOneOrMore=r,W2}var BQ;function u0e(){return BQ||(BQ=1,(function(u){var n=tl&&tl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=tl&&tl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(a0e(),u)})(tl)),tl}var rl={},Y2={},$Q;function o0e(){if($Q)return Y2;$Q=1,Object.defineProperty(Y2,"__esModule",{value:!0}),Y2.ActorQueryOperationPathZeroOrMore=void 0;const u=sa(),n=Ce(),o=$t(),i=gt(),t=pt(),e=tr(),r=dt();let a=class extends u.ActorAbstractPath{constructor(s){super(s,r.Algebra.types.ZERO_OR_MORE_PATH)}async runOperation(s,d){const l=d.getSafe(n.KeysInitQuery.dataFactory),f=new r.Factory(l),h=await o.BindingsFactory.create(this.mediatorMergeBindingsContext,d,l),p=await this.isPathArbitraryLengthDistinct(f,d,s);if(p.operation)return p.operation;d=p.context;const y=s.predicate,_=this.getPathSources(y),b=s.subject.termType==="Variable",m=s.object.termType==="Variable";if(s.subject.termType==="Variable"&&s.object.termType==="Variable"){const q=this.generateVariable(l,s),O=this.assignPatternSources(f,f.createPattern(s.subject,q,s.object,s.graph),_),w=(0,i.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:d,operation:O})),S=s.subject,E=s.object,R=new Set,L={},M=new t.MultiTransformIterator(w.bindingsStream,{multiTransform:X=>{const J=X.get(S),ie=X.get(E),U=s.graph.termType==="Variable"?X.get(s.graph):s.graph,fe=(0,e.termToString)(J)+(0,e.termToString)(U),me=(0,e.termToString)(ie)+(0,e.termToString)(U);return new t.TransformIterator(async()=>{if(R.has(fe)&&R.has(me))return new t.EmptyIterator;const he=new t.BufferedIterator,te={count:0};return R.has(fe)||(R.add(fe),await this.getSubjectAndObjectBindingsPredicateStar(S,E,J,J,y.path,U,d,L,{},he,te,f,h)),R.has(me)||(R.add(me),await this.getSubjectAndObjectBindingsPredicateStar(S,E,ie,ie,y.path,U,d,L,{},he,te,f,h)),he.map(xe=>(s.graph.termType==="Variable"&&(xe=xe.set(s.graph,U)),xe))},{autoStart:!1,maxBufferSize:128})},autoStart:!1}),B=(s.graph.termType==="Variable"?[S,s.object,s.graph]:[S,s.object]).map(X=>({variable:X,canBeUndef:!1}));return{type:"bindings",bindingsStream:M,metadata:async()=>({...await w.metadata(),variables:B})}}if(!b&&!m){const q=this.generateVariable(l),O=await this.getObjectsPredicateStarEval(s.subject,y.path,q,s.graph,d,!0,f,h);return{type:"bindings",bindingsStream:O.bindingsStream.map(S=>s.object.equals(S.get(q))?s.graph.termType==="Variable"?h.bindings([[s.graph,S.get(s.graph)]]):h.bindings():null),metadata:async()=>({...await O.metadata(),variables:(s.graph.termType==="Variable"?[s.graph]:[]).map(S=>({variable:S,canBeUndef:!1}))})}}const g=b?s.object:s.subject,T=b?s.subject:s.object,v=b?f.createInv(y.path):y.path,A=await this.getObjectsPredicateStarEval(g,v,T,s.graph,d,!0,f,h),I=(s.graph.termType==="Variable"?[T,s.graph]:[T]).map(q=>({variable:q,canBeUndef:!1}));return{type:"bindings",bindingsStream:A.bindingsStream,metadata:async()=>({...await A.metadata(),variables:I})}}};return Y2.ActorQueryOperationPathZeroOrMore=a,Y2}var UQ;function s0e(){return UQ||(UQ=1,(function(u){var n=rl&&rl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=rl&&rl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(o0e(),u)})(rl)),rl}var nl={},Z2={},VQ;function c0e(){if(VQ)return Z2;VQ=1,Object.defineProperty(Z2,"__esModule",{value:!0}),Z2.ActorQueryOperationPathZeroOrOne=void 0;const u=sa(),n=Ce(),o=$t(),i=br(),t=gt(),e=pt(),r=dt();let a=class extends u.ActorAbstractPath{constructor(s){super(s,r.Algebra.types.ZERO_OR_ONE_PATH)}async runOperation(s,d){const l=d.getSafe(n.KeysInitQuery.dataFactory),f=new r.Factory(l),h=await o.BindingsFactory.create(this.mediatorMergeBindingsContext,d,l),p=s.predicate,y=this.getPathSources(p),_=[];if(s.subject.termType!=="Variable"&&s.object.termType!=="Variable"&&s.subject.equals(s.object))return{type:"bindings",bindingsStream:new e.SingletonIterator(h.bindings()),metadata:()=>Promise.resolve({state:new i.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]})};const b=await this.isPathArbitraryLengthDistinct(f,d,s);if(b.operation)return b.operation;d=b.context;const m=(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:d,operation:f.createPath(s.subject,p.path,s.object,s.graph)}));let g;if(s.subject.termType==="Variable"&&s.object.termType==="Variable"){const v=this.generateVariable(l,s),A=(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:d,operation:f.createFilter(this.assignPatternSources(f,f.createPattern(s.subject,v,s.object,s.graph),y),f.createOperatorExpression("=",[f.createTermExpression(s.subject),f.createTermExpression(s.object)]))})).bindingsStream.map(I=>I.delete(v));g=new e.UnionIterator([A,m.bindingsStream],{autoStart:!1})}else s.subject.termType==="Variable"&&_.push(h.bindings([[s.subject,s.object]])),s.object.termType==="Variable"&&_.push(h.bindings([[s.object,s.subject]])),g=m.bindingsStream.prepend(_);return{type:"bindings",bindingsStream:g,metadata:async()=>{const v=await m.metadata();return{...v,cardinality:{...v.cardinality,value:v.cardinality.value+1}}}}}};return Z2.ActorQueryOperationPathZeroOrOne=a,Z2}var QQ;function d0e(){return QQ||(QQ=1,(function(u){var n=nl&&nl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=nl&&nl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(c0e(),u)})(nl)),nl}var il={},e3={},HQ;function l0e(){if(HQ)return e3;HQ=1,Object.defineProperty(e3,"__esModule",{value:!0}),e3.ActorQueryOperationUpdateDeleteInsert=void 0;const u=VJ(),n=Lt(),o=Ce(),i=$t(),t=gt(),e=pt();let r=class extends n.ActorQueryOperationTypedMediated{constructor(c){super(c,"deleteinsert"),this.blankNodeCounter=0}async testOperation(c,s){return(0,t.testReadOnly)(s)}async runOperation(c,s){const d=s.getSafe(o.KeysInitQuery.dataFactory),l=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,s,d),f=c.where?(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:c.where,context:s})).bindingsStream:new e.ArrayIterator([l.bindings()],{autoStart:!1});let h,p;c.insert&&(h=new u.BindingsToQuadsIterator(d,c.insert.map(u.BindingsToQuadsIterator.localizeQuad.bind(null,d,this.blankNodeCounter)),f.clone()),this.blankNodeCounter++),c.delete&&(p=new u.BindingsToQuadsIterator(d,c.delete.map(u.BindingsToQuadsIterator.localizeQuad.bind(null,d,this.blankNodeCounter)),f.clone()),this.blankNodeCounter++);const{execute:y}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:h,quadStreamDelete:p,context:s});return{type:"void",execute:y}}};return e3.ActorQueryOperationUpdateDeleteInsert=r,e3}var GQ;function f0e(){return GQ||(GQ=1,(function(u){var n=il&&il.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=il&&il.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(l0e(),u)})(il)),il}var al={},t3={},ul={},r3={},zQ;function h0e(){if(zQ)return r3;zQ=1,Object.defineProperty(r3,"__esModule",{value:!0}),r3.ActorQueryProcess=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i)}};return r3.ActorQueryProcess=n,r3}var XQ;function Ww(){return XQ||(XQ=1,(function(u){var n=ul&&ul.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ul&&ul.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(h0e(),u)})(ul)),ul}var JQ;function p0e(){if(JQ)return t3;JQ=1,Object.defineProperty(t3,"__esModule",{value:!0}),t3.ActorQueryProcessSequential=void 0;const u=Ww(),n=Ce(),o=be(),i=$t(),t=gt(),e=dt();let r=class extends u.ActorQueryProcess{constructor(c){super(c)}async test(c){return c.context.get(n.KeysInitQuery.explain)??c.context.get(new o.ActionContextKey("explain"))?(0,o.failTest)(`${this.name} is not able to explain queries.`):(0,o.passTestVoid)()}async run(c){let{operation:s,context:d}=await this.parse(c.query,c.context);return{operation:s,context:d}=await this.optimize(s,d),{result:await this.evaluate(s,d)}}async parse(c,s){s=(await this.mediatorContextPreprocess.mediate({context:s,initialize:!0})).context;let d;if(typeof c=="string"){s=s.set(n.KeysInitQuery.queryString,c);const l=s.get(n.KeysInitQuery.baseIRI),f=s.get(n.KeysInitQuery.queryFormat),h=await this.mediatorQueryParse.mediate({context:s,query:c,queryFormat:f,baseIRI:l});d=h.operation,h.baseIRI&&(s=s.set(n.KeysInitQuery.baseIRI,h.baseIRI))}else d=c;if(s.has(n.KeysInitQuery.initialBindings)){const l=s.getSafe(n.KeysInitQuery.dataFactory),f=new e.Factory(l),h=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,s,l);d=(0,t.materializeOperation)(d,s.get(n.KeysInitQuery.initialBindings),f,h,{strictTargetVariables:!0}),s=s.delete(n.KeysInitQuery.queryString)}return{operation:d,context:s}}async optimize(c,s){return s=s.set(n.KeysInitQuery.query,c),{operation:c,context:s}=await this.mediatorOptimizeQueryOperation.mediate({context:s,operation:c}),s=s.set(n.KeysInitQuery.query,c),{operation:c,context:s}}async evaluate(c,s){const d=await this.mediatorQueryOperation.mediate({context:s,operation:c});return d.context=s,d}};return t3.ActorQueryProcessSequential=r,t3}var kQ;function b0e(){return kQ||(kQ=1,(function(u){var n=al&&al.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=al&&al.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(p0e(),u)})(al)),al}var ol={},n3={},i3={},a3={},u3={},KQ;function y0e(){if(KQ)return u3;KQ=1,Object.defineProperty(u3,"__esModule",{value:!0}),u3.LinkedRdfSourcesAsyncRdfIterator=void 0;const u=Ce(),n=br(),o=pt();let i=class extends o.BufferedIterator{constructor(e,r,a,c,s,d,l,f){if(super({autoStart:!1,...f}),this.started=!1,this.currentIterators=[],this.iteratorsPendingCreation=0,this.iteratorsPendingTermination=0,this.accumulatedMetadata=Promise.resolve(void 0),this._reading=!1,this.cacheSize=e,this.operation=r,this.queryBindingsOptions=a,this.context=c,this.firstUrl=s,this.maxIterators=d,this.sourceStateGetter=l,this.maxIterators<=0)throw new Error(`LinkedRdfSourcesAsyncRdfIterator.maxIterators must be larger than zero, but got ${this.maxIterators}`)}kickstart(){this.started||this._fillBufferAsync()}getProperty(e,r){return e==="metadata"&&!this.started&&(this.preflightMetadata||(this.preflightMetadata=new Promise((a,c)=>{this.sourceStateGetter({url:this.firstUrl},{}).then(s=>{const d=s.source.queryBindings(this.operation,this.context);d.getProperty("metadata",l=>{l.state=new n.MetadataValidationState,d.destroy(),this.accumulateMetadata(s.metadata,l).then(f=>{const h={...s.metadata,...l,...f};a(h)}).catch(()=>{a({...s.metadata,state:new n.MetadataValidationState})})})}).catch(c)})),this.preflightMetadata.then(a=>this.setProperty("metadata",a)).catch(a=>this.emit("error",a))),super.getProperty(e,r)}_end(e){for(const r of this.currentIterators)r.destroy();super._end(e)}_read(e,r){if(this.started){for(const a of this.currentIterators){for(;e>0;){const c=a.read();if(c===null)break;e--,this._push(c)}if(e<=0)break}e>=0&&this.canStartNewIterator()?this.sourceStateGetter({url:this.firstUrl},{}).then(a=>{this.startIteratorsForNextUrls(a.handledDatasets,!1),r()}):r()}else this.started=!0,this.sourceStateGetter({url:this.firstUrl},{}).then(a=>{this.startIterator(a),r()}).catch(a=>setTimeout(()=>this.destroy(a)))}canStartNewIterator(){return this.currentIterators.length+this.iteratorsPendingCreation+this.iteratorsPendingTermination<this.maxIterators&&(!this.canStartNewIteratorConsiderReadable()||!this.readable)}canStartNewIteratorConsiderReadable(){return!0}areIteratorsRunning(){return this.currentIterators.length+this.iteratorsPendingCreation+this.iteratorsPendingTermination>0}startIterator(e){try{const r=e.source.queryBindings(this.operation,this.context,this.queryBindingsOptions);this.currentIterators.push(r);let a=!1,c=!1;r._destination=this,r.on("error",s=>this.destroy(s)),r.on("readable",()=>this._fillBuffer()),r.on("end",()=>{this.currentIterators.splice(this.currentIterators.indexOf(r),1),a=!0,c||this.iteratorsPendingTermination++,c&&this.startIteratorsForNextUrls(e.handledDatasets,!0)}),r.getProperty("metadata",s=>{this.accumulatedMetadata=this.accumulatedMetadata.then(d=>(async()=>(d||(d=e.metadata),this.accumulateMetadata(d,s)))().then(l=>{const f={...e.metadata,...s,...l};return f.state=new n.MetadataValidationState,this.updateMetadata(f),this.preflightMetadata&&this.preflightMetadata.then(h=>h.state.invalidate()).catch(()=>{}),this.getSourceLinks(f,e).then(h=>Promise.all(h)).then(async h=>{const p=await this.getLinkQueue();for(const y of h)p.push(y,e.link);c=!0,a&&this.iteratorsPendingTermination--,this.startIteratorsForNextUrls(e.handledDatasets,!0)}).catch(h=>this.destroy(h)),f})).catch(d=>(this.destroy(d),{}))})}catch(r){this.destroy(r)}}updateMetadata(e){const r=this.getProperty("metadata");this.setProperty("metadata",e),r==null||r.state.invalidate()}isRunning(){return!this.done}startIteratorsForNextUrls(e,r){this.getLinkQueue().then(a=>{for(;this.canStartNewIterator()&&this.isRunning();){const c=a.pop();if(c)this.iteratorsPendingCreation++,this.sourceStateGetter(c,e).then(s=>{const d=this.context.get(u.KeysStatistics.dereferencedLinks);d&&d.updateStatistic({url:s.link.url,metadata:{...s.metadata,...s.link.metadata}},s.source),this.iteratorsPendingCreation--,this.startIterator(s)}).catch(s=>this.emit("error",s));else break}r&&this.isCloseable(a,!0)&&this.close()}).catch(a=>this.destroy(a))}isCloseable(e,r){return e.isEmpty()&&!this.areIteratorsRunning()}};return u3.LinkedRdfSourcesAsyncRdfIterator=i,u3}var WQ;function _0e(){if(WQ)return a3;WQ=1,Object.defineProperty(a3,"__esModule",{value:!0}),a3.MediatedLinkedRdfSourcesAsyncRdfIterator=void 0;const u=Ce(),n=y0e();let o=class extends n.LinkedRdfSourcesAsyncRdfIterator{constructor(t,e,r,a,c,s,d,l,f,h,p,y,_,b){super(t,e,r,a,s,d,l,f?{maxBufferSize:Number.POSITIVE_INFINITY}:void 0),this.wasForcefullyClosed=!1,this.forceSourceType=c,this.mediatorMetadataAccumulate=h,this.mediatorRdfResolveHypermediaLinks=p,this.mediatorRdfResolveHypermediaLinksQueue=y,this.handledUrls={[s]:!0},this.aggregatedStore=f,this.dataFactory=_,this.algebraFactory=b}close(){if(!this.aggregatedStore){super.close();return}this.getLinkQueue().then(t=>{this.isCloseable(t,!1)?(this.aggregatedStore&&setTimeout(()=>this.aggregatedStore.end()),super.close()):this.wasForcefullyClosed=!0}).catch(t=>super.destroy(t))}destroy(t){if(!this.aggregatedStore){super.destroy(t);return}this.getLinkQueue().then(e=>{t??this.isCloseable(e,!1)?(this.aggregatedStore&&setTimeout(()=>this.aggregatedStore.end()),super.destroy(t)):this.wasForcefullyClosed=!0}).catch(e=>super.destroy(e))}isCloseable(t,e){return(e?t.isEmpty():this.wasForcefullyClosed||t.isEmpty())&&!this.areIteratorsRunning()}canStartNewIterator(){return!this.wasForcefullyClosed&&this.aggregatedStore&&this.aggregatedStore.hasRunningIterators()||super.canStartNewIterator()}canStartNewIteratorConsiderReadable(){return!this.aggregatedStore}isRunning(){return this.aggregatedStore&&this.aggregatedStore.hasRunningIterators()||!this.done}getLinkQueue(){return this.linkQueue||(this.linkQueue=this.mediatorRdfResolveHypermediaLinksQueue.mediate({firstUrl:this.firstUrl,context:this.context}).then(t=>t.linkQueue)),this.linkQueue}async getSourceLinks(t,e){try{const{links:r}=await this.mediatorRdfResolveHypermediaLinks.mediate({context:this.context,metadata:t}),a=this.context.get(u.KeysStatistics.discoveredLinks);if(a)for(const c of r)a.updateStatistic({url:c.url,metadata:{...c.metadata}},e.link);return r.filter(c=>this.handledUrls[c.url]?!1:(this.handledUrls[c.url]=!0,!0))}catch{return[]}}startIterator(t){var e;if(this.aggregatedStore&&!this.aggregatedStore.containedSources.has(t.link.url)){(e=this.aggregatedStore)==null||e.containedSources.add(t.link.url);const r=t.source.queryBindings(this.algebraFactory.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g")),this.context.set(u.KeysQueryOperation.unionDefaultGraph,!0)).map(a=>this.dataFactory.quad(a.get("s"),a.get("p"),a.get("o"),a.get("g")));this.aggregatedStore.import(r).on("end",()=>{super.startIterator(t)})}else super.startIterator(t)}async accumulateMetadata(t,e){return(await this.mediatorMetadataAccumulate.mediate({mode:"append",accumulatedMetadata:t,appendingMetadata:e,context:this.context})).metadata}updateMetadata(t){var e;super.updateMetadata(t),(e=this.aggregatedStore)==null||e.setBaseMetadata(t,!0)}};return a3.MediatedLinkedRdfSourcesAsyncRdfIterator=o,a3}var o3={},sl={},s3={},fA={},qn={},cl={},c3={},YQ;function gk(){if(YQ)return c3;YQ=1,Object.defineProperty(c3,"__esModule",{value:!0}),c3.BlankNode=void 0;let u=class{constructor(o){this.termType="BlankNode",this.value=o}equals(o){return!!o&&o.termType==="BlankNode"&&o.value===this.value}};return c3.BlankNode=u,c3}var d3={},l3={},ZQ;function mk(){if(ZQ)return l3;ZQ=1,Object.defineProperty(l3,"__esModule",{value:!0}),l3.DefaultGraph=void 0;let u=class{constructor(){this.termType="DefaultGraph",this.value=""}equals(o){return!!o&&o.termType==="DefaultGraph"}};return l3.DefaultGraph=u,u.INSTANCE=new u,l3}var f3={},h3={},eH;function uE(){if(eH)return h3;eH=1,Object.defineProperty(h3,"__esModule",{value:!0}),h3.NamedNode=void 0;let u=class{constructor(o){this.termType="NamedNode",this.value=o}equals(o){return!!o&&o.termType==="NamedNode"&&o.value===this.value}};return h3.NamedNode=u,h3}var tH;function vk(){if(tH)return f3;tH=1,Object.defineProperty(f3,"__esModule",{value:!0}),f3.Literal=void 0;const u=uE();let n=class K3{constructor(i,t){this.termType="Literal",this.value=i,typeof t=="string"?(this.language=t,this.datatype=K3.RDF_LANGUAGE_STRING,this.direction=""):t?"termType"in t?(this.language="",this.datatype=t,this.direction=""):(this.language=t.language,this.datatype=t.direction?K3.RDF_DIRECTIONAL_LANGUAGE_STRING:K3.RDF_LANGUAGE_STRING,this.direction=t.direction||""):(this.language="",this.datatype=K3.XSD_STRING,this.direction="")}equals(i){return!!i&&i.termType==="Literal"&&i.value===this.value&&i.language===this.language&&(i.direction===this.direction||!i.direction&&this.direction==="")&&this.datatype.equals(i.datatype)}};return f3.Literal=n,n.RDF_LANGUAGE_STRING=new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),n.RDF_DIRECTIONAL_LANGUAGE_STRING=new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),n.XSD_STRING=new u.NamedNode("http://www.w3.org/2001/XMLSchema#string"),f3}var p3={},rH;function Tk(){if(rH)return p3;rH=1,Object.defineProperty(p3,"__esModule",{value:!0}),p3.Quad=void 0;let u=class{constructor(o,i,t,e){this.termType="Quad",this.value="",this.subject=o,this.predicate=i,this.object=t,this.graph=e}equals(o){return!!o&&(o.termType==="Quad"||!o.termType)&&this.subject.equals(o.subject)&&this.predicate.equals(o.predicate)&&this.object.equals(o.object)&&this.graph.equals(o.graph)}};return p3.Quad=u,p3}var b3={},nH;function wk(){if(nH)return b3;nH=1,Object.defineProperty(b3,"__esModule",{value:!0}),b3.Variable=void 0;let u=class{constructor(o){this.termType="Variable",this.value=o}equals(o){return!!o&&o.termType==="Variable"&&o.value===this.value}};return b3.Variable=u,b3}var iH;function g0e(){if(iH)return d3;iH=1,Object.defineProperty(d3,"__esModule",{value:!0}),d3.DataFactory=void 0;const u=gk(),n=mk(),o=vk(),i=uE(),t=Tk(),e=wk();let r=0,a=class{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${r++}_`}namedNode(s){return new i.NamedNode(s)}blankNode(s){return new u.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,d){return new o.Literal(s,d)}variable(s){return new e.Variable(s)}defaultGraph(){return n.DefaultGraph.INSTANCE}quad(s,d,l,f){return new t.Quad(s,d,l,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(o.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}};return d3.DataFactory=a,d3}var aH;function Sk(){return aH||(aH=1,(function(u){var n=cl&&cl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=cl&&cl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(gk(),u),o(g0e(),u),o(mk(),u),o(vk(),u),o(uE(),u),o(Tk(),u),o(wk(),u)})(cl)),cl}var uH;function m0e(){if(uH)return qn;uH=1,Object.defineProperty(qn,"__esModule",{value:!0}),qn.termToString=o,qn.getLiteralValue=i,qn.getLiteralType=t,qn.getLiteralLanguage=e,qn.getLiteralDirection=r,qn.stringToTerm=a,qn.quadToStringQuad=c,qn.stringQuadToQuad=s;const u=Sk(),n=new u.DataFactory;function o(d){if(d)switch(d.termType){case"NamedNode":return d.value;case"BlankNode":return"_:"+d.value;case"Literal":const l=d;return'"'+l.value+'"'+(l.datatype&&l.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&l.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&l.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+l.datatype.value:"")+(l.language?"@"+l.language:"")+(l.direction?"--"+l.direction:"");case"Quad":return`<<${o(d.subject)} ${o(d.predicate)} ${o(d.object)}${d.graph.termType==="DefaultGraph"?"":" "+o(d.graph)}>>`;case"Variable":return"?"+d.value;case"DefaultGraph":return d.value}}function i(d){const l=/^"([^]*)"/.exec(d);if(!l)throw new Error(d+" is not a literal");return l[1]}function t(d){const l=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(d);if(!l)throw new Error(d+" is not a literal");return l[1]||(l[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function e(d){const l=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(d);if(!l)throw new Error(d+" is not a literal");if(l[1]){let f=l[1].toLowerCase();const h=f.indexOf("--");return h>=0&&(f=f.slice(0,h)),f}return""}function r(d){const l=d.indexOf("--",d.lastIndexOf('"'));if(l>=0){const f=d.slice(l+2,d.length);if(f==="ltr"||f==="rtl")return f;throw new Error(d+" is not a literal with a valid direction")}return""}function a(d,l){if(l=l||n,!d||!d.length)return l.defaultGraph();switch(d[0]){case"_":return l.blankNode(d.substr(2));case"?":if(!l.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return l.variable(d.substr(1));case'"':const f=e(d),h=r(d),p=l.namedNode(t(d));return l.literal(i(d),f?{language:f,direction:h}:p);case"<":default:if(d[0]==="<"&&d.length>4&&d[1]==="<"&&d[d.length-1]===">"&&d[d.length-2]===">"){const y=d.slice(2,-2).trim();let _=[],b=0,m=0,g=!1;for(let T=0;T<y.length;T++){const v=y[T];if(v==="<"&&b++,v===">"){if(b===0)throw new Error("Found closing tag without opening tag in "+d);b--}if(v==='"'){let A=!1,I=T;for(;I-- >0&&y[I]==="\\";)A=!A;A||(g=!g)}if(v===" "&&!g&&b===0){for(_.push(y.slice(m,T));y[T+1]===" ";)T+=1;m=T+1}}if(b!==0)throw new Error("Found opening tag without closing tag in "+d);if(_.push(y.slice(m,y.length)),_.length!==3&&_.length!==4)throw new Error("Nested quad syntax error "+d);return _=_.map(T=>T.startsWith("<")&&!T.includes(" ")?T.slice(1,-1):T),l.quad(a(_[0]),a(_[1]),a(_[2]),_[3]?a(_[3]):void 0)}return l.namedNode(d)}}function c(d){return{subject:o(d.subject),predicate:o(d.predicate),object:o(d.object),graph:o(d.graph)}}function s(d,l){return l=l||n,l.quad(a(d.subject,l),a(d.predicate,l),a(d.object,l),a(d.graph,l))}return qn}var oH;function Ak(){return oH||(oH=1,(function(u){Object.defineProperty(u,"__esModule",{value:!0}),u.termToString=u.stringToTerm=u.stringQuadToQuad=u.quadToStringQuad=u.getLiteralValue=u.getLiteralType=u.getLiteralDirection=u.getLiteralLanguage=void 0;const n=m0e();Object.defineProperty(u,"getLiteralLanguage",{enumerable:!0,get:function(){return n.getLiteralLanguage}}),Object.defineProperty(u,"getLiteralDirection",{enumerable:!0,get:function(){return n.getLiteralDirection}}),Object.defineProperty(u,"getLiteralType",{enumerable:!0,get:function(){return n.getLiteralType}}),Object.defineProperty(u,"getLiteralValue",{enumerable:!0,get:function(){return n.getLiteralValue}}),Object.defineProperty(u,"quadToStringQuad",{enumerable:!0,get:function(){return n.quadToStringQuad}}),Object.defineProperty(u,"stringQuadToQuad",{enumerable:!0,get:function(){return n.stringQuadToQuad}}),Object.defineProperty(u,"stringToTerm",{enumerable:!0,get:function(){return n.stringToTerm}}),Object.defineProperty(u,"termToString",{enumerable:!0,get:function(){return n.termToString}})})(fA)),fA}var dl={},Pt={},sH;function v0e(){if(sH)return Pt;sH=1,Object.defineProperty(Pt,"__esModule",{value:!0}),Pt.TRIPLE_TERM_NAMES=Pt.QUAD_TERM_NAMES=void 0,Pt.getTerms=o,Pt.getTermsNested=i,Pt.getNamedTerms=t,Pt.collectNamedTerms=e,Pt.forEachTerms=r,Pt.forEachTermsNested=a,Pt.filterTerms=c,Pt.filterTermsNested=s,Pt.filterQuadTermNames=d,Pt.filterQuadTermNamesNested=l,Pt.mapTerms=f,Pt.mapTermsNested=h,Pt.reduceTerms=p,Pt.reduceTermsNested=y,Pt.everyTerms=_,Pt.everyTermsNested=b,Pt.someTerms=m,Pt.someTermsNested=g,Pt.getValueNestedPath=T,Pt.matchTerm=v,Pt.matchPattern=A,Pt.matchPatternComplete=I,Pt.matchPatternMappings=q;const u=Sk(),n=new u.DataFactory;Pt.QUAD_TERM_NAMES=["subject","predicate","object","graph"],Pt.TRIPLE_TERM_NAMES=["subject","predicate","object"];function o(O,w){return w&&O.graph.termType==="DefaultGraph"?[O.subject,O.predicate,O.object]:[O.subject,O.predicate,O.object,O.graph]}function i(O,w){const S=[];for(const E of o(O,w))E.termType==="Quad"?i(E,w).forEach(R=>S.push(R)):S.push(E);return S}function t(O){return[{key:"subject",value:O.subject},{key:"predicate",value:O.predicate},{key:"object",value:O.object},{key:"graph",value:O.graph}]}function e(O,w,S){const E={};return O.forEach(R=>E[R.key]=R.value),w&&(E.subject=E.subject||w("subject"),E.predicate=E.predicate||w("predicate"),E.object=E.object||w("object"),E.graph=E.graph||w("graph")),(S||n).quad(E.subject,E.predicate,E.object,E.graph)}function r(O,w){w(O.subject,"subject"),w(O.predicate,"predicate"),w(O.object,"object"),w(O.graph,"graph")}function a(O,w,S=[]){O.subject.termType==="Quad"?a(O.subject,w,[...S,"subject"]):w(O.subject,[...S,"subject"]),O.predicate.termType==="Quad"?a(O.predicate,w,[...S,"predicate"]):w(O.predicate,[...S,"predicate"]),O.object.termType==="Quad"?a(O.object,w,[...S,"object"]):w(O.object,[...S,"object"]),O.graph.termType==="Quad"?a(O.graph,w,[...S,"graph"]):w(O.graph,[...S,"graph"])}function c(O,w){const S=[];return w(O.subject,"subject")&&S.push(O.subject),w(O.predicate,"predicate")&&S.push(O.predicate),w(O.object,"object")&&S.push(O.object),w(O.graph,"graph")&&S.push(O.graph),S}function s(O,w,S=[]){let E=[];return O.subject.termType==="Quad"?E=[...E,...s(O.subject,w,[...S,"subject"])]:w(O.subject,[...S,"subject"])&&E.push(O.subject),O.predicate.termType==="Quad"?E=[...E,...s(O.predicate,w,[...S,"predicate"])]:w(O.predicate,[...S,"predicate"])&&E.push(O.predicate),O.object.termType==="Quad"?E=[...E,...s(O.object,w,[...S,"object"])]:w(O.object,[...S,"object"])&&E.push(O.object),O.graph.termType==="Quad"?E=[...E,...s(O.graph,w,[...S,"graph"])]:w(O.graph,[...S,"graph"])&&E.push(O.graph),E}function d(O,w){const S=[];return w(O.subject,"subject")&&S.push("subject"),w(O.predicate,"predicate")&&S.push("predicate"),w(O.object,"object")&&S.push("object"),w(O.graph,"graph")&&S.push("graph"),S}function l(O,w,S=[]){let E=[];const R=[...S,"subject"];O.subject.termType==="Quad"?E=[...E,...l(O.subject,w,R)]:w(O.subject,R)&&E.push(R);const L=[...S,"predicate"];O.predicate.termType==="Quad"?E=[...E,...l(O.predicate,w,L)]:w(O.predicate,L)&&E.push(L);const M=[...S,"object"];O.object.termType==="Quad"?E=[...E,...l(O.object,w,M)]:w(O.object,M)&&E.push(M);const B=[...S,"graph"];return O.graph.termType==="Quad"?E=[...E,...l(O.graph,w,B)]:w(O.graph,B)&&E.push(B),E}function f(O,w,S){return(S||n).quad(w(O.subject,"subject"),w(O.predicate,"predicate"),w(O.object,"object"),w(O.graph,"graph"))}function h(O,w,S,E=[]){return(S||n).quad(O.subject.termType==="Quad"?h(O.subject,w,S,[...E,"subject"]):w(O.subject,[...E,"subject"]),O.predicate.termType==="Quad"?h(O.predicate,w,S,[...E,"predicate"]):w(O.predicate,[...E,"predicate"]),O.object.termType==="Quad"?h(O.object,w,S,[...E,"object"]):w(O.object,[...E,"object"]),O.graph.termType==="Quad"?h(O.graph,w,S,[...E,"graph"]):w(O.graph,[...E,"graph"]))}function p(O,w,S){let E=S;return E=w(E,O.subject,"subject"),E=w(E,O.predicate,"predicate"),E=w(E,O.object,"object"),w(E,O.graph,"graph")}function y(O,w,S,E=[]){let R=S;return O.subject.termType==="Quad"?R=y(O.subject,w,R,[...E,"subject"]):R=w(R,O.subject,[...E,"subject"]),O.predicate.termType==="Quad"?R=y(O.predicate,w,R,[...E,"predicate"]):R=w(R,O.predicate,[...E,"predicate"]),O.object.termType==="Quad"?R=y(O.object,w,R,[...E,"object"]):R=w(R,O.object,[...E,"object"]),O.graph.termType==="Quad"?R=y(O.graph,w,R,[...E,"graph"]):R=w(R,O.graph,[...E,"graph"]),R}function _(O,w){return w(O.subject,"subject")&&w(O.predicate,"predicate")&&w(O.object,"object")&&w(O.graph,"graph")}function b(O,w,S=[]){return(O.subject.termType==="Quad"?b(O.subject,w,[...S,"subject"]):w(O.subject,[...S,"subject"]))&&(O.predicate.termType==="Quad"?b(O.predicate,w,[...S,"predicate"]):w(O.predicate,[...S,"predicate"]))&&(O.object.termType==="Quad"?b(O.object,w,[...S,"object"]):w(O.object,[...S,"object"]))&&(O.graph.termType==="Quad"?b(O.graph,w,[...S,"graph"]):w(O.graph,[...S,"graph"]))}function m(O,w){return w(O.subject,"subject")||w(O.predicate,"predicate")||w(O.object,"object")||w(O.graph,"graph")}function g(O,w,S=[]){return(O.subject.termType==="Quad"?g(O.subject,w,[...S,"subject"]):w(O.subject,[...S,"subject"]))||(O.predicate.termType==="Quad"?g(O.predicate,w,[...S,"predicate"]):w(O.predicate,[...S,"predicate"]))||(O.object.termType==="Quad"?g(O.object,w,[...S,"object"]):w(O.object,[...S,"object"]))||(O.graph.termType==="Quad"?g(O.graph,w,[...S,"graph"]):w(O.graph,[...S,"graph"]))}function T(O,w){if(w.length===0)return O;if(O.termType==="Quad")return T(O[w[0]],w.slice(1));throw new Error(`Tried to get ${w[0]} from term of type ${O.termType}`)}function v(O,w){return!w||w.termType==="Variable"||w.termType==="Quad"&&O.termType==="Quad"&&I(O,w)||w.equals(O)}function A(O,w,S,E,R){return v(O.subject,w)&&v(O.predicate,S)&&v(O.object,E)&&v(O.graph,R)}function I(O,w){return A(O,w.subject,w.predicate,w.object,w.graph)}function q(O,w,S={}){const E={};function R(L,M){return _(L,(B,X)=>{var J,ie;const U=M[X];switch(B.termType){case"Variable":return S.skipVarMapping&&U.termType==="Variable"||((ie=(J=E[B.value])===null||J===void 0?void 0:J.equals(U))!==null&&ie!==void 0?ie:(E[B.value]=U,!0));case"Quad":return U.termType==="Quad"&&R(B,U);default:return B.equals(U)}})}return R(w,O)&&(S.returnMappings?E:!0)}return Pt}var tn={},cH;function T0e(){if(cH)return tn;cH=1,Object.defineProperty(tn,"__esModule",{value:!0}),tn.TERM_TYPES=void 0,tn.uniqTerms=n,tn.getTermsOfType=o,tn.getNamedNodes=i,tn.getBlankNodes=t,tn.getLiterals=e,tn.getVariables=r,tn.getDefaultGraphs=a,tn.getQuads=c;const u=Ak();tn.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function n(s){const d={};return s.filter(l=>{const f=(0,u.termToString)(l);return!(f in d)&&(d[f]=!0)})}function o(s,d){return s.filter(l=>l.termType===d)}function i(s){return o(s,"NamedNode")}function t(s){return o(s,"BlankNode")}function e(s){return o(s,"Literal")}function r(s){return o(s,"Variable")}function a(s){return o(s,"DefaultGraph")}function c(s){return o(s,"Quad")}return tn}var dH;function w0e(){return dH||(dH=1,(function(u){var n=dl&&dl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=dl&&dl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(v0e(),u),o(T0e(),u)})(dl)),dl}var lH;function Ok(){if(lH)return s3;lH=1,Object.defineProperty(s3,"__esModule",{value:!0}),s3.PendingStreamsIndex=void 0;const u=Ak(),n=w0e();let o=class Ll{constructor(){this.indexedStreams=new Map,this.allStreams=[]}termToString(t){return t&&t.termType!=="Variable"?(0,u.termToString)(t):Ll.ID_VARIABLE}addPatternListener(t,e,r,a,c){this.allStreams.push(t);const s=`${this.termToString(e)}${Ll.ID_SEPARATOR}${this.termToString(r)}${Ll.ID_SEPARATOR}${this.termToString(a)}${Ll.ID_SEPARATOR}${this.termToString(c)}`;let d=this.indexedStreams.get(s);d||(d=[],this.indexedStreams.set(s,d)),d.push(t)}getPendingStreamsForQuad(t){let e=[(0,n.getTerms)(t).map(a=>(0,u.termToString)(a))];for(let a=0;a<n.QUAD_TERM_NAMES.length;a++){const c=e;e=[];for(const s of c){e.push(s);const d=[...s];d[a]=Ll.ID_VARIABLE,e.push(d)}}const r=[];for(const a of e){const c=this.indexedStreams.get(a.join(Ll.ID_SEPARATOR));c&&r.push(...c)}return r}};return o.ID_VARIABLE="?",o.ID_SEPARATOR=":",s3.PendingStreamsIndex=o,s3}var Bn={},fH;function S0e(){if(fH)return Bn;fH=1;var u=Bn&&Bn.__asyncValues||function(a){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c=a[Symbol.asyncIterator],s;return c?c.call(a):(a=typeof __values=="function"?__values(a):a[Symbol.iterator](),s={},d("next"),d("throw"),d("return"),s[Symbol.asyncIterator]=function(){return this},s);function d(f){s[f]=a[f]&&function(h){return new Promise(function(p,y){h=a[f](h),l(p,y,h.done,h.value)})}}function l(f,h,p,y){Promise.resolve(y).then(function(_){f({value:_,done:p})},h)}},n=Bn&&Bn.__await||function(a){return this instanceof n?(this.v=a,this):new n(a)},o=Bn&&Bn.__asyncGenerator||function(a,c,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d=s.apply(a,c||[]),l,f=[];return l={},h("next"),h("throw"),h("return"),l[Symbol.asyncIterator]=function(){return this},l;function h(g){d[g]&&(l[g]=function(T){return new Promise(function(v,A){f.push([g,T,v,A])>1||p(g,T)})})}function p(g,T){try{y(d[g](T))}catch(v){m(f[0][3],v)}}function y(g){g.value instanceof n?Promise.resolve(g.value.v).then(_,b):m(f[0][2],g)}function _(g){p("next",g)}function b(g){p("throw",g)}function m(g,T){g(T),f.shift(),f.length&&p(f[0][0],f[0][1])}};Object.defineProperty(Bn,"__esModule",{value:!0}),Bn.StreamingStore=void 0;const i=ia,t=Dt(),e=Ok();let r=class Ek{constructor(c=new i.Store){this.pendingStreams=new e.PendingStreamsIndex,this.ended=!1,this.listeners=[],this.store=c}addEndListener(c){this.listeners.push(c)}emitEndEvent(){for(const c of this.listeners)c()}hasEnded(){return this.ended}end(){this.ended=!0;for(const c of this.pendingStreams.allStreams)c.push(null);this.emitEndEvent()}importToListeners(c){c.on("data",s=>{if(!this.ended&&!this.store.countQuads(s.subject,s.predicate,s.object,s.graph))for(const d of this.pendingStreams.getPendingStreamsForQuad(s))d.emit("quad",s),d.isInitialized&&d.push(s)})}static concatStreams(c){return o(this,arguments,function*(){var d,l,f,h;for(const b of c)try{for(var p=!0,y=(l=void 0,u(b)),_;_=yield n(y.next()),d=_.done,!d;){h=_.value,p=!1;try{yield yield n(h)}finally{p=!0}}}catch(m){l={error:m}}finally{try{!p&&!d&&(f=y.return)&&(yield n(f.call(y)))}finally{if(l)throw l.error}}})}import(c){if(this.ended)throw new Error("Attempted to import into an ended StreamingStore");return this.importToListeners(c),this.store.import(c)}match(c,s,d,l){const f=this.store.match(c,s,d,l);let h=f;if(!this.ended){const p=new t.PassThrough({objectMode:!0});this.pendingStreams.addPatternListener(p,c,s,d,l),h=t.Readable.from(Ek.concatStreams([f,p])),p.on("quad",_=>{h.emit("quad",_)}),h._pipeSource=f;const y=f._read;f._read=_=>{p.isInitialized=!0,y.call(f,_)}}return h}getStore(){return this.store}};return Bn.StreamingStore=r,Bn}var hH;function A0e(){return hH||(hH=1,(function(u){var n=sl&&sl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=sl&&sl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Ok(),u),o(S0e(),u)})(sl)),sl}var pH;function O0e(){if(pH)return o3;pH=1,Object.defineProperty(o3,"__esModule",{value:!0}),o3.StreamingStoreMetadata=void 0;const u=ua(),n=br(),o=A0e();let i=class extends o.StreamingStore{constructor(e,r){super(e),this.started=!1,this.containedSources=new Set,this.runningIterators=new Set,this.iteratorCreatedListeners=new Set,this.baseMetadata={state:new n.MetadataValidationState,cardinality:{type:"exact",value:0},variables:[]},this.metadataAccumulator=r}import(e){return this.ended||super.import(e),e}hasRunningIterators(){return this.runningIterators.size>0}match(e,r,a,c){const s=super.match(e,r,a,c),d=new u.ClosableTransformIterator(s,{autoStart:!1,onClose:()=>{this.runningIterators.delete(d)}});let l=this.getStore().countQuads(e,r,a,c);const f={state:new n.MetadataValidationState,cardinality:{type:"estimate",value:l}};d.setProperty("metadata",f),d.setProperty("lastCount",l),s.on("quad",()=>{d.setProperty("lastCount",++l),this.updateMetadataState(d,l)}),this.runningIterators.add(d);for(const h of this.iteratorCreatedListeners)h();return d}setBaseMetadata(e,r){if(this.baseMetadata={...e},this.baseMetadata.cardinality={type:"exact",value:0},r)for(const a of this.runningIterators){const c=a.getProperty("lastCount");this.updateMetadataState(a,c)}}updateMetadataState(e,r){const a={state:new n.MetadataValidationState,cardinality:{type:"estimate",value:r},variables:[]};this.metadataAccumulator(this.baseMetadata,a).then(c=>{c.state=new n.MetadataValidationState;const s=e.getProperty("metadata");e.setProperty("metadata",c),s==null||s.state.invalidate()}).catch(()=>{})}addIteratorCreatedListener(e){this.iteratorCreatedListeners.add(e)}removeIteratorCreatedListener(e){this.iteratorCreatedListeners.delete(e)}};return o3.StreamingStoreMetadata=i,o3}var bH;function xk(){if(bH)return i3;bH=1,Object.defineProperty(i3,"__esModule",{value:!0}),i3.QuerySourceHypermedia=void 0;const u=nE(),n=Ce(),o=pt(),i=Vf(),t=Dt(),e=dt(),r=_0e(),a=O0e();let c=class{constructor(d,l,f,h,p,y,_,b,m){this.referenceValue=l,this.cacheSize=d,this.firstUrl=l,this.forceSourceType=f,this.maxIterators=h,this.mediators=y,this.aggregateStore=p,this.logWarning=_,this.dataFactory=b,this.bindingsFactory=m,this.sourcesState=new i.LRUCache({max:this.cacheSize})}async getSelectorShape(d){return(await this.getSourceCached({url:this.firstUrl},{},d,this.getAggregateStore(d))).source.getSelectorShape(d)}queryBindings(d,l,f){const h=this.getAggregateStore(l);if(h&&d.type==="pattern"&&h.started)return new u.QuerySourceRdfJs(h,l.getSafe(n.KeysInitQuery.dataFactory),this.bindingsFactory).queryBindings(d,l);this.sourcesState.size===0&&this.getSourceCached({url:this.firstUrl},{},l,h).catch(b=>_.destroy(b));const p=l.getSafe(n.KeysInitQuery.dataFactory),y=new e.Factory(p),_=new r.MediatedLinkedRdfSourcesAsyncRdfIterator(this.cacheSize,d,f,l,this.forceSourceType,this.firstUrl,this.maxIterators,(b,m)=>this.getSourceCached(b,m,l,h),h,this.mediators.mediatorMetadataAccumulate,this.mediators.mediatorRdfResolveHypermediaLinks,this.mediators.mediatorRdfResolveHypermediaLinksQueue,p,y);if(h){h.started=!0;const b=()=>_.kickstart();h.addIteratorCreatedListener(b),_.on("end",()=>h.removeIteratorCreatedListener(b))}return _}queryQuads(d,l){return new o.TransformIterator(async()=>(await this.getSourceCached({url:this.firstUrl},{},l,this.getAggregateStore(l))).source.queryQuads(d,l))}async queryBoolean(d,l){return await(await this.getSourceCached({url:this.firstUrl},{},l,this.getAggregateStore(l))).source.queryBoolean(d,l)}async queryVoid(d,l){return await(await this.getSourceCached({url:this.firstUrl},{},l,this.getAggregateStore(l))).source.queryVoid(d,l)}async getSource(d,l,f,h){var g,T;d.context&&(f=f.merge(d.context));let p=d.url,y,_;if(this.forceSourceType==="sparql"&&((g=f.get(n.KeysQueryOperation.querySources))==null?void 0:g.length)===1)y=new t.Readable,y.read=()=>null,{metadata:_}=await this.mediators.mediatorMetadataAccumulate.mediate({context:f,mode:"initialize"});else try{const v=await this.mediators.mediatorDereferenceRdf.mediate({context:f,url:p});p=v.url;const A=await this.mediators.mediatorMetadata.mediate({context:f,url:p,quads:v.data,triples:(T=v.metadata)==null?void 0:T.triples});A.data.on("error",()=>{}),_=(await this.mediators.mediatorMetadataExtract.mediate({context:f,url:p,metadata:A.metadata,headers:v.headers,requestTime:v.requestTime})).metadata,y=A.data,d.transform&&(y=await d.transform(y))}catch(v){y=new t.Readable,y.read=()=>(setTimeout(()=>y.emit("error",v)),null),{metadata:_}=await this.mediators.mediatorMetadataAccumulate.mediate({context:f,mode:"initialize"}),this.logWarning(`Metadata extraction for ${p} failed: ${v.message}`)}h==null||h.setBaseMetadata(_,!1),h==null||h.containedSources.add(d.url),h==null||h.import(y);const{source:b,dataset:m}=await this.mediators.mediatorQuerySourceIdentifyHypermedia.mediate({context:f,forceSourceType:d.url===this.firstUrl?this.forceSourceType:void 0,handledDatasets:l,metadata:_,quads:y,url:p});return m&&(l[m]=!0),{link:d,source:b,metadata:_,handledDatasets:l}}getSourceCached(d,l,f,h){let p=this.sourcesState.get(d.url);return p||(p=this.getSource(d,l,f,h),(d.url===this.firstUrl||h===void 0)&&this.sourcesState.set(d.url,p),p)}getAggregateStore(d){let l;if(this.aggregateStore){const f=d.get(n.KeysQuerySourceIdentify.hypermediaSourcesAggregatedStores);if(f)return l=f.get(this.firstUrl),l||(l=new a.StreamingStoreMetadata(void 0,async(h,p)=>(await this.mediators.mediatorMetadataAccumulate.mediate({mode:"append",accumulatedMetadata:h,appendingMetadata:p,context:d})).metadata),f.set(this.firstUrl,l)),l}}toString(){return`QuerySourceHypermedia(${this.firstUrl})`}};return i3.QuerySourceHypermedia=c,i3}var yH;function E0e(){if(yH)return n3;yH=1,Object.defineProperty(n3,"__esModule",{value:!0}),n3.ActorQuerySourceIdentifyHypermedia=void 0;const u=Bv(),n=Ce(),o=be(),i=$t(),t=xk();let e=class extends u.ActorQuerySourceIdentify{constructor(a){super(a)}async test(a){return typeof a.querySourceUnidentified.value!="string"?(0,o.failTest)(`${this.name} requires a single query source with a URL value to be present in the context.`):(0,o.passTestVoid)()}async run(a){var s;const c=a.context.getSafe(n.KeysInitQuery.dataFactory);return{querySource:{source:new t.QuerySourceHypermedia(this.cacheSize,a.querySourceUnidentified.value,a.querySourceUnidentified.type,this.maxIterators,this.aggregateTraversalStore&&!!((s=a.querySourceUnidentified.context)!=null&&s.get(n.KeysQuerySourceIdentify.traverse)),{mediatorMetadata:this.mediatorMetadata,mediatorMetadataExtract:this.mediatorMetadataExtract,mediatorMetadataAccumulate:this.mediatorMetadataAccumulate,mediatorDereferenceRdf:this.mediatorDereferenceRdf,mediatorQuerySourceIdentifyHypermedia:this.mediatorQuerySourceIdentifyHypermedia,mediatorRdfResolveHypermediaLinks:this.mediatorRdfResolveHypermediaLinks,mediatorRdfResolveHypermediaLinksQueue:this.mediatorRdfResolveHypermediaLinksQueue},d=>this.logWarn(a.context,d),c,await i.BindingsFactory.create(this.mediatorMergeBindingsContext,a.context,c)),context:a.querySourceUnidentified.context??new o.ActionContext}}}};return n3.ActorQuerySourceIdentifyHypermedia=e,n3}var _H;function x0e(){return _H||(_H=1,(function(u){var n=ol&&ol.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ol&&ol.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(E0e(),u),o(xk(),u)})(ol)),ol}var ll={},y3={},gH;function I0e(){if(gH)return y3;gH=1,Object.defineProperty(y3,"__esModule",{value:!0}),y3.ActorRdfJoinNone=void 0;const u=Hr(),n=Ce(),o=be(),i=$t(),t=br(),e=pt();let r=class extends u.ActorRdfJoin{constructor(c){super(c,{logicalType:"inner",physicalName:"none",limitEntries:0})}async test(c){return c.entries.length>0?(0,o.failTest)(`Actor ${this.name} can only join zero entries`):await this.getJoinCoefficients(c,void 0)}async getOutput(c){const s=c.context.getSafe(n.KeysInitQuery.dataFactory),d=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,c.context,s);return{result:{bindingsStream:new e.ArrayIterator([d.bindings()],{autoStart:!1}),metadata:()=>Promise.resolve({state:new t.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]}),type:"bindings"}}}async getJoinCoefficients(c,s){return(0,o.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},s)}};return y3.ActorRdfJoinNone=r,y3}var mH;function R0e(){return mH||(mH=1,(function(u){var n=ll&&ll.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ll&&ll.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(I0e(),u)})(ll)),ll}var fl={},_3={},hl={},g3={},vH;function F0e(){if(vH)return g3;vH=1,Object.defineProperty(g3,"__esModule",{value:!0}),g3.ActorRdfJoinMultiBind=void 0;const u=Hr(),n=Ce(),o=be(),i=$t(),t=gt(),e=pt(),r=dt();let a=class Ik extends u.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:"bind",canHandleUndefs:!0,isLeaf:!1})}static createBindStream(s,d,l,f,h,p,y){const _=s==="depth-first",b=m=>{const g=l.map(v=>(0,t.materializeOperation)(v,m,p,y,{bindFilter:!0})),T=v=>v.merge(m);return new e.TransformIterator(async()=>(await f(g,m)).transform({map:T}),{maxBufferSize:128,autoStart:_})};switch(s){case"depth-first":return new e.MultiTransformIterator(d,{autoStart:!1,multiTransform:b,optional:h});case"breadth-first":return new e.UnionIterator(d.transform({map:b,optional:h}),{autoStart:!1});default:throw new Error(`Received request for unknown bind order: ${s}`)}}async getOutput(s,d){const l=s.context.getSafe(n.KeysInitQuery.dataFactory),f=new r.Factory(l),h=await i.BindingsFactory.create(this.mediatorMergeBindingsContext,s.context,l),p=d.entriesSorted;this.logDebug(s.context,"First entry for Bind Join: ",()=>({entry:p[0].operation,cardinality:p[0].metadata.cardinality,order:p[0].metadata.order,availableOrders:p[0].metadata.availableOrders}));for(const[g,T]of p.entries())g!==0&&T.output.bindingsStream.close();const y=p[0].output,_=[...p];_.splice(0,1);const b=s.context.set(n.KeysQueryOperation.joinLeftMetadata,p[0].metadata).set(n.KeysQueryOperation.joinRightMetadatas,_.map(g=>g.metadata));return{result:{type:"bindings",bindingsStream:Ik.createBindStream(this.bindOrder,y.bindingsStream,_.map(g=>g.operation),async(g,T)=>{const v=g.length===1?g[0]:f.createJoin(g,g.every(I=>!I.metadata));return(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:v,context:b==null?void 0:b.set(n.KeysQueryOperation.joinBindings,T)})).bindingsStream},!1,f,h),metadata:()=>this.constructResultMetadata(p,p.map(g=>g.metadata),s.context)},physicalPlanMetadata:{bindIndex:d.entriesUnsorted.indexOf(p[0]),bindOperation:p[0].operation,bindOperationCardinality:p[0].metadata.cardinality,bindOrder:this.bindOrder}}}canBindWithOperation(s){let d=!0;return r.Util.recurseOperation(s,{[r.Algebra.types.EXTEND](){return d=!1,!1},[r.Algebra.types.GROUP](){return d=!1,!1}}),d}async getJoinCoefficients(s,d){let{metadatas:l}=d;const f=s.entries.map((O,w)=>({...O,metadata:l[w]})),h=await u.ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort,f,s.context);if(h.isFailed())return h;const p=h.get();l=p.map(O=>O.metadata);const y=u.ActorRdfJoin.getRequestInitialTimes(l),_=u.ActorRdfJoin.getRequestItemTimes(l),b=[...p],m=[...y],g=[..._];if(b.splice(0,1),m.splice(0,1),g.splice(0,1),b.some(O=>!this.canBindWithOperation(O.operation)))return(0,o.failTest)(`Actor ${this.name} can not bind on Extend and Group operations`);if(b.some(O=>O.operationModified))return(0,o.failTest)(`Actor ${this.name} can not be used over remaining entries with modified operations`);const T=_.some(O=>O>0);if(l[0].cardinality.value*this.minMaxCardinalityRatio/(T?1:3)>Math.max(...l.map(O=>O.cardinality.value)))return(0,o.failTest)(`Actor ${this.name} can only run if the smallest stream is much smaller than largest stream`);const v=await Promise.all(b.map(async O=>(await this.mediatorJoinSelectivity.mediate({entries:[p[0],O],context:s.context})).selectivity*this.selectivityModifier)),A=b.map((O,w)=>O.metadata.cardinality.value*v[w]).reduce((O,w)=>O+w,0),I=m.reduce((O,w)=>O+w,0),q=g.reduce((O,w)=>O+w,0);return(0,o.passTestWithSideData)({iterations:l[0].cardinality.value*A,persistedItems:0,blockingItems:0,requestTime:y[0]+l[0].cardinality.value*(_[0]+I+A*q)},{...d,entriesUnsorted:f,entriesSorted:p})}};return g3.ActorRdfJoinMultiBind=a,g3}var TH;function Rk(){return TH||(TH=1,(function(u){var n=hl&&hl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=hl&&hl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(F0e(),u)})(hl)),hl}var wH;function N0e(){if(wH)return _3;wH=1,Object.defineProperty(_3,"__esModule",{value:!0}),_3.ActorRdfJoinOptionalBind=void 0;const u=Rk(),n=Hr(),o=Ce(),i=be(),t=$t(),e=gt(),r=dt();let a=class extends n.ActorRdfJoin{constructor(s){super(s,{logicalType:"optional",physicalName:"bind",limitEntries:2,canHandleUndefs:!0,isLeaf:!1,requiresVariableOverlap:!0})}async getOutput(s){const d=s.context.getSafe(o.KeysInitQuery.dataFactory),l=new r.Factory(d),f=await t.BindingsFactory.create(this.mediatorMergeBindingsContext,s.context,d);s.entries[1].output.bindingsStream.close();const h=s.context.set(o.KeysQueryOperation.joinLeftMetadata,await s.entries[0].output.metadata()).set(o.KeysQueryOperation.joinRightMetadatas,[await s.entries[1].output.metadata()]);return{result:{type:"bindings",bindingsStream:u.ActorRdfJoinMultiBind.createBindStream(this.bindOrder,s.entries[0].output.bindingsStream,[s.entries[1].operation],async(y,_)=>{const b=y[0];return(0,e.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:b,context:h==null?void 0:h.set(o.KeysQueryOperation.joinBindings,_)})).bindingsStream},!0,l,f),metadata:async()=>await this.constructResultMetadata(s.entries,await n.ActorRdfJoin.getMetadatas(s.entries),s.context,{},!0)}}}async getJoinCoefficients(s,d){const{metadatas:l}=d,f=n.ActorRdfJoin.getRequestInitialTimes(l),h=n.ActorRdfJoin.getRequestItemTimes(l);if(s.entries[1].operation.type===r.Algebra.types.EXTEND||s.entries[1].operation.type===r.Algebra.types.GROUP)return(0,i.failTest)(`Actor ${this.name} can not bind on Extend and Group operations`);const p=(await this.mediatorJoinSelectivity.mediate({entries:s.entries,context:s.context})).selectivity*this.selectivityModifier;return(0,i.passTestWithSideData)({iterations:l[0].cardinality.value*l[1].cardinality.value*p,persistedItems:0,blockingItems:0,requestTime:f[0]+l[0].cardinality.value*(h[0]+f[1]+p*l[1].cardinality.value*h[1])},d)}};return _3.ActorRdfJoinOptionalBind=a,_3}var SH;function P0e(){return SH||(SH=1,(function(u){var n=fl&&fl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=fl&&fl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(N0e(),u)})(fl)),fl}var pl={},m3={},bl={},v3={},AH;function D0e(){if(AH)return v3;AH=1,Object.defineProperty(v3,"__esModule",{value:!0}),v3.ActorTermComparatorFactory=void 0;const u=be();let n=class extends u.Actor{constructor(i){super(i),this.mediatorQueryOperation=i.mediatorQueryOperation,this.mediatorFunctionFactory=i.mediatorFunctionFactory,this.mediatorMergeBindingsContext=i.mediatorMergeBindingsContext}};return v3.ActorTermComparatorFactory=n,v3}var OH;function j0e(){return OH||(OH=1,(function(u){var n=bl&&bl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=bl&&bl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(D0e(),u)})(bl)),bl}var T3={},EH;function L0e(){if(EH)return T3;EH=1,Object.defineProperty(T3,"__esModule",{value:!0}),T3.TermComparatorExpressionEvaluator=void 0;let u=class{constructor(o,i,t){this.internalEvaluator=o,this.equalityFunction=i,this.lessThanFunction=t,this._TERM_ORDERING_PRIORITY={Variable:0,BlankNode:1,NamedNode:2,Literal:3,Quad:4,DefaultGraph:5}}orderTypes(o,i){if(o===i)return 0;if(o===void 0)return-1;if(i===void 0)return 1;if(o.termType!==i.termType)return this._TERM_ORDERING_PRIORITY[o.termType]<this._TERM_ORDERING_PRIORITY[i.termType]?-1:1;if(o.equals(i))return 0;if(o.termType==="Quad"&&i.termType==="Quad"){const t=this.orderTypes(o.subject,i.subject);if(t!==0)return t;const e=this.orderTypes(o.predicate,i.predicate);if(e!==0)return e;const r=this.orderTypes(o.object,i.object);return r!==0?r:this.orderTypes(o.graph,i.graph)}return o.termType==="Literal"?this.orderLiteralTypes(o,i):this.comparePrimitives(o.value,i.value)}orderLiteralTypes(o,i){const t=this.internalEvaluator.transformer.transformLiteral(o),e=this.internalEvaluator.transformer.transformLiteral(i);try{return this.equalityFunction.applyOnTerms([t,e],this.internalEvaluator).typedValue?0:this.lessThanFunction.applyOnTerms([t,e],this.internalEvaluator).typedValue?-1:1}catch{const r=this.comparePrimitives(t.dataType,e.dataType);return r!==0?r:this.comparePrimitives(t.str(),e.str())}}comparePrimitives(o,i){return o===i?0:o<i?-1:1}};return T3.TermComparatorExpressionEvaluator=u,T3}var xH;function M0e(){if(xH)return m3;xH=1,Object.defineProperty(m3,"__esModule",{value:!0}),m3.ActorTermComparatorFactoryExpressionEvaluator=void 0;const u=_k(),n=j0e(),o=Ce(),i=be(),t=$t(),e=ge(),r=L0e();let a=class extends n.ActorTermComparatorFactory{async test(s){return(0,i.passTestVoid)()}async run({context:s}){return s=e.prepareEvaluatorActionContext(s),new r.TermComparatorExpressionEvaluator(new u.InternalEvaluator(s,this.mediatorFunctionFactory,this.mediatorQueryOperation,await t.BindingsFactory.create(this.mediatorMergeBindingsContext,s,s.getSafe(o.KeysInitQuery.dataFactory))),await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.EQUAL,context:s,requireTermExpression:!0}),await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.LT,context:s,requireTermExpression:!0}))}};return m3.ActorTermComparatorFactoryExpressionEvaluator=a,m3}var IH;function C0e(){return IH||(IH=1,(function(u){var n=pl&&pl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=pl&&pl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(M0e(),u)})(pl)),pl}var yl={},w3={},RH;function q0e(){if(RH)return w3;RH=1,Object.defineProperty(w3,"__esModule",{value:!0}),w3.ActorRdfJoinMultiSmallestFilterBindings=void 0;const u=Hr(),n=Ce(),o=be(),i=$t(),t=ua(),e=gt(),r=pt(),a=dt();let c=class extends u.ActorRdfJoin{constructor(d){super(d,{logicalType:"inner",physicalName:"multi-smallest-filter-bindings",limitEntries:2,limitEntriesMin:!0,isLeaf:!1})}async sortJoinEntries(d,l){let{entries:f}=await this.mediatorJoinEntriesSort.mediate({entries:d,context:l});f=f.sort((m,g)=>m.operationModified&&!g.operationModified?-1:0);const h=f.splice(0,1)[0];let p,y=-1,_=0;for(const[m,g]of f.entries()){const T=h.metadata.variables.filter(v=>g.metadata.variables.some(A=>v.variable.equals(A.variable))).length;(!p||T>_||T===_&&(g.metadata.variables.length<p.metadata.variables.length||g.metadata.variables.length===p.metadata.variables.length&&g.metadata.cardinality.value<p.metadata.cardinality.value))&&(p=g,y=m,_=T)}if(_===0)return(0,o.failTest)(`Actor ${this.name} can only join with common variables`);const b=f;return b.splice(y,1),(0,o.passTest)({first:h,second:p,remaining:b})}async getOutput(d){const l=d.context.getSafe(n.KeysInitQuery.dataFactory),f=new a.Factory(l),h=await u.ActorRdfJoin.getEntriesWithMetadatas([...d.entries]),{first:p,second:y,remaining:_}=(await this.sortJoinEntries(h,d.context)).getOrThrow(),b=p.output.bindingsStream;p.output.bindingsStream=b.clone();const m=p.metadata.variables.filter(S=>y.metadata.variables.some(E=>S.variable.equals(E.variable))),g={},T=b.clone().map(S=>S.filter((E,R)=>m.some(L=>L.variable.equals(R)))).filter(S=>{const E=(0,i.bindingsToString)(S);return!(E in g)&&(g[E]=!0)}),v=new t.ChunkedIterator(T,this.blockSize,{autoStart:!1}),A=(0,e.getOperationSource)(y.operation),q={output:{type:"bindings",bindingsStream:new r.UnionIterator(v.map(S=>A.source.queryBindings(y.operation,A.context?d.context.merge(A.context):d.context,{filterBindings:{bindings:S,metadata:p.metadata}}))),metadata:y.output.metadata},operation:y.operation,operationModified:!0};y.output.bindingsStream.destroy();const O={output:(0,e.getSafeBindings)(await this.mediatorJoin.mediate({type:d.type,entries:[p,q],context:d.context.set(n.KeysRdfJoin.lastPhysicalJoin,this.physicalName)})),operation:f.createJoin([p.operation,q.operation],!1),operationModified:!0},w=_;return w.unshift(O),{result:await this.mediatorJoin.mediate({type:d.type,entries:w,context:d.context}),physicalPlanMetadata:{firstIndex:h.indexOf(p),secondIndex:h.indexOf(y)}}}async getJoinCoefficients(d,l){let{metadatas:f}=l;if(d.context.get(n.KeysRdfJoin.lastPhysicalJoin)===this.physicalName)return(0,o.failTest)(`Actor ${this.name} can not be called recursively`);f=[...f];const h=await this.sortJoinEntries(d.entries.map((q,O)=>({...q,metadata:f[O]})),d.context);if(h.isFailed())return h;const{first:p,second:y,remaining:_}=h.get(),b=(0,e.getOperationSource)(y.operation);if(!b)return(0,o.failTest)(`Actor ${this.name} can only process if entries[1] has a source`);const m=y.operation,g=await b.source.getSelectorShape(d.context);if(!(0,e.doesShapeAcceptOperation)(g,m,{filterBindings:!0}))return(0,o.failTest)(`Actor ${this.name} can only process if entries[1] accept filterBindings`);f=[p.metadata,y.metadata,..._.map(q=>q.metadata)];const T=u.ActorRdfJoin.getRequestInitialTimes(f),v=u.ActorRdfJoin.getRequestItemTimes(f),{selectivity:A}=await this.mediatorJoinSelectivity.mediate({entries:[p,y],context:d.context}),I=_.reduce((q,O)=>q*O.metadata.cardinality.value*this.selectivityModifier,1);return(0,o.passTestWithSideData)({iterations:A*this.selectivityModifier*y.metadata.cardinality.value*I,persistedItems:p.metadata.cardinality.value,blockingItems:p.metadata.cardinality.value,requestTime:T[0]+f[0].cardinality.value*v[0]+T[1]+I*v[1]},l)}};return w3.ActorRdfJoinMultiSmallestFilterBindings=c,w3}var FH;function B0e(){return FH||(FH=1,(function(u){var n=yl&&yl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=yl&&yl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(q0e(),u)})(yl)),yl}var _l={},S3={},NH;function $0e(){if(NH)return S3;NH=1,Object.defineProperty(S3,"__esModule",{value:!0}),S3.ActorQueryProcessExplainLogical=void 0;const u=Ww(),n=Ce(),o=be();let i=class extends u.ActorQueryProcess{constructor(e){super(e)}async test(e){return(e.context.get(n.KeysInitQuery.explain)??e.context.get(new o.ActionContextKey("explain")))!=="logical"?(0,o.failTest)(`${this.name} can only explain in 'logical' mode.`):(0,o.passTestVoid)()}async run(e){let{operation:r,context:a}=await this.queryProcessor.parse(e.query,e.context);return{operation:r,context:a}=await this.queryProcessor.optimize(r,a),{result:{explain:!0,type:"logical",data:r}}}};return S3.ActorQueryProcessExplainLogical=i,S3}var PH;function U0e(){return PH||(PH=1,(function(u){var n=_l&&_l.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=_l&&_l.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o($0e(),u)})(_l)),_l}var gl={},A3={},DH;function V0e(){if(DH)return A3;DH=1,Object.defineProperty(A3,"__esModule",{value:!0}),A3.ActorQueryProcessExplainParsed=void 0;const u=Ww(),n=Ce(),o=be();let i=class extends u.ActorQueryProcess{constructor(e){super(e)}async test(e){return(e.context.get(n.KeysInitQuery.explain)??e.context.get(new o.ActionContextKey("explain")))!=="parsed"?(0,o.failTest)(`${this.name} can only explain in 'parsed' mode.`):(0,o.passTestVoid)()}async run(e){const{operation:r}=await this.queryProcessor.parse(e.query,e.context);return{result:{explain:!0,type:"parsed",data:r}}}};return A3.ActorQueryProcessExplainParsed=i,A3}var jH;function Q0e(){return jH||(jH=1,(function(u){var n=gl&&gl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=gl&&gl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(V0e(),u)})(gl)),gl}var ml={},O3={},vl={},LH;function Fk(){if(LH)return vl;LH=1,Object.defineProperty(vl,"__esModule",{value:!0}),vl.numberToString=vl.MemoryPhysicalQueryPlanLogger=void 0;const u=tr();let n=class{constructor(){this.planNodes=new Map}logOperation(t,e,r,a,c,s){const d={actor:c,logicalOperator:t,physicalOperator:e,rawNode:r,children:[],metadata:s};if(this.planNodes.set(r,d),this.rootNode){if(!a)throw new Error("Detected more than one parent-less node");const l=this.planNodes.get(a);if(!l)throw new Error("Could not find parent node");l.children.push(d)}else{if(a)throw new Error("No root node has been set yet, while a parent is being referenced");this.rootNode=d}}stashChildren(t,e){const r=this.planNodes.get(t);if(!r)throw new Error("Could not find plan node");r.children=e?r.children.filter(e):[]}unstashChild(t,e){const r=this.planNodes.get(t);if(r){const a=this.planNodes.get(e);if(!a)throw new Error("Could not find plan parent node");a.children.push(r)}}appendMetadata(t,e){const r=this.planNodes.get(t);r&&(r.metadata={...r.metadata,...e})}toJson(){return this.rootNode?this.planNodeToJson(this.rootNode):{}}planNodeToJson(t){var r;const e={logical:t.logicalOperator,physical:t.physicalOperator,...this.getLogicalMetadata(t.rawNode),...this.compactMetadata(t.metadata)};if(t.children.length>0&&(e.children=t.children.map(a=>this.planNodeToJson(a))),e.physical==="bind"&&e.children){const a={};for(const s of e.children){const d=((r=s.children)==null?void 0:r.at(-1))??s,l=this.getPlanHash(d).join(",");a[l]||(a[l]=[]),a[l].push(s)}const c=[];for(const s of Object.values(a))c.push({occurrences:s.length,firstOccurrence:s[0]});e.childrenCompact=c,delete e.children}return e}getPlanHash(t){let e=[`${t.logical}-${t.physical}`];return t.children?e=[...e,...t.children.flatMap(r=>this.getPlanHash(r))]:t.childrenCompact&&(e=[...e,...t.childrenCompact.flatMap(r=>this.getPlanHash(r.firstOccurrence))]),e}compactMetadata(t){return Object.fromEntries(Object.entries(t).map(([e,r])=>[e,this.compactMetadataValue(r)]))}compactMetadataValue(t){return t&&typeof t=="object"&&"termType"in t?this.getLogicalMetadata(t):t}getLogicalMetadata(t){var r;const e={};if("type"in t){const a=t;switch((r=a.metadata)!=null&&r.scopedSource&&(e.source=a.metadata.scopedSource.source.toString()),a.type){case"pattern":e.pattern=this.quadToString(a);break;case"project":e.variables=a.variables.map(c=>c.value);break}}return e}quadToString(t){return`${(0,u.termToString)(t.subject)} ${(0,u.termToString)(t.predicate)} ${(0,u.termToString)(t.object)}${t.graph.termType==="DefaultGraph"?"":` ${(0,u.termToString)(t.graph)}`}`}toCompactString(){const t=this.toJson(),e=[],r=new Map;if("logical"in t?this.nodeToCompactString(e,r,"",t):e.push("Empty"),r.size>0){e.push(""),e.push("sources:");for(const[a,c]of r.entries())e.push(`  ${c}: ${a}`)}return e.join(`
`)}nodeToCompactString(t,e,r,a,c){let s;a.source&&(s=e.get(a.source),s===void 0&&(s=e.size,e.set(a.source,s))),t.push(`${r}${a.logical}${a.physical?`(${a.physical})`:""}${a.pattern?` (${a.pattern})`:""}${a.variables?` (${a.variables.join(",")})`:""}${a.bindOperation?` bindOperation:(${a.bindOperation.pattern}) bindCardEst:${a.bindOperationCardinality.type==="estimate"?"~":""}${o(a.bindOperationCardinality.value)}`:""}${a.cardinality?` cardEst:${a.cardinality.type==="estimate"?"~":""}${o(a.cardinality.value)}`:""}${a.source?` src:${s}`:""}${a.cardinalityReal?` cardReal:${a.cardinalityReal}`:""}${a.timeSelf?` timeSelf:${o(a.timeSelf)}ms`:""}${a.timeLife?` timeLife:${o(a.timeLife)}ms`:""}${c?` ${c}`:""}`);for(const d of a.children??[])this.nodeToCompactString(t,e,`${r}  `,d);for(const d of a.childrenCompact??[])this.nodeToCompactString(t,e,`${r}  `,d.firstOccurrence,`compacted-occurrences:${d.occurrences}`)}};vl.MemoryPhysicalQueryPlanLogger=n;function o(i){return i.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:3})}return vl.numberToString=o,vl}var MH;function H0e(){if(MH)return O3;MH=1,Object.defineProperty(O3,"__esModule",{value:!0}),O3.ActorQueryProcessExplainPhysical=void 0;const u=Ww(),n=Ce(),o=be(),i=Fk();let t=class extends u.ActorQueryProcess{constructor(r){super(r)}async test(r){const a=r.context.get(n.KeysInitQuery.explain)??r.context.get(new o.ActionContextKey("explain"));return a!=="physical"&&a!=="physical-json"?(0,o.failTest)(`${this.name} can only explain in 'physical' or 'physical-json' mode.`):(0,o.passTestVoid)()}async run(r){let{operation:a,context:c}=await this.queryProcessor.parse(r.query,r.context);({operation:a,context:c}=await this.queryProcessor.optimize(a,c));const s=new i.MemoryPhysicalQueryPlanLogger;c=c.set(n.KeysInitQuery.physicalQueryPlanLogger,s);const d=await this.queryProcessor.evaluate(a,c);switch(d.type){case"bindings":await d.bindingsStream.toArray();break;case"quads":await d.quadStream.toArray();break;case"boolean":await d.execute();break;case"void":await d.execute();break}const l=r.context.get(n.KeysInitQuery.explain)??r.context.getSafe(new o.ActionContextKey("explain"));return{result:{explain:!0,type:l,data:l==="physical"?s.toCompactString():s.toJson()}}}};return O3.ActorQueryProcessExplainPhysical=t,O3}var CH;function G0e(){return CH||(CH=1,(function(u){var n=ml&&ml.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ml&&ml.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(H0e(),u),o(Fk(),u)})(ml)),ml}var Tl={},E3={},qH;function z0e(){if(qH)return E3;qH=1,Object.defineProperty(E3,"__esModule",{value:!0}),E3.ActorOptimizeQueryOperationPruneEmptySourceOperations=void 0;const u=mn(),n=Ce(),o=be(),i=gt(),t=dt();let e=class W3 extends u.ActorOptimizeQueryOperation{constructor(a){super(a)}async test(a){return(0,i.getOperationSource)(a.operation)?(0,o.failTest)(`Actor ${this.name} does not work with top-level operation sources.`):(0,o.passTestVoid)()}async run(a){const c=a.context.getSafe(n.KeysInitQuery.dataFactory),s=new t.Factory(c);let d=a.operation;const l=[],f=this;t.Util.recurseOperation(d,{[t.Algebra.types.UNION](p){return f.collectMultiOperationInputs(p.input,l,t.Algebra.types.PATTERN),!0},[t.Algebra.types.ALT](p){return f.collectMultiOperationInputs(p.input,l,t.Algebra.types.LINK),!1},[t.Algebra.types.SERVICE](){return!1}});const h=new Set;return await Promise.all(l.map(async p=>{const y=p.type==="link"?s.createPattern(c.variable("s"),p.iri,c.variable("o")):p;await this.hasSourceResults(s,(0,i.getOperationSource)(p),y,a.context)||h.add(p)})),h.size>0&&(this.logDebug(a.context,`Pruning ${h.size} source-specific operations`),d=t.Util.mapOperation(d,{[t.Algebra.types.UNION](p,y){return f.mapMultiOperation(p,h,_=>y.createUnion(_))},[t.Algebra.types.ALT](p,y){return f.mapMultiOperation(p,h,_=>y.createAlt(_))}},s),d=t.Util.mapOperation(d,{[t.Algebra.types.PROJECT](p,y){return W3.hasEmptyOperation(p)?{recurse:!1,result:y.createUnion([])}:{recurse:!0,result:p}},[t.Algebra.types.LEFT_JOIN](p){return W3.hasEmptyOperation(p.input[1])?{recurse:!0,result:p.input[0]}:{recurse:!0,result:p}}},s)),{operation:d,context:a.context}}static hasEmptyOperation(a){let c=!1;return t.Util.recurseOperation(a,{[t.Algebra.types.UNION](s){return s.input.every(d=>W3.hasEmptyOperation(d))&&(c=!0),!1},[t.Algebra.types.ALT](s){return s.input.length===0&&(c=!0),!1},[t.Algebra.types.LEFT_JOIN](s){return W3.hasEmptyOperation(s.input[0])&&(c=!0),!1}}),c}collectMultiOperationInputs(a,c,s){for(const d of a)(0,i.getOperationSource)(d)&&d.type===s&&c.push(d)}mapMultiOperation(a,c,s){const d=a.input.filter(l=>!c.has(l));return d.length===a.input.length?{result:a,recurse:!0}:d.length===0?{result:s([]),recurse:!1}:d.length===1?{result:d[0],recurse:!0}:{result:s(d),recurse:!0}}async hasSourceResults(a,c,s,d){var f;if(((f=c.context)==null?void 0:f.get(n.KeysQuerySourceIdentify.traverse))??d.get(n.KeysQuerySourceIdentify.traverse))return!0;if(this.useAskIfSupported){const h=a.createAsk(s);if((0,i.doesShapeAcceptOperation)(await c.source.getSelectorShape(d),h))return c.source.queryBoolean(h,d)}const l=c.source.queryBindings(s,d);return new Promise((h,p)=>{l.on("error",p),l.getProperty("metadata",y=>{l.destroy(),h(y.cardinality.value>0)})})}};return E3.ActorOptimizeQueryOperationPruneEmptySourceOperations=e,E3}var BH;function X0e(){return BH||(BH=1,(function(u){var n=Tl&&Tl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Tl&&Tl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(z0e(),u)})(Tl)),Tl}var wl={},x3={},$H;function J0e(){if($H)return x3;$H=1,Object.defineProperty(x3,"__esModule",{value:!0}),x3.ActorHttpRetry=void 0;const u=Pi(),n=Ce(),o=be();let i=class Ml extends u.ActorHttp{constructor(e){super(e),this.activeDelays={},this.httpInvalidator=e.httpInvalidator,this.httpInvalidator.addInvalidateListener(r=>this.handleHttpInvalidateEvent(r)),this.mediatorHttp=e.mediatorHttp}async test(e){if(e.context.has(Ml.keyWrapped))return(0,o.failTest)(`${this.name} can only wrap a request once`);const r=e.context.get(n.KeysHttp.httpRetryCount);return!r||r<1?(0,o.failTest)(`${this.name} requires a retry count greater than zero to function`):(0,o.passTest)({time:0})}async run(e){const r=u.ActorHttp.getInputUrl(e.input),a=e.context.getSafe(n.KeysHttp.httpRetryCount)+1,c=e.context.get(n.KeysHttp.httpRetryDelayFallback)??0,s=e.context.get(n.KeysHttp.httpRetryDelayLimit),d=e.context.get(n.KeysHttp.httpRetryStatusCodes);for(let l=1;l<=a;l++){const f=r.host in this.activeDelays?this.activeDelays[r.host].date.getTime()-Date.now():c;if(s&&f>s){this.logWarn(e.context,"Requested delay exceeds the limit",()=>({url:r.href,delay:f,delayDate:this.activeDelays[r.host].date.toISOString(),delayLimit:s,currentAttempt:`${l} / ${a}`}));break}else f>0&&l>1&&(this.logDebug(e.context,"Delaying request",()=>({url:r.href,delay:f,currentAttempt:`${l} / ${a}`})),await Ml.sleep(f));const h=await this.mediatorHttp.mediate({...e,context:e.context.set(Ml.keyWrapped,!0)});if(h.ok)return h;if(d&&d.includes(h.status)){this.logDebug(e.context,"Status code in force retry list, forcing retry",()=>({url:r.href,status:h.status,statusText:h.statusText,currentAttempt:`${l} / ${a}`}));continue}if(h.status===504){this.logDebug(e.context,"Received proxy timeout",()=>({url:r.href,status:h.status,statusText:h.statusText,currentAttempt:`${l} / ${a}`}));continue}if(h.status===429||h.status===503||h.status===405&&h.headers.has("retry-after")){const p=h.headers.get("retry-after");if(p){const y=Ml.parseRetryAfterHeader(p);y?(r.host in this.activeDelays&&clearTimeout(this.activeDelays[r.host].timeout),this.activeDelays[r.host]={date:y,timeout:setTimeout(()=>delete this.activeDelays[r.host],y.getTime()-Date.now())}):this.logDebug(e.context,"Invalid Retry-After header value from server",()=>({url:r.href,status:h.status,statusText:h.statusText,retryAfterHeader:p,currentAttempt:`${l} / ${a}`}))}this.logDebug(e.context,"Server temporarily unavailable",()=>({url:r.href,status:h.status,statusText:h.statusText,currentAttempt:`${l} / ${a}`}));continue}if(h.status>=400&&h.status<500){this.logDebug(e.context,"Server reported client-side error",()=>({url:r.href,status:h.status,statusText:h.statusText,currentAttempt:`${l} / ${a}`}));break}if(h.status>=500&&h.status<600){this.logDebug(e.context,"Server-side error encountered, terminating",()=>({url:r.href,status:h.status,statusText:h.statusText,currentAttempt:`${l} / ${a}`}));break}this.logDebug(e.context,"Request failed",()=>({url:r.href,status:h.status,statusText:h.statusText,currentAttempt:`${l} / ${a}`}))}throw new Error(`Request failed: ${r.href}`)}static async sleep(e){e>0&&await new Promise(r=>setTimeout(r,e))}static parseRetryAfterHeader(e){if(Ml.numberRegex.test(e))return new Date(Date.now()+Number.parseInt(e,10)*1e3);if(Ml.dateRegex.test(e))return new Date(e)}handleHttpInvalidateEvent(e){const r=e.url?new URL(e.url).host:void 0;for(const a of Object.keys(this.activeDelays))(!r||a===r)&&(clearTimeout(this.activeDelays[a].timeout),delete this.activeDelays[a])}};return x3.ActorHttpRetry=i,i.dateRegex=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), [0-9]{2} (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) [0-9]{4} [0-9]{2}:[0-9]{2}:[0-9]{2} GMT$/u,i.numberRegex=/^[0-9]+$/u,i.keyWrapped=new o.ActionContextKey("urn:comunica:actor-http-retry#wrapped"),x3}var UH;function k0e(){return UH||(UH=1,(function(u){var n=wl&&wl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=wl&&wl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(J0e(),u)})(wl)),wl}var Sl={},I3={},VH;function K0e(){if(VH)return I3;VH=1,Object.defineProperty(I3,"__esModule",{value:!0}),I3.ActorHttpLimitRate=void 0;const u=Pi(),n=be();let o=class UA extends u.ActorHttp{constructor(t){super(t),this.mediatorHttp=t.mediatorHttp,this.httpInvalidator=t.httpInvalidator,this.httpInvalidator.addInvalidateListener(e=>this.handleHttpInvalidateEvent(e)),this.correctionMultiplier=t.correctionMultiplier,this.failureMultiplier=t.failureMultiplier,this.limitByDefault=t.limitByDefault,this.allowOverlap=t.allowOverlap,this.hostData=new Map}async test(t){return t.context.has(UA.keyWrapped)?(0,n.failTest)(`${this.name} can only wrap a request once`):(0,n.passTest)({time:0})}async run(t){const e=u.ActorHttp.getInputUrl(t.input);let r=this.hostData.get(e.host);r||(r={latestRequestTimestamp:0,rateLimited:this.limitByDefault,requestInterval:Number.NEGATIVE_INFINITY},this.hostData.set(e.host,r));const a=Date.now();let c=0;r.rateLimited&&(c=Math.max(0,r.latestRequestTimestamp+r.requestInterval-a)),r.latestRequestTimestamp=a+(this.allowOverlap?0:1)*c,c>0&&(this.logDebug(t.context,"Delaying request",()=>({url:e.href,requestInterval:r.requestInterval,currentDelay:c})),await new Promise(d=>setTimeout(d,c)));const s=d=>{const l=(d?1:this.failureMultiplier)*(Date.now()-a-c);r.requestInterval<0?r.requestInterval=Math.round(l*this.correctionMultiplier):r.requestInterval+=Math.round(this.correctionMultiplier*(l-r.requestInterval)),!d&&!r.rateLimited&&(this.logDebug(t.context,"Marking host as rate-limited",()=>({host:e.host})),r.rateLimited=!0)};try{const d=await this.mediatorHttp.mediate({...t,context:t.context.set(UA.keyWrapped,!0)});return s(d.ok),d}catch(d){throw s(!1),d}}handleHttpInvalidateEvent(t){if(t.url){const e=new URL(t.url).host;this.hostData.delete(e)}else this.hostData.clear()}};return I3.ActorHttpLimitRate=o,o.keyWrapped=new n.ActionContextKey("urn:comunica:actor-http-limit-rate#wrapped"),I3}var QH;function W0e(){return QH||(QH=1,(function(u){var n=Sl&&Sl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Sl&&Sl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(K0e(),u)})(Sl)),Sl}var Al={},R3={},HH;function Y0e(){if(HH)return R3;HH=1,Object.defineProperty(R3,"__esModule",{value:!0}),R3.ActorQuerySourceIdentifySerialized=void 0;const u=Bv(),n=be(),o=bk(),i=Dt();let t=class extends u.ActorQuerySourceIdentify{constructor(r){super(r)}async test(r){return this.isStringSource(r.querySourceUnidentified)?(0,n.passTestVoid)():(0,n.failTest)(`${this.name} requires a single query source with serialized type to be present in the context.`)}async run(r){return await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{type:"rdfjs",value:await this.getRdfSource(r.context,r.querySourceUnidentified),context:r.querySourceUnidentified.context},context:r.context})}async getRdfSource(r,a){const c=new i.Readable({objectMode:!0});c._read=()=>{},c.push(a.value),c.push(null);const s={context:r,handle:{metadata:{baseIRI:a.baseIRI},data:c,context:r},handleMediaType:a.mediaType},d=await this.mediatorRdfParse.mediate(s);return await(0,o.storeStream)(d.handle.data)}isStringSource(r){return"type"in r?r.type==="serialized":typeof r.value!="string"?!1:"mediaType"in r}};return R3.ActorQuerySourceIdentifySerialized=t,R3}var GH;function Z0e(){return GH||(GH=1,(function(u){var n=Al&&Al.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Al&&Al.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(Y0e(),u)})(Al)),Al}var Ol={},F3={},zH;function ehe(){if(zH)return F3;zH=1,Object.defineProperty(F3,"__esModule",{value:!0}),F3.ActorRdfJoinMultiBindSource=void 0;const u=Hr(),n=Ce(),o=be(),i=ua(),t=gt(),e=pt(),r=dt();let a=class extends u.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:"bind-source",canHandleUndefs:!0})}async getOutput(s,d){const l=s.context.getSafe(n.KeysInitQuery.dataFactory),f=new r.Factory(l),h=d.entriesSorted;this.logDebug(s.context,"First entry for Bind Join Source: ",()=>({entry:h[0].operation,cardinality:h[0].metadata.cardinality,order:h[0].metadata.order,availableOrders:h[0].metadata.availableOrders}));for(const[v,A]of h.entries())v!==0&&A.output.bindingsStream.close();const p=h[0].output,y=h[0].metadata,_=[...h];_.splice(0,1);const b=(0,t.getOperationSource)(_[0].operation),m=this.createOperationFromEntries(f,_),g=new i.ChunkedIterator(p.bindingsStream,this.blockSize,{autoStart:!1});return{result:{type:"bindings",bindingsStream:new e.UnionIterator(g.map(v=>b.source.queryBindings(m,b.context?s.context.merge(b.context):s.context,{joinBindings:{bindings:v,metadata:y}}))),metadata:()=>this.constructResultMetadata(h,h.map(v=>v.metadata),s.context)},physicalPlanMetadata:{bindIndex:d.entriesUnsorted.indexOf(h[0])}}}async sortJoinEntries(s,d){const l=await u.ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort,s,d);return l.isFailed()?l:(s=l.get(),s=s.sort((f,h)=>f.operationModified&&!h.operationModified?-1:0),(0,o.passTest)(s))}async getJoinCoefficients(s,d){let{metadatas:l}=d;const f=s.context.getSafe(n.KeysInitQuery.dataFactory),h=new r.Factory(f),p=s.entries.map((w,S)=>({...w,metadata:l[S]})),y=await this.sortJoinEntries(p,s.context);if(y.isFailed())return y;const _=y.get();l=_.map(w=>w.metadata);const b=u.ActorRdfJoin.getRequestInitialTimes(l),m=u.ActorRdfJoin.getRequestItemTimes(l),g=[..._];[...b],[...m],g.splice(0,1);const T=g.map(w=>(0,t.getOperationSource)(w.operation));if(T.some(w=>!w))return(0,o.failTest)(`Actor ${this.name} can not bind on remaining operations without source annotation`);if(T.some(w=>w!==T[0]))return(0,o.failTest)(`Actor ${this.name} can not bind on remaining operations with non-equal source annotation`);const v=T[0],A=this.createOperationFromEntries(h,g),I=await v.source.getSelectorShape(s.context);if(!(0,t.doesShapeAcceptOperation)(I,A,{joinBindings:!0}))return(0,o.failTest)(`Actor ${this.name} detected a source that can not handle passing down join bindings`);const q=await Promise.all(g.map(async w=>(await this.mediatorJoinSelectivity.mediate({entries:[_[0],w],context:s.context})).selectivity*this.selectivityModifier)),O=g.map((w,S)=>w.metadata.cardinality.value*q[S]).reduce((w,S)=>w+S,0);return(0,o.passTestWithSideData)({iterations:1,persistedItems:l[0].cardinality.value,blockingItems:l[0].cardinality.value,requestTime:b[0]+l[0].cardinality.value*m[0]+b[1]+O*m[1]},{...d,entriesUnsorted:p,entriesSorted:_})}createOperationFromEntries(s,d){return d.length===1?d[0].operation:s.createJoin(d.map(l=>l.operation),!0)}};return F3.ActorRdfJoinMultiBindSource=a,F3}var XH;function the(){return XH||(XH=1,(function(u){var n=Ol&&Ol.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Ol&&Ol.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ehe(),u)})(Ol)),Ol}var El={},N3={},JH;function rhe(){if(JH)return N3;JH=1,Object.defineProperty(N3,"__esModule",{value:!0}),N3.ActorOptimizeQueryOperationJoinConnected=void 0;const u=mn(),n=Ce(),o=be(),i=dt();let t=class fw extends u.ActorOptimizeQueryOperation{async test(r){return(0,o.passTestVoid)()}async run(r){const a=r.context.getSafe(n.KeysInitQuery.dataFactory),c=new i.Factory(a);return{operation:i.Util.mapOperation(r.operation,{join(d,l){return{recurse:!1,result:fw.cluster(d,l)}}},c),context:r.context}}static cluster(r,a){const c=r.input.map(f=>({inScopeVariables:Object.fromEntries(i.Util.inScopeVariables(f).map(h=>[h.value,!0])),entries:[f]}));let s,d=c;do s=d,d=fw.clusterIteration(s);while(s.length!==d.length);const l=d.map(f=>f.entries.length===1?f.entries[0]:a.createJoin(f.entries));return l.length===1?l[0]:a.createJoin(l,!1)}static clusterIteration(r){const a=[];for(const c of r){let s=!1;for(const d of a)if(fw.haveOverlappingVariables(c.inScopeVariables,d.inScopeVariables)){d.entries=[...d.entries,...c.entries],d.inScopeVariables={...d.inScopeVariables,...c.inScopeVariables},s=!0;break}s||a.push({inScopeVariables:c.inScopeVariables,entries:c.entries})}return a}static haveOverlappingVariables(r,a){for(const c of Object.keys(r))if(a[c])return!0;return!1}};return N3.ActorOptimizeQueryOperationJoinConnected=t,N3}var kH;function nhe(){return kH||(kH=1,(function(u){var n=El&&El.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=El&&El.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(rhe(),u)})(El)),El}var xl={},P3={},KH;function ihe(){if(KH)return P3;KH=1,Object.defineProperty(P3,"__esModule",{value:!0}),P3.ActorOptimizeQueryOperationBgpToJoin=void 0;const u=mn(),n=Ce(),o=be(),i=dt();let t=class extends u.ActorOptimizeQueryOperation{async test(r){return(0,o.passTestVoid)()}async run(r){const a=r.context.getSafe(n.KeysInitQuery.dataFactory),c=new i.Factory(a);return{operation:i.Util.mapOperation(r.operation,{bgp(d,l){return{recurse:!1,result:l.createJoin(d.patterns)}}},c),context:r.context}}};return P3.ActorOptimizeQueryOperationBgpToJoin=t,P3}var WH;function ahe(){return WH||(WH=1,(function(u){var n=xl&&xl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=xl&&xl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(ihe(),u)})(xl)),xl}var Il={},D3={},YH;function uhe(){if(YH)return D3;YH=1,Object.defineProperty(D3,"__esModule",{value:!0}),D3.ActorOptimizeQueryOperationJoinBgp=void 0;const u=mn(),n=Ce(),o=be(),i=dt();let t=class extends u.ActorOptimizeQueryOperation{async test(r){return(0,o.passTestVoid)()}async run(r){const a=r.context.getSafe(n.KeysInitQuery.dataFactory),c=new i.Factory(a);return{operation:i.Util.mapOperation(r.operation,{join(d,l){return d.input.every(f=>f.type==="bgp")?{recurse:!1,result:l.createBgp(d.input.flatMap(f=>f.patterns))}:{recurse:!1,result:d}}},c),context:r.context}}};return D3.ActorOptimizeQueryOperationJoinBgp=t,D3}var ZH;function ohe(){return ZH||(ZH=1,(function(u){var n=Il&&Il.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Il&&Il.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(uhe(),u)})(Il)),Il}var Rl={},j3={},eG;function she(){if(eG)return j3;eG=1,Object.defineProperty(j3,"__esModule",{value:!0}),j3.ActorOptimizeQueryOperationAssignSourcesExhaustive=void 0;const u=mn(),n=kO(),o=Ce(),i=be(),t=gt(),e=dt();let r=class extends u.ActorOptimizeQueryOperation{constructor(c){super(c)}async test(c){return(0,i.passTestVoid)()}async run(c){const s=c.context.getSafe(o.KeysInitQuery.dataFactory),d=new e.Factory(s),l=c.context.get(o.KeysQueryOperation.querySources)??[];if(l.length===0)return{operation:c.operation,context:c.context};if(l.length===1){const f=l[0],h=c.context.get(o.KeysRdfUpdateQuads.destination);if(!h||f.source.referenceValue===(0,n.getDataDestinationValue)(h))try{const p=await f.source.getSelectorShape(c.context);if((0,t.doesShapeAcceptOperation)(p,c.operation))return{operation:(0,t.assignOperationSource)(c.operation,f),context:c.context}}catch{}}return{operation:this.assignExhaustive(d,c.operation,l),context:c.context.delete(o.KeysInitQuery.queryString)}}assignExhaustive(c,s,d){const l=this;return e.Util.mapOperation(s,{[e.Algebra.types.PATTERN](f,h){return d.length===1?{result:(0,t.assignOperationSource)(f,d[0]),recurse:!1}:{result:h.createUnion(d.map(p=>(0,t.assignOperationSource)(f,p))),recurse:!1}},[e.Algebra.types.LINK](f,h){return d.length===1?{result:(0,t.assignOperationSource)(f,d[0]),recurse:!1}:{result:h.createAlt(d.map(p=>(0,t.assignOperationSource)(f,p))),recurse:!1}},[e.Algebra.types.NPS](f,h){return d.length===1?{result:(0,t.assignOperationSource)(f,d[0]),recurse:!1}:{result:h.createAlt(d.map(p=>(0,t.assignOperationSource)(f,p))),recurse:!1}},[e.Algebra.types.SERVICE](f){return{result:f,recurse:!1}},[e.Algebra.types.CONSTRUCT](f,h){return{result:h.createConstruct(l.assignExhaustive(c,f.input,d),f.template),recurse:!1}},[e.Algebra.types.DELETE_INSERT](f,h){return{result:h.createDeleteInsert(f.delete,f.insert,f.where?l.assignExhaustive(c,f.where,d):void 0),recurse:!1}}},c)}};return j3.ActorOptimizeQueryOperationAssignSourcesExhaustive=r,j3}var tG;function che(){return tG||(tG=1,(function(u){var n=Rl&&Rl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Rl&&Rl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(she(),u)})(Rl)),Rl}var Fl={},L3={},rG;function dhe(){if(rG)return L3;rG=1,Object.defineProperty(L3,"__esModule",{value:!0}),L3.ActorOptimizeQueryOperationDescribeToConstructsSubject=void 0;const u=mn(),n=Ce(),o=be(),i=dt();let t=class extends u.ActorOptimizeQueryOperation{constructor(r){super(r)}async test(r){return r.operation.type!==i.Algebra.types.DESCRIBE?(0,o.failTest)(`Actor ${this.name} only supports describe operations, but got ${r.operation.type}`):(0,o.passTest)(!0)}async run(r){const a=r.context.getSafe(n.KeysInitQuery.dataFactory),c=new i.Factory(a),s=r.operation,d=s.terms.filter(f=>f.termType!=="Variable").map(f=>{const h=[a.quad(f,a.variable("__predicate"),a.variable("__object"))];return h.forEach(y=>y.type="pattern"),{input:{type:i.Algebra.types.BGP,patterns:h},template:h,type:"construct"}});if(d.length!==s.terms.length){let f=[];s.terms.filter(h=>h.termType==="Variable").forEach((h,p)=>{const y=[a.quad(h,a.variable(`__predicate${p}`),a.variable(`__object${p}`))];y.forEach(_=>_.type="pattern"),f=[...f,...y]}),d.push({input:{type:i.Algebra.types.JOIN,input:[s.input,{type:i.Algebra.types.BGP,patterns:f}]},template:f,type:i.Algebra.types.CONSTRUCT})}return{operation:c.createUnion(d,!1),context:r.context}}};return L3.ActorOptimizeQueryOperationDescribeToConstructsSubject=t,L3}var nG;function lhe(){return nG||(nG=1,(function(u){var n=Fl&&Fl.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=Fl&&Fl.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(dhe(),u)})(Fl)),Fl}var hA,iG;function fhe(){return iG||(iG=1,hA=function(u){const n=new(pW()).LoggerVoid,o=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/^4.0.0/components/ActorInit.jsonld#ActorInit_default_bus"}),i=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/^4.0.0/components/ActorContextPreprocess.jsonld#ActorContextPreprocess_default_bus"}),t=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-bindings/^4.0.0/components/ActorHashBindings.jsonld#ActorHashBindings_default_bus"}),e=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-quads/^4.0.0/components/ActorHashQuads.jsonld#ActorHashQuads_default_bus"}),r=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/^4.0.0/components/ActorOptimizeQueryOperation.jsonld#ActorOptimizeQueryOperation_default_bus"}),a=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-parse/^4.0.0/components/ActorQueryParse.jsonld#ActorQueryParse_default_bus"}),c=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-result-serialize/^4.0.0/components/ActorQueryResultSerialize.jsonld#ActorQueryResultSerialize_default_bus"}),s=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify-hypermedia/^4.0.0/components/ActorQuerySourceIdentifyHypermedia.jsonld#ActorQuerySourceIdentifyHypermedia_default_bus"}),d=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference/^4.0.0/components/ActorDereference.jsonld#ActorDereference_default_bus"}),l=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference-rdf/^4.0.0/components/ActorDereferenceRdf.jsonld#ActorDereferenceRdf_default_bus"}),f=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-entries-sort/^4.0.0/components/ActorRdfJoinEntriesSort.jsonld#ActorRdfJoinEntriesSort_default_bus"}),h=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-selectivity/^4.0.0/components/ActorRdfJoinSelectivity.jsonld#ActorRdfJoinSelectivity_default_bus"}),p=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata/^4.0.0/components/ActorRdfMetadata.jsonld#ActorRdfMetadata_default_bus"}),y=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-accumulate/^4.0.0/components/ActorRdfMetadataAccumulate.jsonld#ActorRdfMetadataAccumulate_default_bus"}),_=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-extract/^4.0.0/components/ActorRdfMetadataExtract.jsonld#ActorRdfMetadataExtract_default_bus"}),b=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse/^4.0.0/components/ActorRdfParse.jsonld#ActorRdfParse_default_bus"}),m=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse-html/^4.0.0/components/ActorRdfParseHtml.jsonld#ActorRdfParseHtml_default_bus"}),g=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links/^4.0.0/components/ActorRdfResolveHypermediaLinks.jsonld#ActorRdfResolveHypermediaLinks_default_bus"}),T=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links-queue/^4.0.0/components/ActorRdfResolveHypermediaLinksQueue.jsonld#ActorRdfResolveHypermediaLinksQueue_default_bus"}),v=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-serialize/^4.0.0/components/ActorRdfSerialize.jsonld#ActorRdfSerialize_default_bus"}),A=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-hypermedia/^4.0.0/components/ActorRdfUpdateHypermedia.jsonld#ActorRdfUpdateHypermedia_default_bus"}),I=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-quads/^4.0.0/components/ActorRdfUpdateQuads.jsonld#ActorRdfUpdateQuads_default_bus"}),q=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-bindings-aggregator-factory/^4.0.0/components/ActorBindingsAggregatorFactory.jsonld#ActorBindingsAggregatorFactory_default_bus"}),O=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-expression-evaluator-factory/^4.0.0/components/ActorExpressionEvaluatorFactory.jsonld#ActorExpressionEvaluatorFactory_default_bus"}),w=new(Te()).BusFunctionFactory({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-function-factory/^4.0.0/components/ActorFunctionFactory.jsonld#ActorFunctionFactory_default_bus"}),S=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^4.0.0/components/ActorHttp.jsonld#ActorHttp_default_bus"}),E=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^4.0.0/components/ActorHttp.jsonld#ActorHttp_fallback_bus"}),R=new(Lt()).BusQueryOperation({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/^4.0.0/components/ActorQueryOperation.jsonld#ActorQueryOperation_default_bus"}),L=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-process/^4.0.0/components/ActorQueryProcess.jsonld#ActorQueryProcess_default_bus"}),M=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify/^4.0.0/components/ActorQuerySourceIdentify.jsonld#ActorQuerySourceIdentify_default_bus"}),B=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/^4.0.0/components/ActorRdfJoin.jsonld#ActorRdfJoin_default_bus"}),X=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-term-comparator-factory/^4.0.0/components/ActorTermComparatorFactory.jsonld#ActorTermComparatorFactory_default_bus"}),J=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/^4.0.0/components/ActorHttpInvalidate.jsonld#ActorHttpInvalidate_default_bus"}),ie=new(be()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-merge-bindings-context/^4.0.0/components/ActorMergeBindingsContext.jsonld#ActorMergeBindingsContext_default_bus"});new(kW()).ActorContextPreprocessConvertShortcuts({contextKeyShortcuts:{baseIRI:"@comunica/actor-init-query:baseIRI",dataFactory:"@comunica/actor-init-query:dataFactory",datetime:"@comunica/actor-http-memento:datetime",destination:"@comunica/bus-rdf-update-quads:destination",distinctConstruct:"@comunica/actor-init-query:distinctConstruct",explain:"@comunica/actor-init-query:explain",extensionFunctionCreator:"@comunica/actor-init-query:extensionFunctionCreator",extensionFunctions:"@comunica/actor-init-query:extensionFunctions",fetch:"@comunica/bus-http:fetch",functionArgumentsCache:"@comunica/actor-init-query:functionArgumentsCache",httpAuth:"@comunica/bus-http:auth",httpBodyTimeout:"@comunica/bus-http:http-body-timeout",httpIncludeCredentials:"@comunica/bus-http:include-credentials",httpProxyHandler:"@comunica/actor-http-proxy:httpProxyHandler",httpRetryCount:"@comunica/bus-http:http-retry-count",httpRetryDelayFallback:"@comunica/bus-http:http-retry-delay-fallback",httpRetryDelayLimit:"@comunica/bus-http:http-retry-delay-limit",httpTimeout:"@comunica/bus-http:http-timeout",initialBindings:"@comunica/actor-init-query:initialBindings",invalidateCache:"@comunica/actor-init-query:invalidateCache",lenient:"@comunica/actor-init-query:lenient",log:"@comunica/core:log",queryFormat:"@comunica/actor-init-query:queryFormat",queryTimestamp:"@comunica/actor-init-query:queryTimestamp",queryTimestampHighResolution:"@comunica/actor-init-query:queryTimestampHighResolution",readOnly:"@comunica/bus-query-operation:readOnly",recoverBrokenLinks:"@comunica/bus-http-wayback:recover-broken-links",sources:"@comunica/actor-init-query:querySourcesUnidentified",traverse:"@comunica/bus-query-source-identify:traverse",unionDefaultGraph:"@comunica/bus-query-operation:unionDefaultGraph"},name:"urn:comunica:default:context-preprocess/actors#convert-shortcuts",bus:i,busFailMessage:"Context preprocessing failed"}),new(WW()).ActorContextPreprocessSetDefaults({logger:n,name:"urn:comunica:default:context-preprocess/actors#set-defaults",bus:i,busFailMessage:"Context preprocessing failed"}),new(ZW()).ActorContextPreprocessSourceToDestination({name:"urn:comunica:default:context-preprocess/actors#source-to-destination",bus:i,busFailMessage:"Context preprocessing failed"});const U=new(xz()).ActorContextPreprocessQuerySourceSkolemize({name:"urn:comunica:default:context-preprocess/actors#query-source-skolemize",bus:i,busFailMessage:"Context preprocessing failed"}),fe=new(C5()).MediatorCombinePipeline({name:"urn:comunica:default:context-preprocess/mediators#main",bus:i});new(cY()).ActorHashBindingsMurmur({name:"urn:comunica:default:hash-bindings/actors#murmur",bus:t,busFailMessage:"Failed to obtaining hash functions for bindings"});const me=new(pr()).MediatorRace({name:"urn:comunica:default:hash-bindings/mediators#main",bus:t});new(pY()).ActorHashQuadsMurmur({name:"urn:comunica:default:hash-quads/actors#murmur",bus:e,busFailMessage:"Failed to obtaining hash functions for quads"}),new(_Y()).ActorOptimizeQueryOperationRewriteCopy({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-copy",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(mY()).ActorOptimizeQueryOperationRewriteMove({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-move",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(TY()).ActorOptimizeQueryOperationRewriteAdd({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-add",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const he=new(xY()).ActorOptimizeQueryOperationGroupSources({name:"urn:comunica:default:optimize-query-operation/actors#group-sources",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});new(RY()).ActorOptimizeQueryOperationConstructDistinct({name:"urn:comunica:default:optimize-query-operation/actors#construct-distinct",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const te=new(C5()).MediatorCombinePipeline({filterFailures:!0,name:"urn:comunica:default:optimize-query-operation/mediators#main",bus:r});new(PY()).ActorQueryParseSparql({prefixes:{dbpedia:"http://dbpedia.org/resource/","dbpedia-owl":"http://dbpedia.org/ontology/",dbpprop:"http://dbpedia.org/property/",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",skos:"http://www.w3.org/2008/05/skos#",xsd:"http://www.w3.org/2001/XMLSchema#"},name:"urn:comunica:default:query-parse/actors#sparql",bus:a,busFailMessage:'Query parsing failed: none of the configured parsers were able to the query "${action.query}"'}),new(oee()).ActorQueryParseGraphql({name:"urn:comunica:default:query-parse/actors#graphql",bus:a,busFailMessage:'Query parsing failed: none of the configured parsers were able to the query "${action.query}"'});const xe=new(pr()).MediatorRace({name:"urn:comunica:default:query-parse/mediators#main",bus:a});new(mee()).ActorQueryResultSerializeJson({mediaTypePriorities:{"application/json":1},mediaTypeFormats:{"application/json":"https://comunica.linkeddatafragments.org/#results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#json",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(Tee()).ActorQueryResultSerializeSimple({mediaTypePriorities:{simple:.9},mediaTypeFormats:{simple:"https://comunica.linkeddatafragments.org/#results_simple"},name:"urn:comunica:default:query-result-serialize/actors#simple",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(See()).ActorQueryResultSerializeSparqlCsv({mediaTypePriorities:{"text/csv":.75},mediaTypeFormats:{"text/csv":"http://www.w3.org/ns/formats/SPARQL_Results_CSV"},name:"urn:comunica:default:query-result-serialize/actors#csv",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(Eee()).ActorQueryResultSerializeSparqlTsv({mediaTypePriorities:{"text/tab-separated-values":.75},mediaTypeFormats:{"text/tab-separated-values":"http://www.w3.org/ns/formats/SPARQL_Results_TSV"},name:"urn:comunica:default:query-result-serialize/actors#sparql-tsv",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(Ree()).ActorQueryResultSerializeSparqlXml({mediaTypePriorities:{"application/sparql-results+xml":.8},mediaTypeFormats:{"application/sparql-results+xml":"http://www.w3.org/ns/formats/SPARQL_Results_XML"},name:"urn:comunica:default:query-result-serialize/actors#sparql-xml",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(Nee()).ActorQueryResultSerializeTable({columnWidth:50,mediaTypePriorities:{table:.6},mediaTypeFormats:{table:"https://comunica.linkeddatafragments.org/#results_table"},name:"urn:comunica:default:query-result-serialize/actors#table",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(Vee()).ActorQueryResultSerializeTree({mediaTypePriorities:{tree:.5},mediaTypeFormats:{tree:"https://comunica.linkeddatafragments.org/#results_tree"},name:"urn:comunica:default:query-result-serialize/actors#tree",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"});const Ie=new(pr()).MediatorRace({name:"urn:comunica:default:query-result-serialize/mediators#serialize",bus:c}),Fe=new(Mi()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:query-result-serialize/mediators#mediaType",bus:c}),pe=new(Mi()).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:query-result-serialize/mediators#mediaTypeFormat",bus:c}),ye=new(sf()).MediatorNumber({field:"filterFactor",type:"max",ignoreFailures:!0,name:"urn:comunica:default:query-source-identify-hypermedia/mediators#main",bus:s}),Q=new(Jee()).ActorDereferenceFallback({name:"urn:comunica:default:dereference/actors#fallback",bus:d,busFailMessage:"Dereferencing failed: none of the configured actors were able to handle ${action.url}"}),P=new(pr()).MediatorRace({name:"urn:comunica:default:dereference/mediators#main",bus:d}),D=new(pr()).MediatorRace({name:"urn:comunica:default:dereference-rdf/mediators#main",bus:l});new(Wee()).ActorRdfJoinEntriesSortCardinality({name:"urn:comunica:default:rdf-join-entries-sort/actors#cardinality",bus:f,busFailMessage:"Sorting join entries failed: none of the configured actors were able to sort"});const x=new(sf()).MediatorNumber({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-entries-sort/mediators#main",bus:f});new(tte()).ActorRdfJoinSelectivityVariableCounting({name:"urn:comunica:default:rdf-join-selectivity/actors#variable-counting",bus:h,busFailMessage:"Determining join selectivity failed: none of the configured actors were able to calculate selectivities"});const N=new(sf()).MediatorNumber({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-selectivity/mediators#main",bus:h});new(ite()).ActorRdfMetadataPrimaryTopic({metadataToData:!1,dataToMetadataOnInvalidMetadataGraph:!0,name:"urn:comunica:default:rdf-metadata/actors#primary-topic",bus:p,busFailMessage:"Metadata splicing failed: none of the configured actors were able to splice metadata from ${action.url}"}),new(ute()).ActorRdfMetadataAll({name:"urn:comunica:default:rdf-metadata/actors#all",bus:p,busFailMessage:"Metadata splicing failed: none of the configured actors were able to splice metadata from ${action.url}"});const $=new(pr()).MediatorRace({name:"urn:comunica:default:rdf-metadata/mediators#main",bus:p});new(cte()).ActorRdfMetadataAccumulateCardinality({name:"urn:comunica:default:rdf-metadata-accumulate/actors#cardinality",bus:y,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(lte()).ActorRdfMetadataAccumulatePageSize({name:"urn:comunica:default:rdf-metadata-accumulate/actors#pagesize",bus:y,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(hte()).ActorRdfMetadataAccumulateRequestTime({name:"urn:comunica:default:rdf-metadata-accumulate/actors#requesttime",bus:y,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"});const G=new(Mi()).MediatorCombineUnion({field:"metadata",name:"urn:comunica:default:rdf-metadata-accumulate/mediators#main",bus:y});new(_te()).ActorRdfMetadataExtractHydraControls({name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-controls",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(mte()).ActorRdfMetadataExtractHydraCount({predicates:["http://www.w3.org/ns/hydra/core#totalItems","http://rdfs.org/ns/void#triples"],name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-count",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(Tte()).ActorRdfMetadataExtractHydraPagesize({predicates:["http://www.w3.org/ns/hydra/core#itemsPerPage"],name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-pagesize",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(Ste()).ActorRdfMetadataExtractRequestTime({name:"urn:comunica:default:rdf-metadata-extract/actors#request-time",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(Ote()).ActorRdfMetadataExtractAllowHttpMethods({name:"urn:comunica:default:rdf-metadata-extract/actors#allow-http-methods",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(xte()).ActorRdfMetadataExtractPutAccepted({name:"urn:comunica:default:rdf-metadata-extract/actors#put-accepted",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(Rte()).ActorRdfMetadataExtractPatchSparqlUpdate({name:"urn:comunica:default:rdf-metadata-extract/actors#patch-sparql-update",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(Nte()).ActorRdfMetadataExtractSparqlService({inferHttpsEndpoint:!0,name:"urn:comunica:default:rdf-metadata-extract/actors#sparql-service",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(jte()).ActorRdfMetadataExtractVoid({name:"urn:comunica:default:rdf-metadata-extract/actors#void",bus:_,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"});const V=new(Mi()).MediatorCombineUnion({filterFailures:!0,field:"metadata",name:"urn:comunica:default:rdf-metadata-extract/mediators#main",bus:_});new(ure()).ActorRdfParseN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},priorityScale:1,name:"urn:comunica:default:rdf-parse/actors#n3",bus:b,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(yre()).ActorRdfParseRdfXml({mediaTypePriorities:{"application/rdf+xml":1},mediaTypeFormats:{"application/rdf+xml":"http://www.w3.org/ns/formats/RDF_XML"},priorityScale:.5,name:"urn:comunica:default:rdf-parse/actors#rdfxml",bus:b,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(Cre()).ActorRdfParseXmlRdfa({mediaTypePriorities:{"application/xml":1,"image/svg+xml":1,"text/xml":1},mediaTypeFormats:{"application/xml":"http://www.w3.org/ns/formats/RDFa","image/svg+xml":"http://www.w3.org/ns/formats/RDFa","text/xml":"http://www.w3.org/ns/formats/RDFa"},priorityScale:.3,name:"urn:comunica:default:rdf-parse/actors#xmlrdfa",bus:b,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(Vre()).ActorRdfParseShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-parse/actors#shaclc",bus:b,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"});const k=new(pr()).MediatorRace({name:"urn:comunica:default:rdf-parse/mediators#parse",bus:b}),H=new(Mi()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-parse/mediators#mediaType",bus:b});new(Gre()).ActorRdfParseHtml({busRdfParseHtml:m,mediaTypePriorities:{"application/xhtml+xml":.9,"text/html":1},mediaTypeFormats:{"application/xhtml+xml":"http://www.w3.org/ns/formats/HTML","text/html":"http://www.w3.org/ns/formats/HTML"},priorityScale:.2,name:"urn:comunica:default:rdf-parse/actors#html",bus:b,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(ine()).ActorRdfParseHtmlMicrodata({name:"urn:comunica:default:rdf-parse-html/actors#microdata",bus:m,busFailMessage:"RDF HTML parsing failed: none of the configured parsers were able to parse RDF in HTML"}),new(une()).ActorRdfParseHtmlRdfa({name:"urn:comunica:default:rdf-parse-html/actors#rdfa",bus:m,busFailMessage:"RDF HTML parsing failed: none of the configured parsers were able to parse RDF in HTML"}),new(dne()).ActorRdfResolveHypermediaLinksNext({name:"urn:comunica:default:rdf-resolve-hypermedia-links/actors#next",bus:g,busFailMessage:"Hypermedia link resolution failed: none of the configured actors were able to resolve links from metadata"});const Y=new(pr()).MediatorRace({name:"urn:comunica:default:rdf-resolve-hypermedia-links/mediators#main",bus:g});new(yne()).ActorRdfResolveHypermediaLinksQueueFifo({name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/actors#fifo",bus:T,busFailMessage:"Link queue creation failed: none of the configured actors were able to create a link queue starting from ${action.firstUrl}"});const se=new(pr()).MediatorRace({name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/mediators#main",bus:T});new(vne()).ActorRdfSerializeN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},name:"urn:comunica:default:rdf-serialize/actors#n3",bus:v,busFailMessage:"RDF serialization failed: none of the configured serializers were able to handle media type ${action.handleMediaType}"}),new(Ine()).ActorRdfSerializeJsonLd({jsonStringifyIndentSpaces:2,mediaTypePriorities:{"application/ld+json":1},mediaTypeFormats:{"application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-serialize/actors#jsonld",bus:v,busFailMessage:"RDF serialization failed: none of the configured serializers were able to handle media type ${action.handleMediaType}"}),new(Gne()).ActorRdfSerializeShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-serialize/actors#shaclc",bus:v,busFailMessage:"RDF serialization failed: none of the configured serializers were able to handle media type ${action.handleMediaType}"});const ce=new(pr()).MediatorRace({name:"urn:comunica:default:rdf-serialize/mediators#serialize",bus:v}),Se=new(Mi()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-serialize/mediators#mediaType",bus:v}),Me=new(Mi()).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:rdf-serialize/mediators#mediaTypeFormat",bus:v}),Ae=new(pr()).MediatorRace({name:"urn:comunica:default:rdf-update-hypermedia/mediators#main",bus:A});new(Wne()).ActorRdfUpdateQuadsRdfJsStore({name:"urn:comunica:default:rdf-update-quads/actors#rdfjs-store",bus:I,busFailMessage:"RDF updating failed: none of the configured actors were able to handle an update"});const oe=new(pr()).MediatorRace({name:"urn:comunica:default:rdf-update-quads/mediators#main",bus:I}),C=new(pr()).MediatorRace({name:"urn:comunica:default:bindings-aggregator-factory/mediators#main",bus:q}),F=new(pr()).MediatorRace({name:"urn:comunica:default:expression-evaluator-factory/mediators#main",bus:O});new(eie()).ActorFunctionFactoryExpressionBnode({name:"urn:comunica:default:function-factory/actors#expression-function-bnode",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(nie()).ActorFunctionFactoryExpressionBound({name:"urn:comunica:default:function-factory/actors#expression-function-bound",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(uie()).ActorFunctionFactoryExpressionCoalesce({name:"urn:comunica:default:function-factory/actors#expression-function-coalesce",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(cie()).ActorFunctionFactoryExpressionConcat({name:"urn:comunica:default:function-factory/actors#expression-function-concat",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(fie()).ActorFunctionFactoryExpressionExtensions({name:"urn:comunica:default:function-factory/actors#expression-function-extensions",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bie()).ActorFunctionFactoryExpressionIf({name:"urn:comunica:default:function-factory/actors#expression-function-if",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(gie()).ActorFunctionFactoryExpressionLogicalAnd({name:"urn:comunica:default:function-factory/actors#expression-function-logical-and",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Tie()).ActorFunctionFactoryExpressionLogicalOr({name:"urn:comunica:default:function-factory/actors#expression-function-logical-or",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Aie()).ActorFunctionFactoryExpressionSameTerm({name:"urn:comunica:default:function-factory/actors#expression-function-same-term",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(xie()).ActorFunctionFactoryTermAbs({name:"urn:comunica:default:function-factory/actors#term-function-abs",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Nie()).ActorFunctionFactoryTermAddition({name:"urn:comunica:default:function-factory/actors#term-function-addition",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(jie()).ActorFunctionFactoryTermCeil({name:"urn:comunica:default:function-factory/actors#term-function-ceil",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Cie()).ActorFunctionFactoryTermContains({name:"urn:comunica:default:function-factory/actors#term-function-contains",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new($ie()).ActorFunctionFactoryTermDatatype({name:"urn:comunica:default:function-factory/actors#term-function-datatype",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Qie()).ActorFunctionFactoryTermDay({name:"urn:comunica:default:function-factory/actors#term-function-day",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(zie()).ActorFunctionFactoryTermDivision({name:"urn:comunica:default:function-factory/actors#term-function-division",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(kie()).ActorFunctionFactoryTermEncodeForUri({name:"urn:comunica:default:function-factory/actors#term-function-encode-for-uri",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Yie()).ActorFunctionFactoryTermEquality({name:"urn:comunica:default:function-factory/actors#term-function-equality",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(tae()).ActorFunctionFactoryTermFloor({name:"urn:comunica:default:function-factory/actors#term-function-floor",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(iae()).ActorFunctionFactoryTermHours({name:"urn:comunica:default:function-factory/actors#term-function-hours",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(oae()).ActorFunctionFactoryTermIri({name:"urn:comunica:default:function-factory/actors#term-function-iri",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(dae()).ActorFunctionFactoryTermIsBlank({name:"urn:comunica:default:function-factory/actors#term-function-is-blank",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(hae()).ActorFunctionFactoryTermIsIri({name:"urn:comunica:default:function-factory/actors#term-function-is-iri",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(yae()).ActorFunctionFactoryTermIsLiteral({name:"urn:comunica:default:function-factory/actors#term-function-is-literal",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(mae()).ActorFunctionFactoryTermIsNumeric({name:"urn:comunica:default:function-factory/actors#term-function-is-numeric",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(wae()).ActorFunctionFactoryTermIsTriple({name:"urn:comunica:default:function-factory/actors#term-function-is-triple",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Oae()).ActorFunctionFactoryTermLang({name:"urn:comunica:default:function-factory/actors#term-function-lang",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Iae()).ActorFunctionFactoryTermLangmatches({name:"urn:comunica:default:function-factory/actors#term-function-langmatches",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Nae()).ActorFunctionFactoryTermLcase({name:"urn:comunica:default:function-factory/actors#term-function-lcase",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Lae()).ActorFunctionFactoryTermMd5({name:"urn:comunica:default:function-factory/actors#term-function-md5",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(qae()).ActorFunctionFactoryTermMinutes({name:"urn:comunica:default:function-factory/actors#term-function-minutes",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Uae()).ActorFunctionFactoryTermMonth({name:"urn:comunica:default:function-factory/actors#term-function-month",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Hae()).ActorFunctionFactoryTermMultiplication({name:"urn:comunica:default:function-factory/actors#term-function-multiplication",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Xae()).ActorFunctionFactoryTermNot({name:"urn:comunica:default:function-factory/actors#term-function-not",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Kae()).ActorFunctionFactoryTermNow({name:"urn:comunica:default:function-factory/actors#term-function-now",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Zae()).ActorFunctionFactoryTermObject({name:"urn:comunica:default:function-factory/actors#term-function-object",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(rue()).ActorFunctionFactoryTermPredicate({name:"urn:comunica:default:function-factory/actors#term-function-predicate",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(aue()).ActorFunctionFactoryTermRand({name:"urn:comunica:default:function-factory/actors#term-function-rand",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(iJ()).ActorFunctionFactoryTermRegex({name:"urn:comunica:default:function-factory/actors#term-function-regex",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(cue()).ActorFunctionFactoryTermReplace({name:"urn:comunica:default:function-factory/actors#term-function-replace",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(fue()).ActorFunctionFactoryTermRound({name:"urn:comunica:default:function-factory/actors#term-function-round",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bue()).ActorFunctionFactoryTermSeconds({name:"urn:comunica:default:function-factory/actors#term-function-seconds",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(gue()).ActorFunctionFactoryTermSha1({name:"urn:comunica:default:function-factory/actors#term-function-sha1",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Tue()).ActorFunctionFactoryTermSha256({name:"urn:comunica:default:function-factory/actors#term-function-sha256",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Aue()).ActorFunctionFactoryTermSha384({name:"urn:comunica:default:function-factory/actors#term-function-sha384",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(xue()).ActorFunctionFactoryTermSha512({name:"urn:comunica:default:function-factory/actors#term-function-sha512",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Fue()).ActorFunctionFactoryTermStrAfter({name:"urn:comunica:default:function-factory/actors#term-function-str-after",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Due()).ActorFunctionFactoryTermStrBefore({name:"urn:comunica:default:function-factory/actors#term-function-str-before",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Mue()).ActorFunctionFactoryTermStrDt({name:"urn:comunica:default:function-factory/actors#term-function-str-dt",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Bue()).ActorFunctionFactoryTermStrEnds({name:"urn:comunica:default:function-factory/actors#term-function-str-ends",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Vue()).ActorFunctionFactoryTermStrLang({name:"urn:comunica:default:function-factory/actors#term-function-str-lang",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Gue()).ActorFunctionFactoryTermStrLen({name:"urn:comunica:default:function-factory/actors#term-function-str-len",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Jue()).ActorFunctionFactoryTermStrStarts({name:"urn:comunica:default:function-factory/actors#term-function-str-starts",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(doe()).ActorFunctionFactoryTermStrUuid({name:"urn:comunica:default:function-factory/actors#term-function-str-uuid",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(hoe()).ActorFunctionFactoryTermStr({name:"urn:comunica:default:function-factory/actors#term-function-str",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(yoe()).ActorFunctionFactoryTermSubStr({name:"urn:comunica:default:function-factory/actors#term-function-sub-str",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(moe()).ActorFunctionFactoryTermSubject({name:"urn:comunica:default:function-factory/actors#term-function-subject",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(woe()).ActorFunctionFactoryTermSubtraction({name:"urn:comunica:default:function-factory/actors#term-function-subtraction",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Ooe()).ActorFunctionFactoryTermTimezone({name:"urn:comunica:default:function-factory/actors#term-function-timezone",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Ioe()).ActorFunctionFactoryTermTriple({name:"urn:comunica:default:function-factory/actors#term-function-triple",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Noe()).ActorFunctionFactoryTermTz({name:"urn:comunica:default:function-factory/actors#term-function-tz",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(joe()).ActorFunctionFactoryTermUcase({name:"urn:comunica:default:function-factory/actors#term-function-ucase",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Coe()).ActorFunctionFactoryTermUnaryMinus({name:"urn:comunica:default:function-factory/actors#term-function-unary-minus",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new($oe()).ActorFunctionFactoryTermUnaryPlus({name:"urn:comunica:default:function-factory/actors#term-function-unary-plus",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Qoe()).ActorFunctionFactoryTermUuid({name:"urn:comunica:default:function-factory/actors#term-function-uuid",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(zoe()).ActorFunctionFactoryTermXsdToBoolean({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-boolean",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(koe()).ActorFunctionFactoryTermXsdToDate({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-date",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Yoe()).ActorFunctionFactoryTermXsdToDatetime({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-datetime",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(tse()).ActorFunctionFactoryTermXsdToDayTimeDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-day-time-duration",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(ise()).ActorFunctionFactoryTermXsdToDecimal({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-decimal",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(ose()).ActorFunctionFactoryTermXsdToDouble({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-double",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(dse()).ActorFunctionFactoryTermXsdToDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-duration",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(hse()).ActorFunctionFactoryTermXsdToFloat({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-float",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(yse()).ActorFunctionFactoryTermXsdToInteger({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-integer",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(mse()).ActorFunctionFactoryTermXsdToString({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-string",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(wse()).ActorFunctionFactoryTermXsdToTime({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-time",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Ose()).ActorFunctionFactoryTermXsdToYearMonthDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-year-month-duration",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Ise()).ActorFunctionFactoryTermYear({name:"urn:comunica:default:function-factory/actors#term-function-year",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"});const j=new(pr()).MediatorRace({name:"urn:comunica:default:function-factory/mediators#main",bus:w}),z=new(Mse()).ActorHttpFetch({agentOptions:{keepAlive:!0,maxSockets:5},name:"urn:comunica:default:http/actors#fetch",bus:S,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}"}),Z=new(sf()).MediatorNumber({field:"time",type:"min",ignoreFailures:!0,name:"urn:comunica:default:http/mediators#no-fallback",bus:S}),le=new(sf()).MediatorNumber({field:"time",type:"min",ignoreFailures:!0,name:"urn:comunica:default:http/mediators#main",bus:E});new(qse()).ActorQueryOperationSource({name:"urn:comunica:default:query-operation/actors#source",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const ue=new(sf()).MediatorNumber({field:"httpRequests",type:"min",ignoreFailures:!0,name:"urn:comunica:default:query-operation/mediators#main",bus:R}),Pe=new(pr()).MediatorRace({name:"urn:comunica:default:query-process/mediators#main",bus:L}),Ve=new(pr()).MediatorRace({name:"urn:comunica:default:query-source-identify/mediators#main",bus:M}),Be=new($se()).MediatorJoinCoefficientsFixed({cpuWeight:10,memoryWeight:1,timeWeight:2,ioWeight:10,name:"urn:comunica:default:rdf-join/mediators#main",bus:B}),Ze=new(pr()).MediatorRace({name:"urn:comunica:default:term-comparator-factory/mediators#main",bus:X}),K=new(bf()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-context-preprocess-query-source-identify/^4.0.0/components/ActorContextPreprocessQuerySourceIdentify.jsonld#IActorContextPreprocessQuerySourceIdentifyArgs_default_invalidator",bus:J,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),we=new(Qse()).MediatorAll({name:"urn:comunica:default:http-invalidate/mediators#main",bus:J}),Ee=new(bf()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-rdf-update-quads-hypermedia/^4.0.0/components/ActorRdfUpdateQuadsHypermedia.jsonld#IActorRdfUpdateQuadsHypermediaArgs_default_invalidator",bus:J,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),$e=new(bf()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-http-retry/^4.0.0/components/ActorHttpRetry.jsonld#IActorHttpQueueArgs_default_invalidator",bus:J,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),Ne=new(bf()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-http-limit-rate/^4.0.0/components/ActorHttpLimitRate.jsonld#IActorHttpLimitRateArgs_default_invalidator",bus:J,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),et=new(bf()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^4.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator",bus:J,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),rt=new(bf()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^4.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator",bus:J,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),Ke=new(Mi()).MediatorCombineUnion({field:"mergeHandlers",name:"urn:comunica:default:merge-bindings-context/mediators#main",bus:ie});new(Gse()).ActorRdfJoinEntriesSortSelectivity({mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join-entries-sort/actors#selectivity",bus:f,busFailMessage:"Sorting join entries failed: none of the configured actors were able to sort"}),new(Yse()).ActorRdfJoinSingle({mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-single",bus:B,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(ece()).ActorRdfJoinMultiEmpty({mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-multi-empty",bus:B,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});const lt=new(_q()).ActorRdfJoinHash({mediatorHashBindings:me,canHandleUndefs:!1,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-hash-def",bus:B,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),re=new(_q()).ActorRdfJoinHash({mediatorHashBindings:me,canHandleUndefs:!0,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-hash-undef",bus:B,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),ne=new(lce()).ActorRdfJoinSymmetricHash({mediatorHashBindings:me,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-symmetric-hash",bus:B,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),De=new(hce()).ActorRdfJoinNestedLoop({mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-nested-loop",bus:B,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(kT()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!1,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-nonblocking",bus:B,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(kT()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!0,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-blocking",bus:B,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(kT()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!1,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-nonblocking",bus:B,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(kT()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!0,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-blocking",bus:B,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(_ce()).ActorRdfJoinOptionalNestedLoop({mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#optional-nested-loop",bus:B,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(Pq()).ActorRdfJoinMinusHash({canHandleUndefs:!1,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#minus-hash-def",bus:B,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(Pq()).ActorRdfJoinMinusHash({canHandleUndefs:!0,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#minus-hash-undef",bus:B,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(wce()).ActorDereferenceRdfParse({mediatorDereference:P,mediatorParse:k,mediatorParseMediatypes:H,mediaMappings:{htm:"text/html",html:"text/html",json:"application/json",jsonld:"application/ld+json",n3:"text/n3",nq:"application/n-quads",nquads:"application/n-quads",nt:"application/n-triples",ntriples:"application/n-triples",owl:"application/rdf+xml",rdf:"application/rdf+xml",rdfxml:"application/rdf+xml",shaclc:"text/shaclc",shaclce:"text/shaclc-ext",shc:"text/shaclc",shce:"text/shaclc-ext",svg:"image/svg+xml",svgz:"image/svg+xml",trig:"application/trig",ttl:"text/turtle",turtle:"text/turtle",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xml:"application/xml"},name:"urn:comunica:default:dereference-rdf/actors#parse",bus:l,busFailMessage:"RDF dereferencing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(Oce()).ActorRdfParseHtmlScript({mediatorRdfParseMediatypes:H,mediatorRdfParseHandle:k,name:"urn:comunica:default:rdf-parse-html/actors#script",bus:m,busFailMessage:"RDF HTML parsing failed: none of the configured parsers were able to parse RDF in HTML"}),new(xce()).ActorQueryResultSerializeRdf({mediatorRdfSerialize:ce,mediatorMediaTypeCombiner:Se,mediatorMediaTypeFormatCombiner:Me,name:"urn:comunica:default:query-result-serialize/actors#rdf",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(Nce()).ActorBindingsAggregatorFactoryGroupConcat({mediatorExpressionEvaluatorFactory:F,name:"urn:comunica:default:bindings-aggregator-factory/actors#group-concat",bus:q,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(Dce()).ActorBindingsAggregatorFactoryCount({mediatorExpressionEvaluatorFactory:F,name:"urn:comunica:default:bindings-aggregator-factory/actors#count",bus:q,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(Lce()).ActorBindingsAggregatorFactorySample({mediatorExpressionEvaluatorFactory:F,name:"urn:comunica:default:bindings-aggregator-factory/actors#sample",bus:q,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(Cce()).ActorBindingsAggregatorFactoryWildcardCount({mediatorExpressionEvaluatorFactory:F,name:"urn:comunica:default:bindings-aggregator-factory/actors#wildcard-count",bus:q,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(Bce()).ActorBindingsAggregatorFactoryAverage({mediatorFunctionFactory:j,mediatorExpressionEvaluatorFactory:F,name:"urn:comunica:default:bindings-aggregator-factory/actors#average",bus:q,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(Uce()).ActorBindingsAggregatorFactorySum({mediatorFunctionFactory:j,mediatorExpressionEvaluatorFactory:F,name:"urn:comunica:default:bindings-aggregator-factory/actors#sum",bus:q,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(Hce()).ActorFunctionFactoryExpressionIn({mediatorFunctionFactory:j,name:"urn:comunica:default:function-factory/actors#expression-function-in",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Xce()).ActorFunctionFactoryExpressionNotIn({mediatorFunctionFactory:j,name:"urn:comunica:default:function-factory/actors#expression-function-not-in",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Kce()).ActorFunctionFactoryTermGreaterThanEqual({mediatorFunctionFactory:j,name:"urn:comunica:default:function-factory/actors#term-function-greater-than-equal",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(Zce()).ActorFunctionFactoryTermGreaterThan({mediatorFunctionFactory:j,name:"urn:comunica:default:function-factory/actors#term-function-greater-than",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(rde()).ActorFunctionFactoryTermInequality({mediatorFunctionFactory:j,name:"urn:comunica:default:function-factory/actors#term-function-inequality",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(ade()).ActorFunctionFactoryTermLesserThanEqual({mediatorFunctionFactory:j,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than-equal",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(sde()).ActorFunctionFactoryTermLesserThan({mediatorFunctionFactory:j,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than",bus:w,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(dde()).ActorHttpWayback({mediatorHttp:Z,name:"urn:comunica:default:http/actors#wayback",bus:E,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}"}),new(qde()).ActorRdfParseJsonLd({mediatorHttp:le,mediaTypePriorities:{"application/json":.15,"application/ld+json":1},mediaTypeFormats:{"application/json":"http://www.w3.org/ns/formats/JSON-LD","application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-parse/actors#jsonld",bus:b,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(Ude()).ActorRdfUpdateHypermediaPatchSparqlUpdate({mediatorHttp:le,name:"urn:comunica:default:rdf-update-hypermedia/actors#patch-sparql-update",bus:A,busFailMessage:"RDF hypermedia updating failed: none of the configured actors were able to handle an update for ${action.url}"}),new(Qde()).ActorRdfUpdateHypermediaPutLdp({mediatorHttp:le,mediatorRdfSerializeMediatypes:Se,mediatorRdfSerialize:ce,name:"urn:comunica:default:rdf-update-hypermedia/actors#put-ldp",bus:A,busFailMessage:"RDF hypermedia updating failed: none of the configured actors were able to handle an update for ${action.url}"}),new(Kde()).ActorRdfUpdateHypermediaSparql({mediatorHttp:le,checkUrlSuffixSparql:!0,checkUrlSuffixUpdate:!0,name:"urn:comunica:default:rdf-update-hypermedia/actors#sparql",bus:A,busFailMessage:"RDF hypermedia updating failed: none of the configured actors were able to handle an update for ${action.url}"}),new(Yde()).ActorQueryOperationAsk({mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#ask",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(ele()).ActorQueryOperationBgpJoin({mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#bgp",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(VJ()).ActorQueryOperationConstruct({mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#construct",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(ole()).ActorQueryOperationDistinctIdentity({mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#distinct",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(cle()).ActorQueryOperationExtend({mediatorExpressionEvaluatorFactory:F,mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#extend",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(lle()).ActorQueryOperationFilter({mediatorExpressionEvaluatorFactory:F,mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#filter",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(hle()).ActorQueryOperationFromQuad({mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#from",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(ble()).ActorQueryOperationProject({mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#project",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(_le()).ActorQueryOperationReducedHash({mediatorHashBindings:me,cacheSize:100,mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#reduced",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(mle()).ActorQueryOperationSlice({mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#slice",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(JJ()).ActorQueryOperationUnion({mediatorRdfMetadataAccumulate:G,mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#union",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Sle()).ActorQueryOperationPathAlt({mediatorRdfMetadataAccumulate:G,mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#path-alt",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Ole()).ActorQueryOperationPathInv({mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#path-inv",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(xle()).ActorQueryOperationPathLink({mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#path-link",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Rle()).ActorQueryOperationPathNps({mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#path-nps",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Nle()).ActorQueryOperationClear({mediatorUpdateQuads:oe,mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#update-clear",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Dle()).ActorQueryOperationUpdateCompositeUpdate({mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#update-composite",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Lle()).ActorQueryOperationCreate({mediatorUpdateQuads:oe,mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#update-create",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Cle()).ActorQueryOperationDrop({mediatorUpdateQuads:oe,mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#update-drop",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Ble()).ActorQueryOperationLoad({mediatorUpdateQuads:oe,mediatorQuerySourceIdentify:Ve,mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#update-load",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Ule()).ActorQueryOperationJoin({mediatorJoin:Be,mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#join",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Qle()).ActorQueryOperationLeftJoin({mediatorJoin:Be,mediatorExpressionEvaluatorFactory:F,mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#leftjoin",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Gle()).ActorQueryOperationMinus({mediatorJoin:Be,mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#minus",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(Xle()).ActorQueryOperationPathSeq({mediatorJoin:Be,mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#path-seq",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const qe=new(kle()).ActorRdfJoinMultiSmallest({mediatorJoinEntriesSort:x,mediatorJoin:Be,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest",bus:B,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(Wle()).ActorBindingsAggregatorFactoryMax({mediatorTermComparatorFactory:Ze,mediatorExpressionEvaluatorFactory:F,name:"urn:comunica:default:bindings-aggregator-factory/actors#max",bus:q,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(Zle()).ActorBindingsAggregatorFactoryMin({mediatorTermComparatorFactory:Ze,mediatorExpressionEvaluatorFactory:F,name:"urn:comunica:default:bindings-aggregator-factory/actors#min",bus:q,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(rfe()).ActorQueryOperationOrderBy({mediatorExpressionEvaluatorFactory:F,mediatorTermComparatorFactory:Ze,mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#orderby",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const Qe=new(ife()).ActorOptimizeQueryOperationFilterPushdown({aggressivePushdown:!1,maxIterations:10,splitConjunctive:!0,mergeConjunctive:!0,pushIntoLeftJoins:!0,pushEqualityIntoPatterns:!0,name:"urn:comunica:default:optimize-query-operation/actors#filter-pushdown",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[he]});new(ufe()).ActorDereferenceHttp({mediatorHttp:le,maxAcceptHeaderLength:1024,maxAcceptHeaderLengthBrowser:128,name:"urn:comunica:default:dereference/actors#http",bus:d,busFailMessage:"Dereferencing failed: none of the configured actors were able to handle ${action.url}",beforeActors:[Q]});const Tt=new(cfe()).ActorHttpProxy({mediatorHttp:le,name:"urn:comunica:default:http/actors#proxy",bus:S,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}",beforeActors:[z]});new(lfe()).ActorContextPreprocessQuerySourceIdentify({cacheSize:100,httpInvalidator:K,mediatorQuerySourceIdentify:Ve,mediatorContextPreprocess:fe,name:"urn:comunica:default:context-preprocess/actors#query-source-identify",bus:i,busFailMessage:"Context preprocessing failed",beforeActors:[U]});const Ue=new(az()).ActorInitQuery({mediatorQueryProcess:Pe,mediatorQueryResultSerialize:Ie,mediatorQueryResultSerializeMediaTypeCombiner:Fe,mediatorQueryResultSerializeMediaTypeFormatCombiner:pe,mediatorHttpInvalidate:we,defaultQueryInputFormat:"sparql",allowNoSources:!1,name:"urn:comunica:default:init/actors#query",bus:o,busFailMessage:"Initialization failed: none of the configured actors were to initialize"});new(hfe()).ActorRdfUpdateQuadsHypermedia({cacheSize:100,httpInvalidator:Ee,mediatorDereferenceRdf:D,mediatorMetadata:$,mediatorMetadataExtract:V,mediatorRdfUpdateHypermedia:Ae,name:"urn:comunica:default:rdf-update-quads/actors#hypermedia",bus:I,busFailMessage:"RDF updating failed: none of the configured actors were able to handle an update"});const ht=new(mV()).ActionObserverHttp({httpInvalidator:et,observedActors:["urn:comunica:default:http/actors#fetch"],name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^4.0.0/components/ActorQueryResultSerializeSparqlJson.jsonld#ActorQueryResultSerializeSparqlJson_default_observer",bus:S}),He=new(SV()).ActionObserverHttp({httpInvalidator:rt,observedActors:["urn:comunica:default:http/actors#fetch"],name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^4.0.0/components/ActorQueryResultSerializeStats.jsonld#ActorQueryResultSerializeStats_default_observer",bus:S});new(wfe()).ActorQuerySourceIdentifyHypermediaQpf({mediatorMetadata:$,mediatorMetadataExtract:V,mediatorDereferenceRdf:D,mediatorMergeBindingsContext:Ke,subjectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#subject",predicateUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#predicate",objectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#object",graphUri:"http://www.w3.org/ns/sparql-service-description#graph",name:"urn:comunica:default:query-source-identify-hypermedia/actors#qpf",bus:s,busFailMessage:"Query source hypermedia identification failed: none of the configured actors were able to identify ${action.url}"}),new(Afe()).ActorQuerySourceIdentifyHypermediaSparql({mediatorHttp:le,mediatorMergeBindingsContext:Ke,checkUrlSuffix:!0,forceHttpGet:!1,cacheSize:1024,forceSourceType:!1,bindMethod:"values",countTimeout:3e3,cardinalityCountQueries:!0,cardinalityEstimateConstruction:!1,name:"urn:comunica:default:query-source-identify-hypermedia/actors#sparql",bus:s,busFailMessage:"Query source hypermedia identification failed: none of the configured actors were able to identify ${action.url}"}),new(Hfe()).ActorQuerySourceIdentifyHypermediaNone({mediatorMergeBindingsContext:Ke,name:"urn:comunica:default:query-source-identify-hypermedia/actors#none",bus:s,busFailMessage:"Query source hypermedia identification failed: none of the configured actors were able to identify ${action.url}"}),new(kfe()).ActorExpressionEvaluatorFactoryDefault({mediatorQueryOperation:ue,mediatorFunctionFactory:j,mediatorMergeBindingsContext:Ke,name:"urn:comunica:default:expression-evaluator-factory/actors#default",bus:O,busFailMessage:"Creation of Expression Evaluator failed"}),new(Yfe()).ActorQueryOperationGroup({mediatorMergeBindingsContext:Ke,mediatorBindingsAggregatorFactory:C,mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#group",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(e0e()).ActorQueryOperationNop({mediatorMergeBindingsContext:Ke,mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#nop",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(r0e()).ActorQueryOperationService({forceSparqlEndpoint:!1,mediatorMergeBindingsContext:Ke,mediatorQuerySourceIdentify:Ve,mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#service",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(i0e()).ActorQueryOperationValues({mediatorMergeBindingsContext:Ke,name:"urn:comunica:default:query-operation/actors#values",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(u0e()).ActorQueryOperationPathOneOrMore({mediatorMergeBindingsContext:Ke,mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#path-one-or-more",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(s0e()).ActorQueryOperationPathZeroOrMore({mediatorMergeBindingsContext:Ke,mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#path-zero-or-more",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(d0e()).ActorQueryOperationPathZeroOrOne({mediatorMergeBindingsContext:Ke,mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#path-zero-or-one",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(f0e()).ActorQueryOperationUpdateDeleteInsert({mediatorUpdateQuads:oe,mediatorMergeBindingsContext:Ke,mediatorQueryOperation:ue,name:"urn:comunica:default:query-operation/actors#update-delete-insert",bus:R,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const Je=new(b0e()).ActorQueryProcessSequential({mediatorContextPreprocess:fe,mediatorQueryParse:xe,mediatorOptimizeQueryOperation:te,mediatorQueryOperation:ue,mediatorMergeBindingsContext:Ke,name:"urn:comunica:default:query-process/actors#sequential",bus:L,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),tt=new(x0e()).ActorQuerySourceIdentifyHypermedia({cacheSize:100,maxIterators:64,aggregateTraversalStore:!0,mediatorDereferenceRdf:D,mediatorMetadata:$,mediatorMetadataExtract:V,mediatorMetadataAccumulate:G,mediatorQuerySourceIdentifyHypermedia:ye,mediatorRdfResolveHypermediaLinks:Y,mediatorRdfResolveHypermediaLinksQueue:se,mediatorMergeBindingsContext:Ke,name:"urn:comunica:default:query-source-identify/actors#hypermedia",bus:M,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}"});new(R0e()).ActorRdfJoinNone({mediatorMergeBindingsContext:Ke,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-none",bus:B,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(P0e()).ActorRdfJoinOptionalBind({bindOrder:"depth-first",selectivityModifier:1e-6,mediatorQueryOperation:ue,mediatorMergeBindingsContext:Ke,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#optional-bind",bus:B,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(C0e()).ActorTermComparatorFactoryExpressionEvaluator({mediatorQueryOperation:ue,mediatorFunctionFactory:j,mediatorMergeBindingsContext:Ke,name:"urn:comunica:default:term-comparator-factory/actors#expression-evaluator",bus:X,busFailMessage:"Creation of term comparator failed"});const wt=new(Rk()).ActorRdfJoinMultiBind({bindOrder:"depth-first",selectivityModifier:1e-4,minMaxCardinalityRatio:60,mediatorJoinEntriesSort:x,mediatorQueryOperation:ue,mediatorMergeBindingsContext:Ke,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind",bus:B,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[qe,lt,re,ne,De]});new(B0e()).ActorRdfJoinMultiSmallestFilterBindings({selectivityModifier:1e-4,blockSize:64,mediatorJoinEntriesSort:x,mediatorJoin:Be,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest-filter-bindings",bus:B,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[qe,lt,re,ne,De]}),new(mV()).ActorQueryResultSerializeSparqlJson({emitMetadata:!0,httpObserver:ht,mediaTypePriorities:{"application/sparql-results+json":.8},mediaTypeFormats:{"application/sparql-results+json":"http://www.w3.org/ns/formats/SPARQL_Results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#sparql-json",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(SV()).ActorQueryResultSerializeStats({httpObserver:He,mediaTypePriorities:{stats:.5},mediaTypeFormats:{stats:"https://comunica.linkeddatafragments.org/#results_stats"},name:"urn:comunica:default:query-result-serialize/actors#stats",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(U0e()).ActorQueryProcessExplainLogical({queryProcessor:Je,name:"urn:comunica:default:query-process/actors#explain-logical",bus:L,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),new(Q0e()).ActorQueryProcessExplainParsed({queryProcessor:Je,name:"urn:comunica:default:query-process/actors#explain-parsed",bus:L,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),new(G0e()).ActorQueryProcessExplainPhysical({queryProcessor:Je,name:"urn:comunica:default:query-process/actors#explain-physical",bus:L,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'});const at=new(X0e()).ActorOptimizeQueryOperationPruneEmptySourceOperations({useAskIfSupported:!1,name:"urn:comunica:default:optimize-query-operation/actors#prune-empty-source-operations",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Qe]});new(k0e()).ActorHttpRetry({mediatorHttp:le,httpInvalidator:$e,name:"urn:comunica:default:http/actors#retry",bus:S,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}",beforeActors:[Tt]}),new(W0e()).ActorHttpLimitRate({mediatorHttp:le,httpInvalidator:Ne,correctionMultiplier:.1,failureMultiplier:10,limitByDefault:!1,allowOverlap:!1,name:"urn:comunica:default:http/actors#limit-rate",bus:S,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}",beforeActors:[Tt]}),new(nE()).ActorQuerySourceIdentifyRdfJs({mediatorMergeBindingsContext:Ke,name:"urn:comunica:default:query-source-identify/actors#rdfjs",bus:M,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}",beforeActors:[tt]}),new(Z0e()).ActorQuerySourceIdentifySerialized({mediatorRdfParse:k,mediatorQuerySourceIdentify:Ve,name:"urn:comunica:default:query-source-identify/actors#serialized",bus:M,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}",beforeActors:[tt]}),new(the()).ActorRdfJoinMultiBindSource({selectivityModifier:1e-4,blockSize:16,mediatorJoinEntriesSort:x,mediatorJoinSelectivity:N,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind-source",bus:B,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[qe,wt,lt,re,ne,De]});const Xe=new(nhe()).ActorOptimizeQueryOperationJoinConnected({name:"urn:comunica:default:optimize-query-operation/actors#join-connected",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[at]}),xr=new(ahe()).ActorOptimizeQueryOperationBgpToJoin({name:"urn:comunica:default:optimize-query-operation/actors#bgp-to-join",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Xe]}),Ge=new(ohe()).ActorOptimizeQueryOperationJoinBgp({name:"urn:comunica:default:optimize-query-operation/actors#join-bgp",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[xr]}),ae=new(che()).ActorOptimizeQueryOperationAssignSourcesExhaustive({name:"urn:comunica:default:optimize-query-operation/actors#assign-sources-exhaustive",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Ge]});return new(lhe()).ActorOptimizeQueryOperationDescribeToConstructsSubject({name:"urn:comunica:default:optimize-query-operation/actors#describe-to-constructs-subject",bus:r,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[ae]}),Ue}),hA}var aG;function hhe(){if(aG)return t0;aG=1,Object.defineProperty(t0,"__esModule",{value:!0}),t0.QueryEngine=void 0;const u=az(),n=fhe();let o=class extends u.QueryEngineBase{constructor(t=n()){super(t)}};return t0.QueryEngine=o,t0}var uG;function phe(){return uG||(uG=1,(function(u){var n=ma&&ma.__createBinding||(Object.create?(function(i,t,e,r){r===void 0&&(r=e);var a=Object.getOwnPropertyDescriptor(t,e);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[e]}}),Object.defineProperty(i,r,a)}):(function(i,t,e,r){r===void 0&&(r=e),i[r]=t[e]})),o=ma&&ma.__exportStar||function(i,t){for(var e in i)e!=="default"&&!Object.prototype.hasOwnProperty.call(t,e)&&n(t,i,e)};Object.defineProperty(u,"__esModule",{value:!0}),o(hhe(),u)})(ma)),ma}var k2e=phe();export{Fr as N,$w as a,k2e as i,_he as r};
